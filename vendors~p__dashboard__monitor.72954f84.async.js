(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"+K+b":function(Se,ct,R){var V=R("JHRd");function E(T){var e=new T.constructor(T.byteLength);return new V(e).set(new V(T)),e}Se.exports=E},"+Qka":function(Se,ct,R){var V=R("fmRc"),E=R("t2Dn"),T=R("cq/+"),e=R("T1AV"),t=R("GoyQ"),u=R("mTTR"),s=R("itsj");function c(r,h,n,i,a){r!==h&&T(h,function(o,l){if(a||(a=new V),t(o))e(r,h,l,n,c,i,a);else{var f=i?i(s(r,l),o,l+"",r,h,a):void 0;f===void 0&&(f=o),E(r,l,f)}},u)}Se.exports=c},"+VLl":function(Se,ct,R){"use strict";R.d(ct,"a",function(){return o});var V=R("lSNA"),E=R.n(V),T=R("J4zp"),e=R.n(T),t=R("Hel2"),u=Math.PI/3,s=[0,u,2*u,3*u,4*u,5*u];function c(l){return l[0]}function r(l){return l[1]}var h=function(){var l=0,f=0,v=1,b=1,g=c,m=r,_,M,x;function y(P){var A={},O=[],L,H=P.length;for(L=0;L<H;++L)if(!(isNaN(Z=+g.call(null,F=P[L],L,P))||isNaN(G=+m.call(null,F,L,P)))){var F,Z,G,U=Math.round(G=G/x),Y=Math.round(Z=Z/M-(U&1)/2),J=G-U;if(Math.abs(J)*3>1){var rt=Z-Y,ft=Y+(Z<Y?-1:1)/2,dt=U+(G<U?-1:1),ut=Z-ft,Lt=G-dt;rt*rt+J*J>ut*ut+Lt*Lt&&(Y=ft+(U&1?1:-1)/2,U=dt)}var Ft=Y+"-"+U,Ot=A[Ft];Ot?Ot.push(F):(O.push(Ot=A[Ft]=[F]),Ot.x=(Y+(U&1)/2)*M,Ot.y=U*x)}return O}function S(P){var A=0,O=0;return s.map(function(L){var H=Math.sin(L)*P,F=-Math.cos(L)*P,Z=H-A,G=F-O;return A=H,O=F,[Z,G]})}return y.hexagon=function(P){return"m"+S(P==null?_:+P).join("l")+"z"},y.centers=function(){for(var P=[],A=Math.round(f/x),O=Math.round(l/M),L=A*x;L<b+_;L+=x,++A)for(var H=O*M+(A&1)*M/2;H<v+M/2;H+=M)P.push([H,L]);return P},y.mesh=function(){var P=S(_).slice(0,4).join("l");return y.centers().map(function(A){return"M"+A+"m"+P}).join("")},y.x=function(P){return arguments.length?(g=P,y):g},y.y=function(P){return arguments.length?(m=P,y):m},y.radius=function(P){return arguments.length?(_=+P,M=_*2*Math.sin(u),x=_*1.5,y):_},y.size=function(P){return arguments.length?(l=f=0,v=+P[0],b=+P[1],y):[v-l,b-f]},y.extent=function(P){return arguments.length?(l=+P[0][0],f=+P[0][1],v=+P[1][0],b=+P[1][1],y):[[l,f],[v,b]]},y.radius(1)};function n(l,f){var v=Object.keys(l);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(l);f&&(b=b.filter(function(g){return Object.getOwnPropertyDescriptor(l,g).enumerable})),v.push.apply(v,b)}return v}function i(l){for(var f=1;f<arguments.length;f++){var v=arguments[f]!=null?arguments[f]:{};f%2?n(Object(v),!0).forEach(function(b){E()(l,b,v[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(v)):n(Object(v)).forEach(function(b){Object.defineProperty(l,b,Object.getOwnPropertyDescriptor(v,b))})}return l}var a=6378e3;function o(l,f){var v=l.dataArray,b=f.size,g=b===void 0?10:b,m=f.method,_=m===void 0?"sum":m,M=g/(2*Math.PI*a)*(256<<20)/2,x=v.map(function(A){var O=Object(t.d)(A.coordinates),L=e()(O,2),H=L[0],F=L[1];return i(i({},A),{},{coordinates:[H,F]})}),y=h().radius(M).x(function(A){return A.coordinates[0]}).y(function(A){return A.coordinates[1]}),S=y(x),P={dataArray:S.map(function(A,O){var L;if(f.field&&_){var H=t.c.getColumn(A,f.field);A[_]=t.c.statMap[_](H)}return L={},E()(L,f.method,A[_]),E()(L,"count",A.length),E()(L,"rawData",A),E()(L,"coordinates",[A.x,A.y]),E()(L,"_id",O),L}),radius:M,xOffset:M,yOffset:M,type:"hexagon"};return P}},"+em5":function(Se,ct,R){"use strict";R.d(ct,"a",function(){return Z});var V=R("lSNA"),E=R.n(V),T=R("yG8O"),e=R.n(T),t=R("lwsE"),u=R.n(t),s=R("W8MJ"),c=R.n(s),r=R("U+yc"),h=R.n(r),n=R("1ABj"),i=R.n(n),a=R("gQMU"),o=R.n(a),l=R("J2iB"),f=R.n(l),v=R("u6S6"),b=R.n(v),g=R("4cb6"),m=R.n(g),_=R("h1nZ"),M=R("bB6j"),x=R("bPkA"),y,S,P,A,O;function L(G,U){var Y=Object.keys(G);if(Object.getOwnPropertySymbols){var J=Object.getOwnPropertySymbols(G);U&&(J=J.filter(function(rt){return Object.getOwnPropertyDescriptor(G,rt).enumerable})),Y.push.apply(Y,J)}return Y}function H(G){for(var U=1;U<arguments.length;U++){var Y=arguments[U]!=null?arguments[U]:{};U%2?L(Object(Y),!0).forEach(function(J){E()(G,J,Y[J])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(Y)):L(Object(Y)).forEach(function(J){Object.defineProperty(G,J,Object.getOwnPropertyDescriptor(Y,J))})}return G}var F=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Z=(y=Object(g.injectable)(),S=Object(g.inject)(M.a.IShaderModuleService),y(P=(A=function(){function G(){u()(this,G),e()(this,"shaderModuleService",O,this),this.rendererService=void 0,this.config=void 0,this.quad=F,this.enabled=!0,this.renderToScreen=!1,this.model=void 0,this.name=void 0,this.optionsToUpdate={}}return c()(G,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(Y){this.name=Y}},{key:"getType",value:function(){return x.a.PostProcessing}},{key:"init",value:function(Y,J){this.config=J,this.rendererService=Y.getContainer().get(M.a.IRendererService);var rt=this.rendererService,ft=rt.createAttribute,dt=rt.createBuffer,ut=rt.createModel,Lt=this.setupShaders(),Ft=Lt.vs,Ot=Lt.fs,St=Lt.uniforms;this.model=ut({vs:Ft,fs:Ot,attributes:{a_Position:ft({buffer:dt({data:[-4,-4,4,-4,0,4],type:_.gl.FLOAT}),size:2})},uniforms:H(H({u_Texture:null},St),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}},{key:"render",value:function(Y){var J=this,rt=Y.multiPassRenderer.getPostProcessor(),ft=this.rendererService,dt=ft.useFramebuffer,ut=ft.getViewportSize,Lt=ft.clear,Ft=ut(),Ot=Ft.width,St=Ft.height;dt(this.renderToScreen?null:rt.getWriteFBO(),function(){Lt({framebuffer:rt.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0}),J.model.draw({uniforms:H({u_Texture:rt.getReadFBO(),u_ViewportSize:[Ot,St]},J.convertOptionsToUniforms(J.optionsToUpdate))})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(Y){this.enabled=Y}},{key:"setRenderToScreen",value:function(Y){this.renderToScreen=Y}},{key:"updateOptions",value:function(Y){this.optionsToUpdate=H(H({},this.optionsToUpdate),Y)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(Y){var J={};return Object.keys(Y).forEach(function(rt){f()(Y[rt])||(J["u_".concat(o()(b()(rt)))]=Y[rt])}),J}}]),G}(),O=h()(A.prototype,"shaderModuleService",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A))||P)},"+iFO":function(Se,ct,R){var V=R("dTAl"),E=R("LcsW"),T=R("6sVZ");function e(t){return typeof t.constructor=="function"&&!T(t)?V(E(t)):{}}Se.exports=e},"/33/":function(Se,ct){},"/Uc5":function(Se,ct){},"/ezw":function(Se,ct,R){"use strict";var V=R("rePB"),E=R("wx14"),T=R("U8pU"),e=R("q1tI"),t=R("TSYQ"),u=R.n(t),s=function(G){var U=G.prefixCls,Y=G.className,J=G.width,rt=G.style;return e.createElement("h3",{className:u()(U,Y),style:Object(E.a)({width:J},rt)})},c=s,r=R("KQm4"),h=function(G){var U=function(Lt){var Ft=G.width,Ot=G.rows,St=Ot===void 0?2:Ot;if(Array.isArray(Ft))return Ft[Lt];if(St-1===Lt)return Ft},Y=G.prefixCls,J=G.className,rt=G.style,ft=G.rows,dt=Object(r.a)(Array(ft)).map(function(ut,Lt){return e.createElement("li",{key:Lt,style:{width:U(Lt)}})});return e.createElement("ul",{className:u()(Y,J),style:rt},dt)},n=h,i=R("H84U"),a=function(G){var U,Y,J=G.prefixCls,rt=G.className,ft=G.style,dt=G.size,ut=G.shape,Lt=u()((U={},Object(V.a)(U,"".concat(J,"-lg"),dt==="large"),Object(V.a)(U,"".concat(J,"-sm"),dt==="small"),U)),Ft=u()((Y={},Object(V.a)(Y,"".concat(J,"-circle"),ut==="circle"),Object(V.a)(Y,"".concat(J,"-square"),ut==="square"),Object(V.a)(Y,"".concat(J,"-round"),ut==="round"),Y)),Ot=typeof dt=="number"?{width:dt,height:dt,lineHeight:"".concat(dt,"px")}:{};return e.createElement("span",{className:u()(J,Lt,Ft,rt),style:Object(E.a)(Object(E.a)({},Ot),ft)})},o=a,l=R("bT9E"),f=function(G){var U=function(J){var rt=J.getPrefixCls,ft=G.prefixCls,dt=G.className,ut=G.active,Lt=rt("skeleton",ft),Ft=Object(l.a)(G,["prefixCls"]),Ot=u()(Lt,"".concat(Lt,"-element"),Object(V.a)({},"".concat(Lt,"-active"),ut),dt);return e.createElement("div",{className:Ot},e.createElement(o,Object(E.a)({prefixCls:"".concat(Lt,"-avatar")},Ft)))};return e.createElement(i.a,null,U)};f.defaultProps={size:"default",shape:"circle"};var v=f,b=function(G){var U=function(J){var rt=J.getPrefixCls,ft=G.prefixCls,dt=G.className,ut=G.active,Lt=rt("skeleton",ft),Ft=Object(l.a)(G,["prefixCls"]),Ot=u()(Lt,"".concat(Lt,"-element"),Object(V.a)({},"".concat(Lt,"-active"),ut),dt);return e.createElement("div",{className:Ot},e.createElement(o,Object(E.a)({prefixCls:"".concat(Lt,"-button")},Ft)))};return e.createElement(i.a,null,U)};b.defaultProps={size:"default"};var g=b,m=function(G){var U=function(J){var rt=J.getPrefixCls,ft=G.prefixCls,dt=G.className,ut=G.active,Lt=rt("skeleton",ft),Ft=Object(l.a)(G,["prefixCls"]),Ot=u()(Lt,"".concat(Lt,"-element"),Object(V.a)({},"".concat(Lt,"-active"),ut),dt);return e.createElement("div",{className:Ot},e.createElement(o,Object(E.a)({prefixCls:"".concat(Lt,"-input")},Ft)))};return e.createElement(i.a,null,U)};m.defaultProps={size:"default"};var _=m,M="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",x=function(G){var U=function(J){var rt=J.getPrefixCls,ft=G.prefixCls,dt=G.className,ut=G.style,Lt=rt("skeleton",ft),Ft=u()(Lt,"".concat(Lt,"-element"),dt);return e.createElement("div",{className:Ft},e.createElement("div",{className:u()("".concat(Lt,"-image"),dt),style:ut},e.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:"".concat(Lt,"-image-svg")},e.createElement("path",{d:M,className:"".concat(Lt,"-image-path")}))))};return e.createElement(i.a,null,U)},y=x;function S(Z){return Z&&Object(T.a)(Z)==="object"?Z:{}}function P(Z,G){return Z&&!G?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function A(Z,G){return!Z&&G?{width:"38%"}:Z&&G?{width:"50%"}:{}}function O(Z,G){var U={};return(!Z||!G)&&(U.width="61%"),!Z&&G?U.rows=3:U.rows=2,U}var L=function(G){var U=function(J){var rt=J.getPrefixCls,ft=J.direction,dt=G.prefixCls,ut=G.loading,Lt=G.className,Ft=G.children,Ot=G.avatar,St=G.title,xt=G.paragraph,At=G.active,nt=G.round,Mt=rt("skeleton",dt);if(ut||!("loading"in G)){var z,Q=!!Ot,ht=!!St,et=!!xt,at;if(Q){var gt=Object(E.a)(Object(E.a)({prefixCls:"".concat(Mt,"-avatar")},P(ht,et)),S(Ot));at=e.createElement("div",{className:"".concat(Mt,"-header")},e.createElement(o,gt))}var k;if(ht||et){var ot;if(ht){var it=Object(E.a)(Object(E.a)({prefixCls:"".concat(Mt,"-title")},A(Q,et)),S(St));ot=e.createElement(c,it)}var X;if(et){var Et=Object(E.a)(Object(E.a)({prefixCls:"".concat(Mt,"-paragraph")},O(Q,ht)),S(xt));X=e.createElement(n,Et)}k=e.createElement("div",{className:"".concat(Mt,"-content")},ot,X)}var vt=u()(Mt,(z={},Object(V.a)(z,"".concat(Mt,"-with-avatar"),Q),Object(V.a)(z,"".concat(Mt,"-active"),At),Object(V.a)(z,"".concat(Mt,"-rtl"),ft==="rtl"),Object(V.a)(z,"".concat(Mt,"-round"),nt),z),Lt);return e.createElement("div",{className:vt},at,k)}return Ft};return e.createElement(i.a,null,U)};L.defaultProps={avatar:!1,title:!0,paragraph:!0},L.Button=g,L.Avatar=v,L.Input=_,L.Image=y;var H=L,F=ct.a=H},"/zsF":function(Se,ct,R){"use strict";var V=R("cIOH"),E=R.n(V),T=R("bE4E"),e=R.n(T)},"0JQy":function(Se,ct){var R="\\ud800-\\udfff",V="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",e=V+E+T,t="\\ufe0e\\ufe0f",u="["+R+"]",s="["+e+"]",c="\\ud83c[\\udffb-\\udfff]",r="(?:"+s+"|"+c+")",h="[^"+R+"]",n="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",a="\\u200d",o=r+"?",l="["+t+"]?",f="(?:"+a+"(?:"+[h,n,i].join("|")+")"+l+o+")*",v=l+o+f,b="(?:"+[h+s+"?",s,n,i,u].join("|")+")",g=RegExp(c+"(?="+c+")|"+b+v,"g");function m(_){return _.match(g)||[]}Se.exports=m},"0ZTe":function(Se,ct,R){var V=R("wy8a"),E=R("quyA"),T=R("Em2t"),e=R("dt0z");function t(u){return function(s){s=e(s);var c=E(s)?T(s):void 0,r=c?c[0]:s.charAt(0),h=c?V(c,1).join(""):s.slice(1);return r[u]()+h}}Se.exports=t},"0eqD":function(Se,ct){},"0gSV":function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.tagged=void 0;var V=R("GXnB"),E=R("Ztfv");function T(e,t){return function(u,s,c){var r=new V.Metadata(e,t);typeof c=="number"?E.tagParameter(u,s,c,r):E.tagProperty(u,s,r)}}ct.tagged=T},"0wsv":function(Se,ct,R){"use strict";R.d(ct,"b",function(){return t}),R.d(ct,"f",function(){return s}),R.d(ct,"e",function(){return n}),R.d(ct,"g",function(){return g}),R.d(ct,"a",function(){return y}),R.d(ct,"c",function(){return A}),R.d(ct,"d",function(){return O});var V=63710088e-1,E={centimeters:V*100,centimetres:V*100,degrees:V/111325,feet:V*3.28084,inches:V*39.37,kilometers:V/1e3,kilometres:V/1e3,meters:V,metres:V,miles:V/1609.344,millimeters:V*1e3,millimetres:V*1e3,nauticalmiles:V/1852,radians:1,yards:V/1.0936},T={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/V,yards:1/1.0936},e={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function t(F,Z,G){G===void 0&&(G={});var U={type:"Feature"};return(G.id===0||G.id)&&(U.id=G.id),G.bbox&&(U.bbox=G.bbox),U.properties=Z||{},U.geometry=F,U}function u(F,Z,G){switch(G===void 0&&(G={}),F){case"Point":return s(Z).geometry;case"LineString":return n(Z).geometry;case"Polygon":return r(Z).geometry;case"MultiPoint":return l(Z).geometry;case"MultiLineString":return o(Z).geometry;case"MultiPolygon":return f(Z).geometry;default:throw new Error(F+" is invalid")}}function s(F,Z,G){if(G===void 0&&(G={}),!F)throw new Error("coordinates is required");if(!Array.isArray(F))throw new Error("coordinates must be an Array");if(F.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!A(F[0])||!A(F[1]))throw new Error("coordinates must contain numbers");var U={type:"Point",coordinates:F};return t(U,Z,G)}function c(F,Z,G){return G===void 0&&(G={}),a(F.map(function(U){return s(U,Z)}),G)}function r(F,Z,G){G===void 0&&(G={});for(var U=0,Y=F;U<Y.length;U++){var J=Y[U];if(J.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var rt=0;rt<J[J.length-1].length;rt++)if(J[J.length-1][rt]!==J[0][rt])throw new Error("First and last Position are not equivalent.")}var ft={type:"Polygon",coordinates:F};return t(ft,Z,G)}function h(F,Z,G){return G===void 0&&(G={}),a(F.map(function(U){return r(U,Z)}),G)}function n(F,Z,G){if(G===void 0&&(G={}),F.length<2)throw new Error("coordinates must be an array of two or more positions");var U={type:"LineString",coordinates:F};return t(U,Z,G)}function i(F,Z,G){return G===void 0&&(G={}),a(F.map(function(U){return n(U,Z)}),G)}function a(F,Z){Z===void 0&&(Z={});var G={type:"FeatureCollection"};return Z.id&&(G.id=Z.id),Z.bbox&&(G.bbox=Z.bbox),G.features=F,G}function o(F,Z,G){G===void 0&&(G={});var U={type:"MultiLineString",coordinates:F};return t(U,Z,G)}function l(F,Z,G){G===void 0&&(G={});var U={type:"MultiPoint",coordinates:F};return t(U,Z,G)}function f(F,Z,G){G===void 0&&(G={});var U={type:"MultiPolygon",coordinates:F};return t(U,Z,G)}function v(F,Z,G){G===void 0&&(G={});var U={type:"GeometryCollection",geometries:F};return t(U,Z,G)}function b(F,Z){if(Z===void 0&&(Z=0),Z&&!(Z>=0))throw new Error("precision must be a positive number");var G=Math.pow(10,Z||0);return Math.round(F*G)/G}function g(F,Z){Z===void 0&&(Z="kilometers");var G=E[Z];if(!G)throw new Error(Z+" units is invalid");return F*G}function m(F,Z){Z===void 0&&(Z="kilometers");var G=E[Z];if(!G)throw new Error(Z+" units is invalid");return F/G}function _(F,Z){return x(m(F,Z))}function M(F){var Z=F%360;return Z<0&&(Z+=360),Z}function x(F){var Z=F%(2*Math.PI);return Z*180/Math.PI}function y(F){var Z=F%360;return Z*Math.PI/180}function S(F,Z,G){if(Z===void 0&&(Z="kilometers"),G===void 0&&(G="kilometers"),!(F>=0))throw new Error("length must be a positive number");return g(m(F,Z),G)}function P(F,Z,G){if(Z===void 0&&(Z="meters"),G===void 0&&(G="kilometers"),!(F>=0))throw new Error("area must be a positive number");var U=e[Z];if(!U)throw new Error("invalid original units");var Y=e[G];if(!Y)throw new Error("invalid final units");return F/U*Y}function A(F){return!isNaN(F)&&F!==null&&!Array.isArray(F)}function O(F){return!!F&&F.constructor===Object}function L(F){if(!F)throw new Error("bbox is required");if(!Array.isArray(F))throw new Error("bbox must be an Array");if(F.length!==4&&F.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");F.forEach(function(Z){if(!A(Z))throw new Error("bbox must only contain numbers")})}function H(F){if(!F)throw new Error("id is required");if(["string","number"].indexOf(typeof F)===-1)throw new Error("id must be a number or a string")}},"1+5i":function(Se,ct,R){var V=R("w/wX"),E=R("sEf8"),T=R("mdPL"),e=T&&T.isSet,t=e?E(e):V;Se.exports=t},"14J3":function(Se,ct,R){"use strict";var V=R("cIOH"),E=R.n(V),T=R("1GLa")},"1ABj":function(Se,ct){function R(V,E){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}Se.exports=R,Se.exports.default=Se.exports,Se.exports.__esModule=!0},"1gqn":function(Se,ct){Se.exports=function(V){return V&&typeof V=="object"&&typeof V.copy=="function"&&typeof V.fill=="function"&&typeof V.readUInt8=="function"}},"1jvM":function(Se,ct){},"2ajD":function(Se,ct){function R(V){return V!==V}Se.exports=R},"3DfO":function(Se,ct){function R(V){return V==null}Se.exports=R},"3L66":function(Se,ct,R){var V=R("MMmD"),E=R("ExA7");function T(e){return E(e)&&V(e)}Se.exports=T},"3cYt":function(Se,ct){function R(V){return function(E){return V==null?void 0:V[E]}}Se.exports=R},"406g":function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.BindingOnSyntax=void 0;var V=R("z4Hk"),E=function(){function T(e){this._binding=e}return T.prototype.onActivation=function(e){return this._binding.onActivation=e,new V.BindingWhenSyntax(this._binding)},T}();ct.BindingOnSyntax=E},"4U9+":function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.default=function(l){return(0,E.default)((0,c.default)(l)&&l.length>=1,"Must merge at least 1 JSON schema."),e.default.apply(void 0,[{}].concat(o(l),[function(f,v,b){if(!(0,u.default)(f)){if(b==="required")return(0,h.default)(f.concat(v));if((0,i.default)(f)){if(!(0,i.default)(v))throw new Error('Failed to merge schemas because "'+b+'" has different values.');return}E.default.deepEqual(f,v,'Failed to merge schemas because "'+b+'" has different values: '+JSON.stringify(f)+" and "+JSON.stringify(v)+".")}}]))};var V=R("9lTW"),E=a(V),T=R("qd8s"),e=a(T),t=R("3DfO"),u=a(t),s=R("WFAs"),c=a(s),r=R("w26f"),h=a(r),n=R("zZPE"),i=a(n);function a(l){return l&&l.__esModule?l:{default:l}}function o(l){if(Array.isArray(l)){for(var f=0,v=Array(l.length);f<l.length;f++)v[f]=l[f];return v}else return Array.from(l)}Se.exports=ct.default},"4ZJM":function(Se,ct,R){(function(V,E){Se.exports=E()})(this,function(){"use strict";var V,E,T;function e(t,u){if(!V)V=u;else if(!E)E=u;else{var s="var sharedChunk = {}; ("+V+")(sharedChunk); ("+E+")(sharedChunk);",c={};V(c),T=u(c),typeof window!="undefined"&&(T.workerUrl=window.URL.createObjectURL(new Blob([s],{type:"text/javascript"})))}}return e(["exports"],function(t){"use strict";function u(d,p){return d(p={exports:{}},p.exports),p.exports}var s=c;function c(d,p,C,N){this.cx=3*d,this.bx=3*(C-d)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*p,this.by=3*(N-p)-this.cy,this.ay=1-this.cy-this.by,this.p1x=d,this.p1y=N,this.p2x=C,this.p2y=N}c.prototype.sampleCurveX=function(d){return((this.ax*d+this.bx)*d+this.cx)*d},c.prototype.sampleCurveY=function(d){return((this.ay*d+this.by)*d+this.cy)*d},c.prototype.sampleCurveDerivativeX=function(d){return(3*this.ax*d+2*this.bx)*d+this.cx},c.prototype.solveCurveX=function(d,p){var C,N,$,lt,Tt;for(p===void 0&&(p=1e-6),$=d,Tt=0;Tt<8;Tt++){if(lt=this.sampleCurveX($)-d,Math.abs(lt)<p)return $;var Bt=this.sampleCurveDerivativeX($);if(Math.abs(Bt)<1e-6)break;$-=lt/Bt}if(($=d)<(C=0))return C;if($>(N=1))return N;for(;C<N;){if(lt=this.sampleCurveX($),Math.abs(lt-d)<p)return $;d>lt?C=$:N=$,$=.5*(N-C)+C}return $},c.prototype.solve=function(d,p){return this.sampleCurveY(this.solveCurveX(d,p))};var r=h;function h(d,p){this.x=d,this.y=p}h.prototype={clone:function(){return new h(this.x,this.y)},add:function(p){return this.clone()._add(p)},sub:function(p){return this.clone()._sub(p)},multByPoint:function(p){return this.clone()._multByPoint(p)},divByPoint:function(p){return this.clone()._divByPoint(p)},mult:function(p){return this.clone()._mult(p)},div:function(p){return this.clone()._div(p)},rotate:function(p){return this.clone()._rotate(p)},rotateAround:function(p,C){return this.clone()._rotateAround(p,C)},matMult:function(p){return this.clone()._matMult(p)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(p){return this.x===p.x&&this.y===p.y},dist:function(p){return Math.sqrt(this.distSqr(p))},distSqr:function(p){var C=p.x-this.x,N=p.y-this.y;return C*C+N*N},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(p){return Math.atan2(this.y-p.y,this.x-p.x)},angleWith:function(p){return this.angleWithSep(p.x,p.y)},angleWithSep:function(p,C){return Math.atan2(this.x*C-this.y*p,this.x*p+this.y*C)},_matMult:function(p){var C=p[2]*this.x+p[3]*this.y;return this.x=p[0]*this.x+p[1]*this.y,this.y=C,this},_add:function(p){return this.x+=p.x,this.y+=p.y,this},_sub:function(p){return this.x-=p.x,this.y-=p.y,this},_mult:function(p){return this.x*=p,this.y*=p,this},_div:function(p){return this.x/=p,this.y/=p,this},_multByPoint:function(p){return this.x*=p.x,this.y*=p.y,this},_divByPoint:function(p){return this.x/=p.x,this.y/=p.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var p=this.y;return this.y=this.x,this.x=-p,this},_rotate:function(p){var C=Math.cos(p),N=Math.sin(p),$=N*this.x+C*this.y;return this.x=C*this.x-N*this.y,this.y=$,this},_rotateAround:function(p,C){var N=Math.cos(p),$=Math.sin(p),lt=C.y+$*(this.x-C.x)+N*(this.y-C.y);return this.x=C.x+N*(this.x-C.x)-$*(this.y-C.y),this.y=lt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(d){return d instanceof h?d:Array.isArray(d)?new h(d[0],d[1]):d};var n=typeof self!="undefined"?self:{},i=Math.pow(2,53)-1;function a(d,p,C,N){var $=new s(d,p,C,N);return function(lt){return $.solve(lt)}}var o=a(.25,.1,.25,1);function l(d,p,C){return Math.min(C,Math.max(p,d))}function f(d,p,C){var N=C-p,$=((d-p)%N+N)%N+p;return $===p?C:$}function v(d){for(var p=[],C=arguments.length-1;C-- >0;)p[C]=arguments[C+1];for(var N=0,$=p;N<$.length;N+=1){var lt=$[N];for(var Tt in lt)d[Tt]=lt[Tt]}return d}var b=1;function g(){return b++}function m(){return function d(p){return p?(p^16*Math.random()>>p/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,d)}()}function _(d){return!!d&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(d)}function M(d,p){d.forEach(function(C){p[C]&&(p[C]=p[C].bind(p))})}function x(d,p){return d.indexOf(p,d.length-p.length)!==-1}function y(d,p,C){var N={};for(var $ in d)N[$]=p.call(C||this,d[$],$,d);return N}function S(d,p,C){var N={};for(var $ in d)p.call(C||this,d[$],$,d)&&(N[$]=d[$]);return N}function P(d){return Array.isArray(d)?d.map(P):typeof d=="object"&&d?y(d,P):d}var A={};function O(d){A[d]||(typeof console!="undefined"&&console.warn(d),A[d]=!0)}function L(d,p,C){return(C.y-d.y)*(p.x-d.x)>(p.y-d.y)*(C.x-d.x)}function H(d){for(var p=0,C=0,N=d.length,$=N-1,lt=void 0,Tt=void 0;C<N;$=C++)p+=((Tt=d[$]).x-(lt=d[C]).x)*(lt.y+Tt.y);return p}function F(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function Z(d){var p={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(N,$,lt,Tt){var Bt=lt||Tt;return p[$]=!Bt||Bt.toLowerCase(),""}),p["max-age"]){var C=parseInt(p["max-age"],10);isNaN(C)?delete p["max-age"]:p["max-age"]=C}return p}var G=null;function U(d){if(G==null){var p=d.navigator?d.navigator.userAgent:null;G=!!d.safari||!(!p||!(/\b(iPad|iPhone|iPod)\b/.test(p)||p.match("Safari")&&!p.match("Chrome")))}return G}function Y(d){try{var p=n[d];return p.setItem("_mapbox_test_",1),p.removeItem("_mapbox_test_"),!0}catch(C){return!1}}var J,rt,ft,dt,ut=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now.bind(Date),Lt=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame,Ft=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.msCancelAnimationFrame,Ot={now:ut,frame:function(p){var C=Lt(p);return{cancel:function(){return Ft(C)}}},getImageData:function(p,C){C===void 0&&(C=0);var N=n.document.createElement("canvas"),$=N.getContext("2d");if(!$)throw new Error("failed to create canvas 2d context");return N.width=p.width,N.height=p.height,$.drawImage(p,0,0,p.width,p.height),$.getImageData(-C,-C,p.width+2*C,p.height+2*C)},resolveURL:function(p){return J||(J=n.document.createElement("a")),J.href=p,J.href},hardwareConcurrency:n.navigator&&n.navigator.hardwareConcurrency||4,get devicePixelRatio(){return n.devicePixelRatio},get prefersReducedMotion(){return!!n.matchMedia&&(rt==null&&(rt=n.matchMedia("(prefers-reduced-motion: reduce)")),rt.matches)}},St={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},xt={supported:!1,testSupport:function(p){!At&&dt&&(nt?Mt(p):ft=p)}},At=!1,nt=!1;function Mt(d){var p=d.createTexture();d.bindTexture(d.TEXTURE_2D,p);try{if(d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,dt),d.isContextLost())return;xt.supported=!0}catch(C){}d.deleteTexture(p),At=!0}n.document&&((dt=n.document.createElement("img")).onload=function(){ft&&Mt(ft),ft=null,nt=!0},dt.onerror=function(){At=!0,ft=null},dt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var z="01",Q=function(p,C){this._transformRequestFn=p,this._customAccessToken=C,this._createSkuToken()};function ht(d){return d.indexOf("mapbox:")===0}Q.prototype._createSkuToken=function(){var d=function(){for(var p="",C=0;C<10;C++)p+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",z,p].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=d.token,this._skuTokenExpiresAt=d.tokenExpiresAt},Q.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Q.prototype.transformRequest=function(d,p){return this._transformRequestFn&&this._transformRequestFn(d,p)||{url:d}},Q.prototype.normalizeStyleURL=function(d,p){if(!ht(d))return d;var C=k(d);return C.path="/styles/v1"+C.path,this._makeAPIURL(C,this._customAccessToken||p)},Q.prototype.normalizeGlyphsURL=function(d,p){if(!ht(d))return d;var C=k(d);return C.path="/fonts/v1"+C.path,this._makeAPIURL(C,this._customAccessToken||p)},Q.prototype.normalizeSourceURL=function(d,p){if(!ht(d))return d;var C=k(d);return C.path="/v4/"+C.authority+".json",C.params.push("secure"),this._makeAPIURL(C,this._customAccessToken||p)},Q.prototype.normalizeSpriteURL=function(d,p,C,N){var $=k(d);return ht(d)?($.path="/styles/v1"+$.path+"/sprite"+p+C,this._makeAPIURL($,this._customAccessToken||N)):($.path+=""+p+C,ot($))},Q.prototype.normalizeTileURL=function(d,p){if(this._isSkuTokenExpired()&&this._createSkuToken(),d&&!ht(d))return d;var C=k(d);C.path=C.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Ot.devicePixelRatio>=2||p===512?"@2x":"")+(xt.supported?".webp":"$1")),C.path=C.path.replace(/^.+\/v4\//,"/"),C.path="/v4"+C.path;var N=this._customAccessToken||function($){for(var lt=0,Tt=$;lt<Tt.length;lt+=1){var Bt=Tt[lt].match(/^access_token=(.*)$/);if(Bt)return Bt[1]}return null}(C.params)||St.ACCESS_TOKEN;return St.REQUIRE_ACCESS_TOKEN&&N&&this._skuToken&&C.params.push("sku="+this._skuToken),this._makeAPIURL(C,N)},Q.prototype.canonicalizeTileURL=function(d,p){var C=k(d);if(!C.path.match(/(^\/v4\/)/)||!C.path.match(/\.[\w]+$/))return d;var N="mapbox://tiles/";N+=C.path.replace("/v4/","");var $=C.params;return p&&($=$.filter(function(lt){return!lt.match(/^access_token=/)})),$.length&&(N+="?"+$.join("&")),N},Q.prototype.canonicalizeTileset=function(d,p){for(var C=!!p&&ht(p),N=[],$=0,lt=d.tiles||[];$<lt.length;$+=1){var Tt=lt[$];at(Tt)?N.push(this.canonicalizeTileURL(Tt,C)):N.push(Tt)}return N},Q.prototype._makeAPIURL=function(d,p){var C="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",N=k(St.API_URL);if(d.protocol=N.protocol,d.authority=N.authority,d.protocol==="http"){var $=d.params.indexOf("secure");$>=0&&d.params.splice($,1)}if(N.path!=="/"&&(d.path=""+N.path+d.path),!St.REQUIRE_ACCESS_TOKEN)return ot(d);if(!(p=p||St.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+C);if(p[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+C);return d.params=d.params.filter(function(lt){return lt.indexOf("access_token")===-1}),d.params.push("access_token="+p),ot(d)};var et=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function at(d){return et.test(d)}var gt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function k(d){var p=d.match(gt);if(!p)throw new Error("Unable to parse URL object");return{protocol:p[1],authority:p[2],path:p[3]||"/",params:p[4]?p[4].split("&"):[]}}function ot(d){var p=d.params.length?"?"+d.params.join("&"):"";return d.protocol+"://"+d.authority+d.path+p}function it(d){if(!d)return null;var p=d.split(".");if(!p||p.length!==3)return null;try{return JSON.parse(decodeURIComponent(n.atob(p[1]).split("").map(function(C){return"%"+("00"+C.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(C){return null}}var X=function(p){this.type=p,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};X.prototype.getStorageKey=function(d){var p,C=it(St.ACCESS_TOKEN);return p=C&&C.u?n.btoa(encodeURIComponent(C.u).replace(/%([0-9A-F]{2})/g,function(N,$){return String.fromCharCode(Number("0x"+$))})):St.ACCESS_TOKEN||"",d?"mapbox.eventData."+d+":"+p:"mapbox.eventData:"+p},X.prototype.fetchEventData=function(){var d=Y("localStorage"),p=this.getStorageKey(),C=this.getStorageKey("uuid");if(d)try{var N=n.localStorage.getItem(p);N&&(this.eventData=JSON.parse(N));var $=n.localStorage.getItem(C);$&&(this.anonId=$)}catch(lt){O("Unable to read from LocalStorage")}},X.prototype.saveEventData=function(){var d=Y("localStorage"),p=this.getStorageKey(),C=this.getStorageKey("uuid");if(d)try{n.localStorage.setItem(C,this.anonId),Object.keys(this.eventData).length>=1&&n.localStorage.setItem(p,JSON.stringify(this.eventData))}catch(N){O("Unable to write to LocalStorage")}},X.prototype.processRequests=function(d){},X.prototype.postEvent=function(d,p,C,N){var $=this;if(St.EVENTS_URL){var lt=k(St.EVENTS_URL);lt.params.push("access_token="+(N||St.ACCESS_TOKEN||""));var Tt={event:this.type,created:new Date(d).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.1",skuId:z,userId:this.anonId},Bt=p?v(Tt,p):Tt,Jt={url:ot(lt),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Bt])};this.pendingRequest=di(Jt,function(de){$.pendingRequest=null,C(de),$.saveEventData(),$.processRequests(N)})}},X.prototype.queueRequest=function(d,p){this.queue.push(d),this.processRequests(p)};var Et,vt,Nt=function(d){function p(){d.call(this,"map.load"),this.success={},this.skuToken=""}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.postMapLoadEvent=function(C,N,$,lt){this.skuToken=$,(St.EVENTS_URL&&lt||St.ACCESS_TOKEN&&Array.isArray(C)&&C.some(function(Tt){return ht(Tt)||at(Tt)}))&&this.queueRequest({id:N,timestamp:Date.now()},lt)},p.prototype.processRequests=function(C){var N=this;if(!this.pendingRequest&&this.queue.length!==0){var $=this.queue.shift(),lt=$.id,Tt=$.timestamp;lt&&this.success[lt]||(this.anonId||this.fetchEventData(),_(this.anonId)||(this.anonId=m()),this.postEvent(Tt,{skuToken:this.skuToken},function(Bt){Bt||lt&&(N.success[lt]=!0)},C))}},p}(X),$t=new(function(d){function p(C){d.call(this,"appUserTurnstile"),this._customAccessToken=C}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.postTurnstileEvent=function(C,N){St.EVENTS_URL&&St.ACCESS_TOKEN&&Array.isArray(C)&&C.some(function($){return ht($)||at($)})&&this.queueRequest(Date.now(),N)},p.prototype.processRequests=function(C){var N=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var $=it(St.ACCESS_TOKEN),lt=$?$.u:St.ACCESS_TOKEN,Tt=lt!==this.eventData.tokenU;_(this.anonId)||(this.anonId=m(),Tt=!0);var Bt=this.queue.shift();if(this.eventData.lastSuccess){var Jt=new Date(this.eventData.lastSuccess),de=new Date(Bt),Le=(Bt-this.eventData.lastSuccess)/864e5;Tt=Tt||Le>=1||Le<-1||Jt.getDate()!==de.getDate()}else Tt=!0;if(!Tt)return this.processRequests();this.postEvent(Bt,{"enabled.telemetry":!1},function(Ge){Ge||(N.eventData.lastSuccess=Bt,N.eventData.tokenU=lt)},C)}},p}(X)),ee=$t.postTurnstileEvent.bind($t),kt=new Nt,Wt=kt.postMapLoadEvent.bind(kt),ae=500,le=50;function je(){n.caches&&!Et&&(Et=n.caches.open("mapbox-tiles"))}function Oe(d){var p=d.indexOf("?");return p<0?d:d.slice(0,p)}var We,Ye=1/0;function wn(){return We==null&&(We=n.OffscreenCanvas&&new n.OffscreenCanvas(1,1).getContext("2d")&&typeof n.createImageBitmap=="function"),We}var er={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(er);var wr=function(d){function p(C,N,$){N===401&&at($)&&(C+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),d.call(this,C),this.status=N,this.url=$,this.name=this.constructor.name,this.message=C}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},p}(Error),on=F()?function(){return self.worker&&self.worker.referrer}:function(){return(n.location.protocol==="blob:"?n.parent:n).location.href},en,An,jn=function(p,C){if(!(/^file:/.test(N=p.url)||/^file:/.test(on())&&!/^\w+:/.test(N))){if(n.fetch&&n.Request&&n.AbortController&&n.Request.prototype.hasOwnProperty("signal"))return function($,lt){var Tt,Bt=new n.AbortController,Jt=new n.Request($.url,{method:$.method||"GET",body:$.body,credentials:$.credentials,headers:$.headers,referrer:on(),signal:Bt.signal}),de=!1,Le=!1,Ge=(Tt=Jt.url).indexOf("sku=")>0&&at(Tt);$.type==="json"&&Jt.headers.set("Accept","application/json");var He=function(Cn,Zn,Kn){if(!Le){if(Cn&&Cn.message!=="SecurityError"&&O(Cn),Zn&&Kn)return ln(Zn);var _r=Date.now();n.fetch(Jt).then(function(jr){if(jr.ok){var kr=Ge?jr.clone():null;return ln(jr,kr,_r)}return lt(new wr(jr.statusText,jr.status,$.url))}).catch(function(jr){jr.code!==20&&lt(new Error(jr.message))})}},ln=function(Cn,Zn,Kn){($.type==="arrayBuffer"?Cn.arrayBuffer():$.type==="json"?Cn.json():Cn.text()).then(function(_r){Le||(Zn&&Kn&&function(jr,kr,vi){if(je(),Et){var oi={status:kr.status,statusText:kr.statusText,headers:new n.Headers};kr.headers.forEach(function(Fi,oa){return oi.headers.set(oa,Fi)});var Ni=Z(kr.headers.get("Cache-Control")||"");Ni["no-store"]||(Ni["max-age"]&&oi.headers.set("Expires",new Date(vi+1e3*Ni["max-age"]).toUTCString()),new Date(oi.headers.get("Expires")).getTime()-vi<42e4||function(Fi,oa){if(vt===void 0)try{new Response(new ReadableStream),vt=!0}catch(ga){vt=!1}vt?oa(Fi.body):Fi.blob().then(oa)}(kr,function(Fi){var oa=new n.Response(Fi,oi);je(),Et&&Et.then(function(ga){return ga.put(Oe(jr.url),oa)}).catch(function(ga){return O(ga.message)})}))}}(Jt,Zn,Kn),de=!0,lt(null,_r,Cn.headers.get("Cache-Control"),Cn.headers.get("Expires")))}).catch(function(_r){Le||lt(new Error(_r.message))})};return Ge?function(In,Cn){if(je(),!Et)return Cn(null);var Zn=Oe(In.url);Et.then(function(Kn){Kn.match(Zn).then(function(_r){var jr=function(kr){if(!kr)return!1;var vi=new Date(kr.headers.get("Expires")||0),oi=Z(kr.headers.get("Cache-Control")||"");return vi>Date.now()&&!oi["no-cache"]}(_r);Kn.delete(Zn),jr&&Kn.put(Zn,_r.clone()),Cn(null,_r,jr)}).catch(Cn)}).catch(Cn)}(Jt,He):He(null,null),{cancel:function(){Le=!0,de||Bt.abort()}}}(p,C);if(F()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",p,C,void 0,!0)}var N;return function($,lt){var Tt=new n.XMLHttpRequest;for(var Bt in Tt.open($.method||"GET",$.url,!0),$.type==="arrayBuffer"&&(Tt.responseType="arraybuffer"),$.headers)Tt.setRequestHeader(Bt,$.headers[Bt]);return $.type==="json"&&(Tt.responseType="text",Tt.setRequestHeader("Accept","application/json")),Tt.withCredentials=$.credentials==="include",Tt.onerror=function(){lt(new Error(Tt.statusText))},Tt.onload=function(){if((Tt.status>=200&&Tt.status<300||Tt.status===0)&&Tt.response!==null){var Jt=Tt.response;if($.type==="json")try{Jt=JSON.parse(Tt.response)}catch(de){return lt(de)}lt(null,Jt,Tt.getResponseHeader("Cache-Control"),Tt.getResponseHeader("Expires"))}else lt(new wr(Tt.statusText,Tt.status,$.url))},Tt.send($.body),{cancel:function(){return Tt.abort()}}}(p,C)},pr=function(p,C){return jn(v(p,{type:"arrayBuffer"}),C)},di=function(p,C){return jn(v(p,{method:"POST"}),C)},Ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";en=[],An=0;var Me=function d(p,C){if(xt.supported&&(p.headers||(p.headers={}),p.headers.accept="image/webp,*/*"),An>=St.MAX_PARALLEL_IMAGE_REQUESTS){var N={requestParameters:p,callback:C,cancelled:!1,cancel:function(){this.cancelled=!0}};return en.push(N),N}An++;var $=!1,lt=function(){if(!$)for($=!0,An--;en.length&&An<St.MAX_PARALLEL_IMAGE_REQUESTS;){var Jt=en.shift();Jt.cancelled||(Jt.cancel=d(Jt.requestParameters,Jt.callback).cancel)}},Tt=pr(p,function(Bt,Jt,de,Le){lt(),Bt?C(Bt):Jt&&(wn()?function(Ge,He){var ln=new n.Blob([new Uint8Array(Ge)],{type:"image/png"});n.createImageBitmap(ln).then(function(In){He(null,In)}).catch(function(In){He(new Error("Could not load image because of "+In.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Jt,C):function(Ge,He,ln,In){var Cn=new n.Image,Zn=n.URL;Cn.onload=function(){He(null,Cn),Zn.revokeObjectURL(Cn.src),Cn.onload=null,n.requestAnimationFrame(function(){Cn.src=Ce})},Cn.onerror=function(){return He(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Kn=new n.Blob([new Uint8Array(Ge)],{type:"image/png"});Cn.cacheControl=ln,Cn.expires=In,Cn.src=Ge.byteLength?Zn.createObjectURL(Kn):Ce}(Jt,C,de,Le))});return{cancel:function(){Tt.cancel(),lt()}}};function Qt(d,p,C){C[d]&&C[d].indexOf(p)!==-1||(C[d]=C[d]||[],C[d].push(p))}function pe(d,p,C){if(C&&C[d]){var N=C[d].indexOf(p);N!==-1&&C[d].splice(N,1)}}var Vt=function(p,C){C===void 0&&(C={}),v(this,C),this.type=p},re=function(d){function p(C,N){N===void 0&&(N={}),d.call(this,"error",v({error:C},N))}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(Vt),Te=function(){};Te.prototype.on=function(d,p){return this._listeners=this._listeners||{},Qt(d,p,this._listeners),this},Te.prototype.off=function(d,p){return pe(d,p,this._listeners),pe(d,p,this._oneTimeListeners),this},Te.prototype.once=function(d,p){return this._oneTimeListeners=this._oneTimeListeners||{},Qt(d,p,this._oneTimeListeners),this},Te.prototype.fire=function(d,p){typeof d=="string"&&(d=new Vt(d,p||{}));var C=d.type;if(this.listens(C)){d.target=this;for(var N=0,$=this._listeners&&this._listeners[C]?this._listeners[C].slice():[];N<$.length;N+=1)$[N].call(this,d);for(var lt=0,Tt=this._oneTimeListeners&&this._oneTimeListeners[C]?this._oneTimeListeners[C].slice():[];lt<Tt.length;lt+=1){var Bt=Tt[lt];pe(C,Bt,this._oneTimeListeners),Bt.call(this,d)}var Jt=this._eventedParent;Jt&&(v(d,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Jt.fire(d))}else d instanceof re&&console.error(d.error);return this},Te.prototype.listens=function(d){return this._listeners&&this._listeners[d]&&this._listeners[d].length>0||this._oneTimeListeners&&this._oneTimeListeners[d]&&this._oneTimeListeners[d].length>0||this._eventedParent&&this._eventedParent.listens(d)},Te.prototype.setEventedParent=function(d,p){return this._eventedParent=d,this._eventedParentData=p,this};var ue={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},xe=function(p,C,N,$){this.message=(p?p+": ":"")+N,$&&(this.identifier=$),C!=null&&C.__line__&&(this.line=C.__line__)};function Ke(d){var p=d.value;return p?[new xe(d.key,p,"constants have been deprecated as of v8")]:[]}function Rn(d){for(var p=[],C=arguments.length-1;C-- >0;)p[C]=arguments[C+1];for(var N=0,$=p;N<$.length;N+=1){var lt=$[N];for(var Tt in lt)d[Tt]=lt[Tt]}return d}function tr(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function Pn(d){if(Array.isArray(d))return d.map(Pn);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){var p={};for(var C in d)p[C]=Pn(d[C]);return p}return tr(d)}var dn=function(d){function p(C,N){d.call(this,N),this.message=N,this.key=C}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(Error),Ar=function(p,C){C===void 0&&(C=[]),this.parent=p,this.bindings={};for(var N=0,$=C;N<$.length;N+=1){var lt=$[N];this.bindings[lt[0]]=lt[1]}};Ar.prototype.concat=function(d){return new Ar(this,d)},Ar.prototype.get=function(d){if(this.bindings[d])return this.bindings[d];if(this.parent)return this.parent.get(d);throw new Error(d+" not found in scope.")},Ar.prototype.has=function(d){return!!this.bindings[d]||!!this.parent&&this.parent.has(d)};var or={kind:"null"},cn={kind:"number"},Pr={kind:"string"},Sr={kind:"boolean"},Re={kind:"color"},$e={kind:"object"},Ve={kind:"value"},En={kind:"collator"},xn={kind:"formatted"},Nn={kind:"resolvedImage"};function mn(d,p){return{kind:"array",itemType:d,N:p}}function Dn(d){if(d.kind==="array"){var p=Dn(d.itemType);return typeof d.N=="number"?"array<"+p+", "+d.N+">":d.itemType.kind==="value"?"array":"array<"+p+">"}return d.kind}var $n=[or,cn,Pr,Sr,Re,xn,$e,mn(Ve),Nn];function Hn(d,p){if(p.kind==="error")return null;if(d.kind==="array"){if(p.kind==="array"&&(p.N===0&&p.itemType.kind==="value"||!Hn(d.itemType,p.itemType))&&(typeof d.N!="number"||d.N===p.N))return null}else{if(d.kind===p.kind)return null;if(d.kind==="value"){for(var C=0,N=$n;C<N.length;C+=1)if(!Hn(N[C],p))return null}}return"Expected "+Dn(d)+" but found "+Dn(p)+" instead."}function _n(d,p){return p.some(function(C){return C.kind===d.kind})}function br(d,p){return p.some(function(C){return C==="null"?d===null:C==="array"?Array.isArray(d):C==="object"?d&&!Array.isArray(d)&&typeof d=="object":C===typeof d})}var yr=u(function(d,p){var C={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function N(Bt){return(Bt=Math.round(Bt))<0?0:Bt>255?255:Bt}function $(Bt){return N(Bt[Bt.length-1]==="%"?parseFloat(Bt)/100*255:parseInt(Bt))}function lt(Bt){return(Jt=Bt[Bt.length-1]==="%"?parseFloat(Bt)/100:parseFloat(Bt))<0?0:Jt>1?1:Jt;var Jt}function Tt(Bt,Jt,de){return de<0?de+=1:de>1&&(de-=1),6*de<1?Bt+(Jt-Bt)*de*6:2*de<1?Jt:3*de<2?Bt+(Jt-Bt)*(2/3-de)*6:Bt}try{p.parseCSSColor=function(Bt){var Jt,de=Bt.replace(/ /g,"").toLowerCase();if(de in C)return C[de].slice();if(de[0]==="#")return de.length===4?(Jt=parseInt(de.substr(1),16))>=0&&Jt<=4095?[(3840&Jt)>>4|(3840&Jt)>>8,240&Jt|(240&Jt)>>4,15&Jt|(15&Jt)<<4,1]:null:de.length===7&&(Jt=parseInt(de.substr(1),16))>=0&&Jt<=16777215?[(16711680&Jt)>>16,(65280&Jt)>>8,255&Jt,1]:null;var Le=de.indexOf("("),Ge=de.indexOf(")");if(Le!==-1&&Ge+1===de.length){var He=de.substr(0,Le),ln=de.substr(Le+1,Ge-(Le+1)).split(","),In=1;switch(He){case"rgba":if(ln.length!==4)return null;In=lt(ln.pop());case"rgb":return ln.length!==3?null:[$(ln[0]),$(ln[1]),$(ln[2]),In];case"hsla":if(ln.length!==4)return null;In=lt(ln.pop());case"hsl":if(ln.length!==3)return null;var Cn=(parseFloat(ln[0])%360+360)%360/360,Zn=lt(ln[1]),Kn=lt(ln[2]),_r=Kn<=.5?Kn*(Zn+1):Kn+Zn-Kn*Zn,jr=2*Kn-_r;return[N(255*Tt(jr,_r,Cn+1/3)),N(255*Tt(jr,_r,Cn)),N(255*Tt(jr,_r,Cn-1/3)),In];default:return null}}return null}}catch(Bt){}}).parseCSSColor,Fr=function(p,C,N,$){$===void 0&&($=1),this.r=p,this.g=C,this.b=N,this.a=$};Fr.parse=function(d){if(d){if(d instanceof Fr)return d;if(typeof d=="string"){var p=yr(d);if(p)return new Fr(p[0]/255*p[3],p[1]/255*p[3],p[2]/255*p[3],p[3])}}},Fr.prototype.toString=function(){var d=this.toArray(),p=d[1],C=d[2],N=d[3];return"rgba("+Math.round(d[0])+","+Math.round(p)+","+Math.round(C)+","+N+")"},Fr.prototype.toArray=function(){var d=this.a;return d===0?[0,0,0,0]:[255*this.r/d,255*this.g/d,255*this.b/d,d]},Fr.black=new Fr(0,0,0,1),Fr.white=new Fr(1,1,1,1),Fr.transparent=new Fr(0,0,0,0),Fr.red=new Fr(1,0,0,1);var Ei=function(p,C,N){this.sensitivity=p?C?"variant":"case":C?"accent":"base",this.locale=N,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Ei.prototype.compare=function(d,p){return this.collator.compare(d,p)},Ei.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Ta=function(p,C,N,$,lt){this.text=p,this.image=C,this.scale=N,this.fontStack=$,this.textColor=lt},Aa=function(p){this.sections=p};Aa.fromString=function(d){return new Aa([new Ta(d,null,null,null,null)])},Aa.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(d){return d.text.length!==0||d.image&&d.image.name.length!==0})},Aa.factory=function(d){return d instanceof Aa?d:Aa.fromString(d)},Aa.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(d){return d.text}).join("")},Aa.prototype.serialize=function(){for(var d=["format"],p=0,C=this.sections;p<C.length;p+=1){var N=C[p];if(N.image)d.push(["image",N.image.name]);else{d.push(N.text);var $={};N.fontStack&&($["text-font"]=["literal",N.fontStack.split(",")]),N.scale&&($["font-scale"]=N.scale),N.textColor&&($["text-color"]=["rgba"].concat(N.textColor.toArray())),d.push($)}}return d};var eo=function(p){this.name=p.name,this.available=p.available};function Ho(d,p,C,N){return typeof d=="number"&&d>=0&&d<=255&&typeof p=="number"&&p>=0&&p<=255&&typeof C=="number"&&C>=0&&C<=255?N===void 0||typeof N=="number"&&N>=0&&N<=1?null:"Invalid rgba value ["+[d,p,C,N].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof N=="number"?[d,p,C,N]:[d,p,C]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Do(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof Fr||d instanceof Ei||d instanceof Aa||d instanceof eo)return!0;if(Array.isArray(d)){for(var p=0,C=d;p<C.length;p+=1)if(!Do(C[p]))return!1;return!0}if(typeof d=="object"){for(var N in d)if(!Do(d[N]))return!1;return!0}return!1}function io(d){if(d===null)return or;if(typeof d=="string")return Pr;if(typeof d=="boolean")return Sr;if(typeof d=="number")return cn;if(d instanceof Fr)return Re;if(d instanceof Ei)return En;if(d instanceof Aa)return xn;if(d instanceof eo)return Nn;if(Array.isArray(d)){for(var p,C=d.length,N=0,$=d;N<$.length;N+=1){var lt=io($[N]);if(p){if(p===lt)continue;p=Ve;break}p=lt}return mn(p||Ve,C)}return $e}function ds(d){var p=typeof d;return d===null?"":p==="string"||p==="number"||p==="boolean"?String(d):d instanceof Fr||d instanceof Aa||d instanceof eo?d.toString():JSON.stringify(d)}eo.prototype.toString=function(){return this.name},eo.fromString=function(d){return d?new eo({name:d,available:!1}):null},eo.prototype.serialize=function(){return["image",this.name]};var Ko=function(p,C){this.type=p,this.value=C};Ko.parse=function(d,p){if(d.length!==2)return p.error("'literal' expression requires exactly one argument, but found "+(d.length-1)+" instead.");if(!Do(d[1]))return p.error("invalid value");var C=d[1],N=io(C),$=p.expectedType;return N.kind!=="array"||N.N!==0||!$||$.kind!=="array"||typeof $.N=="number"&&$.N!==0||(N=$),new Ko(N,C)},Ko.prototype.evaluate=function(){return this.value},Ko.prototype.eachChild=function(){},Ko.prototype.outputDefined=function(){return!0},Ko.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Fr?["rgba"].concat(this.value.toArray()):this.value instanceof Aa?this.value.serialize():this.value};var jo=function(p){this.name="ExpressionEvaluationError",this.message=p};jo.prototype.toJSON=function(){return this.message};var bs={string:Pr,number:cn,boolean:Sr,object:$e},Ra=function(p,C){this.type=p,this.args=C};Ra.parse=function(d,p){if(d.length<2)return p.error("Expected at least one argument.");var C,N=1,$=d[0];if($==="array"){var lt,Tt;if(d.length>2){var Bt=d[1];if(typeof Bt!="string"||!(Bt in bs)||Bt==="object")return p.error('The item type argument of "array" must be one of string, number, boolean',1);lt=bs[Bt],N++}else lt=Ve;if(d.length>3){if(d[2]!==null&&(typeof d[2]!="number"||d[2]<0||d[2]!==Math.floor(d[2])))return p.error('The length argument to "array" must be a positive integer literal',2);Tt=d[2],N++}C=mn(lt,Tt)}else C=bs[$];for(var Jt=[];N<d.length;N++){var de=p.parse(d[N],N,Ve);if(!de)return null;Jt.push(de)}return new Ra(C,Jt)},Ra.prototype.evaluate=function(d){for(var p=0;p<this.args.length;p++){var C=this.args[p].evaluate(d);if(!Hn(this.type,io(C)))return C;if(p===this.args.length-1)throw new jo("Expected value to be of type "+Dn(this.type)+", but found "+Dn(io(C))+" instead.")}return null},Ra.prototype.eachChild=function(d){this.args.forEach(d)},Ra.prototype.outputDefined=function(){return this.args.every(function(d){return d.outputDefined()})},Ra.prototype.serialize=function(){var d=this.type,p=[d.kind];if(d.kind==="array"){var C=d.itemType;if(C.kind==="string"||C.kind==="number"||C.kind==="boolean"){p.push(C.kind);var N=d.N;(typeof N=="number"||this.args.length>1)&&p.push(N)}}return p.concat(this.args.map(function($){return $.serialize()}))};var Xo=function(p){this.type=xn,this.sections=p};Xo.parse=function(d,p){if(d.length<2)return p.error("Expected at least one argument.");var C=d[1];if(!Array.isArray(C)&&typeof C=="object")return p.error("First argument must be an image or text section.");for(var N=[],$=!1,lt=1;lt<=d.length-1;++lt){var Tt=d[lt];if($&&typeof Tt=="object"&&!Array.isArray(Tt)){$=!1;var Bt=null;if(Tt["font-scale"]&&!(Bt=p.parse(Tt["font-scale"],1,cn)))return null;var Jt=null;if(Tt["text-font"]&&!(Jt=p.parse(Tt["text-font"],1,mn(Pr))))return null;var de=null;if(Tt["text-color"]&&!(de=p.parse(Tt["text-color"],1,Re)))return null;var Le=N[N.length-1];Le.scale=Bt,Le.font=Jt,Le.textColor=de}else{var Ge=p.parse(d[lt],1,Ve);if(!Ge)return null;var He=Ge.type.kind;if(He!=="string"&&He!=="value"&&He!=="null"&&He!=="resolvedImage")return p.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");$=!0,N.push({content:Ge,scale:null,font:null,textColor:null})}}return new Xo(N)},Xo.prototype.evaluate=function(d){return new Aa(this.sections.map(function(p){var C=p.content.evaluate(d);return io(C)===Nn?new Ta("",C,null,null,null):new Ta(ds(C),null,p.scale?p.scale.evaluate(d):null,p.font?p.font.evaluate(d).join(","):null,p.textColor?p.textColor.evaluate(d):null)}))},Xo.prototype.eachChild=function(d){for(var p=0,C=this.sections;p<C.length;p+=1){var N=C[p];d(N.content),N.scale&&d(N.scale),N.font&&d(N.font),N.textColor&&d(N.textColor)}},Xo.prototype.outputDefined=function(){return!1},Xo.prototype.serialize=function(){for(var d=["format"],p=0,C=this.sections;p<C.length;p+=1){var N=C[p];d.push(N.content.serialize());var $={};N.scale&&($["font-scale"]=N.scale.serialize()),N.font&&($["text-font"]=N.font.serialize()),N.textColor&&($["text-color"]=N.textColor.serialize()),d.push($)}return d};var Bo=function(p){this.type=Nn,this.input=p};Bo.parse=function(d,p){if(d.length!==2)return p.error("Expected two arguments.");var C=p.parse(d[1],1,Pr);return C?new Bo(C):p.error("No image name provided.")},Bo.prototype.evaluate=function(d){var p=this.input.evaluate(d),C=eo.fromString(p);return C&&d.availableImages&&(C.available=d.availableImages.indexOf(p)>-1),C},Bo.prototype.eachChild=function(d){d(this.input)},Bo.prototype.outputDefined=function(){return!1},Bo.prototype.serialize=function(){return["image",this.input.serialize()]};var qs={"to-boolean":Sr,"to-color":Re,"to-number":cn,"to-string":Pr},ao=function(p,C){this.type=p,this.args=C};ao.parse=function(d,p){if(d.length<2)return p.error("Expected at least one argument.");var C=d[0];if((C==="to-boolean"||C==="to-string")&&d.length!==2)return p.error("Expected one argument.");for(var N=qs[C],$=[],lt=1;lt<d.length;lt++){var Tt=p.parse(d[lt],lt,Ve);if(!Tt)return null;$.push(Tt)}return new ao(N,$)},ao.prototype.evaluate=function(d){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(d));if(this.type.kind==="color"){for(var p,C,N=0,$=this.args;N<$.length;N+=1){if(C=null,(p=$[N].evaluate(d))instanceof Fr)return p;if(typeof p=="string"){var lt=d.parseColor(p);if(lt)return lt}else if(Array.isArray(p)&&!(C=p.length<3||p.length>4?"Invalid rbga value "+JSON.stringify(p)+": expected an array containing either three or four numeric values.":Ho(p[0],p[1],p[2],p[3])))return new Fr(p[0]/255,p[1]/255,p[2]/255,p[3])}throw new jo(C||"Could not parse color from value '"+(typeof p=="string"?p:String(JSON.stringify(p)))+"'")}if(this.type.kind==="number"){for(var Tt=null,Bt=0,Jt=this.args;Bt<Jt.length;Bt+=1){if((Tt=Jt[Bt].evaluate(d))===null)return 0;var de=Number(Tt);if(!isNaN(de))return de}throw new jo("Could not convert "+JSON.stringify(Tt)+" to number.")}return this.type.kind==="formatted"?Aa.fromString(ds(this.args[0].evaluate(d))):this.type.kind==="resolvedImage"?eo.fromString(ds(this.args[0].evaluate(d))):ds(this.args[0].evaluate(d))},ao.prototype.eachChild=function(d){this.args.forEach(d)},ao.prototype.outputDefined=function(){return this.args.every(function(d){return d.outputDefined()})},ao.prototype.serialize=function(){if(this.type.kind==="formatted")return new Xo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Bo(this.args[0]).serialize();var d=["to-"+this.type.kind];return this.eachChild(function(p){d.push(p.serialize())}),d};var so=["Unknown","Point","LineString","Polygon"],Hs=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Hs.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Hs.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?so[this.feature.type]:this.feature.type:null},Hs.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Hs.prototype.canonicalID=function(){return this.canonical},Hs.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Hs.prototype.parseColor=function(d){var p=this._parseColorCache[d];return p||(p=this._parseColorCache[d]=Fr.parse(d)),p};var Ne=function(p,C,N,$){this.name=p,this.type=C,this._evaluate=N,this.args=$};Ne.prototype.evaluate=function(d){return this._evaluate(d,this.args)},Ne.prototype.eachChild=function(d){this.args.forEach(d)},Ne.prototype.outputDefined=function(){return!1},Ne.prototype.serialize=function(){return[this.name].concat(this.args.map(function(d){return d.serialize()}))},Ne.parse=function(d,p){var C,N=d[0],$=Ne.definitions[N];if(!$)return p.error('Unknown expression "'+N+'". If you wanted a literal array, use ["literal", [...]].',0);for(var lt=Array.isArray($)?$[0]:$.type,Tt=Array.isArray($)?[[$[1],$[2]]]:$.overloads,Bt=Tt.filter(function(ua){var ta=ua[0];return!Array.isArray(ta)||ta.length===d.length-1}),Jt=null,de=0,Le=Bt;de<Le.length;de+=1){var Ge=Le[de],He=Ge[0],ln=Ge[1];Jt=new ko(p.registry,p.path,null,p.scope);for(var In=[],Cn=!1,Zn=1;Zn<d.length;Zn++){var Kn=d[Zn],_r=Array.isArray(He)?He[Zn-1]:He.type,jr=Jt.parse(Kn,1+In.length,_r);if(!jr){Cn=!0;break}In.push(jr)}if(!Cn)if(Array.isArray(He)&&He.length!==In.length)Jt.error("Expected "+He.length+" arguments, but found "+In.length+" instead.");else{for(var kr=0;kr<In.length;kr++){var vi=Array.isArray(He)?He[kr]:He.type,oi=In[kr];Jt.concat(kr+1).checkSubtype(vi,oi.type)}if(Jt.errors.length===0)return new Ne(N,lt,ln,In)}}if(Bt.length===1)(C=p.errors).push.apply(C,Jt.errors);else{for(var Ni=(Bt.length?Bt:Tt).map(function(ua){var ta;return ta=ua[0],Array.isArray(ta)?"("+ta.map(Dn).join(", ")+")":"("+Dn(ta.type)+"...)"}).join(" | "),Fi=[],oa=1;oa<d.length;oa++){var ga=p.parse(d[oa],1+Fi.length);if(!ga)return null;Fi.push(Dn(ga.type))}p.error("Expected arguments of type "+Ni+", but found ("+Fi.join(", ")+") instead.")}return null},Ne.register=function(d,p){for(var C in Ne.definitions=p,p)d[C]=Ne};var se=function(p,C,N){this.type=En,this.locale=N,this.caseSensitive=p,this.diacriticSensitive=C};function Yt(d,p){d[0]=Math.min(d[0],p[0]),d[1]=Math.min(d[1],p[1]),d[2]=Math.max(d[2],p[0]),d[3]=Math.max(d[3],p[1])}function Ee(d,p){return!(d[0]<=p[0]||d[2]>=p[2]||d[1]<=p[1]||d[3]>=p[3])}function sn(d,p){var C=(180+d[0])/360,N=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,$=Math.pow(2,p.z);return[Math.round(C*$*8192),Math.round(N*$*8192)]}function Fn(d,p,C){return p[1]>d[1]!=C[1]>d[1]&&d[0]<(C[0]-p[0])*(d[1]-p[1])/(C[1]-p[1])+p[0]}function rr(d,p){for(var C,N,$,lt,Tt,Bt,Jt,de=!1,Le=0,Ge=p.length;Le<Ge;Le++)for(var He=p[Le],ln=0,In=He.length;ln<In-1;ln++){if((lt=(C=d)[0]-(N=He[ln])[0])*(Jt=C[1]-($=He[ln+1])[1])-(Bt=C[0]-$[0])*(Tt=C[1]-N[1])==0&&lt*Bt<=0&&Tt*Jt<=0)return!1;Fn(d,He[ln],He[ln+1])&&(de=!de)}return de}function qn(d,p){for(var C=0;C<p.length;C++)if(rr(d,p[C]))return!0;return!1}function Xr(d,p,C,N){var $=N[0]-C[0],lt=N[1]-C[1],Tt=(d[0]-C[0])*lt-$*(d[1]-C[1]),Bt=(p[0]-C[0])*lt-$*(p[1]-C[1]);return Tt>0&&Bt<0||Tt<0&&Bt>0}function Si(d,p,C){for(var N=0,$=C;N<$.length;N+=1)for(var lt=$[N],Tt=0;Tt<lt.length-1;++Tt)if((Ge=[(Le=lt[Tt+1])[0]-(de=lt[Tt])[0],Le[1]-de[1]])[0]*(He=[(Jt=p)[0]-(Bt=d)[0],Jt[1]-Bt[1]])[1]-Ge[1]*He[0]!=0&&Xr(Bt,Jt,de,Le)&&Xr(de,Le,Bt,Jt))return!0;var Bt,Jt,de,Le,Ge,He;return!1}function Oi(d,p){for(var C=0;C<d.length;++C)if(!rr(d[C],p))return!1;for(var N=0;N<d.length-1;++N)if(Si(d[N],d[N+1],p))return!1;return!0}function Gi(d,p){for(var C=0;C<p.length;C++)if(Oi(d,p[C]))return!0;return!1}function sa(d,p,C){for(var N=[],$=0;$<d.length;$++){for(var lt=[],Tt=0;Tt<d[$].length;Tt++){var Bt=sn(d[$][Tt],C);Yt(p,Bt),lt.push(Bt)}N.push(lt)}return N}function qa(d,p,C){for(var N=[],$=0;$<d.length;$++){var lt=sa(d[$],p,C);N.push(lt)}return N}function Oa(d,p,C,N){if(d[0]<C[0]||d[0]>C[2]){var $=.5*N,lt=d[0]-C[0]>$?-N:C[0]-d[0]>$?N:0;lt===0&&(lt=d[0]-C[2]>$?-N:C[2]-d[0]>$?N:0),d[0]+=lt}Yt(p,d)}function Eo(d,p,C,N){for(var $=8192*Math.pow(2,N.z),lt=[8192*N.x,8192*N.y],Tt=[],Bt=0,Jt=d;Bt<Jt.length;Bt+=1)for(var de=0,Le=Jt[Bt];de<Le.length;de+=1){var Ge=Le[de],He=[Ge.x+lt[0],Ge.y+lt[1]];Oa(He,p,C,$),Tt.push(He)}return Tt}function Ba(d,p,C,N){for(var $,lt=8192*Math.pow(2,N.z),Tt=[8192*N.x,8192*N.y],Bt=[],Jt=0,de=d;Jt<de.length;Jt+=1){for(var Le=[],Ge=0,He=de[Jt];Ge<He.length;Ge+=1){var ln=He[Ge],In=[ln.x+Tt[0],ln.y+Tt[1]];Yt(p,In),Le.push(In)}Bt.push(Le)}if(p[2]-p[0]<=lt/2){($=p)[0]=$[1]=1/0,$[2]=$[3]=-1/0;for(var Cn=0,Zn=Bt;Cn<Zn.length;Cn+=1)for(var Kn=0,_r=Zn[Cn];Kn<_r.length;Kn+=1)Oa(_r[Kn],p,C,lt)}return Bt}se.parse=function(d,p){if(d.length!==2)return p.error("Expected one argument.");var C=d[1];if(typeof C!="object"||Array.isArray(C))return p.error("Collator options argument must be an object.");var N=p.parse(C["case-sensitive"]!==void 0&&C["case-sensitive"],1,Sr);if(!N)return null;var $=p.parse(C["diacritic-sensitive"]!==void 0&&C["diacritic-sensitive"],1,Sr);if(!$)return null;var lt=null;return C.locale&&!(lt=p.parse(C.locale,1,Pr))?null:new se(N,$,lt)},se.prototype.evaluate=function(d){return new Ei(this.caseSensitive.evaluate(d),this.diacriticSensitive.evaluate(d),this.locale?this.locale.evaluate(d):null)},se.prototype.eachChild=function(d){d(this.caseSensitive),d(this.diacriticSensitive),this.locale&&d(this.locale)},se.prototype.outputDefined=function(){return!1},se.prototype.serialize=function(){var d={};return d["case-sensitive"]=this.caseSensitive.serialize(),d["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(d.locale=this.locale.serialize()),["collator",d]};var uo=function(p,C){this.type=Sr,this.geojson=p,this.geometries=C};function co(d){if(d instanceof Ne&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof uo)return!1;var p=!0;return d.eachChild(function(C){p&&!co(C)&&(p=!1)}),p}function Ja(d){if(d instanceof Ne&&d.name==="feature-state")return!1;var p=!0;return d.eachChild(function(C){p&&!Ja(C)&&(p=!1)}),p}function Po(d,p){if(d instanceof Ne&&p.indexOf(d.name)>=0)return!1;var C=!0;return d.eachChild(function(N){C&&!Po(N,p)&&(C=!1)}),C}uo.parse=function(d,p){if(d.length!==2)return p.error("'within' expression requires exactly one argument, but found "+(d.length-1)+" instead.");if(Do(d[1])){var C=d[1];if(C.type==="FeatureCollection")for(var N=0;N<C.features.length;++N){var $=C.features[N].geometry.type;if($==="Polygon"||$==="MultiPolygon")return new uo(C,C.features[N].geometry)}else if(C.type==="Feature"){var lt=C.geometry.type;if(lt==="Polygon"||lt==="MultiPolygon")return new uo(C,C.geometry)}else if(C.type==="Polygon"||C.type==="MultiPolygon")return new uo(C,C)}return p.error("'within' expression requires valid geojson object that contains polygon geometry type.")},uo.prototype.evaluate=function(d){if(d.geometry()!=null&&d.canonicalID()!=null){if(d.geometryType()==="Point")return function(p,C){var N=[1/0,1/0,-1/0,-1/0],$=[1/0,1/0,-1/0,-1/0],lt=p.canonicalID();if(C.type==="Polygon"){var Tt=sa(C.coordinates,$,lt),Bt=Eo(p.geometry(),N,$,lt);if(!Ee(N,$))return!1;for(var Jt=0,de=Bt;Jt<de.length;Jt+=1)if(!rr(de[Jt],Tt))return!1}if(C.type==="MultiPolygon"){var Le=qa(C.coordinates,$,lt),Ge=Eo(p.geometry(),N,$,lt);if(!Ee(N,$))return!1;for(var He=0,ln=Ge;He<ln.length;He+=1)if(!qn(ln[He],Le))return!1}return!0}(d,this.geometries);if(d.geometryType()==="LineString")return function(p,C){var N=[1/0,1/0,-1/0,-1/0],$=[1/0,1/0,-1/0,-1/0],lt=p.canonicalID();if(C.type==="Polygon"){var Tt=sa(C.coordinates,$,lt),Bt=Ba(p.geometry(),N,$,lt);if(!Ee(N,$))return!1;for(var Jt=0,de=Bt;Jt<de.length;Jt+=1)if(!Oi(de[Jt],Tt))return!1}if(C.type==="MultiPolygon"){var Le=qa(C.coordinates,$,lt),Ge=Ba(p.geometry(),N,$,lt);if(!Ee(N,$))return!1;for(var He=0,ln=Ge;He<ln.length;He+=1)if(!Gi(ln[He],Le))return!1}return!0}(d,this.geometries)}return!1},uo.prototype.eachChild=function(){},uo.prototype.outputDefined=function(){return!0},uo.prototype.serialize=function(){return["within",this.geojson]};var ls=function(p,C){this.type=C.type,this.name=p,this.boundExpression=C};ls.parse=function(d,p){if(d.length!==2||typeof d[1]!="string")return p.error("'var' expression requires exactly one string literal argument.");var C=d[1];return p.scope.has(C)?new ls(C,p.scope.get(C)):p.error('Unknown variable "'+C+'". Make sure "'+C+'" has been bound in an enclosing "let" expression before using it.',1)},ls.prototype.evaluate=function(d){return this.boundExpression.evaluate(d)},ls.prototype.eachChild=function(){},ls.prototype.outputDefined=function(){return!1},ls.prototype.serialize=function(){return["var",this.name]};var ko=function(p,C,N,$,lt){C===void 0&&(C=[]),$===void 0&&($=new Ar),lt===void 0&&(lt=[]),this.registry=p,this.path=C,this.key=C.map(function(Tt){return"["+Tt+"]"}).join(""),this.scope=$,this.errors=lt,this.expectedType=N};function Es(d,p){for(var C,N=d.length-1,$=0,lt=N,Tt=0;$<=lt;)if((C=d[Tt=Math.floor(($+lt)/2)])<=p){if(Tt===N||p<d[Tt+1])return Tt;$=Tt+1}else{if(!(C>p))throw new jo("Input is not a number.");lt=Tt-1}return 0}ko.prototype.parse=function(d,p,C,N,$){return $===void 0&&($={}),p?this.concat(p,C,N)._parse(d,$):this._parse(d,$)},ko.prototype._parse=function(d,p){function C(de,Le,Ge){return Ge==="assert"?new Ra(Le,[de]):Ge==="coerce"?new ao(Le,[de]):de}if(d!==null&&typeof d!="string"&&typeof d!="boolean"&&typeof d!="number"||(d=["literal",d]),Array.isArray(d)){if(d.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var N=d[0];if(typeof N!="string")return this.error("Expression name must be a string, but found "+typeof N+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var $=this.registry[N];if($){var lt=$.parse(d,this);if(!lt)return null;if(this.expectedType){var Tt=this.expectedType,Bt=lt.type;if(Tt.kind!=="string"&&Tt.kind!=="number"&&Tt.kind!=="boolean"&&Tt.kind!=="object"&&Tt.kind!=="array"||Bt.kind!=="value")if(Tt.kind!=="color"&&Tt.kind!=="formatted"&&Tt.kind!=="resolvedImage"||Bt.kind!=="value"&&Bt.kind!=="string"){if(this.checkSubtype(Tt,Bt))return null}else lt=C(lt,Tt,p.typeAnnotation||"coerce");else lt=C(lt,Tt,p.typeAnnotation||"assert")}if(!(lt instanceof Ko)&&lt.type.kind!=="resolvedImage"&&function de(Le){if(Le instanceof ls)return de(Le.boundExpression);if(Le instanceof Ne&&Le.name==="error"||Le instanceof se||Le instanceof uo)return!1;var Ge=Le instanceof ao||Le instanceof Ra,He=!0;return Le.eachChild(function(ln){He=Ge?He&&de(ln):He&&ln instanceof Ko}),!!He&&co(Le)&&Po(Le,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(lt)){var Jt=new Hs;try{lt=new Ko(lt.type,lt.evaluate(Jt))}catch(de){return this.error(de.message),null}}return lt}return this.error('Unknown expression "'+N+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(d===void 0?"'undefined' value invalid. Use null instead.":typeof d=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof d+" instead.")},ko.prototype.concat=function(d,p,C){var N=typeof d=="number"?this.path.concat(d):this.path,$=C?this.scope.concat(C):this.scope;return new ko(this.registry,N,p||null,$,this.errors)},ko.prototype.error=function(d){for(var p=[],C=arguments.length-1;C-- >0;)p[C]=arguments[C+1];var N=""+this.key+p.map(function($){return"["+$+"]"}).join("");this.errors.push(new dn(N,d))},ko.prototype.checkSubtype=function(d,p){var C=Hn(d,p);return C&&this.error(C),C};var Co=function(p,C,N){this.type=p,this.input=C,this.labels=[],this.outputs=[];for(var $=0,lt=N;$<lt.length;$+=1){var Tt=lt[$],Bt=Tt[1];this.labels.push(Tt[0]),this.outputs.push(Bt)}};function Za(d,p,C){return d*(1-C)+p*C}Co.parse=function(d,p){if(d.length-1<4)return p.error("Expected at least 4 arguments, but found only "+(d.length-1)+".");if((d.length-1)%2!=0)return p.error("Expected an even number of arguments.");var C=p.parse(d[1],1,cn);if(!C)return null;var N=[],$=null;p.expectedType&&p.expectedType.kind!=="value"&&($=p.expectedType);for(var lt=1;lt<d.length;lt+=2){var Tt=lt===1?-1/0:d[lt],Bt=d[lt+1],Jt=lt,de=lt+1;if(typeof Tt!="number")return p.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Jt);if(N.length&&N[N.length-1][0]>=Tt)return p.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Jt);var Le=p.parse(Bt,de,$);if(!Le)return null;$=$||Le.type,N.push([Tt,Le])}return new Co($,C,N)},Co.prototype.evaluate=function(d){var p=this.labels,C=this.outputs;if(p.length===1)return C[0].evaluate(d);var N=this.input.evaluate(d);if(N<=p[0])return C[0].evaluate(d);var $=p.length;return N>=p[$-1]?C[$-1].evaluate(d):C[Es(p,N)].evaluate(d)},Co.prototype.eachChild=function(d){d(this.input);for(var p=0,C=this.outputs;p<C.length;p+=1)d(C[p])},Co.prototype.outputDefined=function(){return this.outputs.every(function(d){return d.outputDefined()})},Co.prototype.serialize=function(){for(var d=["step",this.input.serialize()],p=0;p<this.labels.length;p++)p>0&&d.push(this.labels[p]),d.push(this.outputs[p].serialize());return d};var Bs=Object.freeze({__proto__:null,number:Za,color:function(p,C,N){return new Fr(Za(p.r,C.r,N),Za(p.g,C.g,N),Za(p.b,C.b,N),Za(p.a,C.a,N))},array:function(p,C,N){return p.map(function($,lt){return Za($,C[lt],N)})}}),ss=6/29*3*(6/29),ja=Math.PI/180,gn=180/Math.PI;function cr(d){return d>.008856451679035631?Math.pow(d,1/3):d/ss+4/29}function Gr(d){return d>6/29?d*d*d:ss*(d-4/29)}function Ui(d){return 255*(d<=.0031308?12.92*d:1.055*Math.pow(d,1/2.4)-.055)}function za(d){return(d/=255)<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function go(d){var p=za(d.r),C=za(d.g),N=za(d.b),$=cr((.4124564*p+.3575761*C+.1804375*N)/.95047),lt=cr((.2126729*p+.7151522*C+.072175*N)/1);return{l:116*lt-16,a:500*($-lt),b:200*(lt-cr((.0193339*p+.119192*C+.9503041*N)/1.08883)),alpha:d.a}}function fo(d){var p=(d.l+16)/116,C=isNaN(d.a)?p:p+d.a/500,N=isNaN(d.b)?p:p-d.b/200;return p=1*Gr(p),C=.95047*Gr(C),N=1.08883*Gr(N),new Fr(Ui(3.2404542*C-1.5371385*p-.4985314*N),Ui(-.969266*C+1.8760108*p+.041556*N),Ui(.0556434*C-.2040259*p+1.0572252*N),d.alpha)}function ea(d,p,C){var N=p-d;return d+C*(N>180||N<-180?N-360*Math.round(N/360):N)}var to={forward:go,reverse:fo,interpolate:function(p,C,N){return{l:Za(p.l,C.l,N),a:Za(p.a,C.a,N),b:Za(p.b,C.b,N),alpha:Za(p.alpha,C.alpha,N)}}},Ns={forward:function(p){var C=go(p),N=C.l,$=C.a,lt=C.b,Tt=Math.atan2(lt,$)*gn;return{h:Tt<0?Tt+360:Tt,c:Math.sqrt($*$+lt*lt),l:N,alpha:p.a}},reverse:function(p){var C=p.h*ja,N=p.c;return fo({l:p.l,a:Math.cos(C)*N,b:Math.sin(C)*N,alpha:p.alpha})},interpolate:function(p,C,N){return{h:ea(p.h,C.h,N),c:Za(p.c,C.c,N),l:Za(p.l,C.l,N),alpha:Za(p.alpha,C.alpha,N)}}},Ss=Object.freeze({__proto__:null,lab:to,hcl:Ns}),Ka=function(p,C,N,$,lt){this.type=p,this.operator=C,this.interpolation=N,this.input=$,this.labels=[],this.outputs=[];for(var Tt=0,Bt=lt;Tt<Bt.length;Tt+=1){var Jt=Bt[Tt],de=Jt[1];this.labels.push(Jt[0]),this.outputs.push(de)}};function ou(d,p,C,N){var $=N-C,lt=d-C;return $===0?0:p===1?lt/$:(Math.pow(p,lt)-1)/(Math.pow(p,$)-1)}Ka.interpolationFactor=function(d,p,C,N){var $=0;if(d.name==="exponential")$=ou(p,d.base,C,N);else if(d.name==="linear")$=ou(p,1,C,N);else if(d.name==="cubic-bezier"){var lt=d.controlPoints;$=new s(lt[0],lt[1],lt[2],lt[3]).solve(ou(p,1,C,N))}return $},Ka.parse=function(d,p){var C=d[0],N=d[1],$=d[2],lt=d.slice(3);if(!Array.isArray(N)||N.length===0)return p.error("Expected an interpolation type expression.",1);if(N[0]==="linear")N={name:"linear"};else if(N[0]==="exponential"){var Tt=N[1];if(typeof Tt!="number")return p.error("Exponential interpolation requires a numeric base.",1,1);N={name:"exponential",base:Tt}}else{if(N[0]!=="cubic-bezier")return p.error("Unknown interpolation type "+String(N[0]),1,0);var Bt=N.slice(1);if(Bt.length!==4||Bt.some(function(Zn){return typeof Zn!="number"||Zn<0||Zn>1}))return p.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);N={name:"cubic-bezier",controlPoints:Bt}}if(d.length-1<4)return p.error("Expected at least 4 arguments, but found only "+(d.length-1)+".");if((d.length-1)%2!=0)return p.error("Expected an even number of arguments.");if(!($=p.parse($,2,cn)))return null;var Jt=[],de=null;C==="interpolate-hcl"||C==="interpolate-lab"?de=Re:p.expectedType&&p.expectedType.kind!=="value"&&(de=p.expectedType);for(var Le=0;Le<lt.length;Le+=2){var Ge=lt[Le],He=lt[Le+1],ln=Le+3,In=Le+4;if(typeof Ge!="number")return p.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ln);if(Jt.length&&Jt[Jt.length-1][0]>=Ge)return p.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ln);var Cn=p.parse(He,In,de);if(!Cn)return null;de=de||Cn.type,Jt.push([Ge,Cn])}return de.kind==="number"||de.kind==="color"||de.kind==="array"&&de.itemType.kind==="number"&&typeof de.N=="number"?new Ka(de,C,N,$,Jt):p.error("Type "+Dn(de)+" is not interpolatable.")},Ka.prototype.evaluate=function(d){var p=this.labels,C=this.outputs;if(p.length===1)return C[0].evaluate(d);var N=this.input.evaluate(d);if(N<=p[0])return C[0].evaluate(d);var $=p.length;if(N>=p[$-1])return C[$-1].evaluate(d);var lt=Es(p,N),Tt=Ka.interpolationFactor(this.interpolation,N,p[lt],p[lt+1]),Bt=C[lt].evaluate(d),Jt=C[lt+1].evaluate(d);return this.operator==="interpolate"?Bs[this.type.kind.toLowerCase()](Bt,Jt,Tt):this.operator==="interpolate-hcl"?Ns.reverse(Ns.interpolate(Ns.forward(Bt),Ns.forward(Jt),Tt)):to.reverse(to.interpolate(to.forward(Bt),to.forward(Jt),Tt))},Ka.prototype.eachChild=function(d){d(this.input);for(var p=0,C=this.outputs;p<C.length;p+=1)d(C[p])},Ka.prototype.outputDefined=function(){return this.outputs.every(function(d){return d.outputDefined()})},Ka.prototype.serialize=function(){var d;d=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var p=[this.operator,d,this.input.serialize()],C=0;C<this.labels.length;C++)p.push(this.labels[C],this.outputs[C].serialize());return p};var Jo=function(p,C){this.type=p,this.args=C};Jo.parse=function(d,p){if(d.length<2)return p.error("Expectected at least one argument.");var C=null,N=p.expectedType;N&&N.kind!=="value"&&(C=N);for(var $=[],lt=0,Tt=d.slice(1);lt<Tt.length;lt+=1){var Bt=p.parse(Tt[lt],1+$.length,C,void 0,{typeAnnotation:"omit"});if(!Bt)return null;C=C||Bt.type,$.push(Bt)}var Jt=N&&$.some(function(de){return Hn(N,de.type)});return new Jo(Jt?Ve:C,$)},Jo.prototype.evaluate=function(d){for(var p,C=null,N=0,$=0,lt=this.args;$<lt.length&&(N++,(C=lt[$].evaluate(d))&&C instanceof eo&&!C.available&&(p||(p=C.name),C=null,N===this.args.length&&(C=p)),C===null);$+=1);return C},Jo.prototype.eachChild=function(d){this.args.forEach(d)},Jo.prototype.outputDefined=function(){return this.args.every(function(d){return d.outputDefined()})},Jo.prototype.serialize=function(){var d=["coalesce"];return this.eachChild(function(p){d.push(p.serialize())}),d};var Os=function(p,C){this.type=C.type,this.bindings=[].concat(p),this.result=C};Os.prototype.evaluate=function(d){return this.result.evaluate(d)},Os.prototype.eachChild=function(d){for(var p=0,C=this.bindings;p<C.length;p+=1)d(C[p][1]);d(this.result)},Os.parse=function(d,p){if(d.length<4)return p.error("Expected at least 3 arguments, but found "+(d.length-1)+" instead.");for(var C=[],N=1;N<d.length-1;N+=2){var $=d[N];if(typeof $!="string")return p.error("Expected string, but found "+typeof $+" instead.",N);if(/[^a-zA-Z0-9_]/.test($))return p.error("Variable names must contain only alphanumeric characters or '_'.",N);var lt=p.parse(d[N+1],N+1);if(!lt)return null;C.push([$,lt])}var Tt=p.parse(d[d.length-1],d.length-1,p.expectedType,C);return Tt?new Os(C,Tt):null},Os.prototype.outputDefined=function(){return this.result.outputDefined()},Os.prototype.serialize=function(){for(var d=["let"],p=0,C=this.bindings;p<C.length;p+=1){var N=C[p];d.push(N[0],N[1].serialize())}return d.push(this.result.serialize()),d};var tu=function(p,C,N){this.type=p,this.index=C,this.input=N};tu.parse=function(d,p){if(d.length!==3)return p.error("Expected 2 arguments, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1,cn),N=p.parse(d[2],2,mn(p.expectedType||Ve));return C&&N?new tu(N.type.itemType,C,N):null},tu.prototype.evaluate=function(d){var p=this.index.evaluate(d),C=this.input.evaluate(d);if(p<0)throw new jo("Array index out of bounds: "+p+" < 0.");if(p>=C.length)throw new jo("Array index out of bounds: "+p+" > "+(C.length-1)+".");if(p!==Math.floor(p))throw new jo("Array index must be an integer, but found "+p+" instead.");return C[p]},tu.prototype.eachChild=function(d){d(this.index),d(this.input)},tu.prototype.outputDefined=function(){return!1},tu.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var _s=function(p,C){this.type=Sr,this.needle=p,this.haystack=C};_s.parse=function(d,p){if(d.length!==3)return p.error("Expected 2 arguments, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1,Ve),N=p.parse(d[2],2,Ve);return C&&N?_n(C.type,[Sr,Pr,cn,or,Ve])?new _s(C,N):p.error("Expected first argument to be of type boolean, string, number or null, but found "+Dn(C.type)+" instead"):null},_s.prototype.evaluate=function(d){var p=this.needle.evaluate(d),C=this.haystack.evaluate(d);if(!C)return!1;if(!br(p,["boolean","string","number","null"]))throw new jo("Expected first argument to be of type boolean, string, number or null, but found "+Dn(io(p))+" instead.");if(!br(C,["string","array"]))throw new jo("Expected second argument to be of type array or string, but found "+Dn(io(C))+" instead.");return C.indexOf(p)>=0},_s.prototype.eachChild=function(d){d(this.needle),d(this.haystack)},_s.prototype.outputDefined=function(){return!0},_s.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var vs=function(p,C,N){this.type=cn,this.needle=p,this.haystack=C,this.fromIndex=N};vs.parse=function(d,p){if(d.length<=2||d.length>=5)return p.error("Expected 3 or 4 arguments, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1,Ve),N=p.parse(d[2],2,Ve);if(!C||!N)return null;if(!_n(C.type,[Sr,Pr,cn,or,Ve]))return p.error("Expected first argument to be of type boolean, string, number or null, but found "+Dn(C.type)+" instead");if(d.length===4){var $=p.parse(d[3],3,cn);return $?new vs(C,N,$):null}return new vs(C,N)},vs.prototype.evaluate=function(d){var p=this.needle.evaluate(d),C=this.haystack.evaluate(d);if(!br(p,["boolean","string","number","null"]))throw new jo("Expected first argument to be of type boolean, string, number or null, but found "+Dn(io(p))+" instead.");if(!br(C,["string","array"]))throw new jo("Expected second argument to be of type array or string, but found "+Dn(io(C))+" instead.");if(this.fromIndex){var N=this.fromIndex.evaluate(d);return C.indexOf(p,N)}return C.indexOf(p)},vs.prototype.eachChild=function(d){d(this.needle),d(this.haystack),this.fromIndex&&d(this.fromIndex)},vs.prototype.outputDefined=function(){return!1},vs.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var d=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),d]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var ts=function(p,C,N,$,lt,Tt){this.inputType=p,this.type=C,this.input=N,this.cases=$,this.outputs=lt,this.otherwise=Tt};ts.parse=function(d,p){if(d.length<5)return p.error("Expected at least 4 arguments, but found only "+(d.length-1)+".");if(d.length%2!=1)return p.error("Expected an even number of arguments.");var C,N;p.expectedType&&p.expectedType.kind!=="value"&&(N=p.expectedType);for(var $={},lt=[],Tt=2;Tt<d.length-1;Tt+=2){var Bt=d[Tt],Jt=d[Tt+1];Array.isArray(Bt)||(Bt=[Bt]);var de=p.concat(Tt);if(Bt.length===0)return de.error("Expected at least one branch label.");for(var Le=0,Ge=Bt;Le<Ge.length;Le+=1){var He=Ge[Le];if(typeof He!="number"&&typeof He!="string")return de.error("Branch labels must be numbers or strings.");if(typeof He=="number"&&Math.abs(He)>Number.MAX_SAFE_INTEGER)return de.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof He=="number"&&Math.floor(He)!==He)return de.error("Numeric branch labels must be integer values.");if(C){if(de.checkSubtype(C,io(He)))return null}else C=io(He);if($[String(He)]!==void 0)return de.error("Branch labels must be unique.");$[String(He)]=lt.length}var ln=p.parse(Jt,Tt,N);if(!ln)return null;N=N||ln.type,lt.push(ln)}var In=p.parse(d[1],1,Ve);if(!In)return null;var Cn=p.parse(d[d.length-1],d.length-1,N);return Cn?In.type.kind!=="value"&&p.concat(1).checkSubtype(C,In.type)?null:new ts(C,N,In,$,lt,Cn):null},ts.prototype.evaluate=function(d){var p=this.input.evaluate(d);return(io(p)===this.inputType&&this.outputs[this.cases[p]]||this.otherwise).evaluate(d)},ts.prototype.eachChild=function(d){d(this.input),this.outputs.forEach(d),d(this.otherwise)},ts.prototype.outputDefined=function(){return this.outputs.every(function(d){return d.outputDefined()})&&this.otherwise.outputDefined()},ts.prototype.serialize=function(){for(var d=this,p=["match",this.input.serialize()],C=[],N={},$=0,lt=Object.keys(this.cases).sort();$<lt.length;$+=1){var Tt=lt[$];(Ge=N[this.cases[Tt]])===void 0?(N[this.cases[Tt]]=C.length,C.push([this.cases[Tt],[Tt]])):C[Ge][1].push(Tt)}for(var Bt=function(In){return d.inputType.kind==="number"?Number(In):In},Jt=0,de=C;Jt<de.length;Jt+=1){var Le=de[Jt],Ge=Le[0],He=Le[1];p.push(He.length===1?Bt(He[0]):He.map(Bt)),p.push(this.outputs[outputIndex$1].serialize())}return p.push(this.otherwise.serialize()),p};var ws=function(p,C,N){this.type=p,this.branches=C,this.otherwise=N};ws.parse=function(d,p){if(d.length<4)return p.error("Expected at least 3 arguments, but found only "+(d.length-1)+".");if(d.length%2!=0)return p.error("Expected an odd number of arguments.");var C;p.expectedType&&p.expectedType.kind!=="value"&&(C=p.expectedType);for(var N=[],$=1;$<d.length-1;$+=2){var lt=p.parse(d[$],$,Sr);if(!lt)return null;var Tt=p.parse(d[$+1],$+1,C);if(!Tt)return null;N.push([lt,Tt]),C=C||Tt.type}var Bt=p.parse(d[d.length-1],d.length-1,C);return Bt?new ws(C,N,Bt):null},ws.prototype.evaluate=function(d){for(var p=0,C=this.branches;p<C.length;p+=1){var N=C[p],$=N[1];if(N[0].evaluate(d))return $.evaluate(d)}return this.otherwise.evaluate(d)},ws.prototype.eachChild=function(d){for(var p=0,C=this.branches;p<C.length;p+=1){var N=C[p],$=N[1];d(N[0]),d($)}d(this.otherwise)},ws.prototype.outputDefined=function(){return this.branches.every(function(d){return d[1].outputDefined()})&&this.otherwise.outputDefined()},ws.prototype.serialize=function(){var d=["case"];return this.eachChild(function(p){d.push(p.serialize())}),d};var Ms=function(p,C,N,$){this.type=p,this.input=C,this.beginIndex=N,this.endIndex=$};function Ou(d,p){return d==="=="||d==="!="?p.kind==="boolean"||p.kind==="string"||p.kind==="number"||p.kind==="null"||p.kind==="value":p.kind==="string"||p.kind==="number"||p.kind==="value"}function Bu(d,p,C,N){return N.compare(p,C)===0}function So(d,p,C){var N=d!=="=="&&d!=="!=";return function(){function $(lt,Tt,Bt){this.type=Sr,this.lhs=lt,this.rhs=Tt,this.collator=Bt,this.hasUntypedArgument=lt.type.kind==="value"||Tt.type.kind==="value"}return $.parse=function(lt,Tt){if(lt.length!==3&&lt.length!==4)return Tt.error("Expected two or three arguments.");var Bt=lt[0],Jt=Tt.parse(lt[1],1,Ve);if(!Jt)return null;if(!Ou(Bt,Jt.type))return Tt.concat(1).error('"'+Bt+`" comparisons are not supported for type '`+Dn(Jt.type)+"'.");var de=Tt.parse(lt[2],2,Ve);if(!de)return null;if(!Ou(Bt,de.type))return Tt.concat(2).error('"'+Bt+`" comparisons are not supported for type '`+Dn(de.type)+"'.");if(Jt.type.kind!==de.type.kind&&Jt.type.kind!=="value"&&de.type.kind!=="value")return Tt.error("Cannot compare types '"+Dn(Jt.type)+"' and '"+Dn(de.type)+"'.");N&&(Jt.type.kind==="value"&&de.type.kind!=="value"?Jt=new Ra(de.type,[Jt]):Jt.type.kind!=="value"&&de.type.kind==="value"&&(de=new Ra(Jt.type,[de])));var Le=null;if(lt.length===4){if(Jt.type.kind!=="string"&&de.type.kind!=="string"&&Jt.type.kind!=="value"&&de.type.kind!=="value")return Tt.error("Cannot use collator to compare non-string types.");if(!(Le=Tt.parse(lt[3],3,En)))return null}return new $(Jt,de,Le)},$.prototype.evaluate=function(lt){var Tt=this.lhs.evaluate(lt),Bt=this.rhs.evaluate(lt);if(N&&this.hasUntypedArgument){var Jt=io(Tt),de=io(Bt);if(Jt.kind!==de.kind||Jt.kind!=="string"&&Jt.kind!=="number")throw new jo('Expected arguments for "'+d+'" to be (string, string) or (number, number), but found ('+Jt.kind+", "+de.kind+") instead.")}if(this.collator&&!N&&this.hasUntypedArgument){var Le=io(Tt),Ge=io(Bt);if(Le.kind!=="string"||Ge.kind!=="string")return p(lt,Tt,Bt)}return this.collator?C(lt,Tt,Bt,this.collator.evaluate(lt)):p(lt,Tt,Bt)},$.prototype.eachChild=function(lt){lt(this.lhs),lt(this.rhs),this.collator&&lt(this.collator)},$.prototype.outputDefined=function(){return!0},$.prototype.serialize=function(){var lt=[d];return this.eachChild(function(Tt){lt.push(Tt.serialize())}),lt},$}()}Ms.parse=function(d,p){if(d.length<=2||d.length>=5)return p.error("Expected 3 or 4 arguments, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1,Ve),N=p.parse(d[2],2,cn);if(!C||!N)return null;if(!_n(C.type,[mn(Ve),Pr,Ve]))return p.error("Expected first argument to be of type array or string, but found "+Dn(C.type)+" instead");if(d.length===4){var $=p.parse(d[3],3,cn);return $?new Ms(C.type,C,N,$):null}return new Ms(C.type,C,N)},Ms.prototype.evaluate=function(d){var p=this.input.evaluate(d),C=this.beginIndex.evaluate(d);if(!br(p,["string","array"]))throw new jo("Expected first argument to be of type array or string, but found "+Dn(io(p))+" instead.");if(this.endIndex){var N=this.endIndex.evaluate(d);return p.slice(C,N)}return p.slice(C)},Ms.prototype.eachChild=function(d){d(this.input),d(this.beginIndex),this.endIndex&&d(this.endIndex)},Ms.prototype.outputDefined=function(){return!1},Ms.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var d=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),d]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var eu=So("==",function(d,p,C){return p===C},Bu),Nu=So("!=",function(d,p,C){return p!==C},function(d,p,C,N){return!Bu(0,p,C,N)}),Yu=So("<",function(d,p,C){return p<C},function(d,p,C,N){return N.compare(p,C)<0}),al=So(">",function(d,p,C){return p>C},function(d,p,C,N){return N.compare(p,C)>0}),Fu=So("<=",function(d,p,C){return p<=C},function(d,p,C,N){return N.compare(p,C)<=0}),Oo=So(">=",function(d,p,C){return p>=C},function(d,p,C,N){return N.compare(p,C)>=0}),Ua=function(p,C,N,$,lt){this.type=Pr,this.number=p,this.locale=C,this.currency=N,this.minFractionDigits=$,this.maxFractionDigits=lt};Ua.parse=function(d,p){if(d.length!==3)return p.error("Expected two arguments.");var C=p.parse(d[1],1,cn);if(!C)return null;var N=d[2];if(typeof N!="object"||Array.isArray(N))return p.error("NumberFormat options argument must be an object.");var $=null;if(N.locale&&!($=p.parse(N.locale,1,Pr)))return null;var lt=null;if(N.currency&&!(lt=p.parse(N.currency,1,Pr)))return null;var Tt=null;if(N["min-fraction-digits"]&&!(Tt=p.parse(N["min-fraction-digits"],1,cn)))return null;var Bt=null;return N["max-fraction-digits"]&&!(Bt=p.parse(N["max-fraction-digits"],1,cn))?null:new Ua(C,$,lt,Tt,Bt)},Ua.prototype.evaluate=function(d){return new Intl.NumberFormat(this.locale?this.locale.evaluate(d):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(d):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(d):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(d):void 0}).format(this.number.evaluate(d))},Ua.prototype.eachChild=function(d){d(this.number),this.locale&&d(this.locale),this.currency&&d(this.currency),this.minFractionDigits&&d(this.minFractionDigits),this.maxFractionDigits&&d(this.maxFractionDigits)},Ua.prototype.outputDefined=function(){return!1},Ua.prototype.serialize=function(){var d={};return this.locale&&(d.locale=this.locale.serialize()),this.currency&&(d.currency=this.currency.serialize()),this.minFractionDigits&&(d["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(d["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),d]};var ba=function(p){this.type=cn,this.input=p};ba.parse=function(d,p){if(d.length!==2)return p.error("Expected 1 argument, but found "+(d.length-1)+" instead.");var C=p.parse(d[1],1);return C?C.type.kind!=="array"&&C.type.kind!=="string"&&C.type.kind!=="value"?p.error("Expected argument of type string or array, but found "+Dn(C.type)+" instead."):new ba(C):null},ba.prototype.evaluate=function(d){var p=this.input.evaluate(d);if(typeof p=="string"||Array.isArray(p))return p.length;throw new jo("Expected value to be of type string or array, but found "+Dn(io(p))+" instead.")},ba.prototype.eachChild=function(d){d(this.input)},ba.prototype.outputDefined=function(){return!1},ba.prototype.serialize=function(){var d=["length"];return this.eachChild(function(p){d.push(p.serialize())}),d};var No={"==":eu,"!=":Nu,">":al,"<":Yu,">=":Oo,"<=":Fu,array:Ra,at:tu,boolean:Ra,case:ws,coalesce:Jo,collator:se,format:Xo,image:Bo,in:_s,"index-of":vs,interpolate:Ka,"interpolate-hcl":Ka,"interpolate-lab":Ka,length:ba,let:Os,literal:Ko,match:ts,number:Ra,"number-format":Ua,object:Ra,slice:Ms,step:Co,string:Ra,"to-boolean":ao,"to-color":ao,"to-number":ao,"to-string":ao,var:ls,within:uo};function hu(d,p){var C=p[0],N=p[1],$=p[2],lt=p[3];C=C.evaluate(d),N=N.evaluate(d),$=$.evaluate(d);var Tt=lt?lt.evaluate(d):1,Bt=Ho(C,N,$,Tt);if(Bt)throw new jo(Bt);return new Fr(C/255*Tt,N/255*Tt,$/255*Tt,Tt)}function Zu(d,p){return d in p}function ps(d,p){var C=p[d];return C===void 0?null:C}function $o(d){return{type:d}}function Is(d){return{result:"success",value:d}}function su(d){return{result:"error",value:d}}function Fo(d){return d["property-type"]==="data-driven"||d["property-type"]==="cross-faded-data-driven"}function Ku(d){return!!d.expression&&d.expression.parameters.indexOf("zoom")>-1}function Xs(d){return!!d.expression&&d.expression.interpolated}function Xa(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}function yl(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function Hl(d){return d}function xl(d,p,C){return d!==void 0?d:p!==void 0?p:C!==void 0?C:void 0}function yc(d,p,C,N,$){return xl(typeof C===$?N[C]:void 0,d.default,p.default)}function Tl(d,p,C){if(Xa(C)!=="number")return xl(d.default,p.default);var N=d.stops.length;if(N===1||C<=d.stops[0][0])return d.stops[0][1];if(C>=d.stops[N-1][0])return d.stops[N-1][1];var $=Es(d.stops.map(function(lt){return lt[0]}),C);return d.stops[$][1]}function oo(d,p,C){var N=d.base!==void 0?d.base:1;if(Xa(C)!=="number")return xl(d.default,p.default);var $=d.stops.length;if($===1||C<=d.stops[0][0])return d.stops[0][1];if(C>=d.stops[$-1][0])return d.stops[$-1][1];var lt=Es(d.stops.map(function(Ge){return Ge[0]}),C),Tt=function(Ge,He,ln,In){var Cn=In-ln,Zn=Ge-ln;return Cn===0?0:He===1?Zn/Cn:(Math.pow(He,Zn)-1)/(Math.pow(He,Cn)-1)}(C,N,d.stops[lt][0],d.stops[lt+1][0]),Bt=d.stops[lt][1],Jt=d.stops[lt+1][1],de=Bs[p.type]||Hl;if(d.colorSpace&&d.colorSpace!=="rgb"){var Le=Ss[d.colorSpace];de=function(He,ln){return Le.reverse(Le.interpolate(Le.forward(He),Le.forward(ln),Tt))}}return typeof Bt.evaluate=="function"?{evaluate:function(){for(var He=[],ln=arguments.length;ln--;)He[ln]=arguments[ln];var In=Bt.evaluate.apply(void 0,He),Cn=Jt.evaluate.apply(void 0,He);if(In!==void 0&&Cn!==void 0)return de(In,Cn,Tt)}}:de(Bt,Jt,Tt)}function wu(d,p,C){return p.type==="color"?C=Fr.parse(C):p.type==="formatted"?C=Aa.fromString(C.toString()):p.type==="resolvedImage"?C=eo.fromString(C.toString()):Xa(C)===p.type||p.type==="enum"&&p.values[C]||(C=void 0),xl(C,d.default,p.default)}Ne.register(No,{error:[{kind:"error"},[Pr],function(d,p){throw new jo(p[0].evaluate(d))}],typeof:[Pr,[Ve],function(d,p){return Dn(io(p[0].evaluate(d)))}],"to-rgba":[mn(cn,4),[Re],function(d,p){return p[0].evaluate(d).toArray()}],rgb:[Re,[cn,cn,cn],hu],rgba:[Re,[cn,cn,cn,cn],hu],has:{type:Sr,overloads:[[[Pr],function(d,p){return Zu(p[0].evaluate(d),d.properties())}],[[Pr,$e],function(d,p){var C=p[1];return Zu(p[0].evaluate(d),C.evaluate(d))}]]},get:{type:Ve,overloads:[[[Pr],function(d,p){return ps(p[0].evaluate(d),d.properties())}],[[Pr,$e],function(d,p){var C=p[1];return ps(p[0].evaluate(d),C.evaluate(d))}]]},"feature-state":[Ve,[Pr],function(d,p){return ps(p[0].evaluate(d),d.featureState||{})}],properties:[$e,[],function(d){return d.properties()}],"geometry-type":[Pr,[],function(d){return d.geometryType()}],id:[Ve,[],function(d){return d.id()}],zoom:[cn,[],function(d){return d.globals.zoom}],"heatmap-density":[cn,[],function(d){return d.globals.heatmapDensity||0}],"line-progress":[cn,[],function(d){return d.globals.lineProgress||0}],accumulated:[Ve,[],function(d){return d.globals.accumulated===void 0?null:d.globals.accumulated}],"+":[cn,$o(cn),function(d,p){for(var C=0,N=0,$=p;N<$.length;N+=1)C+=$[N].evaluate(d);return C}],"*":[cn,$o(cn),function(d,p){for(var C=1,N=0,$=p;N<$.length;N+=1)C*=$[N].evaluate(d);return C}],"-":{type:cn,overloads:[[[cn,cn],function(d,p){var C=p[1];return p[0].evaluate(d)-C.evaluate(d)}],[[cn],function(d,p){return-p[0].evaluate(d)}]]},"/":[cn,[cn,cn],function(d,p){var C=p[1];return p[0].evaluate(d)/C.evaluate(d)}],"%":[cn,[cn,cn],function(d,p){var C=p[1];return p[0].evaluate(d)%C.evaluate(d)}],ln2:[cn,[],function(){return Math.LN2}],pi:[cn,[],function(){return Math.PI}],e:[cn,[],function(){return Math.E}],"^":[cn,[cn,cn],function(d,p){var C=p[1];return Math.pow(p[0].evaluate(d),C.evaluate(d))}],sqrt:[cn,[cn],function(d,p){return Math.sqrt(p[0].evaluate(d))}],log10:[cn,[cn],function(d,p){return Math.log(p[0].evaluate(d))/Math.LN10}],ln:[cn,[cn],function(d,p){return Math.log(p[0].evaluate(d))}],log2:[cn,[cn],function(d,p){return Math.log(p[0].evaluate(d))/Math.LN2}],sin:[cn,[cn],function(d,p){return Math.sin(p[0].evaluate(d))}],cos:[cn,[cn],function(d,p){return Math.cos(p[0].evaluate(d))}],tan:[cn,[cn],function(d,p){return Math.tan(p[0].evaluate(d))}],asin:[cn,[cn],function(d,p){return Math.asin(p[0].evaluate(d))}],acos:[cn,[cn],function(d,p){return Math.acos(p[0].evaluate(d))}],atan:[cn,[cn],function(d,p){return Math.atan(p[0].evaluate(d))}],min:[cn,$o(cn),function(d,p){return Math.min.apply(Math,p.map(function(C){return C.evaluate(d)}))}],max:[cn,$o(cn),function(d,p){return Math.max.apply(Math,p.map(function(C){return C.evaluate(d)}))}],abs:[cn,[cn],function(d,p){return Math.abs(p[0].evaluate(d))}],round:[cn,[cn],function(d,p){var C=p[0].evaluate(d);return C<0?-Math.round(-C):Math.round(C)}],floor:[cn,[cn],function(d,p){return Math.floor(p[0].evaluate(d))}],ceil:[cn,[cn],function(d,p){return Math.ceil(p[0].evaluate(d))}],"filter-==":[Sr,[Pr,Ve],function(d,p){var C=p[0],N=p[1];return d.properties()[C.value]===N.value}],"filter-id-==":[Sr,[Ve],function(d,p){var C=p[0];return d.id()===C.value}],"filter-type-==":[Sr,[Pr],function(d,p){var C=p[0];return d.geometryType()===C.value}],"filter-<":[Sr,[Pr,Ve],function(d,p){var C=p[0],N=p[1],$=d.properties()[C.value],lt=N.value;return typeof $==typeof lt&&$<lt}],"filter-id-<":[Sr,[Ve],function(d,p){var C=p[0],N=d.id(),$=C.value;return typeof N==typeof $&&N<$}],"filter->":[Sr,[Pr,Ve],function(d,p){var C=p[0],N=p[1],$=d.properties()[C.value],lt=N.value;return typeof $==typeof lt&&$>lt}],"filter-id->":[Sr,[Ve],function(d,p){var C=p[0],N=d.id(),$=C.value;return typeof N==typeof $&&N>$}],"filter-<=":[Sr,[Pr,Ve],function(d,p){var C=p[0],N=p[1],$=d.properties()[C.value],lt=N.value;return typeof $==typeof lt&&$<=lt}],"filter-id-<=":[Sr,[Ve],function(d,p){var C=p[0],N=d.id(),$=C.value;return typeof N==typeof $&&N<=$}],"filter->=":[Sr,[Pr,Ve],function(d,p){var C=p[0],N=p[1],$=d.properties()[C.value],lt=N.value;return typeof $==typeof lt&&$>=lt}],"filter-id->=":[Sr,[Ve],function(d,p){var C=p[0],N=d.id(),$=C.value;return typeof N==typeof $&&N>=$}],"filter-has":[Sr,[Ve],function(d,p){return p[0].value in d.properties()}],"filter-has-id":[Sr,[],function(d){return d.id()!==null&&d.id()!==void 0}],"filter-type-in":[Sr,[mn(Pr)],function(d,p){return p[0].value.indexOf(d.geometryType())>=0}],"filter-id-in":[Sr,[mn(Ve)],function(d,p){return p[0].value.indexOf(d.id())>=0}],"filter-in-small":[Sr,[Pr,mn(Ve)],function(d,p){var C=p[0];return p[1].value.indexOf(d.properties()[C.value])>=0}],"filter-in-large":[Sr,[Pr,mn(Ve)],function(d,p){var C=p[0],N=p[1];return function($,lt,Tt,Bt){for(;Tt<=Bt;){var Jt=Tt+Bt>>1;if(lt[Jt]===$)return!0;lt[Jt]>$?Bt=Jt-1:Tt=Jt+1}return!1}(d.properties()[C.value],N.value,0,N.value.length-1)}],all:{type:Sr,overloads:[[[Sr,Sr],function(d,p){var C=p[1];return p[0].evaluate(d)&&C.evaluate(d)}],[$o(Sr),function(d,p){for(var C=0,N=p;C<N.length;C+=1)if(!N[C].evaluate(d))return!1;return!0}]]},any:{type:Sr,overloads:[[[Sr,Sr],function(d,p){var C=p[1];return p[0].evaluate(d)||C.evaluate(d)}],[$o(Sr),function(d,p){for(var C=0,N=p;C<N.length;C+=1)if(N[C].evaluate(d))return!0;return!1}]]},"!":[Sr,[Sr],function(d,p){return!p[0].evaluate(d)}],"is-supported-script":[Sr,[Pr],function(d,p){var C=d.globals&&d.globals.isSupportedScript;return!C||C(p[0].evaluate(d))}],upcase:[Pr,[Pr],function(d,p){return p[0].evaluate(d).toUpperCase()}],downcase:[Pr,[Pr],function(d,p){return p[0].evaluate(d).toLowerCase()}],concat:[Pr,$o(Ve),function(d,p){return p.map(function(C){return ds(C.evaluate(d))}).join("")}],"resolved-locale":[Pr,[En],function(d,p){return p[0].evaluate(d).resolvedLocale()}]});var bl=function(p,C){this.expression=p,this._warningHistory={},this._evaluator=new Hs,this._defaultValue=C?function(N){return N.type==="color"&&yl(N.default)?new Fr(0,0,0,0):N.type==="color"?Fr.parse(N.default)||null:N.default===void 0?null:N.default}(C):null,this._enumValues=C&&C.type==="enum"?C.values:null};function nu(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in No}function zu(d,p){var C=new ko(No,[],p?function($){var lt={color:Re,string:Pr,number:cn,enum:Pr,boolean:Sr,formatted:xn,resolvedImage:Nn};return $.type==="array"?mn(lt[$.value]||Ve,$.length):lt[$.type]}(p):void 0),N=C.parse(d,void 0,void 0,void 0,p&&p.type==="string"?{typeAnnotation:"coerce"}:void 0);return N?Is(new bl(N,p)):su(C.errors)}bl.prototype.evaluateWithoutErrorHandling=function(d,p,C,N,$,lt){return this._evaluator.globals=d,this._evaluator.feature=p,this._evaluator.featureState=C,this._evaluator.canonical=N,this._evaluator.availableImages=$||null,this._evaluator.formattedSection=lt,this.expression.evaluate(this._evaluator)},bl.prototype.evaluate=function(d,p,C,N,$,lt){this._evaluator.globals=d,this._evaluator.feature=p||null,this._evaluator.featureState=C||null,this._evaluator.canonical=N,this._evaluator.availableImages=$||null,this._evaluator.formattedSection=lt||null;try{var Tt=this.expression.evaluate(this._evaluator);if(Tt==null||typeof Tt=="number"&&Tt!=Tt)return this._defaultValue;if(this._enumValues&&!(Tt in this._enumValues))throw new jo("Expected value to be one of "+Object.keys(this._enumValues).map(function(Bt){return JSON.stringify(Bt)}).join(", ")+", but found "+JSON.stringify(Tt)+" instead.");return Tt}catch(Bt){return this._warningHistory[Bt.message]||(this._warningHistory[Bt.message]=!0,typeof console!="undefined"&&console.warn(Bt.message)),this._defaultValue}};var xu=function(p,C){this.kind=p,this._styleExpression=C,this.isStateDependent=p!=="constant"&&!Ja(C.expression)};xu.prototype.evaluateWithoutErrorHandling=function(d,p,C,N,$,lt){return this._styleExpression.evaluateWithoutErrorHandling(d,p,C,N,$,lt)},xu.prototype.evaluate=function(d,p,C,N,$,lt){return this._styleExpression.evaluate(d,p,C,N,$,lt)};var bu=function(p,C,N,$){this.kind=p,this.zoomStops=N,this._styleExpression=C,this.isStateDependent=p!=="camera"&&!Ja(C.expression),this.interpolationType=$};function Js(d,p){if((d=zu(d,p)).result==="error")return d;var C=d.value.expression,N=co(C);if(!N&&!Fo(p))return su([new dn("","data expressions not supported")]);var $=Po(C,["zoom"]);if(!$&&!Ku(p))return su([new dn("","zoom expressions not supported")]);var lt=function Tt(Bt){var Jt=null;if(Bt instanceof Os)Jt=Tt(Bt.result);else if(Bt instanceof Jo)for(var de=0,Le=Bt.args;de<Le.length&&!(Jt=Tt(Le[de]));de+=1);else(Bt instanceof Co||Bt instanceof Ka)&&Bt.input instanceof Ne&&Bt.input.name==="zoom"&&(Jt=Bt);return Jt instanceof dn||Bt.eachChild(function(Ge){var He=Tt(Ge);He instanceof dn?Jt=He:!Jt&&He?Jt=new dn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):Jt&&He&&Jt!==He&&(Jt=new dn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),Jt}(C);return lt||$?lt instanceof dn?su([lt]):lt instanceof Ka&&!Xs(p)?su([new dn("",'"interpolate" expressions cannot be used with this property')]):Is(lt?new bu(N?"camera":"composite",d.value,lt.labels,lt instanceof Ka?lt.interpolation:void 0):new xu(N?"constant":"source",d.value)):su([new dn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}bu.prototype.evaluateWithoutErrorHandling=function(d,p,C,N,$,lt){return this._styleExpression.evaluateWithoutErrorHandling(d,p,C,N,$,lt)},bu.prototype.evaluate=function(d,p,C,N,$,lt){return this._styleExpression.evaluate(d,p,C,N,$,lt)},bu.prototype.interpolationFactor=function(d,p,C){return this.interpolationType?Ka.interpolationFactor(this.interpolationType,d,p,C):0};var cs=function(p,C){this._parameters=p,this._specification=C,Rn(this,function N($,lt){var Tt,Bt,Jt,de=lt.type==="color",Le=$.stops&&typeof $.stops[0][0]=="object",Ge=Le||!(Le||$.property!==void 0),He=$.type||(Xs(lt)?"exponential":"interval");if(de&&(($=Rn({},$)).stops&&($.stops=$.stops.map(function(ua){return[ua[0],Fr.parse(ua[1])]})),$.default=Fr.parse($.default?$.default:lt.default)),$.colorSpace&&$.colorSpace!=="rgb"&&!Ss[$.colorSpace])throw new Error("Unknown color space: "+$.colorSpace);if(He==="exponential")Tt=oo;else if(He==="interval")Tt=Tl;else if(He==="categorical"){Tt=yc,Bt=Object.create(null);for(var ln=0,In=$.stops;ln<In.length;ln+=1){var Cn=In[ln];Bt[Cn[0]]=Cn[1]}Jt=typeof $.stops[0][0]}else{if(He!=="identity")throw new Error('Unknown function type "'+He+'"');Tt=wu}if(Le){for(var Zn={},Kn=[],_r=0;_r<$.stops.length;_r++){var jr=$.stops[_r],kr=jr[0].zoom;Zn[kr]===void 0&&(Zn[kr]={zoom:kr,type:$.type,property:$.property,default:$.default,stops:[]},Kn.push(kr)),Zn[kr].stops.push([jr[0].value,jr[1]])}for(var vi=[],oi=0,Ni=Kn;oi<Ni.length;oi+=1){var Fi=Ni[oi];vi.push([Zn[Fi].zoom,N(Zn[Fi],lt)])}var oa={name:"linear"};return{kind:"composite",interpolationType:oa,interpolationFactor:Ka.interpolationFactor.bind(void 0,oa),zoomStops:vi.map(function(ua){return ua[0]}),evaluate:function(ta,ro){var wa=ta.zoom;return oo({stops:vi,base:$.base},lt,wa).evaluate(wa,ro)}}}if(Ge){var ga=He==="exponential"?{name:"exponential",base:$.base!==void 0?$.base:1}:null;return{kind:"camera",interpolationType:ga,interpolationFactor:Ka.interpolationFactor.bind(void 0,ga),zoomStops:$.stops.map(function(ua){return ua[0]}),evaluate:function(ta){return Tt($,lt,ta.zoom,Bt,Jt)}}}return{kind:"source",evaluate:function(ta,ro){var wa=ro&&ro.properties?ro.properties[$.property]:void 0;return wa===void 0?xl($.default,lt.default):Tt($,lt,wa,Bt,Jt)}}}(this._parameters,this._specification))};function Ps(d){var p=d.key,C=d.value,N=d.valueSpec||{},$=d.objectElementValidators||{},lt=d.style,Tt=d.styleSpec,Bt=[],Jt=Xa(C);if(Jt!=="object")return[new xe(p,C,"object expected, "+Jt+" found")];for(var de in C){var Le=de.split(".")[0],Ge=N[Le]||N["*"],He=void 0;if($[Le])He=$[Le];else if(N[Le])He=Da;else if($["*"])He=$["*"];else{if(!N["*"]){Bt.push(new xe(p,C[de],'unknown property "'+de+'"'));continue}He=Da}Bt=Bt.concat(He({key:(p&&p+".")+de,value:C[de],valueSpec:Ge,style:lt,styleSpec:Tt,object:C,objectKey:de},C))}for(var ln in N)$[ln]||N[ln].required&&N[ln].default===void 0&&C[ln]===void 0&&Bt.push(new xe(p,C,'missing required property "'+ln+'"'));return Bt}function ol(d){var p=d.value,C=d.valueSpec,N=d.style,$=d.styleSpec,lt=d.key,Tt=d.arrayElementValidator||Da;if(Xa(p)!=="array")return[new xe(lt,p,"array expected, "+Xa(p)+" found")];if(C.length&&p.length!==C.length)return[new xe(lt,p,"array length "+C.length+" expected, length "+p.length+" found")];if(C["min-length"]&&p.length<C["min-length"])return[new xe(lt,p,"array length at least "+C["min-length"]+" expected, length "+p.length+" found")];var Bt={type:C.value,values:C.values};$.$version<7&&(Bt.function=C.function),Xa(C.value)==="object"&&(Bt=C.value);for(var Jt=[],de=0;de<p.length;de++)Jt=Jt.concat(Tt({array:p,arrayIndex:de,value:p[de],valueSpec:Bt,style:N,styleSpec:$,key:lt+"["+de+"]"}));return Jt}function Al(d){var p=d.key,C=d.value,N=d.valueSpec,$=Xa(C);return $==="number"&&C!=C&&($="NaN"),$!=="number"?[new xe(p,C,"number expected, "+$+" found")]:"minimum"in N&&C<N.minimum?[new xe(p,C,C+" is less than the minimum value "+N.minimum)]:"maximum"in N&&C>N.maximum?[new xe(p,C,C+" is greater than the maximum value "+N.maximum)]:[]}function Fl(d){var p,C,N,$=d.valueSpec,lt=tr(d.value.type),Tt={},Bt=lt!=="categorical"&&d.value.property===void 0,Jt=!Bt,de=Xa(d.value.stops)==="array"&&Xa(d.value.stops[0])==="array"&&Xa(d.value.stops[0][0])==="object",Le=Ps({key:d.key,value:d.value,valueSpec:d.styleSpec.function,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(In){if(lt==="identity")return[new xe(In.key,In.value,'identity function may not have a "stops" property')];var Cn=[],Zn=In.value;return Cn=Cn.concat(ol({key:In.key,value:Zn,valueSpec:In.valueSpec,style:In.style,styleSpec:In.styleSpec,arrayElementValidator:Ge})),Xa(Zn)==="array"&&Zn.length===0&&Cn.push(new xe(In.key,Zn,"array must have at least one stop")),Cn},default:function(In){return Da({key:In.key,value:In.value,valueSpec:$,style:In.style,styleSpec:In.styleSpec})}}});return lt==="identity"&&Bt&&Le.push(new xe(d.key,d.value,'missing required property "property"')),lt==="identity"||d.value.stops||Le.push(new xe(d.key,d.value,'missing required property "stops"')),lt==="exponential"&&d.valueSpec.expression&&!Xs(d.valueSpec)&&Le.push(new xe(d.key,d.value,"exponential functions not supported")),d.styleSpec.$version>=8&&(Jt&&!Fo(d.valueSpec)?Le.push(new xe(d.key,d.value,"property functions not supported")):Bt&&!Ku(d.valueSpec)&&Le.push(new xe(d.key,d.value,"zoom functions not supported"))),lt!=="categorical"&&!de||d.value.property!==void 0||Le.push(new xe(d.key,d.value,'"property" property is required')),Le;function Ge(ln){var In=[],Cn=ln.value,Zn=ln.key;if(Xa(Cn)!=="array")return[new xe(Zn,Cn,"array expected, "+Xa(Cn)+" found")];if(Cn.length!==2)return[new xe(Zn,Cn,"array length 2 expected, length "+Cn.length+" found")];if(de){if(Xa(Cn[0])!=="object")return[new xe(Zn,Cn,"object expected, "+Xa(Cn[0])+" found")];if(Cn[0].zoom===void 0)return[new xe(Zn,Cn,"object stop key must have zoom")];if(Cn[0].value===void 0)return[new xe(Zn,Cn,"object stop key must have value")];if(N&&N>tr(Cn[0].zoom))return[new xe(Zn,Cn[0].zoom,"stop zoom values must appear in ascending order")];tr(Cn[0].zoom)!==N&&(N=tr(Cn[0].zoom),C=void 0,Tt={}),In=In.concat(Ps({key:Zn+"[0]",value:Cn[0],valueSpec:{zoom:{}},style:ln.style,styleSpec:ln.styleSpec,objectElementValidators:{zoom:Al,value:He}}))}else In=In.concat(He({key:Zn+"[0]",value:Cn[0],valueSpec:{},style:ln.style,styleSpec:ln.styleSpec},Cn));return nu(Pn(Cn[1]))?In.concat([new xe(Zn+"[1]",Cn[1],"expressions are not allowed in function stops.")]):In.concat(Da({key:Zn+"[1]",value:Cn[1],valueSpec:$,style:ln.style,styleSpec:ln.styleSpec}))}function He(ln,In){var Cn=Xa(ln.value),Zn=tr(ln.value),Kn=ln.value!==null?ln.value:In;if(p){if(Cn!==p)return[new xe(ln.key,Kn,Cn+" stop domain type must match previous stop domain type "+p)]}else p=Cn;if(Cn!=="number"&&Cn!=="string"&&Cn!=="boolean")return[new xe(ln.key,Kn,"stop domain value must be a number, string, or boolean")];if(Cn!=="number"&&lt!=="categorical"){var _r="number expected, "+Cn+" found";return Fo($)&&lt===void 0&&(_r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new xe(ln.key,Kn,_r)]}return lt!=="categorical"||Cn!=="number"||isFinite(Zn)&&Math.floor(Zn)===Zn?lt!=="categorical"&&Cn==="number"&&C!==void 0&&Zn<C?[new xe(ln.key,Kn,"stop domain values must appear in ascending order")]:(C=Zn,lt==="categorical"&&Zn in Tt?[new xe(ln.key,Kn,"stop domain values must be unique")]:(Tt[Zn]=!0,[])):[new xe(ln.key,Kn,"integer expected, found "+Zn)]}}function Uu(d){var p=(d.expressionContext==="property"?Js:zu)(Pn(d.value),d.valueSpec);if(p.result==="error")return p.value.map(function(N){return new xe(""+d.key+N.key,d.value,N.message)});var C=p.value.expression||p.value._styleExpression.expression;if(d.expressionContext==="property"&&d.propertyKey==="text-font"&&!C.outputDefined())return[new xe(d.key,d.value,'Invalid data expression for "'+d.propertyKey+'". Output values must be contained as literals within the expression.')];if(d.expressionContext==="property"&&d.propertyType==="layout"&&!Ja(C))return[new xe(d.key,d.value,'"feature-state" data expressions are not supported with layout properties.')];if(d.expressionContext==="filter"&&!Ja(C))return[new xe(d.key,d.value,'"feature-state" data expressions are not supported with filters.')];if(d.expressionContext&&d.expressionContext.indexOf("cluster")===0){if(!Po(C,["zoom","feature-state"]))return[new xe(d.key,d.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(d.expressionContext==="cluster-initial"&&!co(C))return[new xe(d.key,d.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Xu(d){var p=d.key,C=d.value,N=d.valueSpec,$=[];return Array.isArray(N.values)?N.values.indexOf(tr(C))===-1&&$.push(new xe(p,C,"expected one of ["+N.values.join(", ")+"], "+JSON.stringify(C)+" found")):Object.keys(N.values).indexOf(tr(C))===-1&&$.push(new xe(p,C,"expected one of ["+Object.keys(N.values).join(", ")+"], "+JSON.stringify(C)+" found")),$}function sl(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(var p=0,C=d.slice(1);p<C.length;p+=1){var N=C[p];if(!sl(N)&&typeof N!="boolean")return!1}return!0;default:return!0}}cs.deserialize=function(d){return new cs(d._parameters,d._specification)},cs.serialize=function(d){return{_parameters:d._parameters,_specification:d._specification}};var Eu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function uu(d){if(d==null)return{filter:function(){return!0},needGeometry:!1};sl(d)||(d=Ls(d));var p=zu(d,Eu);if(p.result==="error")throw new Error(p.value.map(function(C){return C.key+": "+C.message}).join(", "));return{filter:function(N,$,lt){return p.value.evaluate(N,$,{},lt)},needGeometry:function C(N){if(!Array.isArray(N))return!1;if(N[0]==="within")return!0;for(var $=1;$<N.length;$++)if(C(N[$]))return!0;return!1}(d)}}function Ju(d,p){return d<p?-1:d>p?1:0}function Ls(d){if(!d)return!0;var p,C=d[0];return d.length<=1?C!=="any":C==="=="?El(d[1],d[2],"=="):C==="!="?zl(El(d[1],d[2],"==")):C==="<"||C===">"||C==="<="||C===">="?El(d[1],d[2],C):C==="any"?(p=d.slice(1),["any"].concat(p.map(Ls))):C==="all"?["all"].concat(d.slice(1).map(Ls)):C==="none"?["all"].concat(d.slice(1).map(Ls).map(zl)):C==="in"?sc(d[1],d.slice(2)):C==="!in"?zl(sc(d[1],d.slice(2))):C==="has"?Cl(d[1]):C==="!has"?zl(Cl(d[1])):C!=="within"||d}function El(d,p,C){switch(d){case"$type":return["filter-type-"+C,p];case"$id":return["filter-id-"+C,p];default:return["filter-"+C,d,p]}}function sc(d,p){if(p.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",p]];case"$id":return["filter-id-in",["literal",p]];default:return p.length>200&&!p.some(function(C){return typeof C!=typeof p[0]})?["filter-in-large",d,["literal",p.sort(Ju)]]:["filter-in-small",d,["literal",p]]}}function Cl(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function zl(d){return["!",d]}function Yl(d){return sl(Pn(d.value))?Uu(Rn({},d,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function p(C){var N=C.value,$=C.key;if(Xa(N)!=="array")return[new xe($,N,"array expected, "+Xa(N)+" found")];var lt,Tt=C.styleSpec,Bt=[];if(N.length<1)return[new xe($,N,"filter array must have at least 1 element")];switch(Bt=Bt.concat(Xu({key:$+"[0]",value:N[0],valueSpec:Tt.filter_operator,style:C.style,styleSpec:C.styleSpec})),tr(N[0])){case"<":case"<=":case">":case">=":N.length>=2&&tr(N[1])==="$type"&&Bt.push(new xe($,N,'"$type" cannot be use with operator "'+N[0]+'"'));case"==":case"!=":N.length!==3&&Bt.push(new xe($,N,'filter array for operator "'+N[0]+'" must have 3 elements'));case"in":case"!in":N.length>=2&&(lt=Xa(N[1]))!=="string"&&Bt.push(new xe($+"[1]",N[1],"string expected, "+lt+" found"));for(var Jt=2;Jt<N.length;Jt++)lt=Xa(N[Jt]),tr(N[1])==="$type"?Bt=Bt.concat(Xu({key:$+"["+Jt+"]",value:N[Jt],valueSpec:Tt.geometry_type,style:C.style,styleSpec:C.styleSpec})):lt!=="string"&&lt!=="number"&&lt!=="boolean"&&Bt.push(new xe($+"["+Jt+"]",N[Jt],"string, number, or boolean expected, "+lt+" found"));break;case"any":case"all":case"none":for(var de=1;de<N.length;de++)Bt=Bt.concat(p({key:$+"["+de+"]",value:N[de],style:C.style,styleSpec:C.styleSpec}));break;case"has":case"!has":lt=Xa(N[1]),N.length!==2?Bt.push(new xe($,N,'filter array for "'+N[0]+'" operator must have 2 elements')):lt!=="string"&&Bt.push(new xe($+"[1]",N[1],"string expected, "+lt+" found"));break;case"within":lt=Xa(N[1]),N.length!==2?Bt.push(new xe($,N,'filter array for "'+N[0]+'" operator must have 2 elements')):lt!=="object"&&Bt.push(new xe($+"[1]",N[1],"object expected, "+lt+" found"))}return Bt}(d)}function dc(d,p){var C=d.key,N=d.style,$=d.styleSpec,lt=d.value,Tt=d.objectKey,Bt=$[p+"_"+d.layerType];if(!Bt)return[];var Jt=Tt.match(/^(.*)-transition$/);if(p==="paint"&&Jt&&Bt[Jt[1]]&&Bt[Jt[1]].transition)return Da({key:C,value:lt,valueSpec:$.transition,style:N,styleSpec:$});var de,Le=d.valueSpec||Bt[Tt];if(!Le)return[new xe(C,lt,'unknown property "'+Tt+'"')];if(Xa(lt)==="string"&&Fo(Le)&&!Le.tokens&&(de=/^{([^}]+)}$/.exec(lt)))return[new xe(C,lt,'"'+Tt+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(de[1])+" }`.")];var Ge=[];return d.layerType==="symbol"&&(Tt==="text-field"&&N&&!N.glyphs&&Ge.push(new xe(C,lt,'use of "text-field" requires a style "glyphs" property')),Tt==="text-font"&&yl(Pn(lt))&&tr(lt.type)==="identity"&&Ge.push(new xe(C,lt,'"text-font" does not support identity functions'))),Ge.concat(Da({key:d.key,value:lt,valueSpec:Le,style:N,styleSpec:$,expressionContext:"property",propertyType:p,propertyKey:Tt}))}function $u(d){return dc(d,"paint")}function Ol(d){return dc(d,"layout")}function Ul(d){var p=[],C=d.value,N=d.key,$=d.style,lt=d.styleSpec;C.type||C.ref||p.push(new xe(N,C,'either "type" or "ref" is required'));var Tt,Bt=tr(C.type),Jt=tr(C.ref);if(C.id)for(var de=tr(C.id),Le=0;Le<d.arrayIndex;Le++){var Ge=$.layers[Le];tr(Ge.id)===de&&p.push(new xe(N,C.id,'duplicate layer id "'+C.id+'", previously used at line '+Ge.id.__line__))}if("ref"in C)["type","source","source-layer","filter","layout"].forEach(function(In){In in C&&p.push(new xe(N,C[In],'"'+In+'" is prohibited for ref layers'))}),$.layers.forEach(function(In){tr(In.id)===Jt&&(Tt=In)}),Tt?Tt.ref?p.push(new xe(N,C.ref,"ref cannot reference another ref layer")):Bt=tr(Tt.type):p.push(new xe(N,C.ref,'ref layer "'+Jt+'" not found'));else if(Bt!=="background")if(C.source){var He=$.sources&&$.sources[C.source],ln=He&&tr(He.type);He?ln==="vector"&&Bt==="raster"?p.push(new xe(N,C.source,'layer "'+C.id+'" requires a raster source')):ln==="raster"&&Bt!=="raster"?p.push(new xe(N,C.source,'layer "'+C.id+'" requires a vector source')):ln!=="vector"||C["source-layer"]?ln==="raster-dem"&&Bt!=="hillshade"?p.push(new xe(N,C.source,"raster-dem source can only be used with layer type 'hillshade'.")):Bt!=="line"||!C.paint||!C.paint["line-gradient"]||ln==="geojson"&&He.lineMetrics||p.push(new xe(N,C,'layer "'+C.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):p.push(new xe(N,C,'layer "'+C.id+'" must specify a "source-layer"')):p.push(new xe(N,C.source,'source "'+C.source+'" not found'))}else p.push(new xe(N,C,'missing required property "source"'));return p=p.concat(Ps({key:N,value:C,valueSpec:lt.layer,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Da({key:N+".type",value:C.type,valueSpec:lt.layer.type,style:d.style,styleSpec:d.styleSpec,object:C,objectKey:"type"})},filter:Yl,layout:function(Cn){return Ps({layer:C,key:Cn.key,value:Cn.value,style:Cn.style,styleSpec:Cn.styleSpec,objectElementValidators:{"*":function(Kn){return Ol(Rn({layerType:Bt},Kn))}}})},paint:function(Cn){return Ps({layer:C,key:Cn.key,value:Cn.value,style:Cn.style,styleSpec:Cn.styleSpec,objectElementValidators:{"*":function(Kn){return $u(Rn({layerType:Bt},Kn))}}})}}}))}function wo(d){var p=d.value,C=d.key,N=Xa(p);return N!=="string"?[new xe(C,p,"string expected, "+N+" found")]:[]}var ho={promoteId:function(p){var C=p.key,N=p.value;if(Xa(N)==="string")return wo({key:C,value:N});var $=[];for(var lt in N)$.push.apply($,wo({key:C+"."+lt,value:N[lt]}));return $}};function Sl(d){var p=d.value,C=d.key,N=d.styleSpec,$=d.style;if(!p.type)return[new xe(C,p,'"type" is required')];var lt,Tt=tr(p.type);switch(Tt){case"vector":case"raster":case"raster-dem":return Ps({key:C,value:p,valueSpec:N["source_"+Tt.replace("-","_")],style:d.style,styleSpec:N,objectElementValidators:ho});case"geojson":if(lt=Ps({key:C,value:p,valueSpec:N.source_geojson,style:$,styleSpec:N,objectElementValidators:ho}),p.cluster)for(var Bt in p.clusterProperties){var Jt=p.clusterProperties[Bt],de=Jt[0],Le=typeof de=="string"?[de,["accumulated"],["get",Bt]]:de;lt.push.apply(lt,Uu({key:C+"."+Bt+".map",value:Jt[1],expressionContext:"cluster-map"})),lt.push.apply(lt,Uu({key:C+"."+Bt+".reduce",value:Le,expressionContext:"cluster-reduce"}))}return lt;case"video":return Ps({key:C,value:p,valueSpec:N.source_video,style:$,styleSpec:N});case"image":return Ps({key:C,value:p,valueSpec:N.source_image,style:$,styleSpec:N});case"canvas":return[new xe(C,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Xu({key:C+".type",value:p.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:$,styleSpec:N})}}function ul(d){var p=d.value,C=d.styleSpec,N=C.light,$=d.style,lt=[],Tt=Xa(p);if(p===void 0)return lt;if(Tt!=="object")return lt.concat([new xe("light",p,"object expected, "+Tt+" found")]);for(var Bt in p){var Jt=Bt.match(/^(.*)-transition$/);lt=lt.concat(Jt&&N[Jt[1]]&&N[Jt[1]].transition?Da({key:Bt,value:p[Bt],valueSpec:C.transition,style:$,styleSpec:C}):N[Bt]?Da({key:Bt,value:p[Bt],valueSpec:N[Bt],style:$,styleSpec:C}):[new xe(Bt,p[Bt],'unknown property "'+Bt+'"')])}return lt}var Ys={"*":function(){return[]},array:ol,boolean:function(p){var C=p.value,N=p.key,$=Xa(C);return $!=="boolean"?[new xe(N,C,"boolean expected, "+$+" found")]:[]},number:Al,color:function(p){var C=p.key,N=p.value,$=Xa(N);return $!=="string"?[new xe(C,N,"color expected, "+$+" found")]:yr(N)===null?[new xe(C,N,'color expected, "'+N+'" found')]:[]},constants:Ke,enum:Xu,filter:Yl,function:Fl,layer:Ul,object:Ps,source:Sl,light:ul,string:wo,formatted:function(p){return wo(p).length===0?[]:Uu(p)},resolvedImage:function(p){return wo(p).length===0?[]:Uu(p)}};function Da(d){var p=d.value,C=d.valueSpec,N=d.styleSpec;return C.expression&&yl(tr(p))?Fl(d):C.expression&&nu(Pn(p))?Uu(d):C.type&&Ys[C.type]?Ys[C.type](d):Ps(Rn({},d,{valueSpec:C.type?N[C.type]:C}))}function mo(d){var p=d.value,C=d.key,N=wo(d);return N.length||(p.indexOf("{fontstack}")===-1&&N.push(new xe(C,p,'"glyphs" url must include a "{fontstack}" token')),p.indexOf("{range}")===-1&&N.push(new xe(C,p,'"glyphs" url must include a "{range}" token'))),N}function Gs(d,p){p===void 0&&(p=ue);var C=[];return C=C.concat(Da({key:"",value:d,valueSpec:p.$root,styleSpec:p,style:d,objectElementValidators:{glyphs:mo,"*":function(){return[]}}})),d.constants&&(C=C.concat(Ke({key:"constants",value:d.constants,style:d,styleSpec:p}))),wl(C)}function wl(d){return[].concat(d).sort(function(p,C){return p.line-C.line})}function ll(d){return function(){for(var p=[],C=arguments.length;C--;)p[C]=arguments[C];return wl(d.apply(this,p))}}Gs.source=ll(Sl),Gs.light=ll(ul),Gs.layer=ll(Ul),Gs.filter=ll(Yl),Gs.paintProperty=ll($u),Gs.layoutProperty=ll(Ol);var Qu=Gs,xc=Qu.light,Zl=Qu.paintProperty,qu=Qu.layoutProperty;function ru(d,p){var C=!1;if(p&&p.length)for(var N=0,$=p;N<$.length;N+=1)d.fire(new re(new Error($[N].message))),C=!0;return C}var Zs=es;function es(d,p,C){var N=this.cells=[];if(d instanceof ArrayBuffer){this.arrayBuffer=d;var $=new Int32Array(this.arrayBuffer);d=$[0],this.d=(p=$[1])+2*(C=$[2]);for(var lt=0;lt<this.d*this.d;lt++){var Tt=$[3+lt],Bt=$[3+lt+1];N.push(Tt===Bt?null:$.subarray(Tt,Bt))}var Jt=$[3+N.length+1];this.keys=$.subarray($[3+N.length],Jt),this.bboxes=$.subarray(Jt),this.insert=this._insertReadonly}else{this.d=p+2*C;for(var de=0;de<this.d*this.d;de++)N.push([]);this.keys=[],this.bboxes=[]}this.n=p,this.extent=d,this.padding=C,this.scale=p/d,this.uid=0;var Le=C/p*d;this.min=-Le,this.max=d+Le}es.prototype.insert=function(d,p,C,N,$){this._forEachCell(p,C,N,$,this._insertCell,this.uid++),this.keys.push(d),this.bboxes.push(p),this.bboxes.push(C),this.bboxes.push(N),this.bboxes.push($)},es.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},es.prototype._insertCell=function(d,p,C,N,$,lt){this.cells[$].push(lt)},es.prototype.query=function(d,p,C,N,$){var lt=this.min,Tt=this.max;if(d<=lt&&p<=lt&&Tt<=C&&Tt<=N&&!$)return Array.prototype.slice.call(this.keys);var Bt=[];return this._forEachCell(d,p,C,N,this._queryCell,Bt,{},$),Bt},es.prototype._queryCell=function(d,p,C,N,$,lt,Tt,Bt){var Jt=this.cells[$];if(Jt!==null)for(var de=this.keys,Le=this.bboxes,Ge=0;Ge<Jt.length;Ge++){var He=Jt[Ge];if(Tt[He]===void 0){var ln=4*He;(Bt?Bt(Le[ln+0],Le[ln+1],Le[ln+2],Le[ln+3]):d<=Le[ln+2]&&p<=Le[ln+3]&&C>=Le[ln+0]&&N>=Le[ln+1])?(Tt[He]=!0,lt.push(de[He])):Tt[He]=!1}}},es.prototype._forEachCell=function(d,p,C,N,$,lt,Tt,Bt){for(var Jt=this._convertToCellCoord(d),de=this._convertToCellCoord(p),Le=this._convertToCellCoord(C),Ge=this._convertToCellCoord(N),He=Jt;He<=Le;He++)for(var ln=de;ln<=Ge;ln++){var In=this.d*ln+He;if((!Bt||Bt(this._convertFromCellCoord(He),this._convertFromCellCoord(ln),this._convertFromCellCoord(He+1),this._convertFromCellCoord(ln+1)))&&$.call(this,d,p,C,N,In,lt,Tt,Bt))return}},es.prototype._convertFromCellCoord=function(d){return(d-this.padding)/this.scale},es.prototype._convertToCellCoord=function(d){return Math.max(0,Math.min(this.d-1,Math.floor(d*this.scale)+this.padding))},es.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var d=this.cells,p=3+this.cells.length+1+1,C=0,N=0;N<this.cells.length;N++)C+=this.cells[N].length;var $=new Int32Array(p+C+this.keys.length+this.bboxes.length);$[0]=this.extent,$[1]=this.n,$[2]=this.padding;for(var lt=p,Tt=0;Tt<d.length;Tt++){var Bt=d[Tt];$[3+Tt]=lt,$.set(Bt,lt),lt+=Bt.length}return $[3+d.length]=lt,$.set(this.keys,lt),$[3+d.length+1]=lt+=this.keys.length,$.set(this.bboxes,lt),lt+=this.bboxes.length,$.buffer};var iu=n.ImageData,ku=n.ImageBitmap,us={};function Yi(d,p,C){C===void 0&&(C={}),Object.defineProperty(p,"_classRegistryKey",{value:d,writeable:!1}),us[d]={klass:p,omit:C.omit||[],shallow:C.shallow||[]}}for(var Fs in Yi("Object",Object),Zs.serialize=function(d,p){var C=d.toArrayBuffer();return p&&p.push(C),{buffer:C}},Zs.deserialize=function(d){return new Zs(d.buffer)},Yi("Grid",Zs),Yi("Color",Fr),Yi("Error",Error),Yi("ResolvedImage",eo),Yi("StylePropertyFunction",cs),Yi("StyleExpression",bl,{omit:["_evaluator"]}),Yi("ZoomDependentExpression",bu),Yi("ZoomConstantExpression",xu),Yi("CompoundExpression",Ne,{omit:["_evaluate"]}),No)No[Fs]._classRegistryKey||Yi("Expression_"+Fs,No[Fs]);function tl(d){return d&&typeof ArrayBuffer!="undefined"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function Gu(d){return ku&&d instanceof ku}function Go(d,p){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp)return d;if(tl(d)||Gu(d))return p&&p.push(d),d;if(ArrayBuffer.isView(d)){var C=d;return p&&p.push(C.buffer),C}if(d instanceof iu)return p&&p.push(d.data.buffer),d;if(Array.isArray(d)){for(var N=[],$=0,lt=d;$<lt.length;$+=1)N.push(Go(lt[$],p));return N}if(typeof d=="object"){var Tt=d.constructor,Bt=Tt._classRegistryKey;if(!Bt)throw new Error("can't serialize object of unregistered class");var Jt=Tt.serialize?Tt.serialize(d,p):{};if(!Tt.serialize){for(var de in d)if(d.hasOwnProperty(de)&&!(us[Bt].omit.indexOf(de)>=0)){var Le=d[de];Jt[de]=us[Bt].shallow.indexOf(de)>=0?Le:Go(Le,p)}d instanceof Error&&(Jt.message=d.message)}if(Jt.$name)throw new Error("$name property is reserved for worker serialization logic.");return Bt!=="Object"&&(Jt.$name=Bt),Jt}throw new Error("can't serialize object of type "+typeof d)}function Yo(d){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||tl(d)||Gu(d)||ArrayBuffer.isView(d)||d instanceof iu)return d;if(Array.isArray(d))return d.map(Yo);if(typeof d=="object"){var p=d.$name||"Object",C=us[p].klass;if(!C)throw new Error("can't deserialize unregistered class "+p);if(C.deserialize)return C.deserialize(d);for(var N=Object.create(C.prototype),$=0,lt=Object.keys(d);$<lt.length;$+=1){var Tt=lt[$];if(Tt!=="$name"){var Bt=d[Tt];N[Tt]=us[p].shallow.indexOf(Tt)>=0?Bt:Yo(Bt)}}return N}throw new Error("can't deserialize object of type "+typeof d)}var Su=function(){this.first=!0};Su.prototype.update=function(d,p){var C=Math.floor(d);return this.first?(this.first=!1,this.lastIntegerZoom=C,this.lastIntegerZoomTime=0,this.lastZoom=d,this.lastFloorZoom=C,!0):(this.lastFloorZoom>C?(this.lastIntegerZoom=C+1,this.lastIntegerZoomTime=p):this.lastFloorZoom<C&&(this.lastIntegerZoom=C,this.lastIntegerZoomTime=p),d!==this.lastZoom&&(this.lastZoom=d,this.lastFloorZoom=C,!0))};var Mi={"Latin-1 Supplement":function(p){return p>=128&&p<=255},Arabic:function(p){return p>=1536&&p<=1791},"Arabic Supplement":function(p){return p>=1872&&p<=1919},"Arabic Extended-A":function(p){return p>=2208&&p<=2303},"Hangul Jamo":function(p){return p>=4352&&p<=4607},"Unified Canadian Aboriginal Syllabics":function(p){return p>=5120&&p<=5759},Khmer:function(p){return p>=6016&&p<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(p){return p>=6320&&p<=6399},"General Punctuation":function(p){return p>=8192&&p<=8303},"Letterlike Symbols":function(p){return p>=8448&&p<=8527},"Number Forms":function(p){return p>=8528&&p<=8591},"Miscellaneous Technical":function(p){return p>=8960&&p<=9215},"Control Pictures":function(p){return p>=9216&&p<=9279},"Optical Character Recognition":function(p){return p>=9280&&p<=9311},"Enclosed Alphanumerics":function(p){return p>=9312&&p<=9471},"Geometric Shapes":function(p){return p>=9632&&p<=9727},"Miscellaneous Symbols":function(p){return p>=9728&&p<=9983},"Miscellaneous Symbols and Arrows":function(p){return p>=11008&&p<=11263},"CJK Radicals Supplement":function(p){return p>=11904&&p<=12031},"Kangxi Radicals":function(p){return p>=12032&&p<=12255},"Ideographic Description Characters":function(p){return p>=12272&&p<=12287},"CJK Symbols and Punctuation":function(p){return p>=12288&&p<=12351},Hiragana:function(p){return p>=12352&&p<=12447},Katakana:function(p){return p>=12448&&p<=12543},Bopomofo:function(p){return p>=12544&&p<=12591},"Hangul Compatibility Jamo":function(p){return p>=12592&&p<=12687},Kanbun:function(p){return p>=12688&&p<=12703},"Bopomofo Extended":function(p){return p>=12704&&p<=12735},"CJK Strokes":function(p){return p>=12736&&p<=12783},"Katakana Phonetic Extensions":function(p){return p>=12784&&p<=12799},"Enclosed CJK Letters and Months":function(p){return p>=12800&&p<=13055},"CJK Compatibility":function(p){return p>=13056&&p<=13311},"CJK Unified Ideographs Extension A":function(p){return p>=13312&&p<=19903},"Yijing Hexagram Symbols":function(p){return p>=19904&&p<=19967},"CJK Unified Ideographs":function(p){return p>=19968&&p<=40959},"Yi Syllables":function(p){return p>=40960&&p<=42127},"Yi Radicals":function(p){return p>=42128&&p<=42191},"Hangul Jamo Extended-A":function(p){return p>=43360&&p<=43391},"Hangul Syllables":function(p){return p>=44032&&p<=55215},"Hangul Jamo Extended-B":function(p){return p>=55216&&p<=55295},"Private Use Area":function(p){return p>=57344&&p<=63743},"CJK Compatibility Ideographs":function(p){return p>=63744&&p<=64255},"Arabic Presentation Forms-A":function(p){return p>=64336&&p<=65023},"Vertical Forms":function(p){return p>=65040&&p<=65055},"CJK Compatibility Forms":function(p){return p>=65072&&p<=65103},"Small Form Variants":function(p){return p>=65104&&p<=65135},"Arabic Presentation Forms-B":function(p){return p>=65136&&p<=65279},"Halfwidth and Fullwidth Forms":function(p){return p>=65280&&p<=65519}};function _u(d){for(var p=0,C=d;p<C.length;p+=1)if(Iu(C[p].charCodeAt(0)))return!0;return!1}function Iu(d){return!(d!==746&&d!==747&&(d<4352||!(Mi["Bopomofo Extended"](d)||Mi.Bopomofo(d)||Mi["CJK Compatibility Forms"](d)&&!(d>=65097&&d<=65103)||Mi["CJK Compatibility Ideographs"](d)||Mi["CJK Compatibility"](d)||Mi["CJK Radicals Supplement"](d)||Mi["CJK Strokes"](d)||!(!Mi["CJK Symbols and Punctuation"](d)||d>=12296&&d<=12305||d>=12308&&d<=12319||d===12336)||Mi["CJK Unified Ideographs Extension A"](d)||Mi["CJK Unified Ideographs"](d)||Mi["Enclosed CJK Letters and Months"](d)||Mi["Hangul Compatibility Jamo"](d)||Mi["Hangul Jamo Extended-A"](d)||Mi["Hangul Jamo Extended-B"](d)||Mi["Hangul Jamo"](d)||Mi["Hangul Syllables"](d)||Mi.Hiragana(d)||Mi["Ideographic Description Characters"](d)||Mi.Kanbun(d)||Mi["Kangxi Radicals"](d)||Mi["Katakana Phonetic Extensions"](d)||Mi.Katakana(d)&&d!==12540||!(!Mi["Halfwidth and Fullwidth Forms"](d)||d===65288||d===65289||d===65293||d>=65306&&d<=65310||d===65339||d===65341||d===65343||d>=65371&&d<=65503||d===65507||d>=65512&&d<=65519)||!(!Mi["Small Form Variants"](d)||d>=65112&&d<=65118||d>=65123&&d<=65126)||Mi["Unified Canadian Aboriginal Syllabics"](d)||Mi["Unified Canadian Aboriginal Syllabics Extended"](d)||Mi["Vertical Forms"](d)||Mi["Yijing Hexagram Symbols"](d)||Mi["Yi Syllables"](d)||Mi["Yi Radicals"](d))))}function Lu(d){return!(Iu(d)||function(p){return!!(Mi["Latin-1 Supplement"](p)&&(p===167||p===169||p===174||p===177||p===188||p===189||p===190||p===215||p===247)||Mi["General Punctuation"](p)&&(p===8214||p===8224||p===8225||p===8240||p===8241||p===8251||p===8252||p===8258||p===8263||p===8264||p===8265||p===8273)||Mi["Letterlike Symbols"](p)||Mi["Number Forms"](p)||Mi["Miscellaneous Technical"](p)&&(p>=8960&&p<=8967||p>=8972&&p<=8991||p>=8996&&p<=9e3||p===9003||p>=9085&&p<=9114||p>=9150&&p<=9165||p===9167||p>=9169&&p<=9179||p>=9186&&p<=9215)||Mi["Control Pictures"](p)&&p!==9251||Mi["Optical Character Recognition"](p)||Mi["Enclosed Alphanumerics"](p)||Mi["Geometric Shapes"](p)||Mi["Miscellaneous Symbols"](p)&&!(p>=9754&&p<=9759)||Mi["Miscellaneous Symbols and Arrows"](p)&&(p>=11026&&p<=11055||p>=11088&&p<=11097||p>=11192&&p<=11243)||Mi["CJK Symbols and Punctuation"](p)||Mi.Katakana(p)||Mi["Private Use Area"](p)||Mi["CJK Compatibility Forms"](p)||Mi["Small Form Variants"](p)||Mi["Halfwidth and Fullwidth Forms"](p)||p===8734||p===8756||p===8757||p>=9984&&p<=10087||p>=10102&&p<=10131||p===65532||p===65533)}(d))}function $s(d){return d>=1424&&d<=2303||Mi["Arabic Presentation Forms-A"](d)||Mi["Arabic Presentation Forms-B"](d)}function we(d,p){return!(!p&&$s(d)||d>=2304&&d<=3583||d>=3840&&d<=4255||Mi.Khmer(d))}function Pe(d){for(var p=0,C=d;p<C.length;p+=1)if($s(C[p].charCodeAt(0)))return!0;return!1}var hn=null,tn="unavailable",On=null,fr=function(p){p&&typeof p=="string"&&p.indexOf("NetworkError")>-1&&(tn="error"),hn&&hn(p)};function Ir(){Zr.fire(new Vt("pluginStateChange",{pluginStatus:tn,pluginURL:On}))}var Zr=new Te,ni=function(){return tn},zr=function(){if(tn!=="deferred"||!On)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");tn="loading",Ir(),On&&pr({url:On},function(p){p?fr(p):(tn="loaded",Ir())})},ci={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return tn==="loaded"||ci.applyArabicShaping!=null},isLoading:function(){return tn==="loading"},setState:function(p){tn=p.pluginStatus,On=p.pluginURL},isParsed:function(){return ci.applyArabicShaping!=null&&ci.processBidirectionalText!=null&&ci.processStyledBidirectionalText!=null},getPluginURL:function(){return On}},xr=function(p,C){this.zoom=p,C?(this.now=C.now,this.fadeDuration=C.fadeDuration,this.zoomHistory=C.zoomHistory,this.transition=C.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Su,this.transition={})};xr.prototype.isSupportedScript=function(d){return function(p,C){for(var N=0,$=p;N<$.length;N+=1)if(!we($[N].charCodeAt(0),C))return!1;return!0}(d,ci.isLoaded())},xr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},xr.prototype.getCrossfadeParameters=function(){var d=this.zoom,p=d-Math.floor(d),C=this.crossFadingFactor();return d>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:p+(1-p)*C}:{fromScale:.5,toScale:1,t:1-(1-C)*p}};var Kt=function(p,C){this.property=p,this.value=C,this.expression=function(N,$){if(yl(N))return new cs(N,$);if(nu(N)){var lt=Js(N,$);if(lt.result==="error")throw new Error(lt.value.map(function(Bt){return Bt.key+": "+Bt.message}).join(", "));return lt.value}var Tt=N;return typeof N=="string"&&$.type==="color"&&(Tt=Fr.parse(N)),{kind:"constant",evaluate:function(){return Tt}}}(C===void 0?p.specification.default:C,p.specification)};Kt.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Kt.prototype.possiblyEvaluate=function(d,p,C){return this.property.possiblyEvaluate(this,d,p,C)};var te=function(p){this.property=p,this.value=new Kt(p,void 0)};te.prototype.transitioned=function(d,p){return new _e(this.property,this.value,p,v({},d.transition,this.transition),d.now)},te.prototype.untransitioned=function(){return new _e(this.property,this.value,null,{},0)};var Ie=function(p){this._properties=p,this._values=Object.create(p.defaultTransitionablePropertyValues)};Ie.prototype.getValue=function(d){return P(this._values[d].value.value)},Ie.prototype.setValue=function(d,p){this._values.hasOwnProperty(d)||(this._values[d]=new te(this._values[d].property)),this._values[d].value=new Kt(this._values[d].property,p===null?void 0:P(p))},Ie.prototype.getTransition=function(d){return P(this._values[d].transition)},Ie.prototype.setTransition=function(d,p){this._values.hasOwnProperty(d)||(this._values[d]=new te(this._values[d].property)),this._values[d].transition=P(p)||void 0},Ie.prototype.serialize=function(){for(var d={},p=0,C=Object.keys(this._values);p<C.length;p+=1){var N=C[p],$=this.getValue(N);$!==void 0&&(d[N]=$);var lt=this.getTransition(N);lt!==void 0&&(d[N+"-transition"]=lt)}return d},Ie.prototype.transitioned=function(d,p){for(var C=new Dt(this._properties),N=0,$=Object.keys(this._values);N<$.length;N+=1){var lt=$[N];C._values[lt]=this._values[lt].transitioned(d,p._values[lt])}return C},Ie.prototype.untransitioned=function(){for(var d=new Dt(this._properties),p=0,C=Object.keys(this._values);p<C.length;p+=1){var N=C[p];d._values[N]=this._values[N].untransitioned()}return d};var _e=function(p,C,N,$,lt){this.property=p,this.value=C,this.begin=lt+$.delay||0,this.end=this.begin+$.duration||0,p.specification.transition&&($.delay||$.duration)&&(this.prior=N)};_e.prototype.possiblyEvaluate=function(d,p,C){var N=d.now||0,$=this.value.possiblyEvaluate(d,p,C),lt=this.prior;if(lt){if(N>this.end)return this.prior=null,$;if(this.value.isDataDriven())return this.prior=null,$;if(N<this.begin)return lt.possiblyEvaluate(d,p,C);var Tt=(N-this.begin)/(this.end-this.begin);return this.property.interpolate(lt.possiblyEvaluate(d,p,C),$,function(Bt){if(Bt<=0)return 0;if(Bt>=1)return 1;var Jt=Bt*Bt,de=Jt*Bt;return 4*(Bt<.5?de:3*(Bt-Jt)+de-.75)}(Tt))}return $};var Dt=function(p){this._properties=p,this._values=Object.create(p.defaultTransitioningPropertyValues)};Dt.prototype.possiblyEvaluate=function(d,p,C){for(var N=new ne(this._properties),$=0,lt=Object.keys(this._values);$<lt.length;$+=1){var Tt=lt[$];N._values[Tt]=this._values[Tt].possiblyEvaluate(d,p,C)}return N},Dt.prototype.hasTransition=function(){for(var d=0,p=Object.keys(this._values);d<p.length;d+=1)if(this._values[p[d]].prior)return!0;return!1};var zt=function(p){this._properties=p,this._values=Object.create(p.defaultPropertyValues)};zt.prototype.getValue=function(d){return P(this._values[d].value)},zt.prototype.setValue=function(d,p){this._values[d]=new Kt(this._values[d].property,p===null?void 0:P(p))},zt.prototype.serialize=function(){for(var d={},p=0,C=Object.keys(this._values);p<C.length;p+=1){var N=C[p],$=this.getValue(N);$!==void 0&&(d[N]=$)}return d},zt.prototype.possiblyEvaluate=function(d,p,C){for(var N=new ne(this._properties),$=0,lt=Object.keys(this._values);$<lt.length;$+=1){var Tt=lt[$];N._values[Tt]=this._values[Tt].possiblyEvaluate(d,p,C)}return N};var oe=function(p,C,N){this.property=p,this.value=C,this.parameters=N};oe.prototype.isConstant=function(){return this.value.kind==="constant"},oe.prototype.constantOr=function(d){return this.value.kind==="constant"?this.value.value:d},oe.prototype.evaluate=function(d,p,C,N){return this.property.evaluate(this.value,this.parameters,d,p,C,N)};var ne=function(p){this._properties=p,this._values=Object.create(p.defaultPossiblyEvaluatedValues)};ne.prototype.get=function(d){return this._values[d]};var fe=function(p){this.specification=p};fe.prototype.possiblyEvaluate=function(d,p){return d.expression.evaluate(p)},fe.prototype.interpolate=function(d,p,C){var N=Bs[this.specification.type];return N?N(d,p,C):d};var Fe=function(p,C){this.specification=p,this.overrides=C};Fe.prototype.possiblyEvaluate=function(d,p,C,N){return new oe(this,d.expression.kind==="constant"||d.expression.kind==="camera"?{kind:"constant",value:d.expression.evaluate(p,null,{},C,N)}:d.expression,p)},Fe.prototype.interpolate=function(d,p,C){if(d.value.kind!=="constant"||p.value.kind!=="constant")return d;if(d.value.value===void 0||p.value.value===void 0)return new oe(this,{kind:"constant",value:void 0},d.parameters);var N=Bs[this.specification.type];return N?new oe(this,{kind:"constant",value:N(d.value.value,p.value.value,C)},d.parameters):d},Fe.prototype.evaluate=function(d,p,C,N,$,lt){return d.kind==="constant"?d.value:d.evaluate(p,C,N,$,lt)};var Ze=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.possiblyEvaluate=function(C,N,$,lt){if(C.value===void 0)return new oe(this,{kind:"constant",value:void 0},N);if(C.expression.kind==="constant"){var Tt=C.expression.evaluate(N,null,{},$,lt),Bt=C.property.specification.type==="resolvedImage"&&typeof Tt!="string"?Tt.name:Tt,Jt=this._calculate(Bt,Bt,Bt,N);return new oe(this,{kind:"constant",value:Jt},N)}if(C.expression.kind==="camera"){var de=this._calculate(C.expression.evaluate({zoom:N.zoom-1}),C.expression.evaluate({zoom:N.zoom}),C.expression.evaluate({zoom:N.zoom+1}),N);return new oe(this,{kind:"constant",value:de},N)}return new oe(this,C.expression,N)},p.prototype.evaluate=function(C,N,$,lt,Tt,Bt){if(C.kind==="source"){var Jt=C.evaluate(N,$,lt,Tt,Bt);return this._calculate(Jt,Jt,Jt,N)}return C.kind==="composite"?this._calculate(C.evaluate({zoom:Math.floor(N.zoom)-1},$,lt),C.evaluate({zoom:Math.floor(N.zoom)},$,lt),C.evaluate({zoom:Math.floor(N.zoom)+1},$,lt),N):C.value},p.prototype._calculate=function(C,N,$,lt){return lt.zoom>lt.zoomHistory.lastIntegerZoom?{from:C,to:N}:{from:$,to:N}},p.prototype.interpolate=function(C){return C},p}(Fe),nn=function(p){this.specification=p};nn.prototype.possiblyEvaluate=function(d,p,C,N){if(d.value!==void 0){if(d.expression.kind==="constant"){var $=d.expression.evaluate(p,null,{},C,N);return this._calculate($,$,$,p)}return this._calculate(d.expression.evaluate(new xr(Math.floor(p.zoom-1),p)),d.expression.evaluate(new xr(Math.floor(p.zoom),p)),d.expression.evaluate(new xr(Math.floor(p.zoom+1),p)),p)}},nn.prototype._calculate=function(d,p,C,N){return N.zoom>N.zoomHistory.lastIntegerZoom?{from:d,to:p}:{from:C,to:p}},nn.prototype.interpolate=function(d){return d};var Je=function(p){this.specification=p};Je.prototype.possiblyEvaluate=function(d,p,C,N){return!!d.expression.evaluate(p,null,{},C,N)},Je.prototype.interpolate=function(){return!1};var vn=function(p){for(var C in this.properties=p,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],p){var N=p[C];N.specification.overridable&&this.overridableProperties.push(C);var $=this.defaultPropertyValues[C]=new Kt(N,void 0),lt=this.defaultTransitionablePropertyValues[C]=new te(N);this.defaultTransitioningPropertyValues[C]=lt.untransitioned(),this.defaultPossiblyEvaluatedValues[C]=$.possiblyEvaluate({})}};Yi("DataDrivenProperty",Fe),Yi("DataConstantProperty",fe),Yi("CrossFadedDataDrivenProperty",Ze),Yi("CrossFadedProperty",nn),Yi("ColorRampProperty",Je);var fn=function(d){function p(C,N){if(d.call(this),this.id=C.id,this.type=C.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},C.type!=="custom"&&(this.metadata=(C=C).metadata,this.minzoom=C.minzoom,this.maxzoom=C.maxzoom,C.type!=="background"&&(this.source=C.source,this.sourceLayer=C["source-layer"],this.filter=C.filter),N.layout&&(this._unevaluatedLayout=new zt(N.layout)),N.paint)){for(var $ in this._transitionablePaint=new Ie(N.paint),C.paint)this.setPaintProperty($,C.paint[$],{validate:!1});for(var lt in C.layout)this.setLayoutProperty(lt,C.layout[lt],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ne(N.paint)}}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},p.prototype.getLayoutProperty=function(C){return C==="visibility"?this.visibility:this._unevaluatedLayout.getValue(C)},p.prototype.setLayoutProperty=function(C,N,$){$===void 0&&($={}),N!=null&&this._validate(qu,"layers."+this.id+".layout."+C,C,N,$)||(C!=="visibility"?this._unevaluatedLayout.setValue(C,N):this.visibility=N)},p.prototype.getPaintProperty=function(C){return x(C,"-transition")?this._transitionablePaint.getTransition(C.slice(0,-"-transition".length)):this._transitionablePaint.getValue(C)},p.prototype.setPaintProperty=function(C,N,$){if($===void 0&&($={}),N!=null&&this._validate(Zl,"layers."+this.id+".paint."+C,C,N,$))return!1;if(x(C,"-transition"))return this._transitionablePaint.setTransition(C.slice(0,-"-transition".length),N||void 0),!1;var lt=this._transitionablePaint._values[C],Tt=lt.property.specification["property-type"]==="cross-faded-data-driven",Bt=lt.value.isDataDriven(),Jt=lt.value;this._transitionablePaint.setValue(C,N),this._handleSpecialPaintPropertyUpdate(C);var de=this._transitionablePaint._values[C].value;return de.isDataDriven()||Bt||Tt||this._handleOverridablePaintPropertyUpdate(C,Jt,de)},p.prototype._handleSpecialPaintPropertyUpdate=function(C){},p.prototype._handleOverridablePaintPropertyUpdate=function(C,N,$){return!1},p.prototype.isHidden=function(C){return!!(this.minzoom&&C<this.minzoom)||!!(this.maxzoom&&C>=this.maxzoom)||this.visibility==="none"},p.prototype.updateTransitions=function(C){this._transitioningPaint=this._transitionablePaint.transitioned(C,this._transitioningPaint)},p.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},p.prototype.recalculate=function(C,N){C.getCrossfadeParameters&&(this._crossfadeParameters=C.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(C,void 0,N)),this.paint=this._transitioningPaint.possiblyEvaluate(C,void 0,N)},p.prototype.serialize=function(){var C={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(C.layout=C.layout||{},C.layout.visibility=this.visibility),S(C,function(N,$){return!(N===void 0||$==="layout"&&!Object.keys(N).length||$==="paint"&&!Object.keys(N).length)})},p.prototype._validate=function(C,N,$,lt,Tt){return Tt===void 0&&(Tt={}),(!Tt||Tt.validate!==!1)&&ru(this,C.call(Qu,{key:N,layerType:this.type,objectKey:$,value:lt,styleSpec:ue,style:{glyphs:!0,sprite:!0}}))},p.prototype.is3D=function(){return!1},p.prototype.isTileClipped=function(){return!1},p.prototype.hasOffscreenPass=function(){return!1},p.prototype.resize=function(){},p.prototype.isStateDependent=function(){for(var C in this.paint._values){var N=this.paint.get(C);if(N instanceof oe&&Fo(N.property.specification)&&(N.value.kind==="source"||N.value.kind==="composite")&&N.value.isStateDependent)return!0}return!1},p}(Te),Yn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},kn=function(p,C){this._structArray=p,this._pos1=C*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Vn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Gn(d,p){p===void 0&&(p=1);var C=0,N=0;return{members:d.map(function($){var lt=Yn[$.type].BYTES_PER_ELEMENT,Tt=C=hr(C,Math.max(p,lt)),Bt=$.components||1;return N=Math.max(N,lt),C+=lt*Bt,{name:$.name,type:$.type,components:Bt,offset:Tt}}),size:hr(C,Math.max(N,p)),alignment:p}}function hr(d,p){return Math.ceil(d/p)*p}Vn.serialize=function(d,p){return d._trim(),p&&(d.isTransferred=!0,p.push(d.arrayBuffer)),{length:d.length,arrayBuffer:d.arrayBuffer}},Vn.deserialize=function(d){var p=Object.create(this.prototype);return p.arrayBuffer=d.arrayBuffer,p.length=d.length,p.capacity=d.arrayBuffer.byteLength/p.bytesPerElement,p._refreshViews(),p},Vn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Vn.prototype.clear=function(){this.length=0},Vn.prototype.resize=function(d){this.reserve(d),this.length=d},Vn.prototype.reserve=function(d){if(d>this.capacity){this.capacity=Math.max(d,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var p=this.uint8;this._refreshViews(),p&&this.uint8.set(p)}},Vn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var mr=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N){var $=this.length;return this.resize($+1),this.emplace($,C,N)},p.prototype.emplace=function(C,N,$){var lt=2*C;return this.int16[lt+0]=N,this.int16[lt+1]=$,C},p}(Vn);mr.prototype.bytesPerElement=4,Yi("StructArrayLayout2i4",mr);var Yr=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,$,lt){var Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,C,N,$,lt)},p.prototype.emplace=function(C,N,$,lt,Tt){var Bt=4*C;return this.int16[Bt+0]=N,this.int16[Bt+1]=$,this.int16[Bt+2]=lt,this.int16[Bt+3]=Tt,C},p}(Vn);Yr.prototype.bytesPerElement=8,Yi("StructArrayLayout4i8",Yr);var gi=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,$,lt,Tt,Bt){var Jt=this.length;return this.resize(Jt+1),this.emplace(Jt,C,N,$,lt,Tt,Bt)},p.prototype.emplace=function(C,N,$,lt,Tt,Bt,Jt){var de=6*C;return this.int16[de+0]=N,this.int16[de+1]=$,this.int16[de+2]=lt,this.int16[de+3]=Tt,this.int16[de+4]=Bt,this.int16[de+5]=Jt,C},p}(Vn);gi.prototype.bytesPerElement=12,Yi("StructArrayLayout2i4i12",gi);var Br=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,$,lt,Tt,Bt){var Jt=this.length;return this.resize(Jt+1),this.emplace(Jt,C,N,$,lt,Tt,Bt)},p.prototype.emplace=function(C,N,$,lt,Tt,Bt,Jt){var de=4*C,Le=8*C;return this.int16[de+0]=N,this.int16[de+1]=$,this.uint8[Le+4]=lt,this.uint8[Le+5]=Tt,this.uint8[Le+6]=Bt,this.uint8[Le+7]=Jt,C},p}(Vn);Br.prototype.bytesPerElement=8,Yi("StructArrayLayout2i4ub8",Br);var ai=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N){var $=this.length;return this.resize($+1),this.emplace($,C,N)},p.prototype.emplace=function(C,N,$){var lt=2*C;return this.float32[lt+0]=N,this.float32[lt+1]=$,C},p}(Vn);ai.prototype.bytesPerElement=8,Yi("StructArrayLayout2f8",ai);var fi=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,$,lt,Tt,Bt,Jt,de,Le,Ge){var He=this.length;return this.resize(He+1),this.emplace(He,C,N,$,lt,Tt,Bt,Jt,de,Le,Ge)},p.prototype.emplace=function(C,N,$,lt,Tt,Bt,Jt,de,Le,Ge,He){var ln=10*C;return this.uint16[ln+0]=N,this.uint16[ln+1]=$,this.uint16[ln+2]=lt,this.uint16[ln+3]=Tt,this.uint16[ln+4]=Bt,this.uint16[ln+5]=Jt,this.uint16[ln+6]=de,this.uint16[ln+7]=Le,this.uint16[ln+8]=Ge,this.uint16[ln+9]=He,C},p}(Vn);fi.prototype.bytesPerElement=20,Yi("StructArrayLayout10ui20",fi);var Zi=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,$,lt,Tt,Bt,Jt,de,Le,Ge,He,ln){var In=this.length;return this.resize(In+1),this.emplace(In,C,N,$,lt,Tt,Bt,Jt,de,Le,Ge,He,ln)},p.prototype.emplace=function(C,N,$,lt,Tt,Bt,Jt,de,Le,Ge,He,ln,In){var Cn=12*C;return this.int16[Cn+0]=N,this.int16[Cn+1]=$,this.int16[Cn+2]=lt,this.int16[Cn+3]=Tt,this.uint16[Cn+4]=Bt,this.uint16[Cn+5]=Jt,this.uint16[Cn+6]=de,this.uint16[Cn+7]=Le,this.int16[Cn+8]=Ge,this.int16[Cn+9]=He,this.int16[Cn+10]=ln,this.int16[Cn+11]=In,C},p}(Vn);Zi.prototype.bytesPerElement=24,Yi("StructArrayLayout4i4ui4i24",Zi);var Ri=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,$){var lt=this.length;return this.resize(lt+1),this.emplace(lt,C,N,$)},p.prototype.emplace=function(C,N,$,lt){var Tt=3*C;return this.float32[Tt+0]=N,this.float32[Tt+1]=$,this.float32[Tt+2]=lt,C},p}(Vn);Ri.prototype.bytesPerElement=12,Yi("StructArrayLayout3f12",Ri);var Sa=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C){var N=this.length;return this.resize(N+1),this.emplace(N,C)},p.prototype.emplace=function(C,N){return this.uint32[1*C+0]=N,C},p}(Vn);Sa.prototype.bytesPerElement=4,Yi("StructArrayLayout1ul4",Sa);var ya=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,$,lt,Tt,Bt,Jt,de,Le){var Ge=this.length;return this.resize(Ge+1),this.emplace(Ge,C,N,$,lt,Tt,Bt,Jt,de,Le)},p.prototype.emplace=function(C,N,$,lt,Tt,Bt,Jt,de,Le,Ge){var He=10*C,ln=5*C;return this.int16[He+0]=N,this.int16[He+1]=$,this.int16[He+2]=lt,this.int16[He+3]=Tt,this.int16[He+4]=Bt,this.int16[He+5]=Jt,this.uint32[ln+3]=de,this.uint16[He+8]=Le,this.uint16[He+9]=Ge,C},p}(Vn);ya.prototype.bytesPerElement=20,Yi("StructArrayLayout6i1ul2ui20",ya);var _a=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,$,lt,Tt,Bt){var Jt=this.length;return this.resize(Jt+1),this.emplace(Jt,C,N,$,lt,Tt,Bt)},p.prototype.emplace=function(C,N,$,lt,Tt,Bt,Jt){var de=6*C;return this.int16[de+0]=N,this.int16[de+1]=$,this.int16[de+2]=lt,this.int16[de+3]=Tt,this.int16[de+4]=Bt,this.int16[de+5]=Jt,C},p}(Vn);_a.prototype.bytesPerElement=12,Yi("StructArrayLayout2i2i2i12",_a);var ei=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,$,lt,Tt){var Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,C,N,$,lt,Tt)},p.prototype.emplace=function(C,N,$,lt,Tt,Bt){var Jt=4*C,de=8*C;return this.float32[Jt+0]=N,this.float32[Jt+1]=$,this.float32[Jt+2]=lt,this.int16[de+6]=Tt,this.int16[de+7]=Bt,C},p}(Vn);ei.prototype.bytesPerElement=16,Yi("StructArrayLayout2f1f2i16",ei);var Ea=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,$,lt){var Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,C,N,$,lt)},p.prototype.emplace=function(C,N,$,lt,Tt){var Bt=12*C,Jt=3*C;return this.uint8[Bt+0]=N,this.uint8[Bt+1]=$,this.float32[Jt+1]=lt,this.float32[Jt+2]=Tt,C},p}(Vn);Ea.prototype.bytesPerElement=12,Yi("StructArrayLayout2ub2f12",Ea);var ka=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,$){var lt=this.length;return this.resize(lt+1),this.emplace(lt,C,N,$)},p.prototype.emplace=function(C,N,$,lt){var Tt=3*C;return this.uint16[Tt+0]=N,this.uint16[Tt+1]=$,this.uint16[Tt+2]=lt,C},p}(Vn);ka.prototype.bytesPerElement=6,Yi("StructArrayLayout3ui6",ka);var Ga=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,$,lt,Tt,Bt,Jt,de,Le,Ge,He,ln,In,Cn,Zn,Kn,_r){var jr=this.length;return this.resize(jr+1),this.emplace(jr,C,N,$,lt,Tt,Bt,Jt,de,Le,Ge,He,ln,In,Cn,Zn,Kn,_r)},p.prototype.emplace=function(C,N,$,lt,Tt,Bt,Jt,de,Le,Ge,He,ln,In,Cn,Zn,Kn,_r,jr){var kr=24*C,vi=12*C,oi=48*C;return this.int16[kr+0]=N,this.int16[kr+1]=$,this.uint16[kr+2]=lt,this.uint16[kr+3]=Tt,this.uint32[vi+2]=Bt,this.uint32[vi+3]=Jt,this.uint32[vi+4]=de,this.uint16[kr+10]=Le,this.uint16[kr+11]=Ge,this.uint16[kr+12]=He,this.float32[vi+7]=ln,this.float32[vi+8]=In,this.uint8[oi+36]=Cn,this.uint8[oi+37]=Zn,this.uint8[oi+38]=Kn,this.uint32[vi+10]=_r,this.int16[kr+22]=jr,C},p}(Vn);Ga.prototype.bytesPerElement=48,Yi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ga);var Ii=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,$,lt,Tt,Bt,Jt,de,Le,Ge,He,ln,In,Cn,Zn,Kn,_r,jr,kr,vi,oi,Ni,Fi,oa,ga,ua,ta,ro){var wa=this.length;return this.resize(wa+1),this.emplace(wa,C,N,$,lt,Tt,Bt,Jt,de,Le,Ge,He,ln,In,Cn,Zn,Kn,_r,jr,kr,vi,oi,Ni,Fi,oa,ga,ua,ta,ro)},p.prototype.emplace=function(C,N,$,lt,Tt,Bt,Jt,de,Le,Ge,He,ln,In,Cn,Zn,Kn,_r,jr,kr,vi,oi,Ni,Fi,oa,ga,ua,ta,ro,wa){var ma=34*C,rs=17*C;return this.int16[ma+0]=N,this.int16[ma+1]=$,this.int16[ma+2]=lt,this.int16[ma+3]=Tt,this.int16[ma+4]=Bt,this.int16[ma+5]=Jt,this.int16[ma+6]=de,this.int16[ma+7]=Le,this.uint16[ma+8]=Ge,this.uint16[ma+9]=He,this.uint16[ma+10]=ln,this.uint16[ma+11]=In,this.uint16[ma+12]=Cn,this.uint16[ma+13]=Zn,this.uint16[ma+14]=Kn,this.uint16[ma+15]=_r,this.uint16[ma+16]=jr,this.uint16[ma+17]=kr,this.uint16[ma+18]=vi,this.uint16[ma+19]=oi,this.uint16[ma+20]=Ni,this.uint16[ma+21]=Fi,this.uint16[ma+22]=oa,this.uint32[rs+12]=ga,this.float32[rs+13]=ua,this.float32[rs+14]=ta,this.float32[rs+15]=ro,this.float32[rs+16]=wa,C},p}(Vn);Ii.prototype.bytesPerElement=68,Yi("StructArrayLayout8i15ui1ul4f68",Ii);var Ia=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C){var N=this.length;return this.resize(N+1),this.emplace(N,C)},p.prototype.emplace=function(C,N){return this.float32[1*C+0]=N,C},p}(Vn);Ia.prototype.bytesPerElement=4,Yi("StructArrayLayout1f4",Ia);var yo=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,$){var lt=this.length;return this.resize(lt+1),this.emplace(lt,C,N,$)},p.prototype.emplace=function(C,N,$,lt){var Tt=3*C;return this.int16[Tt+0]=N,this.int16[Tt+1]=$,this.int16[Tt+2]=lt,C},p}(Vn);yo.prototype.bytesPerElement=6,Yi("StructArrayLayout3i6",yo);var zs=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,$){var lt=this.length;return this.resize(lt+1),this.emplace(lt,C,N,$)},p.prototype.emplace=function(C,N,$,lt){var Tt=4*C;return this.uint32[2*C+0]=N,this.uint16[Tt+2]=$,this.uint16[Tt+3]=lt,C},p}(Vn);zs.prototype.bytesPerElement=8,Yi("StructArrayLayout1ul2ui8",zs);var Ts=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N){var $=this.length;return this.resize($+1),this.emplace($,C,N)},p.prototype.emplace=function(C,N,$){var lt=2*C;return this.uint16[lt+0]=N,this.uint16[lt+1]=$,C},p}(Vn);Ts.prototype.bytesPerElement=4,Yi("StructArrayLayout2ui4",Ts);var el=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C){var N=this.length;return this.resize(N+1),this.emplace(N,C)},p.prototype.emplace=function(C,N){return this.uint16[1*C+0]=N,C},p}(Vn);el.prototype.bytesPerElement=2,Yi("StructArrayLayout1ui2",el);var Mu=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},p.prototype.emplaceBack=function(C,N,$,lt){var Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,C,N,$,lt)},p.prototype.emplace=function(C,N,$,lt,Tt){var Bt=4*C;return this.float32[Bt+0]=N,this.float32[Bt+1]=$,this.float32[Bt+2]=lt,this.float32[Bt+3]=Tt,C},p}(Vn);Mu.prototype.bytesPerElement=16,Yi("StructArrayLayout4f16",Mu);var j=function(d){function p(){d.apply(this,arguments)}d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p;var C={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return C.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},C.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},C.x1.get=function(){return this._structArray.int16[this._pos2+2]},C.y1.get=function(){return this._structArray.int16[this._pos2+3]},C.x2.get=function(){return this._structArray.int16[this._pos2+4]},C.y2.get=function(){return this._structArray.int16[this._pos2+5]},C.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},C.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},C.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},C.anchorPoint.get=function(){return new r(this.anchorPointX,this.anchorPointY)},Object.defineProperties(p.prototype,C),p}(kn);j.prototype.size=20;var I=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.get=function(C){return new j(this,C)},p}(ya);Yi("CollisionBoxArray",I);var w=function(d){function p(){d.apply(this,arguments)}d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p;var C={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return C.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},C.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},C.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},C.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},C.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},C.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},C.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},C.segment.get=function(){return this._structArray.uint16[this._pos2+10]},C.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},C.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},C.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},C.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},C.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},C.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},C.placedOrientation.set=function(N){this._structArray.uint8[this._pos1+37]=N},C.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},C.hidden.set=function(N){this._structArray.uint8[this._pos1+38]=N},C.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},C.crossTileID.set=function(N){this._structArray.uint32[this._pos4+10]=N},C.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(p.prototype,C),p}(kn);w.prototype.size=48;var B=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.get=function(C){return new w(this,C)},p}(Ga);Yi("PlacedSymbolArray",B);var D=function(d){function p(){d.apply(this,arguments)}d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p;var C={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return C.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},C.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},C.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},C.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},C.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},C.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},C.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},C.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},C.key.get=function(){return this._structArray.uint16[this._pos2+8]},C.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},C.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},C.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},C.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},C.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},C.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},C.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},C.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},C.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},C.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},C.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},C.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},C.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},C.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},C.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},C.crossTileID.set=function(N){this._structArray.uint32[this._pos4+12]=N},C.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},C.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},C.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},C.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(p.prototype,C),p}(kn);D.prototype.size=68;var W=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.get=function(C){return new D(this,C)},p}(Ii);Yi("SymbolInstanceArray",W);var q=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.getoffsetX=function(C){return this.float32[1*C+0]},p}(Ia);Yi("GlyphOffsetArray",q);var st=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.getx=function(C){return this.int16[3*C+0]},p.prototype.gety=function(C){return this.int16[3*C+1]},p.prototype.gettileUnitDistanceFromAnchor=function(C){return this.int16[3*C+2]},p}(yo);Yi("SymbolLineVertexArray",st);var Ct=function(d){function p(){d.apply(this,arguments)}d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p;var C={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return C.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},C.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},C.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(p.prototype,C),p}(kn);Ct.prototype.size=8;var wt=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.get=function(C){return new Ct(this,C)},p}(zs);Yi("FeatureIndexArray",wt);var Ut=Gn([{name:"a_pos",components:2,type:"Int16"}],4).members,Zt=function(p){p===void 0&&(p=[]),this.segments=p};function qt(d,p){return 256*(d=l(Math.floor(d),0,255))+l(Math.floor(p),0,255)}Zt.prototype.prepareSegment=function(d,p,C,N){var $=this.segments[this.segments.length-1];return d>Zt.MAX_VERTEX_ARRAY_LENGTH&&O("Max vertices per segment is "+Zt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+d),(!$||$.vertexLength+d>Zt.MAX_VERTEX_ARRAY_LENGTH||$.sortKey!==N)&&($={vertexOffset:p.length,primitiveOffset:C.length,vertexLength:0,primitiveLength:0},N!==void 0&&($.sortKey=N),this.segments.push($)),$},Zt.prototype.get=function(){return this.segments},Zt.prototype.destroy=function(){for(var d=0,p=this.segments;d<p.length;d+=1){var C=p[d];for(var N in C.vaos)C.vaos[N].destroy()}},Zt.simpleSegment=function(d,p,C,N){return new Zt([{vertexOffset:d,primitiveOffset:p,vertexLength:C,primitiveLength:N,vaos:{},sortKey:0}])},Zt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Yi("SegmentVector",Zt);var he=Gn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),me=u(function(d){d.exports=function(p,C){var N,$,lt,Tt,Bt,Jt,de,Le;for($=p.length-(N=3&p.length),lt=C,Bt=3432918353,Jt=461845907,Le=0;Le<$;)de=255&p.charCodeAt(Le)|(255&p.charCodeAt(++Le))<<8|(255&p.charCodeAt(++Le))<<16|(255&p.charCodeAt(++Le))<<24,++Le,lt=27492+(65535&(Tt=5*(65535&(lt=(lt^=de=(65535&(de=(de=(65535&de)*Bt+(((de>>>16)*Bt&65535)<<16)&4294967295)<<15|de>>>17))*Jt+(((de>>>16)*Jt&65535)<<16)&4294967295)<<13|lt>>>19))+((5*(lt>>>16)&65535)<<16)&4294967295))+((58964+(Tt>>>16)&65535)<<16);switch(de=0,N){case 3:de^=(255&p.charCodeAt(Le+2))<<16;case 2:de^=(255&p.charCodeAt(Le+1))<<8;case 1:lt^=de=(65535&(de=(de=(65535&(de^=255&p.charCodeAt(Le)))*Bt+(((de>>>16)*Bt&65535)<<16)&4294967295)<<15|de>>>17))*Jt+(((de>>>16)*Jt&65535)<<16)&4294967295}return lt^=p.length,lt=2246822507*(65535&(lt^=lt>>>16))+((2246822507*(lt>>>16)&65535)<<16)&4294967295,lt=3266489909*(65535&(lt^=lt>>>13))+((3266489909*(lt>>>16)&65535)<<16)&4294967295,(lt^=lt>>>16)>>>0}}),De=u(function(d){d.exports=function(p,C){for(var N,$=p.length,lt=C^$,Tt=0;$>=4;)N=1540483477*(65535&(N=255&p.charCodeAt(Tt)|(255&p.charCodeAt(++Tt))<<8|(255&p.charCodeAt(++Tt))<<16|(255&p.charCodeAt(++Tt))<<24))+((1540483477*(N>>>16)&65535)<<16),lt=1540483477*(65535&lt)+((1540483477*(lt>>>16)&65535)<<16)^(N=1540483477*(65535&(N^=N>>>24))+((1540483477*(N>>>16)&65535)<<16)),$-=4,++Tt;switch($){case 3:lt^=(255&p.charCodeAt(Tt+2))<<16;case 2:lt^=(255&p.charCodeAt(Tt+1))<<8;case 1:lt=1540483477*(65535&(lt^=255&p.charCodeAt(Tt)))+((1540483477*(lt>>>16)&65535)<<16)}return lt=1540483477*(65535&(lt^=lt>>>13))+((1540483477*(lt>>>16)&65535)<<16),(lt^=lt>>>15)>>>0}}),Ae=me,Ue=De;Ae.murmur3=me,Ae.murmur2=Ue;var qe=function(){this.ids=[],this.positions=[],this.indexed=!1};qe.prototype.add=function(d,p,C,N){this.ids.push(Xn(d)),this.positions.push(p,C,N)},qe.prototype.getPositions=function(d){for(var p=Xn(d),C=0,N=this.ids.length-1;C<N;){var $=C+N>>1;this.ids[$]>=p?N=$:C=$+1}for(var lt=[];this.ids[C]===p;)lt.push({index:this.positions[3*C],start:this.positions[3*C+1],end:this.positions[3*C+2]}),C++;return lt},qe.serialize=function(d,p){var C=new Float64Array(d.ids),N=new Uint32Array(d.positions);return function $(lt,Tt,Bt,Jt){for(;Bt<Jt;){for(var de=lt[Bt+Jt>>1],Le=Bt-1,Ge=Jt+1;;){do Le++;while(lt[Le]<de);do Ge--;while(lt[Ge]>de);if(Le>=Ge)break;Un(lt,Le,Ge),Un(Tt,3*Le,3*Ge),Un(Tt,3*Le+1,3*Ge+1),Un(Tt,3*Le+2,3*Ge+2)}Ge-Bt<Jt-Ge?($(lt,Tt,Bt,Ge),Bt=Ge+1):($(lt,Tt,Ge+1,Jt),Jt=Ge)}}(C,N,0,C.length-1),p&&p.push(C.buffer,N.buffer),{ids:C,positions:N}},qe.deserialize=function(d){var p=new qe;return p.ids=d.ids,p.positions=d.positions,p.indexed=!0,p};var rn=Math.pow(2,53)-1;function Xn(d){var p=+d;return!isNaN(p)&&p<=rn?p:Ae(String(d))}function Un(d,p,C){var N=d[p];d[p]=d[C],d[C]=N}Yi("FeaturePositionMap",qe);var gr=function(p,C){this.gl=p.gl,this.location=C},Mr=function(d){function p(C,N){d.call(this,C,N),this.current=0}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){this.current!==C&&(this.current=C,this.gl.uniform1i(this.location,C))},p}(gr),Qr=function(d){function p(C,N){d.call(this,C,N),this.current=0}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){this.current!==C&&(this.current=C,this.gl.uniform1f(this.location,C))},p}(gr),Vr=function(d){function p(C,N){d.call(this,C,N),this.current=[0,0]}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){C[0]===this.current[0]&&C[1]===this.current[1]||(this.current=C,this.gl.uniform2f(this.location,C[0],C[1]))},p}(gr),_i=function(d){function p(C,N){d.call(this,C,N),this.current=[0,0,0]}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){C[0]===this.current[0]&&C[1]===this.current[1]&&C[2]===this.current[2]||(this.current=C,this.gl.uniform3f(this.location,C[0],C[1],C[2]))},p}(gr),Di=function(d){function p(C,N){d.call(this,C,N),this.current=[0,0,0,0]}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){C[0]===this.current[0]&&C[1]===this.current[1]&&C[2]===this.current[2]&&C[3]===this.current[3]||(this.current=C,this.gl.uniform4f(this.location,C[0],C[1],C[2],C[3]))},p}(gr),Wi=function(d){function p(C,N){d.call(this,C,N),this.current=Fr.transparent}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){C.r===this.current.r&&C.g===this.current.g&&C.b===this.current.b&&C.a===this.current.a||(this.current=C,this.gl.uniform4f(this.location,C.r,C.g,C.b,C.a))},p}(gr),Xi=new Float32Array(16),La=function(d){function p(C,N){d.call(this,C,N),this.current=Xi}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.set=function(C){if(C[12]!==this.current[12]||C[0]!==this.current[0])return this.current=C,void this.gl.uniformMatrix4fv(this.location,!1,C);for(var N=1;N<16;N++)if(C[N]!==this.current[N]){this.current=C,this.gl.uniformMatrix4fv(this.location,!1,C);break}},p}(gr);function Na(d){return[qt(255*d.r,255*d.g),qt(255*d.b,255*d.a)]}var Vi=function(p,C,N){this.value=p,this.uniformNames=C.map(function($){return"u_"+$}),this.type=N};Vi.prototype.setUniform=function(d,p,C){d.set(C.constantOr(this.value))},Vi.prototype.getBinding=function(d,p,C){return this.type==="color"?new Wi(d,p):new Qr(d,p)};var Ma=function(p,C){this.uniformNames=C.map(function(N){return"u_"+N}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ma.prototype.setConstantPatternPositions=function(d,p){this.pixelRatioFrom=p.pixelRatio,this.pixelRatioTo=d.pixelRatio,this.patternFrom=p.tlbr,this.patternTo=d.tlbr},Ma.prototype.setUniform=function(d,p,C,N){var $=N==="u_pattern_to"?this.patternTo:N==="u_pattern_from"?this.patternFrom:N==="u_pixel_ratio_to"?this.pixelRatioTo:N==="u_pixel_ratio_from"?this.pixelRatioFrom:null;$&&d.set($)},Ma.prototype.getBinding=function(d,p,C){return C.substr(0,9)==="u_pattern"?new Di(d,p):new Qr(d,p)};var xa=function(p,C,N,$){this.expression=p,this.type=N,this.maxValue=0,this.paintVertexAttributes=C.map(function(lt){return{name:"a_"+lt,type:"Float32",components:N==="color"?2:1,offset:0}}),this.paintVertexArray=new $};xa.prototype.populatePaintArray=function(d,p,C,N,$){var lt=this.paintVertexArray.length,Tt=this.expression.evaluate(new xr(0),p,{},N,[],$);this.paintVertexArray.resize(d),this._setPaintValue(lt,d,Tt)},xa.prototype.updatePaintArray=function(d,p,C,N){var $=this.expression.evaluate({zoom:0},C,N);this._setPaintValue(d,p,$)},xa.prototype._setPaintValue=function(d,p,C){if(this.type==="color")for(var N=Na(C),$=d;$<p;$++)this.paintVertexArray.emplace($,N[0],N[1]);else{for(var lt=d;lt<p;lt++)this.paintVertexArray.emplace(lt,C);this.maxValue=Math.max(this.maxValue,Math.abs(C))}},xa.prototype.upload=function(d){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=d.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},xa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Hi=function(p,C,N,$,lt,Tt){this.expression=p,this.uniformNames=C.map(function(Bt){return"u_"+Bt+"_t"}),this.type=N,this.useIntegerZoom=$,this.zoom=lt,this.maxValue=0,this.paintVertexAttributes=C.map(function(Bt){return{name:"a_"+Bt,type:"Float32",components:N==="color"?4:2,offset:0}}),this.paintVertexArray=new Tt};Hi.prototype.populatePaintArray=function(d,p,C,N,$){var lt=this.expression.evaluate(new xr(this.zoom),p,{},N,[],$),Tt=this.expression.evaluate(new xr(this.zoom+1),p,{},N,[],$),Bt=this.paintVertexArray.length;this.paintVertexArray.resize(d),this._setPaintValue(Bt,d,lt,Tt)},Hi.prototype.updatePaintArray=function(d,p,C,N){var $=this.expression.evaluate({zoom:this.zoom},C,N),lt=this.expression.evaluate({zoom:this.zoom+1},C,N);this._setPaintValue(d,p,$,lt)},Hi.prototype._setPaintValue=function(d,p,C,N){if(this.type==="color")for(var $=Na(C),lt=Na(N),Tt=d;Tt<p;Tt++)this.paintVertexArray.emplace(Tt,$[0],$[1],lt[0],lt[1]);else{for(var Bt=d;Bt<p;Bt++)this.paintVertexArray.emplace(Bt,C,N);this.maxValue=Math.max(this.maxValue,Math.abs(C),Math.abs(N))}},Hi.prototype.upload=function(d){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=d.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Hi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Hi.prototype.setUniform=function(d,p){var C=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,N=l(this.expression.interpolationFactor(C,this.zoom,this.zoom+1),0,1);d.set(N)},Hi.prototype.getBinding=function(d,p,C){return new Qr(d,p)};var ha=function(p,C,N,$,lt,Tt){this.expression=p,this.type=C,this.useIntegerZoom=N,this.zoom=$,this.layerId=Tt,this.zoomInPaintVertexArray=new lt,this.zoomOutPaintVertexArray=new lt};ha.prototype.populatePaintArray=function(d,p,C){var N=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(d),this.zoomOutPaintVertexArray.resize(d),this._setPaintValues(N,d,p.patterns&&p.patterns[this.layerId],C)},ha.prototype.updatePaintArray=function(d,p,C,N,$){this._setPaintValues(d,p,C.patterns&&C.patterns[this.layerId],$)},ha.prototype._setPaintValues=function(d,p,C,N){if(N&&C){var $=N[C.min],lt=N[C.mid],Tt=N[C.max];if($&&lt&&Tt)for(var Bt=d;Bt<p;Bt++)this.zoomInPaintVertexArray.emplace(Bt,lt.tl[0],lt.tl[1],lt.br[0],lt.br[1],$.tl[0],$.tl[1],$.br[0],$.br[1],lt.pixelRatio,$.pixelRatio),this.zoomOutPaintVertexArray.emplace(Bt,lt.tl[0],lt.tl[1],lt.br[0],lt.br[1],Tt.tl[0],Tt.tl[1],Tt.br[0],Tt.br[1],lt.pixelRatio,Tt.pixelRatio)}},ha.prototype.upload=function(d){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=d.createVertexBuffer(this.zoomInPaintVertexArray,he.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=d.createVertexBuffer(this.zoomOutPaintVertexArray,he.members,this.expression.isStateDependent))},ha.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var aa=function(p,C,N){this.binders={},this._buffers=[];var $=[];for(var lt in p.paint._values)if(N(lt)){var Tt=p.paint.get(lt);if(Tt instanceof oe&&Fo(Tt.property.specification)){var Bt=Va(lt,p.type),Jt=Tt.value,de=Tt.property.specification.type,Le=Tt.property.useIntegerZoom,Ge=Tt.property.specification["property-type"],He=Ge==="cross-faded"||Ge==="cross-faded-data-driven";if(Jt.kind==="constant")this.binders[lt]=He?new Ma(Jt.value,Bt):new Vi(Jt.value,Bt,de),$.push("/u_"+lt);else if(Jt.kind==="source"||He){var ln=As(lt,de,"source");this.binders[lt]=He?new ha(Jt,de,Le,C,ln,p.id):new xa(Jt,Bt,de,ln),$.push("/a_"+lt)}else{var In=As(lt,de,"composite");this.binders[lt]=new Hi(Jt,Bt,de,Le,C,In),$.push("/z_"+lt)}}}this.cacheKey=$.sort().join("")};aa.prototype.getMaxValue=function(d){var p=this.binders[d];return p instanceof xa||p instanceof Hi?p.maxValue:0},aa.prototype.populatePaintArrays=function(d,p,C,N,$){for(var lt in this.binders){var Tt=this.binders[lt];(Tt instanceof xa||Tt instanceof Hi||Tt instanceof ha)&&Tt.populatePaintArray(d,p,C,N,$)}},aa.prototype.setConstantPatternPositions=function(d,p){for(var C in this.binders){var N=this.binders[C];N instanceof Ma&&N.setConstantPatternPositions(d,p)}},aa.prototype.updatePaintArrays=function(d,p,C,N,$){var lt=!1;for(var Tt in d)for(var Bt=0,Jt=p.getPositions(Tt);Bt<Jt.length;Bt+=1){var de=Jt[Bt],Le=C.feature(de.index);for(var Ge in this.binders){var He=this.binders[Ge];if((He instanceof xa||He instanceof Hi||He instanceof ha)&&He.expression.isStateDependent===!0){var ln=N.paint.get(Ge);He.expression=ln.value,He.updatePaintArray(de.start,de.end,Le,d[Tt],$),lt=!0}}}return lt},aa.prototype.defines=function(){var d=[];for(var p in this.binders){var C=this.binders[p];(C instanceof Vi||C instanceof Ma)&&d.push.apply(d,C.uniformNames.map(function(N){return"#define HAS_UNIFORM_"+N}))}return d},aa.prototype.getBinderAttributes=function(){var d=[];for(var p in this.binders){var C=this.binders[p];if(C instanceof xa||C instanceof Hi)for(var N=0;N<C.paintVertexAttributes.length;N++)d.push(C.paintVertexAttributes[N].name);else if(C instanceof ha)for(var $=0;$<he.members.length;$++)d.push(he.members[$].name)}return d},aa.prototype.getBinderUniforms=function(){var d=[];for(var p in this.binders){var C=this.binders[p];if(C instanceof Vi||C instanceof Ma||C instanceof Hi)for(var N=0,$=C.uniformNames;N<$.length;N+=1)d.push($[N])}return d},aa.prototype.getPaintVertexBuffers=function(){return this._buffers},aa.prototype.getUniforms=function(d,p){var C=[];for(var N in this.binders){var $=this.binders[N];if($ instanceof Vi||$ instanceof Ma||$ instanceof Hi)for(var lt=0,Tt=$.uniformNames;lt<Tt.length;lt+=1){var Bt=Tt[lt];if(p[Bt]){var Jt=$.getBinding(d,p[Bt],Bt);C.push({name:Bt,property:N,binding:Jt})}}}return C},aa.prototype.setUniforms=function(d,p,C,N){for(var $=0,lt=p;$<lt.length;$+=1){var Tt=lt[$],Bt=Tt.name,Jt=Tt.property;this.binders[Jt].setUniform(Tt.binding,N,C.get(Jt),Bt)}},aa.prototype.updatePaintBuffers=function(d){for(var p in this._buffers=[],this.binders){var C=this.binders[p];if(d&&C instanceof ha){var N=d.fromScale===2?C.zoomInPaintVertexBuffer:C.zoomOutPaintVertexBuffer;N&&this._buffers.push(N)}else(C instanceof xa||C instanceof Hi)&&C.paintVertexBuffer&&this._buffers.push(C.paintVertexBuffer)}},aa.prototype.upload=function(d){for(var p in this.binders){var C=this.binders[p];(C instanceof xa||C instanceof Hi||C instanceof ha)&&C.upload(d)}this.updatePaintBuffers()},aa.prototype.destroy=function(){for(var d in this.binders){var p=this.binders[d];(p instanceof xa||p instanceof Hi||p instanceof ha)&&p.destroy()}};var Ca=function(p,C,N){N===void 0&&(N=function(){return!0}),this.programConfigurations={};for(var $=0,lt=p;$<lt.length;$+=1){var Tt=lt[$];this.programConfigurations[Tt.id]=new aa(Tt,C,N)}this.needsUpload=!1,this._featureMap=new qe,this._bufferOffset=0};function Va(d,p){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[d]||[d.replace(p+"-","").replace(/-/g,"_")]}function As(d,p,C){var N={color:{source:ai,composite:Mu},number:{source:Ia,composite:ai}},$=function(lt){return{"line-pattern":{source:fi,composite:fi},"fill-pattern":{source:fi,composite:fi},"fill-extrusion-pattern":{source:fi,composite:fi}}[lt]}(d);return $&&$[C]||N[p][C]}Ca.prototype.populatePaintArrays=function(d,p,C,N,$,lt){for(var Tt in this.programConfigurations)this.programConfigurations[Tt].populatePaintArrays(d,p,N,$,lt);p.id!==void 0&&this._featureMap.add(p.id,C,this._bufferOffset,d),this._bufferOffset=d,this.needsUpload=!0},Ca.prototype.updatePaintArrays=function(d,p,C,N){for(var $=0,lt=C;$<lt.length;$+=1){var Tt=lt[$];this.needsUpload=this.programConfigurations[Tt.id].updatePaintArrays(d,this._featureMap,p,Tt,N)||this.needsUpload}},Ca.prototype.get=function(d){return this.programConfigurations[d]},Ca.prototype.upload=function(d){if(this.needsUpload){for(var p in this.programConfigurations)this.programConfigurations[p].upload(d);this.needsUpload=!1}},Ca.prototype.destroy=function(){for(var d in this.programConfigurations)this.programConfigurations[d].destroy()},Yi("ConstantBinder",Vi),Yi("CrossFadedConstantBinder",Ma),Yi("SourceExpressionBinder",xa),Yi("CrossFadedCompositeBinder",ha),Yi("CompositeExpressionBinder",Hi),Yi("ProgramConfiguration",aa,{omit:["_buffers"]}),Yi("ProgramConfigurationSet",Ca);var Rs=Math.pow(2,14)-1,gs=-Rs-1;function fs(d){for(var p=8192/d.extent,C=d.loadGeometry(),N=0;N<C.length;N++)for(var $=C[N],lt=0;lt<$.length;lt++){var Tt=$[lt],Bt=Math.round(Tt.x*p),Jt=Math.round(Tt.y*p);Tt.x=l(Bt,gs,Rs),Tt.y=l(Jt,gs,Rs),(Bt<Tt.x||Bt>Tt.x+1||Jt<Tt.y||Jt>Tt.y+1)&&O("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return C}function Qs(d,p){return{type:d.type,id:d.id,properties:d.properties,geometry:p?fs(d):[]}}function _l(d,p,C,N,$){d.emplaceBack(2*p+(N+1)/2,2*C+($+1)/2)}var du=function(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(C){return C.id}),this.index=p.index,this.hasPattern=!1,this.layoutVertexArray=new mr,this.indexArray=new ka,this.segments=new Zt,this.programConfigurations=new Ca(p.layers,p.zoom),this.stateDependentLayerIds=this.layers.filter(function(C){return C.isStateDependent()}).map(function(C){return C.id})};function uc(d,p){for(var C=0;C<d.length;C++)if(vc(p,d[C]))return!0;for(var N=0;N<p.length;N++)if(vc(d,p[N]))return!0;return!!Ic(d,p)}function Mc(d,p,C){return!!vc(d,p)||!!Pc(p,d,C)}function Il(d,p){if(d.length===1)return of(p,d[0]);for(var C=0;C<p.length;C++)for(var N=p[C],$=0;$<N.length;$++)if(vc(d,N[$]))return!0;for(var lt=0;lt<d.length;lt++)if(of(p,d[lt]))return!0;for(var Tt=0;Tt<p.length;Tt++)if(Ic(d,p[Tt]))return!0;return!1}function ql(d,p,C){if(d.length>1){if(Ic(d,p))return!0;for(var N=0;N<p.length;N++)if(Pc(p[N],d,C))return!0}for(var $=0;$<d.length;$++)if(Pc(d[$],p,C))return!0;return!1}function Ic(d,p){if(d.length===0||p.length===0)return!1;for(var C=0;C<d.length-1;C++)for(var N=d[C],$=d[C+1],lt=0;lt<p.length-1;lt++)if(qc(N,$,p[lt],p[lt+1]))return!0;return!1}function qc(d,p,C,N){return L(d,C,N)!==L(p,C,N)&&L(d,p,C)!==L(d,p,N)}function Pc(d,p,C){var N=C*C;if(p.length===1)return d.distSqr(p[0])<N;for(var $=1;$<p.length;$++)if(Zc(d,p[$-1],p[$])<N)return!0;return!1}function Zc(d,p,C){var N=p.distSqr(C);if(N===0)return d.distSqr(p);var $=((d.x-p.x)*(C.x-p.x)+(d.y-p.y)*(C.y-p.y))/N;return d.distSqr($<0?p:$>1?C:C.sub(p)._mult($)._add(p))}function of(d,p){for(var C,N,$,lt=!1,Tt=0;Tt<d.length;Tt++)for(var Bt=0,Jt=(C=d[Tt]).length-1;Bt<C.length;Jt=Bt++)(N=C[Bt]).y>p.y!=($=C[Jt]).y>p.y&&p.x<($.x-N.x)*(p.y-N.y)/($.y-N.y)+N.x&&(lt=!lt);return lt}function vc(d,p){for(var C=!1,N=0,$=d.length-1;N<d.length;$=N++){var lt=d[N],Tt=d[$];lt.y>p.y!=Tt.y>p.y&&p.x<(Tt.x-lt.x)*(p.y-lt.y)/(Tt.y-lt.y)+lt.x&&(C=!C)}return C}function kc(d,p,C){var N=C[0],$=C[2];if(d.x<N.x&&p.x<N.x||d.x>$.x&&p.x>$.x||d.y<N.y&&p.y<N.y||d.y>$.y&&p.y>$.y)return!1;var lt=L(d,p,C[0]);return lt!==L(d,p,C[1])||lt!==L(d,p,C[2])||lt!==L(d,p,C[3])}function bc(d,p,C){var N=p.paint.get(d).value;return N.kind==="constant"?N.value:C.programConfigurations.get(p.id).getMaxValue(d)}function au(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function tc(d,p,C,N,$){if(!p[0]&&!p[1])return d;var lt=r.convert(p)._mult($);C==="viewport"&&lt._rotate(-N);for(var Tt=[],Bt=0;Bt<d.length;Bt++)Tt.push(d[Bt].sub(lt));return Tt}du.prototype.populate=function(d,p,C){var N=this.layers[0],$=[],lt=null;N.type==="circle"&&(lt=N.layout.get("circle-sort-key"));for(var Tt=0,Bt=d;Tt<Bt.length;Tt+=1){var Jt=Bt[Tt],de=Jt.feature,Le=Jt.id,Ge=Jt.index,He=Jt.sourceLayerIndex,ln=this.layers[0]._featureFilter.needGeometry,In=Qs(de,ln);if(this.layers[0]._featureFilter.filter(new xr(this.zoom),In,C)){var Cn=lt?lt.evaluate(In,{},C):void 0,Zn={id:Le,properties:de.properties,type:de.type,sourceLayerIndex:He,index:Ge,geometry:ln?In.geometry:fs(de),patterns:{},sortKey:Cn};$.push(Zn)}}lt&&$.sort(function(Fi,oa){return Fi.sortKey-oa.sortKey});for(var Kn=0,_r=$;Kn<_r.length;Kn+=1){var jr=_r[Kn],kr=jr.geometry,vi=jr.index,oi=jr.sourceLayerIndex,Ni=d[vi].feature;this.addFeature(jr,kr,vi,C),p.featureIndex.insert(Ni,kr,vi,oi,this.index)}},du.prototype.update=function(d,p,C){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,p,this.stateDependentLayers,C)},du.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},du.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},du.prototype.upload=function(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Ut),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0},du.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},du.prototype.addFeature=function(d,p,C,N){for(var $=0,lt=p;$<lt.length;$+=1)for(var Tt=0,Bt=lt[$];Tt<Bt.length;Tt+=1){var Jt=Bt[Tt],de=Jt.x,Le=Jt.y;if(!(de<0||de>=8192||Le<0||Le>=8192)){var Ge=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,d.sortKey),He=Ge.vertexLength;_l(this.layoutVertexArray,de,Le,-1,-1),_l(this.layoutVertexArray,de,Le,1,-1),_l(this.layoutVertexArray,de,Le,1,1),_l(this.layoutVertexArray,de,Le,-1,1),this.indexArray.emplaceBack(He,He+1,He+2),this.indexArray.emplaceBack(He,He+3,He+2),Ge.vertexLength+=4,Ge.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,C,{},N)},Yi("CircleBucket",du,{omit:["layers"]});var Tc=new vn({"circle-sort-key":new Fe(ue.layout_circle["circle-sort-key"])}),ec={paint:new vn({"circle-radius":new Fe(ue.paint_circle["circle-radius"]),"circle-color":new Fe(ue.paint_circle["circle-color"]),"circle-blur":new Fe(ue.paint_circle["circle-blur"]),"circle-opacity":new Fe(ue.paint_circle["circle-opacity"]),"circle-translate":new fe(ue.paint_circle["circle-translate"]),"circle-translate-anchor":new fe(ue.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new fe(ue.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new fe(ue.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Fe(ue.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Fe(ue.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Fe(ue.paint_circle["circle-stroke-opacity"])}),layout:Tc},Pu=typeof Float32Array!="undefined"?Float32Array:Array;function vu(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function cl(d,p,C){var N=p[0],$=p[1],lt=p[2],Tt=p[3],Bt=p[4],Jt=p[5],de=p[6],Le=p[7],Ge=p[8],He=p[9],ln=p[10],In=p[11],Cn=p[12],Zn=p[13],Kn=p[14],_r=p[15],jr=C[0],kr=C[1],vi=C[2],oi=C[3];return d[0]=jr*N+kr*Bt+vi*Ge+oi*Cn,d[1]=jr*$+kr*Jt+vi*He+oi*Zn,d[2]=jr*lt+kr*de+vi*ln+oi*Kn,d[3]=jr*Tt+kr*Le+vi*In+oi*_r,d[4]=(jr=C[4])*N+(kr=C[5])*Bt+(vi=C[6])*Ge+(oi=C[7])*Cn,d[5]=jr*$+kr*Jt+vi*He+oi*Zn,d[6]=jr*lt+kr*de+vi*ln+oi*Kn,d[7]=jr*Tt+kr*Le+vi*In+oi*_r,d[8]=(jr=C[8])*N+(kr=C[9])*Bt+(vi=C[10])*Ge+(oi=C[11])*Cn,d[9]=jr*$+kr*Jt+vi*He+oi*Zn,d[10]=jr*lt+kr*de+vi*ln+oi*Kn,d[11]=jr*Tt+kr*Le+vi*In+oi*_r,d[12]=(jr=C[12])*N+(kr=C[13])*Bt+(vi=C[14])*Ge+(oi=C[15])*Cn,d[13]=jr*$+kr*Jt+vi*He+oi*Zn,d[14]=jr*lt+kr*de+vi*ln+oi*Kn,d[15]=jr*Tt+kr*Le+vi*In+oi*_r,d}Math.hypot||(Math.hypot=function(){for(var d=arguments,p=0,C=arguments.length;C--;)p+=d[C]*d[C];return Math.sqrt(p)});var Ll,fl=cl;function kl(d,p,C){var N=p[0],$=p[1],lt=p[2],Tt=p[3];return d[0]=C[0]*N+C[4]*$+C[8]*lt+C[12]*Tt,d[1]=C[1]*N+C[5]*$+C[9]*lt+C[13]*Tt,d[2]=C[2]*N+C[6]*$+C[10]*lt+C[14]*Tt,d[3]=C[3]*N+C[7]*$+C[11]*lt+C[15]*Tt,d}Ll=new Pu(3),Pu!=Float32Array&&(Ll[0]=0,Ll[1]=0,Ll[2]=0),function(){var d=new Pu(4);Pu!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0,d[3]=0)}();var Gc=(function(){var d=new Pu(2);Pu!=Float32Array&&(d[0]=0,d[1]=0)}(),function(d){function p(C){d.call(this,C,ec)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.createBucket=function(C){return new du(C)},p.prototype.queryRadius=function(C){var N=C;return bc("circle-radius",this,N)+bc("circle-stroke-width",this,N)+au(this.paint.get("circle-translate"))},p.prototype.queryIntersectsFeature=function(C,N,$,lt,Tt,Bt,Jt,de){for(var Le=tc(C,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Bt.angle,Jt),Ge=this.paint.get("circle-radius").evaluate(N,$)+this.paint.get("circle-stroke-width").evaluate(N,$),He=this.paint.get("circle-pitch-alignment")==="map",ln=He?Le:function(Ni,Fi){return Ni.map(function(oa){return tf(oa,Fi)})}(Le,de),In=He?Ge*Jt:Ge,Cn=0,Zn=lt;Cn<Zn.length;Cn+=1)for(var Kn=0,_r=Zn[Cn];Kn<_r.length;Kn+=1){var jr=_r[Kn],kr=He?jr:tf(jr,de),vi=In,oi=kl([],[jr.x,jr.y,0,1],de);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?vi*=oi[3]/Bt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(vi*=Bt.cameraToCenterDistance/oi[3]),Mc(ln,kr,vi))return!0}return!1},p}(fn));function tf(d,p){var C=kl([],[d.x,d.y,0,1],p);return new r(C[0]/C[3],C[1]/C[3])}var Vc=function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(du);function lc(d,p,C,N){var $=p.width,lt=p.height;if(N){if(N instanceof Uint8ClampedArray)N=new Uint8Array(N.buffer);else if(N.length!==$*lt*C)throw new RangeError("mismatched image size")}else N=new Uint8Array($*lt*C);return d.width=$,d.height=lt,d.data=N,d}function hl(d,p,C){var N=p.width,$=p.height;if(N!==d.width||$!==d.height){var lt=lc({},{width:N,height:$},C);Ec(d,lt,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,N),height:Math.min(d.height,$)},C),d.width=N,d.height=$,d.data=lt.data}}function Ec(d,p,C,N,$,lt){if($.width===0||$.height===0)return p;if($.width>d.width||$.height>d.height||C.x>d.width-$.width||C.y>d.height-$.height)throw new RangeError("out of range source coordinates for image copy");if($.width>p.width||$.height>p.height||N.x>p.width-$.width||N.y>p.height-$.height)throw new RangeError("out of range destination coordinates for image copy");for(var Tt=d.data,Bt=p.data,Jt=0;Jt<$.height;Jt++)for(var de=((C.y+Jt)*d.width+C.x)*lt,Le=((N.y+Jt)*p.width+N.x)*lt,Ge=0;Ge<$.width*lt;Ge++)Bt[Le+Ge]=Tt[de+Ge];return p}Yi("HeatmapBucket",Vc,{omit:["layers"]});var Kl=function(p,C){lc(this,p,1,C)};Kl.prototype.resize=function(d){hl(this,d,1)},Kl.prototype.clone=function(){return new Kl({width:this.width,height:this.height},new Uint8Array(this.data))},Kl.copy=function(d,p,C,N,$){Ec(d,p,C,N,$,1)};var dl=function(p,C){lc(this,p,4,C)};dl.prototype.resize=function(d){hl(this,d,4)},dl.prototype.replace=function(d,p){p?this.data.set(d):this.data=d instanceof Uint8ClampedArray?new Uint8Array(d.buffer):d},dl.prototype.clone=function(){return new dl({width:this.width,height:this.height},new Uint8Array(this.data))},dl.copy=function(d,p,C,N,$){Ec(d,p,C,N,$,4)},Yi("AlphaImage",Kl),Yi("RGBAImage",dl);var Jf={paint:new vn({"heatmap-radius":new Fe(ue.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Fe(ue.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new fe(ue.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Je(ue.paint_heatmap["heatmap-color"]),"heatmap-opacity":new fe(ue.paint_heatmap["heatmap-opacity"])})};function cf(d){var p={},C=d.resolution||256,N=d.clips?d.clips.length:1,$=d.image||new dl({width:C,height:N}),lt=function(Cn,Zn,Kn){p[d.evaluationKey]=Kn;var _r=d.expression.evaluate(p);$.data[Cn+Zn+0]=Math.floor(255*_r.r/_r.a),$.data[Cn+Zn+1]=Math.floor(255*_r.g/_r.a),$.data[Cn+Zn+2]=Math.floor(255*_r.b/_r.a),$.data[Cn+Zn+3]=Math.floor(255*_r.a)};if(d.clips)for(var Tt=0,Bt=0;Tt<N;++Tt,Bt+=4*C)for(var Jt=0,de=0;Jt<C;Jt++,de+=4){var Le=Jt/(C-1),Ge=d.clips[Tt];lt(Bt,de,Ge.start*(1-Le)+Ge.end*Le)}else for(var He=0,ln=0;He<C;He++,ln+=4)lt(0,ln,He/(C-1));return $}var pf=function(d){function p(C){d.call(this,C,Jf),this._updateColorRamp()}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.createBucket=function(C){return new Vc(C)},p.prototype._handleSpecialPaintPropertyUpdate=function(C){C==="heatmap-color"&&this._updateColorRamp()},p.prototype._updateColorRamp=function(){this.colorRamp=cf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},p.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},p.prototype.queryRadius=function(){return 0},p.prototype.queryIntersectsFeature=function(){return!1},p.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},p}(fn),_f={paint:new vn({"hillshade-illumination-direction":new fe(ue.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new fe(ue.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new fe(ue.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new fe(ue.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new fe(ue.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new fe(ue.paint_hillshade["hillshade-accent-color"])})},Gf=function(d){function p(C){d.call(this,C,_f)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},p}(fn),gf=Gn([{name:"a_pos",components:2,type:"Int16"}],4).members,Wc=Ac,$f=Ac;function Ac(d,p,C){C=C||2;var N,$,lt,Tt,Bt,Jt,de,Le=p&&p.length,Ge=Le?p[0]*C:d.length,He=ef(d,0,Ge,C,!0),ln=[];if(!He||He.next===He.prev)return ln;if(Le&&(He=function(Cn,Zn,Kn,_r){var jr,kr,vi,oi=[];for(jr=0,kr=Zn.length;jr<kr;jr++)(vi=ef(Cn,Zn[jr]*_r,jr<kr-1?Zn[jr+1]*_r:Cn.length,_r,!1))===vi.next&&(vi.steiner=!0),oi.push(ke(vi));for(oi.sort(ve),jr=0;jr<oi.length;jr++)ye(oi[jr],Kn),Kn=Kc(Kn,Kn.next);return Kn}(d,p,He,C)),d.length>80*C){N=lt=d[0],$=Tt=d[1];for(var In=C;In<Ge;In+=C)(Bt=d[In])<N&&(N=Bt),(Jt=d[In+1])<$&&($=Jt),Bt>lt&&(lt=Bt),Jt>Tt&&(Tt=Jt);de=(de=Math.max(lt-N,Tt-$))!==0?1/de:0}return Mf(He,ln,C,N,$,de),ln}function ef(d,p,C,N,$){var lt,Tt;if($===To(d,p,C,N)>0)for(lt=p;lt<C;lt+=N)Tt=no(lt,d[lt],d[lt+1],Tt);else for(lt=C-N;lt>=p;lt-=N)Tt=no(lt,d[lt],d[lt+1],Tt);return Tt&&dr(Tt,Tt.next)&&($a(Tt),Tt=Tt.next),Tt}function Kc(d,p){if(!d)return d;p||(p=d);var C,N=d;do if(C=!1,N.steiner||!dr(N,N.next)&&ir(N.prev,N,N.next)!==0)N=N.next;else{if($a(N),(N=p=N.prev)===N.next)break;C=!0}while(C||N!==p);return p}function Mf(d,p,C,N,$,lt,Tt){if(d){!Tt&&lt&&function(Le,Ge,He,ln){var In=Le;do In.z===null&&(In.z=Xt(In.x,In.y,Ge,He,ln)),In.prevZ=In.prev,In.nextZ=In.next,In=In.next;while(In!==Le);In.prevZ.nextZ=null,In.prevZ=null,function(Cn){var Zn,Kn,_r,jr,kr,vi,oi,Ni,Fi=1;do{for(Kn=Cn,Cn=null,kr=null,vi=0;Kn;){for(vi++,_r=Kn,oi=0,Zn=0;Zn<Fi&&(oi++,_r=_r.nextZ);Zn++);for(Ni=Fi;oi>0||Ni>0&&_r;)oi!==0&&(Ni===0||!_r||Kn.z<=_r.z)?(jr=Kn,Kn=Kn.nextZ,oi--):(jr=_r,_r=_r.nextZ,Ni--),kr?kr.nextZ=jr:Cn=jr,jr.prevZ=kr,kr=jr;Kn=_r}kr.nextZ=null,Fi*=2}while(vi>1)}(In)}(d,N,$,lt);for(var Bt,Jt,de=d;d.prev!==d.next;)if(Bt=d.prev,Jt=d.next,lt?Qf(d,N,$,lt):hh(d))p.push(Bt.i/C),p.push(d.i/C),p.push(Jt.i/C),$a(d),d=Jt.next,de=Jt.next;else if((d=Jt)===de){Tt?Tt===1?Mf(d=Vf(Kc(d),p,C),p,C,N,$,lt,2):Tt===2&&qf(d,p,C,N,$,lt):Mf(Kc(d),p,C,N,$,lt,1);break}}}function hh(d){var p=d.prev,C=d,N=d.next;if(ir(p,C,N)>=0)return!1;for(var $=d.next.next;$!==d.prev;){if(un(p.x,p.y,C.x,C.y,N.x,N.y,$.x,$.y)&&ir($.prev,$,$.next)>=0)return!1;$=$.next}return!0}function Qf(d,p,C,N){var $=d.prev,lt=d,Tt=d.next;if(ir($,lt,Tt)>=0)return!1;for(var Bt=$.x>lt.x?$.x>Tt.x?$.x:Tt.x:lt.x>Tt.x?lt.x:Tt.x,Jt=$.y>lt.y?$.y>Tt.y?$.y:Tt.y:lt.y>Tt.y?lt.y:Tt.y,de=Xt($.x<lt.x?$.x<Tt.x?$.x:Tt.x:lt.x<Tt.x?lt.x:Tt.x,$.y<lt.y?$.y<Tt.y?$.y:Tt.y:lt.y<Tt.y?lt.y:Tt.y,p,C,N),Le=Xt(Bt,Jt,p,C,N),Ge=d.prevZ,He=d.nextZ;Ge&&Ge.z>=de&&He&&He.z<=Le;){if(Ge!==d.prev&&Ge!==d.next&&un($.x,$.y,lt.x,lt.y,Tt.x,Tt.y,Ge.x,Ge.y)&&ir(Ge.prev,Ge,Ge.next)>=0||(Ge=Ge.prevZ,He!==d.prev&&He!==d.next&&un($.x,$.y,lt.x,lt.y,Tt.x,Tt.y,He.x,He.y)&&ir(He.prev,He,He.next)>=0))return!1;He=He.nextZ}for(;Ge&&Ge.z>=de;){if(Ge!==d.prev&&Ge!==d.next&&un($.x,$.y,lt.x,lt.y,Tt.x,Tt.y,Ge.x,Ge.y)&&ir(Ge.prev,Ge,Ge.next)>=0)return!1;Ge=Ge.prevZ}for(;He&&He.z<=Le;){if(He!==d.prev&&He!==d.next&&un($.x,$.y,lt.x,lt.y,Tt.x,Tt.y,He.x,He.y)&&ir(He.prev,He,He.next)>=0)return!1;He=He.nextZ}return!0}function Vf(d,p,C){var N=d;do{var $=N.prev,lt=N.next.next;!dr($,lt)&&ti($,N,N.next,lt)&&fa($,lt)&&fa(lt,$)&&(p.push($.i/C),p.push(N.i/C),p.push(lt.i/C),$a(N),$a(N.next),N=d=lt),N=N.next}while(N!==d);return Kc(N)}function qf(d,p,C,N,$,lt){var Tt=d;do{for(var Bt=Tt.next.next;Bt!==Tt.prev;){if(Tt.i!==Bt.i&&Wn(Tt,Bt)){var Jt=na(Tt,Bt);return Tt=Kc(Tt,Tt.next),Jt=Kc(Jt,Jt.next),Mf(Tt,p,C,N,$,lt),void Mf(Jt,p,C,N,$,lt)}Bt=Bt.next}Tt=Tt.next}while(Tt!==d)}function ve(d,p){return d.x-p.x}function ye(d,p){if(p=function(N,$){var lt,Tt=$,Bt=N.x,Jt=N.y,de=-1/0;do{if(Jt<=Tt.y&&Jt>=Tt.next.y&&Tt.next.y!==Tt.y){var Le=Tt.x+(Jt-Tt.y)*(Tt.next.x-Tt.x)/(Tt.next.y-Tt.y);if(Le<=Bt&&Le>de){if(de=Le,Le===Bt){if(Jt===Tt.y)return Tt;if(Jt===Tt.next.y)return Tt.next}lt=Tt.x<Tt.next.x?Tt:Tt.next}}Tt=Tt.next}while(Tt!==$);if(!lt)return null;if(Bt===de)return lt;var Ge,He=lt,ln=lt.x,In=lt.y,Cn=1/0;Tt=lt;do Bt>=Tt.x&&Tt.x>=ln&&Bt!==Tt.x&&un(Jt<In?Bt:de,Jt,ln,In,Jt<In?de:Bt,Jt,Tt.x,Tt.y)&&(Ge=Math.abs(Jt-Tt.y)/(Bt-Tt.x),fa(Tt,N)&&(Ge<Cn||Ge===Cn&&(Tt.x>lt.x||Tt.x===lt.x&&Gt(lt,Tt)))&&(lt=Tt,Cn=Ge)),Tt=Tt.next;while(Tt!==He);return lt}(d,p)){var C=na(p,d);Kc(p,p.next),Kc(C,C.next)}}function Gt(d,p){return ir(d.prev,d,p.prev)<0&&ir(p.next,d,d.next)<0}function Xt(d,p,C,N,$){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=32767*(d-C)*$)|d<<8))|d<<4))|d<<2))|d<<1))|(p=1431655765&((p=858993459&((p=252645135&((p=16711935&((p=32767*(p-N)*$)|p<<8))|p<<4))|p<<2))|p<<1))<<1}function ke(d){var p=d,C=d;do(p.x<C.x||p.x===C.x&&p.y<C.y)&&(C=p),p=p.next;while(p!==d);return C}function un(d,p,C,N,$,lt,Tt,Bt){return($-Tt)*(p-Bt)-(d-Tt)*(lt-Bt)>=0&&(d-Tt)*(N-Bt)-(C-Tt)*(p-Bt)>=0&&(C-Tt)*(lt-Bt)-($-Tt)*(N-Bt)>=0}function Wn(d,p){return d.next.i!==p.i&&d.prev.i!==p.i&&!function(C,N){var $=C;do{if($.i!==C.i&&$.next.i!==C.i&&$.i!==N.i&&$.next.i!==N.i&&ti($,$.next,C,N))return!0;$=$.next}while($!==C);return!1}(d,p)&&(fa(d,p)&&fa(p,d)&&function(C,N){var $=C,lt=!1,Tt=(C.x+N.x)/2,Bt=(C.y+N.y)/2;do $.y>Bt!=$.next.y>Bt&&$.next.y!==$.y&&Tt<($.next.x-$.x)*(Bt-$.y)/($.next.y-$.y)+$.x&&(lt=!lt),$=$.next;while($!==C);return lt}(d,p)&&(ir(d.prev,d,p.prev)||ir(d,p.prev,p))||dr(d,p)&&ir(d.prev,d,d.next)>0&&ir(p.prev,p,p.next)>0)}function ir(d,p,C){return(p.y-d.y)*(C.x-p.x)-(p.x-d.x)*(C.y-p.y)}function dr(d,p){return d.x===p.x&&d.y===p.y}function ti(d,p,C,N){var $=Ji(ir(d,p,C)),lt=Ji(ir(d,p,N)),Tt=Ji(ir(C,N,d)),Bt=Ji(ir(C,N,p));return $!==lt&&Tt!==Bt||!($!==0||!Ci(d,C,p))||!(lt!==0||!Ci(d,N,p))||!(Tt!==0||!Ci(C,d,N))||!(Bt!==0||!Ci(C,p,N))}function Ci(d,p,C){return p.x<=Math.max(d.x,C.x)&&p.x>=Math.min(d.x,C.x)&&p.y<=Math.max(d.y,C.y)&&p.y>=Math.min(d.y,C.y)}function Ji(d){return d>0?1:d<0?-1:0}function fa(d,p){return ir(d.prev,d,d.next)<0?ir(d,p,d.next)>=0&&ir(d,d.prev,p)>=0:ir(d,p,d.prev)<0||ir(d,d.next,p)<0}function na(d,p){var C=new Vo(d.i,d.x,d.y),N=new Vo(p.i,p.x,p.y),$=d.next,lt=p.prev;return d.next=p,p.prev=d,C.next=$,$.prev=C,N.next=C,C.prev=N,lt.next=N,N.prev=lt,N}function no(d,p,C,N){var $=new Vo(d,p,C);return N?($.next=N.next,$.prev=N,N.next.prev=$,N.next=$):($.prev=$,$.next=$),$}function $a(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function Vo(d,p,C){this.i=d,this.x=p,this.y=C,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function To(d,p,C,N){for(var $=0,lt=p,Tt=C-N;lt<C;lt+=N)$+=(d[Tt]-d[lt])*(d[lt+1]+d[Tt+1]),Tt=lt;return $}function pu(d,p,C,N,$){(function lt(Tt,Bt,Jt,de,Le){for(;de>Jt;){if(de-Jt>600){var Ge=de-Jt+1,He=Bt-Jt+1,ln=Math.log(Ge),In=.5*Math.exp(2*ln/3),Cn=.5*Math.sqrt(ln*In*(Ge-In)/Ge)*(He-Ge/2<0?-1:1);lt(Tt,Bt,Math.max(Jt,Math.floor(Bt-He*In/Ge+Cn)),Math.min(de,Math.floor(Bt+(Ge-He)*In/Ge+Cn)),Le)}var Zn=Tt[Bt],Kn=Jt,_r=de;for(lu(Tt,Jt,Bt),Le(Tt[de],Zn)>0&&lu(Tt,Jt,de);Kn<_r;){for(lu(Tt,Kn,_r),Kn++,_r--;Le(Tt[Kn],Zn)<0;)Kn++;for(;Le(Tt[_r],Zn)>0;)_r--}Le(Tt[Jt],Zn)===0?lu(Tt,Jt,_r):lu(Tt,++_r,de),_r<=Bt&&(Jt=_r+1),Bt<=_r&&(de=_r-1)}})(d,p,C||0,N||d.length-1,$||Vu)}function lu(d,p,C){var N=d[p];d[p]=d[C],d[C]=N}function Vu(d,p){return d<p?-1:d>p?1:0}function gu(d,p){var C=d.length;if(C<=1)return[d];for(var N,$,lt=[],Tt=0;Tt<C;Tt++){var Bt=H(d[Tt]);Bt!==0&&(d[Tt].area=Math.abs(Bt),$===void 0&&($=Bt<0),$===Bt<0?(N&&lt.push(N),N=[d[Tt]]):N.push(d[Tt]))}if(N&&lt.push(N),p>1)for(var Jt=0;Jt<lt.length;Jt++)lt[Jt].length<=p||(pu(lt[Jt],p,1,lt[Jt].length-1,vl),lt[Jt]=lt[Jt].slice(0,p));return lt}function vl(d,p){return p.area-d.area}function Qo(d,p,C){for(var N=C.patternDependencies,$=!1,lt=0,Tt=p;lt<Tt.length;lt+=1){var Bt=Tt[lt].paint.get(d+"-pattern");Bt.isConstant()||($=!0);var Jt=Bt.constantOr(null);Jt&&($=!0,N[Jt.to]=!0,N[Jt.from]=!0)}return $}function ms(d,p,C,N,$){for(var lt=$.patternDependencies,Tt=0,Bt=p;Tt<Bt.length;Tt+=1){var Jt=Bt[Tt],de=Jt.paint.get(d+"-pattern").value;if(de.kind!=="constant"){var Le=de.evaluate({zoom:N-1},C,{},$.availableImages),Ge=de.evaluate({zoom:N},C,{},$.availableImages),He=de.evaluate({zoom:N+1},C,{},$.availableImages);Ge=Ge&&Ge.name?Ge.name:Ge,He=He&&He.name?He.name:He,lt[Le=Le&&Le.name?Le.name:Le]=!0,lt[Ge]=!0,lt[He]=!0,C.patterns[Jt.id]={min:Le,mid:Ge,max:He}}}return C}Ac.deviation=function(d,p,C,N){var $=p&&p.length,lt=Math.abs(To(d,0,$?p[0]*C:d.length,C));if($)for(var Tt=0,Bt=p.length;Tt<Bt;Tt++)lt-=Math.abs(To(d,p[Tt]*C,Tt<Bt-1?p[Tt+1]*C:d.length,C));var Jt=0;for(Tt=0;Tt<N.length;Tt+=3){var de=N[Tt]*C,Le=N[Tt+1]*C,Ge=N[Tt+2]*C;Jt+=Math.abs((d[de]-d[Ge])*(d[Le+1]-d[de+1])-(d[de]-d[Le])*(d[Ge+1]-d[de+1]))}return lt===0&&Jt===0?0:Math.abs((Jt-lt)/lt)},Ac.flatten=function(d){for(var p=d[0][0].length,C={vertices:[],holes:[],dimensions:p},N=0,$=0;$<d.length;$++){for(var lt=0;lt<d[$].length;lt++)for(var Tt=0;Tt<p;Tt++)C.vertices.push(d[$][lt][Tt]);$>0&&C.holes.push(N+=d[$-1].length)}return C},Wc.default=$f;var Us=function(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(C){return C.id}),this.index=p.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new mr,this.indexArray=new ka,this.indexArray2=new Ts,this.programConfigurations=new Ca(p.layers,p.zoom),this.segments=new Zt,this.segments2=new Zt,this.stateDependentLayerIds=this.layers.filter(function(C){return C.isStateDependent()}).map(function(C){return C.id})};Us.prototype.populate=function(d,p,C){this.hasPattern=Qo("fill",this.layers,p);for(var N=this.layers[0].layout.get("fill-sort-key"),$=[],lt=0,Tt=d;lt<Tt.length;lt+=1){var Bt=Tt[lt],Jt=Bt.feature,de=Bt.id,Le=Bt.index,Ge=Bt.sourceLayerIndex,He=this.layers[0]._featureFilter.needGeometry,ln=Qs(Jt,He);if(this.layers[0]._featureFilter.filter(new xr(this.zoom),ln,C)){var In=N?N.evaluate(ln,{},C,p.availableImages):void 0,Cn={id:de,properties:Jt.properties,type:Jt.type,sourceLayerIndex:Ge,index:Le,geometry:He?ln.geometry:fs(Jt),patterns:{},sortKey:In};$.push(Cn)}}N&&$.sort(function(Ni,Fi){return Ni.sortKey-Fi.sortKey});for(var Zn=0,Kn=$;Zn<Kn.length;Zn+=1){var _r=Kn[Zn],jr=_r.geometry,kr=_r.index,vi=_r.sourceLayerIndex;if(this.hasPattern){var oi=ms("fill",this.layers,_r,this.zoom,p);this.patternFeatures.push(oi)}else this.addFeature(_r,jr,kr,C,{});p.featureIndex.insert(d[kr].feature,jr,kr,vi,this.index)}},Us.prototype.update=function(d,p,C){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,p,this.stateDependentLayers,C)},Us.prototype.addFeatures=function(d,p,C){for(var N=0,$=this.patternFeatures;N<$.length;N+=1){var lt=$[N];this.addFeature(lt,lt.geometry,lt.index,p,C)}},Us.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Us.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Us.prototype.upload=function(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,gf),this.indexBuffer=d.createIndexBuffer(this.indexArray),this.indexBuffer2=d.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(d),this.uploaded=!0},Us.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Us.prototype.addFeature=function(d,p,C,N,$){for(var lt=0,Tt=gu(p,500);lt<Tt.length;lt+=1){for(var Bt=Tt[lt],Jt=0,de=0,Le=Bt;de<Le.length;de+=1)Jt+=Le[de].length;for(var Ge=this.segments.prepareSegment(Jt,this.layoutVertexArray,this.indexArray),He=Ge.vertexLength,ln=[],In=[],Cn=0,Zn=Bt;Cn<Zn.length;Cn+=1){var Kn=Zn[Cn];if(Kn.length!==0){Kn!==Bt[0]&&In.push(ln.length/2);var _r=this.segments2.prepareSegment(Kn.length,this.layoutVertexArray,this.indexArray2),jr=_r.vertexLength;this.layoutVertexArray.emplaceBack(Kn[0].x,Kn[0].y),this.indexArray2.emplaceBack(jr+Kn.length-1,jr),ln.push(Kn[0].x),ln.push(Kn[0].y);for(var kr=1;kr<Kn.length;kr++)this.layoutVertexArray.emplaceBack(Kn[kr].x,Kn[kr].y),this.indexArray2.emplaceBack(jr+kr-1,jr+kr),ln.push(Kn[kr].x),ln.push(Kn[kr].y);_r.vertexLength+=Kn.length,_r.primitiveLength+=Kn.length}}for(var vi=Wc(ln,In),oi=0;oi<vi.length;oi+=3)this.indexArray.emplaceBack(He+vi[oi],He+vi[oi+1],He+vi[oi+2]);Ge.vertexLength+=Jt,Ge.primitiveLength+=vi.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,C,$,N)},Yi("FillBucket",Us,{omit:["layers","patternFeatures"]});var Tu=new vn({"fill-sort-key":new Fe(ue.layout_fill["fill-sort-key"])}),pl={paint:new vn({"fill-antialias":new fe(ue.paint_fill["fill-antialias"]),"fill-opacity":new Fe(ue.paint_fill["fill-opacity"]),"fill-color":new Fe(ue.paint_fill["fill-color"]),"fill-outline-color":new Fe(ue.paint_fill["fill-outline-color"]),"fill-translate":new fe(ue.paint_fill["fill-translate"]),"fill-translate-anchor":new fe(ue.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ze(ue.paint_fill["fill-pattern"])}),layout:Tu},Gl=function(d){function p(C){d.call(this,C,pl)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.recalculate=function(C,N){d.prototype.recalculate.call(this,C,N);var $=this.paint._values["fill-outline-color"];$.value.kind==="constant"&&$.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},p.prototype.createBucket=function(C){return new Us(C)},p.prototype.queryRadius=function(){return au(this.paint.get("fill-translate"))},p.prototype.queryIntersectsFeature=function(C,N,$,lt,Tt,Bt,Jt){return Il(tc(C,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Bt.angle,Jt),lt)},p.prototype.isTileClipped=function(){return!0},p}(fn),Lc=Gn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,jc=Bc;function Bc(d,p,C,N,$){this.properties={},this.extent=C,this.type=0,this._pbf=d,this._geometry=-1,this._keys=N,this._values=$,d.readFields(If,this,p)}function If(d,p,C){d==1?p.id=C.readVarint():d==2?function(N,$){for(var lt=N.readVarint()+N.pos;N.pos<lt;){var Tt=$._keys[N.readVarint()],Bt=$._values[N.readVarint()];$.properties[Tt]=Bt}}(C,p):d==3?p.type=C.readVarint():d==4&&(p._geometry=C.pos)}function Lf(d){for(var p,C,N=0,$=0,lt=d.length,Tt=lt-1;$<lt;Tt=$++)N+=((C=d[Tt]).x-(p=d[$]).x)*(p.y+C.y);return N}Bc.types=["Unknown","Point","LineString","Polygon"],Bc.prototype.loadGeometry=function(){var d=this._pbf;d.pos=this._geometry;for(var p,C=d.readVarint()+d.pos,N=1,$=0,lt=0,Tt=0,Bt=[];d.pos<C;){if($<=0){var Jt=d.readVarint();N=7&Jt,$=Jt>>3}if($--,N===1||N===2)lt+=d.readSVarint(),Tt+=d.readSVarint(),N===1&&(p&&Bt.push(p),p=[]),p.push(new r(lt,Tt));else{if(N!==7)throw new Error("unknown command "+N);p&&p.push(p[0].clone())}}return p&&Bt.push(p),Bt},Bc.prototype.bbox=function(){var d=this._pbf;d.pos=this._geometry;for(var p=d.readVarint()+d.pos,C=1,N=0,$=0,lt=0,Tt=1/0,Bt=-1/0,Jt=1/0,de=-1/0;d.pos<p;){if(N<=0){var Le=d.readVarint();C=7&Le,N=Le>>3}if(N--,C===1||C===2)($+=d.readSVarint())<Tt&&(Tt=$),$>Bt&&(Bt=$),(lt+=d.readSVarint())<Jt&&(Jt=lt),lt>de&&(de=lt);else if(C!==7)throw new Error("unknown command "+C)}return[Tt,Jt,Bt,de]},Bc.prototype.toGeoJSON=function(d,p,C){var N,$,lt=this.extent*Math.pow(2,C),Tt=this.extent*d,Bt=this.extent*p,Jt=this.loadGeometry(),de=Bc.types[this.type];function Le(ln){for(var In=0;In<ln.length;In++){var Cn=ln[In];ln[In]=[360*(Cn.x+Tt)/lt-180,360/Math.PI*Math.atan(Math.exp((180-360*(Cn.y+Bt)/lt)*Math.PI/180))-90]}}switch(this.type){case 1:var Ge=[];for(N=0;N<Jt.length;N++)Ge[N]=Jt[N][0];Le(Jt=Ge);break;case 2:for(N=0;N<Jt.length;N++)Le(Jt[N]);break;case 3:for(Jt=function(ln){var In=ln.length;if(In<=1)return[ln];for(var Cn,Zn,Kn=[],_r=0;_r<In;_r++){var jr=Lf(ln[_r]);jr!==0&&(Zn===void 0&&(Zn=jr<0),Zn===jr<0?(Cn&&Kn.push(Cn),Cn=[ln[_r]]):Cn.push(ln[_r]))}return Cn&&Kn.push(Cn),Kn}(Jt),N=0;N<Jt.length;N++)for($=0;$<Jt[N].length;$++)Le(Jt[N][$])}Jt.length===1?Jt=Jt[0]:de="Multi"+de;var He={type:"Feature",geometry:{type:de,coordinates:Jt},properties:this.properties};return"id"in this&&(He.id=this.id),He};var Wf=Rf;function Rf(d,p){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(Fh,this,p),this.length=this._features.length}function Fh(d,p,C){d===15?p.version=C.readVarint():d===1?p.name=C.readString():d===5?p.extent=C.readVarint():d===2?p._features.push(C.pos):d===3?p._keys.push(C.readString()):d===4&&p._values.push(function(N){for(var $=null,lt=N.readVarint()+N.pos;N.pos<lt;){var Tt=N.readVarint()>>3;$=Tt===1?N.readString():Tt===2?N.readFloat():Tt===3?N.readDouble():Tt===4?N.readVarint64():Tt===5?N.readVarint():Tt===6?N.readSVarint():Tt===7?N.readBoolean():null}return $}(C))}function Rc(d,p,C){if(d===3){var N=new Wf(C,C.readVarint()+C.pos);N.length&&(p[N.name]=N)}}Rf.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var p=this._pbf.readVarint()+this._pbf.pos;return new jc(this._pbf,p,this.extent,this._keys,this._values)};var mf={VectorTile:function(p,C){this.layers=p.readFields(Rc,{},C)},VectorTileFeature:jc,VectorTileLayer:Wf},nf=mf.VectorTileFeature.types,Hc=Math.pow(2,13);function sf(d,p,C,N,$,lt,Tt,Bt){d.emplaceBack(p,C,2*Math.floor(N*Hc)+Tt,$*Hc*2,lt*Hc*2,Math.round(Bt))}var cu=function(p){this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(C){return C.id}),this.index=p.index,this.hasPattern=!1,this.layoutVertexArray=new gi,this.indexArray=new ka,this.programConfigurations=new Ca(p.layers,p.zoom),this.segments=new Zt,this.stateDependentLayerIds=this.layers.filter(function(C){return C.isStateDependent()}).map(function(C){return C.id})};function Pf(d,p){return d.x===p.x&&(d.x<0||d.x>8192)||d.y===p.y&&(d.y<0||d.y>8192)}cu.prototype.populate=function(d,p,C){this.features=[],this.hasPattern=Qo("fill-extrusion",this.layers,p);for(var N=0,$=d;N<$.length;N+=1){var lt=$[N],Tt=lt.feature,Bt=lt.id,Jt=lt.index,de=lt.sourceLayerIndex,Le=this.layers[0]._featureFilter.needGeometry,Ge=Qs(Tt,Le);if(this.layers[0]._featureFilter.filter(new xr(this.zoom),Ge,C)){var He={id:Bt,sourceLayerIndex:de,index:Jt,geometry:Le?Ge.geometry:fs(Tt),properties:Tt.properties,type:Tt.type,patterns:{}};this.hasPattern?this.features.push(ms("fill-extrusion",this.layers,He,this.zoom,p)):this.addFeature(He,He.geometry,Jt,C,{}),p.featureIndex.insert(Tt,He.geometry,Jt,de,this.index,!0)}}},cu.prototype.addFeatures=function(d,p,C){for(var N=0,$=this.features;N<$.length;N+=1){var lt=$[N];this.addFeature(lt,lt.geometry,lt.index,p,C)}},cu.prototype.update=function(d,p,C){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,p,this.stateDependentLayers,C)},cu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},cu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},cu.prototype.upload=function(d){this.uploaded||(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Lc),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0},cu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},cu.prototype.addFeature=function(d,p,C,N,$){for(var lt=0,Tt=gu(p,500);lt<Tt.length;lt+=1){for(var Bt=Tt[lt],Jt=0,de=0,Le=Bt;de<Le.length;de+=1)Jt+=Le[de].length;for(var Ge=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),He=0,ln=Bt;He<ln.length;He+=1){var In=ln[He];if(In.length!==0&&!((rs=In).every(function(Fa){return Fa.x<0})||rs.every(function(Fa){return Fa.x>8192})||rs.every(function(Fa){return Fa.y<0})||rs.every(function(Fa){return Fa.y>8192})))for(var Cn=0,Zn=0;Zn<In.length;Zn++){var Kn=In[Zn];if(Zn>=1){var _r=In[Zn-1];if(!Pf(Kn,_r)){Ge.vertexLength+4>Zt.MAX_VERTEX_ARRAY_LENGTH&&(Ge=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var jr=Kn.sub(_r)._perp()._unit(),kr=_r.dist(Kn);Cn+kr>32768&&(Cn=0),sf(this.layoutVertexArray,Kn.x,Kn.y,jr.x,jr.y,0,0,Cn),sf(this.layoutVertexArray,Kn.x,Kn.y,jr.x,jr.y,0,1,Cn),sf(this.layoutVertexArray,_r.x,_r.y,jr.x,jr.y,0,0,Cn+=kr),sf(this.layoutVertexArray,_r.x,_r.y,jr.x,jr.y,0,1,Cn);var vi=Ge.vertexLength;this.indexArray.emplaceBack(vi,vi+2,vi+1),this.indexArray.emplaceBack(vi+1,vi+2,vi+3),Ge.vertexLength+=4,Ge.primitiveLength+=2}}}}if(Ge.vertexLength+Jt>Zt.MAX_VERTEX_ARRAY_LENGTH&&(Ge=this.segments.prepareSegment(Jt,this.layoutVertexArray,this.indexArray)),nf[d.type]==="Polygon"){for(var oi=[],Ni=[],Fi=Ge.vertexLength,oa=0,ga=Bt;oa<ga.length;oa+=1){var ua=ga[oa];if(ua.length!==0){ua!==Bt[0]&&Ni.push(oi.length/2);for(var ta=0;ta<ua.length;ta++){var ro=ua[ta];sf(this.layoutVertexArray,ro.x,ro.y,0,0,1,1,0),oi.push(ro.x),oi.push(ro.y)}}}for(var wa=Wc(oi,Ni),ma=0;ma<wa.length;ma+=3)this.indexArray.emplaceBack(Fi+wa[ma],Fi+wa[ma+2],Fi+wa[ma+1]);Ge.primitiveLength+=wa.length/3,Ge.vertexLength+=Jt}}var rs;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,C,$,N)},Yi("FillExtrusionBucket",cu,{omit:["layers","features"]});var uf={paint:new vn({"fill-extrusion-opacity":new fe(ue["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Fe(ue["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new fe(ue["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new fe(ue["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ze(ue["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Fe(ue["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Fe(ue["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new fe(ue["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Dc=function(d){function p(C){d.call(this,C,uf)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.createBucket=function(C){return new cu(C)},p.prototype.queryRadius=function(){return au(this.paint.get("fill-extrusion-translate"))},p.prototype.is3D=function(){return!0},p.prototype.queryIntersectsFeature=function(C,N,$,lt,Tt,Bt,Jt,de){var Le=tc(C,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Bt.angle,Jt),Ge=this.paint.get("fill-extrusion-height").evaluate(N,$),He=this.paint.get("fill-extrusion-base").evaluate(N,$),ln=function(Cn,Zn,Kn,_r){for(var jr=[],kr=0,vi=Cn;kr<vi.length;kr+=1){var oi=vi[kr],Ni=[oi.x,oi.y,0,1];kl(Ni,Ni,Zn),jr.push(new r(Ni[0]/Ni[3],Ni[1]/Ni[3]))}return jr}(Le,de),In=function(Cn,Zn,Kn,_r){for(var jr=[],kr=[],vi=_r[8]*Zn,oi=_r[9]*Zn,Ni=_r[10]*Zn,Fi=_r[11]*Zn,oa=_r[8]*Kn,ga=_r[9]*Kn,ua=_r[10]*Kn,ta=_r[11]*Kn,ro=0,wa=Cn;ro<wa.length;ro+=1){for(var ma=[],rs=[],Fa=0,Ws=wa[ro];Fa<Ws.length;Fa+=1){var Ya=Ws[Fa],is=Ya.x,Ru=Ya.y,fu=_r[0]*is+_r[4]*Ru+_r[12],rl=_r[1]*is+_r[5]*Ru+_r[13],il=_r[2]*is+_r[6]*Ru+_r[14],Bl=_r[3]*is+_r[7]*Ru+_r[15],Sc=il+Ni,$l=Bl+Fi,Cc=fu+oa,hc=rl+ga,Oc=il+ua,ac=Bl+ta,Nl=new r((fu+vi)/$l,(rl+oi)/$l);Nl.z=Sc/$l,ma.push(Nl);var oc=new r(Cc/ac,hc/ac);oc.z=Oc/ac,rs.push(oc)}jr.push(ma),kr.push(rs)}return[jr,kr]}(lt,He,Ge,de);return function(Cn,Zn,Kn){var _r=1/0;Il(Kn,Zn)&&(_r=Ml(Kn,Zn[0]));for(var jr=0;jr<Zn.length;jr++)for(var kr=Zn[jr],vi=Cn[jr],oi=0;oi<kr.length-1;oi++){var Ni=kr[oi],Fi=[Ni,kr[oi+1],vi[oi+1],vi[oi],Ni];uc(Kn,Fi)&&(_r=Math.min(_r,Ml(Kn,Fi)))}return _r!==1/0&&_r}(In[0],In[1],ln)},p}(fn);function Nc(d,p){return d.x*p.x+d.y*p.y}function Ml(d,p){if(d.length===1){for(var C,N=0,$=p[N++];!C||$.equals(C);)if(!(C=p[N++]))return 1/0;for(;N<p.length;N++){var lt=p[N],Tt=d[0],Bt=C.sub($),Jt=lt.sub($),de=Tt.sub($),Le=Nc(Bt,Bt),Ge=Nc(Bt,Jt),He=Nc(Jt,Jt),ln=Nc(de,Bt),In=Nc(de,Jt),Cn=Le*He-Ge*Ge,Zn=(He*ln-Ge*In)/Cn,Kn=(Le*In-Ge*ln)/Cn,_r=$.z*(1-Zn-Kn)+C.z*Zn+lt.z*Kn;if(isFinite(_r))return _r}return 1/0}for(var jr=1/0,kr=0,vi=p;kr<vi.length;kr+=1)jr=Math.min(jr,vi[kr].z);return jr}var Fc=Gn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ff=Gn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Tf=mf.VectorTileFeature.types,Hf=Math.cos(Math.PI/180*37.5),th=Math.pow(2,14)/.5,pc=function(p){var C=this;this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=p.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(N){C.gradients[N.id]={}}),this.layoutVertexArray=new Br,this.layoutVertexArray2=new ai,this.indexArray=new ka,this.programConfigurations=new Ca(p.layers,p.zoom),this.segments=new Zt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};pc.prototype.populate=function(d,p,C){this.hasPattern=Qo("line",this.layers,p);for(var N=this.layers[0].layout.get("line-sort-key"),$=[],lt=0,Tt=d;lt<Tt.length;lt+=1){var Bt=Tt[lt],Jt=Bt.feature,de=Bt.id,Le=Bt.index,Ge=Bt.sourceLayerIndex,He=this.layers[0]._featureFilter.needGeometry,ln=Qs(Jt,He);if(this.layers[0]._featureFilter.filter(new xr(this.zoom),ln,C)){var In=N?N.evaluate(ln,{},C):void 0,Cn={id:de,properties:Jt.properties,type:Jt.type,sourceLayerIndex:Ge,index:Le,geometry:He?ln.geometry:fs(Jt),patterns:{},sortKey:In};$.push(Cn)}}N&&$.sort(function(Ni,Fi){return Ni.sortKey-Fi.sortKey});for(var Zn=0,Kn=$;Zn<Kn.length;Zn+=1){var _r=Kn[Zn],jr=_r.geometry,kr=_r.index,vi=_r.sourceLayerIndex;if(this.hasPattern){var oi=ms("line",this.layers,_r,this.zoom,p);this.patternFeatures.push(oi)}else this.addFeature(_r,jr,kr,C,{});p.featureIndex.insert(d[kr].feature,jr,kr,vi,this.index)}},pc.prototype.update=function(d,p,C){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(d,p,this.stateDependentLayers,C)},pc.prototype.addFeatures=function(d,p,C){for(var N=0,$=this.patternFeatures;N<$.length;N+=1){var lt=$[N];this.addFeature(lt,lt.geometry,lt.index,p,C)}},pc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},pc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},pc.prototype.upload=function(d){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=d.createVertexBuffer(this.layoutVertexArray2,ff)),this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,Fc),this.indexBuffer=d.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(d),this.uploaded=!0},pc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},pc.prototype.lineFeatureClips=function(d){if(d.properties&&d.properties.hasOwnProperty("mapbox_clip_start")&&d.properties.hasOwnProperty("mapbox_clip_end"))return{start:+d.properties.mapbox_clip_start,end:+d.properties.mapbox_clip_end}},pc.prototype.addFeature=function(d,p,C,N,$){var lt=this.layers[0].layout,Tt=lt.get("line-join").evaluate(d,{}),Bt=lt.get("line-cap"),Jt=lt.get("line-miter-limit"),de=lt.get("line-round-limit");this.lineClips=this.lineFeatureClips(d);for(var Le=0,Ge=p;Le<Ge.length;Le+=1)this.addLine(Ge[Le],d,Tt,Bt,Jt,de);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,d,C,$,N)},pc.prototype.addLine=function(d,p,C,N,$,lt){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var Tt=0;Tt<d.length-1;Tt++)this.totalDistance+=d[Tt].dist(d[Tt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var Bt=Tf[p.type]==="Polygon",Jt=d.length;Jt>=2&&d[Jt-1].equals(d[Jt-2]);)Jt--;for(var de=0;de<Jt-1&&d[de].equals(d[de+1]);)de++;if(!(Jt<(Bt?3:2))){C==="bevel"&&($=1.05);var Le,Ge=this.overscaling<=16?122880/(512*this.overscaling):0,He=this.segments.prepareSegment(10*Jt,this.layoutVertexArray,this.indexArray),ln=void 0,In=void 0,Cn=void 0,Zn=void 0;this.e1=this.e2=-1,Bt&&(Zn=d[de].sub(Le=d[Jt-2])._unit()._perp());for(var Kn=de;Kn<Jt;Kn++)if(!(In=Kn===Jt-1?Bt?d[de+1]:void 0:d[Kn+1])||!d[Kn].equals(In)){Zn&&(Cn=Zn),Le&&(ln=Le),Le=d[Kn],Zn=In?In.sub(Le)._unit()._perp():Cn;var _r=(Cn=Cn||Zn).add(Zn);_r.x===0&&_r.y===0||_r._unit();var jr=Cn.x*Zn.x+Cn.y*Zn.y,kr=_r.x*Zn.x+_r.y*Zn.y,vi=kr!==0?1/kr:1/0,oi=2*Math.sqrt(2-2*kr),Ni=kr<Hf&&ln&&In,Fi=Cn.x*Zn.y-Cn.y*Zn.x>0;if(Ni&&Kn>de){var oa=Le.dist(ln);if(oa>2*Ge){var ga=Le.sub(Le.sub(ln)._mult(Ge/oa)._round());this.updateDistance(ln,ga),this.addCurrentVertex(ga,Cn,0,0,He),ln=ga}}var ua=ln&&In,ta=ua?C:Bt?"butt":N;if(ua&&ta==="round"&&(vi<lt?ta="miter":vi<=2&&(ta="fakeround")),ta==="miter"&&vi>$&&(ta="bevel"),ta==="bevel"&&(vi>2&&(ta="flipbevel"),vi<$&&(ta="miter")),ln&&this.updateDistance(ln,Le),ta==="miter")_r._mult(vi),this.addCurrentVertex(Le,_r,0,0,He);else if(ta==="flipbevel"){if(vi>100)_r=Zn.mult(-1);else{var ro=vi*Cn.add(Zn).mag()/Cn.sub(Zn).mag();_r._perp()._mult(ro*(Fi?-1:1))}this.addCurrentVertex(Le,_r,0,0,He),this.addCurrentVertex(Le,_r.mult(-1),0,0,He)}else if(ta==="bevel"||ta==="fakeround"){var wa=-Math.sqrt(vi*vi-1),ma=Fi?wa:0,rs=Fi?0:wa;if(ln&&this.addCurrentVertex(Le,Cn,ma,rs,He),ta==="fakeround")for(var Fa=Math.round(180*oi/Math.PI/20),Ws=1;Ws<Fa;Ws++){var Ya=Ws/Fa;if(Ya!==.5){var is=Ya-.5;Ya+=Ya*is*(Ya-1)*((1.0904+jr*(jr*(3.55645-1.43519*jr)-3.2452))*is*is+(.848013+jr*(.215638*jr-1.06021)))}var Ru=Zn.sub(Cn)._mult(Ya)._add(Cn)._unit()._mult(Fi?-1:1);this.addHalfVertex(Le,Ru.x,Ru.y,!1,Fi,0,He)}In&&this.addCurrentVertex(Le,Zn,-ma,-rs,He)}else if(ta==="butt")this.addCurrentVertex(Le,_r,0,0,He);else if(ta==="square"){var fu=ln?1:-1;this.addCurrentVertex(Le,_r,fu,fu,He)}else ta==="round"&&(ln&&(this.addCurrentVertex(Le,Cn,0,0,He),this.addCurrentVertex(Le,Cn,1,1,He,!0)),In&&(this.addCurrentVertex(Le,Zn,-1,-1,He,!0),this.addCurrentVertex(Le,Zn,0,0,He)));if(Ni&&Kn<Jt-1){var rl=Le.dist(In);if(rl>2*Ge){var il=Le.add(In.sub(Le)._mult(Ge/rl)._round());this.updateDistance(Le,il),this.addCurrentVertex(il,Zn,0,0,He),Le=il}}}}},pc.prototype.addCurrentVertex=function(d,p,C,N,$,lt){lt===void 0&&(lt=!1);var Tt=p.y*N-p.x,Bt=-p.y-p.x*N;this.addHalfVertex(d,p.x+p.y*C,p.y-p.x*C,lt,!1,C,$),this.addHalfVertex(d,Tt,Bt,lt,!0,-N,$),this.distance>th/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(d,p,C,N,$,lt))},pc.prototype.addHalfVertex=function(d,p,C,N,$,lt,Tt){var Bt=.5*(this.lineClips?this.scaledDistance*(th-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((d.x<<1)+(N?1:0),(d.y<<1)+($?1:0),Math.round(63*p)+128,Math.round(63*C)+128,1+(lt===0?0:lt<0?-1:1)|(63&Bt)<<2,Bt>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var Jt=Tt.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Jt),Tt.primitiveLength++),$?this.e2=Jt:this.e1=Jt},pc.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},pc.prototype.updateDistance=function(d,p){this.distance+=d.dist(p),this.updateScaledDistance()},Yi("LineBucket",pc,{omit:["layers","patternFeatures"]});var hf=new vn({"line-cap":new fe(ue.layout_line["line-cap"]),"line-join":new Fe(ue.layout_line["line-join"]),"line-miter-limit":new fe(ue.layout_line["line-miter-limit"]),"line-round-limit":new fe(ue.layout_line["line-round-limit"]),"line-sort-key":new Fe(ue.layout_line["line-sort-key"])}),eh={paint:new vn({"line-opacity":new Fe(ue.paint_line["line-opacity"]),"line-color":new Fe(ue.paint_line["line-color"]),"line-translate":new fe(ue.paint_line["line-translate"]),"line-translate-anchor":new fe(ue.paint_line["line-translate-anchor"]),"line-width":new Fe(ue.paint_line["line-width"]),"line-gap-width":new Fe(ue.paint_line["line-gap-width"]),"line-offset":new Fe(ue.paint_line["line-offset"]),"line-blur":new Fe(ue.paint_line["line-blur"]),"line-dasharray":new nn(ue.paint_line["line-dasharray"]),"line-pattern":new Ze(ue.paint_line["line-pattern"]),"line-gradient":new Je(ue.paint_line["line-gradient"])}),layout:hf},jt=new(function(d){function p(){d.apply(this,arguments)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.possiblyEvaluate=function(C,N){return N=new xr(Math.floor(N.zoom),{now:N.now,fadeDuration:N.fadeDuration,zoomHistory:N.zoomHistory,transition:N.transition}),d.prototype.possiblyEvaluate.call(this,C,N)},p.prototype.evaluate=function(C,N,$,lt){return N=v({},N,{zoom:Math.floor(N.zoom)}),d.prototype.evaluate.call(this,C,N,$,lt)},p}(Fe))(eh.paint.properties["line-width"].specification);jt.useIntegerZoom=!0;var yt=function(d){function p(C){d.call(this,C,eh),this.gradientVersion=0}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype._handleSpecialPaintPropertyUpdate=function(C){C==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Co,this.gradientVersion=(this.gradientVersion+1)%i)},p.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},p.prototype.recalculate=function(C,N){d.prototype.recalculate.call(this,C,N),this.paint._values["line-floorwidth"]=jt.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,C)},p.prototype.createBucket=function(C){return new pc(C)},p.prototype.queryRadius=function(C){var N=C,$=K(bc("line-width",this,N),bc("line-gap-width",this,N)),lt=bc("line-offset",this,N);return $/2+Math.abs(lt)+au(this.paint.get("line-translate"))},p.prototype.queryIntersectsFeature=function(C,N,$,lt,Tt,Bt,Jt){var de=tc(C,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Bt.angle,Jt),Le=Jt/2*K(this.paint.get("line-width").evaluate(N,$),this.paint.get("line-gap-width").evaluate(N,$)),Ge=this.paint.get("line-offset").evaluate(N,$);return Ge&&(lt=function(He,ln){for(var In=[],Cn=new r(0,0),Zn=0;Zn<He.length;Zn++){for(var Kn=He[Zn],_r=[],jr=0;jr<Kn.length;jr++){var kr=Kn[jr],vi=Kn[jr+1],oi=jr===0?Cn:kr.sub(Kn[jr-1])._unit()._perp(),Ni=jr===Kn.length-1?Cn:vi.sub(kr)._unit()._perp(),Fi=oi._add(Ni)._unit();Fi._mult(1/(Fi.x*Ni.x+Fi.y*Ni.y)),_r.push(Fi._mult(ln)._add(kr))}In.push(_r)}return In}(lt,Ge*Jt)),function(He,ln,In){for(var Cn=0;Cn<ln.length;Cn++){var Zn=ln[Cn];if(He.length>=3){for(var Kn=0;Kn<Zn.length;Kn++)if(vc(He,Zn[Kn]))return!0}if(ql(He,Zn,In))return!0}return!1}(de,lt,Le)},p.prototype.isTileClipped=function(){return!0},p}(fn);function K(d,p){return p>0?p+2*d:d}var pt=Gn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),It=Gn([{name:"a_projected_pos",components:3,type:"Float32"}],4),ie=(Gn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Gn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),ze=(Gn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Gn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),yn=Gn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function pn(d,p,C){return d.sections.forEach(function(N){N.text=function($,lt,Tt){var Bt=lt.layout.get("text-transform").evaluate(Tt,{});return Bt==="uppercase"?$=$.toLocaleUpperCase():Bt==="lowercase"&&($=$.toLocaleLowerCase()),ci.applyArabicShaping&&($=ci.applyArabicShaping($)),$}(N.text,p,C)}),d}Gn([{name:"triangle",components:3,type:"Uint16"}]),Gn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Gn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Gn([{type:"Float32",name:"offsetX"}]),Gn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Tn={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},Nr=function(p,C,N,$,lt){var Tt,Bt,Jt=8*lt-$-1,de=(1<<Jt)-1,Le=de>>1,Ge=-7,He=N?lt-1:0,ln=N?-1:1,In=p[C+He];for(He+=ln,Tt=In&(1<<-Ge)-1,In>>=-Ge,Ge+=Jt;Ge>0;Tt=256*Tt+p[C+He],He+=ln,Ge-=8);for(Bt=Tt&(1<<-Ge)-1,Tt>>=-Ge,Ge+=$;Ge>0;Bt=256*Bt+p[C+He],He+=ln,Ge-=8);if(Tt===0)Tt=1-Le;else{if(Tt===de)return Bt?NaN:1/0*(In?-1:1);Bt+=Math.pow(2,$),Tt-=Le}return(In?-1:1)*Bt*Math.pow(2,Tt-$)},ce=function(p,C,N,$,lt,Tt){var Bt,Jt,de,Le=8*Tt-lt-1,Ge=(1<<Le)-1,He=Ge>>1,ln=lt===23?Math.pow(2,-24)-Math.pow(2,-77):0,In=$?0:Tt-1,Cn=$?1:-1,Zn=C<0||C===0&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(Jt=isNaN(C)?1:0,Bt=Ge):(Bt=Math.floor(Math.log(C)/Math.LN2),C*(de=Math.pow(2,-Bt))<1&&(Bt--,de*=2),(C+=Bt+He>=1?ln/de:ln*Math.pow(2,1-He))*de>=2&&(Bt++,de/=2),Bt+He>=Ge?(Jt=0,Bt=Ge):Bt+He>=1?(Jt=(C*de-1)*Math.pow(2,lt),Bt+=He):(Jt=C*Math.pow(2,He-1)*Math.pow(2,lt),Bt=0));lt>=8;p[N+In]=255&Jt,In+=Cn,Jt/=256,lt-=8);for(Bt=Bt<<lt|Jt,Le+=lt;Le>0;p[N+In]=255&Bt,In+=Cn,Bt/=256,Le-=8);p[N+In-Cn]|=128*Zn},be=Xe;function Xe(d){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(d)?d:new Uint8Array(d||0),this.pos=0,this.type=0,this.length=this.buf.length}Xe.Varint=0,Xe.Fixed64=1,Xe.Bytes=2,Xe.Fixed32=5;var zn=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function lr(d){return d.type===Xe.Bytes?d.readVarint()+d.pos:d.pos+1}function vr(d,p,C){return C?4294967296*p+(d>>>0):4294967296*(p>>>0)+(d>>>0)}function Qn(d,p,C){var N=p<=16383?1:p<=2097151?2:p<=268435455?3:Math.floor(Math.log(p)/(7*Math.LN2));C.realloc(N);for(var $=C.pos-1;$>=d;$--)C.buf[$+N]=C.buf[$]}function Jr(d,p){for(var C=0;C<d.length;C++)p.writeVarint(d[C])}function $r(d,p){for(var C=0;C<d.length;C++)p.writeSVarint(d[C])}function ri(d,p){for(var C=0;C<d.length;C++)p.writeFloat(d[C])}function ui(d,p){for(var C=0;C<d.length;C++)p.writeDouble(d[C])}function xi(d,p){for(var C=0;C<d.length;C++)p.writeBoolean(d[C])}function Ti(d,p){for(var C=0;C<d.length;C++)p.writeFixed32(d[C])}function pi(d,p){for(var C=0;C<d.length;C++)p.writeSFixed32(d[C])}function hi(d,p){for(var C=0;C<d.length;C++)p.writeFixed64(d[C])}function Cr(d,p){for(var C=0;C<d.length;C++)p.writeSFixed64(d[C])}function Lr(d,p){return(d[p]|d[p+1]<<8|d[p+2]<<16)+16777216*d[p+3]}function bi(d,p,C){d[C]=p,d[C+1]=p>>>8,d[C+2]=p>>>16,d[C+3]=p>>>24}function ki(d,p){return(d[p]|d[p+1]<<8|d[p+2]<<16)+(d[p+3]<<24)}function qr(d,p,C){d===1&&C.readMessage(da,p)}function da(d,p,C){if(d===3){var N=C.readMessage(Li,{}),$=N.width,lt=N.height,Tt=N.left,Bt=N.top,Jt=N.advance;p.push({id:N.id,bitmap:new Kl({width:$+6,height:lt+6},N.bitmap),metrics:{width:$,height:lt,left:Tt,top:Bt,advance:Jt}})}}function Li(d,p,C){d===1?p.id=C.readVarint():d===2?p.bitmap=C.readBytes():d===3?p.width=C.readVarint():d===4?p.height=C.readVarint():d===5?p.left=C.readSVarint():d===6?p.top=C.readSVarint():d===7&&(p.advance=C.readVarint())}function mi(d){for(var p=0,C=0,N=0,$=d;N<$.length;N+=1){var lt=$[N];p+=lt.w*lt.h,C=Math.max(C,lt.w)}d.sort(function(Cn,Zn){return Zn.h-Cn.h});for(var Tt=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(p/.95)),C),h:1/0}],Bt=0,Jt=0,de=0,Le=d;de<Le.length;de+=1)for(var Ge=Le[de],He=Tt.length-1;He>=0;He--){var ln=Tt[He];if(!(Ge.w>ln.w||Ge.h>ln.h)){if(Ge.x=ln.x,Ge.y=ln.y,Jt=Math.max(Jt,Ge.y+Ge.h),Bt=Math.max(Bt,Ge.x+Ge.w),Ge.w===ln.w&&Ge.h===ln.h){var In=Tt.pop();He<Tt.length&&(Tt[He]=In)}else Ge.h===ln.h?(ln.x+=Ge.w,ln.w-=Ge.w):Ge.w===ln.w?(ln.y+=Ge.h,ln.h-=Ge.h):(Tt.push({x:ln.x+Ge.w,y:ln.y,w:ln.w-Ge.w,h:Ge.h}),ln.y+=Ge.h,ln.h-=Ge.h);break}}return{w:Bt,h:Jt,fill:p/(Bt*Jt)||0}}Xe.prototype={destroy:function(){this.buf=null},readFields:function(p,C,N){for(N=N||this.length;this.pos<N;){var $=this.readVarint(),lt=$>>3,Tt=this.pos;this.type=7&$,p(lt,C,this),this.pos===Tt&&this.skip($)}return C},readMessage:function(p,C){return this.readFields(p,C,this.readVarint()+this.pos)},readFixed32:function(){var p=Lr(this.buf,this.pos);return this.pos+=4,p},readSFixed32:function(){var p=ki(this.buf,this.pos);return this.pos+=4,p},readFixed64:function(){var p=Lr(this.buf,this.pos)+4294967296*Lr(this.buf,this.pos+4);return this.pos+=8,p},readSFixed64:function(){var p=Lr(this.buf,this.pos)+4294967296*ki(this.buf,this.pos+4);return this.pos+=8,p},readFloat:function(){var p=Nr(this.buf,this.pos,!0,23,4);return this.pos+=4,p},readDouble:function(){var p=Nr(this.buf,this.pos,!0,52,8);return this.pos+=8,p},readVarint:function(p){var C,N,$=this.buf;return C=127&(N=$[this.pos++]),N<128?C:(C|=(127&(N=$[this.pos++]))<<7,N<128?C:(C|=(127&(N=$[this.pos++]))<<14,N<128?C:(C|=(127&(N=$[this.pos++]))<<21,N<128?C:function(lt,Tt,Bt){var Jt,de,Le=Bt.buf;if(Jt=(112&(de=Le[Bt.pos++]))>>4,de<128||(Jt|=(127&(de=Le[Bt.pos++]))<<3,de<128)||(Jt|=(127&(de=Le[Bt.pos++]))<<10,de<128)||(Jt|=(127&(de=Le[Bt.pos++]))<<17,de<128)||(Jt|=(127&(de=Le[Bt.pos++]))<<24,de<128)||(Jt|=(1&(de=Le[Bt.pos++]))<<31,de<128))return vr(lt,Jt,Tt);throw new Error("Expected varint not more than 10 bytes")}(C|=(15&(N=$[this.pos]))<<28,p,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var p=this.readVarint();return p%2==1?(p+1)/-2:p/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var p=this.readVarint()+this.pos,C=this.pos;return this.pos=p,p-C>=12&&zn?function(N,$,lt){return zn.decode(N.subarray($,lt))}(this.buf,C,p):function(N,$,lt){for(var Tt="",Bt=$;Bt<lt;){var Jt,de,Le,Ge=N[Bt],He=null,ln=Ge>239?4:Ge>223?3:Ge>191?2:1;if(Bt+ln>lt)break;ln===1?Ge<128&&(He=Ge):ln===2?(192&(Jt=N[Bt+1]))==128&&(He=(31&Ge)<<6|63&Jt)<=127&&(He=null):ln===3?(de=N[Bt+2],(192&(Jt=N[Bt+1]))==128&&(192&de)==128&&((He=(15&Ge)<<12|(63&Jt)<<6|63&de)<=2047||He>=55296&&He<=57343)&&(He=null)):ln===4&&(de=N[Bt+2],Le=N[Bt+3],(192&(Jt=N[Bt+1]))==128&&(192&de)==128&&(192&Le)==128&&((He=(15&Ge)<<18|(63&Jt)<<12|(63&de)<<6|63&Le)<=65535||He>=1114112)&&(He=null)),He===null?(He=65533,ln=1):He>65535&&(He-=65536,Tt+=String.fromCharCode(He>>>10&1023|55296),He=56320|1023&He),Tt+=String.fromCharCode(He),Bt+=ln}return Tt}(this.buf,C,p)},readBytes:function(){var p=this.readVarint()+this.pos,C=this.buf.subarray(this.pos,p);return this.pos=p,C},readPackedVarint:function(p,C){if(this.type!==Xe.Bytes)return p.push(this.readVarint(C));var N=lr(this);for(p=p||[];this.pos<N;)p.push(this.readVarint(C));return p},readPackedSVarint:function(p){if(this.type!==Xe.Bytes)return p.push(this.readSVarint());var C=lr(this);for(p=p||[];this.pos<C;)p.push(this.readSVarint());return p},readPackedBoolean:function(p){if(this.type!==Xe.Bytes)return p.push(this.readBoolean());var C=lr(this);for(p=p||[];this.pos<C;)p.push(this.readBoolean());return p},readPackedFloat:function(p){if(this.type!==Xe.Bytes)return p.push(this.readFloat());var C=lr(this);for(p=p||[];this.pos<C;)p.push(this.readFloat());return p},readPackedDouble:function(p){if(this.type!==Xe.Bytes)return p.push(this.readDouble());var C=lr(this);for(p=p||[];this.pos<C;)p.push(this.readDouble());return p},readPackedFixed32:function(p){if(this.type!==Xe.Bytes)return p.push(this.readFixed32());var C=lr(this);for(p=p||[];this.pos<C;)p.push(this.readFixed32());return p},readPackedSFixed32:function(p){if(this.type!==Xe.Bytes)return p.push(this.readSFixed32());var C=lr(this);for(p=p||[];this.pos<C;)p.push(this.readSFixed32());return p},readPackedFixed64:function(p){if(this.type!==Xe.Bytes)return p.push(this.readFixed64());var C=lr(this);for(p=p||[];this.pos<C;)p.push(this.readFixed64());return p},readPackedSFixed64:function(p){if(this.type!==Xe.Bytes)return p.push(this.readSFixed64());var C=lr(this);for(p=p||[];this.pos<C;)p.push(this.readSFixed64());return p},skip:function(p){var C=7&p;if(C===Xe.Varint)for(;this.buf[this.pos++]>127;);else if(C===Xe.Bytes)this.pos=this.readVarint()+this.pos;else if(C===Xe.Fixed32)this.pos+=4;else{if(C!==Xe.Fixed64)throw new Error("Unimplemented type: "+C);this.pos+=8}},writeTag:function(p,C){this.writeVarint(p<<3|C)},realloc:function(p){for(var C=this.length||16;C<this.pos+p;)C*=2;if(C!==this.length){var N=new Uint8Array(C);N.set(this.buf),this.buf=N,this.length=C}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(p){this.realloc(4),bi(this.buf,p,this.pos),this.pos+=4},writeSFixed32:function(p){this.realloc(4),bi(this.buf,p,this.pos),this.pos+=4},writeFixed64:function(p){this.realloc(8),bi(this.buf,-1&p,this.pos),bi(this.buf,Math.floor(p*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(p){this.realloc(8),bi(this.buf,-1&p,this.pos),bi(this.buf,Math.floor(p*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(p){(p=+p||0)>268435455||p<0?function(C,N){var $,lt;if(C>=0?($=C%4294967296|0,lt=C/4294967296|0):(lt=~(-C/4294967296),4294967295^($=~(-C%4294967296))?$=$+1|0:($=0,lt=lt+1|0)),C>=18446744073709552e3||C<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");N.realloc(10),function(Tt,Bt,Jt){Jt.buf[Jt.pos++]=127&Tt|128,Tt>>>=7,Jt.buf[Jt.pos++]=127&Tt|128,Tt>>>=7,Jt.buf[Jt.pos++]=127&Tt|128,Tt>>>=7,Jt.buf[Jt.pos++]=127&Tt|128,Jt.buf[Jt.pos]=127&(Tt>>>=7)}($,0,N),function(Tt,Bt){var Jt=(7&Tt)<<4;Bt.buf[Bt.pos++]|=Jt|((Tt>>>=3)?128:0),Tt&&(Bt.buf[Bt.pos++]=127&Tt|((Tt>>>=7)?128:0),Tt&&(Bt.buf[Bt.pos++]=127&Tt|((Tt>>>=7)?128:0),Tt&&(Bt.buf[Bt.pos++]=127&Tt|((Tt>>>=7)?128:0),Tt&&(Bt.buf[Bt.pos++]=127&Tt|((Tt>>>=7)?128:0),Tt&&(Bt.buf[Bt.pos++]=127&Tt)))))}(lt,N)}(p,this):(this.realloc(4),this.buf[this.pos++]=127&p|(p>127?128:0),p<=127||(this.buf[this.pos++]=127&(p>>>=7)|(p>127?128:0),p<=127||(this.buf[this.pos++]=127&(p>>>=7)|(p>127?128:0),p<=127||(this.buf[this.pos++]=p>>>7&127))))},writeSVarint:function(p){this.writeVarint(p<0?2*-p-1:2*p)},writeBoolean:function(p){this.writeVarint(Boolean(p))},writeString:function(p){p=String(p),this.realloc(4*p.length),this.pos++;var C=this.pos;this.pos=function($,lt,Tt){for(var Bt,Jt,de=0;de<lt.length;de++){if((Bt=lt.charCodeAt(de))>55295&&Bt<57344){if(!Jt){Bt>56319||de+1===lt.length?($[Tt++]=239,$[Tt++]=191,$[Tt++]=189):Jt=Bt;continue}if(Bt<56320){$[Tt++]=239,$[Tt++]=191,$[Tt++]=189,Jt=Bt;continue}Bt=Jt-55296<<10|Bt-56320|65536,Jt=null}else Jt&&($[Tt++]=239,$[Tt++]=191,$[Tt++]=189,Jt=null);Bt<128?$[Tt++]=Bt:(Bt<2048?$[Tt++]=Bt>>6|192:(Bt<65536?$[Tt++]=Bt>>12|224:($[Tt++]=Bt>>18|240,$[Tt++]=Bt>>12&63|128),$[Tt++]=Bt>>6&63|128),$[Tt++]=63&Bt|128)}return Tt}(this.buf,p,this.pos);var N=this.pos-C;N>=128&&Qn(C,N,this),this.pos=C-1,this.writeVarint(N),this.pos+=N},writeFloat:function(p){this.realloc(4),ce(this.buf,p,this.pos,!0,23,4),this.pos+=4},writeDouble:function(p){this.realloc(8),ce(this.buf,p,this.pos,!0,52,8),this.pos+=8},writeBytes:function(p){var C=p.length;this.writeVarint(C),this.realloc(C);for(var N=0;N<C;N++)this.buf[this.pos++]=p[N]},writeRawMessage:function(p,C){this.pos++;var N=this.pos;p(C,this);var $=this.pos-N;$>=128&&Qn(N,$,this),this.pos=N-1,this.writeVarint($),this.pos+=$},writeMessage:function(p,C,N){this.writeTag(p,Xe.Bytes),this.writeRawMessage(C,N)},writePackedVarint:function(p,C){C.length&&this.writeMessage(p,Jr,C)},writePackedSVarint:function(p,C){C.length&&this.writeMessage(p,$r,C)},writePackedBoolean:function(p,C){C.length&&this.writeMessage(p,xi,C)},writePackedFloat:function(p,C){C.length&&this.writeMessage(p,ri,C)},writePackedDouble:function(p,C){C.length&&this.writeMessage(p,ui,C)},writePackedFixed32:function(p,C){C.length&&this.writeMessage(p,Ti,C)},writePackedSFixed32:function(p,C){C.length&&this.writeMessage(p,pi,C)},writePackedFixed64:function(p,C){C.length&&this.writeMessage(p,hi,C)},writePackedSFixed64:function(p,C){C.length&&this.writeMessage(p,Cr,C)},writeBytesField:function(p,C){this.writeTag(p,Xe.Bytes),this.writeBytes(C)},writeFixed32Field:function(p,C){this.writeTag(p,Xe.Fixed32),this.writeFixed32(C)},writeSFixed32Field:function(p,C){this.writeTag(p,Xe.Fixed32),this.writeSFixed32(C)},writeFixed64Field:function(p,C){this.writeTag(p,Xe.Fixed64),this.writeFixed64(C)},writeSFixed64Field:function(p,C){this.writeTag(p,Xe.Fixed64),this.writeSFixed64(C)},writeVarintField:function(p,C){this.writeTag(p,Xe.Varint),this.writeVarint(C)},writeSVarintField:function(p,C){this.writeTag(p,Xe.Varint),this.writeSVarint(C)},writeStringField:function(p,C){this.writeTag(p,Xe.Bytes),this.writeString(C)},writeFloatField:function(p,C){this.writeTag(p,Xe.Fixed32),this.writeFloat(C)},writeDoubleField:function(p,C){this.writeTag(p,Xe.Fixed64),this.writeDouble(C)},writeBooleanField:function(p,C){this.writeVarintField(p,Boolean(C))}};var Pi=function(p,C){var N=C.pixelRatio,$=C.version,lt=C.stretchX,Tt=C.stretchY,Bt=C.content;this.paddedRect=p,this.pixelRatio=N,this.stretchX=lt,this.stretchY=Tt,this.content=Bt,this.version=$},wi={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};wi.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},wi.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},wi.tlbr.get=function(){return this.tl.concat(this.br)},wi.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Pi.prototype,wi);var ca=function(p,C){var N={},$={};this.haveRenderCallbacks=[];var lt=[];this.addImages(p,N,lt),this.addImages(C,$,lt);var Tt=mi(lt),Bt=new dl({width:Tt.w||1,height:Tt.h||1});for(var Jt in p){var de=p[Jt],Le=N[Jt].paddedRect;dl.copy(de.data,Bt,{x:0,y:0},{x:Le.x+1,y:Le.y+1},de.data)}for(var Ge in C){var He=C[Ge],ln=$[Ge].paddedRect,In=ln.x+1,Cn=ln.y+1,Zn=He.data.width,Kn=He.data.height;dl.copy(He.data,Bt,{x:0,y:0},{x:In,y:Cn},He.data),dl.copy(He.data,Bt,{x:0,y:Kn-1},{x:In,y:Cn-1},{width:Zn,height:1}),dl.copy(He.data,Bt,{x:0,y:0},{x:In,y:Cn+Kn},{width:Zn,height:1}),dl.copy(He.data,Bt,{x:Zn-1,y:0},{x:In-1,y:Cn},{width:1,height:Kn}),dl.copy(He.data,Bt,{x:0,y:0},{x:In+Zn,y:Cn},{width:1,height:Kn})}this.image=Bt,this.iconPositions=N,this.patternPositions=$};ca.prototype.addImages=function(d,p,C){for(var N in d){var $=d[N],lt={x:0,y:0,w:$.data.width+2,h:$.data.height+2};C.push(lt),p[N]=new Pi(lt,$),$.hasRenderCallback&&this.haveRenderCallbacks.push(N)}},ca.prototype.patchUpdatedImages=function(d,p){for(var C in d.dispatchRenderCallbacks(this.haveRenderCallbacks),d.updatedImages)this.patchUpdatedImage(this.iconPositions[C],d.getImage(C),p),this.patchUpdatedImage(this.patternPositions[C],d.getImage(C),p)},ca.prototype.patchUpdatedImage=function(d,p,C){if(d&&p&&d.version!==p.version){d.version=p.version;var N=d.tl;C.update(p.data,void 0,{x:N[0],y:N[1]})}},Yi("ImagePosition",Pi),Yi("ImageAtlas",ca);var Pa={horizontal:1,vertical:2,horizontalOnly:3},Bi=function(){this.scale=1,this.fontStack="",this.imageName=null};Bi.forText=function(d,p){var C=new Bi;return C.scale=d||1,C.fontStack=p,C},Bi.forImage=function(d){var p=new Bi;return p.imageName=d,p};var Ai=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function yi(d,p,C,N,$,lt,Tt,Bt,Jt,de,Le,Ge,He,ln,In,Cn){var Zn,Kn=Ai.fromFeature(d,$);Ge===Pa.vertical&&Kn.verticalizePunctuation();var _r=ci.processBidirectionalText,jr=ci.processStyledBidirectionalText;if(_r&&Kn.sections.length===1){Zn=[];for(var kr=0,vi=_r(Kn.toString(),Zo(Kn,de,lt,p,N,ln,In));kr<vi.length;kr+=1){var oi=vi[kr],Ni=new Ai;Ni.text=oi,Ni.sections=Kn.sections;for(var Fi=0;Fi<oi.length;Fi++)Ni.sectionIndex.push(0);Zn.push(Ni)}}else if(jr){Zn=[];for(var oa=0,ga=jr(Kn.text,Kn.sectionIndex,Zo(Kn,de,lt,p,N,ln,In));oa<ga.length;oa+=1){var ua=ga[oa],ta=new Ai;ta.text=ua[0],ta.sectionIndex=ua[1],ta.sections=Kn.sections,Zn.push(ta)}}else Zn=function(ma,rs){for(var Fa=[],Ws=ma.text,Ya=0,is=0,Ru=rs;is<Ru.length;is+=1){var fu=Ru[is];Fa.push(ma.substring(Ya,fu)),Ya=fu}return Ya<Ws.length&&Fa.push(ma.substring(Ya,Ws.length)),Fa}(Kn,Zo(Kn,de,lt,p,N,ln,In));var ro=[],wa={positionedLines:ro,text:Kn.toString(),top:Le[1],bottom:Le[1],left:Le[0],right:Le[0],writingMode:Ge,iconsInText:!1,verticalizable:!1};return function(ma,rs,Fa,Ws,Ya,is,Ru,fu,rl,il,Bl,Sc){for(var $l=0,Cc=-17,hc=0,Oc=0,ac=fu==="right"?1:fu==="left"?0:.5,Nl=0,oc=0,ys=Ya;oc<ys.length;oc+=1){var as=ys[oc];as.trim();var mu=as.getMaxScale(),Du=24*(mu-1),wc={positionedGlyphs:[],lineOffset:0};ma.positionedLines[Nl]=wc;var ju=wc.positionedGlyphs,gl=0;if(as.length()){for(var _c=0;_c<as.length();_c++){var hs=as.getSection(_c),jf=as.getSectionIndex(_c),rf=as.getCharCode(_c),vf=0,$c=null,Ql=null,Cf=null,Bf=24,Nf=!(rl===Pa.horizontal||!Bl&&!Iu(rf)||Bl&&(ia[rf]||(zf=rf,Mi.Arabic(zf)||Mi["Arabic Supplement"](zf)||Mi["Arabic Extended-A"](zf)||Mi["Arabic Presentation Forms-A"](zf)||Mi["Arabic Presentation Forms-B"](zf))));if(hs.imageName){var Mh=Ws[hs.imageName];if(!Mh)continue;Cf=hs.imageName,ma.iconsInText=ma.iconsInText||!0,Ql=Mh.paddedRect;var Ff=Mh.displaySize;hs.scale=24*hs.scale/Sc,vf=Du+(24-Ff[1]*hs.scale),Bf=($c={width:Ff[0],height:Ff[1],left:1,top:-3,advance:Nf?Ff[1]:Ff[0]}).advance;var Ph=Nf?Ff[0]*hs.scale-24*mu:Ff[1]*hs.scale-24*mu;Ph>0&&Ph>gl&&(gl=Ph)}else{var Th=Fa[hs.fontStack],sh=Th&&Th[rf];if(sh&&sh.rect)Ql=sh.rect,$c=sh.metrics;else{var Ah=rs[hs.fontStack],Yf=Ah&&Ah[rf];if(!Yf)continue;$c=Yf.metrics}vf=24*(mu-hs.scale)}Nf?(ma.verticalizable=!0,ju.push({glyph:rf,imageName:Cf,x:$l,y:Cc+vf,vertical:Nf,scale:hs.scale,fontStack:hs.fontStack,sectionIndex:jf,metrics:$c,rect:Ql}),$l+=Bf*hs.scale+il):(ju.push({glyph:rf,imageName:Cf,x:$l,y:Cc+vf,vertical:Nf,scale:hs.scale,fontStack:hs.fontStack,sectionIndex:jf,metrics:$c,rect:Ql}),$l+=$c.advance*hs.scale+il)}ju.length!==0&&(hc=Math.max($l-il,hc),Xl(ju,0,ju.length-1,ac,gl)),$l=0;var Uh=is*mu+gl;wc.lineOffset=Math.max(gl,Du),Cc+=Uh,Oc=Math.max(Uh,Oc),++Nl}else Cc+=is,++Nl}var zf,uh=Cc- -17,Ch=Vl(Ru),Zf=Ch.horizontalAlign,Uf=Ch.verticalAlign;(function(Oh,wh,Ih,lh,Lh,Rh,Of,Dh,ph){var gh,jh=(wh-Ih)*Lh;gh=Rh!==Of?-Dh*lh- -17:(-lh*ph+.5)*Of;for(var ch=0,mh=Oh;ch<mh.length;ch+=1)for(var yh=0,fh=mh[ch].positionedGlyphs;yh<fh.length;yh+=1){var xh=fh[yh];xh.x+=jh,xh.y+=gh}})(ma.positionedLines,ac,Zf,Uf,hc,Oc,is,uh,Ya.length),ma.top+=-Uf*uh,ma.bottom=ma.top+uh,ma.left+=-Zf*hc,ma.right=ma.left+hc}(wa,p,C,N,Zn,Tt,Bt,Jt,Ge,de,He,Cn),!function(ma){for(var rs=0,Fa=ma;rs<Fa.length;rs+=1)if(Fa[rs].positionedGlyphs.length!==0)return!1;return!0}(ro)&&wa}Ai.fromFeature=function(d,p){for(var C=new Ai,N=0;N<d.sections.length;N++){var $=d.sections[N];$.image?C.addImageSection($):C.addTextSection($,p)}return C},Ai.prototype.length=function(){return this.text.length},Ai.prototype.getSection=function(d){return this.sections[this.sectionIndex[d]]},Ai.prototype.getSectionIndex=function(d){return this.sectionIndex[d]},Ai.prototype.getCharCode=function(d){return this.text.charCodeAt(d)},Ai.prototype.verticalizePunctuation=function(){this.text=function(d){for(var p="",C=0;C<d.length;C++){var N=d.charCodeAt(C+1)||null,$=d.charCodeAt(C-1)||null;p+=N&&Lu(N)&&!Tn[d[C+1]]||$&&Lu($)&&!Tn[d[C-1]]||!Tn[d[C]]?d[C]:Tn[d[C]]}return p}(this.text)},Ai.prototype.trim=function(){for(var d=0,p=0;p<this.text.length&&ia[this.text.charCodeAt(p)];p++)d++;for(var C=this.text.length,N=this.text.length-1;N>=0&&N>=d&&ia[this.text.charCodeAt(N)];N--)C--;this.text=this.text.substring(d,C),this.sectionIndex=this.sectionIndex.slice(d,C)},Ai.prototype.substring=function(d,p){var C=new Ai;return C.text=this.text.substring(d,p),C.sectionIndex=this.sectionIndex.slice(d,p),C.sections=this.sections,C},Ai.prototype.toString=function(){return this.text},Ai.prototype.getMaxScale=function(){var d=this;return this.sectionIndex.reduce(function(p,C){return Math.max(p,d.sections[C].scale)},0)},Ai.prototype.addTextSection=function(d,p){this.text+=d.text,this.sections.push(Bi.forText(d.scale,d.fontStack||p));for(var C=this.sections.length-1,N=0;N<d.text.length;++N)this.sectionIndex.push(C)},Ai.prototype.addImageSection=function(d){var p=d.image?d.image.name:"";if(p.length!==0){var C=this.getNextImageSectionCharCode();C?(this.text+=String.fromCharCode(C),this.sections.push(Bi.forImage(p)),this.sectionIndex.push(this.sections.length-1)):O("Reached maximum number of images 6401")}else O("Can't add FormattedSection with an empty image.")},Ai.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var ia={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},pa={};function qi(d,p,C,N,$,lt){if(p.imageName){var Tt=N[p.imageName];return Tt?Tt.displaySize[0]*p.scale*24/lt+$:0}var Bt=C[p.fontStack],Jt=Bt&&Bt[d];return Jt?Jt.metrics.advance*p.scale+$:0}function vo(d,p,C,N){var $=Math.pow(d-p,2);return N?d<p?$/2:2*$:$+Math.abs(C)*C}function xo(d,p,C){var N=0;return d===10&&(N-=1e4),C&&(N+=150),d!==40&&d!==65288||(N+=50),p!==41&&p!==65289||(N+=50),N}function Ao(d,p,C,N,$,lt){for(var Tt=null,Bt=vo(p,C,$,lt),Jt=0,de=N;Jt<de.length;Jt+=1){var Le=de[Jt],Ge=vo(p-Le.x,C,$,lt)+Le.badness;Ge<=Bt&&(Tt=Le,Bt=Ge)}return{index:d,x:p,priorBreak:Tt,badness:Bt}}function Zo(d,p,C,N,$,lt,Tt){if(lt!=="point")return[];if(!d)return[];for(var Bt,Jt=[],de=function(Zn,Kn,_r,jr,kr,vi){for(var oi=0,Ni=0;Ni<Zn.length();Ni++){var Fi=Zn.getSection(Ni);oi+=qi(Zn.getCharCode(Ni),Fi,jr,kr,Kn,vi)}return oi/Math.max(1,Math.ceil(oi/_r))}(d,p,C,N,$,Tt),Le=d.text.indexOf("\u200B")>=0,Ge=0,He=0;He<d.length();He++){var ln=d.getSection(He),In=d.getCharCode(He);if(ia[In]||(Ge+=qi(In,ln,N,$,p,Tt)),He<d.length()-1){var Cn=!((Bt=In)<11904||!(Mi["Bopomofo Extended"](Bt)||Mi.Bopomofo(Bt)||Mi["CJK Compatibility Forms"](Bt)||Mi["CJK Compatibility Ideographs"](Bt)||Mi["CJK Compatibility"](Bt)||Mi["CJK Radicals Supplement"](Bt)||Mi["CJK Strokes"](Bt)||Mi["CJK Symbols and Punctuation"](Bt)||Mi["CJK Unified Ideographs Extension A"](Bt)||Mi["CJK Unified Ideographs"](Bt)||Mi["Enclosed CJK Letters and Months"](Bt)||Mi["Halfwidth and Fullwidth Forms"](Bt)||Mi.Hiragana(Bt)||Mi["Ideographic Description Characters"](Bt)||Mi["Kangxi Radicals"](Bt)||Mi["Katakana Phonetic Extensions"](Bt)||Mi.Katakana(Bt)||Mi["Vertical Forms"](Bt)||Mi["Yi Radicals"](Bt)||Mi["Yi Syllables"](Bt)));(pa[In]||Cn||ln.imageName)&&Jt.push(Ao(He+1,Ge,de,Jt,xo(In,d.getCharCode(He+1),Cn&&Le),!1))}}return function Zn(Kn){return Kn?Zn(Kn.priorBreak).concat(Kn.index):[]}(Ao(d.length(),Ge,de,Jt,0,!0))}function Vl(d){var p=.5,C=.5;switch(d){case"right":case"top-right":case"bottom-right":p=1;break;case"left":case"top-left":case"bottom-left":p=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":C=1;break;case"top":case"top-right":case"top-left":C=0}return{horizontalAlign:p,verticalAlign:C}}function Xl(d,p,C,N,$){if(N||$)for(var lt=d[C],Tt=(d[C].x+lt.metrics.advance*lt.scale)*N,Bt=p;Bt<=C;Bt++)d[Bt].x-=Tt,d[Bt].y+=$}function Wo(d,p,C,N,$,lt){var Tt,Bt=d.image;if(Bt.content){var Jt=Bt.content,de=Bt.pixelRatio||1;Tt=[Jt[0]/de,Jt[1]/de,Bt.displaySize[0]-Jt[2]/de,Bt.displaySize[1]-Jt[3]/de]}var Le,Ge,He,ln,In=p.left*lt,Cn=p.right*lt;C==="width"||C==="both"?(ln=$[0]+In-N[3],Ge=$[0]+Cn+N[1]):Ge=(ln=$[0]+(In+Cn-Bt.displaySize[0])/2)+Bt.displaySize[0];var Zn=p.top*lt,Kn=p.bottom*lt;return C==="height"||C==="both"?(Le=$[1]+Zn-N[0],He=$[1]+Kn+N[2]):He=(Le=$[1]+(Zn+Kn-Bt.displaySize[1])/2)+Bt.displaySize[1],{image:Bt,top:Le,right:Ge,bottom:He,left:ln,collisionPadding:Tt}}pa[10]=!0,pa[32]=!0,pa[38]=!0,pa[40]=!0,pa[41]=!0,pa[43]=!0,pa[45]=!0,pa[47]=!0,pa[173]=!0,pa[183]=!0,pa[8203]=!0,pa[8208]=!0,pa[8211]=!0,pa[8231]=!0;var Au=function(d){function p(C,N,$,lt){d.call(this,C,N),this.angle=$,lt!==void 0&&(this.segment=lt)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.clone=function(){return new p(this.x,this.y,this.angle,this.segment)},p}(r);function Cu(d,p){var C=p.expression;if(C.kind==="constant")return{kind:"constant",layoutSize:C.evaluate(new xr(d+1))};if(C.kind==="source")return{kind:"source"};for(var N=C.zoomStops,$=C.interpolationType,lt=0;lt<N.length&&N[lt]<=d;)lt++;for(var Tt=lt=Math.max(0,lt-1);Tt<N.length&&N[Tt]<d+1;)Tt++;Tt=Math.min(N.length-1,Tt);var Bt=N[lt],Jt=N[Tt];return C.kind==="composite"?{kind:"composite",minZoom:Bt,maxZoom:Jt,interpolationType:$}:{kind:"camera",minZoom:Bt,maxZoom:Jt,minSize:C.evaluate(new xr(Bt)),maxSize:C.evaluate(new xr(Jt)),interpolationType:$}}function Rl(d,p,C){var N=p.uSize,$=C.lowerSize;return d.kind==="source"?$/128:d.kind==="composite"?Za($/128,C.upperSize/128,p.uSizeT):N}function Cs(d,p){var C=0,N=0;if(d.kind==="constant")N=d.layoutSize;else if(d.kind!=="source"){var $=d.interpolationType,lt=$?l(Ka.interpolationFactor($,p,d.minZoom,d.maxZoom),0,1):0;d.kind==="camera"?N=Za(d.minSize,d.maxSize,lt):C=lt}return{uSizeT:C,uSize:N}}Yi("Anchor",Au);var nc=Object.freeze({__proto__:null,getSizeData:Cu,evaluateSizeForFeature:Rl,evaluateSizeForZoom:Cs,SIZE_PACK_FACTOR:128});function cc(d,p,C,N,$){if(p.segment===void 0)return!0;for(var lt=p,Tt=p.segment+1,Bt=0;Bt>-C/2;){if(--Tt<0)return!1;Bt-=d[Tt].dist(lt),lt=d[Tt]}Bt+=d[Tt].dist(d[Tt+1]),Tt++;for(var Jt=[],de=0;Bt<C/2;){var Le=d[Tt],Ge=d[Tt+1];if(!Ge)return!1;var He=d[Tt-1].angleTo(Le)-Le.angleTo(Ge);for(He=Math.abs((He+3*Math.PI)%(2*Math.PI)-Math.PI),Jt.push({distance:Bt,angleDelta:He}),de+=He;Bt-Jt[0].distance>N;)de-=Jt.shift().angleDelta;if(de>$)return!1;Tt++,Bt+=Le.dist(Ge)}return!0}function Io(d){for(var p=0,C=0;C<d.length-1;C++)p+=d[C].dist(d[C+1]);return p}function Dl(d,p,C){return d?.6*p*C:0}function lo(d,p){return Math.max(d?d.right-d.left:0,p?p.right-p.left:0)}function Jl(d,p,C,N,$,lt){for(var Tt=Dl(C,$,lt),Bt=lo(C,N)*lt,Jt=0,de=Io(d)/2,Le=0;Le<d.length-1;Le++){var Ge=d[Le],He=d[Le+1],ln=Ge.dist(He);if(Jt+ln>de){var In=(de-Jt)/ln,Cn=Za(Ge.x,He.x,In),Zn=Za(Ge.y,He.y,In),Kn=new Au(Cn,Zn,He.angleTo(Ge),Le);return Kn._round(),!Tt||cc(d,Kn,Bt,Tt,p)?Kn:void 0}Jt+=ln}}function Vs(d,p,C,N,$,lt,Tt,Bt,Jt){var de=Dl(N,lt,Tt),Le=lo(N,$),Ge=Le*Tt,He=d[0].x===0||d[0].x===Jt||d[0].y===0||d[0].y===Jt;return p-Ge<p/4&&(p=Ge+p/4),function ln(In,Cn,Zn,Kn,_r,jr,kr,vi,oi){for(var Ni=jr/2,Fi=Io(In),oa=0,ga=Cn-Zn,ua=[],ta=0;ta<In.length-1;ta++){for(var ro=In[ta],wa=In[ta+1],ma=ro.dist(wa),rs=wa.angleTo(ro);ga+Zn<oa+ma;){var Fa=((ga+=Zn)-oa)/ma,Ws=Za(ro.x,wa.x,Fa),Ya=Za(ro.y,wa.y,Fa);if(Ws>=0&&Ws<oi&&Ya>=0&&Ya<oi&&ga-Ni>=0&&ga+Ni<=Fi){var is=new Au(Ws,Ya,rs,ta);is._round(),Kn&&!cc(In,is,jr,Kn,_r)||ua.push(is)}}oa+=ma}return vi||ua.length||kr||(ua=ln(In,oa/2,Zn,Kn,_r,jr,kr,!0,oi)),ua}(d,He?p/2*Bt%p:(Le/2+2*lt)*Tt*Bt%p,p,de,C,Ge,He,!1,Jt)}function Wa(d,p,C,N,$){for(var lt=[],Tt=0;Tt<d.length;Tt++)for(var Bt=d[Tt],Jt=void 0,de=0;de<Bt.length-1;de++){var Le=Bt[de],Ge=Bt[de+1];Le.x<p&&Ge.x<p||(Le.x<p?Le=new r(p,Le.y+(p-Le.x)/(Ge.x-Le.x)*(Ge.y-Le.y))._round():Ge.x<p&&(Ge=new r(p,Le.y+(p-Le.x)/(Ge.x-Le.x)*(Ge.y-Le.y))._round()),Le.y<C&&Ge.y<C||(Le.y<C?Le=new r(Le.x+(C-Le.y)/(Ge.y-Le.y)*(Ge.x-Le.x),C)._round():Ge.y<C&&(Ge=new r(Le.x+(C-Le.y)/(Ge.y-Le.y)*(Ge.x-Le.x),C)._round()),Le.x>=N&&Ge.x>=N||(Le.x>=N?Le=new r(N,Le.y+(N-Le.x)/(Ge.x-Le.x)*(Ge.y-Le.y))._round():Ge.x>=N&&(Ge=new r(N,Le.y+(N-Le.x)/(Ge.x-Le.x)*(Ge.y-Le.y))._round()),Le.y>=$&&Ge.y>=$||(Le.y>=$?Le=new r(Le.x+($-Le.y)/(Ge.y-Le.y)*(Ge.x-Le.x),$)._round():Ge.y>=$&&(Ge=new r(Le.x+($-Le.y)/(Ge.y-Le.y)*(Ge.x-Le.x),$)._round()),Jt&&Le.equals(Jt[Jt.length-1])||lt.push(Jt=[Le]),Jt.push(Ge)))))}return lt}function _o(d,p,C,N){var $=[],lt=d.image,Tt=lt.pixelRatio,Bt=lt.paddedRect.w-2,Jt=lt.paddedRect.h-2,de=d.right-d.left,Le=d.bottom-d.top,Ge=lt.stretchX||[[0,Bt]],He=lt.stretchY||[[0,Jt]],ln=function(Ya,is){return Ya+is[1]-is[0]},In=Ge.reduce(ln,0),Cn=He.reduce(ln,0),Zn=Bt-In,Kn=Jt-Cn,_r=0,jr=In,kr=0,vi=Cn,oi=0,Ni=Zn,Fi=0,oa=Kn;if(lt.content&&N){var ga=lt.content;_r=ns(Ge,0,ga[0]),kr=ns(He,0,ga[1]),jr=ns(Ge,ga[0],ga[2]),vi=ns(He,ga[1],ga[3]),oi=ga[0]-_r,Fi=ga[1]-kr,Ni=ga[2]-ga[0]-jr,oa=ga[3]-ga[1]-vi}var ua=function(Ya,is,Ru,fu){var rl=gc(Ya.stretch-_r,jr,de,d.left),il=lf(Ya.fixed-oi,Ni,Ya.stretch,In),Bl=gc(is.stretch-kr,vi,Le,d.top),Sc=lf(is.fixed-Fi,oa,is.stretch,Cn),$l=gc(Ru.stretch-_r,jr,de,d.left),Cc=lf(Ru.fixed-oi,Ni,Ru.stretch,In),hc=gc(fu.stretch-kr,vi,Le,d.top),Oc=lf(fu.fixed-Fi,oa,fu.stretch,Cn),ac=new r(rl,Bl),Nl=new r($l,Bl),oc=new r($l,hc),ys=new r(rl,hc),as=new r(il/Tt,Sc/Tt),mu=new r(Cc/Tt,Oc/Tt),Du=p*Math.PI/180;if(Du){var wc=Math.sin(Du),ju=Math.cos(Du),gl=[ju,-wc,wc,ju];ac._matMult(gl),Nl._matMult(gl),ys._matMult(gl),oc._matMult(gl)}var _c=Ya.stretch+Ya.fixed,hs=is.stretch+is.fixed;return{tl:ac,tr:Nl,bl:ys,br:oc,tex:{x:lt.paddedRect.x+1+_c,y:lt.paddedRect.y+1+hs,w:Ru.stretch+Ru.fixed-_c,h:fu.stretch+fu.fixed-hs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:as,pixelOffsetBR:mu,minFontScaleX:Ni/Tt/de,minFontScaleY:oa/Tt/Le,isSDF:C}};if(N&&(lt.stretchX||lt.stretchY))for(var ta=fc(Ge,Zn,In),ro=fc(He,Kn,Cn),wa=0;wa<ta.length-1;wa++)for(var ma=ta[wa],rs=ta[wa+1],Fa=0;Fa<ro.length-1;Fa++)$.push(ua(ma,ro[Fa],rs,ro[Fa+1]));else $.push(ua({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Bt+1},{fixed:0,stretch:Jt+1}));return $}function ns(d,p,C){for(var N=0,$=0,lt=d;$<lt.length;$+=1){var Tt=lt[$];N+=Math.max(p,Math.min(C,Tt[1]))-Math.max(p,Math.min(C,Tt[0]))}return N}function fc(d,p,C){for(var N=[{fixed:-1,stretch:0}],$=0,lt=d;$<lt.length;$+=1){var Tt=lt[$],Bt=Tt[0],Jt=Tt[1],de=N[N.length-1];N.push({fixed:Bt-de.stretch,stretch:de.stretch}),N.push({fixed:Bt-de.stretch,stretch:de.stretch+(Jt-Bt)})}return N.push({fixed:p+1,stretch:C}),N}function gc(d,p,C,N){return d/p*C+N}function lf(d,p,C,N){return d-p*C/N}var Ln=function(p,C,N,$,lt,Tt,Bt,Jt,de,Le){if(this.boxStartIndex=p.length,de){var Ge=Tt.top,He=Tt.bottom,ln=Tt.collisionPadding;ln&&(Ge-=ln[1],He+=ln[3]);var In=He-Ge;In>0&&(In=Math.max(10,In),this.circleDiameter=In)}else{var Cn=Tt.top*Bt-Jt,Zn=Tt.bottom*Bt+Jt,Kn=Tt.left*Bt-Jt,_r=Tt.right*Bt+Jt,jr=Tt.collisionPadding;if(jr&&(Kn-=jr[0]*Bt,Cn-=jr[1]*Bt,_r+=jr[2]*Bt,Zn+=jr[3]*Bt),Le){var kr=new r(Kn,Cn),vi=new r(_r,Cn),oi=new r(Kn,Zn),Ni=new r(_r,Zn),Fi=Le*Math.PI/180;kr._rotate(Fi),vi._rotate(Fi),oi._rotate(Fi),Ni._rotate(Fi),Kn=Math.min(kr.x,vi.x,oi.x,Ni.x),_r=Math.max(kr.x,vi.x,oi.x,Ni.x),Cn=Math.min(kr.y,vi.y,oi.y,Ni.y),Zn=Math.max(kr.y,vi.y,oi.y,Ni.y)}p.emplaceBack(C.x,C.y,Kn,Cn,_r,Zn,N,$,lt)}this.boxEndIndex=p.length},Hr=function(p,C){if(p===void 0&&(p=[]),C===void 0&&(C=Ur),this.data=p,this.length=this.data.length,this.compare=C,this.length>0)for(var N=(this.length>>1)-1;N>=0;N--)this._down(N)};function Ur(d,p){return d<p?-1:d>p?1:0}function Qi(d,p,C){p===void 0&&(p=1),C===void 0&&(C=!1);for(var N=1/0,$=1/0,lt=-1/0,Tt=-1/0,Bt=d[0],Jt=0;Jt<Bt.length;Jt++){var de=Bt[Jt];(!Jt||de.x<N)&&(N=de.x),(!Jt||de.y<$)&&($=de.y),(!Jt||de.x>lt)&&(lt=de.x),(!Jt||de.y>Tt)&&(Tt=de.y)}var Le=Math.min(lt-N,Tt-$),Ge=Le/2,He=new Hr([],Lo);if(Le===0)return new r(N,$);for(var ln=N;ln<lt;ln+=Le)for(var In=$;In<Tt;In+=Le)He.push(new Sn(ln+Ge,In+Ge,Ge,d));for(var Cn=function(_r){for(var jr=0,kr=0,vi=0,oi=_r[0],Ni=0,Fi=oi.length,oa=Fi-1;Ni<Fi;oa=Ni++){var ga=oi[Ni],ua=oi[oa],ta=ga.x*ua.y-ua.x*ga.y;kr+=(ga.x+ua.x)*ta,vi+=(ga.y+ua.y)*ta,jr+=3*ta}return new Sn(kr/jr,vi/jr,0,_r)}(d),Zn=He.length;He.length;){var Kn=He.pop();(Kn.d>Cn.d||!Cn.d)&&(Cn=Kn,C&&console.log("found best %d after %d probes",Math.round(1e4*Kn.d)/1e4,Zn)),Kn.max-Cn.d<=p||(He.push(new Sn(Kn.p.x-(Ge=Kn.h/2),Kn.p.y-Ge,Ge,d)),He.push(new Sn(Kn.p.x+Ge,Kn.p.y-Ge,Ge,d)),He.push(new Sn(Kn.p.x-Ge,Kn.p.y+Ge,Ge,d)),He.push(new Sn(Kn.p.x+Ge,Kn.p.y+Ge,Ge,d)),Zn+=4)}return C&&(console.log("num probes: "+Zn),console.log("best distance: "+Cn.d)),Cn.p}function Lo(d,p){return p.max-d.max}function Sn(d,p,C,N){this.p=new r(d,p),this.h=C,this.d=function($,lt){for(var Tt=!1,Bt=1/0,Jt=0;Jt<lt.length;Jt++)for(var de=lt[Jt],Le=0,Ge=de.length,He=Ge-1;Le<Ge;He=Le++){var ln=de[Le],In=de[He];ln.y>$.y!=In.y>$.y&&$.x<(In.x-ln.x)*($.y-ln.y)/(In.y-ln.y)+ln.x&&(Tt=!Tt),Bt=Math.min(Bt,Zc($,ln,In))}return(Tt?1:-1)*Math.sqrt(Bt)}(this.p,N),this.max=this.d+this.h*Math.SQRT2}Hr.prototype.push=function(d){this.data.push(d),this.length++,this._up(this.length-1)},Hr.prototype.pop=function(){if(this.length!==0){var d=this.data[0],p=this.data.pop();return this.length--,this.length>0&&(this.data[0]=p,this._down(0)),d}},Hr.prototype.peek=function(){return this.data[0]},Hr.prototype._up=function(d){for(var p=this.data,C=this.compare,N=p[d];d>0;){var $=d-1>>1,lt=p[$];if(C(N,lt)>=0)break;p[d]=lt,d=$}p[d]=N},Hr.prototype._down=function(d){for(var p=this.data,C=this.compare,N=this.length>>1,$=p[d];d<N;){var lt=1+(d<<1),Tt=p[lt],Bt=lt+1;if(Bt<this.length&&C(p[Bt],Tt)<0&&(lt=Bt,Tt=p[Bt]),C(Tt,$)>=0)break;p[d]=Tt,d=lt}p[d]=$};var an=Number.POSITIVE_INFINITY;function nr(d,p){return p[1]!==an?function(C,N,$){var lt=0,Tt=0;switch(N=Math.abs(N),$=Math.abs($),C){case"top-right":case"top-left":case"top":Tt=$-7;break;case"bottom-right":case"bottom-left":case"bottom":Tt=7-$}switch(C){case"top-right":case"bottom-right":case"right":lt=-N;break;case"top-left":case"bottom-left":case"left":lt=N}return[lt,Tt]}(d,p[0],p[1]):function(C,N){var $=0,lt=0;N<0&&(N=0);var Tt=N/Math.sqrt(2);switch(C){case"top-right":case"top-left":lt=Tt-7;break;case"bottom-right":case"bottom-left":lt=7-Tt;break;case"bottom":lt=7-N;break;case"top":lt=N-7}switch(C){case"top-right":case"bottom-right":$=-Tt;break;case"top-left":case"bottom-left":$=Tt;break;case"left":$=N;break;case"right":$=-N}return[$,lt]}(d,p[0])}function Or(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Rr(d,p,C,N,$,lt,Tt,Bt,Jt,de,Le,Ge,He,ln,In){var Cn=function(kr,vi,oi,Ni,Fi,oa,ga,ua){for(var ta=Ni.layout.get("text-rotate").evaluate(oa,{})*Math.PI/180,ro=[],wa=0,ma=vi.positionedLines;wa<ma.length;wa+=1)for(var rs=ma[wa],Fa=0,Ws=rs.positionedGlyphs;Fa<Ws.length;Fa+=1){var Ya=Ws[Fa];if(Ya.rect){var is=Ya.rect||{},Ru=4,fu=!0,rl=1,il=0,Bl=(Fi||ua)&&Ya.vertical,Sc=Ya.metrics.advance*Ya.scale/2;if(ua&&vi.verticalizable&&(il=rs.lineOffset/2-(Ya.imageName?-(24-Ya.metrics.width*Ya.scale)/2:24*(Ya.scale-1))),Ya.imageName){var $l=ga[Ya.imageName];fu=$l.sdf,Ru=1/(rl=$l.pixelRatio)}var Cc=Fi?[Ya.x+Sc,Ya.y]:[0,0],hc=Fi?[0,0]:[Ya.x+Sc+oi[0],Ya.y+oi[1]-il],Oc=[0,0];Bl&&(Oc=hc,hc=[0,0]);var ac=(Ya.metrics.left-Ru)*Ya.scale-Sc+hc[0],Nl=(-Ya.metrics.top-Ru)*Ya.scale+hc[1],oc=ac+is.w*Ya.scale/rl,ys=Nl+is.h*Ya.scale/rl,as=new r(ac,Nl),mu=new r(oc,Nl),Du=new r(ac,ys),wc=new r(oc,ys);if(Bl){var ju=new r(-Sc,Sc- -17),gl=-Math.PI/2,_c=12-Sc,hs=new r(22-_c,-(Ya.imageName?_c:0)),jf=new(Function.prototype.bind.apply(r,[null].concat(Oc)));as._rotateAround(gl,ju)._add(hs)._add(jf),mu._rotateAround(gl,ju)._add(hs)._add(jf),Du._rotateAround(gl,ju)._add(hs)._add(jf),wc._rotateAround(gl,ju)._add(hs)._add(jf)}if(ta){var rf=Math.sin(ta),vf=Math.cos(ta),$c=[vf,-rf,rf,vf];as._matMult($c),mu._matMult($c),Du._matMult($c),wc._matMult($c)}var Ql=new r(0,0),Cf=new r(0,0);ro.push({tl:as,tr:mu,bl:Du,br:wc,tex:is,writingMode:vi.writingMode,glyphOffset:Cc,sectionIndex:Ya.sectionIndex,isSDF:fu,pixelOffsetTL:Ql,pixelOffsetBR:Cf,minFontScaleX:0,minFontScaleY:0})}}return ro}(0,C,Bt,$,lt,Tt,N,d.allowVerticalPlacement),Zn=d.textSizeData,Kn=null;Zn.kind==="source"?(Kn=[128*$.layout.get("text-size").evaluate(Tt,{})])[0]>32640&&O(d.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Zn.kind==="composite"&&((Kn=[128*ln.compositeTextSizes[0].evaluate(Tt,{},In),128*ln.compositeTextSizes[1].evaluate(Tt,{},In)])[0]>32640||Kn[1]>32640)&&O(d.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),d.addSymbols(d.text,Cn,Kn,Bt,lt,Tt,de,p,Jt.lineStartIndex,Jt.lineLength,He,In);for(var _r=0,jr=Le;_r<jr.length;_r+=1)Ge[jr[_r]]=d.text.placedSymbolArray.length-1;return 4*Cn.length}function sr(d){for(var p in d)return d[p];return null}function ar(d,p,C,N){var $=d.compareText;if(p in $){for(var lt=$[p],Tt=lt.length-1;Tt>=0;Tt--)if(N.dist(lt[Tt])<C)return!0}else $[p]=[];return $[p].push(N),!1}var Er=mf.VectorTileFeature.types,Mn=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Jn(d,p,C,N,$,lt,Tt,Bt,Jt,de,Le,Ge,He){var ln=Bt?Math.min(32640,Math.round(Bt[0])):0,In=Bt?Math.min(32640,Math.round(Bt[1])):0;d.emplaceBack(p,C,Math.round(32*N),Math.round(32*$),lt,Tt,(ln<<1)+(Jt?1:0),In,16*de,16*Le,256*Ge,256*He)}function bn(d,p,C){d.emplaceBack(p.x,p.y,C),d.emplaceBack(p.x,p.y,C),d.emplaceBack(p.x,p.y,C),d.emplaceBack(p.x,p.y,C)}function Tr(d){for(var p=0,C=d.sections;p<C.length;p+=1)if(Pe(C[p].text))return!0;return!1}var Dr=function(p){this.layoutVertexArray=new Zi,this.indexArray=new ka,this.programConfigurations=p,this.segments=new Zt,this.dynamicLayoutVertexArray=new Ri,this.opacityVertexArray=new Sa,this.placedSymbolArray=new B};Dr.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Dr.prototype.upload=function(d,p,C,N){this.isEmpty()||(C&&(this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,pt.members),this.indexBuffer=d.createIndexBuffer(this.indexArray,p),this.dynamicLayoutVertexBuffer=d.createVertexBuffer(this.dynamicLayoutVertexArray,It.members,!0),this.opacityVertexBuffer=d.createVertexBuffer(this.opacityVertexArray,Mn,!0),this.opacityVertexBuffer.itemSize=1),(C||N)&&this.programConfigurations.upload(d))},Dr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Yi("SymbolBuffers",Dr);var li=function(p,C,N){this.layoutVertexArray=new p,this.layoutAttributes=C,this.indexArray=new N,this.segments=new Zt,this.collisionVertexArray=new Ea};li.prototype.upload=function(d){this.layoutVertexBuffer=d.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=d.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=d.createVertexBuffer(this.collisionVertexArray,ie.members,!0)},li.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Yi("CollisionBuffers",li);var Wr=function(p){this.collisionBoxArray=p.collisionBoxArray,this.zoom=p.zoom,this.overscaling=p.overscaling,this.layers=p.layers,this.layerIds=this.layers.map(function(Tt){return Tt.id}),this.index=p.index,this.pixelRatio=p.pixelRatio,this.sourceLayerIndex=p.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=vu([]),this.placementViewportMatrix=vu([]);var C=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Cu(this.zoom,C["text-size"]),this.iconSizeData=Cu(this.zoom,C["icon-size"]);var N=this.layers[0].layout,$=N.get("symbol-sort-key"),lt=N.get("symbol-z-order");this.canOverlap=N.get("text-allow-overlap")||N.get("icon-allow-overlap")||N.get("text-ignore-placement")||N.get("icon-ignore-placement"),this.sortFeaturesByKey=lt!=="viewport-y"&&$.constantOr(1)!==void 0,this.sortFeaturesByY=(lt==="viewport-y"||lt==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,N.get("symbol-placement")==="point"&&(this.writingModes=N.get("text-writing-mode").map(function(Tt){return Pa[Tt]})),this.stateDependentLayerIds=this.layers.filter(function(Tt){return Tt.isStateDependent()}).map(function(Tt){return Tt.id}),this.sourceID=p.sourceID};Wr.prototype.createArrays=function(){this.text=new Dr(new Ca(this.layers,this.zoom,function(d){return/^text/.test(d)})),this.icon=new Dr(new Ca(this.layers,this.zoom,function(d){return/^icon/.test(d)})),this.glyphOffsetArray=new q,this.lineVertexArray=new st,this.symbolInstances=new W},Wr.prototype.calculateGlyphDependencies=function(d,p,C,N,$){for(var lt=0;lt<d.length;lt++)if(p[d.charCodeAt(lt)]=!0,(C||N)&&$){var Tt=Tn[d.charAt(lt)];Tt&&(p[Tt.charCodeAt(0)]=!0)}},Wr.prototype.populate=function(d,p,C){var N=this.layers[0],$=N.layout,lt=$.get("text-font"),Tt=$.get("text-field"),Bt=$.get("icon-image"),Jt=(Tt.value.kind!=="constant"||Tt.value.value instanceof Aa&&!Tt.value.value.isEmpty()||Tt.value.value.toString().length>0)&&(lt.value.kind!=="constant"||lt.value.value.length>0),de=Bt.value.kind!=="constant"||!!Bt.value.value||Object.keys(Bt.parameters).length>0,Le=$.get("symbol-sort-key");if(this.features=[],Jt||de){for(var Ge=p.iconDependencies,He=p.glyphDependencies,ln=p.availableImages,In=new xr(this.zoom),Cn=0,Zn=d;Cn<Zn.length;Cn+=1){var Kn=Zn[Cn],_r=Kn.feature,jr=Kn.id,kr=Kn.index,vi=Kn.sourceLayerIndex,oi=N._featureFilter.needGeometry,Ni=Qs(_r,oi);if(N._featureFilter.filter(In,Ni,C)){oi||(Ni.geometry=fs(_r));var Fi=void 0;if(Jt){var oa=N.getValueAndResolveTokens("text-field",Ni,C,ln),ga=Aa.factory(oa);Tr(ga)&&(this.hasRTLText=!0),(!this.hasRTLText||ni()==="unavailable"||this.hasRTLText&&ci.isParsed())&&(Fi=pn(ga,N,Ni))}var ua=void 0;if(de){var ta=N.getValueAndResolveTokens("icon-image",Ni,C,ln);ua=ta instanceof eo?ta:eo.fromString(ta)}if(Fi||ua){var ro=this.sortFeaturesByKey?Le.evaluate(Ni,{},C):void 0;if(this.features.push({id:jr,text:Fi,icon:ua,index:kr,sourceLayerIndex:vi,geometry:Ni.geometry,properties:_r.properties,type:Er[_r.type],sortKey:ro}),ua&&(Ge[ua.name]=!0),Fi){var wa=lt.evaluate(Ni,{},C).join(","),ma=$.get("text-rotation-alignment")==="map"&&$.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Pa.vertical)>=0;for(var rs=0,Fa=Fi.sections;rs<Fa.length;rs+=1){var Ws=Fa[rs];if(Ws.image)Ge[Ws.image.name]=!0;else{var Ya=_u(Fi.toString()),is=Ws.fontStack||wa,Ru=He[is]=He[is]||{};this.calculateGlyphDependencies(Ws.text,Ru,ma,this.allowVerticalPlacement,Ya)}}}}}}$.get("symbol-placement")==="line"&&(this.features=function(fu){var rl={},il={},Bl=[],Sc=0;function $l(ju){Bl.push(fu[ju]),Sc++}function Cc(ju,gl,_c){var hs=il[ju];return delete il[ju],il[gl]=hs,Bl[hs].geometry[0].pop(),Bl[hs].geometry[0]=Bl[hs].geometry[0].concat(_c[0]),hs}function hc(ju,gl,_c){var hs=rl[gl];return delete rl[gl],rl[ju]=hs,Bl[hs].geometry[0].shift(),Bl[hs].geometry[0]=_c[0].concat(Bl[hs].geometry[0]),hs}function Oc(ju,gl,_c){var hs=_c?gl[0][gl[0].length-1]:gl[0][0];return ju+":"+hs.x+":"+hs.y}for(var ac=0;ac<fu.length;ac++){var Nl=fu[ac],oc=Nl.geometry,ys=Nl.text?Nl.text.toString():null;if(ys){var as=Oc(ys,oc),mu=Oc(ys,oc,!0);if(as in il&&mu in rl&&il[as]!==rl[mu]){var Du=hc(as,mu,oc),wc=Cc(as,mu,Bl[Du].geometry);delete rl[as],delete il[mu],il[Oc(ys,Bl[wc].geometry,!0)]=wc,Bl[Du].geometry=null}else as in il?Cc(as,mu,oc):mu in rl?hc(as,mu,oc):($l(ac),rl[as]=Sc-1,il[mu]=Sc-1)}else $l(ac)}return Bl.filter(function(ju){return ju.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(fu,rl){return fu.sortKey-rl.sortKey})}},Wr.prototype.update=function(d,p,C){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(d,p,this.layers,C),this.icon.programConfigurations.updatePaintArrays(d,p,this.layers,C))},Wr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Wr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Wr.prototype.upload=function(d){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(d),this.iconCollisionBox.upload(d)),this.text.upload(d,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(d,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Wr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Wr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Wr.prototype.addToLineVertexArray=function(d,p){var C=this.lineVertexArray.length;if(d.segment!==void 0){for(var N=d.dist(p[d.segment+1]),$=d.dist(p[d.segment]),lt={},Tt=d.segment+1;Tt<p.length;Tt++)lt[Tt]={x:p[Tt].x,y:p[Tt].y,tileUnitDistanceFromAnchor:N},Tt<p.length-1&&(N+=p[Tt+1].dist(p[Tt]));for(var Bt=d.segment||0;Bt>=0;Bt--)lt[Bt]={x:p[Bt].x,y:p[Bt].y,tileUnitDistanceFromAnchor:$},Bt>0&&($+=p[Bt-1].dist(p[Bt]));for(var Jt=0;Jt<p.length;Jt++){var de=lt[Jt];this.lineVertexArray.emplaceBack(de.x,de.y,de.tileUnitDistanceFromAnchor)}}return{lineStartIndex:C,lineLength:this.lineVertexArray.length-C}},Wr.prototype.addSymbols=function(d,p,C,N,$,lt,Tt,Bt,Jt,de,Le,Ge){for(var He=d.indexArray,ln=d.layoutVertexArray,In=d.segments.prepareSegment(4*p.length,ln,He,this.canOverlap?lt.sortKey:void 0),Cn=this.glyphOffsetArray.length,Zn=In.vertexLength,Kn=this.allowVerticalPlacement&&Tt===Pa.vertical?Math.PI/2:0,_r=lt.text&&lt.text.sections,jr=0;jr<p.length;jr++){var kr=p[jr],vi=kr.tl,oi=kr.tr,Ni=kr.bl,Fi=kr.br,oa=kr.tex,ga=kr.pixelOffsetTL,ua=kr.pixelOffsetBR,ta=kr.minFontScaleX,ro=kr.minFontScaleY,wa=kr.glyphOffset,ma=kr.isSDF,rs=kr.sectionIndex,Fa=In.vertexLength,Ws=wa[1];Jn(ln,Bt.x,Bt.y,vi.x,Ws+vi.y,oa.x,oa.y,C,ma,ga.x,ga.y,ta,ro),Jn(ln,Bt.x,Bt.y,oi.x,Ws+oi.y,oa.x+oa.w,oa.y,C,ma,ua.x,ga.y,ta,ro),Jn(ln,Bt.x,Bt.y,Ni.x,Ws+Ni.y,oa.x,oa.y+oa.h,C,ma,ga.x,ua.y,ta,ro),Jn(ln,Bt.x,Bt.y,Fi.x,Ws+Fi.y,oa.x+oa.w,oa.y+oa.h,C,ma,ua.x,ua.y,ta,ro),bn(d.dynamicLayoutVertexArray,Bt,Kn),He.emplaceBack(Fa,Fa+1,Fa+2),He.emplaceBack(Fa+1,Fa+2,Fa+3),In.vertexLength+=4,In.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(wa[0]),jr!==p.length-1&&rs===p[jr+1].sectionIndex||d.programConfigurations.populatePaintArrays(ln.length,lt,lt.index,{},Ge,_r&&_r[rs])}d.placedSymbolArray.emplaceBack(Bt.x,Bt.y,Cn,this.glyphOffsetArray.length-Cn,Zn,Jt,de,Bt.segment,C?C[0]:0,C?C[1]:0,N[0],N[1],Tt,0,!1,0,Le)},Wr.prototype._addCollisionDebugVertex=function(d,p,C,N,$,lt){return p.emplaceBack(0,0),d.emplaceBack(C.x,C.y,N,$,Math.round(lt.x),Math.round(lt.y))},Wr.prototype.addCollisionDebugVertices=function(d,p,C,N,$,lt,Tt){var Bt=$.segments.prepareSegment(4,$.layoutVertexArray,$.indexArray),Jt=Bt.vertexLength,de=$.layoutVertexArray,Le=$.collisionVertexArray,Ge=Tt.anchorX,He=Tt.anchorY;this._addCollisionDebugVertex(de,Le,lt,Ge,He,new r(d,p)),this._addCollisionDebugVertex(de,Le,lt,Ge,He,new r(C,p)),this._addCollisionDebugVertex(de,Le,lt,Ge,He,new r(C,N)),this._addCollisionDebugVertex(de,Le,lt,Ge,He,new r(d,N)),Bt.vertexLength+=4;var ln=$.indexArray;ln.emplaceBack(Jt,Jt+1),ln.emplaceBack(Jt+1,Jt+2),ln.emplaceBack(Jt+2,Jt+3),ln.emplaceBack(Jt+3,Jt),Bt.primitiveLength+=4},Wr.prototype.addDebugCollisionBoxes=function(d,p,C,N){for(var $=d;$<p;$++){var lt=this.collisionBoxArray.get($);this.addCollisionDebugVertices(lt.x1,lt.y1,lt.x2,lt.y2,N?this.textCollisionBox:this.iconCollisionBox,lt.anchorPoint,C)}},Wr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new li(_a,ze.members,Ts),this.iconCollisionBox=new li(_a,ze.members,Ts);for(var d=0;d<this.symbolInstances.length;d++){var p=this.symbolInstances.get(d);this.addDebugCollisionBoxes(p.textBoxStartIndex,p.textBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.iconBoxStartIndex,p.iconBoxEndIndex,p,!1),this.addDebugCollisionBoxes(p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex,p,!1)}},Wr.prototype._deserializeCollisionBoxesForSymbol=function(d,p,C,N,$,lt,Tt,Bt,Jt){for(var de={},Le=p;Le<C;Le++){var Ge=d.get(Le);de.textBox={x1:Ge.x1,y1:Ge.y1,x2:Ge.x2,y2:Ge.y2,anchorPointX:Ge.anchorPointX,anchorPointY:Ge.anchorPointY},de.textFeatureIndex=Ge.featureIndex;break}for(var He=N;He<$;He++){var ln=d.get(He);de.verticalTextBox={x1:ln.x1,y1:ln.y1,x2:ln.x2,y2:ln.y2,anchorPointX:ln.anchorPointX,anchorPointY:ln.anchorPointY},de.verticalTextFeatureIndex=ln.featureIndex;break}for(var In=lt;In<Tt;In++){var Cn=d.get(In);de.iconBox={x1:Cn.x1,y1:Cn.y1,x2:Cn.x2,y2:Cn.y2,anchorPointX:Cn.anchorPointX,anchorPointY:Cn.anchorPointY},de.iconFeatureIndex=Cn.featureIndex;break}for(var Zn=Bt;Zn<Jt;Zn++){var Kn=d.get(Zn);de.verticalIconBox={x1:Kn.x1,y1:Kn.y1,x2:Kn.x2,y2:Kn.y2,anchorPointX:Kn.anchorPointX,anchorPointY:Kn.anchorPointY},de.verticalIconFeatureIndex=Kn.featureIndex;break}return de},Wr.prototype.deserializeCollisionBoxes=function(d){this.collisionArrays=[];for(var p=0;p<this.symbolInstances.length;p++){var C=this.symbolInstances.get(p);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(d,C.textBoxStartIndex,C.textBoxEndIndex,C.verticalTextBoxStartIndex,C.verticalTextBoxEndIndex,C.iconBoxStartIndex,C.iconBoxEndIndex,C.verticalIconBoxStartIndex,C.verticalIconBoxEndIndex))}},Wr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Wr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Wr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Wr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Wr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Wr.prototype.addIndicesForPlacedSymbol=function(d,p){for(var C=d.placedSymbolArray.get(p),N=C.vertexStartIndex+4*C.numGlyphs,$=C.vertexStartIndex;$<N;$+=4)d.indexArray.emplaceBack($,$+1,$+2),d.indexArray.emplaceBack($+1,$+2,$+3)},Wr.prototype.getSortedSymbolIndexes=function(d){if(this.sortedAngle===d&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var p=Math.sin(d),C=Math.cos(d),N=[],$=[],lt=[],Tt=0;Tt<this.symbolInstances.length;++Tt){lt.push(Tt);var Bt=this.symbolInstances.get(Tt);N.push(0|Math.round(p*Bt.anchorX+C*Bt.anchorY)),$.push(Bt.featureIndex)}return lt.sort(function(Jt,de){return N[Jt]-N[de]||$[de]-$[Jt]}),lt},Wr.prototype.addToSortKeyRanges=function(d,p){var C=this.sortKeyRanges[this.sortKeyRanges.length-1];C&&C.sortKey===p?C.symbolInstanceEnd=d+1:this.sortKeyRanges.push({sortKey:p,symbolInstanceStart:d,symbolInstanceEnd:d+1})},Wr.prototype.sortFeatures=function(d){var p=this;if(this.sortFeaturesByY&&this.sortedAngle!==d&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(d),this.sortedAngle=d,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var C=0,N=this.symbolInstanceIndexes;C<N.length;C+=1){var $=this.symbolInstances.get(N[C]);this.featureSortOrder.push($.featureIndex),[$.rightJustifiedTextSymbolIndex,$.centerJustifiedTextSymbolIndex,$.leftJustifiedTextSymbolIndex].forEach(function(lt,Tt,Bt){lt>=0&&Bt.indexOf(lt)===Tt&&p.addIndicesForPlacedSymbol(p.text,lt)}),$.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,$.verticalPlacedTextSymbolIndex),$.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,$.placedIconSymbolIndex),$.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,$.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Yi("SymbolBucket",Wr,{omit:["layers","collisionBoxArray","features","compareText"]}),Wr.MAX_GLYPHS=65535,Wr.addDynamicAttributes=bn;var ii=new vn({"symbol-placement":new fe(ue.layout_symbol["symbol-placement"]),"symbol-spacing":new fe(ue.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new fe(ue.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Fe(ue.layout_symbol["symbol-sort-key"]),"symbol-z-order":new fe(ue.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new fe(ue.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new fe(ue.layout_symbol["icon-ignore-placement"]),"icon-optional":new fe(ue.layout_symbol["icon-optional"]),"icon-rotation-alignment":new fe(ue.layout_symbol["icon-rotation-alignment"]),"icon-size":new Fe(ue.layout_symbol["icon-size"]),"icon-text-fit":new fe(ue.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new fe(ue.layout_symbol["icon-text-fit-padding"]),"icon-image":new Fe(ue.layout_symbol["icon-image"]),"icon-rotate":new Fe(ue.layout_symbol["icon-rotate"]),"icon-padding":new fe(ue.layout_symbol["icon-padding"]),"icon-keep-upright":new fe(ue.layout_symbol["icon-keep-upright"]),"icon-offset":new Fe(ue.layout_symbol["icon-offset"]),"icon-anchor":new Fe(ue.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new fe(ue.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new fe(ue.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new fe(ue.layout_symbol["text-rotation-alignment"]),"text-field":new Fe(ue.layout_symbol["text-field"]),"text-font":new Fe(ue.layout_symbol["text-font"]),"text-size":new Fe(ue.layout_symbol["text-size"]),"text-max-width":new Fe(ue.layout_symbol["text-max-width"]),"text-line-height":new fe(ue.layout_symbol["text-line-height"]),"text-letter-spacing":new Fe(ue.layout_symbol["text-letter-spacing"]),"text-justify":new Fe(ue.layout_symbol["text-justify"]),"text-radial-offset":new Fe(ue.layout_symbol["text-radial-offset"]),"text-variable-anchor":new fe(ue.layout_symbol["text-variable-anchor"]),"text-anchor":new Fe(ue.layout_symbol["text-anchor"]),"text-max-angle":new fe(ue.layout_symbol["text-max-angle"]),"text-writing-mode":new fe(ue.layout_symbol["text-writing-mode"]),"text-rotate":new Fe(ue.layout_symbol["text-rotate"]),"text-padding":new fe(ue.layout_symbol["text-padding"]),"text-keep-upright":new fe(ue.layout_symbol["text-keep-upright"]),"text-transform":new Fe(ue.layout_symbol["text-transform"]),"text-offset":new Fe(ue.layout_symbol["text-offset"]),"text-allow-overlap":new fe(ue.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new fe(ue.layout_symbol["text-ignore-placement"]),"text-optional":new fe(ue.layout_symbol["text-optional"])}),ji={paint:new vn({"icon-opacity":new Fe(ue.paint_symbol["icon-opacity"]),"icon-color":new Fe(ue.paint_symbol["icon-color"]),"icon-halo-color":new Fe(ue.paint_symbol["icon-halo-color"]),"icon-halo-width":new Fe(ue.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Fe(ue.paint_symbol["icon-halo-blur"]),"icon-translate":new fe(ue.paint_symbol["icon-translate"]),"icon-translate-anchor":new fe(ue.paint_symbol["icon-translate-anchor"]),"text-opacity":new Fe(ue.paint_symbol["text-opacity"]),"text-color":new Fe(ue.paint_symbol["text-color"],{runtimeType:Re,getOverride:function(p){return p.textColor},hasOverride:function(p){return!!p.textColor}}),"text-halo-color":new Fe(ue.paint_symbol["text-halo-color"]),"text-halo-width":new Fe(ue.paint_symbol["text-halo-width"]),"text-halo-blur":new Fe(ue.paint_symbol["text-halo-blur"]),"text-translate":new fe(ue.paint_symbol["text-translate"]),"text-translate-anchor":new fe(ue.paint_symbol["text-translate-anchor"])}),layout:ii},va=function(p){this.type=p.property.overrides?p.property.overrides.runtimeType:or,this.defaultValue=p};va.prototype.evaluate=function(d){if(d.formattedSection){var p=this.defaultValue.property.overrides;if(p&&p.hasOverride(d.formattedSection))return p.getOverride(d.formattedSection)}return d.feature&&d.featureState?this.defaultValue.evaluate(d.feature,d.featureState):this.defaultValue.property.specification.default},va.prototype.eachChild=function(d){this.defaultValue.isConstant()||d(this.defaultValue.value._styleExpression.expression)},va.prototype.outputDefined=function(){return!1},va.prototype.serialize=function(){return null},Yi("FormatSectionOverride",va,{omit:["defaultValue"]});var Ro=function(d){function p(C){d.call(this,C,ji)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.recalculate=function(C,N){if(d.prototype.recalculate.call(this,C,N),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var $=this.layout.get("text-writing-mode");if($){for(var lt=[],Tt=0,Bt=$;Tt<Bt.length;Tt+=1){var Jt=Bt[Tt];lt.indexOf(Jt)<0&&lt.push(Jt)}this.layout._values["text-writing-mode"]=lt}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},p.prototype.getValueAndResolveTokens=function(C,N,$,lt){var Tt=this.layout.get(C).evaluate(N,{},$,lt),Bt=this._unevaluatedLayout._values[C];return Bt.isDataDriven()||nu(Bt.value)||!Tt?Tt:function(Jt,de){return de.replace(/{([^{}]+)}/g,function(Le,Ge){return Ge in Jt?String(Jt[Ge]):""})}(N.properties,Tt)},p.prototype.createBucket=function(C){return new Wr(C)},p.prototype.queryRadius=function(){return 0},p.prototype.queryIntersectsFeature=function(){return!1},p.prototype._setPaintOverrides=function(){for(var C=0,N=ji.paint.overridableProperties;C<N.length;C+=1){var $=N[C];if(p.hasPaintOverride(this.layout,$)){var lt,Tt=this.paint.get($),Bt=new va(Tt),Jt=new bl(Bt,Tt.property.specification);lt=Tt.value.kind==="constant"||Tt.value.kind==="source"?new xu("source",Jt):new bu("composite",Jt,Tt.value.zoomStops,Tt.value._interpolationType),this.paint._values[$]=new oe(Tt.property,lt,Tt.parameters)}}},p.prototype._handleOverridablePaintPropertyUpdate=function(C,N,$){return!(!this.layout||N.isDataDriven()||$.isDataDriven())&&p.hasPaintOverride(this.layout,C)},p.hasPaintOverride=function(C,N){var $=C.get("text-field"),lt=ji.paint.properties[N],Tt=!1,Bt=function(Ge){for(var He=0,ln=Ge;He<ln.length;He+=1)if(lt.overrides&&lt.overrides.hasOverride(ln[He]))return void(Tt=!0)};if($.value.kind==="constant"&&$.value.value instanceof Aa)Bt($.value.value.sections);else if($.value.kind==="source"){var Jt=function Le(Ge){Tt||(Ge instanceof Ko&&io(Ge.value)===xn?Bt(Ge.value.sections):Ge instanceof Xo?Bt(Ge.sections):Ge.eachChild(Le))},de=$.value;de._styleExpression&&Jt(de._styleExpression.expression)}return Tt},p}(fn),la={paint:new vn({"background-color":new fe(ue.paint_background["background-color"]),"background-pattern":new nn(ue.paint_background["background-pattern"]),"background-opacity":new fe(ue.paint_background["background-opacity"])})},Ha=function(d){function p(C){d.call(this,C,la)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(fn),bo={paint:new vn({"raster-opacity":new fe(ue.paint_raster["raster-opacity"]),"raster-hue-rotate":new fe(ue.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new fe(ue.paint_raster["raster-brightness-min"]),"raster-brightness-max":new fe(ue.paint_raster["raster-brightness-max"]),"raster-saturation":new fe(ue.paint_raster["raster-saturation"]),"raster-contrast":new fe(ue.paint_raster["raster-contrast"]),"raster-resampling":new fe(ue.paint_raster["raster-resampling"]),"raster-fade-duration":new fe(ue.paint_raster["raster-fade-duration"])})},Ds=function(d){function p(C){d.call(this,C,bo)}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p}(fn),jl=function(d){function p(C){d.call(this,C,{}),this.implementation=C}return d&&(p.__proto__=d),(p.prototype=Object.create(d&&d.prototype)).constructor=p,p.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},p.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},p.prototype.recalculate=function(){},p.prototype.updateTransitions=function(){},p.prototype.hasTransition=function(){},p.prototype.serialize=function(){},p.prototype.onAdd=function(C){this.implementation.onAdd&&this.implementation.onAdd(C,C.painter.context.gl)},p.prototype.onRemove=function(C){this.implementation.onRemove&&this.implementation.onRemove(C,C.painter.context.gl)},p}(fn),zc={circle:Gc,heatmap:pf,hillshade:Gf,fill:Gl,"fill-extrusion":Dc,line:yt,symbol:Ro,background:Ha,raster:Ds},dh=n.HTMLImageElement,Xc=n.HTMLCanvasElement,bh=n.HTMLVideoElement,Jc=n.ImageData,nh=n.ImageBitmap,rh=function(p,C,N,$){this.context=p,this.format=N,this.texture=p.gl.createTexture(),this.update(C,$)};rh.prototype.update=function(d,p,C){var N=d.width,$=d.height,lt=!(this.size&&this.size[0]===N&&this.size[1]===$||C),Tt=this.context,Bt=Tt.gl;if(this.useMipmap=Boolean(p&&p.useMipmap),Bt.bindTexture(Bt.TEXTURE_2D,this.texture),Tt.pixelStoreUnpackFlipY.set(!1),Tt.pixelStoreUnpack.set(1),Tt.pixelStoreUnpackPremultiplyAlpha.set(this.format===Bt.RGBA&&(!p||p.premultiply!==!1)),lt)this.size=[N,$],d instanceof dh||d instanceof Xc||d instanceof bh||d instanceof Jc||nh&&d instanceof nh?Bt.texImage2D(Bt.TEXTURE_2D,0,this.format,this.format,Bt.UNSIGNED_BYTE,d):Bt.texImage2D(Bt.TEXTURE_2D,0,this.format,N,$,0,this.format,Bt.UNSIGNED_BYTE,d.data);else{var Jt=C||{x:0,y:0},de=Jt.x,Le=Jt.y;d instanceof dh||d instanceof Xc||d instanceof bh||d instanceof Jc||nh&&d instanceof nh?Bt.texSubImage2D(Bt.TEXTURE_2D,0,de,Le,Bt.RGBA,Bt.UNSIGNED_BYTE,d):Bt.texSubImage2D(Bt.TEXTURE_2D,0,de,Le,N,$,Bt.RGBA,Bt.UNSIGNED_BYTE,d.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Bt.generateMipmap(Bt.TEXTURE_2D)},rh.prototype.bind=function(d,p,C){var N=this.context.gl;N.bindTexture(N.TEXTURE_2D,this.texture),C!==N.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(C=N.LINEAR),d!==this.filter&&(N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,d),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,C||d),this.filter=d),p!==this.wrap&&(N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_S,p),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_T,p),this.wrap=p)},rh.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},rh.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Gh=function(p){var C=this;this._callback=p,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){C._triggered=!1,C._callback()})};Gh.prototype.trigger=function(){var d=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){d._triggered=!1,d._callback()},0))},Gh.prototype.remove=function(){delete this._channel,this._callback=function(){}};var ih=function(p,C,N){this.target=p,this.parent=C,this.mapId=N,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},M(["receive","process"],this),this.invoker=new Gh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=F()?p:n};function $h(d,p,C){var N=2*Math.PI*6378137/256/Math.pow(2,C);return[d*N-2*Math.PI*6378137/2,p*N-2*Math.PI*6378137/2]}ih.prototype.send=function(d,p,C,N,$){var lt=this;$===void 0&&($=!1);var Tt=Math.round(1e18*Math.random()).toString(36).substring(0,10);C&&(this.callbacks[Tt]=C);var Bt=U(this.globalScope)?void 0:[];return this.target.postMessage({id:Tt,type:d,hasCallback:!!C,targetMapId:N,mustQueue:$,sourceMapId:this.mapId,data:Go(p,Bt)},Bt),{cancel:function(){C&&delete lt.callbacks[Tt],lt.target.postMessage({id:Tt,type:"<cancel>",targetMapId:N,sourceMapId:lt.mapId})}}},ih.prototype.receive=function(d){var p=d.data,C=p.id;if(C&&(!p.targetMapId||this.mapId===p.targetMapId))if(p.type==="<cancel>"){delete this.tasks[C];var N=this.cancelCallbacks[C];delete this.cancelCallbacks[C],N&&N()}else F()||p.mustQueue?(this.tasks[C]=p,this.taskQueue.push(C),this.invoker.trigger()):this.processTask(C,p)},ih.prototype.process=function(){if(this.taskQueue.length){var d=this.taskQueue.shift(),p=this.tasks[d];delete this.tasks[d],this.taskQueue.length&&this.invoker.trigger(),p&&this.processTask(d,p)}},ih.prototype.processTask=function(d,p){var C=this;if(p.type==="<response>"){var N=this.callbacks[d];delete this.callbacks[d],N&&(p.error?N(Yo(p.error)):N(null,Yo(p.data)))}else{var $=!1,lt=U(this.globalScope)?void 0:[],Tt=p.hasCallback?function(Le,Ge){$=!0,delete C.cancelCallbacks[d],C.target.postMessage({id:d,type:"<response>",sourceMapId:C.mapId,error:Le?Go(Le):null,data:Go(Ge,lt)},lt)}:function(Le){$=!0},Bt=null,Jt=Yo(p.data);if(this.parent[p.type])Bt=this.parent[p.type](p.sourceMapId,Jt,Tt);else if(this.parent.getWorkerSource){var de=p.type.split(".");Bt=this.parent.getWorkerSource(p.sourceMapId,de[0],Jt.source)[de[1]](Jt,Tt)}else Tt(new Error("Could not find function "+p.type));!$&&Bt&&Bt.cancel&&(this.cancelCallbacks[d]=Bt.cancel)}},ih.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var rc=function(p,C){p&&(C?this.setSouthWest(p).setNorthEast(C):p.length===4?this.setSouthWest([p[0],p[1]]).setNorthEast([p[2],p[3]]):this.setSouthWest(p[0]).setNorthEast(p[1]))};rc.prototype.setNorthEast=function(d){return this._ne=d instanceof nl?new nl(d.lng,d.lat):nl.convert(d),this},rc.prototype.setSouthWest=function(d){return this._sw=d instanceof nl?new nl(d.lng,d.lat):nl.convert(d),this},rc.prototype.extend=function(d){var p,C,N=this._sw,$=this._ne;if(d instanceof nl)p=d,C=d;else{if(!(d instanceof rc))return Array.isArray(d)?d.length===4||d.every(Array.isArray)?this.extend(rc.convert(d)):this.extend(nl.convert(d)):this;if(C=d._ne,!(p=d._sw)||!C)return this}return N||$?(N.lng=Math.min(p.lng,N.lng),N.lat=Math.min(p.lat,N.lat),$.lng=Math.max(C.lng,$.lng),$.lat=Math.max(C.lat,$.lat)):(this._sw=new nl(p.lng,p.lat),this._ne=new nl(C.lng,C.lat)),this},rc.prototype.getCenter=function(){return new nl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},rc.prototype.getSouthWest=function(){return this._sw},rc.prototype.getNorthEast=function(){return this._ne},rc.prototype.getNorthWest=function(){return new nl(this.getWest(),this.getNorth())},rc.prototype.getSouthEast=function(){return new nl(this.getEast(),this.getSouth())},rc.prototype.getWest=function(){return this._sw.lng},rc.prototype.getSouth=function(){return this._sw.lat},rc.prototype.getEast=function(){return this._ne.lng},rc.prototype.getNorth=function(){return this._ne.lat},rc.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},rc.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},rc.prototype.isEmpty=function(){return!(this._sw&&this._ne)},rc.prototype.contains=function(d){var p=nl.convert(d),C=p.lng,N=p.lat,$=this._sw.lng<=C&&C<=this._ne.lng;return this._sw.lng>this._ne.lng&&($=this._sw.lng>=C&&C>=this._ne.lng),this._sw.lat<=N&&N<=this._ne.lat&&$},rc.convert=function(d){return!d||d instanceof rc?d:new rc(d)};var nl=function(p,C){if(isNaN(p)||isNaN(C))throw new Error("Invalid LngLat object: ("+p+", "+C+")");if(this.lng=+p,this.lat=+C,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};nl.prototype.wrap=function(){return new nl(f(this.lng,-180,180),this.lat)},nl.prototype.toArray=function(){return[this.lng,this.lat]},nl.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},nl.prototype.distanceTo=function(d){var p=Math.PI/180,C=this.lat*p,N=d.lat*p,$=Math.sin(C)*Math.sin(N)+Math.cos(C)*Math.cos(N)*Math.cos((d.lng-this.lng)*p);return 63710088e-1*Math.acos(Math.min($,1))},nl.prototype.toBounds=function(d){d===void 0&&(d=0);var p=360*d/40075017,C=p/Math.cos(Math.PI/180*this.lat);return new rc(new nl(this.lng-C,this.lat-p),new nl(this.lng+C,this.lat+p))},nl.convert=function(d){if(d instanceof nl)return d;if(Array.isArray(d)&&(d.length===2||d.length===3))return new nl(Number(d[0]),Number(d[1]));if(!Array.isArray(d)&&typeof d=="object"&&d!==null)return new nl(Number("lng"in d?d.lng:d.lon),Number(d.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Qh=2*Math.PI*63710088e-1;function qh(d){return Qh*Math.cos(d*Math.PI/180)}function td(d){return(180+d)/360}function Vh(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function ed(d,p){return d/qh(p)}function Wh(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}var ah=function(p,C,N){N===void 0&&(N=0),this.x=+p,this.y=+C,this.z=+N};ah.fromLngLat=function(d,p){p===void 0&&(p=0);var C=nl.convert(d);return new ah(td(C.lng),Vh(C.lat),ed(p,C.lat))},ah.prototype.toLngLat=function(){return new nl(360*this.x-180,Wh(this.y))},ah.prototype.toAltitude=function(){return this.z*qh(Wh(this.y))},ah.prototype.meterInMercatorCoordinateUnits=function(){return 1/Qh*(d=Wh(this.y),1/Math.cos(d*Math.PI/180));var d};var oh=function(p,C,N){this.z=p,this.x=C,this.y=N,this.key=Eh(0,p,p,C,N)};oh.prototype.equals=function(d){return this.z===d.z&&this.x===d.x&&this.y===d.y},oh.prototype.url=function(d,p){var C,N,$,lt,Tt,Bt=(N=this.y,$=this.z,lt=$h(256*(C=this.x),256*(N=Math.pow(2,$)-N-1),$),Tt=$h(256*(C+1),256*(N+1),$),lt[0]+","+lt[1]+","+Tt[0]+","+Tt[1]),Jt=function(de,Le,Ge){for(var He,ln="",In=de;In>0;In--)ln+=(Le&(He=1<<In-1)?1:0)+(Ge&He?2:0);return ln}(this.z,this.x,this.y);return d[(this.x+this.y)%d.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",Jt).replace("{bbox-epsg-3857}",Bt)},oh.prototype.getTilePoint=function(d){var p=Math.pow(2,this.z);return new r(8192*(d.x*p-this.x),8192*(d.y*p-this.y))},oh.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var nd=function(p,C){this.wrap=p,this.canonical=C,this.key=Eh(p,C.z,C.z,C.x,C.y)},ic=function(p,C,N,$,lt){this.overscaledZ=p,this.wrap=C,this.canonical=new oh(N,+$,+lt),this.key=Eh(C,p,N,$,lt)};function Eh(d,p,C,N,$){(d*=2)<0&&(d=-1*d-1);var lt=1<<C;return(lt*lt*d+lt*$+N).toString(36)+C.toString(36)+p.toString(36)}ic.prototype.equals=function(d){return this.overscaledZ===d.overscaledZ&&this.wrap===d.wrap&&this.canonical.equals(d.canonical)},ic.prototype.scaledTo=function(d){var p=this.canonical.z-d;return d>this.canonical.z?new ic(d,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ic(d,this.wrap,d,this.canonical.x>>p,this.canonical.y>>p)},ic.prototype.calculateScaledKey=function(d,p){var C=this.canonical.z-d;return d>this.canonical.z?Eh(this.wrap*+p,d,this.canonical.z,this.canonical.x,this.canonical.y):Eh(this.wrap*+p,d,d,this.canonical.x>>C,this.canonical.y>>C)},ic.prototype.isChildOf=function(d){if(d.wrap!==this.wrap)return!1;var p=this.canonical.z-d.canonical.z;return d.overscaledZ===0||d.overscaledZ<this.overscaledZ&&d.canonical.x===this.canonical.x>>p&&d.canonical.y===this.canonical.y>>p},ic.prototype.children=function(d){if(this.overscaledZ>=d)return[new ic(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var p=this.canonical.z+1,C=2*this.canonical.x,N=2*this.canonical.y;return[new ic(p,this.wrap,p,C,N),new ic(p,this.wrap,p,C+1,N),new ic(p,this.wrap,p,C,N+1),new ic(p,this.wrap,p,C+1,N+1)]},ic.prototype.isLessThan=function(d){return this.wrap<d.wrap||!(this.wrap>d.wrap)&&(this.overscaledZ<d.overscaledZ||!(this.overscaledZ>d.overscaledZ)&&(this.canonical.x<d.canonical.x||!(this.canonical.x>d.canonical.x)&&this.canonical.y<d.canonical.y))},ic.prototype.wrapped=function(){return new ic(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ic.prototype.unwrapTo=function(d){return new ic(this.overscaledZ,d,this.canonical.z,this.canonical.x,this.canonical.y)},ic.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ic.prototype.toUnwrapped=function(){return new nd(this.wrap,this.canonical)},ic.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ic.prototype.getTilePoint=function(d){return this.canonical.getTilePoint(new ah(d.x-this.wrap,d.y))},Yi("CanonicalTileID",oh),Yi("OverscaledTileID",ic,{omit:["posMatrix"]});var Df=function(p,C,N){if(this.uid=p,C.height!==C.width)throw new RangeError("DEM tiles must be square");if(N&&N!=="mapbox"&&N!=="terrarium")return O('"'+N+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=C.height;var $=this.dim=C.height-2;this.data=new Uint32Array(C.data.buffer),this.encoding=N||"mapbox";for(var lt=0;lt<$;lt++)this.data[this._idx(-1,lt)]=this.data[this._idx(0,lt)],this.data[this._idx($,lt)]=this.data[this._idx($-1,lt)],this.data[this._idx(lt,-1)]=this.data[this._idx(lt,0)],this.data[this._idx(lt,$)]=this.data[this._idx(lt,$-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx($,-1)]=this.data[this._idx($-1,0)],this.data[this._idx(-1,$)]=this.data[this._idx(0,$-1)],this.data[this._idx($,$)]=this.data[this._idx($-1,$-1)]};Df.prototype.get=function(d,p){var C=new Uint8Array(this.data.buffer),N=4*this._idx(d,p);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(C[N],C[N+1],C[N+2])},Df.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Df.prototype._idx=function(d,p){if(d<-1||d>=this.dim+1||p<-1||p>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(p+1)*this.stride+(d+1)},Df.prototype._unpackMapbox=function(d,p,C){return(256*d*256+256*p+C)/10-1e4},Df.prototype._unpackTerrarium=function(d,p,C){return 256*d+p+C/256-32768},Df.prototype.getPixels=function(){return new dl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Df.prototype.backfillBorder=function(d,p,C){if(this.dim!==d.dim)throw new Error("dem dimension mismatch");var N=p*this.dim,$=p*this.dim+this.dim,lt=C*this.dim,Tt=C*this.dim+this.dim;switch(p){case-1:N=$-1;break;case 1:$=N+1}switch(C){case-1:lt=Tt-1;break;case 1:Tt=lt+1}for(var Bt=-p*this.dim,Jt=-C*this.dim,de=lt;de<Tt;de++)for(var Le=N;Le<$;Le++)this.data[this._idx(Le,de)]=d.data[this._idx(Le+Bt,de+Jt)]},Yi("DEMData",Df);var Sh=function(p){this._stringToNumber={},this._numberToString=[];for(var C=0;C<p.length;C++){var N=p[C];this._stringToNumber[N]=C,this._numberToString[C]=N}};Sh.prototype.encode=function(d){return this._stringToNumber[d]},Sh.prototype.decode=function(d){return this._numberToString[d]};var _h=function(p,C,N,$,lt){this.type="Feature",this._vectorTileFeature=p,p._z=C,p._x=N,p._y=$,this.properties=p.properties,this.id=lt},zh={geometry:{configurable:!0}};zh.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},zh.geometry.set=function(d){this._geometry=d},_h.prototype.toJSON=function(){var d={geometry:this.geometry};for(var p in this)p!=="_geometry"&&p!=="_vectorTileFeature"&&(d[p]=this[p]);return d},Object.defineProperties(_h.prototype,zh);var yf=function(){this.state={},this.stateChanges={},this.deletedStates={}};yf.prototype.updateState=function(d,p,C){var N=String(p);if(this.stateChanges[d]=this.stateChanges[d]||{},this.stateChanges[d][N]=this.stateChanges[d][N]||{},v(this.stateChanges[d][N],C),this.deletedStates[d]===null)for(var $ in this.deletedStates[d]={},this.state[d])$!==N&&(this.deletedStates[d][$]=null);else if(this.deletedStates[d]&&this.deletedStates[d][N]===null)for(var lt in this.deletedStates[d][N]={},this.state[d][N])C[lt]||(this.deletedStates[d][N][lt]=null);else for(var Tt in C)this.deletedStates[d]&&this.deletedStates[d][N]&&this.deletedStates[d][N][Tt]===null&&delete this.deletedStates[d][N][Tt]},yf.prototype.removeFeatureState=function(d,p,C){if(this.deletedStates[d]!==null){var N=String(p);if(this.deletedStates[d]=this.deletedStates[d]||{},C&&p!==void 0)this.deletedStates[d][N]!==null&&(this.deletedStates[d][N]=this.deletedStates[d][N]||{},this.deletedStates[d][N][C]=null);else if(p!==void 0)if(this.stateChanges[d]&&this.stateChanges[d][N])for(C in this.deletedStates[d][N]={},this.stateChanges[d][N])this.deletedStates[d][N][C]=null;else this.deletedStates[d][N]=null;else this.deletedStates[d]=null}},yf.prototype.getState=function(d,p){var C=String(p),N=v({},(this.state[d]||{})[C],(this.stateChanges[d]||{})[C]);if(this.deletedStates[d]===null)return{};if(this.deletedStates[d]){var $=this.deletedStates[d][p];if($===null)return{};for(var lt in $)delete N[lt]}return N},yf.prototype.initializeTileState=function(d,p){d.setFeatureState(this.state,p)},yf.prototype.coalesceChanges=function(d,p){var C={};for(var N in this.stateChanges){this.state[N]=this.state[N]||{};var $={};for(var lt in this.stateChanges[N])this.state[N][lt]||(this.state[N][lt]={}),v(this.state[N][lt],this.stateChanges[N][lt]),$[lt]=this.state[N][lt];C[N]=$}for(var Tt in this.deletedStates){this.state[Tt]=this.state[Tt]||{};var Bt={};if(this.deletedStates[Tt]===null)for(var Jt in this.state[Tt])Bt[Jt]={},this.state[Tt][Jt]={};else for(var de in this.deletedStates[Tt]){if(this.deletedStates[Tt][de]===null)this.state[Tt][de]={};else for(var Le=0,Ge=Object.keys(this.deletedStates[Tt][de]);Le<Ge.length;Le+=1)delete this.state[Tt][de][Ge[Le]];Bt[de]=this.state[Tt][de]}C[Tt]=C[Tt]||{},v(C[Tt],Bt)}if(this.stateChanges={},this.deletedStates={},Object.keys(C).length!==0)for(var He in d)d[He].setFeatureState(C,p)};var Af=function(p,C){this.tileID=p,this.x=p.canonical.x,this.y=p.canonical.y,this.z=p.canonical.z,this.grid=new Zs(8192,16,0),this.grid3D=new Zs(8192,16,0),this.featureIndexArray=new wt,this.promoteId=C};function rd(d,p,C,N,$){return y(d,function(lt,Tt){var Bt=p instanceof ne?p.get(Tt):null;return Bt&&Bt.evaluate?Bt.evaluate(C,N,$):Bt})}function Hh(d){for(var p=1/0,C=1/0,N=-1/0,$=-1/0,lt=0,Tt=d;lt<Tt.length;lt+=1){var Bt=Tt[lt];p=Math.min(p,Bt.x),C=Math.min(C,Bt.y),N=Math.max(N,Bt.x),$=Math.max($,Bt.y)}return{minX:p,minY:C,maxX:N,maxY:$}}function cd(d,p){return p-d}Af.prototype.insert=function(d,p,C,N,$,lt){var Tt=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(C,N,$);for(var Bt=lt?this.grid3D:this.grid,Jt=0;Jt<p.length;Jt++){for(var de=p[Jt],Le=[1/0,1/0,-1/0,-1/0],Ge=0;Ge<de.length;Ge++){var He=de[Ge];Le[0]=Math.min(Le[0],He.x),Le[1]=Math.min(Le[1],He.y),Le[2]=Math.max(Le[2],He.x),Le[3]=Math.max(Le[3],He.y)}Le[0]<8192&&Le[1]<8192&&Le[2]>=0&&Le[3]>=0&&Bt.insert(Tt,Le[0],Le[1],Le[2],Le[3])}},Af.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new mf.VectorTile(new be(this.rawTileData)).layers,this.sourceLayerCoder=new Sh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Af.prototype.query=function(d,p,C,N){var $=this;this.loadVTLayers();for(var lt=d.params||{},Tt=8192/d.tileSize/d.scale,Bt=uu(lt.filter),Jt=d.queryGeometry,de=d.queryPadding*Tt,Le=Hh(Jt),Ge=this.grid.query(Le.minX-de,Le.minY-de,Le.maxX+de,Le.maxY+de),He=Hh(d.cameraQueryGeometry),ln=this.grid3D.query(He.minX-de,He.minY-de,He.maxX+de,He.maxY+de,function(kr,vi,oi,Ni){return function(Fi,oa,ga,ua,ta){for(var ro=0,wa=Fi;ro<wa.length;ro+=1){var ma=wa[ro];if(oa<=ma.x&&ga<=ma.y&&ua>=ma.x&&ta>=ma.y)return!0}var rs=[new r(oa,ga),new r(oa,ta),new r(ua,ta),new r(ua,ga)];if(Fi.length>2){for(var Fa=0,Ws=rs;Fa<Ws.length;Fa+=1)if(vc(Fi,Ws[Fa]))return!0}for(var Ya=0;Ya<Fi.length-1;Ya++)if(kc(Fi[Ya],Fi[Ya+1],rs))return!0;return!1}(d.cameraQueryGeometry,kr-de,vi-de,oi+de,Ni+de)}),In=0,Cn=ln;In<Cn.length;In+=1)Ge.push(Cn[In]);Ge.sort(cd);for(var Zn,Kn={},_r=function(vi){var oi=Ge[vi];if(oi!==Zn){Zn=oi;var Ni=$.featureIndexArray.get(oi),Fi=null;$.loadMatchingFeature(Kn,Ni.bucketIndex,Ni.sourceLayerIndex,Ni.featureIndex,Bt,lt.layers,lt.availableImages,p,C,N,function(oa,ga,ua){return Fi||(Fi=fs(oa)),ga.queryIntersectsFeature(Jt,oa,ua,Fi,$.z,d.transform,Tt,d.pixelPosMatrix)})}},jr=0;jr<Ge.length;jr++)_r(jr);return Kn},Af.prototype.loadMatchingFeature=function(d,p,C,N,$,lt,Tt,Bt,Jt,de,Le){var Ge=this.bucketLayerIDs[p];if(!lt||function(Fi,oa){for(var ga=0;ga<Fi.length;ga++)if(oa.indexOf(Fi[ga])>=0)return!0;return!1}(lt,Ge)){var He=this.sourceLayerCoder.decode(C),ln=this.vtLayers[He].feature(N);if($.needGeometry){var In=Qs(ln,!0);if(!$.filter(new xr(this.tileID.overscaledZ),In,this.tileID.canonical))return}else if(!$.filter(new xr(this.tileID.overscaledZ),ln))return;for(var Cn=this.getId(ln,He),Zn=0;Zn<Ge.length;Zn++){var Kn=Ge[Zn];if(!(lt&&lt.indexOf(Kn)<0)){var _r=Bt[Kn];if(_r){var jr={};Cn!==void 0&&de&&(jr=de.getState(_r.sourceLayer||"_geojsonTileLayer",Cn));var kr=v({},Jt[Kn]);kr.paint=rd(kr.paint,_r.paint,ln,jr,Tt),kr.layout=rd(kr.layout,_r.layout,ln,jr,Tt);var vi=!Le||Le(ln,_r,jr);if(vi){var oi=new _h(ln,this.z,this.x,this.y,Cn);oi.layer=kr;var Ni=d[Kn];Ni===void 0&&(Ni=d[Kn]=[]),Ni.push({featureIndex:N,feature:oi,intersectionZ:vi})}}}}}},Af.prototype.lookupSymbolFeatures=function(d,p,C,N,$,lt,Tt,Bt){var Jt={};this.loadVTLayers();for(var de=uu($),Le=0,Ge=d;Le<Ge.length;Le+=1)this.loadMatchingFeature(Jt,C,N,Ge[Le],de,lt,Tt,Bt,p);return Jt},Af.prototype.hasLayer=function(d){for(var p=0,C=this.bucketLayerIDs;p<C.length;p+=1)for(var N=0,$=C[p];N<$.length;N+=1)if(d===$[N])return!0;return!1},Af.prototype.getId=function(d,p){var C=d.id;return this.promoteId&&typeof(C=d.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[p]])=="boolean"&&(C=Number(C)),C},Yi("FeatureIndex",Af,{omit:["rawTileData","sourceLayerCoder"]});var mc=function(p,C){this.tileID=p,this.uid=g(),this.uses=0,this.tileSize=C,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};mc.prototype.registerFadeDuration=function(d){var p=d+this.timeAdded;p<Ot.now()||this.fadeEndTime&&p<this.fadeEndTime||(this.fadeEndTime=p)},mc.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},mc.prototype.loadVectorData=function(d,p,C){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",d){for(var N in d.featureIndex&&(this.latestFeatureIndex=d.featureIndex,d.rawTileData?(this.latestRawTileData=d.rawTileData,this.latestFeatureIndex.rawTileData=d.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=d.collisionBoxArray,this.buckets=function(de,Le){var Ge={};if(!Le)return Ge;for(var He=function(){var Zn=In[ln],Kn=Zn.layerIds.map(function(kr){return Le.getLayer(kr)}).filter(Boolean);if(Kn.length!==0){Zn.layers=Kn,Zn.stateDependentLayerIds&&(Zn.stateDependentLayers=Zn.stateDependentLayerIds.map(function(kr){return Kn.filter(function(vi){return vi.id===kr})[0]}));for(var _r=0,jr=Kn;_r<jr.length;_r+=1)Ge[jr[_r].id]=Zn}},ln=0,In=de;ln<In.length;ln+=1)He();return Ge}(d.buckets,p.style),this.hasSymbolBuckets=!1,this.buckets){var $=this.buckets[N];if($ instanceof Wr){if(this.hasSymbolBuckets=!0,!C)break;$.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var lt in this.buckets){var Tt=this.buckets[lt];if(Tt instanceof Wr&&Tt.hasRTLText){this.hasRTLText=!0,ci.isLoading()||ci.isLoaded()||ni()!=="deferred"||zr();break}}for(var Bt in this.queryPadding=0,this.buckets){var Jt=this.buckets[Bt];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(Bt).queryRadius(Jt))}d.imageAtlas&&(this.imageAtlas=d.imageAtlas),d.glyphAtlasImage&&(this.glyphAtlasImage=d.glyphAtlasImage)}else this.collisionBoxArray=new I},mc.prototype.unloadVectorData=function(){for(var d in this.buckets)this.buckets[d].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},mc.prototype.getBucket=function(d){return this.buckets[d.id]},mc.prototype.upload=function(d){for(var p in this.buckets){var C=this.buckets[p];C.uploadPending()&&C.upload(d)}var N=d.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new rh(d,this.imageAtlas.image,N.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new rh(d,this.glyphAtlasImage,N.ALPHA),this.glyphAtlasImage=null)},mc.prototype.prepare=function(d){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(d,this.imageAtlasTexture)},mc.prototype.queryRenderedFeatures=function(d,p,C,N,$,lt,Tt,Bt,Jt,de){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:N,cameraQueryGeometry:$,scale:lt,tileSize:this.tileSize,pixelPosMatrix:de,transform:Bt,params:Tt,queryPadding:this.queryPadding*Jt},d,p,C):{}},mc.prototype.querySourceFeatures=function(d,p){var C=this.latestFeatureIndex;if(C&&C.rawTileData){var N=C.loadVTLayers(),$=p?p.sourceLayer:"",lt=N._geojsonTileLayer||N[$];if(lt)for(var Tt=uu(p&&p.filter),Bt=this.tileID.canonical,Jt=Bt.z,de=Bt.x,Le=Bt.y,Ge={z:Jt,x:de,y:Le},He=0;He<lt.length;He++){var ln=lt.feature(He);if(Tt.needGeometry){var In=Qs(ln,!0);if(!Tt.filter(new xr(this.tileID.overscaledZ),In,this.tileID.canonical))continue}else if(!Tt.filter(new xr(this.tileID.overscaledZ),ln))continue;var Cn=C.getId(ln,$),Zn=new _h(ln,Jt,de,Le,Cn);Zn.tile=Ge,d.push(Zn)}}},mc.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},mc.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},mc.prototype.setExpiryData=function(d){var p=this.expirationTime;if(d.cacheControl){var C=Z(d.cacheControl);C["max-age"]&&(this.expirationTime=Date.now()+1e3*C["max-age"])}else d.expires&&(this.expirationTime=new Date(d.expires).getTime());if(this.expirationTime){var N=Date.now(),$=!1;if(this.expirationTime>N)$=!1;else if(p)if(this.expirationTime<p)$=!0;else{var lt=this.expirationTime-p;lt?this.expirationTime=N+Math.max(lt,3e4):$=!0}else $=!0;$?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},mc.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},mc.prototype.setFeatureState=function(d,p){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(d).length!==0){var C=this.latestFeatureIndex.loadVTLayers();for(var N in this.buckets)if(p.style.hasLayer(N)){var $=this.buckets[N],lt=$.layers[0].sourceLayer||"_geojsonTileLayer",Tt=C[lt],Bt=d[lt];if(Tt&&Bt&&Object.keys(Bt).length!==0){$.update(Bt,Tt,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Jt=p&&p.style&&p.style.getLayer(N);Jt&&(this.queryPadding=Math.max(this.queryPadding,Jt.queryRadius($)))}}}},mc.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},mc.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ot.now()},mc.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},mc.prototype.setHoldDuration=function(d){this.symbolFadeHoldUntil=Ot.now()+d},mc.prototype.setDependencies=function(d,p){for(var C={},N=0,$=p;N<$.length;N+=1)C[$[N]]=!0;this.dependencies[d]=C},mc.prototype.hasDependency=function(d,p){for(var C=0,N=d;C<N.length;C+=1){var $=this.dependencies[N[C]];if($){for(var lt=0,Tt=p;lt<Tt.length;lt+=1)if($[Tt[lt]])return!0}}return!1};var df=n.performance,vh=function(p){this._marks={start:[p.url,"start"].join("#"),end:[p.url,"end"].join("#"),measure:p.url.toString()},df.mark(this._marks.start)};vh.prototype.finish=function(){df.mark(this._marks.end);var d=df.getEntriesByName(this._marks.measure);return d.length===0&&(df.measure(this._marks.measure,this._marks.start,this._marks.end),d=df.getEntriesByName(this._marks.measure),df.clearMarks(this._marks.start),df.clearMarks(this._marks.end),df.clearMeasures(this._marks.measure)),d},t.Actor=ih,t.AlphaImage=Kl,t.CanonicalTileID=oh,t.CollisionBoxArray=I,t.Color=Fr,t.DEMData=Df,t.DataConstantProperty=fe,t.DictionaryCoder=Sh,t.EXTENT=8192,t.ErrorEvent=re,t.EvaluationParameters=xr,t.Event=Vt,t.Evented=Te,t.FeatureIndex=Af,t.FillBucket=Us,t.FillExtrusionBucket=cu,t.ImageAtlas=ca,t.ImagePosition=Pi,t.LineBucket=pc,t.LngLat=nl,t.LngLatBounds=rc,t.MercatorCoordinate=ah,t.ONE_EM=24,t.OverscaledTileID=ic,t.Point=r,t.Point$1=r,t.Properties=vn,t.Protobuf=be,t.RGBAImage=dl,t.RequestManager=Q,t.RequestPerformance=vh,t.ResourceType=er,t.SegmentVector=Zt,t.SourceFeatureState=yf,t.StructArrayLayout1ui2=el,t.StructArrayLayout2f1f2i16=ei,t.StructArrayLayout2i4=mr,t.StructArrayLayout3ui6=ka,t.StructArrayLayout4i8=Yr,t.SymbolBucket=Wr,t.Texture=rh,t.Tile=mc,t.Transitionable=Ie,t.Uniform1f=Qr,t.Uniform1i=Mr,t.Uniform2f=Vr,t.Uniform3f=_i,t.Uniform4f=Di,t.UniformColor=Wi,t.UniformMatrix4f=La,t.UnwrappedTileID=nd,t.ValidationError=xe,t.WritingMode=Pa,t.ZoomHistory=Su,t.add=function(d,p,C){return d[0]=p[0]+C[0],d[1]=p[1]+C[1],d[2]=p[2]+C[2],d},t.addDynamicAttributes=bn,t.asyncAll=function(d,p,C){if(!d.length)return C(null,[]);var N=d.length,$=new Array(d.length),lt=null;d.forEach(function(Tt,Bt){p(Tt,function(Jt,de){Jt&&(lt=Jt),$[Bt]=de,--N==0&&C(lt,$)})})},t.bezier=a,t.bindAll=M,t.browser=Ot,t.cacheEntryPossiblyAdded=function(d){++Ye>le&&(d.getActor().send("enforceCacheSizeLimit",ae),Ye=0)},t.clamp=l,t.clearTileCache=function(d){var p=n.caches.delete("mapbox-tiles");d&&p.catch(d).then(function(){return d()})},t.clipLine=Wa,t.clone=function(d){var p=new Pu(16);return p[0]=d[0],p[1]=d[1],p[2]=d[2],p[3]=d[3],p[4]=d[4],p[5]=d[5],p[6]=d[6],p[7]=d[7],p[8]=d[8],p[9]=d[9],p[10]=d[10],p[11]=d[11],p[12]=d[12],p[13]=d[13],p[14]=d[14],p[15]=d[15],p},t.clone$1=P,t.clone$2=function(d){var p=new Pu(3);return p[0]=d[0],p[1]=d[1],p[2]=d[2],p},t.collisionCircleLayout=yn,t.config=St,t.create=function(){var d=new Pu(16);return Pu!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d},t.create$1=function(){var d=new Pu(9);return Pu!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[5]=0,d[6]=0,d[7]=0),d[0]=1,d[4]=1,d[8]=1,d},t.create$2=function(){var d=new Pu(4);return Pu!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d},t.createCommonjsModule=u,t.createExpression=zu,t.createLayout=Gn,t.createStyleLayer=function(d){return d.type==="custom"?new jl(d):new zc[d.type](d)},t.cross=function(d,p,C){var N=p[0],$=p[1],lt=p[2],Tt=C[0],Bt=C[1],Jt=C[2];return d[0]=$*Jt-lt*Bt,d[1]=lt*Tt-N*Jt,d[2]=N*Bt-$*Tt,d},t.deepEqual=function d(p,C){if(Array.isArray(p)){if(!Array.isArray(C)||p.length!==C.length)return!1;for(var N=0;N<p.length;N++)if(!d(p[N],C[N]))return!1;return!0}if(typeof p=="object"&&p!==null&&C!==null){if(typeof C!="object"||Object.keys(p).length!==Object.keys(C).length)return!1;for(var $ in p)if(!d(p[$],C[$]))return!1;return!0}return p===C},t.dot=function(d,p){return d[0]*p[0]+d[1]*p[1]+d[2]*p[2]},t.dot$1=function(d,p){return d[0]*p[0]+d[1]*p[1]+d[2]*p[2]+d[3]*p[3]},t.ease=o,t.emitValidationErrors=ru,t.endsWith=x,t.enforceCacheSizeLimit=function(d){je(),Et&&Et.then(function(p){p.keys().then(function(C){for(var N=0;N<C.length-d;N++)p.delete(C[N])})})},t.evaluateSizeForFeature=Rl,t.evaluateSizeForZoom=Cs,t.evaluateVariableOffset=nr,t.evented=Zr,t.extend=v,t.featureFilter=uu,t.filterObject=S,t.fromRotation=function(d,p){var C=Math.sin(p),N=Math.cos(p);return d[0]=N,d[1]=C,d[2]=0,d[3]=-C,d[4]=N,d[5]=0,d[6]=0,d[7]=0,d[8]=1,d},t.getAnchorAlignment=Vl,t.getAnchorJustification=Or,t.getArrayBuffer=pr,t.getImage=Me,t.getJSON=function(d,p){return jn(v(d,{type:"json"}),p)},t.getRTLTextPluginStatus=ni,t.getReferrer=on,t.getVideo=function(d,p){var C,N,$=n.document.createElement("video");$.muted=!0,$.onloadstart=function(){p(null,$)};for(var lt=0;lt<d.length;lt++){var Tt=n.document.createElement("source");C=d[lt],N=void 0,(N=n.document.createElement("a")).href=C,(N.protocol!==n.document.location.protocol||N.host!==n.document.location.host)&&($.crossOrigin="Anonymous"),Tt.src=d[lt],$.appendChild(Tt)}return{cancel:function(){}}},t.identity=vu,t.invert=function(d,p){var C=p[0],N=p[1],$=p[2],lt=p[3],Tt=p[4],Bt=p[5],Jt=p[6],de=p[7],Le=p[8],Ge=p[9],He=p[10],ln=p[11],In=p[12],Cn=p[13],Zn=p[14],Kn=p[15],_r=C*Bt-N*Tt,jr=C*Jt-$*Tt,kr=C*de-lt*Tt,vi=N*Jt-$*Bt,oi=N*de-lt*Bt,Ni=$*de-lt*Jt,Fi=Le*Cn-Ge*In,oa=Le*Zn-He*In,ga=Le*Kn-ln*In,ua=Ge*Zn-He*Cn,ta=Ge*Kn-ln*Cn,ro=He*Kn-ln*Zn,wa=_r*ro-jr*ta+kr*ua+vi*ga-oi*oa+Ni*Fi;return wa?(d[0]=(Bt*ro-Jt*ta+de*ua)*(wa=1/wa),d[1]=($*ta-N*ro-lt*ua)*wa,d[2]=(Cn*Ni-Zn*oi+Kn*vi)*wa,d[3]=(He*oi-Ge*Ni-ln*vi)*wa,d[4]=(Jt*ga-Tt*ro-de*oa)*wa,d[5]=(C*ro-$*ga+lt*oa)*wa,d[6]=(Zn*kr-In*Ni-Kn*jr)*wa,d[7]=(Le*Ni-He*kr+ln*jr)*wa,d[8]=(Tt*ta-Bt*ga+de*Fi)*wa,d[9]=(N*ga-C*ta-lt*Fi)*wa,d[10]=(In*oi-Cn*kr+Kn*_r)*wa,d[11]=(Ge*kr-Le*oi-ln*_r)*wa,d[12]=(Bt*oa-Tt*ua-Jt*Fi)*wa,d[13]=(C*ua-N*oa+$*Fi)*wa,d[14]=(Cn*jr-In*vi-Zn*_r)*wa,d[15]=(Le*vi-Ge*jr+He*_r)*wa,d):null},t.isChar=Mi,t.isMapboxURL=ht,t.keysDifference=function(d,p){var C=[];for(var N in d)N in p||C.push(N);return C},t.makeRequest=jn,t.mapObject=y,t.mercatorXfromLng=td,t.mercatorYfromLat=Vh,t.mercatorZfromAltitude=ed,t.mul=fl,t.multiply=cl,t.mvt=mf,t.nextPowerOfTwo=function(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))},t.normalize=function(d,p){var C=p[0],N=p[1],$=p[2],lt=C*C+N*N+$*$;return lt>0&&(lt=1/Math.sqrt(lt)),d[0]=p[0]*lt,d[1]=p[1]*lt,d[2]=p[2]*lt,d},t.number=Za,t.offscreenCanvasSupported=wn,t.ortho=function(d,p,C,N,$,lt,Tt){var Bt=1/(p-C),Jt=1/(N-$),de=1/(lt-Tt);return d[0]=-2*Bt,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*Jt,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*de,d[11]=0,d[12]=(p+C)*Bt,d[13]=($+N)*Jt,d[14]=(Tt+lt)*de,d[15]=1,d},t.parseGlyphPBF=function(d){return new be(d).readFields(qr,[])},t.pbf=be,t.performSymbolLayout=function(d,p,C,N,$,lt,Tt){d.createArrays(),d.tilePixelRatio=8192/(512*d.overscaling),d.compareText={},d.iconsNeedLinear=!1;var Bt=d.layers[0].layout,Jt=d.layers[0]._unevaluatedLayout._values,de={};if(d.textSizeData.kind==="composite"){var Le=d.textSizeData,Ge=Le.maxZoom;de.compositeTextSizes=[Jt["text-size"].possiblyEvaluate(new xr(Le.minZoom),Tt),Jt["text-size"].possiblyEvaluate(new xr(Ge),Tt)]}if(d.iconSizeData.kind==="composite"){var He=d.iconSizeData,ln=He.maxZoom;de.compositeIconSizes=[Jt["icon-size"].possiblyEvaluate(new xr(He.minZoom),Tt),Jt["icon-size"].possiblyEvaluate(new xr(ln),Tt)]}de.layoutTextSize=Jt["text-size"].possiblyEvaluate(new xr(d.zoom+1),Tt),de.layoutIconSize=Jt["icon-size"].possiblyEvaluate(new xr(d.zoom+1),Tt),de.textMaxSize=Jt["text-size"].possiblyEvaluate(new xr(18));for(var In=24*Bt.get("text-line-height"),Cn=Bt.get("text-rotation-alignment")==="map"&&Bt.get("symbol-placement")!=="point",Zn=Bt.get("text-keep-upright"),Kn=Bt.get("text-size"),_r=function(){var oi=kr[jr],Ni=Bt.get("text-font").evaluate(oi,{},Tt).join(","),Fi=Kn.evaluate(oi,{},Tt),oa=de.layoutTextSize.evaluate(oi,{},Tt),ga=de.layoutIconSize.evaluate(oi,{},Tt),ua={horizontal:{},vertical:void 0},ta=oi.text,ro=[0,0];if(ta){var wa=ta.toString(),ma=24*Bt.get("text-letter-spacing").evaluate(oi,{},Tt),rs=function(ys){for(var as=0,mu=ys;as<mu.length;as+=1)if(Du=mu[as].charCodeAt(0),Mi.Arabic(Du)||Mi["Arabic Supplement"](Du)||Mi["Arabic Extended-A"](Du)||Mi["Arabic Presentation Forms-A"](Du)||Mi["Arabic Presentation Forms-B"](Du))return!1;var Du;return!0}(wa)?ma:0,Fa=Bt.get("text-anchor").evaluate(oi,{},Tt),Ws=Bt.get("text-variable-anchor");if(!Ws){var Ya=Bt.get("text-radial-offset").evaluate(oi,{},Tt);ro=Ya?nr(Fa,[24*Ya,an]):Bt.get("text-offset").evaluate(oi,{},Tt).map(function(ys){return 24*ys})}var is=Cn?"center":Bt.get("text-justify").evaluate(oi,{},Tt),Ru=Bt.get("symbol-placement"),fu=Ru==="point"?24*Bt.get("text-max-width").evaluate(oi,{},Tt):0,rl=function(){d.allowVerticalPlacement&&_u(wa)&&(ua.vertical=yi(ta,p,C,$,Ni,fu,In,Fa,"left",rs,ro,Pa.vertical,!0,Ru,oa,Fi))};if(!Cn&&Ws){for(var il=is==="auto"?Ws.map(function(ys){return Or(ys)}):[is],Bl=!1,Sc=0;Sc<il.length;Sc++){var $l=il[Sc];if(!ua.horizontal[$l])if(Bl)ua.horizontal[$l]=ua.horizontal[0];else{var Cc=yi(ta,p,C,$,Ni,fu,In,"center",$l,rs,ro,Pa.horizontal,!1,Ru,oa,Fi);Cc&&(ua.horizontal[$l]=Cc,Bl=Cc.positionedLines.length===1)}}rl()}else{is==="auto"&&(is=Or(Fa));var hc=yi(ta,p,C,$,Ni,fu,In,Fa,is,rs,ro,Pa.horizontal,!1,Ru,oa,Fi);hc&&(ua.horizontal[is]=hc),rl(),_u(wa)&&Cn&&Zn&&(ua.vertical=yi(ta,p,C,$,Ni,fu,In,Fa,is,rs,ro,Pa.vertical,!1,Ru,oa,Fi))}}var Oc=void 0,ac=!1;if(oi.icon&&oi.icon.name){var Nl=N[oi.icon.name];Nl&&(Oc=function(ys,as,mu){var Du=Vl(mu),wc=as[0]-ys.displaySize[0]*Du.horizontalAlign,ju=as[1]-ys.displaySize[1]*Du.verticalAlign;return{image:ys,top:ju,bottom:ju+ys.displaySize[1],left:wc,right:wc+ys.displaySize[0]}}($[oi.icon.name],Bt.get("icon-offset").evaluate(oi,{},Tt),Bt.get("icon-anchor").evaluate(oi,{},Tt)),ac=Nl.sdf,d.sdfIcons===void 0?d.sdfIcons=Nl.sdf:d.sdfIcons!==Nl.sdf&&O("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Nl.pixelRatio!==d.pixelRatio||Bt.get("icon-rotate").constantOr(1)!==0)&&(d.iconsNeedLinear=!0))}var oc=sr(ua.horizontal)||ua.vertical;d.iconsInText=!!oc&&oc.iconsInText,(oc||Oc)&&function(ys,as,mu,Du,wc,ju,gl,_c,hs,jf,rf){var vf=ju.textMaxSize.evaluate(as,{});vf===void 0&&(vf=gl);var $c,Ql=ys.layers[0].layout,Cf=Ql.get("icon-offset").evaluate(as,{},rf),Bf=sr(mu.horizontal),Nf=gl/24,Mh=ys.tilePixelRatio*Nf,Ff=ys.tilePixelRatio*vf/24,Ph=ys.tilePixelRatio*_c,Th=ys.tilePixelRatio*Ql.get("symbol-spacing"),sh=Ql.get("text-padding")*ys.tilePixelRatio,Ah=Ql.get("icon-padding")*ys.tilePixelRatio,Yf=Ql.get("text-max-angle")/180*Math.PI,Uh=Ql.get("text-rotation-alignment")==="map"&&Ql.get("symbol-placement")!=="point",zf=Ql.get("icon-rotation-alignment")==="map"&&Ql.get("symbol-placement")!=="point",uh=Ql.get("symbol-placement"),Ch=Th/2,Zf=Ql.get("icon-text-fit");Du&&Zf!=="none"&&(ys.allowVerticalPlacement&&mu.vertical&&($c=Wo(Du,mu.vertical,Zf,Ql.get("icon-text-fit-padding"),Cf,Nf)),Bf&&(Du=Wo(Du,Bf,Zf,Ql.get("icon-text-fit-padding"),Cf,Nf)));var Uf=function(mt,Pt){Pt.x<0||Pt.x>=8192||Pt.y<0||Pt.y>=8192||function(Rt,Ht,ge,Be,Qe,Bn,ur,Kr,si,zi,Ki,ra,Qa,zo,xs,os,js,Wu,Mo,Hu,ks,Wl,Uo,yu,Pl){var xf,wf,bf,Ef,Sf,Yc=Rt.addToLineVertexArray(Ht,ge),id=0,ad=0,od=0,sd=0,Kh=-1,Xh=-1,kf={},ud=Ae(""),Jh=0,po=0;if(Kr._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Jh=(xf=Kr.layout.get("text-offset").evaluate(ks,{},yu).map(function(vd){return 24*vd}))[0],po=xf[1]):(Jh=24*Kr.layout.get("text-radial-offset").evaluate(ks,{},yu),po=an),Rt.allowVerticalPlacement&&Be.vertical){var Ks=Kr.layout.get("text-rotate").evaluate(ks,{},yu)+90;Ef=new Ln(si,Ht,zi,Ki,ra,Be.vertical,Qa,zo,xs,Ks),ur&&(Sf=new Ln(si,Ht,zi,Ki,ra,ur,js,Wu,xs,Ks))}if(Qe){var qo=Kr.layout.get("icon-rotate").evaluate(ks,{}),$i=Kr.layout.get("icon-text-fit")!=="none",Qc=_o(Qe,qo,Uo,$i),ml=ur?_o(ur,qo,Uo,$i):void 0;bf=new Ln(si,Ht,zi,Ki,ra,Qe,js,Wu,!1,qo),id=4*Qc.length;var af=Rt.iconSizeData,Uc=null;af.kind==="source"?(Uc=[128*Kr.layout.get("icon-size").evaluate(ks,{})])[0]>32640&&O(Rt.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):af.kind==="composite"&&((Uc=[128*Wl.compositeIconSizes[0].evaluate(ks,{},yu),128*Wl.compositeIconSizes[1].evaluate(ks,{},yu)])[0]>32640||Uc[1]>32640)&&O(Rt.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Rt.addSymbols(Rt.icon,Qc,Uc,Hu,Mo,ks,!1,Ht,Yc.lineStartIndex,Yc.lineLength,-1,yu),Kh=Rt.icon.placedSymbolArray.length-1,ml&&(ad=4*ml.length,Rt.addSymbols(Rt.icon,ml,Uc,Hu,Mo,ks,Pa.vertical,Ht,Yc.lineStartIndex,Yc.lineLength,-1,yu),Xh=Rt.icon.placedSymbolArray.length-1)}for(var Kf in Be.horizontal){var Nh=Be.horizontal[Kf];if(!wf){ud=Ae(Nh.text);var gd=Kr.layout.get("text-rotate").evaluate(ks,{},yu);wf=new Ln(si,Ht,zi,Ki,ra,Nh,Qa,zo,xs,gd)}var hd=Nh.positionedLines.length===1;if(od+=Rr(Rt,Ht,Nh,Bn,Kr,xs,ks,os,Yc,Be.vertical?Pa.horizontal:Pa.horizontalOnly,hd?Object.keys(Be.horizontal):[Kf],kf,Kh,Wl,yu),hd)break}Be.vertical&&(sd+=Rr(Rt,Ht,Be.vertical,Bn,Kr,xs,ks,os,Yc,Pa.vertical,["vertical"],kf,Xh,Wl,yu));var md=wf?wf.boxStartIndex:Rt.collisionBoxArray.length,yd=wf?wf.boxEndIndex:Rt.collisionBoxArray.length,xd=Ef?Ef.boxStartIndex:Rt.collisionBoxArray.length,bd=Ef?Ef.boxEndIndex:Rt.collisionBoxArray.length,Ed=bf?bf.boxStartIndex:Rt.collisionBoxArray.length,Sd=bf?bf.boxEndIndex:Rt.collisionBoxArray.length,_d=Sf?Sf.boxStartIndex:Rt.collisionBoxArray.length,Md=Sf?Sf.boxEndIndex:Rt.collisionBoxArray.length,Xf=-1,ld=function(fd,pd){return fd&&fd.circleDiameter?Math.max(fd.circleDiameter,pd):pd};Xf=ld(wf,Xf),Xf=ld(Ef,Xf),Xf=ld(bf,Xf);var dd=(Xf=ld(Sf,Xf))>-1?1:0;dd&&(Xf*=Pl/24),Rt.glyphOffsetArray.length>=Wr.MAX_GLYPHS&&O("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ks.sortKey!==void 0&&Rt.addToSortKeyRanges(Rt.symbolInstances.length,ks.sortKey),Rt.symbolInstances.emplaceBack(Ht.x,Ht.y,kf.right>=0?kf.right:-1,kf.center>=0?kf.center:-1,kf.left>=0?kf.left:-1,kf.vertical||-1,Kh,Xh,ud,md,yd,xd,bd,Ed,Sd,_d,Md,zi,od,sd,id,ad,dd,0,Qa,Jh,po,Xf)}(ys,Pt,mt,mu,Du,wc,$c,ys.layers[0],ys.collisionBoxArray,as.index,as.sourceLayerIndex,ys.index,Mh,sh,Uh,hs,Ph,Ah,zf,Cf,as,ju,jf,rf,gl)};if(uh==="line")for(var Oh=0,wh=Wa(as.geometry,0,0,8192,8192);Oh<wh.length;Oh+=1)for(var Ih=wh[Oh],lh=0,Lh=Vs(Ih,Th,Yf,mu.vertical||Bf,Du,24,Ff,ys.overscaling,8192);lh<Lh.length;lh+=1){var Rh=Lh[lh];Bf&&ar(ys,Bf.text,Ch,Rh)||Uf(Ih,Rh)}else if(uh==="line-center")for(var Of=0,Dh=as.geometry;Of<Dh.length;Of+=1){var ph=Dh[Of];if(ph.length>1){var gh=Jl(ph,Yf,mu.vertical||Bf,Du,24,Ff);gh&&Uf(ph,gh)}}else if(as.type==="Polygon")for(var jh=0,ch=gu(as.geometry,0);jh<ch.length;jh+=1){var mh=ch[jh],yh=Qi(mh,16);Uf(mh[0],new Au(yh.x,yh.y,0))}else if(as.type==="LineString")for(var fh=0,xh=as.geometry;fh<xh.length;fh+=1){var kh=xh[fh];Uf(kh,new Au(kh[0].x,kh[0].y,0))}else if(as.type==="Point")for(var Bh=0,Yh=as.geometry;Bh<Yh.length;Bh+=1)for(var Zh=0,tt=Yh[Bh];Zh<tt.length;Zh+=1){var _t=tt[Zh];Uf([_t],new Au(_t.x,_t.y,0))}}(d,oi,ua,Oc,N,de,oa,ga,ro,ac,Tt)},jr=0,kr=d.features;jr<kr.length;jr+=1)_r();lt&&d.generateCollisionDebugBuffers()},t.perspective=function(d,p,C,N,$){var lt,Tt=1/Math.tan(p/2);return d[0]=Tt/C,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=Tt,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,$!=null&&$!==1/0?(d[10]=($+N)*(lt=1/(N-$)),d[14]=2*$*N*lt):(d[10]=-1,d[14]=-2*N),d},t.pick=function(d,p){for(var C={},N=0;N<p.length;N++){var $=p[N];$ in d&&(C[$]=d[$])}return C},t.plugin=ci,t.polygonIntersectsPolygon=uc,t.postMapLoadEvent=Wt,t.postTurnstileEvent=ee,t.potpack=mi,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Yi,t.registerForPluginStateChange=function(d){return d({pluginStatus:tn,pluginURL:On}),Zr.on("pluginStateChange",d),d},t.renderColorRamp=cf,t.rotate=function(d,p,C){var N=p[0],$=p[1],lt=p[2],Tt=p[3],Bt=Math.sin(C),Jt=Math.cos(C);return d[0]=N*Jt+lt*Bt,d[1]=$*Jt+Tt*Bt,d[2]=N*-Bt+lt*Jt,d[3]=$*-Bt+Tt*Jt,d},t.rotateX=function(d,p,C){var N=Math.sin(C),$=Math.cos(C),lt=p[4],Tt=p[5],Bt=p[6],Jt=p[7],de=p[8],Le=p[9],Ge=p[10],He=p[11];return p!==d&&(d[0]=p[0],d[1]=p[1],d[2]=p[2],d[3]=p[3],d[12]=p[12],d[13]=p[13],d[14]=p[14],d[15]=p[15]),d[4]=lt*$+de*N,d[5]=Tt*$+Le*N,d[6]=Bt*$+Ge*N,d[7]=Jt*$+He*N,d[8]=de*$-lt*N,d[9]=Le*$-Tt*N,d[10]=Ge*$-Bt*N,d[11]=He*$-Jt*N,d},t.rotateZ=function(d,p,C){var N=Math.sin(C),$=Math.cos(C),lt=p[0],Tt=p[1],Bt=p[2],Jt=p[3],de=p[4],Le=p[5],Ge=p[6],He=p[7];return p!==d&&(d[8]=p[8],d[9]=p[9],d[10]=p[10],d[11]=p[11],d[12]=p[12],d[13]=p[13],d[14]=p[14],d[15]=p[15]),d[0]=lt*$+de*N,d[1]=Tt*$+Le*N,d[2]=Bt*$+Ge*N,d[3]=Jt*$+He*N,d[4]=de*$-lt*N,d[5]=Le*$-Tt*N,d[6]=Ge*$-Bt*N,d[7]=He*$-Jt*N,d},t.scale=function(d,p,C){var N=C[0],$=C[1],lt=C[2];return d[0]=p[0]*N,d[1]=p[1]*N,d[2]=p[2]*N,d[3]=p[3]*N,d[4]=p[4]*$,d[5]=p[5]*$,d[6]=p[6]*$,d[7]=p[7]*$,d[8]=p[8]*lt,d[9]=p[9]*lt,d[10]=p[10]*lt,d[11]=p[11]*lt,d[12]=p[12],d[13]=p[13],d[14]=p[14],d[15]=p[15],d},t.scale$1=function(d,p,C){return d[0]=p[0]*C,d[1]=p[1]*C,d[2]=p[2]*C,d[3]=p[3]*C,d},t.scale$2=function(d,p,C){return d[0]=p[0]*C,d[1]=p[1]*C,d[2]=p[2]*C,d},t.setCacheLimits=function(d,p){ae=d,le=p},t.setRTLTextPlugin=function(d,p,C){if(C===void 0&&(C=!1),tn==="deferred"||tn==="loading"||tn==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");On=Ot.resolveURL(d),tn="deferred",hn=p,Ir(),C||zr()},t.sphericalToCartesian=function(d){var p=d[0],C=d[1],N=d[2];return C+=90,C*=Math.PI/180,N*=Math.PI/180,{x:p*Math.cos(C)*Math.sin(N),y:p*Math.sin(C)*Math.sin(N),z:p*Math.cos(N)}},t.sqrLen=function(d){var p=d[0],C=d[1];return p*p+C*C},t.styleSpec=ue,t.sub=function(d,p,C){return d[0]=p[0]-C[0],d[1]=p[1]-C[1],d[2]=p[2]-C[2],d},t.symbolSize=nc,t.transformMat3=function(d,p,C){var N=p[0],$=p[1],lt=p[2];return d[0]=N*C[0]+$*C[3]+lt*C[6],d[1]=N*C[1]+$*C[4]+lt*C[7],d[2]=N*C[2]+$*C[5]+lt*C[8],d},t.transformMat4=kl,t.translate=function(d,p,C){var N,$,lt,Tt,Bt,Jt,de,Le,Ge,He,ln,In,Cn=C[0],Zn=C[1],Kn=C[2];return p===d?(d[12]=p[0]*Cn+p[4]*Zn+p[8]*Kn+p[12],d[13]=p[1]*Cn+p[5]*Zn+p[9]*Kn+p[13],d[14]=p[2]*Cn+p[6]*Zn+p[10]*Kn+p[14],d[15]=p[3]*Cn+p[7]*Zn+p[11]*Kn+p[15]):($=p[1],lt=p[2],Tt=p[3],Bt=p[4],Jt=p[5],de=p[6],Le=p[7],Ge=p[8],He=p[9],ln=p[10],In=p[11],d[0]=N=p[0],d[1]=$,d[2]=lt,d[3]=Tt,d[4]=Bt,d[5]=Jt,d[6]=de,d[7]=Le,d[8]=Ge,d[9]=He,d[10]=ln,d[11]=In,d[12]=N*Cn+Bt*Zn+Ge*Kn+p[12],d[13]=$*Cn+Jt*Zn+He*Kn+p[13],d[14]=lt*Cn+de*Zn+ln*Kn+p[14],d[15]=Tt*Cn+Le*Zn+In*Kn+p[15]),d},t.triggerPluginCompletionEvent=fr,t.uniqueId=g,t.validateCustomStyleLayer=function(d){var p=[],C=d.id;return C===void 0&&p.push({message:"layers."+C+': missing required property "id"'}),d.render===void 0&&p.push({message:"layers."+C+': missing required method "render"'}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&p.push({message:"layers."+C+': property "renderingMode" must be either "2d" or "3d"'}),p},t.validateLight=xc,t.validateStyle=Qu,t.values=function(d){var p=[];for(var C in d)p.push(d[C]);return p},t.vectorTile=mf,t.version="1.13.1",t.warnOnce=O,t.webpSupported=xt,t.window=n,t.wrap=f}),e(["./shared"],function(t){"use strict";function u(Ce){var Me=typeof Ce;if(Me==="number"||Me==="boolean"||Me==="string"||Ce==null)return JSON.stringify(Ce);if(Array.isArray(Ce)){for(var Qt="[",pe=0,Vt=Ce;pe<Vt.length;pe+=1)Qt+=u(Vt[pe])+",";return Qt+"]"}for(var re=Object.keys(Ce).sort(),Te="{",ue=0;ue<re.length;ue++)Te+=JSON.stringify(re[ue])+":"+u(Ce[re[ue]])+",";return Te+"}"}function s(Ce){for(var Me="",Qt=0,pe=t.refProperties;Qt<pe.length;Qt+=1)Me+="/"+u(Ce[pe[Qt]]);return Me}var c=function(Me){this.keyCache={},Me&&this.replace(Me)};c.prototype.replace=function(Ce){this._layerConfigs={},this._layers={},this.update(Ce,[])},c.prototype.update=function(Ce,Me){for(var Qt=this,pe=0,Vt=Ce;pe<Vt.length;pe+=1){var re=Vt[pe];this._layerConfigs[re.id]=re;var Te=this._layers[re.id]=t.createStyleLayer(re);Te._featureFilter=t.featureFilter(Te.filter),this.keyCache[re.id]&&delete this.keyCache[re.id]}for(var ue=0,xe=Me;ue<xe.length;ue+=1){var Ke=xe[ue];delete this.keyCache[Ke],delete this._layerConfigs[Ke],delete this._layers[Ke]}this.familiesBySource={};for(var Rn=0,tr=function(Sr,Re){for(var $e={},Ve=0;Ve<Sr.length;Ve++){var En=Re&&Re[Sr[Ve].id]||s(Sr[Ve]);Re&&(Re[Sr[Ve].id]=En);var xn=$e[En];xn||(xn=$e[En]=[]),xn.push(Sr[Ve])}var Nn=[];for(var mn in $e)Nn.push($e[mn]);return Nn}(t.values(this._layerConfigs),this.keyCache);Rn<tr.length;Rn+=1){var Pn=tr[Rn].map(function(Sr){return Qt._layers[Sr.id]}),dn=Pn[0];if(dn.visibility!=="none"){var Ar=dn.source||"",or=this.familiesBySource[Ar];or||(or=this.familiesBySource[Ar]={});var cn=dn.sourceLayer||"_geojsonTileLayer",Pr=or[cn];Pr||(Pr=or[cn]=[]),Pr.push(Pn)}}};var r=function(Me){var Qt={},pe=[];for(var Vt in Me){var re=Me[Vt],Te=Qt[Vt]={};for(var ue in re){var xe=re[+ue];if(xe&&xe.bitmap.width!==0&&xe.bitmap.height!==0){var Ke={x:0,y:0,w:xe.bitmap.width+2,h:xe.bitmap.height+2};pe.push(Ke),Te[ue]={rect:Ke,metrics:xe.metrics}}}}var Rn=t.potpack(pe),tr=new t.AlphaImage({width:Rn.w||1,height:Rn.h||1});for(var Pn in Me){var dn=Me[Pn];for(var Ar in dn){var or=dn[+Ar];if(or&&or.bitmap.width!==0&&or.bitmap.height!==0){var cn=Qt[Pn][Ar].rect;t.AlphaImage.copy(or.bitmap,tr,{x:0,y:0},{x:cn.x+1,y:cn.y+1},or.bitmap)}}}this.image=tr,this.positions=Qt};t.register("GlyphAtlas",r);var h=function(Me){this.tileID=new t.OverscaledTileID(Me.tileID.overscaledZ,Me.tileID.wrap,Me.tileID.canonical.z,Me.tileID.canonical.x,Me.tileID.canonical.y),this.uid=Me.uid,this.zoom=Me.zoom,this.pixelRatio=Me.pixelRatio,this.tileSize=Me.tileSize,this.source=Me.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Me.showCollisionBoxes,this.collectResourceTiming=!!Me.collectResourceTiming,this.returnDependencies=!!Me.returnDependencies,this.promoteId=Me.promoteId};function n(Ce,Me,Qt){for(var pe=new t.EvaluationParameters(Me),Vt=0,re=Ce;Vt<re.length;Vt+=1)re[Vt].recalculate(pe,Qt)}function i(Ce,Me){var Qt=t.getArrayBuffer(Ce.request,function(pe,Vt,re,Te){pe?Me(pe):Vt&&Me(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(Vt)),rawData:Vt,cacheControl:re,expires:Te})});return function(){Qt.cancel(),Me()}}h.prototype.parse=function(Ce,Me,Qt,pe,Vt){var re=this;this.status="parsing",this.data=Ce,this.collisionBoxArray=new t.CollisionBoxArray;var Te=new t.DictionaryCoder(Object.keys(Ce.layers).sort()),ue=new t.FeatureIndex(this.tileID,this.promoteId);ue.bucketLayerIDs=[];var xe,Ke,Rn,tr,Pn={},dn={featureIndex:ue,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Qt},Ar=Me.familiesBySource[this.source];for(var or in Ar){var cn=Ce.layers[or];if(cn){cn.version===1&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+or+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Pr=Te.encode(or),Sr=[],Re=0;Re<cn.length;Re++){var $e=cn.feature(Re),Ve=ue.getId($e,or);Sr.push({feature:$e,id:Ve,index:Re,sourceLayerIndex:Pr})}for(var En=0,xn=Ar[or];En<xn.length;En+=1){var Nn=xn[En],mn=Nn[0];mn.minzoom&&this.zoom<Math.floor(mn.minzoom)||mn.maxzoom&&this.zoom>=mn.maxzoom||mn.visibility!=="none"&&(n(Nn,this.zoom,Qt),(Pn[mn.id]=mn.createBucket({index:ue.bucketLayerIDs.length,layers:Nn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Pr,sourceID:this.source})).populate(Sr,dn,this.tileID.canonical),ue.bucketLayerIDs.push(Nn.map(function(br){return br.id})))}}}var Dn=t.mapObject(dn.glyphDependencies,function(br){return Object.keys(br).map(Number)});Object.keys(Dn).length?pe.send("getGlyphs",{uid:this.uid,stacks:Dn},function(br,yr){xe||(xe=br,Ke=yr,_n.call(re))}):Ke={};var $n=Object.keys(dn.iconDependencies);$n.length?pe.send("getImages",{icons:$n,source:this.source,tileID:this.tileID,type:"icons"},function(br,yr){xe||(xe=br,Rn=yr,_n.call(re))}):Rn={};var Hn=Object.keys(dn.patternDependencies);function _n(){if(xe)return Vt(xe);if(Ke&&Rn&&tr){var br=new r(Ke),yr=new t.ImageAtlas(Rn,tr);for(var Fr in Pn){var Ei=Pn[Fr];Ei instanceof t.SymbolBucket?(n(Ei.layers,this.zoom,Qt),t.performSymbolLayout(Ei,Ke,br.positions,Rn,yr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Ei.hasPattern&&(Ei instanceof t.LineBucket||Ei instanceof t.FillBucket||Ei instanceof t.FillExtrusionBucket)&&(n(Ei.layers,this.zoom,Qt),Ei.addFeatures(dn,this.tileID.canonical,yr.patternPositions))}this.status="done",Vt(null,{buckets:t.values(Pn).filter(function(Ta){return!Ta.isEmpty()}),featureIndex:ue,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:br.image,imageAtlas:yr,glyphMap:this.returnDependencies?Ke:null,iconMap:this.returnDependencies?Rn:null,glyphPositions:this.returnDependencies?br.positions:null})}}Hn.length?pe.send("getImages",{icons:Hn,source:this.source,tileID:this.tileID,type:"patterns"},function(br,yr){xe||(xe=br,tr=yr,_n.call(re))}):tr={},_n.call(this)};var a=function(Me,Qt,pe,Vt){this.actor=Me,this.layerIndex=Qt,this.availableImages=pe,this.loadVectorData=Vt||i,this.loading={},this.loaded={}};a.prototype.loadTile=function(Ce,Me){var Qt=this,pe=Ce.uid;this.loading||(this.loading={});var Vt=!!(Ce&&Ce.request&&Ce.request.collectResourceTiming)&&new t.RequestPerformance(Ce.request),re=this.loading[pe]=new h(Ce);re.abort=this.loadVectorData(Ce,function(Te,ue){if(delete Qt.loading[pe],Te||!ue)return re.status="done",Qt.loaded[pe]=re,Me(Te);var xe=ue.rawData,Ke={};ue.expires&&(Ke.expires=ue.expires),ue.cacheControl&&(Ke.cacheControl=ue.cacheControl);var Rn={};if(Vt){var tr=Vt.finish();tr&&(Rn.resourceTiming=JSON.parse(JSON.stringify(tr)))}re.vectorTile=ue.vectorTile,re.parse(ue.vectorTile,Qt.layerIndex,Qt.availableImages,Qt.actor,function(Pn,dn){if(Pn||!dn)return Me(Pn);Me(null,t.extend({rawTileData:xe.slice(0)},dn,Ke,Rn))}),Qt.loaded=Qt.loaded||{},Qt.loaded[pe]=re})},a.prototype.reloadTile=function(Ce,Me){var Qt=this,pe=this.loaded,Vt=Ce.uid,re=this;if(pe&&pe[Vt]){var Te=pe[Vt];Te.showCollisionBoxes=Ce.showCollisionBoxes;var ue=function(Ke,Rn){var tr=Te.reloadCallback;tr&&(delete Te.reloadCallback,Te.parse(Te.vectorTile,re.layerIndex,Qt.availableImages,re.actor,tr)),Me(Ke,Rn)};Te.status==="parsing"?Te.reloadCallback=ue:Te.status==="done"&&(Te.vectorTile?Te.parse(Te.vectorTile,this.layerIndex,this.availableImages,this.actor,ue):ue())}},a.prototype.abortTile=function(Ce,Me){var Qt=this.loading,pe=Ce.uid;Qt&&Qt[pe]&&Qt[pe].abort&&(Qt[pe].abort(),delete Qt[pe]),Me()},a.prototype.removeTile=function(Ce,Me){var Qt=this.loaded,pe=Ce.uid;Qt&&Qt[pe]&&delete Qt[pe],Me()};var o=t.window.ImageBitmap,l=function(){this.loaded={}};function f(Ce,Me){if(Ce.length!==0){v(Ce[0],Me);for(var Qt=1;Qt<Ce.length;Qt++)v(Ce[Qt],!Me)}}function v(Ce,Me){for(var Qt=0,pe=0,Vt=Ce.length,re=Vt-1;pe<Vt;re=pe++)Qt+=(Ce[pe][0]-Ce[re][0])*(Ce[re][1]+Ce[pe][1]);Qt>=0!=!!Me&&Ce.reverse()}l.prototype.loadTile=function(Ce,Me){var Qt=Ce.uid,pe=Ce.encoding,Vt=Ce.rawImageData,re=o&&Vt instanceof o?this.getImageData(Vt):Vt,Te=new t.DEMData(Qt,re,pe);this.loaded=this.loaded||{},this.loaded[Qt]=Te,Me(null,Te)},l.prototype.getImageData=function(Ce){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ce.width,Ce.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ce.width,this.offscreenCanvas.height=Ce.height,this.offscreenCanvasContext.drawImage(Ce,0,0,Ce.width,Ce.height);var Me=this.offscreenCanvasContext.getImageData(-1,-1,Ce.width+2,Ce.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:Me.width,height:Me.height},Me.data)},l.prototype.removeTile=function(Ce){var Me=this.loaded,Qt=Ce.uid;Me&&Me[Qt]&&delete Me[Qt]};var b=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,g=function(Me){this._feature=Me,this.extent=t.EXTENT,this.type=Me.type,this.properties=Me.tags,"id"in Me&&!isNaN(Me.id)&&(this.id=parseInt(Me.id,10))};g.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Ce=[],Me=0,Qt=this._feature.geometry;Me<Qt.length;Me+=1){var pe=Qt[Me];Ce.push([new t.Point$1(pe[0],pe[1])])}return Ce}for(var Vt=[],re=0,Te=this._feature.geometry;re<Te.length;re+=1){for(var ue=[],xe=0,Ke=Te[re];xe<Ke.length;xe+=1){var Rn=Ke[xe];ue.push(new t.Point$1(Rn[0],Rn[1]))}Vt.push(ue)}return Vt},g.prototype.toGeoJSON=function(Ce,Me,Qt){return b.call(this,Ce,Me,Qt)};var m=function(Me){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=Me.length,this._features=Me};m.prototype.feature=function(Ce){return new g(this._features[Ce])};var _=t.vectorTile.VectorTileFeature,M=x;function x(Ce,Me){this.options=Me||{},this.features=Ce,this.length=Ce.length}function y(Ce,Me){this.id=typeof Ce.id=="number"?Ce.id:void 0,this.type=Ce.type,this.rawGeometry=Ce.type===1?[Ce.geometry]:Ce.geometry,this.properties=Ce.tags,this.extent=Me||4096}x.prototype.feature=function(Ce){return new y(this.features[Ce],this.options.extent)},y.prototype.loadGeometry=function(){var Ce=this.rawGeometry;this.geometry=[];for(var Me=0;Me<Ce.length;Me++){for(var Qt=Ce[Me],pe=[],Vt=0;Vt<Qt.length;Vt++)pe.push(new t.Point$1(Qt[Vt][0],Qt[Vt][1]));this.geometry.push(pe)}return this.geometry},y.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ce=this.geometry,Me=1/0,Qt=-1/0,pe=1/0,Vt=-1/0,re=0;re<Ce.length;re++)for(var Te=Ce[re],ue=0;ue<Te.length;ue++){var xe=Te[ue];Me=Math.min(Me,xe.x),Qt=Math.max(Qt,xe.x),pe=Math.min(pe,xe.y),Vt=Math.max(Vt,xe.y)}return[Me,pe,Qt,Vt]},y.prototype.toGeoJSON=_.prototype.toGeoJSON;var S=A,P=M;function A(Ce){var Me=new t.pbf;return function(Qt,pe){for(var Vt in Qt.layers)pe.writeMessage(3,O,Qt.layers[Vt])}(Ce,Me),Me.finish()}function O(Ce,Me){var Qt;Me.writeVarintField(15,Ce.version||1),Me.writeStringField(1,Ce.name||""),Me.writeVarintField(5,Ce.extent||4096);var pe={keys:[],values:[],keycache:{},valuecache:{}};for(Qt=0;Qt<Ce.length;Qt++)pe.feature=Ce.feature(Qt),Me.writeMessage(2,L,pe);var Vt=pe.keys;for(Qt=0;Qt<Vt.length;Qt++)Me.writeStringField(3,Vt[Qt]);var re=pe.values;for(Qt=0;Qt<re.length;Qt++)Me.writeMessage(4,U,re[Qt])}function L(Ce,Me){var Qt=Ce.feature;Qt.id!==void 0&&Me.writeVarintField(1,Qt.id),Me.writeMessage(2,H,Ce),Me.writeVarintField(3,Qt.type),Me.writeMessage(4,G,Qt)}function H(Ce,Me){var Qt=Ce.feature,pe=Ce.keys,Vt=Ce.values,re=Ce.keycache,Te=Ce.valuecache;for(var ue in Qt.properties){var xe=re[ue];xe===void 0&&(pe.push(ue),re[ue]=xe=pe.length-1),Me.writeVarint(xe);var Ke=Qt.properties[ue],Rn=typeof Ke;Rn!=="string"&&Rn!=="boolean"&&Rn!=="number"&&(Ke=JSON.stringify(Ke));var tr=Rn+":"+Ke,Pn=Te[tr];Pn===void 0&&(Vt.push(Ke),Te[tr]=Pn=Vt.length-1),Me.writeVarint(Pn)}}function F(Ce,Me){return(Me<<3)+(7&Ce)}function Z(Ce){return Ce<<1^Ce>>31}function G(Ce,Me){for(var Qt=Ce.loadGeometry(),pe=Ce.type,Vt=0,re=0,Te=Qt.length,ue=0;ue<Te;ue++){var xe=Qt[ue],Ke=1;pe===1&&(Ke=xe.length),Me.writeVarint(F(1,Ke));for(var Rn=pe===3?xe.length-1:xe.length,tr=0;tr<Rn;tr++){tr===1&&pe!==1&&Me.writeVarint(F(2,Rn-1));var Pn=xe[tr].x-Vt,dn=xe[tr].y-re;Me.writeVarint(Z(Pn)),Me.writeVarint(Z(dn)),Vt+=Pn,re+=dn}pe===3&&Me.writeVarint(F(7,1))}}function U(Ce,Me){var Qt=typeof Ce;Qt==="string"?Me.writeStringField(1,Ce):Qt==="boolean"?Me.writeBooleanField(7,Ce):Qt==="number"&&(Ce%1!=0?Me.writeDoubleField(3,Ce):Ce<0?Me.writeSVarintField(6,Ce):Me.writeVarintField(5,Ce))}function Y(Ce,Me,Qt,pe){J(Ce,Qt,pe),J(Me,2*Qt,2*pe),J(Me,2*Qt+1,2*pe+1)}function J(Ce,Me,Qt){var pe=Ce[Me];Ce[Me]=Ce[Qt],Ce[Qt]=pe}function rt(Ce,Me,Qt,pe){var Vt=Ce-Qt,re=Me-pe;return Vt*Vt+re*re}S.fromVectorTileJs=A,S.fromGeojsonVt=function(Ce,Me){Me=Me||{};var Qt={};for(var pe in Ce)Qt[pe]=new M(Ce[pe].features,Me),Qt[pe].name=pe,Qt[pe].version=Me.version,Qt[pe].extent=Me.extent;return A({layers:Qt})},S.GeoJSONWrapper=P;var ft=function(Me){return Me[0]},dt=function(Me){return Me[1]},ut=function(Me,Qt,pe,Vt,re){Qt===void 0&&(Qt=ft),pe===void 0&&(pe=dt),Vt===void 0&&(Vt=64),re===void 0&&(re=Float64Array),this.nodeSize=Vt,this.points=Me;for(var Te=Me.length<65536?Uint16Array:Uint32Array,ue=this.ids=new Te(Me.length),xe=this.coords=new re(2*Me.length),Ke=0;Ke<Me.length;Ke++)ue[Ke]=Ke,xe[2*Ke]=Qt(Me[Ke]),xe[2*Ke+1]=pe(Me[Ke]);(function Rn(tr,Pn,dn,Ar,or,cn){if(!(or-Ar<=dn)){var Pr=Ar+or>>1;(function Sr(Re,$e,Ve,En,xn,Nn){for(;xn>En;){if(xn-En>600){var mn=xn-En+1,Dn=Ve-En+1,$n=Math.log(mn),Hn=.5*Math.exp(2*$n/3),_n=.5*Math.sqrt($n*Hn*(mn-Hn)/mn)*(Dn-mn/2<0?-1:1);Sr(Re,$e,Ve,Math.max(En,Math.floor(Ve-Dn*Hn/mn+_n)),Math.min(xn,Math.floor(Ve+(mn-Dn)*Hn/mn+_n)),Nn)}var br=$e[2*Ve+Nn],yr=En,Fr=xn;for(Y(Re,$e,En,Ve),$e[2*xn+Nn]>br&&Y(Re,$e,En,xn);yr<Fr;){for(Y(Re,$e,yr,Fr),yr++,Fr--;$e[2*yr+Nn]<br;)yr++;for(;$e[2*Fr+Nn]>br;)Fr--}$e[2*En+Nn]===br?Y(Re,$e,En,Fr):Y(Re,$e,++Fr,xn),Fr<=Ve&&(En=Fr+1),Ve<=Fr&&(xn=Fr-1)}})(tr,Pn,Pr,Ar,or,cn%2),Rn(tr,Pn,dn,Ar,Pr-1,cn+1),Rn(tr,Pn,dn,Pr+1,or,cn+1)}})(ue,xe,Vt,0,ue.length-1,0)};ut.prototype.range=function(Ce,Me,Qt,pe){return function(Vt,re,Te,ue,xe,Ke,Rn){for(var tr,Pn,dn=[0,Vt.length-1,0],Ar=[];dn.length;){var or=dn.pop(),cn=dn.pop(),Pr=dn.pop();if(cn-Pr<=Rn)for(var Sr=Pr;Sr<=cn;Sr++)Pn=re[2*Sr+1],(tr=re[2*Sr])>=Te&&tr<=xe&&Pn>=ue&&Pn<=Ke&&Ar.push(Vt[Sr]);else{var Re=Math.floor((Pr+cn)/2);Pn=re[2*Re+1],(tr=re[2*Re])>=Te&&tr<=xe&&Pn>=ue&&Pn<=Ke&&Ar.push(Vt[Re]);var $e=(or+1)%2;(or===0?Te<=tr:ue<=Pn)&&(dn.push(Pr),dn.push(Re-1),dn.push($e)),(or===0?xe>=tr:Ke>=Pn)&&(dn.push(Re+1),dn.push(cn),dn.push($e))}}return Ar}(this.ids,this.coords,Ce,Me,Qt,pe,this.nodeSize)},ut.prototype.within=function(Ce,Me,Qt){return function(pe,Vt,re,Te,ue,xe){for(var Ke=[0,pe.length-1,0],Rn=[],tr=ue*ue;Ke.length;){var Pn=Ke.pop(),dn=Ke.pop(),Ar=Ke.pop();if(dn-Ar<=xe)for(var or=Ar;or<=dn;or++)rt(Vt[2*or],Vt[2*or+1],re,Te)<=tr&&Rn.push(pe[or]);else{var cn=Math.floor((Ar+dn)/2),Pr=Vt[2*cn],Sr=Vt[2*cn+1];rt(Pr,Sr,re,Te)<=tr&&Rn.push(pe[cn]);var Re=(Pn+1)%2;(Pn===0?re-ue<=Pr:Te-ue<=Sr)&&(Ke.push(Ar),Ke.push(cn-1),Ke.push(Re)),(Pn===0?re+ue>=Pr:Te+ue>=Sr)&&(Ke.push(cn+1),Ke.push(dn),Ke.push(Re))}}return Rn}(this.ids,this.coords,Ce,Me,Qt,this.nodeSize)};var Lt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Me){return Me}},Ft=function(Me){this.options=z(Object.create(Lt),Me),this.trees=new Array(this.options.maxZoom+1)};function Ot(Ce,Me,Qt,pe,Vt){return{x:Ce,y:Me,zoom:1/0,id:Qt,parentId:-1,numPoints:pe,properties:Vt}}function St(Ce,Me){var Qt=Ce.geometry.coordinates,pe=Qt[1];return{x:nt(Qt[0]),y:Mt(pe),zoom:1/0,index:Me,parentId:-1}}function xt(Ce){return{type:"Feature",id:Ce.id,properties:At(Ce),geometry:{type:"Point",coordinates:[(pe=Ce.x,360*(pe-.5)),(Me=Ce.y,Qt=(180-360*Me)*Math.PI/180,360*Math.atan(Math.exp(Qt))/Math.PI-90)]}};var Me,Qt,pe}function At(Ce){var Me=Ce.numPoints,Qt=Me>=1e4?Math.round(Me/1e3)+"k":Me>=1e3?Math.round(Me/100)/10+"k":Me;return z(z({},Ce.properties),{cluster:!0,cluster_id:Ce.id,point_count:Me,point_count_abbreviated:Qt})}function nt(Ce){return Ce/360+.5}function Mt(Ce){var Me=Math.sin(Ce*Math.PI/180),Qt=.5-.25*Math.log((1+Me)/(1-Me))/Math.PI;return Qt<0?0:Qt>1?1:Qt}function z(Ce,Me){for(var Qt in Me)Ce[Qt]=Me[Qt];return Ce}function Q(Ce){return Ce.x}function ht(Ce){return Ce.y}function et(Ce,Me,Qt,pe,Vt,re){var Te=Vt-Qt,ue=re-pe;if(Te!==0||ue!==0){var xe=((Ce-Qt)*Te+(Me-pe)*ue)/(Te*Te+ue*ue);xe>1?(Qt=Vt,pe=re):xe>0&&(Qt+=Te*xe,pe+=ue*xe)}return(Te=Ce-Qt)*Te+(ue=Me-pe)*ue}function at(Ce,Me,Qt,pe){var Vt={id:Ce===void 0?null:Ce,type:Me,geometry:Qt,tags:pe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(re){var Te=re.geometry,ue=re.type;if(ue==="Point"||ue==="MultiPoint"||ue==="LineString")gt(re,Te);else if(ue==="Polygon"||ue==="MultiLineString")for(var xe=0;xe<Te.length;xe++)gt(re,Te[xe]);else if(ue==="MultiPolygon")for(xe=0;xe<Te.length;xe++)for(var Ke=0;Ke<Te[xe].length;Ke++)gt(re,Te[xe][Ke])}(Vt),Vt}function gt(Ce,Me){for(var Qt=0;Qt<Me.length;Qt+=3)Ce.minX=Math.min(Ce.minX,Me[Qt]),Ce.minY=Math.min(Ce.minY,Me[Qt+1]),Ce.maxX=Math.max(Ce.maxX,Me[Qt]),Ce.maxY=Math.max(Ce.maxY,Me[Qt+1])}function k(Ce,Me,Qt,pe){if(Me.geometry){var Vt=Me.geometry.coordinates,re=Me.geometry.type,Te=Math.pow(Qt.tolerance/((1<<Qt.maxZoom)*Qt.extent),2),ue=[],xe=Me.id;if(Qt.promoteId?xe=Me.properties[Qt.promoteId]:Qt.generateId&&(xe=pe||0),re==="Point")ot(Vt,ue);else if(re==="MultiPoint")for(var Ke=0;Ke<Vt.length;Ke++)ot(Vt[Ke],ue);else if(re==="LineString")it(Vt,ue,Te,!1);else if(re==="MultiLineString"){if(Qt.lineMetrics){for(Ke=0;Ke<Vt.length;Ke++)it(Vt[Ke],ue=[],Te,!1),Ce.push(at(xe,"LineString",ue,Me.properties));return}X(Vt,ue,Te,!1)}else if(re==="Polygon")X(Vt,ue,Te,!0);else{if(re!=="MultiPolygon"){if(re==="GeometryCollection"){for(Ke=0;Ke<Me.geometry.geometries.length;Ke++)k(Ce,{id:xe,geometry:Me.geometry.geometries[Ke],properties:Me.properties},Qt,pe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ke=0;Ke<Vt.length;Ke++){var Rn=[];X(Vt[Ke],Rn,Te,!0),ue.push(Rn)}}Ce.push(at(xe,re,ue,Me.properties))}}function ot(Ce,Me){Me.push(Et(Ce[0])),Me.push(vt(Ce[1])),Me.push(0)}function it(Ce,Me,Qt,pe){for(var Vt,re,Te=0,ue=0;ue<Ce.length;ue++){var xe=Et(Ce[ue][0]),Ke=vt(Ce[ue][1]);Me.push(xe),Me.push(Ke),Me.push(0),ue>0&&(Te+=pe?(Vt*Ke-xe*re)/2:Math.sqrt(Math.pow(xe-Vt,2)+Math.pow(Ke-re,2))),Vt=xe,re=Ke}var Rn=Me.length-3;Me[2]=1,function tr(Pn,dn,Ar,or){for(var cn,Pr=or,Sr=Ar-dn>>1,Re=Ar-dn,$e=Pn[dn],Ve=Pn[dn+1],En=Pn[Ar],xn=Pn[Ar+1],Nn=dn+3;Nn<Ar;Nn+=3){var mn=et(Pn[Nn],Pn[Nn+1],$e,Ve,En,xn);if(mn>Pr)cn=Nn,Pr=mn;else if(mn===Pr){var Dn=Math.abs(Nn-Sr);Dn<Re&&(cn=Nn,Re=Dn)}}Pr>or&&(cn-dn>3&&tr(Pn,dn,cn,or),Pn[cn+2]=Pr,Ar-cn>3&&tr(Pn,cn,Ar,or))}(Me,0,Rn,Qt),Me[Rn+2]=1,Me.size=Math.abs(Te),Me.start=0,Me.end=Me.size}function X(Ce,Me,Qt,pe){for(var Vt=0;Vt<Ce.length;Vt++){var re=[];it(Ce[Vt],re,Qt,pe),Me.push(re)}}function Et(Ce){return Ce/360+.5}function vt(Ce){var Me=Math.sin(Ce*Math.PI/180),Qt=.5-.25*Math.log((1+Me)/(1-Me))/Math.PI;return Qt<0?0:Qt>1?1:Qt}function Nt(Ce,Me,Qt,pe,Vt,re,Te,ue){if(pe/=Me,re>=(Qt/=Me)&&Te<pe)return Ce;if(Te<Qt||re>=pe)return null;for(var xe=[],Ke=0;Ke<Ce.length;Ke++){var Rn=Ce[Ke],tr=Rn.geometry,Pn=Rn.type,dn=Vt===0?Rn.minX:Rn.minY,Ar=Vt===0?Rn.maxX:Rn.maxY;if(dn>=Qt&&Ar<pe)xe.push(Rn);else if(!(Ar<Qt||dn>=pe)){var or=[];if(Pn==="Point"||Pn==="MultiPoint")$t(tr,or,Qt,pe,Vt);else if(Pn==="LineString")ee(tr,or,Qt,pe,Vt,!1,ue.lineMetrics);else if(Pn==="MultiLineString")Wt(tr,or,Qt,pe,Vt,!1);else if(Pn==="Polygon")Wt(tr,or,Qt,pe,Vt,!0);else if(Pn==="MultiPolygon")for(var cn=0;cn<tr.length;cn++){var Pr=[];Wt(tr[cn],Pr,Qt,pe,Vt,!0),Pr.length&&or.push(Pr)}if(or.length){if(ue.lineMetrics&&Pn==="LineString"){for(cn=0;cn<or.length;cn++)xe.push(at(Rn.id,Pn,or[cn],Rn.tags));continue}Pn!=="LineString"&&Pn!=="MultiLineString"||(or.length===1?(Pn="LineString",or=or[0]):Pn="MultiLineString"),Pn!=="Point"&&Pn!=="MultiPoint"||(Pn=or.length===3?"Point":"MultiPoint"),xe.push(at(Rn.id,Pn,or,Rn.tags))}}}return xe.length?xe:null}function $t(Ce,Me,Qt,pe,Vt){for(var re=0;re<Ce.length;re+=3){var Te=Ce[re+Vt];Te>=Qt&&Te<=pe&&(Me.push(Ce[re]),Me.push(Ce[re+1]),Me.push(Ce[re+2]))}}function ee(Ce,Me,Qt,pe,Vt,re,Te){for(var ue,xe,Ke=kt(Ce),Rn=Vt===0?le:je,tr=Ce.start,Pn=0;Pn<Ce.length-3;Pn+=3){var dn=Ce[Pn],Ar=Ce[Pn+1],or=Ce[Pn+2],cn=Ce[Pn+3],Pr=Ce[Pn+4],Sr=Vt===0?dn:Ar,Re=Vt===0?cn:Pr,$e=!1;Te&&(ue=Math.sqrt(Math.pow(dn-cn,2)+Math.pow(Ar-Pr,2))),Sr<Qt?Re>Qt&&(xe=Rn(Ke,dn,Ar,cn,Pr,Qt),Te&&(Ke.start=tr+ue*xe)):Sr>pe?Re<pe&&(xe=Rn(Ke,dn,Ar,cn,Pr,pe),Te&&(Ke.start=tr+ue*xe)):ae(Ke,dn,Ar,or),Re<Qt&&Sr>=Qt&&(xe=Rn(Ke,dn,Ar,cn,Pr,Qt),$e=!0),Re>pe&&Sr<=pe&&(xe=Rn(Ke,dn,Ar,cn,Pr,pe),$e=!0),!re&&$e&&(Te&&(Ke.end=tr+ue*xe),Me.push(Ke),Ke=kt(Ce)),Te&&(tr+=ue)}var Ve=Ce.length-3;dn=Ce[Ve],Ar=Ce[Ve+1],or=Ce[Ve+2],(Sr=Vt===0?dn:Ar)>=Qt&&Sr<=pe&&ae(Ke,dn,Ar,or),Ve=Ke.length-3,re&&Ve>=3&&(Ke[Ve]!==Ke[0]||Ke[Ve+1]!==Ke[1])&&ae(Ke,Ke[0],Ke[1],Ke[2]),Ke.length&&Me.push(Ke)}function kt(Ce){var Me=[];return Me.size=Ce.size,Me.start=Ce.start,Me.end=Ce.end,Me}function Wt(Ce,Me,Qt,pe,Vt,re){for(var Te=0;Te<Ce.length;Te++)ee(Ce[Te],Me,Qt,pe,Vt,re,!1)}function ae(Ce,Me,Qt,pe){Ce.push(Me),Ce.push(Qt),Ce.push(pe)}function le(Ce,Me,Qt,pe,Vt,re){var Te=(re-Me)/(pe-Me);return Ce.push(re),Ce.push(Qt+(Vt-Qt)*Te),Ce.push(1),Te}function je(Ce,Me,Qt,pe,Vt,re){var Te=(re-Qt)/(Vt-Qt);return Ce.push(Me+(pe-Me)*Te),Ce.push(re),Ce.push(1),Te}function Oe(Ce,Me){for(var Qt=[],pe=0;pe<Ce.length;pe++){var Vt,re=Ce[pe],Te=re.type;if(Te==="Point"||Te==="MultiPoint"||Te==="LineString")Vt=We(re.geometry,Me);else if(Te==="MultiLineString"||Te==="Polygon"){Vt=[];for(var ue=0;ue<re.geometry.length;ue++)Vt.push(We(re.geometry[ue],Me))}else if(Te==="MultiPolygon")for(Vt=[],ue=0;ue<re.geometry.length;ue++){for(var xe=[],Ke=0;Ke<re.geometry[ue].length;Ke++)xe.push(We(re.geometry[ue][Ke],Me));Vt.push(xe)}Qt.push(at(re.id,Te,Vt,re.tags))}return Qt}function We(Ce,Me){var Qt=[];Qt.size=Ce.size,Ce.start!==void 0&&(Qt.start=Ce.start,Qt.end=Ce.end);for(var pe=0;pe<Ce.length;pe+=3)Qt.push(Ce[pe]+Me,Ce[pe+1],Ce[pe+2]);return Qt}function Ye(Ce,Me){if(Ce.transformed)return Ce;var Qt,pe,Vt,re=1<<Ce.z,Te=Ce.x,ue=Ce.y;for(Qt=0;Qt<Ce.features.length;Qt++){var xe=Ce.features[Qt],Ke=xe.geometry,Rn=xe.type;if(xe.geometry=[],Rn===1)for(pe=0;pe<Ke.length;pe+=2)xe.geometry.push(wn(Ke[pe],Ke[pe+1],Me,re,Te,ue));else for(pe=0;pe<Ke.length;pe++){var tr=[];for(Vt=0;Vt<Ke[pe].length;Vt+=2)tr.push(wn(Ke[pe][Vt],Ke[pe][Vt+1],Me,re,Te,ue));xe.geometry.push(tr)}}return Ce.transformed=!0,Ce}function wn(Ce,Me,Qt,pe,Vt,re){return[Math.round(Qt*(Ce*pe-Vt)),Math.round(Qt*(Me*pe-re))]}function er(Ce,Me,Qt,pe,Vt){for(var re=Me===Vt.maxZoom?0:Vt.tolerance/((1<<Me)*Vt.extent),Te={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Qt,y:pe,z:Me,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ue=0;ue<Ce.length;ue++){Te.numFeatures++,wr(Te,Ce[ue],re,Vt);var xe=Ce[ue].minX,Ke=Ce[ue].minY,Rn=Ce[ue].maxX,tr=Ce[ue].maxY;xe<Te.minX&&(Te.minX=xe),Ke<Te.minY&&(Te.minY=Ke),Rn>Te.maxX&&(Te.maxX=Rn),tr>Te.maxY&&(Te.maxY=tr)}return Te}function wr(Ce,Me,Qt,pe){var Vt=Me.geometry,re=Me.type,Te=[];if(re==="Point"||re==="MultiPoint")for(var ue=0;ue<Vt.length;ue+=3)Te.push(Vt[ue]),Te.push(Vt[ue+1]),Ce.numPoints++,Ce.numSimplified++;else if(re==="LineString")on(Te,Vt,Ce,Qt,!1,!1);else if(re==="MultiLineString"||re==="Polygon")for(ue=0;ue<Vt.length;ue++)on(Te,Vt[ue],Ce,Qt,re==="Polygon",ue===0);else if(re==="MultiPolygon")for(var xe=0;xe<Vt.length;xe++){var Ke=Vt[xe];for(ue=0;ue<Ke.length;ue++)on(Te,Ke[ue],Ce,Qt,!0,ue===0)}if(Te.length){var Rn=Me.tags||null;if(re==="LineString"&&pe.lineMetrics){for(var tr in Rn={},Me.tags)Rn[tr]=Me.tags[tr];Rn.mapbox_clip_start=Vt.start/Vt.size,Rn.mapbox_clip_end=Vt.end/Vt.size}var Pn={geometry:Te,type:re==="Polygon"||re==="MultiPolygon"?3:re==="LineString"||re==="MultiLineString"?2:1,tags:Rn};Me.id!==null&&(Pn.id=Me.id),Ce.features.push(Pn)}}function on(Ce,Me,Qt,pe,Vt,re){var Te=pe*pe;if(pe>0&&Me.size<(Vt?Te:pe))Qt.numPoints+=Me.length/3;else{for(var ue=[],xe=0;xe<Me.length;xe+=3)(pe===0||Me[xe+2]>Te)&&(Qt.numSimplified++,ue.push(Me[xe]),ue.push(Me[xe+1])),Qt.numPoints++;Vt&&function(Ke,Rn){for(var tr=0,Pn=0,dn=Ke.length,Ar=dn-2;Pn<dn;Ar=Pn,Pn+=2)tr+=(Ke[Pn]-Ke[Ar])*(Ke[Pn+1]+Ke[Ar+1]);if(tr>0===Rn)for(Pn=0,dn=Ke.length;Pn<dn/2;Pn+=2){var or=Ke[Pn],cn=Ke[Pn+1];Ke[Pn]=Ke[dn-2-Pn],Ke[Pn+1]=Ke[dn-1-Pn],Ke[dn-2-Pn]=or,Ke[dn-1-Pn]=cn}}(ue,re),Ce.push(ue)}}function en(Ce,Me){var Qt=(Me=this.options=function(Vt,re){for(var Te in re)Vt[Te]=re[Te];return Vt}(Object.create(this.options),Me)).debug;if(Qt&&console.time("preprocess data"),Me.maxZoom<0||Me.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Me.promoteId&&Me.generateId)throw new Error("promoteId and generateId cannot be used together.");var pe=function(Vt,re){var Te=[];if(Vt.type==="FeatureCollection")for(var ue=0;ue<Vt.features.length;ue++)k(Te,Vt.features[ue],re,ue);else k(Te,Vt.type==="Feature"?Vt:{geometry:Vt},re);return Te}(Ce,Me);this.tiles={},this.tileCoords=[],Qt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Me.indexMaxZoom,Me.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(pe=function(Vt,re){var Te=re.buffer/re.extent,ue=Vt,xe=Nt(Vt,1,-1-Te,Te,0,-1,2,re),Ke=Nt(Vt,1,1-Te,2+Te,0,-1,2,re);return(xe||Ke)&&(ue=Nt(Vt,1,-Te,1+Te,0,-1,2,re)||[],xe&&(ue=Oe(xe,1).concat(ue)),Ke&&(ue=ue.concat(Oe(Ke,-1)))),ue}(pe,Me)).length&&this.splitTile(pe,0,0,0),Qt&&(pe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function An(Ce,Me,Qt){return 32*((1<<Ce)*Qt+Me)+Ce}function jn(Ce,Me){var Qt=Ce.tileID.canonical;if(!this._geoJSONIndex)return Me(null,null);var pe=this._geoJSONIndex.getTile(Qt.z,Qt.x,Qt.y);if(!pe)return Me(null,null);var Vt=new m(pe.features),re=S(Vt);re.byteOffset===0&&re.byteLength===re.buffer.byteLength||(re=new Uint8Array(re)),Me(null,{vectorTile:Vt,rawData:re.buffer})}Ft.prototype.load=function(Ce){var Me=this.options,Qt=Me.log,pe=Me.minZoom,Vt=Me.maxZoom,re=Me.nodeSize;Qt&&console.time("total time");var Te="prepare "+Ce.length+" points";Qt&&console.time(Te),this.points=Ce;for(var ue=[],xe=0;xe<Ce.length;xe++)Ce[xe].geometry&&ue.push(St(Ce[xe],xe));this.trees[Vt+1]=new ut(ue,Q,ht,re,Float32Array),Qt&&console.timeEnd(Te);for(var Ke=Vt;Ke>=pe;Ke--){var Rn=+Date.now();ue=this._cluster(ue,Ke),this.trees[Ke]=new ut(ue,Q,ht,re,Float32Array),Qt&&console.log("z%d: %d clusters in %dms",Ke,ue.length,+Date.now()-Rn)}return Qt&&console.timeEnd("total time"),this},Ft.prototype.getClusters=function(Ce,Me){var Qt=((Ce[0]+180)%360+360)%360-180,pe=Math.max(-90,Math.min(90,Ce[1])),Vt=Ce[2]===180?180:((Ce[2]+180)%360+360)%360-180,re=Math.max(-90,Math.min(90,Ce[3]));if(Ce[2]-Ce[0]>=360)Qt=-180,Vt=180;else if(Qt>Vt){var Te=this.getClusters([Qt,pe,180,re],Me),ue=this.getClusters([-180,pe,Vt,re],Me);return Te.concat(ue)}for(var xe=this.trees[this._limitZoom(Me)],Ke=[],Rn=0,tr=xe.range(nt(Qt),Mt(re),nt(Vt),Mt(pe));Rn<tr.length;Rn+=1){var Pn=xe.points[tr[Rn]];Ke.push(Pn.numPoints?xt(Pn):this.points[Pn.index])}return Ke},Ft.prototype.getChildren=function(Ce){var Me=this._getOriginId(Ce),Qt=this._getOriginZoom(Ce),pe="No cluster with the specified id.",Vt=this.trees[Qt];if(!Vt)throw new Error(pe);var re=Vt.points[Me];if(!re)throw new Error(pe);for(var Te=this.options.radius/(this.options.extent*Math.pow(2,Qt-1)),ue=[],xe=0,Ke=Vt.within(re.x,re.y,Te);xe<Ke.length;xe+=1){var Rn=Vt.points[Ke[xe]];Rn.parentId===Ce&&ue.push(Rn.numPoints?xt(Rn):this.points[Rn.index])}if(ue.length===0)throw new Error(pe);return ue},Ft.prototype.getLeaves=function(Ce,Me,Qt){var pe=[];return this._appendLeaves(pe,Ce,Me=Me||10,Qt=Qt||0,0),pe},Ft.prototype.getTile=function(Ce,Me,Qt){var pe=this.trees[this._limitZoom(Ce)],Vt=Math.pow(2,Ce),re=this.options,Te=re.radius/re.extent,ue=(Qt-Te)/Vt,xe=(Qt+1+Te)/Vt,Ke={features:[]};return this._addTileFeatures(pe.range((Me-Te)/Vt,ue,(Me+1+Te)/Vt,xe),pe.points,Me,Qt,Vt,Ke),Me===0&&this._addTileFeatures(pe.range(1-Te/Vt,ue,1,xe),pe.points,Vt,Qt,Vt,Ke),Me===Vt-1&&this._addTileFeatures(pe.range(0,ue,Te/Vt,xe),pe.points,-1,Qt,Vt,Ke),Ke.features.length?Ke:null},Ft.prototype.getClusterExpansionZoom=function(Ce){for(var Me=this._getOriginZoom(Ce)-1;Me<=this.options.maxZoom;){var Qt=this.getChildren(Ce);if(Me++,Qt.length!==1)break;Ce=Qt[0].properties.cluster_id}return Me},Ft.prototype._appendLeaves=function(Ce,Me,Qt,pe,Vt){for(var re=0,Te=this.getChildren(Me);re<Te.length;re+=1){var ue=Te[re],xe=ue.properties;if(xe&&xe.cluster?Vt+xe.point_count<=pe?Vt+=xe.point_count:Vt=this._appendLeaves(Ce,xe.cluster_id,Qt,pe,Vt):Vt<pe?Vt++:Ce.push(ue),Ce.length===Qt)break}return Vt},Ft.prototype._addTileFeatures=function(Ce,Me,Qt,pe,Vt,re){for(var Te=0,ue=Ce;Te<ue.length;Te+=1){var xe=Me[ue[Te]],Ke=xe.numPoints,Rn={type:1,geometry:[[Math.round(this.options.extent*(xe.x*Vt-Qt)),Math.round(this.options.extent*(xe.y*Vt-pe))]],tags:Ke?At(xe):this.points[xe.index].properties},tr=void 0;Ke?tr=xe.id:this.options.generateId?tr=xe.index:this.points[xe.index].id&&(tr=this.points[xe.index].id),tr!==void 0&&(Rn.id=tr),re.features.push(Rn)}},Ft.prototype._limitZoom=function(Ce){return Math.max(this.options.minZoom,Math.min(+Ce,this.options.maxZoom+1))},Ft.prototype._cluster=function(Ce,Me){for(var Qt=[],pe=this.options,Vt=pe.reduce,re=pe.minPoints,Te=pe.radius/(pe.extent*Math.pow(2,Me)),ue=0;ue<Ce.length;ue++){var xe=Ce[ue];if(!(xe.zoom<=Me)){xe.zoom=Me;for(var Ke=this.trees[Me+1],Rn=Ke.within(xe.x,xe.y,Te),tr=xe.numPoints||1,Pn=tr,dn=0,Ar=Rn;dn<Ar.length;dn+=1){var or=Ke.points[Ar[dn]];or.zoom>Me&&(Pn+=or.numPoints||1)}if(Pn>=re){for(var cn=xe.x*tr,Pr=xe.y*tr,Sr=Vt&&tr>1?this._map(xe,!0):null,Re=(ue<<5)+(Me+1)+this.points.length,$e=0,Ve=Rn;$e<Ve.length;$e+=1){var En=Ke.points[Ve[$e]];if(!(En.zoom<=Me)){En.zoom=Me;var xn=En.numPoints||1;cn+=En.x*xn,Pr+=En.y*xn,En.parentId=Re,Vt&&(Sr||(Sr=this._map(xe,!0)),Vt(Sr,this._map(En)))}}xe.parentId=Re,Qt.push(Ot(cn/Pn,Pr/Pn,Re,Pn,Sr))}else if(Qt.push(xe),Pn>1)for(var Nn=0,mn=Rn;Nn<mn.length;Nn+=1){var Dn=Ke.points[mn[Nn]];Dn.zoom<=Me||(Dn.zoom=Me,Qt.push(Dn))}}}return Qt},Ft.prototype._getOriginId=function(Ce){return Ce-this.points.length>>5},Ft.prototype._getOriginZoom=function(Ce){return(Ce-this.points.length)%32},Ft.prototype._map=function(Ce,Me){if(Ce.numPoints)return Me?z({},Ce.properties):Ce.properties;var Qt=this.points[Ce.index].properties,pe=this.options.map(Qt);return Me&&pe===Qt?z({},pe):pe},en.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},en.prototype.splitTile=function(Ce,Me,Qt,pe,Vt,re,Te){for(var ue=[Ce,Me,Qt,pe],xe=this.options,Ke=xe.debug;ue.length;){pe=ue.pop(),Qt=ue.pop(),Me=ue.pop(),Ce=ue.pop();var Rn=1<<Me,tr=An(Me,Qt,pe),Pn=this.tiles[tr];if(!Pn&&(Ke>1&&console.time("creation"),Pn=this.tiles[tr]=er(Ce,Me,Qt,pe,xe),this.tileCoords.push({z:Me,x:Qt,y:pe}),Ke)){Ke>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Me,Qt,pe,Pn.numFeatures,Pn.numPoints,Pn.numSimplified),console.timeEnd("creation"));var dn="z"+Me;this.stats[dn]=(this.stats[dn]||0)+1,this.total++}if(Pn.source=Ce,Vt){if(Me===xe.maxZoom||Me===Vt)continue;var Ar=1<<Vt-Me;if(Qt!==Math.floor(re/Ar)||pe!==Math.floor(Te/Ar))continue}else if(Me===xe.indexMaxZoom||Pn.numPoints<=xe.indexMaxPoints)continue;if(Pn.source=null,Ce.length!==0){Ke>1&&console.time("clipping");var or,cn,Pr,Sr,Re,$e,Ve=.5*xe.buffer/xe.extent,En=.5-Ve,xn=.5+Ve,Nn=1+Ve;or=cn=Pr=Sr=null,Re=Nt(Ce,Rn,Qt-Ve,Qt+xn,0,Pn.minX,Pn.maxX,xe),$e=Nt(Ce,Rn,Qt+En,Qt+Nn,0,Pn.minX,Pn.maxX,xe),Ce=null,Re&&(or=Nt(Re,Rn,pe-Ve,pe+xn,1,Pn.minY,Pn.maxY,xe),cn=Nt(Re,Rn,pe+En,pe+Nn,1,Pn.minY,Pn.maxY,xe),Re=null),$e&&(Pr=Nt($e,Rn,pe-Ve,pe+xn,1,Pn.minY,Pn.maxY,xe),Sr=Nt($e,Rn,pe+En,pe+Nn,1,Pn.minY,Pn.maxY,xe),$e=null),Ke>1&&console.timeEnd("clipping"),ue.push(or||[],Me+1,2*Qt,2*pe),ue.push(cn||[],Me+1,2*Qt,2*pe+1),ue.push(Pr||[],Me+1,2*Qt+1,2*pe),ue.push(Sr||[],Me+1,2*Qt+1,2*pe+1)}}},en.prototype.getTile=function(Ce,Me,Qt){var pe=this.options,Vt=pe.extent,re=pe.debug;if(Ce<0||Ce>24)return null;var Te=1<<Ce,ue=An(Ce,Me=(Me%Te+Te)%Te,Qt);if(this.tiles[ue])return Ye(this.tiles[ue],Vt);re>1&&console.log("drilling down to z%d-%d-%d",Ce,Me,Qt);for(var xe,Ke=Ce,Rn=Me,tr=Qt;!xe&&Ke>0;)Ke--,Rn=Math.floor(Rn/2),tr=Math.floor(tr/2),xe=this.tiles[An(Ke,Rn,tr)];return xe&&xe.source?(re>1&&console.log("found parent tile z%d-%d-%d",Ke,Rn,tr),re>1&&console.time("drilling down"),this.splitTile(xe.source,Ke,Rn,tr,Ce,Me,Qt),re>1&&console.timeEnd("drilling down"),this.tiles[ue]?Ye(this.tiles[ue],Vt):null):null};var pr=function(Ce){function Me(Qt,pe,Vt,re){Ce.call(this,Qt,pe,Vt,jn),re&&(this.loadGeoJSON=re)}return Ce&&(Me.__proto__=Ce),(Me.prototype=Object.create(Ce&&Ce.prototype)).constructor=Me,Me.prototype.loadData=function(Qt,pe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=pe,this._pendingLoadDataParams=Qt,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Me.prototype._loadData=function(){var Qt=this;if(this._pendingCallback&&this._pendingLoadDataParams){var pe=this._pendingCallback,Vt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var re=!!(Vt&&Vt.request&&Vt.request.collectResourceTiming)&&new t.RequestPerformance(Vt.request);this.loadGeoJSON(Vt,function(Te,ue){if(Te||!ue)return pe(Te);if(typeof ue!="object")return pe(new Error("Input data given to '"+Vt.source+"' is not a valid GeoJSON object."));(function Pn(dn,Ar){var or,cn=dn&&dn.type;if(cn==="FeatureCollection")for(or=0;or<dn.features.length;or++)Pn(dn.features[or],Ar);else if(cn==="GeometryCollection")for(or=0;or<dn.geometries.length;or++)Pn(dn.geometries[or],Ar);else if(cn==="Feature")Pn(dn.geometry,Ar);else if(cn==="Polygon")f(dn.coordinates,Ar);else if(cn==="MultiPolygon")for(or=0;or<dn.coordinates.length;or++)f(dn.coordinates[or],Ar);return dn})(ue,!0);try{if(Vt.filter){var xe=t.createExpression(Vt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(xe.result==="error")throw new Error(xe.value.map(function(Pn){return Pn.key+": "+Pn.message}).join(", "));var Ke=ue.features.filter(function(Pn){return xe.value.evaluate({zoom:0},Pn)});ue={type:"FeatureCollection",features:Ke}}Qt._geoJSONIndex=Vt.cluster?new Ft(function(Pn){var dn=Pn.superclusterOptions,Ar=Pn.clusterProperties;if(!Ar||!dn)return dn;for(var or={},cn={},Pr={accumulated:null,zoom:0},Sr={properties:null},Re=Object.keys(Ar),$e=0,Ve=Re;$e<Ve.length;$e+=1){var En=Ve[$e],xn=Ar[En],Nn=xn[0],mn=t.createExpression(xn[1]),Dn=t.createExpression(typeof Nn=="string"?[Nn,["accumulated"],["get",En]]:Nn);or[En]=mn.value,cn[En]=Dn.value}return dn.map=function($n){Sr.properties=$n;for(var Hn={},_n=0,br=Re;_n<br.length;_n+=1){var yr=br[_n];Hn[yr]=or[yr].evaluate(Pr,Sr)}return Hn},dn.reduce=function($n,Hn){Sr.properties=Hn;for(var _n=0,br=Re;_n<br.length;_n+=1){var yr=br[_n];Pr.accumulated=$n[yr],$n[yr]=cn[yr].evaluate(Pr,Sr)}},dn}(Vt)).load(ue.features):function(Pn,dn){return new en(Pn,dn)}(ue,Vt.geojsonVtOptions)}catch(Pn){return pe(Pn)}Qt.loaded={};var Rn={};if(re){var tr=re.finish();tr&&(Rn.resourceTiming={},Rn.resourceTiming[Vt.source]=JSON.parse(JSON.stringify(tr)))}pe(null,Rn)})}},Me.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Me.prototype.reloadTile=function(Qt,pe){var Vt=this.loaded;return Vt&&Vt[Qt.uid]?Ce.prototype.reloadTile.call(this,Qt,pe):this.loadTile(Qt,pe)},Me.prototype.loadGeoJSON=function(Qt,pe){if(Qt.request)t.getJSON(Qt.request,pe);else{if(typeof Qt.data!="string")return pe(new Error("Input data given to '"+Qt.source+"' is not a valid GeoJSON object."));try{return pe(null,JSON.parse(Qt.data))}catch(Vt){return pe(new Error("Input data given to '"+Qt.source+"' is not a valid GeoJSON object."))}}},Me.prototype.removeSource=function(Qt,pe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),pe()},Me.prototype.getClusterExpansionZoom=function(Qt,pe){try{pe(null,this._geoJSONIndex.getClusterExpansionZoom(Qt.clusterId))}catch(Vt){pe(Vt)}},Me.prototype.getClusterChildren=function(Qt,pe){try{pe(null,this._geoJSONIndex.getChildren(Qt.clusterId))}catch(Vt){pe(Vt)}},Me.prototype.getClusterLeaves=function(Qt,pe){try{pe(null,this._geoJSONIndex.getLeaves(Qt.clusterId,Qt.limit,Qt.offset))}catch(Vt){pe(Vt)}},Me}(a),di=function(Me){var Qt=this;this.self=Me,this.actor=new t.Actor(Me,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:a,geojson:pr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(pe,Vt){if(Qt.workerSourceTypes[pe])throw new Error('Worker source with name "'+pe+'" already registered.');Qt.workerSourceTypes[pe]=Vt},this.self.registerRTLTextPlugin=function(pe){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=pe.applyArabicShaping,t.plugin.processBidirectionalText=pe.processBidirectionalText,t.plugin.processStyledBidirectionalText=pe.processStyledBidirectionalText}};return di.prototype.setReferrer=function(Ce,Me){this.referrer=Me},di.prototype.setImages=function(Ce,Me,Qt){for(var pe in this.availableImages[Ce]=Me,this.workerSources[Ce]){var Vt=this.workerSources[Ce][pe];for(var re in Vt)Vt[re].availableImages=Me}Qt()},di.prototype.setLayers=function(Ce,Me,Qt){this.getLayerIndex(Ce).replace(Me),Qt()},di.prototype.updateLayers=function(Ce,Me,Qt){this.getLayerIndex(Ce).update(Me.layers,Me.removedIds),Qt()},di.prototype.loadTile=function(Ce,Me,Qt){this.getWorkerSource(Ce,Me.type,Me.source).loadTile(Me,Qt)},di.prototype.loadDEMTile=function(Ce,Me,Qt){this.getDEMWorkerSource(Ce,Me.source).loadTile(Me,Qt)},di.prototype.reloadTile=function(Ce,Me,Qt){this.getWorkerSource(Ce,Me.type,Me.source).reloadTile(Me,Qt)},di.prototype.abortTile=function(Ce,Me,Qt){this.getWorkerSource(Ce,Me.type,Me.source).abortTile(Me,Qt)},di.prototype.removeTile=function(Ce,Me,Qt){this.getWorkerSource(Ce,Me.type,Me.source).removeTile(Me,Qt)},di.prototype.removeDEMTile=function(Ce,Me){this.getDEMWorkerSource(Ce,Me.source).removeTile(Me)},di.prototype.removeSource=function(Ce,Me,Qt){if(this.workerSources[Ce]&&this.workerSources[Ce][Me.type]&&this.workerSources[Ce][Me.type][Me.source]){var pe=this.workerSources[Ce][Me.type][Me.source];delete this.workerSources[Ce][Me.type][Me.source],pe.removeSource!==void 0?pe.removeSource(Me,Qt):Qt()}},di.prototype.loadWorkerSource=function(Ce,Me,Qt){try{this.self.importScripts(Me.url),Qt()}catch(pe){Qt(pe.toString())}},di.prototype.syncRTLPluginState=function(Ce,Me,Qt){try{t.plugin.setState(Me);var pe=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&pe!=null){this.self.importScripts(pe);var Vt=t.plugin.isParsed();Qt(Vt?void 0:new Error("RTL Text Plugin failed to import scripts from "+pe),Vt)}}catch(re){Qt(re.toString())}},di.prototype.getAvailableImages=function(Ce){var Me=this.availableImages[Ce];return Me||(Me=[]),Me},di.prototype.getLayerIndex=function(Ce){var Me=this.layerIndexes[Ce];return Me||(Me=this.layerIndexes[Ce]=new c),Me},di.prototype.getWorkerSource=function(Ce,Me,Qt){var pe=this;return this.workerSources[Ce]||(this.workerSources[Ce]={}),this.workerSources[Ce][Me]||(this.workerSources[Ce][Me]={}),this.workerSources[Ce][Me][Qt]||(this.workerSources[Ce][Me][Qt]=new this.workerSourceTypes[Me]({send:function(re,Te,ue){pe.actor.send(re,Te,ue,Ce)}},this.getLayerIndex(Ce),this.getAvailableImages(Ce))),this.workerSources[Ce][Me][Qt]},di.prototype.getDEMWorkerSource=function(Ce,Me){return this.demWorkerSources[Ce]||(this.demWorkerSources[Ce]={}),this.demWorkerSources[Ce][Me]||(this.demWorkerSources[Ce][Me]=new l),this.demWorkerSources[Ce][Me]},di.prototype.enforceCacheSizeLimit=function(Ce,Me){t.enforceCacheSizeLimit(Me)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new di(self)),di}),e(["./shared"],function(t){"use strict";var u=t.createCommonjsModule(function(j){function I(D){return!w(D)}function w(D){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var q,st,Ct=new Blob([""],{type:"text/javascript"}),wt=URL.createObjectURL(Ct);try{st=new Worker(wt),q=!0}catch(Ut){q=!1}return st&&st.terminate(),URL.revokeObjectURL(wt),q}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var q=document.createElement("canvas");q.width=q.height=1;var st=q.getContext("2d");if(!st)return!1;var Ct=st.getImageData(0,0,1,1);return Ct&&Ct.width===q.width}()?(B[W=D&&D.failIfMajorPerformanceCaveat]===void 0&&(B[W]=function(q){var st=function(wt){var Ut=document.createElement("canvas"),Zt=Object.create(I.webGLContextAttributes);return Zt.failIfMajorPerformanceCaveat=wt,Ut.probablySupportsContext?Ut.probablySupportsContext("webgl",Zt)||Ut.probablySupportsContext("experimental-webgl",Zt):Ut.supportsContext?Ut.supportsContext("webgl",Zt)||Ut.supportsContext("experimental-webgl",Zt):Ut.getContext("webgl",Zt)||Ut.getContext("experimental-webgl",Zt)}(q);if(!st)return!1;var Ct=st.createShader(st.VERTEX_SHADER);return!(!Ct||st.isContextLost())&&(st.shaderSource(Ct,"void main() {}"),st.compileShader(Ct),st.getShaderParameter(Ct,st.COMPILE_STATUS)===!0)}(W)),B[W]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var W}j.exports?j.exports=I:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=I,window.mapboxgl.notSupportedReason=w);var B={};I.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),s={create:function(I,w,B){var D=t.window.document.createElement(I);return w!==void 0&&(D.className=w),B&&B.appendChild(D),D},createNS:function(I,w){return t.window.document.createElementNS(I,w)}},c=t.window.document&&t.window.document.documentElement.style;function r(j){if(!c)return j[0];for(var I=0;I<j.length;I++)if(j[I]in c)return j[I];return j[0]}var h,n=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);s.disableDrag=function(){c&&n&&(h=c[n],c[n]="none")},s.enableDrag=function(){c&&n&&(c[n]=h)};var i=r(["transform","WebkitTransform"]);s.setTransform=function(j,I){j.style[i]=I};var a=!1;try{var o=Object.defineProperty({},"passive",{get:function(){a=!0}});t.window.addEventListener("test",o,o),t.window.removeEventListener("test",o,o)}catch(j){a=!1}s.addEventListener=function(j,I,w,B){B===void 0&&(B={}),j.addEventListener(I,w,"passive"in B&&a?B:B.capture)},s.removeEventListener=function(j,I,w,B){B===void 0&&(B={}),j.removeEventListener(I,w,"passive"in B&&a?B:B.capture)};var l=function j(I){I.preventDefault(),I.stopPropagation(),t.window.removeEventListener("click",j,!0)};function f(j){var I=j.userImage;return!!(I&&I.render&&I.render())&&(j.data.replace(new Uint8Array(I.data.buffer)),!0)}s.suppressClick=function(){t.window.addEventListener("click",l,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",l,!0)},0)},s.mousePos=function(j,I){var w=j.getBoundingClientRect();return new t.Point(I.clientX-w.left-j.clientLeft,I.clientY-w.top-j.clientTop)},s.touchPos=function(j,I){for(var w=j.getBoundingClientRect(),B=[],D=0;D<I.length;D++)B.push(new t.Point(I[D].clientX-w.left-j.clientLeft,I[D].clientY-w.top-j.clientTop));return B},s.mouseButton=function(j){return t.window.InstallTrigger!==void 0&&j.button===2&&j.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:j.button},s.remove=function(j){j.parentNode&&j.parentNode.removeChild(j)};var v=function(j){function I(){j.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.isLoaded=function(){return this.loaded},I.prototype.setLoaded=function(w){if(this.loaded!==w&&(this.loaded=w,w)){for(var B=0,D=this.requestors;B<D.length;B+=1){var W=D[B];this._notify(W.ids,W.callback)}this.requestors=[]}},I.prototype.getImage=function(w){return this.images[w]},I.prototype.addImage=function(w,B){this._validate(w,B)&&(this.images[w]=B)},I.prototype._validate=function(w,B){var D=!0;return this._validateStretch(B.stretchX,B.data&&B.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+w+'" has invalid "stretchX" value'))),D=!1),this._validateStretch(B.stretchY,B.data&&B.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+w+'" has invalid "stretchY" value'))),D=!1),this._validateContent(B.content,B)||(this.fire(new t.ErrorEvent(new Error('Image "'+w+'" has invalid "content" value'))),D=!1),D},I.prototype._validateStretch=function(w,B){if(!w)return!0;for(var D=0,W=0,q=w;W<q.length;W+=1){var st=q[W];if(st[0]<D||st[1]<st[0]||B<st[1])return!1;D=st[1]}return!0},I.prototype._validateContent=function(w,B){return!(w&&(w.length!==4||w[0]<0||B.data.width<w[0]||w[1]<0||B.data.height<w[1]||w[2]<0||B.data.width<w[2]||w[3]<0||B.data.height<w[3]||w[2]<w[0]||w[3]<w[1]))},I.prototype.updateImage=function(w,B){B.version=this.images[w].version+1,this.images[w]=B,this.updatedImages[w]=!0},I.prototype.removeImage=function(w){var B=this.images[w];delete this.images[w],delete this.patterns[w],B.userImage&&B.userImage.onRemove&&B.userImage.onRemove()},I.prototype.listImages=function(){return Object.keys(this.images)},I.prototype.getImages=function(w,B){var D=!0;if(!this.isLoaded())for(var W=0,q=w;W<q.length;W+=1)this.images[q[W]]||(D=!1);this.isLoaded()||D?this._notify(w,B):this.requestors.push({ids:w,callback:B})},I.prototype._notify=function(w,B){for(var D={},W=0,q=w;W<q.length;W+=1){var st=q[W];this.images[st]||this.fire(new t.Event("styleimagemissing",{id:st}));var Ct=this.images[st];Ct?D[st]={data:Ct.data.clone(),pixelRatio:Ct.pixelRatio,sdf:Ct.sdf,version:Ct.version,stretchX:Ct.stretchX,stretchY:Ct.stretchY,content:Ct.content,hasRenderCallback:Boolean(Ct.userImage&&Ct.userImage.render)}:t.warnOnce('Image "'+st+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}B(null,D)},I.prototype.getPixelSize=function(){var w=this.atlasImage;return{width:w.width,height:w.height}},I.prototype.getPattern=function(w){var B=this.patterns[w],D=this.getImage(w);if(!D)return null;if(B&&B.position.version===D.version)return B.position;if(B)B.position.version=D.version;else{var W={w:D.data.width+2,h:D.data.height+2,x:0,y:0},q=new t.ImagePosition(W,D);this.patterns[w]={bin:W,position:q}}return this._updatePatternAtlas(),this.patterns[w].position},I.prototype.bind=function(w){var B=w.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(w,this.atlasImage,B.RGBA),this.atlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE)},I.prototype._updatePatternAtlas=function(){var w=[];for(var B in this.patterns)w.push(this.patterns[B].bin);var D=t.potpack(w),W=D.w,q=D.h,st=this.atlasImage;for(var Ct in st.resize({width:W||1,height:q||1}),this.patterns){var wt=this.patterns[Ct].bin,Ut=wt.x+1,Zt=wt.y+1,qt=this.images[Ct].data,he=qt.width,me=qt.height;t.RGBAImage.copy(qt,st,{x:0,y:0},{x:Ut,y:Zt},{width:he,height:me}),t.RGBAImage.copy(qt,st,{x:0,y:me-1},{x:Ut,y:Zt-1},{width:he,height:1}),t.RGBAImage.copy(qt,st,{x:0,y:0},{x:Ut,y:Zt+me},{width:he,height:1}),t.RGBAImage.copy(qt,st,{x:he-1,y:0},{x:Ut-1,y:Zt},{width:1,height:me}),t.RGBAImage.copy(qt,st,{x:0,y:0},{x:Ut+he,y:Zt},{width:1,height:me})}this.dirty=!0},I.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},I.prototype.dispatchRenderCallbacks=function(w){for(var B=0,D=w;B<D.length;B+=1){var W=D[B];if(!this.callbackDispatchedThisFrame[W]){this.callbackDispatchedThisFrame[W]=!0;var q=this.images[W];f(q)&&this.updateImage(W,q)}}},I}(t.Evented),b=_,g=_,m=1e20;function _(j,I,w,B,D,W){this.fontSize=j||24,this.buffer=I===void 0?3:I,this.cutoff=B||.25,this.fontFamily=D||"sans-serif",this.fontWeight=W||"normal",this.radius=w||8;var q=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=q,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(q*q),this.gridInner=new Float64Array(q*q),this.f=new Float64Array(q),this.d=new Float64Array(q),this.z=new Float64Array(q+1),this.v=new Int16Array(q),this.middle=Math.round(q/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function M(j,I,w,B,D,W,q){for(var st=0;st<I;st++){for(var Ct=0;Ct<w;Ct++)B[Ct]=j[Ct*I+st];for(x(B,D,W,q,w),Ct=0;Ct<w;Ct++)j[Ct*I+st]=D[Ct]}for(Ct=0;Ct<w;Ct++){for(st=0;st<I;st++)B[st]=j[Ct*I+st];for(x(B,D,W,q,I),st=0;st<I;st++)j[Ct*I+st]=Math.sqrt(D[st])}}function x(j,I,w,B,D){w[0]=0,B[0]=-m,B[1]=+m;for(var W=1,q=0;W<D;W++){for(var st=(j[W]+W*W-(j[w[q]]+w[q]*w[q]))/(2*W-2*w[q]);st<=B[q];)q--,st=(j[W]+W*W-(j[w[q]]+w[q]*w[q]))/(2*W-2*w[q]);w[++q]=W,B[q]=st,B[q+1]=+m}for(W=0,q=0;W<D;W++){for(;B[q+1]<W;)q++;I[W]=(W-w[q])*(W-w[q])+j[w[q]]}}_.prototype.draw=function(j){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(j,this.buffer,this.middle);for(var I=this.ctx.getImageData(0,0,this.size,this.size),w=new Uint8ClampedArray(this.size*this.size),B=0;B<this.size*this.size;B++){var D=I.data[4*B+3]/255;this.gridOuter[B]=D===1?0:D===0?m:Math.pow(Math.max(0,.5-D),2),this.gridInner[B]=D===1?m:D===0?0:Math.pow(Math.max(0,D-.5),2)}for(M(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),M(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),B=0;B<this.size*this.size;B++)w[B]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[B]-this.gridInner[B])/this.radius+this.cutoff))));return w},b.default=g;var y=function(I,w){this.requestManager=I,this.localIdeographFontFamily=w,this.entries={}};y.prototype.setURL=function(j){this.url=j},y.prototype.getGlyphs=function(j,I){var w=this,B=[];for(var D in j)for(var W=0,q=j[D];W<q.length;W+=1)B.push({stack:D,id:q[W]});t.asyncAll(B,function(st,Ct){var wt=st.stack,Ut=st.id,Zt=w.entries[wt];Zt||(Zt=w.entries[wt]={glyphs:{},requests:{},ranges:{}});var qt=Zt.glyphs[Ut];if(qt===void 0){if(qt=w._tinySDF(Zt,wt,Ut))return Zt.glyphs[Ut]=qt,void Ct(null,{stack:wt,id:Ut,glyph:qt});var he=Math.floor(Ut/256);if(256*he>65535)Ct(new Error("glyphs > 65535 not supported"));else if(Zt.ranges[he])Ct(null,{stack:wt,id:Ut,glyph:qt});else{var me=Zt.requests[he];me||(me=Zt.requests[he]=[],y.loadGlyphRange(wt,he,w.url,w.requestManager,function(De,Ae){if(Ae){for(var Ue in Ae)w._doesCharSupportLocalGlyph(+Ue)||(Zt.glyphs[+Ue]=Ae[+Ue]);Zt.ranges[he]=!0}for(var qe=0,rn=me;qe<rn.length;qe+=1)(0,rn[qe])(De,Ae);delete Zt.requests[he]})),me.push(function(De,Ae){De?Ct(De):Ae&&Ct(null,{stack:wt,id:Ut,glyph:Ae[Ut]||null})})}}else Ct(null,{stack:wt,id:Ut,glyph:qt})},function(st,Ct){if(st)I(st);else if(Ct){for(var wt={},Ut=0,Zt=Ct;Ut<Zt.length;Ut+=1){var qt=Zt[Ut],he=qt.stack,me=qt.id,De=qt.glyph;(wt[he]||(wt[he]={}))[me]=De&&{id:De.id,bitmap:De.bitmap.clone(),metrics:De.metrics}}I(null,wt)}})},y.prototype._doesCharSupportLocalGlyph=function(j){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](j)||t.isChar["Hangul Syllables"](j)||t.isChar.Hiragana(j)||t.isChar.Katakana(j))},y.prototype._tinySDF=function(j,I,w){var B=this.localIdeographFontFamily;if(B&&this._doesCharSupportLocalGlyph(w)){var D=j.tinySDF;if(!D){var W="400";/bold/i.test(I)?W="900":/medium/i.test(I)?W="500":/light/i.test(I)&&(W="200"),D=j.tinySDF=new y.TinySDF(24,3,8,.25,B,W)}return{id:w,bitmap:new t.AlphaImage({width:30,height:30},D.draw(String.fromCharCode(w))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},y.loadGlyphRange=function(j,I,w,B,D){var W=256*I,q=W+255,st=B.transformRequest(B.normalizeGlyphsURL(w).replace("{fontstack}",j).replace("{range}",W+"-"+q),t.ResourceType.Glyphs);t.getArrayBuffer(st,function(Ct,wt){if(Ct)D(Ct);else if(wt){for(var Ut={},Zt=0,qt=t.parseGlyphPBF(wt);Zt<qt.length;Zt+=1){var he=qt[Zt];Ut[he.id]=he}D(null,Ut)}})},y.TinySDF=b;var S=function(){this.specification=t.styleSpec.light.position};S.prototype.possiblyEvaluate=function(j,I){return t.sphericalToCartesian(j.expression.evaluate(I))},S.prototype.interpolate=function(j,I,w){return{x:t.number(j.x,I.x,w),y:t.number(j.y,I.y,w),z:t.number(j.z,I.z,w)}};var P=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new S,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),A=function(j){function I(w){j.call(this),this._transitionable=new t.Transitionable(P),this.setLight(w),this._transitioning=this._transitionable.untransitioned()}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getLight=function(){return this._transitionable.serialize()},I.prototype.setLight=function(w,B){if(B===void 0&&(B={}),!this._validate(t.validateLight,w,B))for(var D in w){var W=w[D];t.endsWith(D,"-transition")?this._transitionable.setTransition(D.slice(0,-"-transition".length),W):this._transitionable.setValue(D,W)}},I.prototype.updateTransitions=function(w){this._transitioning=this._transitionable.transitioned(w,this._transitioning)},I.prototype.hasTransition=function(){return this._transitioning.hasTransition()},I.prototype.recalculate=function(w){this.properties=this._transitioning.possiblyEvaluate(w)},I.prototype._validate=function(w,B,D){return(!D||D.validate!==!1)&&t.emitValidationErrors(this,w.call(t.validateStyle,t.extend({value:B,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},I}(t.Evented),O=function(I,w){this.width=I,this.height=w,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};O.prototype.getDash=function(j,I){var w=j.join(",")+String(I);return this.dashEntry[w]||(this.dashEntry[w]=this.addDash(j,I)),this.dashEntry[w]},O.prototype.getDashRanges=function(j,I,w){var B=[],D=j.length%2==1?-j[j.length-1]*w:0,W=j[0]*w,q=!0;B.push({left:D,right:W,isDash:q,zeroLength:j[0]===0});for(var st=j[0],Ct=1;Ct<j.length;Ct++){var wt=j[Ct];B.push({left:D=st*w,right:W=(st+=wt)*w,isDash:q=!q,zeroLength:wt===0})}return B},O.prototype.addRoundDash=function(j,I,w){for(var B=I/2,D=-w;D<=w;D++)for(var W=this.width*(this.nextRow+w+D),q=0,st=j[q],Ct=0;Ct<this.width;Ct++){Ct/st.right>1&&(st=j[++q]);var wt=Math.abs(Ct-st.left),Ut=Math.abs(Ct-st.right),Zt=Math.min(wt,Ut),qt=void 0,he=D/w*(B+1);if(st.isDash){var me=B-Math.abs(he);qt=Math.sqrt(Zt*Zt+me*me)}else qt=B-Math.sqrt(Zt*Zt+he*he);this.data[W+Ct]=Math.max(0,Math.min(255,qt+128))}},O.prototype.addRegularDash=function(j){for(var I=j.length-1;I>=0;--I){var w=j[I],B=j[I+1];w.zeroLength?j.splice(I,1):B&&B.isDash===w.isDash&&(B.left=w.left,j.splice(I,1))}var D=j[0],W=j[j.length-1];D.isDash===W.isDash&&(D.left=W.left-this.width,W.right=D.right+this.width);for(var q=this.width*this.nextRow,st=0,Ct=j[st],wt=0;wt<this.width;wt++){wt/Ct.right>1&&(Ct=j[++st]);var Ut=Math.abs(wt-Ct.left),Zt=Math.abs(wt-Ct.right),qt=Math.min(Ut,Zt);this.data[q+wt]=Math.max(0,Math.min(255,(Ct.isDash?qt:-qt)+128))}},O.prototype.addDash=function(j,I){var w=I?7:0,B=2*w+1;if(this.nextRow+B>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var D=0,W=0;W<j.length;W++)D+=j[W];if(D!==0){var q=this.width/D,st=this.getDashRanges(j,this.width,q);I?this.addRoundDash(st,q,w):this.addRegularDash(st)}var Ct={y:(this.nextRow+w+.5)/this.height,height:2*w/this.height,width:D};return this.nextRow+=B,this.dirty=!0,Ct},O.prototype.bind=function(j){var I=j.gl;this.texture?(I.bindTexture(I.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,I.texSubImage2D(I.TEXTURE_2D,0,0,0,this.width,this.height,I.ALPHA,I.UNSIGNED_BYTE,this.data))):(this.texture=I.createTexture(),I.bindTexture(I.TEXTURE_2D,this.texture),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.REPEAT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR),I.texImage2D(I.TEXTURE_2D,0,I.ALPHA,this.width,this.height,0,I.ALPHA,I.UNSIGNED_BYTE,this.data))};var L=function j(I,w){this.workerPool=I,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var B=this.workerPool.acquire(this.id),D=0;D<B.length;D++){var W=new j.Actor(B[D],w,this.id);W.name="Worker "+D,this.actors.push(W)}};function H(j,I,w){var B=function(W,q){if(W)return w(W);if(q){var st=t.pick(t.extend(q,j),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);q.vector_layers&&(st.vectorLayers=q.vector_layers,st.vectorLayerIds=st.vectorLayers.map(function(Ct){return Ct.id})),st.tiles=I.canonicalizeTileset(st,j.url),w(null,st)}};return j.url?t.getJSON(I.transformRequest(I.normalizeSourceURL(j.url),t.ResourceType.Source),B):t.browser.frame(function(){return B(null,j)})}L.prototype.broadcast=function(j,I,w){t.asyncAll(this.actors,function(B,D){B.send(j,I,D)},w=w||function(){})},L.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},L.prototype.remove=function(){this.actors.forEach(function(j){j.remove()}),this.actors=[],this.workerPool.release(this.id)},L.Actor=t.Actor;var F=function(I,w,B){this.bounds=t.LngLatBounds.convert(this.validateBounds(I)),this.minzoom=w||0,this.maxzoom=B||24};F.prototype.validateBounds=function(j){return Array.isArray(j)&&j.length===4?[Math.max(-180,j[0]),Math.max(-90,j[1]),Math.min(180,j[2]),Math.min(90,j[3])]:[-180,-90,180,90]},F.prototype.contains=function(j){var I=Math.pow(2,j.z),w=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*I),B=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*I),D=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*I),W=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*I);return j.x>=w&&j.x<D&&j.y>=B&&j.y<W};var Z=function(j){function I(w,B,D,W){if(j.call(this),this.id=w,this.dispatcher=D,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(B,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},B),this._collectResourceTiming=B.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(W)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){var w=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=H(this._options,this.map._requestManager,function(B,D){w._tileJSONRequest=null,w._loaded=!0,B?w.fire(new t.ErrorEvent(B)):D&&(t.extend(w,D),D.bounds&&(w.tileBounds=new F(D.bounds,w.minzoom,w.maxzoom)),t.postTurnstileEvent(D.tiles,w.map._requestManager._customAccessToken),t.postMapLoadEvent(D.tiles,w.map._getMapId(),w.map._requestManager._skuToken,w.map._requestManager._customAccessToken),w.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),w.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},I.prototype.loaded=function(){return this._loaded},I.prototype.hasTile=function(w){return!this.tileBounds||this.tileBounds.contains(w.canonical)},I.prototype.onAdd=function(w){this.map=w,this.load()},I.prototype.setSourceProperty=function(w){this._tileJSONRequest&&this._tileJSONRequest.cancel(),w(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},I.prototype.setTiles=function(w){var B=this;return this.setSourceProperty(function(){B._options.tiles=w}),this},I.prototype.setUrl=function(w){var B=this;return this.setSourceProperty(function(){B.url=w,B._options.url=w}),this},I.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},I.prototype.serialize=function(){return t.extend({},this._options)},I.prototype.loadTile=function(w,B){var D=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme)),W={request:this.map._requestManager.transformRequest(D,t.ResourceType.Tile),uid:w.uid,tileID:w.tileID,zoom:w.tileID.overscaledZ,tileSize:this.tileSize*w.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function q(st,Ct){return delete w.request,w.aborted?B(null):st&&st.status!==404?B(st):(Ct&&Ct.resourceTiming&&(w.resourceTiming=Ct.resourceTiming),this.map._refreshExpiredTiles&&Ct&&w.setExpiryData(Ct),w.loadVectorData(Ct,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),B(null),void(w.reloadCallback&&(this.loadTile(w,w.reloadCallback),w.reloadCallback=null)))}W.request.collectResourceTiming=this._collectResourceTiming,w.actor&&w.state!=="expired"?w.state==="loading"?w.reloadCallback=B:w.request=w.actor.send("reloadTile",W,q.bind(this)):(w.actor=this.dispatcher.getActor(),w.request=w.actor.send("loadTile",W,q.bind(this)))},I.prototype.abortTile=function(w){w.request&&(w.request.cancel(),delete w.request),w.actor&&w.actor.send("abortTile",{uid:w.uid,type:this.type,source:this.id},void 0)},I.prototype.unloadTile=function(w){w.unloadVectorData(),w.actor&&w.actor.send("removeTile",{uid:w.uid,type:this.type,source:this.id},void 0)},I.prototype.hasTransition=function(){return!1},I}(t.Evented),G=function(j){function I(w,B,D,W){j.call(this),this.id=w,this.dispatcher=D,this.setEventedParent(W),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},B),t.extend(this,t.pick(B,["url","scheme","tileSize"]))}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){var w=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=H(this._options,this.map._requestManager,function(B,D){w._tileJSONRequest=null,w._loaded=!0,B?w.fire(new t.ErrorEvent(B)):D&&(t.extend(w,D),D.bounds&&(w.tileBounds=new F(D.bounds,w.minzoom,w.maxzoom)),t.postTurnstileEvent(D.tiles),t.postMapLoadEvent(D.tiles,w.map._getMapId(),w.map._requestManager._skuToken),w.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),w.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},I.prototype.loaded=function(){return this._loaded},I.prototype.onAdd=function(w){this.map=w,this.load()},I.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},I.prototype.serialize=function(){return t.extend({},this._options)},I.prototype.hasTile=function(w){return!this.tileBounds||this.tileBounds.contains(w.canonical)},I.prototype.loadTile=function(w,B){var D=this,W=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);w.request=t.getImage(this.map._requestManager.transformRequest(W,t.ResourceType.Tile),function(q,st){if(delete w.request,w.aborted)w.state="unloaded",B(null);else if(q)w.state="errored",B(q);else if(st){D.map._refreshExpiredTiles&&w.setExpiryData(st),delete st.cacheControl,delete st.expires;var Ct=D.map.painter.context,wt=Ct.gl;w.texture=D.map.painter.getTileTexture(st.width),w.texture?w.texture.update(st,{useMipmap:!0}):(w.texture=new t.Texture(Ct,st,wt.RGBA,{useMipmap:!0}),w.texture.bind(wt.LINEAR,wt.CLAMP_TO_EDGE,wt.LINEAR_MIPMAP_NEAREST),Ct.extTextureFilterAnisotropic&&wt.texParameterf(wt.TEXTURE_2D,Ct.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ct.extTextureFilterAnisotropicMax)),w.state="loaded",t.cacheEntryPossiblyAdded(D.dispatcher),B(null)}})},I.prototype.abortTile=function(w,B){w.request&&(w.request.cancel(),delete w.request),B()},I.prototype.unloadTile=function(w,B){w.texture&&this.map.painter.saveTileTexture(w.texture),B()},I.prototype.hasTransition=function(){return!1},I}(t.Evented),U=function(j){function I(w,B,D,W){j.call(this,w,B,D,W),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},B),this.encoding=B.encoding||"mapbox"}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},I.prototype.loadTile=function(w,B){var D=this.map._requestManager.normalizeTileURL(w.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function W(q,st){q&&(w.state="errored",B(q)),st&&(w.dem=st,w.needsHillshadePrepare=!0,w.state="loaded",B(null))}w.request=t.getImage(this.map._requestManager.transformRequest(D,t.ResourceType.Tile),function(q,st){if(delete w.request,w.aborted)w.state="unloaded",B(null);else if(q)w.state="errored",B(q);else if(st){this.map._refreshExpiredTiles&&w.setExpiryData(st),delete st.cacheControl,delete st.expires;var Ct=t.window.ImageBitmap&&st instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?st:t.browser.getImageData(st,1),wt={uid:w.uid,coord:w.tileID,source:this.id,rawImageData:Ct,encoding:this.encoding};w.actor&&w.state!=="expired"||(w.actor=this.dispatcher.getActor(),w.actor.send("loadDEMTile",wt,W.bind(this)))}}.bind(this)),w.neighboringTiles=this._getNeighboringTiles(w.tileID)},I.prototype._getNeighboringTiles=function(w){var B=w.canonical,D=Math.pow(2,B.z),W=(B.x-1+D)%D,q=B.x===0?w.wrap-1:w.wrap,st=(B.x+1+D)%D,Ct=B.x+1===D?w.wrap+1:w.wrap,wt={};return wt[new t.OverscaledTileID(w.overscaledZ,q,B.z,W,B.y).key]={backfilled:!1},wt[new t.OverscaledTileID(w.overscaledZ,Ct,B.z,st,B.y).key]={backfilled:!1},B.y>0&&(wt[new t.OverscaledTileID(w.overscaledZ,q,B.z,W,B.y-1).key]={backfilled:!1},wt[new t.OverscaledTileID(w.overscaledZ,w.wrap,B.z,B.x,B.y-1).key]={backfilled:!1},wt[new t.OverscaledTileID(w.overscaledZ,Ct,B.z,st,B.y-1).key]={backfilled:!1}),B.y+1<D&&(wt[new t.OverscaledTileID(w.overscaledZ,q,B.z,W,B.y+1).key]={backfilled:!1},wt[new t.OverscaledTileID(w.overscaledZ,w.wrap,B.z,B.x,B.y+1).key]={backfilled:!1},wt[new t.OverscaledTileID(w.overscaledZ,Ct,B.z,st,B.y+1).key]={backfilled:!1}),wt},I.prototype.unloadTile=function(w){w.demTexture&&this.map.painter.saveTileTexture(w.demTexture),w.fbo&&(w.fbo.destroy(),delete w.fbo),w.dem&&delete w.dem,delete w.neighboringTiles,w.state="unloaded",w.actor&&w.actor.send("removeDEMTile",{uid:w.uid,source:this.id})},I}(G),Y=function(j){function I(w,B,D,W){j.call(this),this.id=w,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=D.getActor(),this.setEventedParent(W),this._data=B.data,this._options=t.extend({},B),this._collectResourceTiming=B.collectResourceTiming,this._resourceTiming=[],B.maxzoom!==void 0&&(this.maxzoom=B.maxzoom),B.type&&(this.type=B.type),B.attribution&&(this.attribution=B.attribution),this.promoteId=B.promoteId;var q=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:B.cluster||!1,geojsonVtOptions:{buffer:(B.buffer!==void 0?B.buffer:128)*q,tolerance:(B.tolerance!==void 0?B.tolerance:.375)*q,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:B.lineMetrics||!1,generateId:B.generateId||!1},superclusterOptions:{maxZoom:B.clusterMaxZoom!==void 0?Math.min(B.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,B.clusterMinPoints||2),extent:t.EXTENT,radius:(B.clusterRadius||50)*q,log:!1,generateId:B.generateId||!1},clusterProperties:B.clusterProperties,filter:B.filter},B.workerOptions)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){var w=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(B){if(B)w.fire(new t.ErrorEvent(B));else{var D={dataType:"source",sourceDataType:"metadata"};w._collectResourceTiming&&w._resourceTiming&&w._resourceTiming.length>0&&(D.resourceTiming=w._resourceTiming,w._resourceTiming=[]),w.fire(new t.Event("data",D))}})},I.prototype.onAdd=function(w){this.map=w,this.load()},I.prototype.setData=function(w){var B=this;return this._data=w,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(D){if(D)B.fire(new t.ErrorEvent(D));else{var W={dataType:"source",sourceDataType:"content"};B._collectResourceTiming&&B._resourceTiming&&B._resourceTiming.length>0&&(W.resourceTiming=B._resourceTiming,B._resourceTiming=[]),B.fire(new t.Event("data",W))}}),this},I.prototype.getClusterExpansionZoom=function(w,B){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:w,source:this.id},B),this},I.prototype.getClusterChildren=function(w,B){return this.actor.send("geojson.getClusterChildren",{clusterId:w,source:this.id},B),this},I.prototype.getClusterLeaves=function(w,B,D,W){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:w,limit:B,offset:D},W),this},I.prototype._updateWorkerData=function(w){var B=this;this._loaded=!1;var D=t.extend({},this.workerOptions),W=this._data;typeof W=="string"?(D.request=this.map._requestManager.transformRequest(t.browser.resolveURL(W),t.ResourceType.Source),D.request.collectResourceTiming=this._collectResourceTiming):D.data=JSON.stringify(W),this.actor.send(this.type+".loadData",D,function(q,st){B._removed||st&&st.abandoned||(B._loaded=!0,st&&st.resourceTiming&&st.resourceTiming[B.id]&&(B._resourceTiming=st.resourceTiming[B.id].slice(0)),B.actor.send(B.type+".coalesce",{source:D.source},null),w(q))})},I.prototype.loaded=function(){return this._loaded},I.prototype.loadTile=function(w,B){var D=this,W=w.actor?"reloadTile":"loadTile";w.actor=this.actor,w.request=this.actor.send(W,{type:this.type,uid:w.uid,tileID:w.tileID,zoom:w.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(q,st){return delete w.request,w.unloadVectorData(),w.aborted?B(null):q?B(q):(w.loadVectorData(st,D.map.painter,W==="reloadTile"),B(null))})},I.prototype.abortTile=function(w){w.request&&(w.request.cancel(),delete w.request),w.aborted=!0},I.prototype.unloadTile=function(w){w.unloadVectorData(),this.actor.send("removeTile",{uid:w.uid,type:this.type,source:this.id})},I.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},I.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},I.prototype.hasTransition=function(){return!1},I}(t.Evented),J=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),rt=function(j){function I(w,B,D,W){j.call(this),this.id=w,this.dispatcher=D,this.coordinates=B.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(W),this.options=B}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(w,B){var D=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(W,q){D._loaded=!0,W?D.fire(new t.ErrorEvent(W)):q&&(D.image=q,w&&(D.coordinates=w),B&&B(),D._finishLoading())})},I.prototype.loaded=function(){return this._loaded},I.prototype.updateImage=function(w){var B=this;return this.image&&w.url?(this.options.url=w.url,this.load(w.coordinates,function(){B.texture=null}),this):this},I.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},I.prototype.onAdd=function(w){this.map=w,this.load()},I.prototype.setCoordinates=function(w){var B=this;this.coordinates=w;var D=w.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(q){for(var st=1/0,Ct=1/0,wt=-1/0,Ut=-1/0,Zt=0,qt=q;Zt<qt.length;Zt+=1){var he=qt[Zt];st=Math.min(st,he.x),Ct=Math.min(Ct,he.y),wt=Math.max(wt,he.x),Ut=Math.max(Ut,he.y)}var me=Math.max(wt-st,Ut-Ct),De=Math.max(0,Math.floor(-Math.log(me)/Math.LN2)),Ae=Math.pow(2,De);return new t.CanonicalTileID(De,Math.floor((st+wt)/2*Ae),Math.floor((Ct+Ut)/2*Ae))}(D),this.minzoom=this.maxzoom=this.tileID.z;var W=D.map(function(q){return B.tileID.getTilePoint(q)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(W[0].x,W[0].y,0,0),this._boundsArray.emplaceBack(W[1].x,W[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(W[3].x,W[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(W[2].x,W[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},I.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var w=this.map.painter.context,B=w.gl;for(var D in this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(w,this.image,B.RGBA),this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE)),this.tiles){var W=this.tiles[D];W.state!=="loaded"&&(W.state="loaded",W.texture=this.texture)}}},I.prototype.loadTile=function(w,B){this.tileID&&this.tileID.equals(w.tileID.canonical)?(this.tiles[String(w.tileID.wrap)]=w,w.buckets={},B(null)):(w.state="errored",B(null))},I.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},I.prototype.hasTransition=function(){return!1},I}(t.Evented),ft=function(j){function I(w,B,D,W){j.call(this,w,B,D,W),this.roundZoom=!0,this.type="video",this.options=B}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){var w=this;this._loaded=!1;var B=this.options;this.urls=[];for(var D=0,W=B.urls;D<W.length;D+=1)this.urls.push(this.map._requestManager.transformRequest(W[D],t.ResourceType.Source).url);t.getVideo(this.urls,function(q,st){w._loaded=!0,q?w.fire(new t.ErrorEvent(q)):st&&(w.video=st,w.video.loop=!0,w.video.addEventListener("playing",function(){w.map.triggerRepaint()}),w.map&&w.video.play(),w._finishLoading())})},I.prototype.pause=function(){this.video&&this.video.pause()},I.prototype.play=function(){this.video&&this.video.play()},I.prototype.seek=function(w){if(this.video){var B=this.video.seekable;w<B.start(0)||w>B.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+B.start(0)+" and "+B.end(0)+"-second mark."))):this.video.currentTime=w}},I.prototype.getVideo=function(){return this.video},I.prototype.onAdd=function(w){this.map||(this.map=w,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},I.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var w=this.map.painter.context,B=w.gl;for(var D in this.boundsBuffer||(this.boundsBuffer=w.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE),B.texSubImage2D(B.TEXTURE_2D,0,0,0,B.RGBA,B.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(w,this.video,B.RGBA),this.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE)),this.tiles){var W=this.tiles[D];W.state!=="loaded"&&(W.state="loaded",W.texture=this.texture)}}},I.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},I.prototype.hasTransition=function(){return this.video&&!this.video.paused},I}(rt),dt=function(j){function I(w,B,D,W){j.call(this,w,B,D,W),B.coordinates?Array.isArray(B.coordinates)&&B.coordinates.length===4&&!B.coordinates.some(function(q){return!Array.isArray(q)||q.length!==2||q.some(function(st){return typeof st!="number"})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'missing required property "coordinates"'))),B.animate&&typeof B.animate!="boolean"&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'optional "animate" property must be a boolean value'))),B.canvas?typeof B.canvas=="string"||B.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+w,null,'missing required property "canvas"'))),this.options=B,this.animate=B.animate===void 0||B.animate}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},I.prototype.getCanvas=function(){return this.canvas},I.prototype.onAdd=function(w){this.map=w,this.load(),this.canvas&&this.animate&&this.play()},I.prototype.onRemove=function(){this.pause()},I.prototype.prepare=function(){var w=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,w=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,w=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var B=this.map.painter.context,D=B.gl;for(var W in this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(w||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(B,this.canvas,D.RGBA,{premultiply:!0}),this.tiles){var q=this.tiles[W];q.state!=="loaded"&&(q.state="loaded",q.texture=this.texture)}}},I.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},I.prototype.hasTransition=function(){return this._playing},I.prototype._hasInvalidDimensions=function(){for(var w=0,B=[this.canvas.width,this.canvas.height];w<B.length;w+=1){var D=B[w];if(isNaN(D)||D<=0)return!0}return!1},I}(rt),ut={vector:Z,raster:G,"raster-dem":U,geojson:Y,video:ft,image:rt,canvas:dt};function Lt(j,I){var w=t.identity([]);return t.translate(w,w,[1,1,0]),t.scale(w,w,[.5*j.width,.5*j.height,1]),t.multiply(w,w,j.calculatePosMatrix(I.toUnwrapped()))}function Ft(j,I,w,B,D,W){var q=function(De,Ae,Ue){if(De)for(var qe=0,rn=De;qe<rn.length;qe+=1){var Xn=Ae[rn[qe]];if(Xn&&Xn.source===Ue&&Xn.type==="fill-extrusion")return!0}else for(var Un in Ae){var gr=Ae[Un];if(gr.source===Ue&&gr.type==="fill-extrusion")return!0}return!1}(D&&D.layers,I,j.id),st=W.maxPitchScaleFactor(),Ct=j.tilesIn(B,st,q);Ct.sort(Ot);for(var wt=[],Ut=0,Zt=Ct;Ut<Zt.length;Ut+=1){var qt=Zt[Ut];wt.push({wrappedTileID:qt.tileID.wrapped().key,queryResults:qt.tile.queryRenderedFeatures(I,w,j._state,qt.queryGeometry,qt.cameraQueryGeometry,qt.scale,D,W,st,Lt(j.transform,qt.tileID))})}var he=function(De){for(var Ae={},Ue={},qe=0,rn=De;qe<rn.length;qe+=1){var Xn=rn[qe],Un=Xn.queryResults,gr=Xn.wrappedTileID,Mr=Ue[gr]=Ue[gr]||{};for(var Qr in Un)for(var Vr=Un[Qr],_i=Mr[Qr]=Mr[Qr]||{},Di=Ae[Qr]=Ae[Qr]||[],Wi=0,Xi=Vr;Wi<Xi.length;Wi+=1){var La=Xi[Wi];_i[La.featureIndex]||(_i[La.featureIndex]=!0,Di.push(La))}}return Ae}(wt);for(var me in he)he[me].forEach(function(De){var Ae=De.feature,Ue=j.getFeatureState(Ae.layer["source-layer"],Ae.id);Ae.source=Ae.layer.source,Ae.layer["source-layer"]&&(Ae.sourceLayer=Ae.layer["source-layer"]),Ae.state=Ue});return he}function Ot(j,I){var w=j.tileID,B=I.tileID;return w.overscaledZ-B.overscaledZ||w.canonical.y-B.canonical.y||w.wrap-B.wrap||w.canonical.x-B.canonical.x}var St=function(I,w){this.max=I,this.onRemove=w,this.reset()};St.prototype.reset=function(){for(var j in this.data)for(var I=0,w=this.data[j];I<w.length;I+=1){var B=w[I];B.timeout&&clearTimeout(B.timeout),this.onRemove(B.value)}return this.data={},this.order=[],this},St.prototype.add=function(j,I,w){var B=this,D=j.wrapped().key;this.data[D]===void 0&&(this.data[D]=[]);var W={value:I,timeout:void 0};if(w!==void 0&&(W.timeout=setTimeout(function(){B.remove(j,W)},w)),this.data[D].push(W),this.order.push(D),this.order.length>this.max){var q=this._getAndRemoveByKey(this.order[0]);q&&this.onRemove(q)}return this},St.prototype.has=function(j){return j.wrapped().key in this.data},St.prototype.getAndRemove=function(j){return this.has(j)?this._getAndRemoveByKey(j.wrapped().key):null},St.prototype._getAndRemoveByKey=function(j){var I=this.data[j].shift();return I.timeout&&clearTimeout(I.timeout),this.data[j].length===0&&delete this.data[j],this.order.splice(this.order.indexOf(j),1),I.value},St.prototype.getByKey=function(j){var I=this.data[j];return I?I[0].value:null},St.prototype.get=function(j){return this.has(j)?this.data[j.wrapped().key][0].value:null},St.prototype.remove=function(j,I){if(!this.has(j))return this;var w=j.wrapped().key,B=I===void 0?0:this.data[w].indexOf(I),D=this.data[w][B];return this.data[w].splice(B,1),D.timeout&&clearTimeout(D.timeout),this.data[w].length===0&&delete this.data[w],this.onRemove(D.value),this.order.splice(this.order.indexOf(w),1),this},St.prototype.setMaxSize=function(j){for(this.max=j;this.order.length>this.max;){var I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this},St.prototype.filter=function(j){var I=[];for(var w in this.data)for(var B=0,D=this.data[w];B<D.length;B+=1){var W=D[B];j(W.value)||I.push(W)}for(var q=0,st=I;q<st.length;q+=1){var Ct=st[q];this.remove(Ct.value.tileID,Ct)}};var xt=function(I,w,B){this.context=I;var D=I.gl;this.buffer=D.createBuffer(),this.dynamicDraw=Boolean(B),this.context.unbindVAO(),I.bindElementBuffer.set(this.buffer),D.bufferData(D.ELEMENT_ARRAY_BUFFER,w.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||delete w.arrayBuffer};xt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},xt.prototype.updateData=function(j){var I=this.context.gl;this.context.unbindVAO(),this.bind(),I.bufferSubData(I.ELEMENT_ARRAY_BUFFER,0,j.arrayBuffer)},xt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var At={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},nt=function(I,w,B,D){this.length=w.length,this.attributes=B,this.itemSize=w.bytesPerElement,this.dynamicDraw=D,this.context=I;var W=I.gl;this.buffer=W.createBuffer(),I.bindVertexBuffer.set(this.buffer),W.bufferData(W.ARRAY_BUFFER,w.arrayBuffer,this.dynamicDraw?W.DYNAMIC_DRAW:W.STATIC_DRAW),this.dynamicDraw||delete w.arrayBuffer};nt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},nt.prototype.updateData=function(j){var I=this.context.gl;this.bind(),I.bufferSubData(I.ARRAY_BUFFER,0,j.arrayBuffer)},nt.prototype.enableAttributes=function(j,I){for(var w=0;w<this.attributes.length;w++){var B=I.attributes[this.attributes[w].name];B!==void 0&&j.enableVertexAttribArray(B)}},nt.prototype.setVertexAttribPointers=function(j,I,w){for(var B=0;B<this.attributes.length;B++){var D=this.attributes[B],W=I.attributes[D.name];W!==void 0&&j.vertexAttribPointer(W,D.components,j[At[D.type]],!1,this.itemSize,D.offset+this.itemSize*(w||0))}},nt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Mt=function(I){this.gl=I.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Mt.prototype.get=function(){return this.current},Mt.prototype.set=function(j){},Mt.prototype.getDefault=function(){return this.default},Mt.prototype.setDefault=function(){this.set(this.default)};var z=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return t.Color.transparent},I.prototype.set=function(w){var B=this.current;(w.r!==B.r||w.g!==B.g||w.b!==B.b||w.a!==B.a||this.dirty)&&(this.gl.clearColor(w.r,w.g,w.b,w.a),this.current=w,this.dirty=!1)},I}(Mt),Q=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return 1},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.clearDepth(w),this.current=w,this.dirty=!1)},I}(Mt),ht=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return 0},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.clearStencil(w),this.current=w,this.dirty=!1)},I}(Mt),et=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return[!0,!0,!0,!0]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||w[2]!==B[2]||w[3]!==B[3]||this.dirty)&&(this.gl.colorMask(w[0],w[1],w[2],w[3]),this.current=w,this.dirty=!1)},I}(Mt),at=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!0},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.depthMask(w),this.current=w,this.dirty=!1)},I}(Mt),gt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return 255},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.stencilMask(w),this.current=w,this.dirty=!1)},I}(Mt),k=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},I.prototype.set=function(w){var B=this.current;(w.func!==B.func||w.ref!==B.ref||w.mask!==B.mask||this.dirty)&&(this.gl.stencilFunc(w.func,w.ref,w.mask),this.current=w,this.dirty=!1)},I}(Mt),ot=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){var w=this.gl;return[w.KEEP,w.KEEP,w.KEEP]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||w[2]!==B[2]||this.dirty)&&(this.gl.stencilOp(w[0],w[1],w[2]),this.current=w,this.dirty=!1)},I}(Mt),it=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;w?B.enable(B.STENCIL_TEST):B.disable(B.STENCIL_TEST),this.current=w,this.dirty=!1}},I}(Mt),X=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return[0,1]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||this.dirty)&&(this.gl.depthRange(w[0],w[1]),this.current=w,this.dirty=!1)},I}(Mt),Et=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;w?B.enable(B.DEPTH_TEST):B.disable(B.DEPTH_TEST),this.current=w,this.dirty=!1}},I}(Mt),vt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.LESS},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.depthFunc(w),this.current=w,this.dirty=!1)},I}(Mt),Nt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;w?B.enable(B.BLEND):B.disable(B.BLEND),this.current=w,this.dirty=!1}},I}(Mt),$t=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){var w=this.gl;return[w.ONE,w.ZERO]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||this.dirty)&&(this.gl.blendFunc(w[0],w[1]),this.current=w,this.dirty=!1)},I}(Mt),ee=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return t.Color.transparent},I.prototype.set=function(w){var B=this.current;(w.r!==B.r||w.g!==B.g||w.b!==B.b||w.a!==B.a||this.dirty)&&(this.gl.blendColor(w.r,w.g,w.b,w.a),this.current=w,this.dirty=!1)},I}(Mt),kt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.FUNC_ADD},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.blendEquation(w),this.current=w,this.dirty=!1)},I}(Mt),Wt=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;w?B.enable(B.CULL_FACE):B.disable(B.CULL_FACE),this.current=w,this.dirty=!1}},I}(Mt),ae=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.BACK},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.cullFace(w),this.current=w,this.dirty=!1)},I}(Mt),le=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.CCW},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.frontFace(w),this.current=w,this.dirty=!1)},I}(Mt),je=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.useProgram(w),this.current=w,this.dirty=!1)},I}(Mt),Oe=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return this.gl.TEXTURE0},I.prototype.set=function(w){(w!==this.current||this.dirty)&&(this.gl.activeTexture(w),this.current=w,this.dirty=!1)},I}(Mt),We=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){var w=this.gl;return[0,0,w.drawingBufferWidth,w.drawingBufferHeight]},I.prototype.set=function(w){var B=this.current;(w[0]!==B[0]||w[1]!==B[1]||w[2]!==B[2]||w[3]!==B[3]||this.dirty)&&(this.gl.viewport(w[0],w[1],w[2],w[3]),this.current=w,this.dirty=!1)},I}(Mt),Ye=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.bindFramebuffer(B.FRAMEBUFFER,w),this.current=w,this.dirty=!1}},I}(Mt),wn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.bindRenderbuffer(B.RENDERBUFFER,w),this.current=w,this.dirty=!1}},I}(Mt),er=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.bindTexture(B.TEXTURE_2D,w),this.current=w,this.dirty=!1}},I}(Mt),wr=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.bindBuffer(B.ARRAY_BUFFER,w),this.current=w,this.dirty=!1}},I}(Mt),on=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){var B=this.gl;B.bindBuffer(B.ELEMENT_ARRAY_BUFFER,w),this.current=w,this.dirty=!1},I}(Mt),en=function(j){function I(w){j.call(this,w),this.vao=w.extVertexArrayObject}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I.prototype.set=function(w){this.vao&&(w!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(w),this.current=w,this.dirty=!1)},I}(Mt),An=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return 4},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.pixelStorei(B.UNPACK_ALIGNMENT,w),this.current=w,this.dirty=!1}},I}(Mt),jn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w),this.current=w,this.dirty=!1}},I}(Mt),pr=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return!1},I.prototype.set=function(w){if(w!==this.current||this.dirty){var B=this.gl;B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,w),this.current=w,this.dirty=!1}},I}(Mt),di=function(j){function I(w,B){j.call(this,w),this.context=w,this.parent=B}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getDefault=function(){return null},I}(Mt),Ce=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.setDirty=function(){this.dirty=!0},I.prototype.set=function(w){if(w!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var B=this.gl;B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,w,0),this.current=w,this.dirty=!1}},I}(di),Me=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.set=function(w){if(w!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var B=this.gl;B.framebufferRenderbuffer(B.FRAMEBUFFER,B.DEPTH_ATTACHMENT,B.RENDERBUFFER,w),this.current=w,this.dirty=!1}},I}(di),Qt=function(I,w,B,D){this.context=I,this.width=w,this.height=B;var W=this.framebuffer=I.gl.createFramebuffer();this.colorAttachment=new Ce(I,W),D&&(this.depthAttachment=new Me(I,W))};Qt.prototype.destroy=function(){var j=this.context.gl,I=this.colorAttachment.get();if(I&&j.deleteTexture(I),this.depthAttachment){var w=this.depthAttachment.get();w&&j.deleteRenderbuffer(w)}j.deleteFramebuffer(this.framebuffer)};var pe=function(I,w,B){this.func=I,this.mask=w,this.range=B};pe.ReadOnly=!1,pe.ReadWrite=!0,pe.disabled=new pe(519,pe.ReadOnly,[0,1]);var Vt=function(I,w,B,D,W,q){this.test=I,this.ref=w,this.mask=B,this.fail=D,this.depthFail=W,this.pass=q};Vt.disabled=new Vt({func:519,mask:0},0,0,7680,7680,7680);var re=function(I,w,B){this.blendFunction=I,this.blendColor=w,this.mask=B};re.disabled=new re(re.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),re.unblended=new re(re.Replace,t.Color.transparent,[!0,!0,!0,!0]),re.alphaBlended=new re([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Te=function(I,w,B){this.enable=I,this.mode=w,this.frontFace=B};Te.disabled=new Te(!1,1029,2305),Te.backCCW=new Te(!0,1029,2305);var ue=function(I){this.gl=I,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new z(this),this.clearDepth=new Q(this),this.clearStencil=new ht(this),this.colorMask=new et(this),this.depthMask=new at(this),this.stencilMask=new gt(this),this.stencilFunc=new k(this),this.stencilOp=new ot(this),this.stencilTest=new it(this),this.depthRange=new X(this),this.depthTest=new Et(this),this.depthFunc=new vt(this),this.blend=new Nt(this),this.blendFunc=new $t(this),this.blendColor=new ee(this),this.blendEquation=new kt(this),this.cullFace=new Wt(this),this.cullFaceSide=new ae(this),this.frontFace=new le(this),this.program=new je(this),this.activeTexture=new Oe(this),this.viewport=new We(this),this.bindFramebuffer=new Ye(this),this.bindRenderbuffer=new wn(this),this.bindTexture=new er(this),this.bindVertexBuffer=new wr(this),this.bindElementBuffer=new on(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new en(this),this.pixelStoreUnpack=new An(this),this.pixelStoreUnpackPremultiplyAlpha=new jn(this),this.pixelStoreUnpackFlipY=new pr(this),this.extTextureFilterAnisotropic=I.getExtension("EXT_texture_filter_anisotropic")||I.getExtension("MOZ_EXT_texture_filter_anisotropic")||I.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=I.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=I.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(I.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=I.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=I.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=I.getParameter(I.MAX_TEXTURE_SIZE)};ue.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},ue.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},ue.prototype.createIndexBuffer=function(j,I){return new xt(this,j,I)},ue.prototype.createVertexBuffer=function(j,I,w){return new nt(this,j,I,w)},ue.prototype.createRenderbuffer=function(j,I,w){var B=this.gl,D=B.createRenderbuffer();return this.bindRenderbuffer.set(D),B.renderbufferStorage(B.RENDERBUFFER,j,I,w),this.bindRenderbuffer.set(null),D},ue.prototype.createFramebuffer=function(j,I,w){return new Qt(this,j,I,w)},ue.prototype.clear=function(j){var I=j.color,w=j.depth,B=this.gl,D=0;I&&(D|=B.COLOR_BUFFER_BIT,this.clearColor.set(I),this.colorMask.set([!0,!0,!0,!0])),w!==void 0&&(D|=B.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(w),this.depthMask.set(!0)),B.clear(D)},ue.prototype.setCullFace=function(j){j.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(j.mode),this.frontFace.set(j.frontFace))},ue.prototype.setDepthMode=function(j){j.func!==this.gl.ALWAYS||j.mask?(this.depthTest.set(!0),this.depthFunc.set(j.func),this.depthMask.set(j.mask),this.depthRange.set(j.range)):this.depthTest.set(!1)},ue.prototype.setStencilMode=function(j){j.test.func!==this.gl.ALWAYS||j.mask?(this.stencilTest.set(!0),this.stencilMask.set(j.mask),this.stencilOp.set([j.fail,j.depthFail,j.pass]),this.stencilFunc.set({func:j.test.func,ref:j.ref,mask:j.test.mask})):this.stencilTest.set(!1)},ue.prototype.setColorMode=function(j){t.deepEqual(j.blendFunction,re.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(j.blendFunction),this.blendColor.set(j.blendColor)),this.colorMask.set(j.mask)},ue.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var xe=function(j){function I(w,B,D){var W=this;j.call(this),this.id=w,this.dispatcher=D,this.on("data",function(q){q.dataType==="source"&&q.sourceDataType==="metadata"&&(W._sourceLoaded=!0),W._sourceLoaded&&!W._paused&&q.dataType==="source"&&q.sourceDataType==="content"&&(W.reload(),W.transform&&W.update(W.transform))}),this.on("error",function(){W._sourceErrored=!0}),this._source=function(q,st,Ct,wt){var Ut=new ut[st.type](q,st,Ct,wt);if(Ut.id!==q)throw new Error("Expected Source id to be "+q+" instead of "+Ut.id);return t.bindAll(["load","abort","unload","serialize","prepare"],Ut),Ut}(w,B,D,this),this._tiles={},this._cache=new St(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.onAdd=function(w){this.map=w,this._maxTileCacheSize=w?w._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(w)},I.prototype.onRemove=function(w){this._source&&this._source.onRemove&&this._source.onRemove(w)},I.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var w in this._tiles){var B=this._tiles[w];if(B.state!=="loaded"&&B.state!=="errored")return!1}return!0},I.prototype.getSource=function(){return this._source},I.prototype.pause=function(){this._paused=!0},I.prototype.resume=function(){if(this._paused){var w=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,w&&this.reload(),this.transform&&this.update(this.transform)}},I.prototype._loadTile=function(w,B){return this._source.loadTile(w,B)},I.prototype._unloadTile=function(w){if(this._source.unloadTile)return this._source.unloadTile(w,function(){})},I.prototype._abortTile=function(w){if(this._source.abortTile)return this._source.abortTile(w,function(){})},I.prototype.serialize=function(){return this._source.serialize()},I.prototype.prepare=function(w){for(var B in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var D=this._tiles[B];D.upload(w),D.prepare(this.map.style.imageManager)}},I.prototype.getIds=function(){return t.values(this._tiles).map(function(w){return w.tileID}).sort(Ke).map(function(w){return w.key})},I.prototype.getRenderableIds=function(w){var B=this,D=[];for(var W in this._tiles)this._isIdRenderable(W,w)&&D.push(this._tiles[W]);return w?D.sort(function(q,st){var Ct=q.tileID,wt=st.tileID,Ut=new t.Point(Ct.canonical.x,Ct.canonical.y)._rotate(B.transform.angle),Zt=new t.Point(wt.canonical.x,wt.canonical.y)._rotate(B.transform.angle);return Ct.overscaledZ-wt.overscaledZ||Zt.y-Ut.y||Zt.x-Ut.x}).map(function(q){return q.tileID.key}):D.map(function(q){return q.tileID}).sort(Ke).map(function(q){return q.key})},I.prototype.hasRenderableParent=function(w){var B=this.findLoadedParent(w,0);return!!B&&this._isIdRenderable(B.tileID.key)},I.prototype._isIdRenderable=function(w,B){return this._tiles[w]&&this._tiles[w].hasData()&&!this._coveredTiles[w]&&(B||!this._tiles[w].holdingForFade())},I.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var w in this._cache.reset(),this._tiles)this._tiles[w].state!=="errored"&&this._reloadTile(w,"reloading")},I.prototype._reloadTile=function(w,B){var D=this._tiles[w];D&&(D.state!=="loading"&&(D.state=B),this._loadTile(D,this._tileLoaded.bind(this,D,w,B)))},I.prototype._tileLoaded=function(w,B,D,W){if(W)return w.state="errored",void(W.status!==404?this._source.fire(new t.ErrorEvent(W,{tile:w})):this.update(this.transform));w.timeAdded=t.browser.now(),D==="expired"&&(w.refreshedUponExpiration=!0),this._setTileReloadTimer(B,w),this.getSource().type==="raster-dem"&&w.dem&&this._backfillDEM(w),this._state.initializeTileState(w,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:w,coord:w.tileID}))},I.prototype._backfillDEM=function(w){for(var B=this.getRenderableIds(),D=0;D<B.length;D++){var W=B[D];if(w.neighboringTiles&&w.neighboringTiles[W]){var q=this.getTileByID(W);st(w,q),st(q,w)}}function st(Ct,wt){Ct.needsHillshadePrepare=!0;var Ut=wt.tileID.canonical.x-Ct.tileID.canonical.x,Zt=wt.tileID.canonical.y-Ct.tileID.canonical.y,qt=Math.pow(2,Ct.tileID.canonical.z),he=wt.tileID.key;Ut===0&&Zt===0||Math.abs(Zt)>1||(Math.abs(Ut)>1&&(Math.abs(Ut+qt)===1?Ut+=qt:Math.abs(Ut-qt)===1&&(Ut-=qt)),wt.dem&&Ct.dem&&(Ct.dem.backfillBorder(wt.dem,Ut,Zt),Ct.neighboringTiles&&Ct.neighboringTiles[he]&&(Ct.neighboringTiles[he].backfilled=!0)))}},I.prototype.getTile=function(w){return this.getTileByID(w.key)},I.prototype.getTileByID=function(w){return this._tiles[w]},I.prototype._retainLoadedChildren=function(w,B,D,W){for(var q in this._tiles){var st=this._tiles[q];if(!(W[q]||!st.hasData()||st.tileID.overscaledZ<=B||st.tileID.overscaledZ>D)){for(var Ct=st.tileID;st&&st.tileID.overscaledZ>B+1;){var wt=st.tileID.scaledTo(st.tileID.overscaledZ-1);(st=this._tiles[wt.key])&&st.hasData()&&(Ct=wt)}for(var Ut=Ct;Ut.overscaledZ>B;)if(w[(Ut=Ut.scaledTo(Ut.overscaledZ-1)).key]){W[Ct.key]=Ct;break}}}},I.prototype.findLoadedParent=function(w,B){if(w.key in this._loadedParentTiles){var D=this._loadedParentTiles[w.key];return D&&D.tileID.overscaledZ>=B?D:null}for(var W=w.overscaledZ-1;W>=B;W--){var q=w.scaledTo(W),st=this._getLoadedTile(q);if(st)return st}},I.prototype._getLoadedTile=function(w){var B=this._tiles[w.key];return B&&B.hasData()?B:this._cache.getByKey(w.wrapped().key)},I.prototype.updateCacheSize=function(w){var B=Math.ceil(w.width/this._source.tileSize)+1,D=Math.ceil(w.height/this._source.tileSize)+1,W=Math.floor(B*D*5),q=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,W):W;this._cache.setMaxSize(q)},I.prototype.handleWrapJump=function(w){var B=Math.round((w-(this._prevLng===void 0?w:this._prevLng))/360);if(this._prevLng=w,B){var D={};for(var W in this._tiles){var q=this._tiles[W];q.tileID=q.tileID.unwrapTo(q.tileID.wrap+B),D[q.tileID.key]=q}for(var st in this._tiles=D,this._timers)clearTimeout(this._timers[st]),delete this._timers[st];for(var Ct in this._tiles)this._setTileReloadTimer(Ct,this._tiles[Ct])}},I.prototype.update=function(w){var B=this;if(this.transform=w,this._sourceLoaded&&!this._paused){var D;this.updateCacheSize(w),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?D=w.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Mr){return new t.OverscaledTileID(Mr.canonical.z,Mr.wrap,Mr.canonical.z,Mr.canonical.x,Mr.canonical.y)}):(D=w.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(D=D.filter(function(Mr){return B._source.hasTile(Mr)}))):D=[];var W=w.coveringZoomLevel(this._source),q=Math.max(W-I.maxOverzooming,this._source.minzoom),st=Math.max(W+I.maxUnderzooming,this._source.minzoom),Ct=this._updateRetainedTiles(D,W);if(Rn(this._source.type)){for(var wt={},Ut={},Zt=0,qt=Object.keys(Ct);Zt<qt.length;Zt+=1){var he=qt[Zt],me=Ct[he],De=this._tiles[he];if(De&&!(De.fadeEndTime&&De.fadeEndTime<=t.browser.now())){var Ae=this.findLoadedParent(me,q);Ae&&(this._addTile(Ae.tileID),wt[Ae.tileID.key]=Ae.tileID),Ut[he]=me}}for(var Ue in this._retainLoadedChildren(Ut,W,st,Ct),wt)Ct[Ue]||(this._coveredTiles[Ue]=!0,Ct[Ue]=wt[Ue])}for(var qe in Ct)this._tiles[qe].clearFadeHold();for(var rn=0,Xn=t.keysDifference(this._tiles,Ct);rn<Xn.length;rn+=1){var Un=Xn[rn],gr=this._tiles[Un];gr.hasSymbolBuckets&&!gr.holdingForFade()?gr.setHoldDuration(this.map._fadeDuration):gr.hasSymbolBuckets&&!gr.symbolFadeFinished()||this._removeTile(Un)}this._updateLoadedParentTileCache()}},I.prototype.releaseSymbolFadeTiles=function(){for(var w in this._tiles)this._tiles[w].holdingForFade()&&this._removeTile(w)},I.prototype._updateRetainedTiles=function(w,B){for(var D={},W={},q=Math.max(B-I.maxOverzooming,this._source.minzoom),st=Math.max(B+I.maxUnderzooming,this._source.minzoom),Ct={},wt=0,Ut=w;wt<Ut.length;wt+=1){var Zt=Ut[wt],qt=this._addTile(Zt);D[Zt.key]=Zt,qt.hasData()||B<this._source.maxzoom&&(Ct[Zt.key]=Zt)}this._retainLoadedChildren(Ct,B,st,D);for(var he=0,me=w;he<me.length;he+=1){var De=me[he],Ae=this._tiles[De.key];if(!Ae.hasData()){if(B+1>this._source.maxzoom){var Ue=De.children(this._source.maxzoom)[0],qe=this.getTile(Ue);if(qe&&qe.hasData()){D[Ue.key]=Ue;continue}}else{var rn=De.children(this._source.maxzoom);if(D[rn[0].key]&&D[rn[1].key]&&D[rn[2].key]&&D[rn[3].key])continue}for(var Xn=Ae.wasRequested(),Un=De.overscaledZ-1;Un>=q;--Un){var gr=De.scaledTo(Un);if(W[gr.key]||(W[gr.key]=!0,!(Ae=this.getTile(gr))&&Xn&&(Ae=this._addTile(gr)),Ae&&(D[gr.key]=gr,Xn=Ae.wasRequested(),Ae.hasData())))break}}}return D},I.prototype._updateLoadedParentTileCache=function(){for(var w in this._loadedParentTiles={},this._tiles){for(var B=[],D=void 0,W=this._tiles[w].tileID;W.overscaledZ>0;){if(W.key in this._loadedParentTiles){D=this._loadedParentTiles[W.key];break}B.push(W.key);var q=W.scaledTo(W.overscaledZ-1);if(D=this._getLoadedTile(q))break;W=q}for(var st=0,Ct=B;st<Ct.length;st+=1)this._loadedParentTiles[Ct[st]]=D}},I.prototype._addTile=function(w){var B=this._tiles[w.key];if(B)return B;(B=this._cache.getAndRemove(w))&&(this._setTileReloadTimer(w.key,B),B.tileID=w,this._state.initializeTileState(B,this.map?this.map.painter:null),this._cacheTimers[w.key]&&(clearTimeout(this._cacheTimers[w.key]),delete this._cacheTimers[w.key],this._setTileReloadTimer(w.key,B)));var D=Boolean(B);return D||(B=new t.Tile(w,this._source.tileSize*w.overscaleFactor()),this._loadTile(B,this._tileLoaded.bind(this,B,w.key,B.state))),B?(B.uses++,this._tiles[w.key]=B,D||this._source.fire(new t.Event("dataloading",{tile:B,coord:B.tileID,dataType:"source"})),B):null},I.prototype._setTileReloadTimer=function(w,B){var D=this;w in this._timers&&(clearTimeout(this._timers[w]),delete this._timers[w]);var W=B.getExpiryTimeout();W&&(this._timers[w]=setTimeout(function(){D._reloadTile(w,"expired"),delete D._timers[w]},W))},I.prototype._removeTile=function(w){var B=this._tiles[w];B&&(B.uses--,delete this._tiles[w],this._timers[w]&&(clearTimeout(this._timers[w]),delete this._timers[w]),B.uses>0||(B.hasData()&&B.state!=="reloading"?this._cache.add(B.tileID,B,B.getExpiryTimeout()):(B.aborted=!0,this._abortTile(B),this._unloadTile(B))))},I.prototype.clearTiles=function(){for(var w in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(w);this._cache.reset()},I.prototype.tilesIn=function(w,B,D){var W=this,q=[],st=this.transform;if(!st)return q;for(var Ct=D?st.getCameraQueryGeometry(w):w,wt=w.map(function(Un){return st.pointCoordinate(Un)}),Ut=Ct.map(function(Un){return st.pointCoordinate(Un)}),Zt=this.getIds(),qt=1/0,he=1/0,me=-1/0,De=-1/0,Ae=0,Ue=Ut;Ae<Ue.length;Ae+=1){var qe=Ue[Ae];qt=Math.min(qt,qe.x),he=Math.min(he,qe.y),me=Math.max(me,qe.x),De=Math.max(De,qe.y)}for(var rn=function(gr){var Mr=W._tiles[Zt[gr]];if(!Mr.holdingForFade()){var Qr=Mr.tileID,Vr=Math.pow(2,st.zoom-Mr.tileID.overscaledZ),_i=B*Mr.queryPadding*t.EXTENT/Mr.tileSize/Vr,Di=[Qr.getTilePoint(new t.MercatorCoordinate(qt,he)),Qr.getTilePoint(new t.MercatorCoordinate(me,De))];if(Di[0].x-_i<t.EXTENT&&Di[0].y-_i<t.EXTENT&&Di[1].x+_i>=0&&Di[1].y+_i>=0){var Wi=wt.map(function(La){return Qr.getTilePoint(La)}),Xi=Ut.map(function(La){return Qr.getTilePoint(La)});q.push({tile:Mr,tileID:Qr,queryGeometry:Wi,cameraQueryGeometry:Xi,scale:Vr})}}},Xn=0;Xn<Zt.length;Xn++)rn(Xn);return q},I.prototype.getVisibleCoordinates=function(w){for(var B=this,D=this.getRenderableIds(w).map(function(Ct){return B._tiles[Ct].tileID}),W=0,q=D;W<q.length;W+=1){var st=q[W];st.posMatrix=this.transform.calculatePosMatrix(st.toUnwrapped())}return D},I.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Rn(this._source.type))for(var w in this._tiles){var B=this._tiles[w];if(B.fadeEndTime!==void 0&&B.fadeEndTime>=t.browser.now())return!0}return!1},I.prototype.setFeatureState=function(w,B,D){this._state.updateState(w=w||"_geojsonTileLayer",B,D)},I.prototype.removeFeatureState=function(w,B,D){this._state.removeFeatureState(w=w||"_geojsonTileLayer",B,D)},I.prototype.getFeatureState=function(w,B){return this._state.getState(w=w||"_geojsonTileLayer",B)},I.prototype.setDependencies=function(w,B,D){var W=this._tiles[w];W&&W.setDependencies(B,D)},I.prototype.reloadTilesForDependencies=function(w,B){for(var D in this._tiles)this._tiles[D].hasDependency(w,B)&&this._reloadTile(D,"reloading");this._cache.filter(function(W){return!W.hasDependency(w,B)})},I}(t.Evented);function Ke(j,I){var w=Math.abs(2*j.wrap)-+(j.wrap<0),B=Math.abs(2*I.wrap)-+(I.wrap<0);return j.overscaledZ-I.overscaledZ||B-w||I.canonical.y-j.canonical.y||I.canonical.x-j.canonical.x}function Rn(j){return j==="raster"||j==="image"||j==="video"}function tr(){return new t.window.Worker(Mu.workerUrl)}xe.maxOverzooming=10,xe.maxUnderzooming=3;var Pn="mapboxgl_preloaded_worker_pool",dn=function(){this.active={}};dn.prototype.acquire=function(j){if(!this.workers)for(this.workers=[];this.workers.length<dn.workerCount;)this.workers.push(new tr);return this.active[j]=!0,this.workers.slice()},dn.prototype.release=function(j){delete this.active[j],this.numActive()===0&&(this.workers.forEach(function(I){I.terminate()}),this.workers=null)},dn.prototype.isPreloaded=function(){return!!this.active[Pn]},dn.prototype.numActive=function(){return Object.keys(this.active).length};var Ar,or=Math.floor(t.browser.hardwareConcurrency/2);function cn(){return Ar||(Ar=new dn),Ar}function Pr(j,I){var w={};for(var B in j)B!=="ref"&&(w[B]=j[B]);return t.refProperties.forEach(function(D){D in I&&(w[D]=I[D])}),w}function Sr(j){j=j.slice();for(var I=Object.create(null),w=0;w<j.length;w++)I[j[w].id]=j[w];for(var B=0;B<j.length;B++)"ref"in j[B]&&(j[B]=Pr(j[B],I[j[B].ref]));return j}dn.workerCount=Math.max(Math.min(or,6),1);var Re={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function $e(j,I,w){w.push({command:Re.addSource,args:[j,I[j]]})}function Ve(j,I,w){I.push({command:Re.removeSource,args:[j]}),w[j]=!0}function En(j,I,w,B){Ve(j,w,B),$e(j,I,w)}function xn(j,I,w){var B;for(B in j[w])if(j[w].hasOwnProperty(B)&&B!=="data"&&!t.deepEqual(j[w][B],I[w][B]))return!1;for(B in I[w])if(I[w].hasOwnProperty(B)&&B!=="data"&&!t.deepEqual(j[w][B],I[w][B]))return!1;return!0}function Nn(j,I,w,B,D,W){var q;for(q in I=I||{},j=j||{})j.hasOwnProperty(q)&&(t.deepEqual(j[q],I[q])||w.push({command:W,args:[B,q,I[q],D]}));for(q in I)I.hasOwnProperty(q)&&!j.hasOwnProperty(q)&&(t.deepEqual(j[q],I[q])||w.push({command:W,args:[B,q,I[q],D]}))}function mn(j){return j.id}function Dn(j,I){return j[I.id]=I,j}var $n=function(I,w){this.reset(I,w)};$n.prototype.reset=function(j,I){this.points=j||[],this._distances=[0];for(var w=1;w<this.points.length;w++)this._distances[w]=this._distances[w-1]+this.points[w].dist(this.points[w-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(I||0,.5*this.length),this.paddedLength=this.length-2*this.padding},$n.prototype.lerp=function(j){if(this.points.length===1)return this.points[0];j=t.clamp(j,0,1);for(var I=1,w=this._distances[I],B=j*this.paddedLength+this.padding;w<B&&I<this._distances.length;)w=this._distances[++I];var D=I-1,W=this._distances[D],q=w-W,st=q>0?(B-W)/q:0;return this.points[D].mult(1-st).add(this.points[I].mult(st))};var Hn=function(I,w,B){var D=this.boxCells=[],W=this.circleCells=[];this.xCellCount=Math.ceil(I/B),this.yCellCount=Math.ceil(w/B);for(var q=0;q<this.xCellCount*this.yCellCount;q++)D.push([]),W.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=I,this.height=w,this.xScale=this.xCellCount/I,this.yScale=this.yCellCount/w,this.boxUid=0,this.circleUid=0};function _n(j,I,w,B,D){var W=t.create();return I?(t.scale(W,W,[1/D,1/D,1]),w||t.rotateZ(W,W,B.angle)):t.multiply(W,B.labelPlaneMatrix,j),W}function br(j,I,w,B,D){if(I){var W=t.clone(j);return t.scale(W,W,[D,D,1]),w||t.rotateZ(W,W,-B.angle),W}return B.glCoordMatrix}function yr(j,I){var w=[j.x,j.y,0,1];jo(w,w,I);var B=w[3];return{point:new t.Point(w[0]/B,w[1]/B),signedDistanceFromCamera:B}}function Fr(j,I){return .5+j/I*.5}function Ei(j,I){var w=j[0]/j[3],B=j[1]/j[3];return w>=-I[0]&&w<=I[0]&&B>=-I[1]&&B<=I[1]}function Ta(j,I,w,B,D,W,q,st){var Ct=B?j.textSizeData:j.iconSizeData,wt=t.evaluateSizeForZoom(Ct,w.transform.zoom),Ut=[256/w.width*2+1,256/w.height*2+1],Zt=B?j.text.dynamicLayoutVertexArray:j.icon.dynamicLayoutVertexArray;Zt.clear();for(var qt=j.lineVertexArray,he=B?j.text.placedSymbolArray:j.icon.placedSymbolArray,me=w.transform.width/w.transform.height,De=!1,Ae=0;Ae<he.length;Ae++){var Ue=he.get(Ae);if(Ue.hidden||Ue.writingMode===t.WritingMode.vertical&&!De)Ko(Ue.numGlyphs,Zt);else{De=!1;var qe=[Ue.anchorX,Ue.anchorY,0,1];if(t.transformMat4(qe,qe,I),Ei(qe,Ut)){var rn=Fr(w.transform.cameraToCenterDistance,qe[3]),Xn=t.evaluateSizeForFeature(Ct,wt,Ue),Un=q?Xn/rn:Xn*rn,gr=new t.Point(Ue.anchorX,Ue.anchorY),Mr=yr(gr,D).point,Qr={},Vr=Ho(Ue,Un,!1,st,I,D,W,j.glyphOffsetArray,qt,Zt,Mr,gr,Qr,me);De=Vr.useVertical,(Vr.notEnoughRoom||De||Vr.needsFlipping&&Ho(Ue,Un,!0,st,I,D,W,j.glyphOffsetArray,qt,Zt,Mr,gr,Qr,me).notEnoughRoom)&&Ko(Ue.numGlyphs,Zt)}else Ko(Ue.numGlyphs,Zt)}}B?j.text.dynamicLayoutVertexBuffer.updateData(Zt):j.icon.dynamicLayoutVertexBuffer.updateData(Zt)}function Aa(j,I,w,B,D,W,q,st,Ct,wt,Ut){var Zt=st.glyphStartIndex+st.numGlyphs,qt=st.lineStartIndex,he=st.lineStartIndex+st.lineLength,me=I.getoffsetX(st.glyphStartIndex),De=I.getoffsetX(Zt-1),Ae=io(j*me,w,B,D,W,q,st.segment,qt,he,Ct,wt,Ut);if(!Ae)return null;var Ue=io(j*De,w,B,D,W,q,st.segment,qt,he,Ct,wt,Ut);return Ue?{first:Ae,last:Ue}:null}function eo(j,I,w,B){return j===t.WritingMode.horizontal&&Math.abs(w.y-I.y)>Math.abs(w.x-I.x)*B?{useVertical:!0}:(j===t.WritingMode.vertical?I.y<w.y:I.x>w.x)?{needsFlipping:!0}:null}function Ho(j,I,w,B,D,W,q,st,Ct,wt,Ut,Zt,qt,he){var me,De=I/24,Ae=j.lineOffsetX*De,Ue=j.lineOffsetY*De;if(j.numGlyphs>1){var qe=j.glyphStartIndex+j.numGlyphs,rn=j.lineStartIndex,Xn=j.lineStartIndex+j.lineLength,Un=Aa(De,st,Ae,Ue,w,Ut,Zt,j,Ct,W,qt);if(!Un)return{notEnoughRoom:!0};var gr=yr(Un.first.point,q).point,Mr=yr(Un.last.point,q).point;if(B&&!w){var Qr=eo(j.writingMode,gr,Mr,he);if(Qr)return Qr}me=[Un.first];for(var Vr=j.glyphStartIndex+1;Vr<qe-1;Vr++)me.push(io(De*st.getoffsetX(Vr),Ae,Ue,w,Ut,Zt,j.segment,rn,Xn,Ct,W,qt));me.push(Un.last)}else{if(B&&!w){var _i=yr(Zt,D).point,Di=j.lineStartIndex+j.segment+1,Wi=new t.Point(Ct.getx(Di),Ct.gety(Di)),Xi=yr(Wi,D),La=Xi.signedDistanceFromCamera>0?Xi.point:Do(Zt,Wi,_i,1,D),Na=eo(j.writingMode,_i,La,he);if(Na)return Na}var Vi=io(De*st.getoffsetX(j.glyphStartIndex),Ae,Ue,w,Ut,Zt,j.segment,j.lineStartIndex,j.lineStartIndex+j.lineLength,Ct,W,qt);if(!Vi)return{notEnoughRoom:!0};me=[Vi]}for(var Ma=0,xa=me;Ma<xa.length;Ma+=1){var Hi=xa[Ma];t.addDynamicAttributes(wt,Hi.point,Hi.angle)}return{}}function Do(j,I,w,B,D){var W=yr(j.add(j.sub(I)._unit()),D).point,q=w.sub(W);return w.add(q._mult(B/q.mag()))}function io(j,I,w,B,D,W,q,st,Ct,wt,Ut,Zt){var qt=B?j-I:j+I,he=qt>0?1:-1,me=0;B&&(he*=-1,me=Math.PI),he<0&&(me+=Math.PI);for(var De=he>0?st+q:st+q+1,Ae=D,Ue=D,qe=0,rn=0,Xn=Math.abs(qt),Un=[];qe+rn<=Xn;){if((De+=he)<st||De>=Ct)return null;if(Ue=Ae,Un.push(Ae),(Ae=Zt[De])===void 0){var gr=new t.Point(wt.getx(De),wt.gety(De)),Mr=yr(gr,Ut);if(Mr.signedDistanceFromCamera>0)Ae=Zt[De]=Mr.point;else{var Qr=De-he;Ae=Do(qe===0?W:new t.Point(wt.getx(Qr),wt.gety(Qr)),gr,Ue,Xn-qe+1,Ut)}}qe+=rn,rn=Ue.dist(Ae)}var Vr=(Xn-qe)/rn,_i=Ae.sub(Ue),Di=_i.mult(Vr)._add(Ue);Di._add(_i._unit()._perp()._mult(w*he));var Wi=me+Math.atan2(Ae.y-Ue.y,Ae.x-Ue.x);return Un.push(Di),{point:Di,angle:Wi,path:Un}}Hn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Hn.prototype.insert=function(j,I,w,B,D){this._forEachCell(I,w,B,D,this._insertBoxCell,this.boxUid++),this.boxKeys.push(j),this.bboxes.push(I),this.bboxes.push(w),this.bboxes.push(B),this.bboxes.push(D)},Hn.prototype.insertCircle=function(j,I,w,B){this._forEachCell(I-B,w-B,I+B,w+B,this._insertCircleCell,this.circleUid++),this.circleKeys.push(j),this.circles.push(I),this.circles.push(w),this.circles.push(B)},Hn.prototype._insertBoxCell=function(j,I,w,B,D,W){this.boxCells[D].push(W)},Hn.prototype._insertCircleCell=function(j,I,w,B,D,W){this.circleCells[D].push(W)},Hn.prototype._query=function(j,I,w,B,D,W){if(w<0||j>this.width||B<0||I>this.height)return!D&&[];var q=[];if(j<=0&&I<=0&&this.width<=w&&this.height<=B){if(D)return!0;for(var st=0;st<this.boxKeys.length;st++)q.push({key:this.boxKeys[st],x1:this.bboxes[4*st],y1:this.bboxes[4*st+1],x2:this.bboxes[4*st+2],y2:this.bboxes[4*st+3]});for(var Ct=0;Ct<this.circleKeys.length;Ct++){var wt=this.circles[3*Ct],Ut=this.circles[3*Ct+1],Zt=this.circles[3*Ct+2];q.push({key:this.circleKeys[Ct],x1:wt-Zt,y1:Ut-Zt,x2:wt+Zt,y2:Ut+Zt})}return W?q.filter(W):q}return this._forEachCell(j,I,w,B,this._queryCell,q,{hitTest:D,seenUids:{box:{},circle:{}}},W),D?q.length>0:q},Hn.prototype._queryCircle=function(j,I,w,B,D){var W=j-w,q=j+w,st=I-w,Ct=I+w;if(q<0||W>this.width||Ct<0||st>this.height)return!B&&[];var wt=[];return this._forEachCell(W,st,q,Ct,this._queryCellCircle,wt,{hitTest:B,circle:{x:j,y:I,radius:w},seenUids:{box:{},circle:{}}},D),B?wt.length>0:wt},Hn.prototype.query=function(j,I,w,B,D){return this._query(j,I,w,B,!1,D)},Hn.prototype.hitTest=function(j,I,w,B,D){return this._query(j,I,w,B,!0,D)},Hn.prototype.hitTestCircle=function(j,I,w,B){return this._queryCircle(j,I,w,!0,B)},Hn.prototype._queryCell=function(j,I,w,B,D,W,q,st){var Ct=q.seenUids,wt=this.boxCells[D];if(wt!==null)for(var Ut=this.bboxes,Zt=0,qt=wt;Zt<qt.length;Zt+=1){var he=qt[Zt];if(!Ct.box[he]){Ct.box[he]=!0;var me=4*he;if(j<=Ut[me+2]&&I<=Ut[me+3]&&w>=Ut[me+0]&&B>=Ut[me+1]&&(!st||st(this.boxKeys[he]))){if(q.hitTest)return W.push(!0),!0;W.push({key:this.boxKeys[he],x1:Ut[me],y1:Ut[me+1],x2:Ut[me+2],y2:Ut[me+3]})}}}var De=this.circleCells[D];if(De!==null)for(var Ae=this.circles,Ue=0,qe=De;Ue<qe.length;Ue+=1){var rn=qe[Ue];if(!Ct.circle[rn]){Ct.circle[rn]=!0;var Xn=3*rn;if(this._circleAndRectCollide(Ae[Xn],Ae[Xn+1],Ae[Xn+2],j,I,w,B)&&(!st||st(this.circleKeys[rn]))){if(q.hitTest)return W.push(!0),!0;var Un=Ae[Xn],gr=Ae[Xn+1],Mr=Ae[Xn+2];W.push({key:this.circleKeys[rn],x1:Un-Mr,y1:gr-Mr,x2:Un+Mr,y2:gr+Mr})}}}},Hn.prototype._queryCellCircle=function(j,I,w,B,D,W,q,st){var Ct=q.circle,wt=q.seenUids,Ut=this.boxCells[D];if(Ut!==null)for(var Zt=this.bboxes,qt=0,he=Ut;qt<he.length;qt+=1){var me=he[qt];if(!wt.box[me]){wt.box[me]=!0;var De=4*me;if(this._circleAndRectCollide(Ct.x,Ct.y,Ct.radius,Zt[De+0],Zt[De+1],Zt[De+2],Zt[De+3])&&(!st||st(this.boxKeys[me])))return W.push(!0),!0}}var Ae=this.circleCells[D];if(Ae!==null)for(var Ue=this.circles,qe=0,rn=Ae;qe<rn.length;qe+=1){var Xn=rn[qe];if(!wt.circle[Xn]){wt.circle[Xn]=!0;var Un=3*Xn;if(this._circlesCollide(Ue[Un],Ue[Un+1],Ue[Un+2],Ct.x,Ct.y,Ct.radius)&&(!st||st(this.circleKeys[Xn])))return W.push(!0),!0}}},Hn.prototype._forEachCell=function(j,I,w,B,D,W,q,st){for(var Ct=this._convertToXCellCoord(j),wt=this._convertToYCellCoord(I),Ut=this._convertToXCellCoord(w),Zt=this._convertToYCellCoord(B),qt=Ct;qt<=Ut;qt++)for(var he=wt;he<=Zt;he++)if(D.call(this,j,I,w,B,this.xCellCount*he+qt,W,q,st))return},Hn.prototype._convertToXCellCoord=function(j){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(j*this.xScale)))},Hn.prototype._convertToYCellCoord=function(j){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(j*this.yScale)))},Hn.prototype._circlesCollide=function(j,I,w,B,D,W){var q=B-j,st=D-I,Ct=w+W;return Ct*Ct>q*q+st*st},Hn.prototype._circleAndRectCollide=function(j,I,w,B,D,W,q){var st=(W-B)/2,Ct=Math.abs(j-(B+st));if(Ct>st+w)return!1;var wt=(q-D)/2,Ut=Math.abs(I-(D+wt));if(Ut>wt+w)return!1;if(Ct<=st||Ut<=wt)return!0;var Zt=Ct-st,qt=Ut-wt;return Zt*Zt+qt*qt<=w*w};var ds=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ko(j,I){for(var w=0;w<j;w++){var B=I.length;I.resize(B+4),I.float32.set(ds,3*B)}}function jo(j,I,w){var B=I[0],D=I[1];return j[0]=w[0]*B+w[4]*D+w[12],j[1]=w[1]*B+w[5]*D+w[13],j[3]=w[3]*B+w[7]*D+w[15],j}var bs=function(I,w,B){w===void 0&&(w=new Hn(I.width+200,I.height+200,25)),B===void 0&&(B=new Hn(I.width+200,I.height+200,25)),this.transform=I,this.grid=w,this.ignoredGrid=B,this.pitchfactor=Math.cos(I._pitch)*I.cameraToCenterDistance,this.screenRightBoundary=I.width+100,this.screenBottomBoundary=I.height+100,this.gridRightBoundary=I.width+200,this.gridBottomBoundary=I.height+200};function Ra(j,I,w){return I*(t.EXTENT/(j.tileSize*Math.pow(2,w-j.tileID.overscaledZ)))}bs.prototype.placeCollisionBox=function(j,I,w,B,D){var W=this.projectAndGetPerspectiveRatio(B,j.anchorPointX,j.anchorPointY),q=w*W.perspectiveRatio,st=j.x1*q+W.point.x,Ct=j.y1*q+W.point.y,wt=j.x2*q+W.point.x,Ut=j.y2*q+W.point.y;return!this.isInsideGrid(st,Ct,wt,Ut)||!I&&this.grid.hitTest(st,Ct,wt,Ut,D)?{box:[],offscreen:!1}:{box:[st,Ct,wt,Ut],offscreen:this.isOffscreen(st,Ct,wt,Ut)}},bs.prototype.placeCollisionCircles=function(j,I,w,B,D,W,q,st,Ct,wt,Ut,Zt,qt){var he=[],me=new t.Point(I.anchorX,I.anchorY),De=yr(me,W),Ae=Fr(this.transform.cameraToCenterDistance,De.signedDistanceFromCamera),Ue=(wt?D/Ae:D*Ae)/t.ONE_EM,qe=yr(me,q).point,rn=Aa(Ue,B,I.lineOffsetX*Ue,I.lineOffsetY*Ue,!1,qe,me,I,w,q,{}),Xn=!1,Un=!1,gr=!0;if(rn){for(var Mr=.5*Zt*Ae+qt,Qr=new t.Point(-100,-100),Vr=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),_i=new $n,Di=rn.first,Wi=rn.last,Xi=[],La=Di.path.length-1;La>=1;La--)Xi.push(Di.path[La]);for(var Na=1;Na<Wi.path.length;Na++)Xi.push(Wi.path[Na]);var Vi=2.5*Mr;if(st){var Ma=Xi.map(function(ql){return yr(ql,st)});Xi=Ma.some(function(ql){return ql.signedDistanceFromCamera<=0})?[]:Ma.map(function(ql){return ql.point})}var xa=[];if(Xi.length>0){for(var Hi=Xi[0].clone(),ha=Xi[0].clone(),aa=1;aa<Xi.length;aa++)Hi.x=Math.min(Hi.x,Xi[aa].x),Hi.y=Math.min(Hi.y,Xi[aa].y),ha.x=Math.max(ha.x,Xi[aa].x),ha.y=Math.max(ha.y,Xi[aa].y);xa=Hi.x>=Qr.x&&ha.x<=Vr.x&&Hi.y>=Qr.y&&ha.y<=Vr.y?[Xi]:ha.x<Qr.x||Hi.x>Vr.x||ha.y<Qr.y||Hi.y>Vr.y?[]:t.clipLine([Xi],Qr.x,Qr.y,Vr.x,Vr.y)}for(var Ca=0,Va=xa;Ca<Va.length;Ca+=1){var As;_i.reset(Va[Ca],.25*Mr),As=_i.length<=.5*Mr?1:Math.ceil(_i.paddedLength/Vi)+1;for(var Rs=0;Rs<As;Rs++){var gs=Rs/Math.max(As-1,1),fs=_i.lerp(gs),Qs=fs.x+100,_l=fs.y+100;he.push(Qs,_l,Mr,0);var du=Qs-Mr,uc=_l-Mr,Mc=Qs+Mr,Il=_l+Mr;if(gr=gr&&this.isOffscreen(du,uc,Mc,Il),Un=Un||this.isInsideGrid(du,uc,Mc,Il),!j&&this.grid.hitTestCircle(Qs,_l,Mr,Ut)&&(Xn=!0,!Ct))return{circles:[],offscreen:!1,collisionDetected:Xn}}}}return{circles:!Ct&&Xn||!Un?[]:he,offscreen:gr,collisionDetected:Xn}},bs.prototype.queryRenderedSymbols=function(j){if(j.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var I=[],w=1/0,B=1/0,D=-1/0,W=-1/0,q=0,st=j;q<st.length;q+=1){var Ct=st[q],wt=new t.Point(Ct.x+100,Ct.y+100);w=Math.min(w,wt.x),B=Math.min(B,wt.y),D=Math.max(D,wt.x),W=Math.max(W,wt.y),I.push(wt)}for(var Ut={},Zt={},qt=0,he=this.grid.query(w,B,D,W).concat(this.ignoredGrid.query(w,B,D,W));qt<he.length;qt+=1){var me=he[qt],De=me.key;if(Ut[De.bucketInstanceId]===void 0&&(Ut[De.bucketInstanceId]={}),!Ut[De.bucketInstanceId][De.featureIndex]){var Ae=[new t.Point(me.x1,me.y1),new t.Point(me.x2,me.y1),new t.Point(me.x2,me.y2),new t.Point(me.x1,me.y2)];t.polygonIntersectsPolygon(I,Ae)&&(Ut[De.bucketInstanceId][De.featureIndex]=!0,Zt[De.bucketInstanceId]===void 0&&(Zt[De.bucketInstanceId]=[]),Zt[De.bucketInstanceId].push(De.featureIndex))}}return Zt},bs.prototype.insertCollisionBox=function(j,I,w,B,D){(I?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:B,collisionGroupID:D},j[0],j[1],j[2],j[3])},bs.prototype.insertCollisionCircles=function(j,I,w,B,D){for(var W=I?this.ignoredGrid:this.grid,q={bucketInstanceId:w,featureIndex:B,collisionGroupID:D},st=0;st<j.length;st+=4)W.insertCircle(q,j[st],j[st+1],j[st+2])},bs.prototype.projectAndGetPerspectiveRatio=function(j,I,w){var B=[I,w,0,1];return jo(B,B,j),{point:new t.Point((B[0]/B[3]+1)/2*this.transform.width+100,(-B[1]/B[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/B[3]*.5}},bs.prototype.isOffscreen=function(j,I,w,B){return w<100||j>=this.screenRightBoundary||B<100||I>this.screenBottomBoundary},bs.prototype.isInsideGrid=function(j,I,w,B){return w>=0&&j<this.gridRightBoundary&&B>=0&&I<this.gridBottomBoundary},bs.prototype.getViewportMatrix=function(){var j=t.identity([]);return t.translate(j,j,[-100,-100,0]),j};var Xo=function(I,w,B,D){this.opacity=I?Math.max(0,Math.min(1,I.opacity+(I.placed?w:-w))):D&&B?1:0,this.placed=B};Xo.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Bo=function(I,w,B,D,W){this.text=new Xo(I?I.text:null,w,B,W),this.icon=new Xo(I?I.icon:null,w,D,W)};Bo.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var qs=function(I,w,B){this.text=I,this.icon=w,this.skipFade=B},ao=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},so=function(I,w,B,D,W){this.bucketInstanceId=I,this.featureIndex=w,this.sourceLayerIndex=B,this.bucketIndex=D,this.tileID=W},Hs=function(I){this.crossSourceCollisions=I,this.maxGroupID=0,this.collisionGroups={}};function Ne(j,I,w,B,D){var W=t.getAnchorAlignment(j),q=-(W.horizontalAlign-.5)*I,st=-(W.verticalAlign-.5)*w,Ct=t.evaluateVariableOffset(j,B);return new t.Point(q+Ct[0]*D,st+Ct[1]*D)}function se(j,I,w,B,D,W){var q=j.x1,st=j.x2,Ct=j.y1,wt=j.y2,Ut=j.anchorPointX,Zt=j.anchorPointY,qt=new t.Point(I,w);return B&&qt._rotate(D?W:-W),{x1:q+qt.x,y1:Ct+qt.y,x2:st+qt.x,y2:wt+qt.y,anchorPointX:Ut,anchorPointY:Zt}}Hs.prototype.get=function(j){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[j]){var I=++this.maxGroupID;this.collisionGroups[j]={ID:I,predicate:function(B){return B.collisionGroupID===I}}}return this.collisionGroups[j]};var Yt=function(I,w,B,D){this.transform=I.clone(),this.collisionIndex=new bs(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=w,this.retainedQueryData={},this.collisionGroups=new Hs(B),this.collisionCircleArrays={},this.prevPlacement=D,D&&(D.prevPlacement=void 0),this.placedOrientations={}};function Ee(j,I,w,B,D){j.emplaceBack(I?1:0,w?1:0,B||0,D||0),j.emplaceBack(I?1:0,w?1:0,B||0,D||0),j.emplaceBack(I?1:0,w?1:0,B||0,D||0),j.emplaceBack(I?1:0,w?1:0,B||0,D||0)}Yt.prototype.getBucketParts=function(j,I,w,B){var D=w.getBucket(I),W=w.latestFeatureIndex;if(D&&W&&I.id===D.layerIds[0]){var q=w.collisionBoxArray,st=D.layers[0].layout,Ct=Math.pow(2,this.transform.zoom-w.tileID.overscaledZ),wt=w.tileSize/t.EXTENT,Ut=this.transform.calculatePosMatrix(w.tileID.toUnwrapped()),Zt=st.get("text-pitch-alignment")==="map",qt=st.get("text-rotation-alignment")==="map",he=Ra(w,1,this.transform.zoom),me=_n(Ut,Zt,qt,this.transform,he),De=null;if(Zt){var Ae=br(Ut,Zt,qt,this.transform,he);De=t.multiply([],this.transform.labelPlaneMatrix,Ae)}this.retainedQueryData[D.bucketInstanceId]=new so(D.bucketInstanceId,W,D.sourceLayerIndex,D.index,w.tileID);var Ue={bucket:D,layout:st,posMatrix:Ut,textLabelPlaneMatrix:me,labelToScreenMatrix:De,scale:Ct,textPixelRatio:wt,holdingForFade:w.holdingForFade(),collisionBoxArray:q,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(D.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(D.sourceID)};if(B)for(var qe=0,rn=D.sortKeyRanges;qe<rn.length;qe+=1){var Xn=rn[qe];j.push({sortKey:Xn.sortKey,symbolInstanceStart:Xn.symbolInstanceStart,symbolInstanceEnd:Xn.symbolInstanceEnd,parameters:Ue})}else j.push({symbolInstanceStart:0,symbolInstanceEnd:D.symbolInstances.length,parameters:Ue})}},Yt.prototype.attemptAnchorPlacement=function(j,I,w,B,D,W,q,st,Ct,wt,Ut,Zt,qt,he,me){var De,Ae=[Zt.textOffset0,Zt.textOffset1],Ue=Ne(j,w,B,Ae,D),qe=this.collisionIndex.placeCollisionBox(se(I,Ue.x,Ue.y,W,q,this.transform.angle),Ut,st,Ct,wt.predicate);if(!me||this.collisionIndex.placeCollisionBox(se(me,Ue.x,Ue.y,W,q,this.transform.angle),Ut,st,Ct,wt.predicate).box.length!==0)return qe.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Zt.crossTileID]&&this.prevPlacement.placements[Zt.crossTileID]&&this.prevPlacement.placements[Zt.crossTileID].text&&(De=this.prevPlacement.variableOffsets[Zt.crossTileID].anchor),this.variableOffsets[Zt.crossTileID]={textOffset:Ae,width:w,height:B,anchor:j,textBoxScale:D,prevAnchor:De},this.markUsedJustification(qt,j,Zt,he),qt.allowVerticalPlacement&&(this.markUsedOrientation(qt,he,Zt),this.placedOrientations[Zt.crossTileID]=he),{shift:Ue,placedGlyphBoxes:qe}):void 0},Yt.prototype.placeLayerBucketPart=function(j,I,w){var B=this,D=j.parameters,W=D.bucket,q=D.layout,st=D.posMatrix,Ct=D.textLabelPlaneMatrix,wt=D.labelToScreenMatrix,Ut=D.textPixelRatio,Zt=D.holdingForFade,qt=D.collisionBoxArray,he=D.partiallyEvaluatedTextSize,me=D.collisionGroup,De=q.get("text-optional"),Ae=q.get("icon-optional"),Ue=q.get("text-allow-overlap"),qe=q.get("icon-allow-overlap"),rn=q.get("text-rotation-alignment")==="map",Xn=q.get("text-pitch-alignment")==="map",Un=q.get("icon-text-fit")!=="none",gr=q.get("symbol-z-order")==="viewport-y",Mr=Ue&&(qe||!W.hasIconData()||Ae),Qr=qe&&(Ue||!W.hasTextData()||De);!W.collisionArrays&&qt&&W.deserializeCollisionBoxes(qt);var Vr=function(Vi,Ma){if(!I[Vi.crossTileID])if(Zt)B.placements[Vi.crossTileID]=new qs(!1,!1,!1);else{var xa,Hi=!1,ha=!1,aa=!0,Ca=null,Va={box:null,offscreen:null},As={box:null,offscreen:null},Rs=null,gs=null,fs=0,Qs=0,_l=0;Ma.textFeatureIndex?fs=Ma.textFeatureIndex:Vi.useRuntimeCollisionCircles&&(fs=Vi.featureIndex),Ma.verticalTextFeatureIndex&&(Qs=Ma.verticalTextFeatureIndex);var du=Ma.textBox;if(du){var uc=function(cl){var Ll=t.WritingMode.horizontal;if(W.allowVerticalPlacement&&!cl&&B.prevPlacement){var fl=B.prevPlacement.placedOrientations[Vi.crossTileID];fl&&(B.placedOrientations[Vi.crossTileID]=fl,B.markUsedOrientation(W,Ll=fl,Vi))}return Ll},Mc=function(cl,Ll){if(W.allowVerticalPlacement&&Vi.numVerticalGlyphVertices>0&&Ma.verticalTextBox)for(var fl=0,kl=W.writingModes;fl<kl.length&&(kl[fl]===t.WritingMode.vertical?(Va=Ll(),As=Va):Va=cl(),!(Va&&Va.box&&Va.box.length));fl+=1);else Va=cl()};if(q.get("text-variable-anchor")){var Il=q.get("text-variable-anchor");if(B.prevPlacement&&B.prevPlacement.variableOffsets[Vi.crossTileID]){var ql=B.prevPlacement.variableOffsets[Vi.crossTileID];Il.indexOf(ql.anchor)>0&&(Il=Il.filter(function(vu){return vu!==ql.anchor})).unshift(ql.anchor)}var Ic=function(cl,Ll,fl){for(var kl=cl.x2-cl.x1,Gc=cl.y2-cl.y1,tf=Vi.textBoxScale,Vc=Un&&!qe?Ll:null,lc={box:[],offscreen:!1},hl=Ue?2*Il.length:Il.length,Ec=0;Ec<hl;++Ec){var Kl=B.attemptAnchorPlacement(Il[Ec%Il.length],cl,kl,Gc,tf,rn,Xn,Ut,st,me,Ec>=Il.length,Vi,W,fl,Vc);if(Kl&&(lc=Kl.placedGlyphBoxes)&&lc.box&&lc.box.length){Hi=!0,Ca=Kl.shift;break}}return lc};Mc(function(){return Ic(du,Ma.iconBox,t.WritingMode.horizontal)},function(){var vu=Ma.verticalTextBox;return W.allowVerticalPlacement&&!(Va&&Va.box&&Va.box.length)&&Vi.numVerticalGlyphVertices>0&&vu?Ic(vu,Ma.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}}),Va&&(Hi=Va.box,aa=Va.offscreen);var qc=uc(Va&&Va.box);if(!Hi&&B.prevPlacement){var Pc=B.prevPlacement.variableOffsets[Vi.crossTileID];Pc&&(B.variableOffsets[Vi.crossTileID]=Pc,B.markUsedJustification(W,Pc.anchor,Vi,qc))}}else{var Zc=function(cl,Ll){var fl=B.collisionIndex.placeCollisionBox(cl,Ue,Ut,st,me.predicate);return fl&&fl.box&&fl.box.length&&(B.markUsedOrientation(W,Ll,Vi),B.placedOrientations[Vi.crossTileID]=Ll),fl};Mc(function(){return Zc(du,t.WritingMode.horizontal)},function(){var vu=Ma.verticalTextBox;return W.allowVerticalPlacement&&Vi.numVerticalGlyphVertices>0&&vu?Zc(vu,t.WritingMode.vertical):{box:null,offscreen:null}}),uc(Va&&Va.box&&Va.box.length)}}if(Hi=(xa=Va)&&xa.box&&xa.box.length>0,aa=xa&&xa.offscreen,Vi.useRuntimeCollisionCircles){var of=W.text.placedSymbolArray.get(Vi.centerJustifiedTextSymbolIndex),vc=t.evaluateSizeForFeature(W.textSizeData,he,of),kc=q.get("text-padding");Rs=B.collisionIndex.placeCollisionCircles(Ue,of,W.lineVertexArray,W.glyphOffsetArray,vc,st,Ct,wt,w,Xn,me.predicate,Vi.collisionCircleDiameter,kc),Hi=Ue||Rs.circles.length>0&&!Rs.collisionDetected,aa=aa&&Rs.offscreen}if(Ma.iconFeatureIndex&&(_l=Ma.iconFeatureIndex),Ma.iconBox){var bc=function(cl){var Ll=Un&&Ca?se(cl,Ca.x,Ca.y,rn,Xn,B.transform.angle):cl;return B.collisionIndex.placeCollisionBox(Ll,qe,Ut,st,me.predicate)};ha=As&&As.box&&As.box.length&&Ma.verticalIconBox?(gs=bc(Ma.verticalIconBox)).box.length>0:(gs=bc(Ma.iconBox)).box.length>0,aa=aa&&gs.offscreen}var au=De||Vi.numHorizontalGlyphVertices===0&&Vi.numVerticalGlyphVertices===0,tc=Ae||Vi.numIconVertices===0;if(au||tc?tc?au||(ha=ha&&Hi):Hi=ha&&Hi:ha=Hi=ha&&Hi,Hi&&xa&&xa.box&&B.collisionIndex.insertCollisionBox(xa.box,q.get("text-ignore-placement"),W.bucketInstanceId,As&&As.box&&Qs?Qs:fs,me.ID),ha&&gs&&B.collisionIndex.insertCollisionBox(gs.box,q.get("icon-ignore-placement"),W.bucketInstanceId,_l,me.ID),Rs&&(Hi&&B.collisionIndex.insertCollisionCircles(Rs.circles,q.get("text-ignore-placement"),W.bucketInstanceId,fs,me.ID),w)){var Tc=W.bucketInstanceId,ec=B.collisionCircleArrays[Tc];ec===void 0&&(ec=B.collisionCircleArrays[Tc]=new ao);for(var Pu=0;Pu<Rs.circles.length;Pu+=4)ec.circles.push(Rs.circles[Pu+0]),ec.circles.push(Rs.circles[Pu+1]),ec.circles.push(Rs.circles[Pu+2]),ec.circles.push(Rs.collisionDetected?1:0)}B.placements[Vi.crossTileID]=new qs(Hi||Mr,ha||Qr,aa||W.justReloaded),I[Vi.crossTileID]=!0}};if(gr)for(var _i=W.getSortedSymbolIndexes(this.transform.angle),Di=_i.length-1;Di>=0;--Di){var Wi=_i[Di];Vr(W.symbolInstances.get(Wi),W.collisionArrays[Wi])}else for(var Xi=j.symbolInstanceStart;Xi<j.symbolInstanceEnd;Xi++)Vr(W.symbolInstances.get(Xi),W.collisionArrays[Xi]);if(w&&W.bucketInstanceId in this.collisionCircleArrays){var La=this.collisionCircleArrays[W.bucketInstanceId];t.invert(La.invProjMatrix,st),La.viewportMatrix=this.collisionIndex.getViewportMatrix()}W.justReloaded=!1},Yt.prototype.markUsedJustification=function(j,I,w,B){var D;D=B===t.WritingMode.vertical?w.verticalPlacedTextSymbolIndex:{left:w.leftJustifiedTextSymbolIndex,center:w.centerJustifiedTextSymbolIndex,right:w.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(I)];for(var W=0,q=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex,w.verticalPlacedTextSymbolIndex];W<q.length;W+=1){var st=q[W];st>=0&&(j.text.placedSymbolArray.get(st).crossTileID=D>=0&&st!==D?0:w.crossTileID)}},Yt.prototype.markUsedOrientation=function(j,I,w){for(var B=I===t.WritingMode.horizontal||I===t.WritingMode.horizontalOnly?I:0,D=I===t.WritingMode.vertical?I:0,W=0,q=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex];W<q.length;W+=1)j.text.placedSymbolArray.get(q[W]).placedOrientation=B;w.verticalPlacedTextSymbolIndex&&(j.text.placedSymbolArray.get(w.verticalPlacedTextSymbolIndex).placedOrientation=D)},Yt.prototype.commit=function(j){this.commitTime=j,this.zoomAtLastRecencyCheck=this.transform.zoom;var I=this.prevPlacement,w=!1;this.prevZoomAdjustment=I?I.zoomAdjustment(this.transform.zoom):0;var B=I?I.symbolFadeChange(j):1,D=I?I.opacities:{},W=I?I.variableOffsets:{},q=I?I.placedOrientations:{};for(var st in this.placements){var Ct=this.placements[st],wt=D[st];wt?(this.opacities[st]=new Bo(wt,B,Ct.text,Ct.icon),w=w||Ct.text!==wt.text.placed||Ct.icon!==wt.icon.placed):(this.opacities[st]=new Bo(null,B,Ct.text,Ct.icon,Ct.skipFade),w=w||Ct.text||Ct.icon)}for(var Ut in D){var Zt=D[Ut];if(!this.opacities[Ut]){var qt=new Bo(Zt,B,!1,!1);qt.isHidden()||(this.opacities[Ut]=qt,w=w||Zt.text.placed||Zt.icon.placed)}}for(var he in W)this.variableOffsets[he]||!this.opacities[he]||this.opacities[he].isHidden()||(this.variableOffsets[he]=W[he]);for(var me in q)this.placedOrientations[me]||!this.opacities[me]||this.opacities[me].isHidden()||(this.placedOrientations[me]=q[me]);w?this.lastPlacementChangeTime=j:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=I?I.lastPlacementChangeTime:j)},Yt.prototype.updateLayerOpacities=function(j,I){for(var w={},B=0,D=I;B<D.length;B+=1){var W=D[B],q=W.getBucket(j);q&&W.latestFeatureIndex&&j.id===q.layerIds[0]&&this.updateBucketOpacities(q,w,W.collisionBoxArray)}},Yt.prototype.updateBucketOpacities=function(j,I,w){var B=this;j.hasTextData()&&j.text.opacityVertexArray.clear(),j.hasIconData()&&j.icon.opacityVertexArray.clear(),j.hasIconCollisionBoxData()&&j.iconCollisionBox.collisionVertexArray.clear(),j.hasTextCollisionBoxData()&&j.textCollisionBox.collisionVertexArray.clear();var D=j.layers[0].layout,W=new Bo(null,0,!1,!1,!0),q=D.get("text-allow-overlap"),st=D.get("icon-allow-overlap"),Ct=D.get("text-variable-anchor"),wt=D.get("text-rotation-alignment")==="map",Ut=D.get("text-pitch-alignment")==="map",Zt=D.get("icon-text-fit")!=="none",qt=new Bo(null,0,q&&(st||!j.hasIconData()||D.get("icon-optional")),st&&(q||!j.hasTextData()||D.get("text-optional")),!0);!j.collisionArrays&&w&&(j.hasIconCollisionBoxData()||j.hasTextCollisionBoxData())&&j.deserializeCollisionBoxes(w);for(var he=function(qe,rn,Xn){for(var Un=0;Un<rn/4;Un++)qe.opacityVertexArray.emplaceBack(Xn)},me=function(qe){var rn=j.symbolInstances.get(qe),Xn=rn.numHorizontalGlyphVertices,Un=rn.numVerticalGlyphVertices,gr=rn.crossTileID,Mr=B.opacities[gr];I[gr]?Mr=W:Mr||(B.opacities[gr]=Mr=qt),I[gr]=!0;var Qr=rn.numIconVertices>0,Vr=B.placedOrientations[rn.crossTileID],_i=Vr===t.WritingMode.vertical,Di=Vr===t.WritingMode.horizontal||Vr===t.WritingMode.horizontalOnly;if(Xn>0||Un>0){var Wi=Gi(Mr.text);he(j.text,Xn,_i?sa:Wi),he(j.text,Un,Di?sa:Wi);var Xi=Mr.text.isHidden();[rn.rightJustifiedTextSymbolIndex,rn.centerJustifiedTextSymbolIndex,rn.leftJustifiedTextSymbolIndex].forEach(function(Va){Va>=0&&(j.text.placedSymbolArray.get(Va).hidden=Xi||_i?1:0)}),rn.verticalPlacedTextSymbolIndex>=0&&(j.text.placedSymbolArray.get(rn.verticalPlacedTextSymbolIndex).hidden=Xi||Di?1:0);var La=B.variableOffsets[rn.crossTileID];La&&B.markUsedJustification(j,La.anchor,rn,Vr);var Na=B.placedOrientations[rn.crossTileID];Na&&(B.markUsedJustification(j,"left",rn,Na),B.markUsedOrientation(j,Na,rn))}if(Qr){var Vi=Gi(Mr.icon),Ma=!(Zt&&rn.verticalPlacedIconSymbolIndex&&_i);rn.placedIconSymbolIndex>=0&&(he(j.icon,rn.numIconVertices,Ma?Vi:sa),j.icon.placedSymbolArray.get(rn.placedIconSymbolIndex).hidden=Mr.icon.isHidden()),rn.verticalPlacedIconSymbolIndex>=0&&(he(j.icon,rn.numVerticalIconVertices,Ma?sa:Vi),j.icon.placedSymbolArray.get(rn.verticalPlacedIconSymbolIndex).hidden=Mr.icon.isHidden())}if(j.hasIconCollisionBoxData()||j.hasTextCollisionBoxData()){var xa=j.collisionArrays[qe];if(xa){var Hi=new t.Point(0,0);if(xa.textBox||xa.verticalTextBox){var ha=!0;if(Ct){var aa=B.variableOffsets[gr];aa?(Hi=Ne(aa.anchor,aa.width,aa.height,aa.textOffset,aa.textBoxScale),wt&&Hi._rotate(Ut?B.transform.angle:-B.transform.angle)):ha=!1}xa.textBox&&Ee(j.textCollisionBox.collisionVertexArray,Mr.text.placed,!ha||_i,Hi.x,Hi.y),xa.verticalTextBox&&Ee(j.textCollisionBox.collisionVertexArray,Mr.text.placed,!ha||Di,Hi.x,Hi.y)}var Ca=Boolean(!Di&&xa.verticalIconBox);xa.iconBox&&Ee(j.iconCollisionBox.collisionVertexArray,Mr.icon.placed,Ca,Zt?Hi.x:0,Zt?Hi.y:0),xa.verticalIconBox&&Ee(j.iconCollisionBox.collisionVertexArray,Mr.icon.placed,!Ca,Zt?Hi.x:0,Zt?Hi.y:0)}}},De=0;De<j.symbolInstances.length;De++)me(De);if(j.sortFeatures(this.transform.angle),this.retainedQueryData[j.bucketInstanceId]&&(this.retainedQueryData[j.bucketInstanceId].featureSortOrder=j.featureSortOrder),j.hasTextData()&&j.text.opacityVertexBuffer&&j.text.opacityVertexBuffer.updateData(j.text.opacityVertexArray),j.hasIconData()&&j.icon.opacityVertexBuffer&&j.icon.opacityVertexBuffer.updateData(j.icon.opacityVertexArray),j.hasIconCollisionBoxData()&&j.iconCollisionBox.collisionVertexBuffer&&j.iconCollisionBox.collisionVertexBuffer.updateData(j.iconCollisionBox.collisionVertexArray),j.hasTextCollisionBoxData()&&j.textCollisionBox.collisionVertexBuffer&&j.textCollisionBox.collisionVertexBuffer.updateData(j.textCollisionBox.collisionVertexArray),j.bucketInstanceId in this.collisionCircleArrays){var Ae=this.collisionCircleArrays[j.bucketInstanceId];j.placementInvProjMatrix=Ae.invProjMatrix,j.placementViewportMatrix=Ae.viewportMatrix,j.collisionCircleArray=Ae.circles,delete this.collisionCircleArrays[j.bucketInstanceId]}},Yt.prototype.symbolFadeChange=function(j){return this.fadeDuration===0?1:(j-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Yt.prototype.zoomAdjustment=function(j){return Math.max(0,(this.transform.zoom-j)/1.5)},Yt.prototype.hasTransitions=function(j){return this.stale||j-this.lastPlacementChangeTime<this.fadeDuration},Yt.prototype.stillRecent=function(j,I){var w=this.zoomAtLastRecencyCheck===I?1-this.zoomAdjustment(I):1;return this.zoomAtLastRecencyCheck=I,this.commitTime+this.fadeDuration*w>j},Yt.prototype.setStale=function(){this.stale=!0};var sn=Math.pow(2,25),Fn=Math.pow(2,24),rr=Math.pow(2,17),qn=Math.pow(2,16),Xr=Math.pow(2,9),Si=Math.pow(2,8),Oi=Math.pow(2,1);function Gi(j){if(j.opacity===0&&!j.placed)return 0;if(j.opacity===1&&j.placed)return 4294967295;var I=j.placed?1:0,w=Math.floor(127*j.opacity);return w*sn+I*Fn+w*rr+I*qn+w*Xr+I*Si+w*Oi+I}var sa=0,qa=function(I){this._sortAcrossTiles=I.layout.get("symbol-z-order")!=="viewport-y"&&I.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};qa.prototype.continuePlacement=function(j,I,w,B,D){for(var W=this._bucketParts;this._currentTileIndex<j.length;)if(I.getBucketParts(W,B,j[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,D())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,W.sort(function(q,st){return q.sortKey-st.sortKey}));this._currentPartIndex<W.length;)if(I.placeLayerBucketPart(W[this._currentPartIndex],this._seenCrossTileIDs,w),this._currentPartIndex++,D())return!0;return!1};var Oa=function(I,w,B,D,W,q,st){this.placement=new Yt(I,W,q,st),this._currentPlacementIndex=w.length-1,this._forceFullPlacement=B,this._showCollisionBoxes=D,this._done=!1};Oa.prototype.isDone=function(){return this._done},Oa.prototype.continuePlacement=function(j,I,w){for(var B=this,D=t.browser.now(),W=function(){var wt=t.browser.now()-D;return!B._forceFullPlacement&&wt>2};this._currentPlacementIndex>=0;){var q=I[j[this._currentPlacementIndex]],st=this.placement.collisionIndex.transform.zoom;if(q.type==="symbol"&&(!q.minzoom||q.minzoom<=st)&&(!q.maxzoom||q.maxzoom>st)){if(this._inProgressLayer||(this._inProgressLayer=new qa(q)),this._inProgressLayer.continuePlacement(w[q.source],this.placement,this._showCollisionBoxes,q,W))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Oa.prototype.commit=function(j){return this.placement.commit(j),this.placement};var Eo=512/t.EXTENT/2,Ba=function(I,w,B){this.tileID=I,this.indexedSymbolInstances={},this.bucketInstanceId=B;for(var D=0;D<w.length;D++){var W=w.get(D),q=W.key;this.indexedSymbolInstances[q]||(this.indexedSymbolInstances[q]=[]),this.indexedSymbolInstances[q].push({crossTileID:W.crossTileID,coord:this.getScaledCoordinates(W,I)})}};Ba.prototype.getScaledCoordinates=function(j,I){var w=Eo/Math.pow(2,I.canonical.z-this.tileID.canonical.z);return{x:Math.floor((I.canonical.x*t.EXTENT+j.anchorX)*w),y:Math.floor((I.canonical.y*t.EXTENT+j.anchorY)*w)}},Ba.prototype.findMatches=function(j,I,w){for(var B=this.tileID.canonical.z<I.canonical.z?1:Math.pow(2,this.tileID.canonical.z-I.canonical.z),D=0;D<j.length;D++){var W=j.get(D);if(!W.crossTileID){var q=this.indexedSymbolInstances[W.key];if(q)for(var st=this.getScaledCoordinates(W,I),Ct=0,wt=q;Ct<wt.length;Ct+=1){var Ut=wt[Ct];if(Math.abs(Ut.coord.x-st.x)<=B&&Math.abs(Ut.coord.y-st.y)<=B&&!w[Ut.crossTileID]){w[Ut.crossTileID]=!0,W.crossTileID=Ut.crossTileID;break}}}}};var uo=function(){this.maxCrossTileID=0};uo.prototype.generate=function(){return++this.maxCrossTileID};var co=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};co.prototype.handleWrapJump=function(j){var I=Math.round((j-this.lng)/360);if(I!==0)for(var w in this.indexes){var B=this.indexes[w],D={};for(var W in B){var q=B[W];q.tileID=q.tileID.unwrapTo(q.tileID.wrap+I),D[q.tileID.key]=q}this.indexes[w]=D}this.lng=j},co.prototype.addBucket=function(j,I,w){if(this.indexes[j.overscaledZ]&&this.indexes[j.overscaledZ][j.key]){if(this.indexes[j.overscaledZ][j.key].bucketInstanceId===I.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(j.overscaledZ,this.indexes[j.overscaledZ][j.key])}for(var B=0;B<I.symbolInstances.length;B++)I.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[j.overscaledZ]||(this.usedCrossTileIDs[j.overscaledZ]={});var D=this.usedCrossTileIDs[j.overscaledZ];for(var W in this.indexes){var q=this.indexes[W];if(Number(W)>j.overscaledZ)for(var st in q){var Ct=q[st];Ct.tileID.isChildOf(j)&&Ct.findMatches(I.symbolInstances,j,D)}else{var wt=q[j.scaledTo(Number(W)).key];wt&&wt.findMatches(I.symbolInstances,j,D)}}for(var Ut=0;Ut<I.symbolInstances.length;Ut++){var Zt=I.symbolInstances.get(Ut);Zt.crossTileID||(Zt.crossTileID=w.generate(),D[Zt.crossTileID]=!0)}return this.indexes[j.overscaledZ]===void 0&&(this.indexes[j.overscaledZ]={}),this.indexes[j.overscaledZ][j.key]=new Ba(j,I.symbolInstances,I.bucketInstanceId),!0},co.prototype.removeBucketCrossTileIDs=function(j,I){for(var w in I.indexedSymbolInstances)for(var B=0,D=I.indexedSymbolInstances[w];B<D.length;B+=1)delete this.usedCrossTileIDs[j][D[B].crossTileID]},co.prototype.removeStaleBuckets=function(j){var I=!1;for(var w in this.indexes){var B=this.indexes[w];for(var D in B)j[B[D].bucketInstanceId]||(this.removeBucketCrossTileIDs(w,B[D]),delete B[D],I=!0)}return I};var Ja=function(){this.layerIndexes={},this.crossTileIDs=new uo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ja.prototype.addLayer=function(j,I,w){var B=this.layerIndexes[j.id];B===void 0&&(B=this.layerIndexes[j.id]=new co);var D=!1,W={};B.handleWrapJump(w);for(var q=0,st=I;q<st.length;q+=1){var Ct=st[q],wt=Ct.getBucket(j);wt&&j.id===wt.layerIds[0]&&(wt.bucketInstanceId||(wt.bucketInstanceId=++this.maxBucketInstanceId),B.addBucket(Ct.tileID,wt,this.crossTileIDs)&&(D=!0),W[wt.bucketInstanceId]=!0)}return B.removeStaleBuckets(W)&&(D=!0),D},Ja.prototype.pruneUnusedLayers=function(j){var I={};for(var w in j.forEach(function(B){I[B]=!0}),this.layerIndexes)I[w]||delete this.layerIndexes[w]};var Po=function(I,w){return t.emitValidationErrors(I,w&&w.filter(function(B){return B.identifier!=="source.canvas"}))},ls=t.pick(Re,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),ko=t.pick(Re,["setCenter","setZoom","setBearing","setPitch"]),Es=function(){var j={},I=t.styleSpec.$version;for(var w in t.styleSpec.$root){var B,D=t.styleSpec.$root[w];D.required&&(B=w==="version"?I:D.type==="array"?[]:{})!=null&&(j[w]=B)}return j}(),Co=function(j){function I(w,B){var D=this;B===void 0&&(B={}),j.call(this),this.map=w,this.dispatcher=new L(cn(),this),this.imageManager=new v,this.imageManager.setEventedParent(this),this.glyphManager=new y(w._requestManager,B.localIdeographFontFamily),this.lineAtlas=new O(256,512),this.crossTileSymbolIndex=new Ja,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var W=this;this._rtlTextPluginCallback=I.registerForPluginStateChange(function(q){W.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:q.pluginStatus,pluginURL:q.pluginURL},function(st,Ct){if(t.triggerPluginCompletionEvent(st),Ct&&Ct.every(function(Ut){return Ut}))for(var wt in W.sourceCaches)W.sourceCaches[wt].reload()})}),this.on("data",function(q){if(q.dataType==="source"&&q.sourceDataType==="metadata"){var st=D.sourceCaches[q.sourceId];if(st){var Ct=st.getSource();if(Ct&&Ct.vectorLayerIds)for(var wt in D._layers){var Ut=D._layers[wt];Ut.source===Ct.id&&D._validateLayer(Ut)}}}})}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.loadURL=function(w,B){var D=this;B===void 0&&(B={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var W=typeof B.validate=="boolean"?B.validate:!t.isMapboxURL(w);w=this.map._requestManager.normalizeStyleURL(w,B.accessToken);var q=this.map._requestManager.transformRequest(w,t.ResourceType.Style);this._request=t.getJSON(q,function(st,Ct){D._request=null,st?D.fire(new t.ErrorEvent(st)):Ct&&D._load(Ct,W)})},I.prototype.loadJSON=function(w,B){var D=this;B===void 0&&(B={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){D._request=null,D._load(w,B.validate!==!1)})},I.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Es,!1)},I.prototype._load=function(w,B){if(!B||!Po(this,t.validateStyle(w))){for(var D in this._loaded=!0,this.stylesheet=w,w.sources)this.addSource(D,w.sources[D],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs);var W=Sr(this.stylesheet.layers);this._order=W.map(function(wt){return wt.id}),this._layers={},this._serializedLayers={};for(var q=0,st=W;q<st.length;q+=1){var Ct=st[q];(Ct=t.createStyleLayer(Ct)).setEventedParent(this,{layer:{id:Ct.id}}),this._layers[Ct.id]=Ct,this._serializedLayers[Ct.id]=Ct.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new A(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},I.prototype._loadSprite=function(w){var B=this;this._spriteRequest=function(D,W,q){var st,Ct,wt,Ut=t.browser.devicePixelRatio>1?"@2x":"",Zt=t.getJSON(W.transformRequest(W.normalizeSpriteURL(D,Ut,".json"),t.ResourceType.SpriteJSON),function(me,De){Zt=null,wt||(wt=me,st=De,he())}),qt=t.getImage(W.transformRequest(W.normalizeSpriteURL(D,Ut,".png"),t.ResourceType.SpriteImage),function(me,De){qt=null,wt||(wt=me,Ct=De,he())});function he(){if(wt)q(wt);else if(st&&Ct){var me=t.browser.getImageData(Ct),De={};for(var Ae in st){var Ue=st[Ae],qe=Ue.width,rn=Ue.height,Xn=Ue.x,Un=Ue.y,gr=Ue.sdf,Mr=Ue.pixelRatio,Qr=Ue.stretchX,Vr=Ue.stretchY,_i=Ue.content,Di=new t.RGBAImage({width:qe,height:rn});t.RGBAImage.copy(me,Di,{x:Xn,y:Un},{x:0,y:0},{width:qe,height:rn}),De[Ae]={data:Di,pixelRatio:Mr,sdf:gr,stretchX:Qr,stretchY:Vr,content:_i}}q(null,De)}}return{cancel:function(){Zt&&(Zt.cancel(),Zt=null),qt&&(qt.cancel(),qt=null)}}}(w,this.map._requestManager,function(D,W){if(B._spriteRequest=null,D)B.fire(new t.ErrorEvent(D));else if(W)for(var q in W)B.imageManager.addImage(q,W[q]);B.imageManager.setLoaded(!0),B._availableImages=B.imageManager.listImages(),B.dispatcher.broadcast("setImages",B._availableImages),B.fire(new t.Event("data",{dataType:"style"}))})},I.prototype._validateLayer=function(w){var B=this.sourceCaches[w.source];if(B){var D=w.sourceLayer;if(D){var W=B.getSource();(W.type==="geojson"||W.vectorLayerIds&&W.vectorLayerIds.indexOf(D)===-1)&&this.fire(new t.ErrorEvent(new Error('Source layer "'+D+'" does not exist on source "'+W.id+'" as specified by style layer "'+w.id+'"')))}}},I.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var w in this.sourceCaches)if(!this.sourceCaches[w].loaded())return!1;return!!this.imageManager.isLoaded()},I.prototype._serializeLayers=function(w){for(var B=[],D=0,W=w;D<W.length;D+=1){var q=this._layers[W[D]];q.type!=="custom"&&B.push(q.serialize())}return B},I.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var w in this.sourceCaches)if(this.sourceCaches[w].hasTransition())return!0;for(var B in this._layers)if(this._layers[B].hasTransition())return!0;return!1},I.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},I.prototype.update=function(w){if(this._loaded){var B=this._changed;if(this._changed){var D=Object.keys(this._updatedLayers),W=Object.keys(this._removedLayers);for(var q in(D.length||W.length)&&this._updateWorkerLayers(D,W),this._updatedSources){var st=this._updatedSources[q];st==="reload"?this._reloadSource(q):st==="clear"&&this._clearSource(q)}for(var Ct in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Ct].updateTransitions(w);this.light.updateTransitions(w),this._resetUpdates()}var wt={};for(var Ut in this.sourceCaches){var Zt=this.sourceCaches[Ut];wt[Ut]=Zt.used,Zt.used=!1}for(var qt=0,he=this._order;qt<he.length;qt+=1){var me=this._layers[he[qt]];me.recalculate(w,this._availableImages),!me.isHidden(w.zoom)&&me.source&&(this.sourceCaches[me.source].used=!0)}for(var De in wt){var Ae=this.sourceCaches[De];wt[De]!==Ae.used&&Ae.fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:De}))}this.light.recalculate(w),this.z=w.zoom,B&&this.fire(new t.Event("data",{dataType:"style"}))}},I.prototype._updateTilesForChangedImages=function(){var w=Object.keys(this._changedImages);if(w.length){for(var B in this.sourceCaches)this.sourceCaches[B].reloadTilesForDependencies(["icons","patterns"],w);this._changedImages={}}},I.prototype._updateWorkerLayers=function(w,B){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(w),removedIds:B})},I.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},I.prototype.setState=function(w){var B=this;if(this._checkLoaded(),Po(this,t.validateStyle(w)))return!1;(w=t.clone$1(w)).layers=Sr(w.layers);var D=function(q,st){if(!q)return[{command:Re.setStyle,args:[st]}];var Ct=[];try{if(!t.deepEqual(q.version,st.version))return[{command:Re.setStyle,args:[st]}];t.deepEqual(q.center,st.center)||Ct.push({command:Re.setCenter,args:[st.center]}),t.deepEqual(q.zoom,st.zoom)||Ct.push({command:Re.setZoom,args:[st.zoom]}),t.deepEqual(q.bearing,st.bearing)||Ct.push({command:Re.setBearing,args:[st.bearing]}),t.deepEqual(q.pitch,st.pitch)||Ct.push({command:Re.setPitch,args:[st.pitch]}),t.deepEqual(q.sprite,st.sprite)||Ct.push({command:Re.setSprite,args:[st.sprite]}),t.deepEqual(q.glyphs,st.glyphs)||Ct.push({command:Re.setGlyphs,args:[st.glyphs]}),t.deepEqual(q.transition,st.transition)||Ct.push({command:Re.setTransition,args:[st.transition]}),t.deepEqual(q.light,st.light)||Ct.push({command:Re.setLight,args:[st.light]});var wt={},Ut=[];(function(qt,he,me,De){var Ae;for(Ae in he=he||{},qt=qt||{})qt.hasOwnProperty(Ae)&&(he.hasOwnProperty(Ae)||Ve(Ae,me,De));for(Ae in he)he.hasOwnProperty(Ae)&&(qt.hasOwnProperty(Ae)?t.deepEqual(qt[Ae],he[Ae])||(qt[Ae].type==="geojson"&&he[Ae].type==="geojson"&&xn(qt,he,Ae)?me.push({command:Re.setGeoJSONSourceData,args:[Ae,he[Ae].data]}):En(Ae,he,me,De)):$e(Ae,he,me))})(q.sources,st.sources,Ut,wt);var Zt=[];q.layers&&q.layers.forEach(function(qt){wt[qt.source]?Ct.push({command:Re.removeLayer,args:[qt.id]}):Zt.push(qt)}),Ct=Ct.concat(Ut),function(qt,he,me){he=he||[];var De,Ae,Ue,qe,rn,Xn,Un,gr=(qt=qt||[]).map(mn),Mr=he.map(mn),Qr=qt.reduce(Dn,{}),Vr=he.reduce(Dn,{}),_i=gr.slice(),Di=Object.create(null);for(De=0,Ae=0;De<gr.length;De++)Vr.hasOwnProperty(Ue=gr[De])?Ae++:(me.push({command:Re.removeLayer,args:[Ue]}),_i.splice(_i.indexOf(Ue,Ae),1));for(De=0,Ae=0;De<Mr.length;De++)_i[_i.length-1-De]!==(Ue=Mr[Mr.length-1-De])&&(Qr.hasOwnProperty(Ue)?(me.push({command:Re.removeLayer,args:[Ue]}),_i.splice(_i.lastIndexOf(Ue,_i.length-Ae),1)):Ae++,me.push({command:Re.addLayer,args:[Vr[Ue],Xn=_i[_i.length-De]]}),_i.splice(_i.length-De,0,Ue),Di[Ue]=!0);for(De=0;De<Mr.length;De++)if(qe=Qr[Ue=Mr[De]],rn=Vr[Ue],!Di[Ue]&&!t.deepEqual(qe,rn))if(t.deepEqual(qe.source,rn.source)&&t.deepEqual(qe["source-layer"],rn["source-layer"])&&t.deepEqual(qe.type,rn.type)){for(Un in Nn(qe.layout,rn.layout,me,Ue,null,Re.setLayoutProperty),Nn(qe.paint,rn.paint,me,Ue,null,Re.setPaintProperty),t.deepEqual(qe.filter,rn.filter)||me.push({command:Re.setFilter,args:[Ue,rn.filter]}),t.deepEqual(qe.minzoom,rn.minzoom)&&t.deepEqual(qe.maxzoom,rn.maxzoom)||me.push({command:Re.setLayerZoomRange,args:[Ue,rn.minzoom,rn.maxzoom]}),qe)qe.hasOwnProperty(Un)&&Un!=="layout"&&Un!=="paint"&&Un!=="filter"&&Un!=="metadata"&&Un!=="minzoom"&&Un!=="maxzoom"&&(Un.indexOf("paint.")===0?Nn(qe[Un],rn[Un],me,Ue,Un.slice(6),Re.setPaintProperty):t.deepEqual(qe[Un],rn[Un])||me.push({command:Re.setLayerProperty,args:[Ue,Un,rn[Un]]}));for(Un in rn)rn.hasOwnProperty(Un)&&!qe.hasOwnProperty(Un)&&Un!=="layout"&&Un!=="paint"&&Un!=="filter"&&Un!=="metadata"&&Un!=="minzoom"&&Un!=="maxzoom"&&(Un.indexOf("paint.")===0?Nn(qe[Un],rn[Un],me,Ue,Un.slice(6),Re.setPaintProperty):t.deepEqual(qe[Un],rn[Un])||me.push({command:Re.setLayerProperty,args:[Ue,Un,rn[Un]]}))}else me.push({command:Re.removeLayer,args:[Ue]}),Xn=_i[_i.lastIndexOf(Ue)+1],me.push({command:Re.addLayer,args:[rn,Xn]})}(Zt,st.layers,Ct)}catch(qt){console.warn("Unable to compute style diff:",qt),Ct=[{command:Re.setStyle,args:[st]}]}return Ct}(this.serialize(),w).filter(function(q){return!(q.command in ko)});if(D.length===0)return!1;var W=D.filter(function(q){return!(q.command in ls)});if(W.length>0)throw new Error("Unimplemented: "+W.map(function(q){return q.command}).join(", ")+".");return D.forEach(function(q){q.command!=="setTransition"&&B[q.command].apply(B,q.args)}),this.stylesheet=w,!0},I.prototype.addImage=function(w,B){if(this.getImage(w))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(w,B),this._afterImageUpdated(w)},I.prototype.updateImage=function(w,B){this.imageManager.updateImage(w,B)},I.prototype.getImage=function(w){return this.imageManager.getImage(w)},I.prototype.removeImage=function(w){if(!this.getImage(w))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(w),this._afterImageUpdated(w)},I.prototype._afterImageUpdated=function(w){this._availableImages=this.imageManager.listImages(),this._changedImages[w]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))},I.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},I.prototype.addSource=function(w,B,D){var W=this;if(D===void 0&&(D={}),this._checkLoaded(),this.sourceCaches[w]!==void 0)throw new Error("There is already a source with this ID");if(!B.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(B).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(B.type)>=0&&this._validate(t.validateStyle.source,"sources."+w,B,null,D))){this.map&&this.map._collectResourceTiming&&(B.collectResourceTiming=!0);var q=this.sourceCaches[w]=new xe(w,B,this.dispatcher);q.style=this,q.setEventedParent(this,function(){return{isSourceLoaded:W.loaded(),source:q.serialize(),sourceId:w}}),q.onAdd(this.map),this._changed=!0}},I.prototype.removeSource=function(w){if(this._checkLoaded(),this.sourceCaches[w]===void 0)throw new Error("There is no source with this ID");for(var B in this._layers)if(this._layers[B].source===w)return this.fire(new t.ErrorEvent(new Error('Source "'+w+'" cannot be removed while layer "'+B+'" is using it.')));var D=this.sourceCaches[w];delete this.sourceCaches[w],delete this._updatedSources[w],D.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:w})),D.setEventedParent(null),D.clearTiles(),D.onRemove&&D.onRemove(this.map),this._changed=!0},I.prototype.setGeoJSONSourceData=function(w,B){this._checkLoaded(),this.sourceCaches[w].getSource().setData(B),this._changed=!0},I.prototype.getSource=function(w){return this.sourceCaches[w]&&this.sourceCaches[w].getSource()},I.prototype.addLayer=function(w,B,D){D===void 0&&(D={}),this._checkLoaded();var W=w.id;if(this.getLayer(W))this.fire(new t.ErrorEvent(new Error('Layer with id "'+W+'" already exists on this map')));else{var q;if(w.type==="custom"){if(Po(this,t.validateCustomStyleLayer(w)))return;q=t.createStyleLayer(w)}else{if(typeof w.source=="object"&&(this.addSource(W,w.source),w=t.clone$1(w),w=t.extend(w,{source:W})),this._validate(t.validateStyle.layer,"layers."+W,w,{arrayIndex:-1},D))return;q=t.createStyleLayer(w),this._validateLayer(q),q.setEventedParent(this,{layer:{id:W}}),this._serializedLayers[q.id]=q.serialize()}var st=B?this._order.indexOf(B):this._order.length;if(B&&st===-1)this.fire(new t.ErrorEvent(new Error('Layer with id "'+B+'" does not exist on this map.')));else{if(this._order.splice(st,0,W),this._layerOrderChanged=!0,this._layers[W]=q,this._removedLayers[W]&&q.source&&q.type!=="custom"){var Ct=this._removedLayers[W];delete this._removedLayers[W],Ct.type!==q.type?this._updatedSources[q.source]="clear":(this._updatedSources[q.source]="reload",this.sourceCaches[q.source].pause())}this._updateLayer(q),q.onAdd&&q.onAdd(this.map)}}},I.prototype.moveLayer=function(w,B){if(this._checkLoaded(),this._changed=!0,this._layers[w]){if(w!==B){var D=this._order.indexOf(w);this._order.splice(D,1);var W=B?this._order.indexOf(B):this._order.length;B&&W===-1?this.fire(new t.ErrorEvent(new Error('Layer with id "'+B+'" does not exist on this map.'))):(this._order.splice(W,0,w),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be moved.")))},I.prototype.removeLayer=function(w){this._checkLoaded();var B=this._layers[w];if(B){B.setEventedParent(null);var D=this._order.indexOf(w);this._order.splice(D,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[w]=B,delete this._layers[w],delete this._serializedLayers[w],delete this._updatedLayers[w],delete this._updatedPaintProps[w],B.onRemove&&B.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be removed.")))},I.prototype.getLayer=function(w){return this._layers[w]},I.prototype.hasLayer=function(w){return w in this._layers},I.prototype.setLayerZoomRange=function(w,B,D){this._checkLoaded();var W=this.getLayer(w);W?W.minzoom===B&&W.maxzoom===D||(B!=null&&(W.minzoom=B),D!=null&&(W.maxzoom=D),this._updateLayer(W)):this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot have zoom extent.")))},I.prototype.setFilter=function(w,B,D){D===void 0&&(D={}),this._checkLoaded();var W=this.getLayer(w);if(W){if(!t.deepEqual(W.filter,B))return B==null?(W.filter=void 0,void this._updateLayer(W)):void(this._validate(t.validateStyle.filter,"layers."+W.id+".filter",B,null,D)||(W.filter=t.clone$1(B),this._updateLayer(W)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be filtered.")))},I.prototype.getFilter=function(w){return t.clone$1(this.getLayer(w).filter)},I.prototype.setLayoutProperty=function(w,B,D,W){W===void 0&&(W={}),this._checkLoaded();var q=this.getLayer(w);q?t.deepEqual(q.getLayoutProperty(B),D)||(q.setLayoutProperty(B,D,W),this._updateLayer(q)):this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be styled.")))},I.prototype.getLayoutProperty=function(w,B){var D=this.getLayer(w);if(D)return D.getLayoutProperty(B);this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style.")))},I.prototype.setPaintProperty=function(w,B,D,W){W===void 0&&(W={}),this._checkLoaded();var q=this.getLayer(w);q?t.deepEqual(q.getPaintProperty(B),D)||(q.setPaintProperty(B,D,W)&&this._updateLayer(q),this._changed=!0,this._updatedPaintProps[w]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+w+"' does not exist in the map's style and cannot be styled.")))},I.prototype.getPaintProperty=function(w,B){return this.getLayer(w).getPaintProperty(B)},I.prototype.setFeatureState=function(w,B){this._checkLoaded();var D=w.source,W=w.sourceLayer,q=this.sourceCaches[D];if(q!==void 0){var st=q.getSource().type;st==="geojson"&&W?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):st!=="vector"||W?(w.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),q.setFeatureState(W,w.id,B)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+D+"' does not exist in the map's style.")))},I.prototype.removeFeatureState=function(w,B){this._checkLoaded();var D=w.source,W=this.sourceCaches[D];if(W!==void 0){var q=W.getSource().type,st=q==="vector"?w.sourceLayer:void 0;q!=="vector"||st?B&&typeof w.id!="string"&&typeof w.id!="number"?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):W.removeFeatureState(st,w.id,B):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+D+"' does not exist in the map's style.")))},I.prototype.getFeatureState=function(w){this._checkLoaded();var B=w.source,D=w.sourceLayer,W=this.sourceCaches[B];if(W!==void 0){if(W.getSource().type!=="vector"||D)return w.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),W.getFeatureState(D,w.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+B+"' does not exist in the map's style.")))},I.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},I.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(w){return w.serialize()}),layers:this._serializeLayers(this._order)},function(w){return w!==void 0})},I.prototype._updateLayer=function(w){this._updatedLayers[w.id]=!0,w.source&&!this._updatedSources[w.source]&&this.sourceCaches[w.source].getSource().type!=="raster"&&(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause()),this._changed=!0},I.prototype._flattenAndSortRenderedFeatures=function(w){for(var B=this,D=function(Vr){return B._layers[Vr].type==="fill-extrusion"},W={},q=[],st=this._order.length-1;st>=0;st--){var Ct=this._order[st];if(D(Ct)){W[Ct]=st;for(var wt=0,Ut=w;wt<Ut.length;wt+=1){var Zt=Ut[wt][Ct];if(Zt)for(var qt=0,he=Zt;qt<he.length;qt+=1)q.push(he[qt])}}}q.sort(function(Qr,Vr){return Vr.intersectionZ-Qr.intersectionZ});for(var me=[],De=this._order.length-1;De>=0;De--){var Ae=this._order[De];if(D(Ae))for(var Ue=q.length-1;Ue>=0;Ue--){var qe=q[Ue].feature;if(W[qe.layer.id]<De)break;me.push(qe),q.pop()}else for(var rn=0,Xn=w;rn<Xn.length;rn+=1){var Un=Xn[rn][Ae];if(Un)for(var gr=0,Mr=Un;gr<Mr.length;gr+=1)me.push(Mr[gr].feature)}}return me},I.prototype.queryRenderedFeatures=function(w,B,D){B&&B.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",B.filter,null,B);var W={};if(B&&B.layers){if(!Array.isArray(B.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var q=0,st=B.layers;q<st.length;q+=1){var Ct=st[q],wt=this._layers[Ct];if(!wt)return this.fire(new t.ErrorEvent(new Error("The layer '"+Ct+"' does not exist in the map's style and cannot be queried for features."))),[];W[wt.source]=!0}}var Ut=[];for(var Zt in B.availableImages=this._availableImages,this.sourceCaches)B.layers&&!W[Zt]||Ut.push(Ft(this.sourceCaches[Zt],this._layers,this._serializedLayers,w,B,D));return this.placement&&Ut.push(function(qt,he,me,De,Ae,Ue,qe){for(var rn={},Xn=Ue.queryRenderedSymbols(De),Un=[],gr=0,Mr=Object.keys(Xn).map(Number);gr<Mr.length;gr+=1)Un.push(qe[Mr[gr]]);Un.sort(Ot);for(var Qr=function(){var La=_i[Vr],Na=La.featureIndex.lookupSymbolFeatures(Xn[La.bucketInstanceId],he,La.bucketIndex,La.sourceLayerIndex,Ae.filter,Ae.layers,Ae.availableImages,qt);for(var Vi in Na){var Ma=rn[Vi]=rn[Vi]||[],xa=Na[Vi];xa.sort(function(aa,Ca){var Va=La.featureSortOrder;if(Va){var As=Va.indexOf(aa.featureIndex);return Va.indexOf(Ca.featureIndex)-As}return Ca.featureIndex-aa.featureIndex});for(var Hi=0,ha=xa;Hi<ha.length;Hi+=1)Ma.push(ha[Hi])}},Vr=0,_i=Un;Vr<_i.length;Vr+=1)Qr();var Di=function(La){rn[La].forEach(function(Na){var Vi=Na.feature,Ma=me[qt[La].source].getFeatureState(Vi.layer["source-layer"],Vi.id);Vi.source=Vi.layer.source,Vi.layer["source-layer"]&&(Vi.sourceLayer=Vi.layer["source-layer"]),Vi.state=Ma})};for(var Wi in rn)Di(Wi);return rn}(this._layers,this._serializedLayers,this.sourceCaches,w,B,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Ut)},I.prototype.querySourceFeatures=function(w,B){B&&B.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",B.filter,null,B);var D=this.sourceCaches[w];return D?function(W,q){for(var st=W.getRenderableIds().map(function(he){return W.getTileByID(he)}),Ct=[],wt={},Ut=0;Ut<st.length;Ut++){var Zt=st[Ut],qt=Zt.tileID.canonical.key;wt[qt]||(wt[qt]=!0,Zt.querySourceFeatures(Ct,q))}return Ct}(D,B):[]},I.prototype.addSourceType=function(w,B,D){return I.getSourceType(w)?D(new Error('A source type called "'+w+'" already exists.')):(I.setSourceType(w,B),B.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:w,url:B.workerSourceURL},D):D(null,null))},I.prototype.getLight=function(){return this.light.getLight()},I.prototype.setLight=function(w,B){B===void 0&&(B={}),this._checkLoaded();var D=this.light.getLight(),W=!1;for(var q in w)if(!t.deepEqual(w[q],D[q])){W=!0;break}if(W){var st={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(w,B),this.light.updateTransitions(st)}},I.prototype._validate=function(w,B,D,W,q){return q===void 0&&(q={}),(!q||q.validate!==!1)&&Po(this,w.call(t.validateStyle,t.extend({key:B,style:this.serialize(),value:D,styleSpec:t.styleSpec},W)))},I.prototype._remove=function(){for(var w in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[w].setEventedParent(null);for(var B in this.sourceCaches)this.sourceCaches[B].clearTiles(),this.sourceCaches[B].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},I.prototype._clearSource=function(w){this.sourceCaches[w].clearTiles()},I.prototype._reloadSource=function(w){this.sourceCaches[w].resume(),this.sourceCaches[w].reload()},I.prototype._updateSources=function(w){for(var B in this.sourceCaches)this.sourceCaches[B].update(w)},I.prototype._generateCollisionBoxes=function(){for(var w in this.sourceCaches)this._reloadSource(w)},I.prototype._updatePlacement=function(w,B,D,W,q){q===void 0&&(q=!1);for(var st=!1,Ct=!1,wt={},Ut=0,Zt=this._order;Ut<Zt.length;Ut+=1){var qt=this._layers[Zt[Ut]];if(qt.type==="symbol"){if(!wt[qt.source]){var he=this.sourceCaches[qt.source];wt[qt.source]=he.getRenderableIds(!0).map(function(qe){return he.getTileByID(qe)}).sort(function(qe,rn){return rn.tileID.overscaledZ-qe.tileID.overscaledZ||(qe.tileID.isLessThan(rn.tileID)?-1:1)})}var me=this.crossTileSymbolIndex.addLayer(qt,wt[qt.source],w.center.lng);st=st||me}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((q=q||this._layerOrderChanged||D===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),w.zoom))&&(this.pauseablePlacement=new Oa(w,this._order,q,B,D,W,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,wt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),Ct=!0),st&&this.pauseablePlacement.placement.setStale()),Ct||st)for(var De=0,Ae=this._order;De<Ae.length;De+=1){var Ue=this._layers[Ae[De]];Ue.type==="symbol"&&this.placement.updateLayerOpacities(Ue,wt[Ue.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},I.prototype._releaseSymbolFadeTiles=function(){for(var w in this.sourceCaches)this.sourceCaches[w].releaseSymbolFadeTiles()},I.prototype.getImages=function(w,B,D){this.imageManager.getImages(B.icons,D),this._updateTilesForChangedImages();var W=this.sourceCaches[B.source];W&&W.setDependencies(B.tileID.key,B.type,B.icons)},I.prototype.getGlyphs=function(w,B,D){this.glyphManager.getGlyphs(B.stacks,D)},I.prototype.getResource=function(w,B,D){return t.makeRequest(B,D)},I}(t.Evented);Co.getSourceType=function(j){return ut[j]},Co.setSourceType=function(j,I){ut[j]=I},Co.registerForPluginStateChange=t.registerForPluginStateChange;var Za=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Bs=So(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),ss=So(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ja=So(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),gn=So(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),cr=So("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Gr=So(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Ui=So(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),za=So("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),go=So("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),fo=So("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ea=So(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),to=So(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ns=So(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ss=So(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Ka=So(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),ou=So(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Jo=So(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Os=So(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),tu=So(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),_s=So(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),vs=So(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),ts=So(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),ws=So(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ms=So(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Ou=So(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Bu=So(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function So(j,I){var w=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,B=I.match(/attribute ([\w]+) ([\w]+)/g),D=j.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),W=I.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),q=W?W.concat(D):D,st={};return{fragmentSource:j=j.replace(w,function(Ct,wt,Ut,Zt,qt){return st[qt]=!0,wt==="define"?`
#ifndef HAS_UNIFORM_u_`+qt+`
varying `+Ut+" "+Zt+" "+qt+`;
#else
uniform `+Ut+" "+Zt+" u_"+qt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+qt+`
    `+Ut+" "+Zt+" "+qt+" = u_"+qt+`;
#endif
`}),vertexSource:I=I.replace(w,function(Ct,wt,Ut,Zt,qt){var he=Zt==="float"?"vec2":"vec4",me=qt.match(/color/)?"color":he;return st[qt]?wt==="define"?`
#ifndef HAS_UNIFORM_u_`+qt+`
uniform lowp float u_`+qt+`_t;
attribute `+Ut+" "+he+" a_"+qt+`;
varying `+Ut+" "+Zt+" "+qt+`;
#else
uniform `+Ut+" "+Zt+" u_"+qt+`;
#endif
`:me==="vec4"?`
#ifndef HAS_UNIFORM_u_`+qt+`
    `+qt+" = a_"+qt+`;
#else
    `+Ut+" "+Zt+" "+qt+" = u_"+qt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+qt+`
    `+qt+" = unpack_mix_"+me+"(a_"+qt+", u_"+qt+`_t);
#else
    `+Ut+" "+Zt+" "+qt+" = u_"+qt+`;
#endif
`:wt==="define"?`
#ifndef HAS_UNIFORM_u_`+qt+`
uniform lowp float u_`+qt+`_t;
attribute `+Ut+" "+he+" a_"+qt+`;
#else
uniform `+Ut+" "+Zt+" u_"+qt+`;
#endif
`:me==="vec4"?`
#ifndef HAS_UNIFORM_u_`+qt+`
    `+Ut+" "+Zt+" "+qt+" = a_"+qt+`;
#else
    `+Ut+" "+Zt+" "+qt+" = u_"+qt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+qt+`
    `+Ut+" "+Zt+" "+qt+" = unpack_mix_"+me+"(a_"+qt+", u_"+qt+`_t);
#else
    `+Ut+" "+Zt+" "+qt+" = u_"+qt+`;
#endif
`}),staticAttributes:B,staticUniforms:q}}var eu=Object.freeze({__proto__:null,prelude:Bs,background:ss,backgroundPattern:ja,circle:gn,clippingMask:cr,heatmap:Gr,heatmapTexture:Ui,collisionBox:za,collisionCircle:go,debug:fo,fill:ea,fillOutline:to,fillOutlinePattern:Ns,fillPattern:Ss,fillExtrusion:Ka,fillExtrusionPattern:ou,hillshadePrepare:Jo,hillshade:Os,line:tu,lineGradient:_s,linePattern:vs,lineSDF:ts,raster:ws,symbolIcon:Ms,symbolSDF:Ou,symbolTextAndIcon:Bu}),Nu=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Yu(j){for(var I=[],w=0;w<j.length;w++)if(j[w]!==null){var B=j[w].split(" ");I.push(B.pop())}return I}Nu.prototype.bind=function(j,I,w,B,D,W,q,st){this.context=j;for(var Ct=this.boundPaintVertexBuffers.length!==B.length,wt=0;!Ct&&wt<B.length;wt++)this.boundPaintVertexBuffers[wt]!==B[wt]&&(Ct=!0);j.extVertexArrayObject&&this.vao&&this.boundProgram===I&&this.boundLayoutVertexBuffer===w&&!Ct&&this.boundIndexBuffer===D&&this.boundVertexOffset===W&&this.boundDynamicVertexBuffer===q&&this.boundDynamicVertexBuffer2===st?(j.bindVertexArrayOES.set(this.vao),q&&q.bind(),D&&D.dynamicDraw&&D.bind(),st&&st.bind()):this.freshBind(I,w,B,D,W,q,st)},Nu.prototype.freshBind=function(j,I,w,B,D,W,q){var st,Ct=j.numAttributes,wt=this.context,Ut=wt.gl;if(wt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=wt.extVertexArrayObject.createVertexArrayOES(),wt.bindVertexArrayOES.set(this.vao),st=0,this.boundProgram=j,this.boundLayoutVertexBuffer=I,this.boundPaintVertexBuffers=w,this.boundIndexBuffer=B,this.boundVertexOffset=D,this.boundDynamicVertexBuffer=W,this.boundDynamicVertexBuffer2=q;else{st=wt.currentNumAttributes||0;for(var Zt=Ct;Zt<st;Zt++)Ut.disableVertexAttribArray(Zt)}I.enableAttributes(Ut,j);for(var qt=0,he=w;qt<he.length;qt+=1)he[qt].enableAttributes(Ut,j);W&&W.enableAttributes(Ut,j),q&&q.enableAttributes(Ut,j),I.bind(),I.setVertexAttribPointers(Ut,j,D);for(var me=0,De=w;me<De.length;me+=1){var Ae=De[me];Ae.bind(),Ae.setVertexAttribPointers(Ut,j,D)}W&&(W.bind(),W.setVertexAttribPointers(Ut,j,D)),B&&B.bind(),q&&(q.bind(),q.setVertexAttribPointers(Ut,j,D)),wt.currentNumAttributes=Ct},Nu.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var al=function(I,w,B,D,W,q){var st=I.gl;this.program=st.createProgram();for(var Ct=Yu(B.staticAttributes),wt=D?D.getBinderAttributes():[],Ut=Ct.concat(wt),Zt=B.staticUniforms?Yu(B.staticUniforms):[],qt=D?D.getBinderUniforms():[],he=[],me=0,De=Zt.concat(qt);me<De.length;me+=1){var Ae=De[me];he.indexOf(Ae)<0&&he.push(Ae)}var Ue=D?D.defines():[];q&&Ue.push("#define OVERDRAW_INSPECTOR;");var qe=Ue.concat(Bs.fragmentSource,B.fragmentSource).join(`
`),rn=Ue.concat(Bs.vertexSource,B.vertexSource).join(`
`),Xn=st.createShader(st.FRAGMENT_SHADER);if(st.isContextLost())this.failedToCreate=!0;else{st.shaderSource(Xn,qe),st.compileShader(Xn),st.attachShader(this.program,Xn);var Un=st.createShader(st.VERTEX_SHADER);if(st.isContextLost())this.failedToCreate=!0;else{st.shaderSource(Un,rn),st.compileShader(Un),st.attachShader(this.program,Un),this.attributes={};var gr={};this.numAttributes=Ut.length;for(var Mr=0;Mr<this.numAttributes;Mr++)Ut[Mr]&&(st.bindAttribLocation(this.program,Mr,Ut[Mr]),this.attributes[Ut[Mr]]=Mr);st.linkProgram(this.program),st.deleteShader(Un),st.deleteShader(Xn);for(var Qr=0;Qr<he.length;Qr++){var Vr=he[Qr];if(Vr&&!gr[Vr]){var _i=st.getUniformLocation(this.program,Vr);_i&&(gr[Vr]=_i)}}this.fixedUniforms=W(I,gr),this.binderUniforms=D?D.getUniforms(I,gr):[]}}};function Fu(j,I,w){var B=1/Ra(w,1,I.transform.tileZoom),D=Math.pow(2,w.tileID.overscaledZ),W=w.tileSize*Math.pow(2,I.transform.tileZoom)/D,q=W*(w.tileID.canonical.x+w.tileID.wrap*D),st=W*w.tileID.canonical.y;return{u_image:0,u_texsize:w.imageAtlasTexture.size,u_scale:[B,j.fromScale,j.toScale],u_fade:j.t,u_pixel_coord_upper:[q>>16,st>>16],u_pixel_coord_lower:[65535&q,65535&st]}}al.prototype.draw=function(j,I,w,B,D,W,q,st,Ct,wt,Ut,Zt,qt,he,me,De){var Ae,Ue=j.gl;if(!this.failedToCreate){for(var qe in j.program.set(this.program),j.setDepthMode(w),j.setStencilMode(B),j.setColorMode(D),j.setCullFace(W),this.fixedUniforms)this.fixedUniforms[qe].set(q[qe]);he&&he.setUniforms(j,this.binderUniforms,Zt,{zoom:qt});for(var rn=(Ae={},Ae[Ue.LINES]=2,Ae[Ue.TRIANGLES]=3,Ae[Ue.LINE_STRIP]=1,Ae)[I],Xn=0,Un=Ut.get();Xn<Un.length;Xn+=1){var gr=Un[Xn],Mr=gr.vaos||(gr.vaos={});(Mr[st]||(Mr[st]=new Nu)).bind(j,this,Ct,he?he.getPaintVertexBuffers():[],wt,gr.vertexOffset,me,De),Ue.drawElements(I,gr.primitiveLength*rn,Ue.UNSIGNED_SHORT,gr.primitiveOffset*rn*2)}}};var Oo=function(I,w,B,D){var W=w.style.light,q=W.properties.get("position"),st=[q.x,q.y,q.z],Ct=t.create$1();W.properties.get("anchor")==="viewport"&&t.fromRotation(Ct,-w.transform.angle),t.transformMat3(st,st,Ct);var wt=W.properties.get("color");return{u_matrix:I,u_lightpos:st,u_lightintensity:W.properties.get("intensity"),u_lightcolor:[wt.r,wt.g,wt.b],u_vertical_gradient:+B,u_opacity:D}},Ua=function(I,w,B,D,W,q,st){return t.extend(Oo(I,w,B,D),Fu(q,w,st),{u_height_factor:-Math.pow(2,W.overscaledZ)/st.tileSize/8})},ba=function(I){return{u_matrix:I}},No=function(I,w,B,D){return t.extend(ba(I),Fu(B,w,D))},hu=function(I,w){return{u_matrix:I,u_world:w}},Zu=function(I,w,B,D,W){return t.extend(No(I,w,B,D),{u_world:W})},ps=function(I,w,B,D){var W,q,st=I.transform;if(D.paint.get("circle-pitch-alignment")==="map"){var Ct=Ra(B,1,st.zoom);W=!0,q=[Ct,Ct]}else W=!1,q=st.pixelsToGLUnits;return{u_camera_to_center_distance:st.cameraToCenterDistance,u_scale_with_map:+(D.paint.get("circle-pitch-scale")==="map"),u_matrix:I.translatePosMatrix(w.posMatrix,B,D.paint.get("circle-translate"),D.paint.get("circle-translate-anchor")),u_pitch_with_map:+W,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:q}},$o=function(I,w,B){var D=Ra(B,1,w.zoom),W=Math.pow(2,w.zoom-B.tileID.overscaledZ),q=B.tileID.overscaleFactor();return{u_matrix:I,u_camera_to_center_distance:w.cameraToCenterDistance,u_pixels_to_tile_units:D,u_extrude_scale:[w.pixelsToGLUnits[0]/(D*W),w.pixelsToGLUnits[1]/(D*W)],u_overscale_factor:q}},Is=function(I,w,B){return{u_matrix:I,u_inv_matrix:w,u_camera_to_center_distance:B.cameraToCenterDistance,u_viewport_size:[B.width,B.height]}},su=function(I,w,B){return B===void 0&&(B=1),{u_matrix:I,u_color:w,u_overlay:0,u_overlay_scale:B}},Fo=function(I){return{u_matrix:I}},Ku=function(I,w,B,D){return{u_matrix:I,u_extrude_scale:Ra(w,1,B),u_intensity:D}},Xs=function(I,w,B){var D=I.transform;return{u_matrix:yc(I,w,B),u_ratio:1/Ra(w,1,D.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]]}},Xa=function(I,w,B,D){return t.extend(Xs(I,w,B),{u_image:0,u_image_height:D})},yl=function(I,w,B,D){var W=I.transform,q=xl(w,W);return{u_matrix:yc(I,w,B),u_texsize:w.imageAtlasTexture.size,u_ratio:1/Ra(w,1,W.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[q,D.fromScale,D.toScale],u_fade:D.t,u_units_to_pixels:[1/W.pixelsToGLUnits[0],1/W.pixelsToGLUnits[1]]}},Hl=function(I,w,B,D,W){var q=I.lineAtlas,st=xl(w,I.transform),Ct=B.layout.get("line-cap")==="round",wt=q.getDash(D.from,Ct),Ut=q.getDash(D.to,Ct),Zt=wt.width*W.fromScale,qt=Ut.width*W.toScale;return t.extend(Xs(I,w,B),{u_patternscale_a:[st/Zt,-wt.height/2],u_patternscale_b:[st/qt,-Ut.height/2],u_sdfgamma:q.width/(256*Math.min(Zt,qt)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:wt.y,u_tex_y_b:Ut.y,u_mix:W.t})};function xl(j,I){return 1/Ra(j,1,I.tileZoom)}function yc(j,I,w){return j.translatePosMatrix(I.tileID.posMatrix,I,w.paint.get("line-translate"),w.paint.get("line-translate-anchor"))}var Tl=function(I,w,B,D,W){return{u_matrix:I,u_tl_parent:w,u_scale_parent:B,u_buffer_scale:1,u_fade_t:D.mix,u_opacity:D.opacity*W.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:W.paint.get("raster-brightness-min"),u_brightness_high:W.paint.get("raster-brightness-max"),u_saturation_factor:(st=W.paint.get("raster-saturation"),st>0?1-1/(1.001-st):-st),u_contrast_factor:(q=W.paint.get("raster-contrast"),q>0?1/(1-q):1+q),u_spin_weights:oo(W.paint.get("raster-hue-rotate"))};var q,st};function oo(j){j*=Math.PI/180;var I=Math.sin(j),w=Math.cos(j);return[(2*w+1)/3,(-Math.sqrt(3)*I-w+1)/3,(Math.sqrt(3)*I-w+1)/3]}var wu,bl=function(I,w,B,D,W,q,st,Ct,wt,Ut){var Zt=W.transform;return{u_is_size_zoom_constant:+(I==="constant"||I==="source"),u_is_size_feature_constant:+(I==="constant"||I==="camera"),u_size_t:w?w.uSizeT:0,u_size:w?w.uSize:0,u_camera_to_center_distance:Zt.cameraToCenterDistance,u_pitch:Zt.pitch/360*2*Math.PI,u_rotate_symbol:+B,u_aspect_ratio:Zt.width/Zt.height,u_fade_change:W.options.fadeDuration?W.symbolFadeChange:1,u_matrix:q,u_label_plane_matrix:st,u_coord_matrix:Ct,u_is_text:+wt,u_pitch_with_map:+D,u_texsize:Ut,u_texture:0}},nu=function(I,w,B,D,W,q,st,Ct,wt,Ut,Zt){var qt=W.transform;return t.extend(bl(I,w,B,D,W,q,st,Ct,wt,Ut),{u_gamma_scale:D?Math.cos(qt._pitch)*qt.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+Zt})},zu=function(I,w,B,D,W,q,st,Ct,wt,Ut){return t.extend(nu(I,w,B,D,W,q,st,Ct,!0,wt,!0),{u_texsize_icon:Ut,u_texture_icon:1})},xu=function(I,w,B){return{u_matrix:I,u_opacity:w,u_color:B}},bu=function(I,w,B,D,W,q){return t.extend(function(st,Ct,wt,Ut){var Zt=wt.imageManager.getPattern(st.from.toString()),qt=wt.imageManager.getPattern(st.to.toString()),he=wt.imageManager.getPixelSize(),me=he.width,De=he.height,Ae=Math.pow(2,Ut.tileID.overscaledZ),Ue=Ut.tileSize*Math.pow(2,wt.transform.tileZoom)/Ae,qe=Ue*(Ut.tileID.canonical.x+Ut.tileID.wrap*Ae),rn=Ue*Ut.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Zt.tl,u_pattern_br_a:Zt.br,u_pattern_tl_b:qt.tl,u_pattern_br_b:qt.br,u_texsize:[me,De],u_mix:Ct.t,u_pattern_size_a:Zt.displaySize,u_pattern_size_b:qt.displaySize,u_scale_a:Ct.fromScale,u_scale_b:Ct.toScale,u_tile_units_to_pixels:1/Ra(Ut,1,wt.transform.tileZoom),u_pixel_coord_upper:[qe>>16,rn>>16],u_pixel_coord_lower:[65535&qe,65535&rn]}}(D,q,B,W),{u_matrix:I,u_opacity:w})},Js={fillExtrusion:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_lightpos:new t.Uniform3f(I,w.u_lightpos),u_lightintensity:new t.Uniform1f(I,w.u_lightintensity),u_lightcolor:new t.Uniform3f(I,w.u_lightcolor),u_vertical_gradient:new t.Uniform1f(I,w.u_vertical_gradient),u_opacity:new t.Uniform1f(I,w.u_opacity)}},fillExtrusionPattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_lightpos:new t.Uniform3f(I,w.u_lightpos),u_lightintensity:new t.Uniform1f(I,w.u_lightintensity),u_lightcolor:new t.Uniform3f(I,w.u_lightcolor),u_vertical_gradient:new t.Uniform1f(I,w.u_vertical_gradient),u_height_factor:new t.Uniform1f(I,w.u_height_factor),u_image:new t.Uniform1i(I,w.u_image),u_texsize:new t.Uniform2f(I,w.u_texsize),u_pixel_coord_upper:new t.Uniform2f(I,w.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(I,w.u_pixel_coord_lower),u_scale:new t.Uniform3f(I,w.u_scale),u_fade:new t.Uniform1f(I,w.u_fade),u_opacity:new t.Uniform1f(I,w.u_opacity)}},fill:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix)}},fillPattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_image:new t.Uniform1i(I,w.u_image),u_texsize:new t.Uniform2f(I,w.u_texsize),u_pixel_coord_upper:new t.Uniform2f(I,w.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(I,w.u_pixel_coord_lower),u_scale:new t.Uniform3f(I,w.u_scale),u_fade:new t.Uniform1f(I,w.u_fade)}},fillOutline:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_world:new t.Uniform2f(I,w.u_world)}},fillOutlinePattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_world:new t.Uniform2f(I,w.u_world),u_image:new t.Uniform1i(I,w.u_image),u_texsize:new t.Uniform2f(I,w.u_texsize),u_pixel_coord_upper:new t.Uniform2f(I,w.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(I,w.u_pixel_coord_lower),u_scale:new t.Uniform3f(I,w.u_scale),u_fade:new t.Uniform1f(I,w.u_fade)}},circle:function(I,w){return{u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(I,w.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(I,w.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(I,w.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(I,w.u_matrix)}},collisionBox:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(I,w.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(I,w.u_extrude_scale),u_overscale_factor:new t.Uniform1f(I,w.u_overscale_factor)}},collisionCircle:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_inv_matrix:new t.UniformMatrix4f(I,w.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(I,w.u_viewport_size)}},debug:function(I,w){return{u_color:new t.UniformColor(I,w.u_color),u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_overlay:new t.Uniform1i(I,w.u_overlay),u_overlay_scale:new t.Uniform1f(I,w.u_overlay_scale)}},clippingMask:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix)}},heatmap:function(I,w){return{u_extrude_scale:new t.Uniform1f(I,w.u_extrude_scale),u_intensity:new t.Uniform1f(I,w.u_intensity),u_matrix:new t.UniformMatrix4f(I,w.u_matrix)}},heatmapTexture:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_world:new t.Uniform2f(I,w.u_world),u_image:new t.Uniform1i(I,w.u_image),u_color_ramp:new t.Uniform1i(I,w.u_color_ramp),u_opacity:new t.Uniform1f(I,w.u_opacity)}},hillshade:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_image:new t.Uniform1i(I,w.u_image),u_latrange:new t.Uniform2f(I,w.u_latrange),u_light:new t.Uniform2f(I,w.u_light),u_shadow:new t.UniformColor(I,w.u_shadow),u_highlight:new t.UniformColor(I,w.u_highlight),u_accent:new t.UniformColor(I,w.u_accent)}},hillshadePrepare:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_image:new t.Uniform1i(I,w.u_image),u_dimension:new t.Uniform2f(I,w.u_dimension),u_zoom:new t.Uniform1f(I,w.u_zoom),u_unpack:new t.Uniform4f(I,w.u_unpack)}},line:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_ratio:new t.Uniform1f(I,w.u_ratio),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(I,w.u_units_to_pixels)}},lineGradient:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_ratio:new t.Uniform1f(I,w.u_ratio),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(I,w.u_units_to_pixels),u_image:new t.Uniform1i(I,w.u_image),u_image_height:new t.Uniform1f(I,w.u_image_height)}},linePattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_texsize:new t.Uniform2f(I,w.u_texsize),u_ratio:new t.Uniform1f(I,w.u_ratio),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_image:new t.Uniform1i(I,w.u_image),u_units_to_pixels:new t.Uniform2f(I,w.u_units_to_pixels),u_scale:new t.Uniform3f(I,w.u_scale),u_fade:new t.Uniform1f(I,w.u_fade)}},lineSDF:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_ratio:new t.Uniform1f(I,w.u_ratio),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(I,w.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(I,w.u_patternscale_a),u_patternscale_b:new t.Uniform2f(I,w.u_patternscale_b),u_sdfgamma:new t.Uniform1f(I,w.u_sdfgamma),u_image:new t.Uniform1i(I,w.u_image),u_tex_y_a:new t.Uniform1f(I,w.u_tex_y_a),u_tex_y_b:new t.Uniform1f(I,w.u_tex_y_b),u_mix:new t.Uniform1f(I,w.u_mix)}},raster:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_tl_parent:new t.Uniform2f(I,w.u_tl_parent),u_scale_parent:new t.Uniform1f(I,w.u_scale_parent),u_buffer_scale:new t.Uniform1f(I,w.u_buffer_scale),u_fade_t:new t.Uniform1f(I,w.u_fade_t),u_opacity:new t.Uniform1f(I,w.u_opacity),u_image0:new t.Uniform1i(I,w.u_image0),u_image1:new t.Uniform1i(I,w.u_image1),u_brightness_low:new t.Uniform1f(I,w.u_brightness_low),u_brightness_high:new t.Uniform1f(I,w.u_brightness_high),u_saturation_factor:new t.Uniform1f(I,w.u_saturation_factor),u_contrast_factor:new t.Uniform1f(I,w.u_contrast_factor),u_spin_weights:new t.Uniform3f(I,w.u_spin_weights)}},symbolIcon:function(I,w){return{u_is_size_zoom_constant:new t.Uniform1i(I,w.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(I,w.u_is_size_feature_constant),u_size_t:new t.Uniform1f(I,w.u_size_t),u_size:new t.Uniform1f(I,w.u_size),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_pitch:new t.Uniform1f(I,w.u_pitch),u_rotate_symbol:new t.Uniform1i(I,w.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(I,w.u_aspect_ratio),u_fade_change:new t.Uniform1f(I,w.u_fade_change),u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(I,w.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(I,w.u_coord_matrix),u_is_text:new t.Uniform1i(I,w.u_is_text),u_pitch_with_map:new t.Uniform1i(I,w.u_pitch_with_map),u_texsize:new t.Uniform2f(I,w.u_texsize),u_texture:new t.Uniform1i(I,w.u_texture)}},symbolSDF:function(I,w){return{u_is_size_zoom_constant:new t.Uniform1i(I,w.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(I,w.u_is_size_feature_constant),u_size_t:new t.Uniform1f(I,w.u_size_t),u_size:new t.Uniform1f(I,w.u_size),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_pitch:new t.Uniform1f(I,w.u_pitch),u_rotate_symbol:new t.Uniform1i(I,w.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(I,w.u_aspect_ratio),u_fade_change:new t.Uniform1f(I,w.u_fade_change),u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(I,w.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(I,w.u_coord_matrix),u_is_text:new t.Uniform1i(I,w.u_is_text),u_pitch_with_map:new t.Uniform1i(I,w.u_pitch_with_map),u_texsize:new t.Uniform2f(I,w.u_texsize),u_texture:new t.Uniform1i(I,w.u_texture),u_gamma_scale:new t.Uniform1f(I,w.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(I,w.u_is_halo)}},symbolTextAndIcon:function(I,w){return{u_is_size_zoom_constant:new t.Uniform1i(I,w.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(I,w.u_is_size_feature_constant),u_size_t:new t.Uniform1f(I,w.u_size_t),u_size:new t.Uniform1f(I,w.u_size),u_camera_to_center_distance:new t.Uniform1f(I,w.u_camera_to_center_distance),u_pitch:new t.Uniform1f(I,w.u_pitch),u_rotate_symbol:new t.Uniform1i(I,w.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(I,w.u_aspect_ratio),u_fade_change:new t.Uniform1f(I,w.u_fade_change),u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(I,w.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(I,w.u_coord_matrix),u_is_text:new t.Uniform1i(I,w.u_is_text),u_pitch_with_map:new t.Uniform1i(I,w.u_pitch_with_map),u_texsize:new t.Uniform2f(I,w.u_texsize),u_texsize_icon:new t.Uniform2f(I,w.u_texsize_icon),u_texture:new t.Uniform1i(I,w.u_texture),u_texture_icon:new t.Uniform1i(I,w.u_texture_icon),u_gamma_scale:new t.Uniform1f(I,w.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(I,w.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(I,w.u_is_halo)}},background:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_opacity:new t.Uniform1f(I,w.u_opacity),u_color:new t.UniformColor(I,w.u_color)}},backgroundPattern:function(I,w){return{u_matrix:new t.UniformMatrix4f(I,w.u_matrix),u_opacity:new t.Uniform1f(I,w.u_opacity),u_image:new t.Uniform1i(I,w.u_image),u_pattern_tl_a:new t.Uniform2f(I,w.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(I,w.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(I,w.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(I,w.u_pattern_br_b),u_texsize:new t.Uniform2f(I,w.u_texsize),u_mix:new t.Uniform1f(I,w.u_mix),u_pattern_size_a:new t.Uniform2f(I,w.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(I,w.u_pattern_size_b),u_scale_a:new t.Uniform1f(I,w.u_scale_a),u_scale_b:new t.Uniform1f(I,w.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(I,w.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(I,w.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(I,w.u_tile_units_to_pixels)}}};function cs(j,I,w,B,D,W,q){for(var st=j.context,Ct=st.gl,wt=j.useProgram("collisionBox"),Ut=[],Zt=0,qt=0,he=0;he<B.length;he++){var me=B[he],De=I.getTile(me),Ae=De.getBucket(w);if(Ae){var Ue=me.posMatrix;D[0]===0&&D[1]===0||(Ue=j.translatePosMatrix(me.posMatrix,De,D,W));var qe=q?Ae.textCollisionBox:Ae.iconCollisionBox,rn=Ae.collisionCircleArray;if(rn.length>0){var Xn=t.create(),Un=Ue;t.mul(Xn,Ae.placementInvProjMatrix,j.transform.glCoordMatrix),t.mul(Xn,Xn,Ae.placementViewportMatrix),Ut.push({circleArray:rn,circleOffset:qt,transform:Un,invTransform:Xn}),qt=Zt+=rn.length/4}qe&&wt.draw(st,Ct.LINES,pe.disabled,Vt.disabled,j.colorModeForRenderPass(),Te.disabled,$o(Ue,j.transform,De),w.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,null,j.transform.zoom,null,null,qe.collisionVertexBuffer)}}if(q&&Ut.length){var gr=j.useProgram("collisionCircle"),Mr=new t.StructArrayLayout2f1f2i16;Mr.resize(4*Zt),Mr._trim();for(var Qr=0,Vr=0,_i=Ut;Vr<_i.length;Vr+=1)for(var Di=_i[Vr],Wi=0;Wi<Di.circleArray.length/4;Wi++){var Xi=4*Wi,La=Di.circleArray[Xi+0],Na=Di.circleArray[Xi+1],Vi=Di.circleArray[Xi+2],Ma=Di.circleArray[Xi+3];Mr.emplace(Qr++,La,Na,Vi,Ma,0),Mr.emplace(Qr++,La,Na,Vi,Ma,1),Mr.emplace(Qr++,La,Na,Vi,Ma,2),Mr.emplace(Qr++,La,Na,Vi,Ma,3)}(!wu||wu.length<2*Zt)&&(wu=function(As){var Rs=2*As,gs=new t.StructArrayLayout3ui6;gs.resize(Rs),gs._trim();for(var fs=0;fs<Rs;fs++){var Qs=6*fs;gs.uint16[Qs+0]=4*fs+0,gs.uint16[Qs+1]=4*fs+1,gs.uint16[Qs+2]=4*fs+2,gs.uint16[Qs+3]=4*fs+2,gs.uint16[Qs+4]=4*fs+3,gs.uint16[Qs+5]=4*fs+0}return gs}(Zt));for(var xa=st.createIndexBuffer(wu,!0),Hi=st.createVertexBuffer(Mr,t.collisionCircleLayout.members,!0),ha=0,aa=Ut;ha<aa.length;ha+=1){var Ca=aa[ha],Va=Is(Ca.transform,Ca.invTransform,j.transform);gr.draw(st,Ct.TRIANGLES,pe.disabled,Vt.disabled,j.colorModeForRenderPass(),Te.disabled,Va,w.id,Hi,xa,t.SegmentVector.simpleSegment(0,2*Ca.circleOffset,Ca.circleArray.length,Ca.circleArray.length/2),null,j.transform.zoom,null,null,null)}Hi.destroy(),xa.destroy()}}var Ps=t.identity(new Float32Array(16));function ol(j,I,w,B,D,W){var q=t.getAnchorAlignment(j),st=-(q.horizontalAlign-.5)*I,Ct=-(q.verticalAlign-.5)*w,wt=t.evaluateVariableOffset(j,B);return new t.Point((st/D+wt[0])*W,(Ct/D+wt[1])*W)}function Al(j,I,w,B,D,W,q,st,Ct,wt,Ut){var Zt=j.text.placedSymbolArray,qt=j.text.dynamicLayoutVertexArray,he=j.icon.dynamicLayoutVertexArray,me={};qt.clear();for(var De=0;De<Zt.length;De++){var Ae=Zt.get(De),Ue=Ae.hidden||!Ae.crossTileID||j.allowVerticalPlacement&&!Ae.placedOrientation?null:B[Ae.crossTileID];if(Ue){var qe=new t.Point(Ae.anchorX,Ae.anchorY),rn=yr(qe,w?st:q),Xn=Fr(W.cameraToCenterDistance,rn.signedDistanceFromCamera),Un=D.evaluateSizeForFeature(j.textSizeData,wt,Ae)*Xn/t.ONE_EM;w&&(Un*=j.tilePixelRatio/Ct);for(var gr=ol(Ue.anchor,Ue.width,Ue.height,Ue.textOffset,Ue.textBoxScale,Un),Mr=w?yr(qe.add(gr),q).point:rn.point.add(I?gr.rotate(-W.angle):gr),Qr=j.allowVerticalPlacement&&Ae.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,Vr=0;Vr<Ae.numGlyphs;Vr++)t.addDynamicAttributes(qt,Mr,Qr);Ut&&Ae.associatedIconIndex>=0&&(me[Ae.associatedIconIndex]={shiftedAnchor:Mr,angle:Qr})}else Ko(Ae.numGlyphs,qt)}if(Ut){he.clear();for(var _i=j.icon.placedSymbolArray,Di=0;Di<_i.length;Di++){var Wi=_i.get(Di);if(Wi.hidden)Ko(Wi.numGlyphs,he);else{var Xi=me[Di];if(Xi)for(var La=0;La<Wi.numGlyphs;La++)t.addDynamicAttributes(he,Xi.shiftedAnchor,Xi.angle);else Ko(Wi.numGlyphs,he)}}j.icon.dynamicLayoutVertexBuffer.updateData(he)}j.text.dynamicLayoutVertexBuffer.updateData(qt)}function Fl(j,I,w){return w.iconsInText&&I?"symbolTextAndIcon":j?"symbolSDF":"symbolIcon"}function Uu(j,I,w,B,D,W,q,st,Ct,wt,Ut,Zt){for(var qt=j.context,he=qt.gl,me=j.transform,De=st==="map",Ae=Ct==="map",Ue=De&&w.layout.get("symbol-placement")!=="point",qe=De&&!Ae&&!Ue,rn=w.layout.get("symbol-sort-key").constantOr(1)!==void 0,Xn=!1,Un=j.depthModeForSublayer(0,pe.ReadOnly),gr=w.layout.get("text-variable-anchor"),Mr=[],Qr=0,Vr=B;Qr<Vr.length;Qr+=1){var _i=Vr[Qr],Di=I.getTile(_i),Wi=Di.getBucket(w);if(Wi){var Xi=D?Wi.text:Wi.icon;if(Xi&&Xi.segments.get().length){var La=Xi.programConfigurations.get(w.id),Na=D||Wi.sdfIcons,Vi=D?Wi.textSizeData:Wi.iconSizeData,Ma=Ae||me.pitch!==0,xa=j.useProgram(Fl(Na,D,Wi),La),Hi=t.evaluateSizeForZoom(Vi,me.zoom),ha=void 0,aa=[0,0],Ca=void 0,Va=void 0,As=null,Rs=void 0;if(D)Ca=Di.glyphAtlasTexture,Va=he.LINEAR,ha=Di.glyphAtlasTexture.size,Wi.iconsInText&&(aa=Di.imageAtlasTexture.size,As=Di.imageAtlasTexture,Rs=Ma||j.options.rotating||j.options.zooming||Vi.kind==="composite"||Vi.kind==="camera"?he.LINEAR:he.NEAREST);else{var gs=w.layout.get("icon-size").constantOr(0)!==1||Wi.iconsNeedLinear;Ca=Di.imageAtlasTexture,Va=Na||j.options.rotating||j.options.zooming||gs||Ma?he.LINEAR:he.NEAREST,ha=Di.imageAtlasTexture.size}var fs=Ra(Di,1,j.transform.zoom),Qs=_n(_i.posMatrix,Ae,De,j.transform,fs),_l=br(_i.posMatrix,Ae,De,j.transform,fs),du=gr&&Wi.hasTextData(),uc=w.layout.get("icon-text-fit")!=="none"&&du&&Wi.hasIconData();Ue&&Ta(Wi,_i.posMatrix,j,D,Qs,_l,Ae,wt);var Mc=j.translatePosMatrix(_i.posMatrix,Di,W,q),Il=Ue||D&&gr||uc?Ps:Qs,ql=j.translatePosMatrix(_l,Di,W,q,!0),Ic=Na&&w.paint.get(D?"text-halo-width":"icon-halo-width").constantOr(1)!==0,qc={program:xa,buffers:Xi,uniformValues:Na?Wi.iconsInText?zu(Vi.kind,Hi,qe,Ae,j,Mc,Il,ql,ha,aa):nu(Vi.kind,Hi,qe,Ae,j,Mc,Il,ql,D,ha,!0):bl(Vi.kind,Hi,qe,Ae,j,Mc,Il,ql,D,ha),atlasTexture:Ca,atlasTextureIcon:As,atlasInterpolation:Va,atlasInterpolationIcon:Rs,isSDF:Na,hasHalo:Ic};if(rn&&Wi.canOverlap){Xn=!0;for(var Pc=0,Zc=Xi.segments.get();Pc<Zc.length;Pc+=1){var of=Zc[Pc];Mr.push({segments:new t.SegmentVector([of]),sortKey:of.sortKey,state:qc})}}else Mr.push({segments:Xi.segments,sortKey:0,state:qc})}}}Xn&&Mr.sort(function(Tc,ec){return Tc.sortKey-ec.sortKey});for(var vc=0,kc=Mr;vc<kc.length;vc+=1){var bc=kc[vc],au=bc.state;if(qt.activeTexture.set(he.TEXTURE0),au.atlasTexture.bind(au.atlasInterpolation,he.CLAMP_TO_EDGE),au.atlasTextureIcon&&(qt.activeTexture.set(he.TEXTURE1),au.atlasTextureIcon&&au.atlasTextureIcon.bind(au.atlasInterpolationIcon,he.CLAMP_TO_EDGE)),au.isSDF){var tc=au.uniformValues;au.hasHalo&&(tc.u_is_halo=1,Xu(au.buffers,bc.segments,w,j,au.program,Un,Ut,Zt,tc)),tc.u_is_halo=0}Xu(au.buffers,bc.segments,w,j,au.program,Un,Ut,Zt,au.uniformValues)}}function Xu(j,I,w,B,D,W,q,st,Ct){var wt=B.context;D.draw(wt,wt.gl.TRIANGLES,W,q,st,Te.disabled,Ct,w.id,j.layoutVertexBuffer,j.indexBuffer,I,w.paint,B.transform.zoom,j.programConfigurations.get(w.id),j.dynamicLayoutVertexBuffer,j.opacityVertexBuffer)}function sl(j,I,w,B,D,W,q){var st,Ct,wt,Ut,Zt,qt=j.context.gl,he=w.paint.get("fill-pattern"),me=he&&he.constantOr(1),De=w.getCrossfadeParameters();q?(Ct=me&&!w.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",st=qt.LINES):(Ct=me?"fillPattern":"fill",st=qt.TRIANGLES);for(var Ae=0,Ue=B;Ae<Ue.length;Ae+=1){var qe=Ue[Ae],rn=I.getTile(qe);if(!me||rn.patternsLoaded()){var Xn=rn.getBucket(w);if(Xn){var Un=Xn.programConfigurations.get(w.id),gr=j.useProgram(Ct,Un);me&&(j.context.activeTexture.set(qt.TEXTURE0),rn.imageAtlasTexture.bind(qt.LINEAR,qt.CLAMP_TO_EDGE),Un.updatePaintBuffers(De));var Mr=he.constantOr(null);if(Mr&&rn.imageAtlas){var Qr=rn.imageAtlas,Vr=Qr.patternPositions[Mr.to.toString()],_i=Qr.patternPositions[Mr.from.toString()];Vr&&_i&&Un.setConstantPatternPositions(Vr,_i)}var Di=j.translatePosMatrix(qe.posMatrix,rn,w.paint.get("fill-translate"),w.paint.get("fill-translate-anchor"));if(q){Ut=Xn.indexBuffer2,Zt=Xn.segments2;var Wi=[qt.drawingBufferWidth,qt.drawingBufferHeight];wt=Ct==="fillOutlinePattern"&&me?Zu(Di,j,De,rn,Wi):hu(Di,Wi)}else Ut=Xn.indexBuffer,Zt=Xn.segments,wt=me?No(Di,j,De,rn):ba(Di);gr.draw(j.context,st,D,j.stencilModeForClipping(qe),W,Te.disabled,wt,w.id,Xn.layoutVertexBuffer,Ut,Zt,w.paint,j.transform.zoom,Un)}}}}function Eu(j,I,w,B,D,W,q){for(var st=j.context,Ct=st.gl,wt=w.paint.get("fill-extrusion-pattern"),Ut=wt.constantOr(1),Zt=w.getCrossfadeParameters(),qt=w.paint.get("fill-extrusion-opacity"),he=0,me=B;he<me.length;he+=1){var De=me[he],Ae=I.getTile(De),Ue=Ae.getBucket(w);if(Ue){var qe=Ue.programConfigurations.get(w.id),rn=j.useProgram(Ut?"fillExtrusionPattern":"fillExtrusion",qe);Ut&&(j.context.activeTexture.set(Ct.TEXTURE0),Ae.imageAtlasTexture.bind(Ct.LINEAR,Ct.CLAMP_TO_EDGE),qe.updatePaintBuffers(Zt));var Xn=wt.constantOr(null);if(Xn&&Ae.imageAtlas){var Un=Ae.imageAtlas,gr=Un.patternPositions[Xn.to.toString()],Mr=Un.patternPositions[Xn.from.toString()];gr&&Mr&&qe.setConstantPatternPositions(gr,Mr)}var Qr=j.translatePosMatrix(De.posMatrix,Ae,w.paint.get("fill-extrusion-translate"),w.paint.get("fill-extrusion-translate-anchor")),Vr=w.paint.get("fill-extrusion-vertical-gradient"),_i=Ut?Ua(Qr,j,Vr,qt,De,Zt,Ae):Oo(Qr,j,Vr,qt);rn.draw(st,st.gl.TRIANGLES,D,W,q,Te.backCCW,_i,w.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,w.paint,j.transform.zoom,qe)}}}function uu(j,I,w,B,D,W){var q=j.context,st=q.gl,Ct=I.fbo;if(Ct){var wt=j.useProgram("hillshade");q.activeTexture.set(st.TEXTURE0),st.bindTexture(st.TEXTURE_2D,Ct.colorAttachment.get());var Ut=function(Zt,qt,he){var me=he.paint.get("hillshade-shadow-color"),De=he.paint.get("hillshade-highlight-color"),Ae=he.paint.get("hillshade-accent-color"),Ue=he.paint.get("hillshade-illumination-direction")*(Math.PI/180);he.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ue-=Zt.transform.angle);var qe,rn,Xn,Un=!Zt.options.moving;return{u_matrix:Zt.transform.calculatePosMatrix(qt.tileID.toUnwrapped(),Un),u_image:0,u_latrange:(qe=qt.tileID,rn=Math.pow(2,qe.canonical.z),Xn=qe.canonical.y,[new t.MercatorCoordinate(0,Xn/rn).toLngLat().lat,new t.MercatorCoordinate(0,(Xn+1)/rn).toLngLat().lat]),u_light:[he.paint.get("hillshade-exaggeration"),Ue],u_shadow:me,u_highlight:De,u_accent:Ae}}(j,I,w);wt.draw(q,st.TRIANGLES,B,D,W,Te.disabled,Ut,w.id,j.rasterBoundsBuffer,j.quadTriangleIndexBuffer,j.rasterBoundsSegments)}}function Ju(j,I,w,B,D,W){var q=j.context,st=q.gl,Ct=I.dem;if(Ct&&Ct.data){var wt=Ct.dim,Ut=Ct.stride,Zt=Ct.getPixels();if(q.activeTexture.set(st.TEXTURE1),q.pixelStoreUnpackPremultiplyAlpha.set(!1),I.demTexture=I.demTexture||j.getTileTexture(Ut),I.demTexture){var qt=I.demTexture;qt.update(Zt,{premultiply:!1}),qt.bind(st.NEAREST,st.CLAMP_TO_EDGE)}else I.demTexture=new t.Texture(q,Zt,st.RGBA,{premultiply:!1}),I.demTexture.bind(st.NEAREST,st.CLAMP_TO_EDGE);q.activeTexture.set(st.TEXTURE0);var he=I.fbo;if(!he){var me=new t.Texture(q,{width:wt,height:wt,data:null},st.RGBA);me.bind(st.LINEAR,st.CLAMP_TO_EDGE),(he=I.fbo=q.createFramebuffer(wt,wt,!0)).colorAttachment.set(me.texture)}q.bindFramebuffer.set(he.framebuffer),q.viewport.set([0,0,wt,wt]),j.useProgram("hillshadePrepare").draw(q,st.TRIANGLES,B,D,W,Te.disabled,function(De,Ae){var Ue=Ae.stride,qe=t.create();return t.ortho(qe,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(qe,qe,[0,-t.EXTENT,0]),{u_matrix:qe,u_image:1,u_dimension:[Ue,Ue],u_zoom:De.overscaledZ,u_unpack:Ae.getUnpackVector()}}(I.tileID,Ct),w.id,j.rasterBoundsBuffer,j.quadTriangleIndexBuffer,j.rasterBoundsSegments),I.needsHillshadePrepare=!1}}function Ls(j,I,w,B,D){var W=B.paint.get("raster-fade-duration");if(W>0){var q=t.browser.now(),st=(q-j.timeAdded)/W,Ct=I?(q-I.timeAdded)/W:-1,wt=w.getSource(),Ut=D.coveringZoomLevel({tileSize:wt.tileSize,roundZoom:wt.roundZoom}),Zt=!I||Math.abs(I.tileID.overscaledZ-Ut)>Math.abs(j.tileID.overscaledZ-Ut),qt=Zt&&j.refreshedUponExpiration?1:t.clamp(Zt?st:1-Ct,0,1);return j.refreshedUponExpiration&&st>=1&&(j.refreshedUponExpiration=!1),I?{opacity:1,mix:1-qt}:{opacity:qt,mix:0}}return{opacity:1,mix:0}}var El=new t.Color(1,0,0,1),sc=new t.Color(0,1,0,1),Cl=new t.Color(0,0,1,1),zl=new t.Color(1,0,1,1),Yl=new t.Color(0,1,1,1);function dc(j,I,w,B){Ol(j,0,I+w/2,j.transform.width,w,B)}function $u(j,I,w,B){Ol(j,I-w/2,0,w,j.transform.height,B)}function Ol(j,I,w,B,D,W){var q=j.context,st=q.gl;st.enable(st.SCISSOR_TEST),st.scissor(I*t.browser.devicePixelRatio,w*t.browser.devicePixelRatio,B*t.browser.devicePixelRatio,D*t.browser.devicePixelRatio),q.clear({color:W}),st.disable(st.SCISSOR_TEST)}function Ul(j,I,w){var B=j.context,D=B.gl,W=w.posMatrix,q=j.useProgram("debug"),st=pe.disabled,Ct=Vt.disabled,wt=j.colorModeForRenderPass();B.activeTexture.set(D.TEXTURE0),j.emptyTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),q.draw(B,D.LINE_STRIP,st,Ct,wt,Te.disabled,su(W,t.Color.red),"$debug",j.debugBuffer,j.tileBorderIndexBuffer,j.debugSegments);var Ut=I.getTileByID(w.key).latestRawTileData,Zt=Math.floor((Ut&&Ut.byteLength||0)/1024),qt=I.getTile(w).tileSize,he=512/Math.min(qt,512)*(w.overscaledZ/j.transform.zoom)*.5,me=w.canonical.toString();w.overscaledZ!==w.canonical.z&&(me+=" => "+w.overscaledZ),function(De,Ae){De.initDebugOverlayCanvas();var Ue=De.debugOverlayCanvas,qe=De.context.gl,rn=De.debugOverlayCanvas.getContext("2d");rn.clearRect(0,0,Ue.width,Ue.height),rn.shadowColor="white",rn.shadowBlur=2,rn.lineWidth=1.5,rn.strokeStyle="white",rn.textBaseline="top",rn.font="bold 36px Open Sans, sans-serif",rn.fillText(Ae,5,5),rn.strokeText(Ae,5,5),De.debugOverlayTexture.update(Ue),De.debugOverlayTexture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE)}(j,me+" "+Zt+"kb"),q.draw(B,D.TRIANGLES,st,Ct,re.alphaBlended,Te.disabled,su(W,t.Color.transparent,he),"$debug",j.debugBuffer,j.quadTriangleIndexBuffer,j.debugSegments)}var wo={symbol:function(I,w,B,D,W){if(I.renderPass==="translucent"){var q=Vt.disabled,st=I.colorModeForRenderPass();B.layout.get("text-variable-anchor")&&function(Ct,wt,Ut,Zt,qt,he,me){for(var De=wt.transform,Ae=qt==="map",Ue=he==="map",qe=0,rn=Ct;qe<rn.length;qe+=1){var Xn=rn[qe],Un=Zt.getTile(Xn),gr=Un.getBucket(Ut);if(gr&&gr.text&&gr.text.segments.get().length){var Mr=t.evaluateSizeForZoom(gr.textSizeData,De.zoom),Qr=Ra(Un,1,wt.transform.zoom),Vr=_n(Xn.posMatrix,Ue,Ae,wt.transform,Qr),_i=Ut.layout.get("icon-text-fit")!=="none"&&gr.hasIconData();if(Mr){var Di=Math.pow(2,De.zoom-Un.tileID.overscaledZ);Al(gr,Ae,Ue,me,t.symbolSize,De,Vr,Xn.posMatrix,Di,Mr,_i)}}}}(D,I,B,w,B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),W),B.paint.get("icon-opacity").constantOr(1)!==0&&Uu(I,w,B,D,!1,B.paint.get("icon-translate"),B.paint.get("icon-translate-anchor"),B.layout.get("icon-rotation-alignment"),B.layout.get("icon-pitch-alignment"),B.layout.get("icon-keep-upright"),q,st),B.paint.get("text-opacity").constantOr(1)!==0&&Uu(I,w,B,D,!0,B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),B.layout.get("text-keep-upright"),q,st),w.map.showCollisionBoxes&&(cs(I,w,B,D,B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),!0),cs(I,w,B,D,B.paint.get("icon-translate"),B.paint.get("icon-translate-anchor"),!1))}},circle:function(I,w,B,D){if(I.renderPass==="translucent"){var W=B.paint.get("circle-opacity"),q=B.paint.get("circle-stroke-width"),st=B.paint.get("circle-stroke-opacity"),Ct=B.layout.get("circle-sort-key").constantOr(1)!==void 0;if(W.constantOr(1)!==0||q.constantOr(1)!==0&&st.constantOr(1)!==0){for(var wt=I.context,Ut=wt.gl,Zt=I.depthModeForSublayer(0,pe.ReadOnly),qt=Vt.disabled,he=I.colorModeForRenderPass(),me=[],De=0;De<D.length;De++){var Ae=D[De],Ue=w.getTile(Ae),qe=Ue.getBucket(B);if(qe){var rn=qe.programConfigurations.get(B.id),Xn={programConfiguration:rn,program:I.useProgram("circle",rn),layoutVertexBuffer:qe.layoutVertexBuffer,indexBuffer:qe.indexBuffer,uniformValues:ps(I,Ae,Ue,B)};if(Ct)for(var Un=0,gr=qe.segments.get();Un<gr.length;Un+=1){var Mr=gr[Un];me.push({segments:new t.SegmentVector([Mr]),sortKey:Mr.sortKey,state:Xn})}else me.push({segments:qe.segments,sortKey:0,state:Xn})}}Ct&&me.sort(function(Wi,Xi){return Wi.sortKey-Xi.sortKey});for(var Qr=0,Vr=me;Qr<Vr.length;Qr+=1){var _i=Vr[Qr],Di=_i.state;Di.program.draw(wt,Ut.TRIANGLES,Zt,qt,he,Te.disabled,Di.uniformValues,B.id,Di.layoutVertexBuffer,Di.indexBuffer,_i.segments,B.paint,I.transform.zoom,Di.programConfiguration)}}}},heatmap:function(I,w,B,D){if(B.paint.get("heatmap-opacity")!==0)if(I.renderPass==="offscreen"){var W=I.context,q=W.gl,st=Vt.disabled,Ct=new re([q.ONE,q.ONE],t.Color.transparent,[!0,!0,!0,!0]);(function(me,De,Ae){var Ue=me.gl;me.activeTexture.set(Ue.TEXTURE1),me.viewport.set([0,0,De.width/4,De.height/4]);var qe=Ae.heatmapFbo;if(qe)Ue.bindTexture(Ue.TEXTURE_2D,qe.colorAttachment.get()),me.bindFramebuffer.set(qe.framebuffer);else{var rn=Ue.createTexture();Ue.bindTexture(Ue.TEXTURE_2D,rn),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_WRAP_S,Ue.CLAMP_TO_EDGE),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_WRAP_T,Ue.CLAMP_TO_EDGE),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_MIN_FILTER,Ue.LINEAR),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_MAG_FILTER,Ue.LINEAR),qe=Ae.heatmapFbo=me.createFramebuffer(De.width/4,De.height/4,!1),function(Xn,Un,gr,Mr){var Qr=Xn.gl;Qr.texImage2D(Qr.TEXTURE_2D,0,Qr.RGBA,Un.width/4,Un.height/4,0,Qr.RGBA,Xn.extRenderToTextureHalfFloat?Xn.extTextureHalfFloat.HALF_FLOAT_OES:Qr.UNSIGNED_BYTE,null),Mr.colorAttachment.set(gr)}(me,De,rn,qe)}})(W,I,B),W.clear({color:t.Color.transparent});for(var wt=0;wt<D.length;wt++){var Ut=D[wt];if(!w.hasRenderableParent(Ut)){var Zt=w.getTile(Ut),qt=Zt.getBucket(B);if(qt){var he=qt.programConfigurations.get(B.id);I.useProgram("heatmap",he).draw(W,q.TRIANGLES,pe.disabled,st,Ct,Te.disabled,Ku(Ut.posMatrix,Zt,I.transform.zoom,B.paint.get("heatmap-intensity")),B.id,qt.layoutVertexBuffer,qt.indexBuffer,qt.segments,B.paint,I.transform.zoom,he)}}}W.viewport.set([0,0,I.width,I.height])}else I.renderPass==="translucent"&&(I.context.setColorMode(I.colorModeForRenderPass()),function(me,De){var Ae=me.context,Ue=Ae.gl,qe=De.heatmapFbo;if(qe){Ae.activeTexture.set(Ue.TEXTURE0),Ue.bindTexture(Ue.TEXTURE_2D,qe.colorAttachment.get()),Ae.activeTexture.set(Ue.TEXTURE1);var rn=De.colorRampTexture;rn||(rn=De.colorRampTexture=new t.Texture(Ae,De.colorRamp,Ue.RGBA)),rn.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE),me.useProgram("heatmapTexture").draw(Ae,Ue.TRIANGLES,pe.disabled,Vt.disabled,me.colorModeForRenderPass(),Te.disabled,function(Xn,Un,gr,Mr){var Qr=t.create();t.ortho(Qr,0,Xn.width,Xn.height,0,0,1);var Vr=Xn.context.gl;return{u_matrix:Qr,u_world:[Vr.drawingBufferWidth,Vr.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Un.paint.get("heatmap-opacity")}}(me,De),De.id,me.viewportBuffer,me.quadTriangleIndexBuffer,me.viewportSegments,De.paint,me.transform.zoom)}}(I,B))},line:function(I,w,B,D){if(I.renderPass==="translucent"){var W=B.paint.get("line-opacity"),q=B.paint.get("line-width");if(W.constantOr(1)!==0&&q.constantOr(1)!==0)for(var st=I.depthModeForSublayer(0,pe.ReadOnly),Ct=I.colorModeForRenderPass(),wt=B.paint.get("line-dasharray"),Ut=B.paint.get("line-pattern"),Zt=Ut.constantOr(1),qt=B.paint.get("line-gradient"),he=B.getCrossfadeParameters(),me=Zt?"linePattern":wt?"lineSDF":qt?"lineGradient":"line",De=I.context,Ae=De.gl,Ue=!0,qe=0,rn=D;qe<rn.length;qe+=1){var Xn=rn[qe],Un=w.getTile(Xn);if(!Zt||Un.patternsLoaded()){var gr=Un.getBucket(B);if(gr){var Mr=gr.programConfigurations.get(B.id),Qr=I.context.program.get(),Vr=I.useProgram(me,Mr),_i=Ue||Vr.program!==Qr,Di=Ut.constantOr(null);if(Di&&Un.imageAtlas){var Wi=Un.imageAtlas,Xi=Wi.patternPositions[Di.to.toString()],La=Wi.patternPositions[Di.from.toString()];Xi&&La&&Mr.setConstantPatternPositions(Xi,La)}var Na=Zt?yl(I,Un,B,he):wt?Hl(I,Un,B,wt,he):qt?Xa(I,Un,B,gr.lineClipsArray.length):Xs(I,Un,B);if(Zt)De.activeTexture.set(Ae.TEXTURE0),Un.imageAtlasTexture.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE),Mr.updatePaintBuffers(he);else if(wt&&(_i||I.lineAtlas.dirty))De.activeTexture.set(Ae.TEXTURE0),I.lineAtlas.bind(De);else if(qt){var Vi=gr.gradients[B.id],Ma=Vi.texture;if(B.gradientVersion!==Vi.version){var xa=256;if(B.stepInterpolant){var Hi=w.getSource().maxzoom,ha=Xn.canonical.z===Hi?Math.ceil(1<<I.transform.maxZoom-Xn.canonical.z):1;xa=t.clamp(t.nextPowerOfTwo(gr.maxLineLength/t.EXTENT*1024*ha),256,De.maxTextureSize)}Vi.gradient=t.renderColorRamp({expression:B.gradientExpression(),evaluationKey:"lineProgress",resolution:xa,image:Vi.gradient||void 0,clips:gr.lineClipsArray}),Vi.texture?Vi.texture.update(Vi.gradient):Vi.texture=new t.Texture(De,Vi.gradient,Ae.RGBA),Vi.version=B.gradientVersion,Ma=Vi.texture}De.activeTexture.set(Ae.TEXTURE0),Ma.bind(B.stepInterpolant?Ae.NEAREST:Ae.LINEAR,Ae.CLAMP_TO_EDGE)}Vr.draw(De,Ae.TRIANGLES,st,I.stencilModeForClipping(Xn),Ct,Te.disabled,Na,B.id,gr.layoutVertexBuffer,gr.indexBuffer,gr.segments,B.paint,I.transform.zoom,Mr,gr.layoutVertexBuffer2),Ue=!1}}}}},fill:function(I,w,B,D){var W=B.paint.get("fill-color"),q=B.paint.get("fill-opacity");if(q.constantOr(1)!==0){var st=I.colorModeForRenderPass(),Ct=B.paint.get("fill-pattern"),wt=I.opaquePassEnabledForLayer()&&!Ct.constantOr(1)&&W.constantOr(t.Color.transparent).a===1&&q.constantOr(0)===1?"opaque":"translucent";if(I.renderPass===wt){var Ut=I.depthModeForSublayer(1,I.renderPass==="opaque"?pe.ReadWrite:pe.ReadOnly);sl(I,w,B,D,Ut,st,!1)}if(I.renderPass==="translucent"&&B.paint.get("fill-antialias")){var Zt=I.depthModeForSublayer(B.getPaintProperty("fill-outline-color")?2:0,pe.ReadOnly);sl(I,w,B,D,Zt,st,!0)}}},"fill-extrusion":function(I,w,B,D){var W=B.paint.get("fill-extrusion-opacity");if(W!==0&&I.renderPass==="translucent"){var q=new pe(I.context.gl.LEQUAL,pe.ReadWrite,I.depthRangeFor3D);if(W!==1||B.paint.get("fill-extrusion-pattern").constantOr(1))Eu(I,w,B,D,q,Vt.disabled,re.disabled),Eu(I,w,B,D,q,I.stencilModeFor3D(),I.colorModeForRenderPass());else{var st=I.colorModeForRenderPass();Eu(I,w,B,D,q,Vt.disabled,st)}}},hillshade:function(I,w,B,D){if(I.renderPass==="offscreen"||I.renderPass==="translucent"){for(var W=I.context,q=I.depthModeForSublayer(0,pe.ReadOnly),st=I.colorModeForRenderPass(),Ct=I.renderPass==="translucent"?I.stencilConfigForOverlap(D):[{},D],wt=Ct[0],Ut=0,Zt=Ct[1];Ut<Zt.length;Ut+=1){var qt=Zt[Ut],he=w.getTile(qt);he.needsHillshadePrepare&&I.renderPass==="offscreen"?Ju(I,he,B,q,Vt.disabled,st):I.renderPass==="translucent"&&uu(I,he,B,q,wt[qt.overscaledZ],st)}W.viewport.set([0,0,I.width,I.height])}},raster:function(I,w,B,D){if(I.renderPass==="translucent"&&B.paint.get("raster-opacity")!==0&&D.length)for(var W=I.context,q=W.gl,st=w.getSource(),Ct=I.useProgram("raster"),wt=I.colorModeForRenderPass(),Ut=st instanceof rt?[{},D]:I.stencilConfigForOverlap(D),Zt=Ut[0],qt=Ut[1],he=qt[qt.length-1].overscaledZ,me=!I.options.moving,De=0,Ae=qt;De<Ae.length;De+=1){var Ue=Ae[De],qe=I.depthModeForSublayer(Ue.overscaledZ-he,B.paint.get("raster-opacity")===1?pe.ReadWrite:pe.ReadOnly,q.LESS),rn=w.getTile(Ue),Xn=I.transform.calculatePosMatrix(Ue.toUnwrapped(),me);rn.registerFadeDuration(B.paint.get("raster-fade-duration"));var Un=w.findLoadedParent(Ue,0),gr=Ls(rn,Un,w,B,I.transform),Mr=void 0,Qr=void 0,Vr=B.paint.get("raster-resampling")==="nearest"?q.NEAREST:q.LINEAR;W.activeTexture.set(q.TEXTURE0),rn.texture.bind(Vr,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),W.activeTexture.set(q.TEXTURE1),Un?(Un.texture.bind(Vr,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),Mr=Math.pow(2,Un.tileID.overscaledZ-rn.tileID.overscaledZ),Qr=[rn.tileID.canonical.x*Mr%1,rn.tileID.canonical.y*Mr%1]):rn.texture.bind(Vr,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST);var _i=Tl(Xn,Qr||[0,0],Mr||1,gr,B);st instanceof rt?Ct.draw(W,q.TRIANGLES,qe,Vt.disabled,wt,Te.disabled,_i,B.id,st.boundsBuffer,I.quadTriangleIndexBuffer,st.boundsSegments):Ct.draw(W,q.TRIANGLES,qe,Zt[Ue.overscaledZ],wt,Te.disabled,_i,B.id,I.rasterBoundsBuffer,I.quadTriangleIndexBuffer,I.rasterBoundsSegments)}},background:function(I,w,B){var D=B.paint.get("background-color"),W=B.paint.get("background-opacity");if(W!==0){var q=I.context,st=q.gl,Ct=I.transform,wt=Ct.tileSize,Ut=B.paint.get("background-pattern");if(!I.isPatternMissing(Ut)){var Zt=!Ut&&D.a===1&&W===1&&I.opaquePassEnabledForLayer()?"opaque":"translucent";if(I.renderPass===Zt){var qt=Vt.disabled,he=I.depthModeForSublayer(0,Zt==="opaque"?pe.ReadWrite:pe.ReadOnly),me=I.colorModeForRenderPass(),De=I.useProgram(Ut?"backgroundPattern":"background"),Ae=Ct.coveringTiles({tileSize:wt});Ut&&(q.activeTexture.set(st.TEXTURE0),I.imageManager.bind(I.context));for(var Ue=B.getCrossfadeParameters(),qe=0,rn=Ae;qe<rn.length;qe+=1){var Xn=rn[qe],Un=I.transform.calculatePosMatrix(Xn.toUnwrapped()),gr=Ut?bu(Un,W,I,Ut,{tileID:Xn,tileSize:wt},Ue):xu(Un,W,D);De.draw(q,st.TRIANGLES,he,qt,me,Te.disabled,gr,B.id,I.tileExtentBuffer,I.quadTriangleIndexBuffer,I.tileExtentSegments)}}}}},debug:function(I,w,B){for(var D=0;D<B.length;D++)Ul(I,w,B[D])},custom:function(I,w,B){var D=I.context,W=B.implementation;if(I.renderPass==="offscreen"){var q=W.prerender;q&&(I.setCustomLayerDefaults(),D.setColorMode(I.colorModeForRenderPass()),q.call(W,D.gl,I.transform.customLayerMatrix()),D.setDirty(),I.setBaseState())}else if(I.renderPass==="translucent"){I.setCustomLayerDefaults(),D.setColorMode(I.colorModeForRenderPass()),D.setStencilMode(Vt.disabled);var st=W.renderingMode==="3d"?new pe(I.context.gl.LEQUAL,pe.ReadWrite,I.depthRangeFor3D):I.depthModeForSublayer(0,pe.ReadOnly);D.setDepthMode(st),W.render(D.gl,I.transform.customLayerMatrix()),D.setDirty(),I.setBaseState(),D.bindFramebuffer.set(null)}}},ho=function(I,w){this.context=new ue(I),this.transform=w,this._tileTextures={},this.setup(),this.numSublayers=xe.maxUnderzooming+xe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ja,this.gpuTimers={}};ho.prototype.resize=function(j,I){if(this.width=j*t.browser.devicePixelRatio,this.height=I*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var w=0,B=this.style._order;w<B.length;w+=1)this.style._layers[B[w]].resize()},ho.prototype.setup=function(){var j=this.context,I=new t.StructArrayLayout2i4;I.emplaceBack(0,0),I.emplaceBack(t.EXTENT,0),I.emplaceBack(0,t.EXTENT),I.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=j.createVertexBuffer(I,Za.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var w=new t.StructArrayLayout2i4;w.emplaceBack(0,0),w.emplaceBack(t.EXTENT,0),w.emplaceBack(0,t.EXTENT),w.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=j.createVertexBuffer(w,Za.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var B=new t.StructArrayLayout4i8;B.emplaceBack(0,0,0,0),B.emplaceBack(t.EXTENT,0,t.EXTENT,0),B.emplaceBack(0,t.EXTENT,0,t.EXTENT),B.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=j.createVertexBuffer(B,J.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var D=new t.StructArrayLayout2i4;D.emplaceBack(0,0),D.emplaceBack(1,0),D.emplaceBack(0,1),D.emplaceBack(1,1),this.viewportBuffer=j.createVertexBuffer(D,Za.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var W=new t.StructArrayLayout1ui2;W.emplaceBack(0),W.emplaceBack(1),W.emplaceBack(3),W.emplaceBack(2),W.emplaceBack(0),this.tileBorderIndexBuffer=j.createIndexBuffer(W);var q=new t.StructArrayLayout3ui6;q.emplaceBack(0,1,2),q.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=j.createIndexBuffer(q),this.emptyTexture=new t.Texture(j,{width:1,height:1,data:new Uint8Array([0,0,0,0])},j.gl.RGBA);var st=this.context.gl;this.stencilClearMode=new Vt({func:st.ALWAYS,mask:0},0,255,st.ZERO,st.ZERO,st.ZERO)},ho.prototype.clearStencil=function(){var j=this.context,I=j.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var w=t.create();t.ortho(w,0,this.width,this.height,0,0,1),t.scale(w,w,[I.drawingBufferWidth,I.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(j,I.TRIANGLES,pe.disabled,this.stencilClearMode,re.disabled,Te.disabled,Fo(w),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ho.prototype._renderTileClippingMasks=function(j,I){if(this.currentStencilSource!==j.source&&j.isTileClipped()&&I&&I.length){this.currentStencilSource=j.source;var w=this.context,B=w.gl;this.nextStencilID+I.length>256&&this.clearStencil(),w.setColorMode(re.disabled),w.setDepthMode(pe.disabled);var D=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var W=0,q=I;W<q.length;W+=1){var st=q[W],Ct=this._tileClippingMaskIDs[st.key]=this.nextStencilID++;D.draw(w,B.TRIANGLES,pe.disabled,new Vt({func:B.ALWAYS,mask:0},Ct,255,B.KEEP,B.KEEP,B.REPLACE),re.disabled,Te.disabled,Fo(st.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ho.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var j=this.nextStencilID++,I=this.context.gl;return new Vt({func:I.NOTEQUAL,mask:255},j,255,I.KEEP,I.KEEP,I.REPLACE)},ho.prototype.stencilModeForClipping=function(j){var I=this.context.gl;return new Vt({func:I.EQUAL,mask:255},this._tileClippingMaskIDs[j.key],0,I.KEEP,I.KEEP,I.REPLACE)},ho.prototype.stencilConfigForOverlap=function(j){var I,w=this.context.gl,B=j.sort(function(Ct,wt){return wt.overscaledZ-Ct.overscaledZ}),D=B[B.length-1].overscaledZ,W=B[0].overscaledZ-D+1;if(W>1){this.currentStencilSource=void 0,this.nextStencilID+W>256&&this.clearStencil();for(var q={},st=0;st<W;st++)q[st+D]=new Vt({func:w.GEQUAL,mask:255},st+this.nextStencilID,255,w.KEEP,w.KEEP,w.REPLACE);return this.nextStencilID+=W,[q,B]}return[(I={},I[D]=Vt.disabled,I),B]},ho.prototype.colorModeForRenderPass=function(){var j=this.context.gl;return this._showOverdrawInspector?new re([j.CONSTANT_COLOR,j.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?re.unblended:re.alphaBlended},ho.prototype.depthModeForSublayer=function(j,I,w){if(!this.opaquePassEnabledForLayer())return pe.disabled;var B=1-((1+this.currentLayer)*this.numSublayers+j)*this.depthEpsilon;return new pe(w||this.context.gl.LEQUAL,I,[B,B])},ho.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ho.prototype.render=function(j,I){var w=this;this.style=j,this.options=I,this.lineAtlas=j.lineAtlas,this.imageManager=j.imageManager,this.glyphManager=j.glyphManager,this.symbolFadeChange=j.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var B=this.style._order,D=this.style.sourceCaches;for(var W in D){var q=D[W];q.used&&q.prepare(this.context)}var st,Ct,wt={},Ut={},Zt={};for(var qt in D){var he=D[qt];wt[qt]=he.getVisibleCoordinates(),Ut[qt]=wt[qt].slice().reverse(),Zt[qt]=he.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var me=0;me<B.length;me++)if(this.style._layers[B[me]].is3D()){this.opaquePassCutoff=me;break}this.renderPass="offscreen";for(var De=0,Ae=B;De<Ae.length;De+=1){var Ue=this.style._layers[Ae[De]];if(Ue.hasOffscreenPass()&&!Ue.isHidden(this.transform.zoom)){var qe=Ut[Ue.source];(Ue.type==="custom"||qe.length)&&this.renderLayer(this,D[Ue.source],Ue,qe)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:I.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=I.showOverdrawInspector,this.depthRangeFor3D=[0,1-(j._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=B.length-1;this.currentLayer>=0;this.currentLayer--){var rn=this.style._layers[B[this.currentLayer]],Xn=D[rn.source],Un=wt[rn.source];this._renderTileClippingMasks(rn,Un),this.renderLayer(this,Xn,rn,Un)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<B.length;this.currentLayer++){var gr=this.style._layers[B[this.currentLayer]],Mr=D[gr.source],Qr=(gr.type==="symbol"?Zt:Ut)[gr.source];this._renderTileClippingMasks(gr,wt[gr.source]),this.renderLayer(this,Mr,gr,Qr)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach(function(Vr){Vr.source&&!Vr.isHidden(w.transform.zoom)&&(Vr.source!==(Ct&&Ct.id)&&(Ct=w.style.sourceCaches[Vr.source]),(!st||st.getSource().maxzoom<Ct.getSource().maxzoom)&&(st=Ct))}),st&&wo.debug(this,st,st.getVisibleCoordinates())),this.options.showPadding&&function(Vr){var _i=Vr.transform.padding;dc(Vr,Vr.transform.height-(_i.top||0),3,El),dc(Vr,_i.bottom||0,3,sc),$u(Vr,_i.left||0,3,Cl),$u(Vr,Vr.transform.width-(_i.right||0),3,zl);var Di=Vr.transform.centerPoint;(function(Wi,Xi,La,Na){Ol(Wi,Xi-1,La-10,2,20,Na),Ol(Wi,Xi-10,La-1,20,2,Na)})(Vr,Di.x,Vr.transform.height-Di.y,Yl)}(this),this.context.setDefault()},ho.prototype.renderLayer=function(j,I,w,B){w.isHidden(this.transform.zoom)||(w.type==="background"||w.type==="custom"||B.length)&&(this.id=w.id,this.gpuTimingStart(w),wo[w.type](j,I,w,B,this.style.placement.variableOffsets),this.gpuTimingEnd())},ho.prototype.gpuTimingStart=function(j){if(this.options.gpuTiming){var I=this.context.extTimerQuery,w=this.gpuTimers[j.id];w||(w=this.gpuTimers[j.id]={calls:0,cpuTime:0,query:I.createQueryEXT()}),w.calls++,I.beginQueryEXT(I.TIME_ELAPSED_EXT,w.query)}},ho.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var j=this.context.extTimerQuery;j.endQueryEXT(j.TIME_ELAPSED_EXT)}},ho.prototype.collectGpuTimers=function(){var j=this.gpuTimers;return this.gpuTimers={},j},ho.prototype.queryGpuTimers=function(j){var I={};for(var w in j){var B=j[w],D=this.context.extTimerQuery,W=D.getQueryObjectEXT(B.query,D.QUERY_RESULT_EXT)/1e6;D.deleteQueryEXT(B.query),I[w]=W}return I},ho.prototype.translatePosMatrix=function(j,I,w,B,D){if(!w[0]&&!w[1])return j;var W=D?B==="map"?this.transform.angle:0:B==="viewport"?-this.transform.angle:0;if(W){var q=Math.sin(W),st=Math.cos(W);w=[w[0]*st-w[1]*q,w[0]*q+w[1]*st]}var Ct=[D?w[0]:Ra(I,w[0],this.transform.zoom),D?w[1]:Ra(I,w[1],this.transform.zoom),0],wt=new Float32Array(16);return t.translate(wt,j,Ct),wt},ho.prototype.saveTileTexture=function(j){var I=this._tileTextures[j.size[0]];I?I.push(j):this._tileTextures[j.size[0]]=[j]},ho.prototype.getTileTexture=function(j){var I=this._tileTextures[j];return I&&I.length>0?I.pop():null},ho.prototype.isPatternMissing=function(j){if(!j)return!1;if(!j.from||!j.to)return!0;var I=this.imageManager.getPattern(j.from.toString()),w=this.imageManager.getPattern(j.to.toString());return!I||!w},ho.prototype.useProgram=function(j,I){this.cache=this.cache||{};var w=""+j+(I?I.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[w]||(this.cache[w]=new al(this.context,j,eu[j],I,Js[j],this._showOverdrawInspector)),this.cache[w]},ho.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ho.prototype.setBaseState=function(){var j=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(j.FUNC_ADD)},ho.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},ho.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Sl=function(I,w){this.points=I,this.planes=w};Sl.fromInvProjectionMatrix=function(j,I,w){var B=Math.pow(2,w),D=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(q){return t.transformMat4([],q,j)}).map(function(q){return t.scale$1([],q,1/q[3]/I*B)}),W=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(q){var st=t.sub([],D[q[0]],D[q[1]]),Ct=t.sub([],D[q[2]],D[q[1]]),wt=t.normalize([],t.cross([],st,Ct)),Ut=-t.dot(wt,D[q[1]]);return wt.concat(Ut)});return new Sl(D,W)};var ul=function(I,w){this.min=I,this.max=w,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};ul.prototype.quadrant=function(j){for(var I=[j%2==0,j<2],w=t.clone$2(this.min),B=t.clone$2(this.max),D=0;D<I.length;D++)w[D]=I[D]?this.min[D]:this.center[D],B[D]=I[D]?this.center[D]:this.max[D];return B[2]=this.max[2],new ul(w,B)},ul.prototype.distanceX=function(j){return Math.max(Math.min(this.max[0],j[0]),this.min[0])-j[0]},ul.prototype.distanceY=function(j){return Math.max(Math.min(this.max[1],j[1]),this.min[1])-j[1]},ul.prototype.intersects=function(j){for(var I=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],w=!0,B=0;B<j.planes.length;B++){for(var D=j.planes[B],W=0,q=0;q<I.length;q++)W+=t.dot$1(D,I[q])>=0;if(W===0)return 0;W!==I.length&&(w=!1)}if(w)return 2;for(var st=0;st<3;st++){for(var Ct=Number.MAX_VALUE,wt=-Number.MAX_VALUE,Ut=0;Ut<j.points.length;Ut++){var Zt=j.points[Ut][st]-this.min[st];Ct=Math.min(Ct,Zt),wt=Math.max(wt,Zt)}if(wt<0||Ct>this.max[st]-this.min[st])return 0}return 1};var Ys=function(I,w,B,D){if(I===void 0&&(I=0),w===void 0&&(w=0),B===void 0&&(B=0),D===void 0&&(D=0),isNaN(I)||I<0||isNaN(w)||w<0||isNaN(B)||B<0||isNaN(D)||D<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=I,this.bottom=w,this.left=B,this.right=D};Ys.prototype.interpolate=function(j,I,w){return I.top!=null&&j.top!=null&&(this.top=t.number(j.top,I.top,w)),I.bottom!=null&&j.bottom!=null&&(this.bottom=t.number(j.bottom,I.bottom,w)),I.left!=null&&j.left!=null&&(this.left=t.number(j.left,I.left,w)),I.right!=null&&j.right!=null&&(this.right=t.number(j.right,I.right,w)),this},Ys.prototype.getCenter=function(j,I){var w=t.clamp((this.left+j-this.right)/2,0,j),B=t.clamp((this.top+I-this.bottom)/2,0,I);return new t.Point(w,B)},Ys.prototype.equals=function(j){return this.top===j.top&&this.bottom===j.bottom&&this.left===j.left&&this.right===j.right},Ys.prototype.clone=function(){return new Ys(this.top,this.bottom,this.left,this.right)},Ys.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Da=function(I,w,B,D,W){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=W===void 0||W,this._minZoom=I||0,this._maxZoom=w||22,this._minPitch=B==null?0:B,this._maxPitch=D==null?60:D,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ys,this._posMatrixCache={},this._alignedPosMatrixCache={}},mo={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Da.prototype.clone=function(){var j=new Da(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return j.tileSize=this.tileSize,j.latRange=this.latRange,j.width=this.width,j.height=this.height,j._center=this._center,j.zoom=this.zoom,j.angle=this.angle,j._fov=this._fov,j._pitch=this._pitch,j._unmodified=this._unmodified,j._edgeInsets=this._edgeInsets.clone(),j._calcMatrices(),j},mo.minZoom.get=function(){return this._minZoom},mo.minZoom.set=function(j){this._minZoom!==j&&(this._minZoom=j,this.zoom=Math.max(this.zoom,j))},mo.maxZoom.get=function(){return this._maxZoom},mo.maxZoom.set=function(j){this._maxZoom!==j&&(this._maxZoom=j,this.zoom=Math.min(this.zoom,j))},mo.minPitch.get=function(){return this._minPitch},mo.minPitch.set=function(j){this._minPitch!==j&&(this._minPitch=j,this.pitch=Math.max(this.pitch,j))},mo.maxPitch.get=function(){return this._maxPitch},mo.maxPitch.set=function(j){this._maxPitch!==j&&(this._maxPitch=j,this.pitch=Math.min(this.pitch,j))},mo.renderWorldCopies.get=function(){return this._renderWorldCopies},mo.renderWorldCopies.set=function(j){j===void 0?j=!0:j===null&&(j=!1),this._renderWorldCopies=j},mo.worldSize.get=function(){return this.tileSize*this.scale},mo.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},mo.size.get=function(){return new t.Point(this.width,this.height)},mo.bearing.get=function(){return-this.angle/Math.PI*180},mo.bearing.set=function(j){var I=-t.wrap(j,-180,180)*Math.PI/180;this.angle!==I&&(this._unmodified=!1,this.angle=I,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},mo.pitch.get=function(){return this._pitch/Math.PI*180},mo.pitch.set=function(j){var I=t.clamp(j,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==I&&(this._unmodified=!1,this._pitch=I,this._calcMatrices())},mo.fov.get=function(){return this._fov/Math.PI*180},mo.fov.set=function(j){j=Math.max(.01,Math.min(60,j)),this._fov!==j&&(this._unmodified=!1,this._fov=j/180*Math.PI,this._calcMatrices())},mo.zoom.get=function(){return this._zoom},mo.zoom.set=function(j){var I=Math.min(Math.max(j,this.minZoom),this.maxZoom);this._zoom!==I&&(this._unmodified=!1,this._zoom=I,this.scale=this.zoomScale(I),this.tileZoom=Math.floor(I),this.zoomFraction=I-this.tileZoom,this._constrain(),this._calcMatrices())},mo.center.get=function(){return this._center},mo.center.set=function(j){j.lat===this._center.lat&&j.lng===this._center.lng||(this._unmodified=!1,this._center=j,this._constrain(),this._calcMatrices())},mo.padding.get=function(){return this._edgeInsets.toJSON()},mo.padding.set=function(j){this._edgeInsets.equals(j)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,j,1),this._calcMatrices())},mo.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Da.prototype.isPaddingEqual=function(j){return this._edgeInsets.equals(j)},Da.prototype.interpolatePadding=function(j,I,w){this._unmodified=!1,this._edgeInsets.interpolate(j,I,w),this._constrain(),this._calcMatrices()},Da.prototype.coveringZoomLevel=function(j){var I=(j.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/j.tileSize));return Math.max(0,I)},Da.prototype.getVisibleUnwrappedCoordinates=function(j){var I=[new t.UnwrappedTileID(0,j)];if(this._renderWorldCopies)for(var w=this.pointCoordinate(new t.Point(0,0)),B=this.pointCoordinate(new t.Point(this.width,0)),D=this.pointCoordinate(new t.Point(this.width,this.height)),W=this.pointCoordinate(new t.Point(0,this.height)),q=Math.floor(Math.min(w.x,B.x,D.x,W.x)),st=Math.floor(Math.max(w.x,B.x,D.x,W.x)),Ct=q-1;Ct<=st+1;Ct++)Ct!==0&&I.push(new t.UnwrappedTileID(Ct,j));return I},Da.prototype.coveringTiles=function(j){var I=this.coveringZoomLevel(j),w=I;if(j.minzoom!==void 0&&I<j.minzoom)return[];j.maxzoom!==void 0&&I>j.maxzoom&&(I=j.maxzoom);var B=t.MercatorCoordinate.fromLngLat(this.center),D=Math.pow(2,I),W=[D*B.x,D*B.y,0],q=Sl.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,I),st=j.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(st=I);var Ct=function(_i){return{aabb:new ul([_i*D,0,0],[(_i+1)*D,D,0]),zoom:0,x:0,y:0,wrap:_i,fullyVisible:!1}},wt=[],Ut=[],Zt=I,qt=j.reparseOverscaled?w:I;if(this._renderWorldCopies)for(var he=1;he<=3;he++)wt.push(Ct(-he)),wt.push(Ct(he));for(wt.push(Ct(0));wt.length>0;){var me=wt.pop(),De=me.x,Ae=me.y,Ue=me.fullyVisible;if(!Ue){var qe=me.aabb.intersects(q);if(qe===0)continue;Ue=qe===2}var rn=me.aabb.distanceX(W),Xn=me.aabb.distanceY(W),Un=Math.max(Math.abs(rn),Math.abs(Xn));if(me.zoom===Zt||Un>3+(1<<Zt-me.zoom)-2&&me.zoom>=st)Ut.push({tileID:new t.OverscaledTileID(me.zoom===Zt?qt:me.zoom,me.wrap,me.zoom,De,Ae),distanceSq:t.sqrLen([W[0]-.5-De,W[1]-.5-Ae])});else for(var gr=0;gr<4;gr++){var Mr=(De<<1)+gr%2,Qr=(Ae<<1)+(gr>>1);wt.push({aabb:me.aabb.quadrant(gr),zoom:me.zoom+1,x:Mr,y:Qr,wrap:me.wrap,fullyVisible:Ue})}}return Ut.sort(function(Vr,_i){return Vr.distanceSq-_i.distanceSq}).map(function(Vr){return Vr.tileID})},Da.prototype.resize=function(j,I){this.width=j,this.height=I,this.pixelsToGLUnits=[2/j,-2/I],this._constrain(),this._calcMatrices()},mo.unmodified.get=function(){return this._unmodified},Da.prototype.zoomScale=function(j){return Math.pow(2,j)},Da.prototype.scaleZoom=function(j){return Math.log(j)/Math.LN2},Da.prototype.project=function(j){var I=t.clamp(j.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(j.lng)*this.worldSize,t.mercatorYfromLat(I)*this.worldSize)},Da.prototype.unproject=function(j){return new t.MercatorCoordinate(j.x/this.worldSize,j.y/this.worldSize).toLngLat()},mo.point.get=function(){return this.project(this.center)},Da.prototype.setLocationAtPoint=function(j,I){var w=this.pointCoordinate(I),B=this.pointCoordinate(this.centerPoint),D=this.locationCoordinate(j),W=new t.MercatorCoordinate(D.x-(w.x-B.x),D.y-(w.y-B.y));this.center=this.coordinateLocation(W),this._renderWorldCopies&&(this.center=this.center.wrap())},Da.prototype.locationPoint=function(j){return this.coordinatePoint(this.locationCoordinate(j))},Da.prototype.pointLocation=function(j){return this.coordinateLocation(this.pointCoordinate(j))},Da.prototype.locationCoordinate=function(j){return t.MercatorCoordinate.fromLngLat(j)},Da.prototype.coordinateLocation=function(j){return j.toLngLat()},Da.prototype.pointCoordinate=function(j){var I=[j.x,j.y,0,1],w=[j.x,j.y,1,1];t.transformMat4(I,I,this.pixelMatrixInverse),t.transformMat4(w,w,this.pixelMatrixInverse);var B=I[3],D=w[3],W=I[1]/B,q=w[1]/D,st=I[2]/B,Ct=w[2]/D,wt=st===Ct?0:(0-st)/(Ct-st);return new t.MercatorCoordinate(t.number(I[0]/B,w[0]/D,wt)/this.worldSize,t.number(W,q,wt)/this.worldSize)},Da.prototype.coordinatePoint=function(j){var I=[j.x*this.worldSize,j.y*this.worldSize,0,1];return t.transformMat4(I,I,this.pixelMatrix),new t.Point(I[0]/I[3],I[1]/I[3])},Da.prototype.getBounds=function(){return new t.LngLatBounds().extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Da.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Da.prototype.setMaxBounds=function(j){j?(this.lngRange=[j.getWest(),j.getEast()],this.latRange=[j.getSouth(),j.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Da.prototype.calculatePosMatrix=function(j,I){I===void 0&&(I=!1);var w=j.key,B=I?this._alignedPosMatrixCache:this._posMatrixCache;if(B[w])return B[w];var D=j.canonical,W=this.worldSize/this.zoomScale(D.z),q=D.x+Math.pow(2,D.z)*j.wrap,st=t.identity(new Float64Array(16));return t.translate(st,st,[q*W,D.y*W,0]),t.scale(st,st,[W/t.EXTENT,W/t.EXTENT,1]),t.multiply(st,I?this.alignedProjMatrix:this.projMatrix,st),B[w]=new Float32Array(st),B[w]},Da.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Da.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var j,I,w,B,D=-90,W=90,q=-180,st=180,Ct=this.size,wt=this._unmodified;if(this.latRange){var Ut=this.latRange;D=t.mercatorYfromLat(Ut[1])*this.worldSize,j=(W=t.mercatorYfromLat(Ut[0])*this.worldSize)-D<Ct.y?Ct.y/(W-D):0}if(this.lngRange){var Zt=this.lngRange;q=t.mercatorXfromLng(Zt[0])*this.worldSize,I=(st=t.mercatorXfromLng(Zt[1])*this.worldSize)-q<Ct.x?Ct.x/(st-q):0}var qt=this.point,he=Math.max(I||0,j||0);if(he)return this.center=this.unproject(new t.Point(I?(st+q)/2:qt.x,j?(W+D)/2:qt.y)),this.zoom+=this.scaleZoom(he),this._unmodified=wt,void(this._constraining=!1);if(this.latRange){var me=qt.y,De=Ct.y/2;me-De<D&&(B=D+De),me+De>W&&(B=W-De)}if(this.lngRange){var Ae=qt.x,Ue=Ct.x/2;Ae-Ue<q&&(w=q+Ue),Ae+Ue>st&&(w=st-Ue)}w===void 0&&B===void 0||(this.center=this.unproject(new t.Point(w!==void 0?w:qt.x,B!==void 0?B:qt.y))),this._unmodified=wt,this._constraining=!1}},Da.prototype._calcMatrices=function(){if(this.height){var j=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var I=Math.PI/2+this._pitch,w=this._fov*(.5+j.y/this.height),B=Math.sin(w)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-I-w,.01,Math.PI-.01)),D=this.point,W=D.x,q=D.y,st=1.01*(Math.cos(Math.PI/2-this._pitch)*B+this.cameraToCenterDistance),Ct=this.height/50,wt=new Float64Array(16);t.perspective(wt,this._fov,this.width/this.height,Ct,st),wt[8]=2*-j.x/this.width,wt[9]=2*j.y/this.height,t.scale(wt,wt,[1,-1,1]),t.translate(wt,wt,[0,0,-this.cameraToCenterDistance]),t.rotateX(wt,wt,this._pitch),t.rotateZ(wt,wt,this.angle),t.translate(wt,wt,[-W,-q,0]),this.mercatorMatrix=t.scale([],wt,[this.worldSize,this.worldSize,this.worldSize]),t.scale(wt,wt,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=wt,this.invProjMatrix=t.invert([],this.projMatrix);var Ut=this.width%2/2,Zt=this.height%2/2,qt=Math.cos(this.angle),he=Math.sin(this.angle),me=W-Math.round(W)+qt*Ut+he*Zt,De=q-Math.round(q)+qt*Zt+he*Ut,Ae=new Float64Array(wt);if(t.translate(Ae,Ae,[me>.5?me-1:me,De>.5?De-1:De,0]),this.alignedProjMatrix=Ae,wt=t.create(),t.scale(wt,wt,[this.width/2,-this.height/2,1]),t.translate(wt,wt,[1,-1,0]),this.labelPlaneMatrix=wt,wt=t.create(),t.scale(wt,wt,[1,-1,1]),t.translate(wt,wt,[-1,-1,0]),t.scale(wt,wt,[2/this.width,2/this.height,1]),this.glCoordMatrix=wt,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(wt=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=wt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Da.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var j=this.pointCoordinate(new t.Point(0,0)),I=[j.x*this.worldSize,j.y*this.worldSize,0,1];return t.transformMat4(I,I,this.pixelMatrix)[3]/this.cameraToCenterDistance},Da.prototype.getCameraPoint=function(){var j=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,j))},Da.prototype.getCameraQueryGeometry=function(j){var I=this.getCameraPoint();if(j.length===1)return[j[0],I];for(var w=I.x,B=I.y,D=I.x,W=I.y,q=0,st=j;q<st.length;q+=1){var Ct=st[q];w=Math.min(w,Ct.x),B=Math.min(B,Ct.y),D=Math.max(D,Ct.x),W=Math.max(W,Ct.y)}return[new t.Point(w,B),new t.Point(D,B),new t.Point(D,W),new t.Point(w,W),new t.Point(w,B)]},Object.defineProperties(Da.prototype,mo);var Gs=function(I){var w,B,D,W;this._hashName=I&&encodeURIComponent(I),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(w=this._updateHashUnthrottled.bind(this),B=!1,D=null,W=function(){D=null,B&&(w(),D=setTimeout(W,300),B=!1)},function(){return B=!0,D||W(),D})};Gs.prototype.addTo=function(j){return this._map=j,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Gs.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Gs.prototype.getHashString=function(j){var I=this._map.getCenter(),w=Math.round(100*this._map.getZoom())/100,B=Math.ceil((w*Math.LN2+Math.log(512/360/.5))/Math.LN10),D=Math.pow(10,B),W=Math.round(I.lng*D)/D,q=Math.round(I.lat*D)/D,st=this._map.getBearing(),Ct=this._map.getPitch(),wt="";if(wt+=j?"/"+W+"/"+q+"/"+w:w+"/"+q+"/"+W,(st||Ct)&&(wt+="/"+Math.round(10*st)/10),Ct&&(wt+="/"+Math.round(Ct)),this._hashName){var Ut=this._hashName,Zt=!1,qt=t.window.location.hash.slice(1).split("&").map(function(he){var me=he.split("=")[0];return me===Ut?(Zt=!0,me+"="+wt):he}).filter(function(he){return he});return Zt||qt.push(Ut+"="+wt),"#"+qt.join("&")}return"#"+wt},Gs.prototype._getCurrentHash=function(){var j,I=this,w=t.window.location.hash.replace("#","");return this._hashName?(w.split("&").map(function(B){return B.split("=")}).forEach(function(B){B[0]===I._hashName&&(j=B)}),(j&&j[1]||"").split("/")):w.split("/")},Gs.prototype._onHashChange=function(){var j=this._getCurrentHash();if(j.length>=3&&!j.some(function(w){return isNaN(w)})){var I=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(j[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+j[2],+j[1]],zoom:+j[0],bearing:I,pitch:+(j[4]||0)}),!0}return!1},Gs.prototype._updateHashUnthrottled=function(){var j=t.window.location.href.replace(/(#.+)?$/,this.getHashString());try{t.window.history.replaceState(t.window.history.state,null,j)}catch(I){}};var wl={linearity:.3,easing:t.bezier(0,0,.3,1)},ll=t.extend({deceleration:2500,maxSpeed:1400},wl),Qu=t.extend({deceleration:20,maxSpeed:1400},wl),xc=t.extend({deceleration:1e3,maxSpeed:360},wl),Zl=t.extend({deceleration:1e3,maxSpeed:90},wl),qu=function(I){this._map=I,this.clear()};function ru(j,I){(!j.duration||j.duration<I.duration)&&(j.duration=I.duration,j.easing=I.easing)}function Zs(j,I,w){var B=w.maxSpeed,D=w.linearity,W=w.deceleration,q=t.clamp(j*D/(I/1e3),-B,B),st=Math.abs(q)/(W*D);return{easing:w.easing,duration:1e3*st,amount:q*(st/2)}}qu.prototype.clear=function(){this._inertiaBuffer=[]},qu.prototype.record=function(j){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:j})},qu.prototype._drainInertiaBuffer=function(){for(var j=this._inertiaBuffer,I=t.browser.now();j.length>0&&I-j[0].time>160;)j.shift()},qu.prototype._onMoveEnd=function(j){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var I={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},w=0,B=this._inertiaBuffer;w<B.length;w+=1){var D=B[w].settings;I.zoom+=D.zoomDelta||0,I.bearing+=D.bearingDelta||0,I.pitch+=D.pitchDelta||0,D.panDelta&&I.pan._add(D.panDelta),D.around&&(I.around=D.around),D.pinchAround&&(I.pinchAround=D.pinchAround)}var W=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,q={};if(I.pan.mag()){var st=Zs(I.pan.mag(),W,t.extend({},ll,j||{}));q.offset=I.pan.mult(st.amount/I.pan.mag()),q.center=this._map.transform.center,ru(q,st)}if(I.zoom){var Ct=Zs(I.zoom,W,Qu);q.zoom=this._map.transform.zoom+Ct.amount,ru(q,Ct)}if(I.bearing){var wt=Zs(I.bearing,W,xc);q.bearing=this._map.transform.bearing+t.clamp(wt.amount,-179,179),ru(q,wt)}if(I.pitch){var Ut=Zs(I.pitch,W,Zl);q.pitch=this._map.transform.pitch+Ut.amount,ru(q,Ut)}if(q.zoom||q.bearing){var Zt=I.pinchAround===void 0?I.around:I.pinchAround;q.around=Zt?this._map.unproject(Zt):this._map.getCenter()}return this.clear(),t.extend(q,{noMoveStart:!0})}};var es=function(j){function I(B,D,W,q){q===void 0&&(q={});var st=s.mousePos(D.getCanvasContainer(),W),Ct=D.unproject(st);j.call(this,B,t.extend({point:st,lngLat:Ct,originalEvent:W},q)),this._defaultPrevented=!1,this.target=D}j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I;var w={defaultPrevented:{configurable:!0}};return I.prototype.preventDefault=function(){this._defaultPrevented=!0},w.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(I.prototype,w),I}(t.Event),iu=function(j){function I(B,D,W){var q=B==="touchend"?W.changedTouches:W.touches,st=s.touchPos(D.getCanvasContainer(),q),Ct=st.map(function(Zt){return D.unproject(Zt)}),wt=st.reduce(function(Zt,qt,he,me){return Zt.add(qt.div(me.length))},new t.Point(0,0)),Ut=D.unproject(wt);j.call(this,B,{points:st,point:wt,lngLats:Ct,lngLat:Ut,originalEvent:W}),this._defaultPrevented=!1}j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I;var w={defaultPrevented:{configurable:!0}};return I.prototype.preventDefault=function(){this._defaultPrevented=!0},w.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(I.prototype,w),I}(t.Event),ku=function(j){function I(B,D,W){j.call(this,B,{originalEvent:W}),this._defaultPrevented=!1}j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I;var w={defaultPrevented:{configurable:!0}};return I.prototype.preventDefault=function(){this._defaultPrevented=!0},w.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(I.prototype,w),I}(t.Event),us=function(I,w){this._map=I,this._clickTolerance=w.clickTolerance};us.prototype.reset=function(){delete this._mousedownPos},us.prototype.wheel=function(j){return this._firePreventable(new ku(j.type,this._map,j))},us.prototype.mousedown=function(j,I){return this._mousedownPos=I,this._firePreventable(new es(j.type,this._map,j))},us.prototype.mouseup=function(j){this._map.fire(new es(j.type,this._map,j))},us.prototype.click=function(j,I){this._mousedownPos&&this._mousedownPos.dist(I)>=this._clickTolerance||this._map.fire(new es(j.type,this._map,j))},us.prototype.dblclick=function(j){return this._firePreventable(new es(j.type,this._map,j))},us.prototype.mouseover=function(j){this._map.fire(new es(j.type,this._map,j))},us.prototype.mouseout=function(j){this._map.fire(new es(j.type,this._map,j))},us.prototype.touchstart=function(j){return this._firePreventable(new iu(j.type,this._map,j))},us.prototype.touchmove=function(j){this._map.fire(new iu(j.type,this._map,j))},us.prototype.touchend=function(j){this._map.fire(new iu(j.type,this._map,j))},us.prototype.touchcancel=function(j){this._map.fire(new iu(j.type,this._map,j))},us.prototype._firePreventable=function(j){if(this._map.fire(j),j.defaultPrevented)return{}},us.prototype.isEnabled=function(){return!0},us.prototype.isActive=function(){return!1},us.prototype.enable=function(){},us.prototype.disable=function(){};var Yi=function(I){this._map=I};Yi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Yi.prototype.mousemove=function(j){this._map.fire(new es(j.type,this._map,j))},Yi.prototype.mousedown=function(){this._delayContextMenu=!0},Yi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new es("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Yi.prototype.contextmenu=function(j){this._delayContextMenu?this._contextMenuEvent=j:this._map.fire(new es(j.type,this._map,j)),this._map.listens("contextmenu")&&j.preventDefault()},Yi.prototype.isEnabled=function(){return!0},Yi.prototype.isActive=function(){return!1},Yi.prototype.enable=function(){},Yi.prototype.disable=function(){};var Fs=function(I,w){this._map=I,this._el=I.getCanvasContainer(),this._container=I.getContainer(),this._clickTolerance=w.clickTolerance||1};function tl(j,I){for(var w={},B=0;B<j.length;B++)w[j[B].identifier]=I[B];return w}Fs.prototype.isEnabled=function(){return!!this._enabled},Fs.prototype.isActive=function(){return!!this._active},Fs.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Fs.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Fs.prototype.mousedown=function(j,I){this.isEnabled()&&j.shiftKey&&j.button===0&&(s.disableDrag(),this._startPos=this._lastPos=I,this._active=!0)},Fs.prototype.mousemoveWindow=function(j,I){if(this._active){var w=I;if(!(this._lastPos.equals(w)||!this._box&&w.dist(this._startPos)<this._clickTolerance)){var B=this._startPos;this._lastPos=w,this._box||(this._box=s.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",j));var D=Math.min(B.x,w.x),W=Math.max(B.x,w.x),q=Math.min(B.y,w.y),st=Math.max(B.y,w.y);s.setTransform(this._box,"translate("+D+"px,"+q+"px)"),this._box.style.width=W-D+"px",this._box.style.height=st-q+"px"}}},Fs.prototype.mouseupWindow=function(j,I){var w=this;if(this._active&&j.button===0){var B=this._startPos,D=I;if(this.reset(),s.suppressClick(),B.x!==D.x||B.y!==D.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:j})),{cameraAnimation:function(q){return q.fitScreenCoordinates(B,D,w._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",j)}},Fs.prototype.keydown=function(j){this._active&&j.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",j))},Fs.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(s.remove(this._box),this._box=null),s.enableDrag(),delete this._startPos,delete this._lastPos},Fs.prototype._fireEvent=function(j,I){return this._map.fire(new t.Event(j,{originalEvent:I}))};var Gu=function(I){this.reset(),this.numTouches=I.numTouches};Gu.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Gu.prototype.touchstart=function(j,I,w){(this.centroid||w.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=j.timeStamp),w.length===this.numTouches&&(this.centroid=function(B){for(var D=new t.Point(0,0),W=0,q=B;W<q.length;W+=1)D._add(q[W]);return D.div(B.length)}(I),this.touches=tl(w,I)))},Gu.prototype.touchmove=function(j,I,w){if(!this.aborted&&this.centroid){var B=tl(w,I);for(var D in this.touches){var W=B[D];(!W||W.dist(this.touches[D])>30)&&(this.aborted=!0)}}},Gu.prototype.touchend=function(j,I,w){if((!this.centroid||j.timeStamp-this.startTime>500)&&(this.aborted=!0),w.length===0){var B=!this.aborted&&this.centroid;if(this.reset(),B)return B}};var Go=function(I){this.singleTap=new Gu(I),this.numTaps=I.numTaps,this.reset()};Go.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Go.prototype.touchstart=function(j,I,w){this.singleTap.touchstart(j,I,w)},Go.prototype.touchmove=function(j,I,w){this.singleTap.touchmove(j,I,w)},Go.prototype.touchend=function(j,I,w){var B=this.singleTap.touchend(j,I,w);if(B){var D=j.timeStamp-this.lastTime<500,W=!this.lastTap||this.lastTap.dist(B)<30;if(D&&W||this.reset(),this.count++,this.lastTime=j.timeStamp,this.lastTap=B,this.count===this.numTaps)return this.reset(),B}};var Yo=function(){this._zoomIn=new Go({numTouches:1,numTaps:2}),this._zoomOut=new Go({numTouches:2,numTaps:1}),this.reset()};Yo.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Yo.prototype.touchstart=function(j,I,w){this._zoomIn.touchstart(j,I,w),this._zoomOut.touchstart(j,I,w)},Yo.prototype.touchmove=function(j,I,w){this._zoomIn.touchmove(j,I,w),this._zoomOut.touchmove(j,I,w)},Yo.prototype.touchend=function(j,I,w){var B=this,D=this._zoomIn.touchend(j,I,w),W=this._zoomOut.touchend(j,I,w);return D?(this._active=!0,j.preventDefault(),setTimeout(function(){return B.reset()},0),{cameraAnimation:function(st){return st.easeTo({duration:300,zoom:st.getZoom()+1,around:st.unproject(D)},{originalEvent:j})}}):W?(this._active=!0,j.preventDefault(),setTimeout(function(){return B.reset()},0),{cameraAnimation:function(st){return st.easeTo({duration:300,zoom:st.getZoom()-1,around:st.unproject(W)},{originalEvent:j})}}):void 0},Yo.prototype.touchcancel=function(){this.reset()},Yo.prototype.enable=function(){this._enabled=!0},Yo.prototype.disable=function(){this._enabled=!1,this.reset()},Yo.prototype.isEnabled=function(){return this._enabled},Yo.prototype.isActive=function(){return this._active};var Su={0:1,2:2},Mi=function(I){this.reset(),this._clickTolerance=I.clickTolerance||1};Mi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Mi.prototype._correctButton=function(j,I){return!1},Mi.prototype._move=function(j,I){return{}},Mi.prototype.mousedown=function(j,I){if(!this._lastPoint){var w=s.mouseButton(j);this._correctButton(j,w)&&(this._lastPoint=I,this._eventButton=w)}},Mi.prototype.mousemoveWindow=function(j,I){var w=this._lastPoint;if(w){if(j.preventDefault(),function(B,D){var W=Su[D];return B.buttons===void 0||(B.buttons&W)!==W}(j,this._eventButton))this.reset();else if(this._moved||!(I.dist(w)<this._clickTolerance))return this._moved=!0,this._lastPoint=I,this._move(w,I)}},Mi.prototype.mouseupWindow=function(j){this._lastPoint&&s.mouseButton(j)===this._eventButton&&(this._moved&&s.suppressClick(),this.reset())},Mi.prototype.enable=function(){this._enabled=!0},Mi.prototype.disable=function(){this._enabled=!1,this.reset()},Mi.prototype.isEnabled=function(){return this._enabled},Mi.prototype.isActive=function(){return this._active};var _u=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.mousedown=function(w,B){j.prototype.mousedown.call(this,w,B),this._lastPoint&&(this._active=!0)},I.prototype._correctButton=function(w,B){return B===0&&!w.ctrlKey},I.prototype._move=function(w,B){return{around:B,panDelta:B.sub(w)}},I}(Mi),Iu=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype._correctButton=function(w,B){return B===0&&w.ctrlKey||B===2},I.prototype._move=function(w,B){var D=.8*(B.x-w.x);if(D)return this._active=!0,{bearingDelta:D}},I.prototype.contextmenu=function(w){w.preventDefault()},I}(Mi),Lu=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype._correctButton=function(w,B){return B===0&&w.ctrlKey||B===2},I.prototype._move=function(w,B){var D=-.5*(B.y-w.y);if(D)return this._active=!0,{pitchDelta:D}},I.prototype.contextmenu=function(w){w.preventDefault()},I}(Mi),$s=function(I){this._minTouches=1,this._clickTolerance=I.clickTolerance||1,this.reset()};$s.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},$s.prototype.touchstart=function(j,I,w){return this._calculateTransform(j,I,w)},$s.prototype.touchmove=function(j,I,w){if(this._active&&!(w.length<this._minTouches))return j.preventDefault(),this._calculateTransform(j,I,w)},$s.prototype.touchend=function(j,I,w){this._calculateTransform(j,I,w),this._active&&w.length<this._minTouches&&this.reset()},$s.prototype.touchcancel=function(){this.reset()},$s.prototype._calculateTransform=function(j,I,w){w.length>0&&(this._active=!0);var B=tl(w,I),D=new t.Point(0,0),W=new t.Point(0,0),q=0;for(var st in B){var Ct=B[st],wt=this._touches[st];wt&&(D._add(Ct),W._add(Ct.sub(wt)),q++,B[st]=Ct)}if(this._touches=B,!(q<this._minTouches)&&W.mag()){var Ut=W.div(q);if(this._sum._add(Ut),!(this._sum.mag()<this._clickTolerance))return{around:D.div(q),panDelta:Ut}}},$s.prototype.enable=function(){this._enabled=!0},$s.prototype.disable=function(){this._enabled=!1,this.reset()},$s.prototype.isEnabled=function(){return this._enabled},$s.prototype.isActive=function(){return this._active};var we=function(){this.reset()};function Pe(j,I,w){for(var B=0;B<j.length;B++)if(j[B].identifier===w)return I[B]}function hn(j,I){return Math.log(j/I)/Math.LN2}we.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},we.prototype._start=function(j){},we.prototype._move=function(j,I,w){return{}},we.prototype.touchstart=function(j,I,w){this._firstTwoTouches||w.length<2||(this._firstTwoTouches=[w[0].identifier,w[1].identifier],this._start([I[0],I[1]]))},we.prototype.touchmove=function(j,I,w){if(this._firstTwoTouches){j.preventDefault();var B=this._firstTwoTouches,D=B[1],W=Pe(w,I,B[0]),q=Pe(w,I,D);if(W&&q){var st=this._aroundCenter?null:W.add(q).div(2);return this._move([W,q],st,j)}}},we.prototype.touchend=function(j,I,w){if(this._firstTwoTouches){var B=this._firstTwoTouches,D=B[1],W=Pe(w,I,B[0]),q=Pe(w,I,D);W&&q||(this._active&&s.suppressClick(),this.reset())}},we.prototype.touchcancel=function(){this.reset()},we.prototype.enable=function(j){this._enabled=!0,this._aroundCenter=!!j&&j.around==="center"},we.prototype.disable=function(){this._enabled=!1,this.reset()},we.prototype.isEnabled=function(){return this._enabled},we.prototype.isActive=function(){return this._active};var tn=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.reset=function(){j.prototype.reset.call(this),delete this._distance,delete this._startDistance},I.prototype._start=function(w){this._startDistance=this._distance=w[0].dist(w[1])},I.prototype._move=function(w,B){var D=this._distance;if(this._distance=w[0].dist(w[1]),this._active||!(Math.abs(hn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:hn(this._distance,D),pinchAround:B}},I}(we);function On(j,I){return 180*j.angleWith(I)/Math.PI}var fr=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.reset=function(){j.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},I.prototype._start=function(w){this._startVector=this._vector=w[0].sub(w[1]),this._minDiameter=w[0].dist(w[1])},I.prototype._move=function(w,B){var D=this._vector;if(this._vector=w[0].sub(w[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:On(this._vector,D),pinchAround:B}},I.prototype._isBelowThreshold=function(w){this._minDiameter=Math.min(this._minDiameter,w.mag());var B=25/(Math.PI*this._minDiameter)*360,D=On(w,this._startVector);return Math.abs(D)<B},I}(we);function Ir(j){return Math.abs(j.y)>Math.abs(j.x)}var Zr=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.reset=function(){j.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},I.prototype._start=function(w){this._lastPoints=w,Ir(w[0].sub(w[1]))&&(this._valid=!1)},I.prototype._move=function(w,B,D){var W=w[0].sub(this._lastPoints[0]),q=w[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(W,q,D.timeStamp),this._valid)return this._lastPoints=w,this._active=!0,{pitchDelta:(W.y+q.y)/2*-.5}},I.prototype.gestureBeginsVertically=function(w,B,D){if(this._valid!==void 0)return this._valid;var W=w.mag()>=2,q=B.mag()>=2;if(W||q){if(!W||!q)return this._firstMove===void 0&&(this._firstMove=D),D-this._firstMove<100&&void 0;var st=w.y>0==B.y>0;return Ir(w)&&Ir(B)&&st}},I}(we),ni={panStep:100,bearingStep:15,pitchStep:10},zr=function(){var I=ni;this._panStep=I.panStep,this._bearingStep=I.bearingStep,this._pitchStep=I.pitchStep,this._rotationDisabled=!1};function ci(j){return j*(2-j)}zr.prototype.reset=function(){this._active=!1},zr.prototype.keydown=function(j){var I=this;if(!(j.altKey||j.ctrlKey||j.metaKey)){var w=0,B=0,D=0,W=0,q=0;switch(j.keyCode){case 61:case 107:case 171:case 187:w=1;break;case 189:case 109:case 173:w=-1;break;case 37:j.shiftKey?B=-1:(j.preventDefault(),W=-1);break;case 39:j.shiftKey?B=1:(j.preventDefault(),W=1);break;case 38:j.shiftKey?D=1:(j.preventDefault(),q=-1);break;case 40:j.shiftKey?D=-1:(j.preventDefault(),q=1);break;default:return}return this._rotationDisabled&&(B=0,D=0),{cameraAnimation:function(Ct){var wt=Ct.getZoom();Ct.easeTo({duration:300,easeId:"keyboardHandler",easing:ci,zoom:w?Math.round(wt)+w*(j.shiftKey?2:1):wt,bearing:Ct.getBearing()+B*I._bearingStep,pitch:Ct.getPitch()+D*I._pitchStep,offset:[-W*I._panStep,-q*I._panStep],center:Ct.getCenter()},{originalEvent:j})}}}},zr.prototype.enable=function(){this._enabled=!0},zr.prototype.disable=function(){this._enabled=!1,this.reset()},zr.prototype.isEnabled=function(){return this._enabled},zr.prototype.isActive=function(){return this._active},zr.prototype.disableRotation=function(){this._rotationDisabled=!0},zr.prototype.enableRotation=function(){this._rotationDisabled=!1};var xr=function(I,w){this._map=I,this._el=I.getCanvasContainer(),this._handler=w,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onTimeout"],this)};xr.prototype.setZoomRate=function(j){this._defaultZoomRate=j},xr.prototype.setWheelZoomRate=function(j){this._wheelZoomRate=j},xr.prototype.isEnabled=function(){return!!this._enabled},xr.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},xr.prototype.isZooming=function(){return!!this._zooming},xr.prototype.enable=function(j){this.isEnabled()||(this._enabled=!0,this._aroundCenter=j&&j.around==="center")},xr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},xr.prototype.wheel=function(j){if(this.isEnabled()){var I=j.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*j.deltaY:j.deltaY,w=t.browser.now(),B=w-(this._lastWheelEventTime||0);this._lastWheelEventTime=w,I!==0&&I%4.000244140625==0?this._type="wheel":I!==0&&Math.abs(I)<4?this._type="trackpad":B>400?(this._type=null,this._lastValue=I,this._timeout=setTimeout(this._onTimeout,40,j)):this._type||(this._type=Math.abs(B*I)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,I+=this._lastValue)),j.shiftKey&&I&&(I/=4),this._type&&(this._lastWheelEvent=j,this._delta-=I,this._active||this._start(j)),j.preventDefault()}},xr.prototype._onTimeout=function(j){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(j)},xr.prototype._start=function(j){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var I=s.mousePos(this._el,j);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(I)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},xr.prototype.renderFrame=function(){var j=this;if(this._frameId&&(this._frameId=null,this.isActive())){var I=this._map.transform;if(this._delta!==0){var w=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,B=2/(1+Math.exp(-Math.abs(this._delta*w)));this._delta<0&&B!==0&&(B=1/B);var D=typeof this._targetZoom=="number"?I.zoomScale(this._targetZoom):I.scale;this._targetZoom=Math.min(I.maxZoom,Math.max(I.minZoom,I.scaleZoom(D*B))),this._type==="wheel"&&(this._startZoom=I.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var W,q=typeof this._targetZoom=="number"?this._targetZoom:I.zoom,st=this._startZoom,Ct=this._easing,wt=!1;if(this._type==="wheel"&&st&&Ct){var Ut=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),Zt=Ct(Ut);W=t.number(st,q,Zt),Ut<1?this._frameId||(this._frameId=!0):wt=!0}else W=q,wt=!0;return this._active=!0,wt&&(this._active=!1,this._finishTimeout=setTimeout(function(){j._zooming=!1,j._handler._triggerRenderFrame(),delete j._targetZoom,delete j._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!wt,zoomDelta:W-I.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},xr.prototype._smoothOutEasing=function(j){var I=t.ease;if(this._prevEase){var w=this._prevEase,B=(t.browser.now()-w.start)/w.duration,D=w.easing(B+.01)-w.easing(B),W=.27/Math.sqrt(D*D+1e-4)*.01,q=Math.sqrt(.0729-W*W);I=t.bezier(W,q,.25,1)}return this._prevEase={start:t.browser.now(),duration:j,easing:I},I},xr.prototype.reset=function(){this._active=!1};var Kt=function(I,w){this._clickZoom=I,this._tapZoom=w};Kt.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Kt.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Kt.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Kt.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var te=function(){this.reset()};te.prototype.reset=function(){this._active=!1},te.prototype.dblclick=function(j,I){return j.preventDefault(),{cameraAnimation:function(B){B.easeTo({duration:300,zoom:B.getZoom()+(j.shiftKey?-1:1),around:B.unproject(I)},{originalEvent:j})}}},te.prototype.enable=function(){this._enabled=!0},te.prototype.disable=function(){this._enabled=!1,this.reset()},te.prototype.isEnabled=function(){return this._enabled},te.prototype.isActive=function(){return this._active};var Ie=function(){this._tap=new Go({numTouches:1,numTaps:1}),this.reset()};Ie.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Ie.prototype.touchstart=function(j,I,w){this._swipePoint||(this._tapTime&&j.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?w.length>0&&(this._swipePoint=I[0],this._swipeTouch=w[0].identifier):this._tap.touchstart(j,I,w))},Ie.prototype.touchmove=function(j,I,w){if(this._tapTime){if(this._swipePoint){if(w[0].identifier!==this._swipeTouch)return;var B=I[0],D=B.y-this._swipePoint.y;return this._swipePoint=B,j.preventDefault(),this._active=!0,{zoomDelta:D/128}}}else this._tap.touchmove(j,I,w)},Ie.prototype.touchend=function(j,I,w){this._tapTime?this._swipePoint&&w.length===0&&this.reset():this._tap.touchend(j,I,w)&&(this._tapTime=j.timeStamp)},Ie.prototype.touchcancel=function(){this.reset()},Ie.prototype.enable=function(){this._enabled=!0},Ie.prototype.disable=function(){this._enabled=!1,this.reset()},Ie.prototype.isEnabled=function(){return this._enabled},Ie.prototype.isActive=function(){return this._active};var _e=function(I,w,B){this._el=I,this._mousePan=w,this._touchPan=B};_e.prototype.enable=function(j){this._inertiaOptions=j||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},_e.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},_e.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},_e.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Dt=function(I,w,B){this._pitchWithRotate=I.pitchWithRotate,this._mouseRotate=w,this._mousePitch=B};Dt.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Dt.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Dt.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Dt.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var zt=function(I,w,B,D){this._el=I,this._touchZoom=w,this._touchRotate=B,this._tapDragZoom=D,this._rotationDisabled=!1,this._enabled=!0};zt.prototype.enable=function(j){this._touchZoom.enable(j),this._rotationDisabled||this._touchRotate.enable(j),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},zt.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},zt.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},zt.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},zt.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},zt.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var oe=function(I){return I.zoom||I.drag||I.pitch||I.rotate},ne=function(j){function I(){j.apply(this,arguments)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I}(t.Event);function fe(j){return j.panDelta&&j.panDelta.mag()||j.zoomDelta||j.bearingDelta||j.pitchDelta}var Fe=function(I,w){this._map=I,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new qu(I),this._bearingSnap=w.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(w),t.bindAll(["handleEvent","handleWindowEvent"],this);var B=this._el;this._listeners=[[B,"touchstart",{passive:!0}],[B,"touchmove",{passive:!1}],[B,"touchend",void 0],[B,"touchcancel",void 0],[B,"mousedown",void 0],[B,"mousemove",void 0],[B,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[B,"mouseover",void 0],[B,"mouseout",void 0],[B,"dblclick",void 0],[B,"click",void 0],[B,"keydown",{capture:!1}],[B,"keyup",void 0],[B,"wheel",{passive:!1}],[B,"contextmenu",void 0],[t.window,"blur",void 0]];for(var D=0,W=this._listeners;D<W.length;D+=1){var q=W[D],st=q[0];s.addEventListener(st,q[1],st===t.window.document?this.handleWindowEvent:this.handleEvent,q[2])}};Fe.prototype.destroy=function(){for(var j=0,I=this._listeners;j<I.length;j+=1){var w=I[j],B=w[0];s.removeEventListener(B,w[1],B===t.window.document?this.handleWindowEvent:this.handleEvent,w[2])}},Fe.prototype._addDefaultHandlers=function(j){var I=this._map,w=I.getCanvasContainer();this._add("mapEvent",new us(I,j));var B=I.boxZoom=new Fs(I,j);this._add("boxZoom",B);var D=new Yo,W=new te;I.doubleClickZoom=new Kt(W,D),this._add("tapZoom",D),this._add("clickZoom",W);var q=new Ie;this._add("tapDragZoom",q);var st=I.touchPitch=new Zr;this._add("touchPitch",st);var Ct=new Iu(j),wt=new Lu(j);I.dragRotate=new Dt(j,Ct,wt),this._add("mouseRotate",Ct,["mousePitch"]),this._add("mousePitch",wt,["mouseRotate"]);var Ut=new _u(j),Zt=new $s(j);I.dragPan=new _e(w,Ut,Zt),this._add("mousePan",Ut),this._add("touchPan",Zt,["touchZoom","touchRotate"]);var qt=new fr,he=new tn;I.touchZoomRotate=new zt(w,he,qt,q),this._add("touchRotate",qt,["touchPan","touchZoom"]),this._add("touchZoom",he,["touchPan","touchRotate"]);var me=I.scrollZoom=new xr(I,this);this._add("scrollZoom",me,["mousePan"]);var De=I.keyboard=new zr;this._add("keyboard",De),this._add("blockableMapEvent",new Yi(I));for(var Ae=0,Ue=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Ae<Ue.length;Ae+=1){var qe=Ue[Ae];j.interactive&&j[qe]&&I[qe].enable(j[qe])}},Fe.prototype._add=function(j,I,w){this._handlers.push({handlerName:j,handler:I,allowed:w}),this._handlersById[j]=I},Fe.prototype.stop=function(j){if(!this._updatingCamera){for(var I=0,w=this._handlers;I<w.length;I+=1)w[I].handler.reset();this._inertia.clear(),this._fireEvents({},{},j),this._changes=[]}},Fe.prototype.isActive=function(){for(var j=0,I=this._handlers;j<I.length;j+=1)if(I[j].handler.isActive())return!0;return!1},Fe.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Fe.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Fe.prototype.isMoving=function(){return Boolean(oe(this._eventsInProgress))||this.isZooming()},Fe.prototype._blockedByActive=function(j,I,w){for(var B in j)if(B!==w&&(!I||I.indexOf(B)<0))return!0;return!1},Fe.prototype.handleWindowEvent=function(j){this.handleEvent(j,j.type+"Window")},Fe.prototype._getMapTouches=function(j){for(var I=[],w=0,B=j;w<B.length;w+=1){var D=B[w];this._el.contains(D.target)&&I.push(D)}return I},Fe.prototype.handleEvent=function(j,I){if(j.type!=="blur"){this._updatingCamera=!0;for(var w=j.type==="renderFrame"?void 0:j,B={needsRenderFrame:!1},D={},W={},q=j.touches?this._getMapTouches(j.touches):void 0,st=q?s.touchPos(this._el,q):s.mousePos(this._el,j),Ct=0,wt=this._handlers;Ct<wt.length;Ct+=1){var Ut=wt[Ct],Zt=Ut.handlerName,qt=Ut.handler,he=Ut.allowed;if(qt.isEnabled()){var me=void 0;this._blockedByActive(W,he,Zt)?qt.reset():qt[I||j.type]&&(me=qt[I||j.type](j,st,q),this.mergeHandlerResult(B,D,me,Zt,w),me&&me.needsRenderFrame&&this._triggerRenderFrame()),(me||qt.isActive())&&(W[Zt]=qt)}}var De={};for(var Ae in this._previousActiveHandlers)W[Ae]||(De[Ae]=w);this._previousActiveHandlers=W,(Object.keys(De).length||fe(B))&&(this._changes.push([B,D,De]),this._triggerRenderFrame()),(Object.keys(W).length||fe(B))&&this._map._stop(!0),this._updatingCamera=!1;var Ue=B.cameraAnimation;Ue&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ue(this._map))}else this.stop(!0)},Fe.prototype.mergeHandlerResult=function(j,I,w,B,D){if(w){t.extend(j,w);var W={handlerName:B,originalEvent:w.originalEvent||D};w.zoomDelta!==void 0&&(I.zoom=W),w.panDelta!==void 0&&(I.drag=W),w.pitchDelta!==void 0&&(I.pitch=W),w.bearingDelta!==void 0&&(I.rotate=W)}},Fe.prototype._applyChanges=function(){for(var j={},I={},w={},B=0,D=this._changes;B<D.length;B+=1){var W=D[B],q=W[0],st=W[1],Ct=W[2];q.panDelta&&(j.panDelta=(j.panDelta||new t.Point(0,0))._add(q.panDelta)),q.zoomDelta&&(j.zoomDelta=(j.zoomDelta||0)+q.zoomDelta),q.bearingDelta&&(j.bearingDelta=(j.bearingDelta||0)+q.bearingDelta),q.pitchDelta&&(j.pitchDelta=(j.pitchDelta||0)+q.pitchDelta),q.around!==void 0&&(j.around=q.around),q.pinchAround!==void 0&&(j.pinchAround=q.pinchAround),q.noInertia&&(j.noInertia=q.noInertia),t.extend(I,st),t.extend(w,Ct)}this._updateMapTransform(j,I,w),this._changes=[]},Fe.prototype._updateMapTransform=function(j,I,w){var B=this._map,D=B.transform;if(!fe(j))return this._fireEvents(I,w,!0);var W=j.panDelta,q=j.zoomDelta,st=j.bearingDelta,Ct=j.pitchDelta,wt=j.around,Ut=j.pinchAround;Ut!==void 0&&(wt=Ut),B._stop(!0),wt=wt||B.transform.centerPoint;var Zt=D.pointLocation(W?wt.sub(W):wt);st&&(D.bearing+=st),Ct&&(D.pitch+=Ct),q&&(D.zoom+=q),D.setLocationAtPoint(Zt,wt),this._map._update(),j.noInertia||this._inertia.record(j),this._fireEvents(I,w,!0)},Fe.prototype._fireEvents=function(j,I,w){var B=this,D=oe(this._eventsInProgress),W=oe(j),q={};for(var st in j)this._eventsInProgress[st]||(q[st+"start"]=j[st].originalEvent),this._eventsInProgress[st]=j[st];for(var Ct in!D&&W&&this._fireEvent("movestart",W.originalEvent),q)this._fireEvent(Ct,q[Ct]);for(var wt in W&&this._fireEvent("move",W.originalEvent),j)this._fireEvent(wt,j[wt].originalEvent);var Ut,Zt={};for(var qt in this._eventsInProgress){var he=this._eventsInProgress[qt],me=he.handlerName,De=he.originalEvent;this._handlersById[me].isActive()||(delete this._eventsInProgress[qt],Zt[qt+"end"]=Ut=I[me]||De)}for(var Ae in Zt)this._fireEvent(Ae,Zt[Ae]);var Ue=oe(this._eventsInProgress);if(w&&(D||W)&&!Ue){this._updatingCamera=!0;var qe=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),rn=function(Un){return Un!==0&&-B._bearingSnap<Un&&Un<B._bearingSnap};qe?(rn(qe.bearing||this._map.getBearing())&&(qe.bearing=0),this._map.easeTo(qe,{originalEvent:Ut})):(this._map.fire(new t.Event("moveend",{originalEvent:Ut})),rn(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Fe.prototype._fireEvent=function(j,I){this._map.fire(new t.Event(j,I?{originalEvent:I}:{}))},Fe.prototype._requestFrame=function(){var j=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(I){delete j._frameId,j.handleEvent(new ne("renderFrame",{timeStamp:I})),j._applyChanges()})},Fe.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Ze=function(j){function I(w,B){j.call(this),this._moving=!1,this._zooming=!1,this.transform=w,this._bearingSnap=B.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},I.prototype.setCenter=function(w,B){return this.jumpTo({center:w},B)},I.prototype.panBy=function(w,B,D){return w=t.Point.convert(w).mult(-1),this.panTo(this.transform.center,t.extend({offset:w},B),D)},I.prototype.panTo=function(w,B,D){return this.easeTo(t.extend({center:w},B),D)},I.prototype.getZoom=function(){return this.transform.zoom},I.prototype.setZoom=function(w,B){return this.jumpTo({zoom:w},B),this},I.prototype.zoomTo=function(w,B,D){return this.easeTo(t.extend({zoom:w},B),D)},I.prototype.zoomIn=function(w,B){return this.zoomTo(this.getZoom()+1,w,B),this},I.prototype.zoomOut=function(w,B){return this.zoomTo(this.getZoom()-1,w,B),this},I.prototype.getBearing=function(){return this.transform.bearing},I.prototype.setBearing=function(w,B){return this.jumpTo({bearing:w},B),this},I.prototype.getPadding=function(){return this.transform.padding},I.prototype.setPadding=function(w,B){return this.jumpTo({padding:w},B),this},I.prototype.rotateTo=function(w,B,D){return this.easeTo(t.extend({bearing:w},B),D)},I.prototype.resetNorth=function(w,B){return this.rotateTo(0,t.extend({duration:1e3},w),B),this},I.prototype.resetNorthPitch=function(w,B){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},w),B),this},I.prototype.snapToNorth=function(w,B){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(w,B):this},I.prototype.getPitch=function(){return this.transform.pitch},I.prototype.setPitch=function(w,B){return this.jumpTo({pitch:w},B),this},I.prototype.cameraForBounds=function(w,B){w=t.LngLatBounds.convert(w);var D=B&&B.bearing||0;return this._cameraForBoxAndBearing(w.getNorthWest(),w.getSouthEast(),D,B)},I.prototype._cameraForBoxAndBearing=function(w,B,D,W){var q={top:0,bottom:0,right:0,left:0};if(typeof(W=t.extend({padding:q,offset:[0,0],maxZoom:this.transform.maxZoom},W)).padding=="number"){var st=W.padding;W.padding={top:st,bottom:st,right:st,left:st}}W.padding=t.extend(q,W.padding);var Ct=this.transform,wt=Ct.padding,Ut=Ct.project(t.LngLat.convert(w)),Zt=Ct.project(t.LngLat.convert(B)),qt=Ut.rotate(-D*Math.PI/180),he=Zt.rotate(-D*Math.PI/180),me=new t.Point(Math.max(qt.x,he.x),Math.max(qt.y,he.y)),De=new t.Point(Math.min(qt.x,he.x),Math.min(qt.y,he.y)),Ae=me.sub(De),Ue=(Ct.width-(wt.left+wt.right+W.padding.left+W.padding.right))/Ae.x,qe=(Ct.height-(wt.top+wt.bottom+W.padding.top+W.padding.bottom))/Ae.y;if(!(qe<0||Ue<0)){var rn=Math.min(Ct.scaleZoom(Ct.scale*Math.min(Ue,qe)),W.maxZoom),Xn=typeof W.offset.x=="number"?new t.Point(W.offset.x,W.offset.y):t.Point.convert(W.offset),Un=new t.Point((W.padding.left-W.padding.right)/2,(W.padding.top-W.padding.bottom)/2).rotate(D*Math.PI/180),gr=Xn.add(Un).mult(Ct.scale/Ct.zoomScale(rn));return{center:Ct.unproject(Ut.add(Zt).div(2).sub(gr)),zoom:rn,bearing:D}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},I.prototype.fitBounds=function(w,B,D){return this._fitInternal(this.cameraForBounds(w,B),B,D)},I.prototype.fitScreenCoordinates=function(w,B,D,W,q){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(w)),this.transform.pointLocation(t.Point.convert(B)),D,W),W,q)},I.prototype._fitInternal=function(w,B,D){return w?(delete(B=t.extend(w,B)).padding,B.linear?this.easeTo(B,D):this.flyTo(B,D)):this},I.prototype.jumpTo=function(w,B){this.stop();var D=this.transform,W=!1,q=!1,st=!1;return"zoom"in w&&D.zoom!==+w.zoom&&(W=!0,D.zoom=+w.zoom),w.center!==void 0&&(D.center=t.LngLat.convert(w.center)),"bearing"in w&&D.bearing!==+w.bearing&&(q=!0,D.bearing=+w.bearing),"pitch"in w&&D.pitch!==+w.pitch&&(st=!0,D.pitch=+w.pitch),w.padding==null||D.isPaddingEqual(w.padding)||(D.padding=w.padding),this.fire(new t.Event("movestart",B)).fire(new t.Event("move",B)),W&&this.fire(new t.Event("zoomstart",B)).fire(new t.Event("zoom",B)).fire(new t.Event("zoomend",B)),q&&this.fire(new t.Event("rotatestart",B)).fire(new t.Event("rotate",B)).fire(new t.Event("rotateend",B)),st&&this.fire(new t.Event("pitchstart",B)).fire(new t.Event("pitch",B)).fire(new t.Event("pitchend",B)),this.fire(new t.Event("moveend",B))},I.prototype.easeTo=function(w,B){var D=this;this._stop(!1,w.easeId),((w=t.extend({offset:[0,0],duration:500,easing:t.ease},w)).animate===!1||!w.essential&&t.browser.prefersReducedMotion)&&(w.duration=0);var W=this.transform,q=this.getZoom(),st=this.getBearing(),Ct=this.getPitch(),wt=this.getPadding(),Ut="zoom"in w?+w.zoom:q,Zt="bearing"in w?this._normalizeBearing(w.bearing,st):st,qt="pitch"in w?+w.pitch:Ct,he="padding"in w?w.padding:W.padding,me=t.Point.convert(w.offset),De=W.centerPoint.add(me),Ae=W.pointLocation(De),Ue=t.LngLat.convert(w.center||Ae);this._normalizeCenter(Ue);var qe,rn,Xn=W.project(Ae),Un=W.project(Ue).sub(Xn),gr=W.zoomScale(Ut-q);w.around&&(qe=t.LngLat.convert(w.around),rn=W.locationPoint(qe));var Mr={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ut!==q,this._rotating=this._rotating||st!==Zt,this._pitching=this._pitching||qt!==Ct,this._padding=!W.isPaddingEqual(he),this._easeId=w.easeId,this._prepareEase(B,w.noMoveStart,Mr),this._ease(function(Qr){if(D._zooming&&(W.zoom=t.number(q,Ut,Qr)),D._rotating&&(W.bearing=t.number(st,Zt,Qr)),D._pitching&&(W.pitch=t.number(Ct,qt,Qr)),D._padding&&(W.interpolatePadding(wt,he,Qr),De=W.centerPoint.add(me)),qe)W.setLocationAtPoint(qe,rn);else{var Vr=W.zoomScale(W.zoom-q),_i=Ut>q?Math.min(2,gr):Math.max(.5,gr),Di=Math.pow(_i,1-Qr),Wi=W.unproject(Xn.add(Un.mult(Qr*Di)).mult(Vr));W.setLocationAtPoint(W.renderWorldCopies?Wi.wrap():Wi,De)}D._fireMoveEvents(B)},function(Qr){D._afterEase(B,Qr)},w),this},I.prototype._prepareEase=function(w,B,D){D===void 0&&(D={}),this._moving=!0,B||D.moving||this.fire(new t.Event("movestart",w)),this._zooming&&!D.zooming&&this.fire(new t.Event("zoomstart",w)),this._rotating&&!D.rotating&&this.fire(new t.Event("rotatestart",w)),this._pitching&&!D.pitching&&this.fire(new t.Event("pitchstart",w))},I.prototype._fireMoveEvents=function(w){this.fire(new t.Event("move",w)),this._zooming&&this.fire(new t.Event("zoom",w)),this._rotating&&this.fire(new t.Event("rotate",w)),this._pitching&&this.fire(new t.Event("pitch",w))},I.prototype._afterEase=function(w,B){if(!this._easeId||!B||this._easeId!==B){delete this._easeId;var D=this._zooming,W=this._rotating,q=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,D&&this.fire(new t.Event("zoomend",w)),W&&this.fire(new t.Event("rotateend",w)),q&&this.fire(new t.Event("pitchend",w)),this.fire(new t.Event("moveend",w))}},I.prototype.flyTo=function(w,B){var D=this;if(!w.essential&&t.browser.prefersReducedMotion){var W=t.pick(w,["center","zoom","bearing","pitch","around"]);return this.jumpTo(W,B)}this.stop(),w=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},w);var q=this.transform,st=this.getZoom(),Ct=this.getBearing(),wt=this.getPitch(),Ut=this.getPadding(),Zt="zoom"in w?t.clamp(+w.zoom,q.minZoom,q.maxZoom):st,qt="bearing"in w?this._normalizeBearing(w.bearing,Ct):Ct,he="pitch"in w?+w.pitch:wt,me="padding"in w?w.padding:q.padding,De=q.zoomScale(Zt-st),Ae=t.Point.convert(w.offset),Ue=q.centerPoint.add(Ae),qe=q.pointLocation(Ue),rn=t.LngLat.convert(w.center||qe);this._normalizeCenter(rn);var Xn=q.project(qe),Un=q.project(rn).sub(Xn),gr=w.curve,Mr=Math.max(q.width,q.height),Qr=Mr/De,Vr=Un.mag();if("minZoom"in w){var _i=t.clamp(Math.min(w.minZoom,st,Zt),q.minZoom,q.maxZoom),Di=Mr/q.zoomScale(_i-st);gr=Math.sqrt(Di/Vr*2)}var Wi=gr*gr;function Xi(aa){var Ca=(Qr*Qr-Mr*Mr+(aa?-1:1)*Wi*Wi*Vr*Vr)/(2*(aa?Qr:Mr)*Wi*Vr);return Math.log(Math.sqrt(Ca*Ca+1)-Ca)}function La(aa){return(Math.exp(aa)-Math.exp(-aa))/2}function Na(aa){return(Math.exp(aa)+Math.exp(-aa))/2}var Vi=Xi(0),Ma=function(Ca){return Na(Vi)/Na(Vi+gr*Ca)},xa=function(Ca){return Mr*((Na(Vi)*(La(Va=Vi+gr*Ca)/Na(Va))-La(Vi))/Wi)/Vr;var Va},Hi=(Xi(1)-Vi)/gr;if(Math.abs(Vr)<1e-6||!isFinite(Hi)){if(Math.abs(Mr-Qr)<1e-6)return this.easeTo(w,B);var ha=Qr<Mr?-1:1;Hi=Math.abs(Math.log(Qr/Mr))/gr,xa=function(){return 0},Ma=function(Ca){return Math.exp(ha*gr*Ca)}}return w.duration="duration"in w?+w.duration:1e3*Hi/("screenSpeed"in w?+w.screenSpeed/gr:+w.speed),w.maxDuration&&w.duration>w.maxDuration&&(w.duration=0),this._zooming=!0,this._rotating=Ct!==qt,this._pitching=he!==wt,this._padding=!q.isPaddingEqual(me),this._prepareEase(B,!1),this._ease(function(aa){var Ca=aa*Hi,Va=1/Ma(Ca);q.zoom=aa===1?Zt:st+q.scaleZoom(Va),D._rotating&&(q.bearing=t.number(Ct,qt,aa)),D._pitching&&(q.pitch=t.number(wt,he,aa)),D._padding&&(q.interpolatePadding(Ut,me,aa),Ue=q.centerPoint.add(Ae));var As=aa===1?rn:q.unproject(Xn.add(Un.mult(xa(Ca))).mult(Va));q.setLocationAtPoint(q.renderWorldCopies?As.wrap():As,Ue),D._fireMoveEvents(B)},function(){return D._afterEase(B)},w),this},I.prototype.isEasing=function(){return!!this._easeFrameId},I.prototype.stop=function(){return this._stop()},I.prototype._stop=function(w,B){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var D=this._onEaseEnd;delete this._onEaseEnd,D.call(this,B)}if(!w){var W=this.handlers;W&&W.stop(!1)}return this},I.prototype._ease=function(w,B,D){D.animate===!1||D.duration===0?(w(1),B()):(this._easeStart=t.browser.now(),this._easeOptions=D,this._onEaseFrame=w,this._onEaseEnd=B,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},I.prototype._renderFrameCallback=function(){var w=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},I.prototype._normalizeBearing=function(w,B){w=t.wrap(w,-180,180);var D=Math.abs(w-B);return Math.abs(w-360-B)<D&&(w-=360),Math.abs(w+360-B)<D&&(w+=360),w},I.prototype._normalizeCenter=function(w){var B=this.transform;if(B.renderWorldCopies&&!B.lngRange){var D=w.lng-B.center.lng;w.lng+=D>180?-360:D<-180?360:0}},I}(t.Evented),nn=function(I){I===void 0&&(I={}),this.options=I,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};nn.prototype.getDefaultPosition=function(){return"bottom-right"},nn.prototype.onAdd=function(j){var I=this.options&&this.options.compact;return this._map=j,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=s.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=s.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),I&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),I===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},nn.prototype.onRemove=function(){s.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},nn.prototype._setElementTitle=function(j,I){var w=this._map._getUIString("AttributionControl."+I);j.title=w,j.setAttribute("aria-label",w)},nn.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},nn.prototype._updateEditLink=function(){var j=this._editLink;j||(j=this._editLink=this._container.querySelector(".mapbox-improve-map"));var I=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(j){var w=I.reduce(function(B,D,W){return D.value&&(B+=D.key+"="+D.value+(W<I.length-1?"&":"")),B},"?");j.href=t.config.FEEDBACK_URL+"/"+w+(this._map._hash?this._map._hash.getHashString(!0):""),j.rel="noopener nofollow",this._setElementTitle(j,"MapFeedback")}},nn.prototype._updateData=function(j){!j||j.sourceDataType!=="metadata"&&j.sourceDataType!=="visibility"&&j.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},nn.prototype._updateAttributions=function(){if(this._map.style){var j=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?j=j.concat(this.options.customAttribution.map(function(st){return typeof st!="string"?"":st})):typeof this.options.customAttribution=="string"&&j.push(this.options.customAttribution)),this._map.style.stylesheet){var I=this._map.style.stylesheet;this.styleOwner=I.owner,this.styleId=I.id}var w=this._map.style.sourceCaches;for(var B in w){var D=w[B];if(D.used){var W=D.getSource();W.attribution&&j.indexOf(W.attribution)<0&&j.push(W.attribution)}}j.sort(function(st,Ct){return st.length-Ct.length});var q=(j=j.filter(function(st,Ct){for(var wt=Ct+1;wt<j.length;wt++)if(j[wt].indexOf(st)>=0)return!1;return!0})).join(" | ");q!==this._attribHTML&&(this._attribHTML=q,j.length?(this._innerContainer.innerHTML=q,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},nn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Je=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Je.prototype.onAdd=function(j){this._map=j,this._container=s.create("div","mapboxgl-ctrl");var I=s.create("a","mapboxgl-ctrl-logo");return I.target="_blank",I.rel="noopener nofollow",I.href="https://www.mapbox.com/",I.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),I.setAttribute("rel","noopener nofollow"),this._container.appendChild(I),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Je.prototype.onRemove=function(){s.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Je.prototype.getDefaultPosition=function(){return"bottom-left"},Je.prototype._updateLogo=function(j){j&&j.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Je.prototype._logoRequired=function(){if(this._map.style){var j=this._map.style.sourceCaches;for(var I in j)if(j[I].getSource().mapbox_logo)return!0;return!1}},Je.prototype._updateCompact=function(){var j=this._container.children;if(j.length){var I=j[0];this._map.getCanvasContainer().offsetWidth<250?I.classList.add("mapboxgl-compact"):I.classList.remove("mapboxgl-compact")}};var vn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};vn.prototype.add=function(j){var I=++this._id;return this._queue.push({callback:j,id:I,cancelled:!1}),I},vn.prototype.remove=function(j){for(var I=this._currentlyRunning,w=0,B=I?this._queue.concat(I):this._queue;w<B.length;w+=1){var D=B[w];if(D.id===j)return void(D.cancelled=!0)}},vn.prototype.run=function(j){j===void 0&&(j=0);var I=this._currentlyRunning=this._queue;this._queue=[];for(var w=0,B=I;w<B.length;w+=1){var D=B[w];if(!D.cancelled&&(D.callback(j),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},vn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var fn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Yn=t.window.HTMLImageElement,kn=t.window.HTMLElement,Vn=t.window.ImageBitmap,Gn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},hr=function(j){function I(B){var D=this;if((B=t.extend({},Gn,B)).minZoom!=null&&B.maxZoom!=null&&B.minZoom>B.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(B.minPitch!=null&&B.maxPitch!=null&&B.minPitch>B.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(B.minPitch!=null&&B.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(B.maxPitch!=null&&B.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var W=new Da(B.minZoom,B.maxZoom,B.minPitch,B.maxPitch,B.renderWorldCopies);if(j.call(this,W,B),this._interactive=B.interactive,this._maxTileCacheSize=B.maxTileCacheSize,this._failIfMajorPerformanceCaveat=B.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=B.preserveDrawingBuffer,this._antialias=B.antialias,this._trackResize=B.trackResize,this._bearingSnap=B.bearingSnap,this._refreshExpiredTiles=B.refreshExpiredTiles,this._fadeDuration=B.fadeDuration,this._crossSourceCollisions=B.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=B.collectResourceTiming,this._renderTaskQueue=new vn,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},fn,B.locale),this._clickTolerance=B.clickTolerance,this._requestManager=new t.RequestManager(B.transformRequest,B.accessToken),typeof B.container=="string"){if(this._container=t.window.document.getElementById(B.container),!this._container)throw new Error("Container '"+B.container+"' not found.")}else{if(!(B.container instanceof kn))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=B.container}if(B.maxBounds&&this.setMaxBounds(B.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return D._update(!1)}),this.on("moveend",function(){return D._update(!1)}),this.on("zoom",function(){return D._update(!0)}),t.window!==void 0&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Fe(this,B),this._hash=B.hash&&new Gs(typeof B.hash=="string"&&B.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:B.center,zoom:B.zoom,bearing:B.bearing,pitch:B.pitch}),B.bounds&&(this.resize(),this.fitBounds(B.bounds,t.extend({},B.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=B.localIdeographFontFamily,B.style&&this.setStyle(B.style,{localIdeographFontFamily:B.localIdeographFontFamily}),B.attributionControl&&this.addControl(new nn({customAttribution:B.customAttribution})),this.addControl(new Je,B.logoPosition),this.on("style.load",function(){D.transform.unmodified&&D.jumpTo(D.style.stylesheet)}),this.on("data",function(q){D._update(q.dataType==="style"),D.fire(new t.Event(q.dataType+"data",q))}),this.on("dataloading",function(q){D.fire(new t.Event(q.dataType+"dataloading",q))})}j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I;var w={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return I.prototype._getMapId=function(){return this._mapId},I.prototype.addControl=function(B,D){if(D===void 0&&(D=B.getDefaultPosition?B.getDefaultPosition():"top-right"),!B||!B.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var W=B.onAdd(this);this._controls.push(B);var q=this._controlPositions[D];return D.indexOf("bottom")!==-1?q.insertBefore(W,q.firstChild):q.appendChild(W),this},I.prototype.removeControl=function(B){if(!B||!B.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var D=this._controls.indexOf(B);return D>-1&&this._controls.splice(D,1),B.onRemove(this),this},I.prototype.hasControl=function(B){return this._controls.indexOf(B)>-1},I.prototype.resize=function(B){var D=this._containerDimensions(),W=D[0],q=D[1];this._resizeCanvas(W,q),this.transform.resize(W,q),this.painter.resize(W,q);var st=!this._moving;return st&&(this.stop(),this.fire(new t.Event("movestart",B)).fire(new t.Event("move",B))),this.fire(new t.Event("resize",B)),st&&this.fire(new t.Event("moveend",B)),this},I.prototype.getBounds=function(){return this.transform.getBounds()},I.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},I.prototype.setMaxBounds=function(B){return this.transform.setMaxBounds(t.LngLatBounds.convert(B)),this._update()},I.prototype.setMinZoom=function(B){if((B=B==null?-2:B)>=-2&&B<=this.transform.maxZoom)return this.transform.minZoom=B,this._update(),this.getZoom()<B&&this.setZoom(B),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},I.prototype.getMinZoom=function(){return this.transform.minZoom},I.prototype.setMaxZoom=function(B){if((B=B==null?22:B)>=this.transform.minZoom)return this.transform.maxZoom=B,this._update(),this.getZoom()>B&&this.setZoom(B),this;throw new Error("maxZoom must be greater than the current minZoom")},I.prototype.getMaxZoom=function(){return this.transform.maxZoom},I.prototype.setMinPitch=function(B){if((B=B==null?0:B)<0)throw new Error("minPitch must be greater than or equal to 0");if(B>=0&&B<=this.transform.maxPitch)return this.transform.minPitch=B,this._update(),this.getPitch()<B&&this.setPitch(B),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},I.prototype.getMinPitch=function(){return this.transform.minPitch},I.prototype.setMaxPitch=function(B){if((B=B==null?60:B)>60)throw new Error("maxPitch must be less than or equal to 60");if(B>=this.transform.minPitch)return this.transform.maxPitch=B,this._update(),this.getPitch()>B&&this.setPitch(B),this;throw new Error("maxPitch must be greater than the current minPitch")},I.prototype.getMaxPitch=function(){return this.transform.maxPitch},I.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},I.prototype.setRenderWorldCopies=function(B){return this.transform.renderWorldCopies=B,this._update()},I.prototype.project=function(B){return this.transform.locationPoint(t.LngLat.convert(B))},I.prototype.unproject=function(B){return this.transform.pointLocation(t.Point.convert(B))},I.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},I.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},I.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},I.prototype._createDelegatedListener=function(B,D,W){var q,st=this;if(B==="mouseenter"||B==="mouseover"){var Ct=!1;return{layer:D,listener:W,delegates:{mousemove:function(Zt){var qt=st.getLayer(D)?st.queryRenderedFeatures(Zt.point,{layers:[D]}):[];qt.length?Ct||(Ct=!0,W.call(st,new es(B,st,Zt.originalEvent,{features:qt}))):Ct=!1},mouseout:function(){Ct=!1}}}}if(B==="mouseleave"||B==="mouseout"){var wt=!1;return{layer:D,listener:W,delegates:{mousemove:function(Zt){(st.getLayer(D)?st.queryRenderedFeatures(Zt.point,{layers:[D]}):[]).length?wt=!0:wt&&(wt=!1,W.call(st,new es(B,st,Zt.originalEvent)))},mouseout:function(Zt){wt&&(wt=!1,W.call(st,new es(B,st,Zt.originalEvent)))}}}}return{layer:D,listener:W,delegates:(q={},q[B]=function(Ut){var Zt=st.getLayer(D)?st.queryRenderedFeatures(Ut.point,{layers:[D]}):[];Zt.length&&(Ut.features=Zt,W.call(st,Ut),delete Ut.features)},q)}},I.prototype.on=function(B,D,W){if(W===void 0)return j.prototype.on.call(this,B,D);var q=this._createDelegatedListener(B,D,W);for(var st in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[B]=this._delegatedListeners[B]||[],this._delegatedListeners[B].push(q),q.delegates)this.on(st,q.delegates[st]);return this},I.prototype.once=function(B,D,W){if(W===void 0)return j.prototype.once.call(this,B,D);var q=this._createDelegatedListener(B,D,W);for(var st in q.delegates)this.once(st,q.delegates[st]);return this},I.prototype.off=function(B,D,W){var q=this;return W===void 0?j.prototype.off.call(this,B,D):(this._delegatedListeners&&this._delegatedListeners[B]&&function(st){for(var Ct=st[B],wt=0;wt<Ct.length;wt++){var Ut=Ct[wt];if(Ut.layer===D&&Ut.listener===W){for(var Zt in Ut.delegates)q.off(Zt,Ut.delegates[Zt]);return Ct.splice(wt,1),q}}}(this._delegatedListeners),this)},I.prototype.queryRenderedFeatures=function(B,D){if(!this.style)return[];var W;if(D!==void 0||B===void 0||B instanceof t.Point||Array.isArray(B)||(D=B,B=void 0),D=D||{},(B=B||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||typeof B[0]=="number")W=[t.Point.convert(B)];else{var q=t.Point.convert(B[0]),st=t.Point.convert(B[1]);W=[q,new t.Point(st.x,q.y),st,new t.Point(q.x,st.y),q]}return this.style.queryRenderedFeatures(W,D,this.transform)},I.prototype.querySourceFeatures=function(B,D){return this.style.querySourceFeatures(B,D)},I.prototype.setStyle=function(B,D){return(D=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},D)).diff!==!1&&D.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&B?(this._diffStyle(B,D),this):(this._localIdeographFontFamily=D.localIdeographFontFamily,this._updateStyle(B,D))},I.prototype._getUIString=function(B){var D=this._locale[B];if(D==null)throw new Error("Missing UI string '"+B+"'");return D},I.prototype._updateStyle=function(B,D){return this.style&&(this.style.setEventedParent(null),this.style._remove()),B?(this.style=new Co(this,D||{}),this.style.setEventedParent(this,{style:this.style}),typeof B=="string"?this.style.loadURL(B):this.style.loadJSON(B),this):(delete this.style,this)},I.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Co(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},I.prototype._diffStyle=function(B,D){var W=this;if(typeof B=="string"){var q=this._requestManager.normalizeStyleURL(B),st=this._requestManager.transformRequest(q,t.ResourceType.Style);t.getJSON(st,function(Ct,wt){Ct?W.fire(new t.ErrorEvent(Ct)):wt&&W._updateDiff(wt,D)})}else typeof B=="object"&&this._updateDiff(B,D)},I.prototype._updateDiff=function(B,D){try{this.style.setState(B)&&this._update(!0)}catch(W){t.warnOnce("Unable to perform style diff: "+(W.message||W.error||W)+".  Rebuilding the style from scratch."),this._updateStyle(B,D)}},I.prototype.getStyle=function(){if(this.style)return this.style.serialize()},I.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},I.prototype.addSource=function(B,D){return this._lazyInitEmptyStyle(),this.style.addSource(B,D),this._update(!0)},I.prototype.isSourceLoaded=function(B){var D=this.style&&this.style.sourceCaches[B];if(D!==void 0)return D.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+B+"'")))},I.prototype.areTilesLoaded=function(){var B=this.style&&this.style.sourceCaches;for(var D in B){var W=B[D]._tiles;for(var q in W){var st=W[q];if(st.state!=="loaded"&&st.state!=="errored")return!1}}return!0},I.prototype.addSourceType=function(B,D,W){return this._lazyInitEmptyStyle(),this.style.addSourceType(B,D,W)},I.prototype.removeSource=function(B){return this.style.removeSource(B),this._update(!0)},I.prototype.getSource=function(B){return this.style.getSource(B)},I.prototype.addImage=function(B,D,W){W===void 0&&(W={});var q=W.pixelRatio;q===void 0&&(q=1);var st=W.sdf;st===void 0&&(st=!1);var Ct=W.stretchX,wt=W.stretchY,Ut=W.content;if(this._lazyInitEmptyStyle(),D instanceof Yn||Vn&&D instanceof Vn){var Zt=t.browser.getImageData(D);this.style.addImage(B,{data:new t.RGBAImage({width:Zt.width,height:Zt.height},Zt.data),pixelRatio:q,stretchX:Ct,stretchY:wt,content:Ut,sdf:st,version:0})}else{if(D.width===void 0||D.height===void 0)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var qt=D;this.style.addImage(B,{data:new t.RGBAImage({width:D.width,height:D.height},new Uint8Array(D.data)),pixelRatio:q,stretchX:Ct,stretchY:wt,content:Ut,sdf:st,version:0,userImage:qt}),qt.onAdd&&qt.onAdd(this,B)}},I.prototype.updateImage=function(B,D){var W=this.style.getImage(B);if(!W)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var q=D instanceof Yn||Vn&&D instanceof Vn?t.browser.getImageData(D):D,st=q.width,Ct=q.height,wt=q.data;return st===void 0||Ct===void 0?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):st!==W.data.width||Ct!==W.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(W.data.replace(wt,!(D instanceof Yn||Vn&&D instanceof Vn)),void this.style.updateImage(B,W))},I.prototype.hasImage=function(B){return B?!!this.style.getImage(B):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},I.prototype.removeImage=function(B){this.style.removeImage(B)},I.prototype.loadImage=function(B,D){t.getImage(this._requestManager.transformRequest(B,t.ResourceType.Image),D)},I.prototype.listImages=function(){return this.style.listImages()},I.prototype.addLayer=function(B,D){return this._lazyInitEmptyStyle(),this.style.addLayer(B,D),this._update(!0)},I.prototype.moveLayer=function(B,D){return this.style.moveLayer(B,D),this._update(!0)},I.prototype.removeLayer=function(B){return this.style.removeLayer(B),this._update(!0)},I.prototype.getLayer=function(B){return this.style.getLayer(B)},I.prototype.setLayerZoomRange=function(B,D,W){return this.style.setLayerZoomRange(B,D,W),this._update(!0)},I.prototype.setFilter=function(B,D,W){return W===void 0&&(W={}),this.style.setFilter(B,D,W),this._update(!0)},I.prototype.getFilter=function(B){return this.style.getFilter(B)},I.prototype.setPaintProperty=function(B,D,W,q){return q===void 0&&(q={}),this.style.setPaintProperty(B,D,W,q),this._update(!0)},I.prototype.getPaintProperty=function(B,D){return this.style.getPaintProperty(B,D)},I.prototype.setLayoutProperty=function(B,D,W,q){return q===void 0&&(q={}),this.style.setLayoutProperty(B,D,W,q),this._update(!0)},I.prototype.getLayoutProperty=function(B,D){return this.style.getLayoutProperty(B,D)},I.prototype.setLight=function(B,D){return D===void 0&&(D={}),this._lazyInitEmptyStyle(),this.style.setLight(B,D),this._update(!0)},I.prototype.getLight=function(){return this.style.getLight()},I.prototype.setFeatureState=function(B,D){return this.style.setFeatureState(B,D),this._update()},I.prototype.removeFeatureState=function(B,D){return this.style.removeFeatureState(B,D),this._update()},I.prototype.getFeatureState=function(B){return this.style.getFeatureState(B)},I.prototype.getContainer=function(){return this._container},I.prototype.getCanvasContainer=function(){return this._canvasContainer},I.prototype.getCanvas=function(){return this._canvas},I.prototype._containerDimensions=function(){var B=0,D=0;return this._container&&(B=this._container.clientWidth||400,D=this._container.clientHeight||300),[B,D]},I.prototype._detectMissingCSS=function(){t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},I.prototype._setupContainer=function(){var B=this._container;B.classList.add("mapboxgl-map"),(this._missingCSSCanary=s.create("div","mapboxgl-canary",B)).style.visibility="hidden",this._detectMissingCSS();var D=this._canvasContainer=s.create("div","mapboxgl-canvas-container",B);this._interactive&&D.classList.add("mapboxgl-interactive"),this._canvas=s.create("canvas","mapboxgl-canvas",D),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var W=this._containerDimensions();this._resizeCanvas(W[0],W[1]);var q=this._controlContainer=s.create("div","mapboxgl-control-container",B),st=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Ct){st[Ct]=s.create("div","mapboxgl-ctrl-"+Ct,q)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},I.prototype._resizeCanvas=function(B,D){var W=t.browser.devicePixelRatio||1;this._canvas.width=W*B,this._canvas.height=W*D,this._canvas.style.width=B+"px",this._canvas.style.height=D+"px"},I.prototype._setupPainter=function(){var B=t.extend({},u.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),D=this._canvas.getContext("webgl",B)||this._canvas.getContext("experimental-webgl",B);D?(this.painter=new ho(D,this.transform),t.webpSupported.testSupport(D)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},I.prototype._contextLost=function(B){B.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:B}))},I.prototype._contextRestored=function(B){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:B}))},I.prototype._onMapScroll=function(B){if(B.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},I.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},I.prototype._update=function(B){return this.style?(this._styleDirty=this._styleDirty||B,this._sourcesDirty=!0,this.triggerRepaint(),this):this},I.prototype._requestRenderFrame=function(B){return this._update(),this._renderTaskQueue.add(B)},I.prototype._cancelRenderFrame=function(B){this._renderTaskQueue.remove(B)},I.prototype._render=function(B){var D,W=this,q=0,st=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(D=st.createQueryEXT(),st.beginQueryEXT(st.TIME_ELAPSED_EXT,D),q=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(B),!this._removed){var Ct=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var wt=this.transform.zoom,Ut=t.browser.now();this.style.zoomHistory.update(wt,Ut);var Zt=new t.EvaluationParameters(wt,{now:Ut,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),qt=Zt.crossFadingFactor();qt===1&&qt===this._crossFadingFactor||(Ct=!0,this._crossFadingFactor=qt),this.style.update(Zt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||Ct)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var he=t.browser.now()-q;st.endQueryEXT(st.TIME_ELAPSED_EXT,D),setTimeout(function(){var Ae=st.getQueryObjectEXT(D,st.QUERY_RESULT_EXT)/1e6;st.deleteQueryEXT(D),W.fire(new t.Event("gpu-timing-frame",{cpuTime:he,gpuTime:Ae}))},50)}if(this.listens("gpu-timing-layer")){var me=this.painter.collectGpuTimers();setTimeout(function(){var Ae=W.painter.queryGpuTimers(me);W.fire(new t.Event("gpu-timing-layer",{layerTimes:Ae}))},50)}var De=this._sourcesDirty||this._styleDirty||this._placementDirty;return De||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||De||(this._fullyLoaded=!0),this}},I.prototype.remove=function(){this._hash&&this._hash.remove();for(var B=0,D=this._controls;B<D.length;B+=1)D[B].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),t.window!==void 0&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var W=this.painter.context.gl.getExtension("WEBGL_lose_context");W&&W.loseContext(),mr(this._canvasContainer),mr(this._controlContainer),mr(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},I.prototype.triggerRepaint=function(){var B=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(D){B._frame=null,B._render(D)}))},I.prototype._onWindowOnline=function(){this._update()},I.prototype._onWindowResize=function(B){this._trackResize&&this.resize({originalEvent:B})._update()},w.showTileBoundaries.get=function(){return!!this._showTileBoundaries},w.showTileBoundaries.set=function(B){this._showTileBoundaries!==B&&(this._showTileBoundaries=B,this._update())},w.showPadding.get=function(){return!!this._showPadding},w.showPadding.set=function(B){this._showPadding!==B&&(this._showPadding=B,this._update())},w.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},w.showCollisionBoxes.set=function(B){this._showCollisionBoxes!==B&&(this._showCollisionBoxes=B,B?this.style._generateCollisionBoxes():this._update())},w.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},w.showOverdrawInspector.set=function(B){this._showOverdrawInspector!==B&&(this._showOverdrawInspector=B,this._update())},w.repaint.get=function(){return!!this._repaint},w.repaint.set=function(B){this._repaint!==B&&(this._repaint=B,this.triggerRepaint())},w.vertices.get=function(){return!!this._vertices},w.vertices.set=function(B){this._vertices=B,this._update()},I.prototype._setCacheLimits=function(B,D){t.setCacheLimits(B,D)},w.version.get=function(){return t.version},Object.defineProperties(I.prototype,w),I}(Ze);function mr(j){j.parentNode&&j.parentNode.removeChild(j)}var Yr={showCompass:!0,showZoom:!0,visualizePitch:!1},gi=function(I){var w=this;this.options=t.extend({},Yr,I),this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(B){return B.preventDefault()}),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(B){return w._map.zoomIn({},{originalEvent:B})}),s.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(B){return w._map.zoomOut({},{originalEvent:B})}),s.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(B){w.options.visualizePitch?w._map.resetNorthPitch({},{originalEvent:B}):w._map.resetNorth({},{originalEvent:B})}),this._compassIcon=s.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};gi.prototype._updateZoomButtons=function(){var j=this._map.getZoom(),I=j===this._map.getMaxZoom(),w=j===this._map.getMinZoom();this._zoomInButton.disabled=I,this._zoomOutButton.disabled=w,this._zoomInButton.setAttribute("aria-disabled",I.toString()),this._zoomOutButton.setAttribute("aria-disabled",w.toString())},gi.prototype._rotateCompassArrow=function(){var j=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=j},gi.prototype.onAdd=function(j){return this._map=j,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Br(this._map,this._compass,this.options.visualizePitch)),this._container},gi.prototype.onRemove=function(){s.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},gi.prototype._createButton=function(j,I){var w=s.create("button",j,this._container);return w.type="button",w.addEventListener("click",I),w},gi.prototype._setButtonTitle=function(j,I){var w=this._map._getUIString("NavigationControl."+I);j.title=w,j.setAttribute("aria-label",w)};var Br=function(I,w,B){B===void 0&&(B=!1),this._clickTolerance=10,this.element=w,this.mouseRotate=new Iu({clickTolerance:I.dragRotate._mouseRotate._clickTolerance}),this.map=I,B&&(this.mousePitch=new Lu({clickTolerance:I.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),s.addEventListener(w,"mousedown",this.mousedown),s.addEventListener(w,"touchstart",this.touchstart,{passive:!1}),s.addEventListener(w,"touchmove",this.touchmove),s.addEventListener(w,"touchend",this.touchend),s.addEventListener(w,"touchcancel",this.reset)};function ai(j,I,w){if(j=new t.LngLat(j.lng,j.lat),I){var B=new t.LngLat(j.lng-360,j.lat),D=new t.LngLat(j.lng+360,j.lat),W=w.locationPoint(j).distSqr(I);w.locationPoint(B).distSqr(I)<W?j=B:w.locationPoint(D).distSqr(I)<W&&(j=D)}for(;Math.abs(j.lng-w.center.lng)>180;){var q=w.locationPoint(j);if(q.x>=0&&q.y>=0&&q.x<=w.width&&q.y<=w.height)break;j.lng>w.center.lng?j.lng-=360:j.lng+=360}return j}Br.prototype.down=function(j,I){this.mouseRotate.mousedown(j,I),this.mousePitch&&this.mousePitch.mousedown(j,I),s.disableDrag()},Br.prototype.move=function(j,I){var w=this.map,B=this.mouseRotate.mousemoveWindow(j,I);if(B&&B.bearingDelta&&w.setBearing(w.getBearing()+B.bearingDelta),this.mousePitch){var D=this.mousePitch.mousemoveWindow(j,I);D&&D.pitchDelta&&w.setPitch(w.getPitch()+D.pitchDelta)}},Br.prototype.off=function(){var j=this.element;s.removeEventListener(j,"mousedown",this.mousedown),s.removeEventListener(j,"touchstart",this.touchstart,{passive:!1}),s.removeEventListener(j,"touchmove",this.touchmove),s.removeEventListener(j,"touchend",this.touchend),s.removeEventListener(j,"touchcancel",this.reset),this.offTemp()},Br.prototype.offTemp=function(){s.enableDrag(),s.removeEventListener(t.window,"mousemove",this.mousemove),s.removeEventListener(t.window,"mouseup",this.mouseup)},Br.prototype.mousedown=function(j){this.down(t.extend({},j,{ctrlKey:!0,preventDefault:function(){return j.preventDefault()}}),s.mousePos(this.element,j)),s.addEventListener(t.window,"mousemove",this.mousemove),s.addEventListener(t.window,"mouseup",this.mouseup)},Br.prototype.mousemove=function(j){this.move(j,s.mousePos(this.element,j))},Br.prototype.mouseup=function(j){this.mouseRotate.mouseupWindow(j),this.mousePitch&&this.mousePitch.mouseupWindow(j),this.offTemp()},Br.prototype.touchstart=function(j){j.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=s.touchPos(this.element,j.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return j.preventDefault()}},this._startPos))},Br.prototype.touchmove=function(j){j.targetTouches.length!==1?this.reset():(this._lastPos=s.touchPos(this.element,j.targetTouches)[0],this.move({preventDefault:function(){return j.preventDefault()}},this._lastPos))},Br.prototype.touchend=function(j){j.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Br.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var fi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Zi(j,I,w){var B=j.classList;for(var D in fi)B.remove("mapboxgl-"+w+"-anchor-"+D);B.add("mapboxgl-"+w+"-anchor-"+I)}var Ri,Sa=function(j){function I(w,B){if(j.call(this),(w instanceof t.window.HTMLElement||B)&&(w=t.extend({element:w},B)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=w&&w.anchor||"center",this._color=w&&w.color||"#3FB1CE",this._scale=w&&w.scale||1,this._draggable=w&&w.draggable||!1,this._clickTolerance=w&&w.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=w&&w.rotation||0,this._rotationAlignment=w&&w.rotationAlignment||"auto",this._pitchAlignment=w&&w.pitchAlignment&&w.pitchAlignment!=="auto"?w.pitchAlignment:this._rotationAlignment,w&&w.element)this._element=w.element,this._offset=t.Point.convert(w&&w.offset||[0,0]);else{this._defaultMarker=!0,this._element=s.create("div"),this._element.setAttribute("aria-label","Map marker");var D=s.createNS("http://www.w3.org/2000/svg","svg");D.setAttributeNS(null,"display","block"),D.setAttributeNS(null,"height","41px"),D.setAttributeNS(null,"width","27px"),D.setAttributeNS(null,"viewBox","0 0 27 41");var W=s.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"stroke","none"),W.setAttributeNS(null,"stroke-width","1"),W.setAttributeNS(null,"fill","none"),W.setAttributeNS(null,"fill-rule","evenodd");var q=s.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"fill-rule","nonzero");var st=s.createNS("http://www.w3.org/2000/svg","g");st.setAttributeNS(null,"transform","translate(3.0, 29.0)"),st.setAttributeNS(null,"fill","#000000");for(var Ct=0,wt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Ct<wt.length;Ct+=1){var Ut=wt[Ct],Zt=s.createNS("http://www.w3.org/2000/svg","ellipse");Zt.setAttributeNS(null,"opacity","0.04"),Zt.setAttributeNS(null,"cx","10.5"),Zt.setAttributeNS(null,"cy","5.80029008"),Zt.setAttributeNS(null,"rx",Ut.rx),Zt.setAttributeNS(null,"ry",Ut.ry),st.appendChild(Zt)}var qt=s.createNS("http://www.w3.org/2000/svg","g");qt.setAttributeNS(null,"fill",this._color);var he=s.createNS("http://www.w3.org/2000/svg","path");he.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),qt.appendChild(he);var me=s.createNS("http://www.w3.org/2000/svg","g");me.setAttributeNS(null,"opacity","0.25"),me.setAttributeNS(null,"fill","#000000");var De=s.createNS("http://www.w3.org/2000/svg","path");De.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),me.appendChild(De);var Ae=s.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ae.setAttributeNS(null,"fill","#FFFFFF");var Ue=s.createNS("http://www.w3.org/2000/svg","g");Ue.setAttributeNS(null,"transform","translate(8.0, 8.0)");var qe=s.createNS("http://www.w3.org/2000/svg","circle");qe.setAttributeNS(null,"fill","#000000"),qe.setAttributeNS(null,"opacity","0.25"),qe.setAttributeNS(null,"cx","5.5"),qe.setAttributeNS(null,"cy","5.5"),qe.setAttributeNS(null,"r","5.4999962");var rn=s.createNS("http://www.w3.org/2000/svg","circle");rn.setAttributeNS(null,"fill","#FFFFFF"),rn.setAttributeNS(null,"cx","5.5"),rn.setAttributeNS(null,"cy","5.5"),rn.setAttributeNS(null,"r","5.4999962"),Ue.appendChild(qe),Ue.appendChild(rn),q.appendChild(st),q.appendChild(qt),q.appendChild(me),q.appendChild(Ae),q.appendChild(Ue),D.appendChild(q),D.setAttributeNS(null,"height",41*this._scale+"px"),D.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(D),this._offset=t.Point.convert(w&&w.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Xn){Xn.preventDefault()}),this._element.addEventListener("mousedown",function(Xn){Xn.preventDefault()}),Zi(this._element,this._anchor,"marker"),this._popup=null}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.addTo=function(w){return this.remove(),this._map=w,w.getCanvasContainer().appendChild(this._element),w.on("move",this._update),w.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},I.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),s.remove(this._element),this._popup&&this._popup.remove(),this},I.prototype.getLngLat=function(){return this._lngLat},I.prototype.setLngLat=function(w){return this._lngLat=t.LngLat.convert(w),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},I.prototype.getElement=function(){return this._element},I.prototype.setPopup=function(w){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),w){if(!("offset"in w.options)){var B=Math.sqrt(Math.pow(13.5,2)/2);w.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[B,-1*(24.6+B)],"bottom-right":[-B,-1*(24.6+B)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=w,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},I.prototype._onKeyPress=function(w){var B=w.code,D=w.charCode||w.keyCode;B!=="Space"&&B!=="Enter"&&D!==32&&D!==13||this.togglePopup()},I.prototype._onMapClick=function(w){var B=w.originalEvent.target,D=this._element;this._popup&&(B===D||D.contains(B))&&this.togglePopup()},I.prototype.getPopup=function(){return this._popup},I.prototype.togglePopup=function(){var w=this._popup;return w?(w.isOpen()?w.remove():w.addTo(this._map),this):this},I.prototype._update=function(w){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ai(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var B="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?B="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(B="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var D="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?D="rotateX(0deg)":this._pitchAlignment==="map"&&(D="rotateX("+this._map.getPitch()+"deg)"),w&&w.type!=="moveend"||(this._pos=this._pos.round()),s.setTransform(this._element,fi[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+D+" "+B)}},I.prototype.getOffset=function(){return this._offset},I.prototype.setOffset=function(w){return this._offset=t.Point.convert(w),this._update(),this},I.prototype._onMove=function(w){if(!this._isDragging){var B=this._clickTolerance||this._map._clickTolerance;this._isDragging=w.point.dist(this._pointerdownPos)>=B}this._isDragging&&(this._pos=w.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))},I.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new t.Event("dragend")),this._state="inactive"},I.prototype._addDragHandler=function(w){this._element.contains(w.originalEvent.target)&&(w.preventDefault(),this._positionDelta=w.point.sub(this._pos).add(this._offset),this._pointerdownPos=w.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},I.prototype.setDraggable=function(w){return this._draggable=!!w,this._map&&(w?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},I.prototype.isDraggable=function(){return this._draggable},I.prototype.setRotation=function(w){return this._rotation=w||0,this._update(),this},I.prototype.getRotation=function(){return this._rotation},I.prototype.setRotationAlignment=function(w){return this._rotationAlignment=w||"auto",this._update(),this},I.prototype.getRotationAlignment=function(){return this._rotationAlignment},I.prototype.setPitchAlignment=function(w){return this._pitchAlignment=w&&w!=="auto"?w:this._rotationAlignment,this._update(),this},I.prototype.getPitchAlignment=function(){return this._pitchAlignment},I}(t.Evented),ya={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},_a=0,ei=!1,Ea=function(j){function I(w){j.call(this),this.options=t.extend({},ya,w),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.onAdd=function(w){var B;return this._map=w,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),B=this._setupUI,Ri!==void 0?B(Ri):t.window.navigator.permissions!==void 0?t.window.navigator.permissions.query({name:"geolocation"}).then(function(D){B(Ri=D.state!=="denied")}):B(Ri=!!t.window.navigator.geolocation),this._container},I.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),s.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,_a=0,ei=!1},I.prototype._isOutOfMapMaxBounds=function(w){var B=this._map.getMaxBounds(),D=w.coords;return B&&(D.longitude<B.getWest()||D.longitude>B.getEast()||D.latitude<B.getSouth()||D.latitude>B.getNorth())},I.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},I.prototype._onSuccess=function(w){if(this._map){if(this._isOutOfMapMaxBounds(w))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",w)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=w,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(w),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(w),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",w)),this._finish()}},I.prototype._updateCamera=function(w){var B=new t.LngLat(w.coords.longitude,w.coords.latitude),D=w.coords.accuracy,W=this._map.getBearing(),q=t.extend({bearing:W},this.options.fitBoundsOptions);this._map.fitBounds(B.toBounds(D),q,{geolocateSource:!0})},I.prototype._updateMarker=function(w){if(w){var B=new t.LngLat(w.coords.longitude,w.coords.latitude);this._accuracyCircleMarker.setLngLat(B).addTo(this._map),this._userLocationDotMarker.setLngLat(B).addTo(this._map),this._accuracy=w.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},I.prototype._updateCircleRadius=function(){var w=this._map._container.clientHeight/2,B=this._map.unproject([0,w]),D=this._map.unproject([1,w]),W=B.distanceTo(D),q=Math.ceil(2*this._accuracy/W);this._circleElement.style.width=q+"px",this._circleElement.style.height=q+"px"},I.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},I.prototype._onError=function(w){if(this._map){if(this.options.trackUserLocation)if(w.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var B=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=B,this._geolocateButton.setAttribute("aria-label",B),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(w.code===3&&ei)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",w)),this._finish()}},I.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},I.prototype._setupUI=function(w){var B=this;if(this._container.addEventListener("contextmenu",function(q){return q.preventDefault()}),this._geolocateButton=s.create("button","mapboxgl-ctrl-geolocate",this._container),s.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",w===!1){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var D=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=D,this._geolocateButton.setAttribute("aria-label",D)}else{var W=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=W,this._geolocateButton.setAttribute("aria-label",W)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=s.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Sa(this._dotElement),this._circleElement=s.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Sa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(q){q.geolocateSource||B._watchState!=="ACTIVE_LOCK"||q.originalEvent&&q.originalEvent.type==="resize"||(B._watchState="BACKGROUND",B._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),B._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),B.fire(new t.Event("trackuserlocationend")))})},I.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":_a--,ei=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var w;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++_a>1?(w={maximumAge:6e5,timeout:0},ei=!0):(w=this.options.positionOptions,ei=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},I.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},I}(t.Evented),ka={maxWidth:100,unit:"metric"},Ga=function(I){this.options=t.extend({},ka,I),t.bindAll(["_onMove","setUnit"],this)};function Ii(j,I,w){var B=w&&w.maxWidth||100,D=j._container.clientHeight/2,W=j.unproject([0,D]),q=j.unproject([B,D]),st=W.distanceTo(q);if(w&&w.unit==="imperial"){var Ct=3.2808*st;Ct>5280?Ia(I,B,Ct/5280,j._getUIString("ScaleControl.Miles")):Ia(I,B,Ct,j._getUIString("ScaleControl.Feet"))}else w&&w.unit==="nautical"?Ia(I,B,st/1852,j._getUIString("ScaleControl.NauticalMiles")):st>=1e3?Ia(I,B,st/1e3,j._getUIString("ScaleControl.Kilometers")):Ia(I,B,st,j._getUIString("ScaleControl.Meters"))}function Ia(j,I,w,B){var D,W,q,st=(D=w,(W=Math.pow(10,(""+Math.floor(D)).length-1))*(q=(q=D/W)>=10?10:q>=5?5:q>=3?3:q>=2?2:q>=1?1:function(Ct){var wt=Math.pow(10,Math.ceil(-Math.log(Ct)/Math.LN10));return Math.round(Ct*wt)/wt}(q)));j.style.width=I*(st/w)+"px",j.innerHTML=st+"&nbsp;"+B}Ga.prototype.getDefaultPosition=function(){return"bottom-left"},Ga.prototype._onMove=function(){Ii(this._map,this._container,this.options)},Ga.prototype.onAdd=function(j){return this._map=j,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",j.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ga.prototype.onRemove=function(){s.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ga.prototype.setUnit=function(j){this.options.unit=j,Ii(this._map,this._container,this.options)};var yo=function(I){this._fullscreen=!1,I&&I.container&&(I.container instanceof t.window.HTMLElement?this._container=I.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};yo.prototype.onAdd=function(j){return this._map=j,this._container||(this._container=this._map.getContainer()),this._controlContainer=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},yo.prototype.onRemove=function(){s.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},yo.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},yo.prototype._setupUI=function(){var j=this._fullscreenButton=s.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);s.create("span","mapboxgl-ctrl-icon",j).setAttribute("aria-hidden",!0),j.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},yo.prototype._updateTitle=function(){var j=this._getTitle();this._fullscreenButton.setAttribute("aria-label",j),this._fullscreenButton.title=j},yo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},yo.prototype._isFullscreen=function(){return this._fullscreen},yo.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},yo.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var zs={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ts=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),el=function(j){function I(w){j.call(this),this.options=t.extend(Object.create(zs),w),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return j&&(I.__proto__=j),(I.prototype=Object.create(j&&j.prototype)).constructor=I,I.prototype.addTo=function(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},I.prototype.isOpen=function(){return!!this._map},I.prototype.remove=function(){return this._content&&s.remove(this._content),this._container&&(s.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},I.prototype.getLngLat=function(){return this._lngLat},I.prototype.setLngLat=function(w){return this._lngLat=t.LngLat.convert(w),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},I.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},I.prototype.getElement=function(){return this._container},I.prototype.setText=function(w){return this.setDOMContent(t.window.document.createTextNode(w))},I.prototype.setHTML=function(w){var B,D=t.window.document.createDocumentFragment(),W=t.window.document.createElement("body");for(W.innerHTML=w;B=W.firstChild;)D.appendChild(B);return this.setDOMContent(D)},I.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},I.prototype.setMaxWidth=function(w){return this.options.maxWidth=w,this._update(),this},I.prototype.setDOMContent=function(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=s.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this},I.prototype.addClassName=function(w){this._container&&this._container.classList.add(w)},I.prototype.removeClassName=function(w){this._container&&this._container.classList.remove(w)},I.prototype.setOffset=function(w){return this.options.offset=w,this._update(),this},I.prototype.toggleClassName=function(w){if(this._container)return this._container.classList.toggle(w)},I.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=s.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},I.prototype._onMouseUp=function(w){this._update(w.point)},I.prototype._onMouseMove=function(w){this._update(w.point)},I.prototype._onDrag=function(w){this._update(w.point)},I.prototype._update=function(w){var B=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=s.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=s.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Zt){return B._container.classList.add(Zt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ai(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||w)){var D=this._pos=this._trackPointer&&w?w:this._map.project(this._lngLat),W=this.options.anchor,q=function Zt(qt){if(qt){if(typeof qt=="number"){var he=Math.round(Math.sqrt(.5*Math.pow(qt,2)));return{center:new t.Point(0,0),top:new t.Point(0,qt),"top-left":new t.Point(he,he),"top-right":new t.Point(-he,he),bottom:new t.Point(0,-qt),"bottom-left":new t.Point(he,-he),"bottom-right":new t.Point(-he,-he),left:new t.Point(qt,0),right:new t.Point(-qt,0)}}if(qt instanceof t.Point||Array.isArray(qt)){var me=t.Point.convert(qt);return{center:me,top:me,"top-left":me,"top-right":me,bottom:me,"bottom-left":me,"bottom-right":me,left:me,right:me}}return{center:t.Point.convert(qt.center||[0,0]),top:t.Point.convert(qt.top||[0,0]),"top-left":t.Point.convert(qt["top-left"]||[0,0]),"top-right":t.Point.convert(qt["top-right"]||[0,0]),bottom:t.Point.convert(qt.bottom||[0,0]),"bottom-left":t.Point.convert(qt["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(qt["bottom-right"]||[0,0]),left:t.Point.convert(qt.left||[0,0]),right:t.Point.convert(qt.right||[0,0])}}return Zt(new t.Point(0,0))}(this.options.offset);if(!W){var st,Ct=this._container.offsetWidth,wt=this._container.offsetHeight;st=D.y+q.bottom.y<wt?["top"]:D.y>this._map.transform.height-wt?["bottom"]:[],D.x<Ct/2?st.push("left"):D.x>this._map.transform.width-Ct/2&&st.push("right"),W=st.length===0?"bottom":st.join("-")}var Ut=D.add(q[W]).round();s.setTransform(this._container,fi[W]+" translate("+Ut.x+"px,"+Ut.y+"px)"),Zi(this._container,W,"popup")}},I.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var w=this._container.querySelector(Ts);w&&w.focus()}},I.prototype._onClose=function(){this.remove()},I}(t.Evented),Mu={version:t.version,supported:u,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:hr,NavigationControl:gi,GeolocateControl:Ea,AttributionControl:nn,ScaleControl:Ga,FullscreenControl:yo,Popup:el,Marker:Sa,Style:Co,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){cn().acquire(Pn)},clearPrewarmedResources:function(){var I=Ar;I&&(I.isPreloaded()&&I.numActive()===1?(I.release(Pn),Ar=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(j){t.config.ACCESS_TOKEN=j},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(j){t.config.API_URL=j},get workerCount(){return dn.workerCount},set workerCount(j){dn.workerCount=j},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(j){t.config.MAX_PARALLEL_IMAGE_REQUESTS=j},clearStorage:function(I){t.clearTileCache(I)},workerUrl:""};return Mu}),T})},"4cb6":function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.multiBindToService=ct.getServiceIdentifierAsString=ct.typeConstraint=ct.namedConstraint=ct.taggedConstraint=ct.traverseAncerstors=ct.decorate=ct.id=ct.MetadataReader=ct.postConstruct=ct.targetName=ct.multiInject=ct.unmanaged=ct.optional=ct.LazyServiceIdentifer=ct.inject=ct.named=ct.tagged=ct.injectable=ct.ContainerModule=ct.AsyncContainerModule=ct.TargetTypeEnum=ct.BindingTypeEnum=ct.BindingScopeEnum=ct.Container=ct.METADATA_KEY=void 0;var V=R("xfSm");ct.METADATA_KEY=V;var E=R("9Fde");Object.defineProperty(ct,"Container",{enumerable:!0,get:function(){return E.Container}});var T=R("FV85");Object.defineProperty(ct,"BindingScopeEnum",{enumerable:!0,get:function(){return T.BindingScopeEnum}}),Object.defineProperty(ct,"BindingTypeEnum",{enumerable:!0,get:function(){return T.BindingTypeEnum}}),Object.defineProperty(ct,"TargetTypeEnum",{enumerable:!0,get:function(){return T.TargetTypeEnum}});var e=R("dxzI");Object.defineProperty(ct,"AsyncContainerModule",{enumerable:!0,get:function(){return e.AsyncContainerModule}}),Object.defineProperty(ct,"ContainerModule",{enumerable:!0,get:function(){return e.ContainerModule}});var t=R("cZ5Q");Object.defineProperty(ct,"injectable",{enumerable:!0,get:function(){return t.injectable}});var u=R("0gSV");Object.defineProperty(ct,"tagged",{enumerable:!0,get:function(){return u.tagged}});var s=R("ZzCi");Object.defineProperty(ct,"named",{enumerable:!0,get:function(){return s.named}});var c=R("Yk9n");Object.defineProperty(ct,"inject",{enumerable:!0,get:function(){return c.inject}}),Object.defineProperty(ct,"LazyServiceIdentifer",{enumerable:!0,get:function(){return c.LazyServiceIdentifer}});var r=R("jYx5");Object.defineProperty(ct,"optional",{enumerable:!0,get:function(){return r.optional}});var h=R("n2J3");Object.defineProperty(ct,"unmanaged",{enumerable:!0,get:function(){return h.unmanaged}});var n=R("jIg/");Object.defineProperty(ct,"multiInject",{enumerable:!0,get:function(){return n.multiInject}});var i=R("oaX6");Object.defineProperty(ct,"targetName",{enumerable:!0,get:function(){return i.targetName}});var a=R("Sk89");Object.defineProperty(ct,"postConstruct",{enumerable:!0,get:function(){return a.postConstruct}});var o=R("wnjb");Object.defineProperty(ct,"MetadataReader",{enumerable:!0,get:function(){return o.MetadataReader}});var l=R("d9O0");Object.defineProperty(ct,"id",{enumerable:!0,get:function(){return l.id}});var f=R("Ztfv");Object.defineProperty(ct,"decorate",{enumerable:!0,get:function(){return f.decorate}});var v=R("RR/i");Object.defineProperty(ct,"traverseAncerstors",{enumerable:!0,get:function(){return v.traverseAncerstors}}),Object.defineProperty(ct,"taggedConstraint",{enumerable:!0,get:function(){return v.taggedConstraint}}),Object.defineProperty(ct,"namedConstraint",{enumerable:!0,get:function(){return v.namedConstraint}}),Object.defineProperty(ct,"typeConstraint",{enumerable:!0,get:function(){return v.typeConstraint}});var b=R("ujMp");Object.defineProperty(ct,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return b.getServiceIdentifierAsString}});var g=R("78VC");Object.defineProperty(ct,"multiBindToService",{enumerable:!0,get:function(){return g.multiBindToService}})},"4kj+":function(Se,ct){},"4qC0":function(Se,ct,R){var V=R("NykK"),E=R("Z0cm"),T=R("ExA7"),e="[object String]";function t(u){return typeof u=="string"||!E(u)&&T(u)&&V(u)==e}Se.exports=t},"5Tg0":function(Se,ct,R){(function(V){var E=R("Kz5y"),T=ct&&!ct.nodeType&&ct,e=T&&typeof V=="object"&&V&&!V.nodeType&&V,t=e&&e.exports===T,u=t?E.Buffer:void 0,s=u?u.allocUnsafe:void 0;function c(r,h){if(h)return r.slice();var n=r.length,i=s?s(n):new r.constructor(n);return r.copy(i),i}V.exports=c}).call(this,R("hOG+")(Se))},"5gLl":function(Se,ct,R){"use strict";R.d(ct,"a",function(){return G});var V=R("lSNA"),E=R.n(V),T=R("LvWW"),e=R.n(T),t=R("0wsv");function u(U){if(!U)throw new Error("coord is required");if(!Array.isArray(U)){if(U.type==="Feature"&&U.geometry!==null&&U.geometry.type==="Point")return U.geometry.coordinates;if(U.type==="Point")return U.coordinates}if(Array.isArray(U)&&U.length>=2&&!Array.isArray(U[0])&&!Array.isArray(U[1]))return U;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function s(U){if(Array.isArray(U))return U;if(U.type==="Feature"){if(U.geometry!==null)return U.geometry.coordinates}else if(U.coordinates)return U.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function c(U){if(U.length>1&&Object(t.c)(U[0])&&Object(t.c)(U[1]))return!0;if(Array.isArray(U[0])&&U[0].length)return c(U[0]);throw new Error("coordinates must only contain numbers")}function r(U,Y,J){if(!Y||!J)throw new Error("type and name required");if(!U||U.type!==Y)throw new Error("Invalid input to "+J+": must be a "+Y+", given "+U.type)}function h(U,Y,J){if(!U)throw new Error("No feature passed");if(!J)throw new Error(".featureOf() requires a name");if(!U||U.type!=="Feature"||!U.geometry)throw new Error("Invalid input to "+J+", Feature with geometry required");if(!U.geometry||U.geometry.type!==Y)throw new Error("Invalid input to "+J+": must be a "+Y+", given "+U.geometry.type)}function n(U,Y,J){if(!U)throw new Error("No featureCollection passed");if(!J)throw new Error(".collectionOf() requires a name");if(!U||U.type!=="FeatureCollection")throw new Error("Invalid input to "+J+", FeatureCollection required");for(var rt=0,ft=U.features;rt<ft.length;rt++){var dt=ft[rt];if(!dt||dt.type!=="Feature"||!dt.geometry)throw new Error("Invalid input to "+J+", Feature with geometry required");if(!dt.geometry||dt.geometry.type!==Y)throw new Error("Invalid input to "+J+": must be a "+Y+", given "+dt.geometry.type)}}function i(U){return U.type==="Feature"?U.geometry:U}function a(U,Y){return U.type==="FeatureCollection"?"FeatureCollection":U.type==="GeometryCollection"?"GeometryCollection":U.type==="Feature"&&U.geometry!==null?U.geometry.type:U.type}function o(U,Y,J){if(U!==null)for(var rt,ft,dt,ut,Lt,Ft,Ot,St=0,xt=0,At,nt=U.type,Mt=nt==="FeatureCollection",z=nt==="Feature",Q=Mt?U.features.length:1,ht=0;ht<Q;ht++){Ot=Mt?U.features[ht].geometry:z?U.geometry:U,At=Ot?Ot.type==="GeometryCollection":!1,Lt=At?Ot.geometries.length:1;for(var et=0;et<Lt;et++){var at=0,gt=0;if(ut=At?Ot.geometries[et]:Ot,ut!==null){Ft=ut.coordinates;var k=ut.type;switch(St=J&&(k==="Polygon"||k==="MultiPolygon")?1:0,k){case null:break;case"Point":if(Y(Ft,xt,ht,at,gt)===!1)return!1;xt++,at++;break;case"LineString":case"MultiPoint":for(rt=0;rt<Ft.length;rt++){if(Y(Ft[rt],xt,ht,at,gt)===!1)return!1;xt++,k==="MultiPoint"&&at++}k==="LineString"&&at++;break;case"Polygon":case"MultiLineString":for(rt=0;rt<Ft.length;rt++){for(ft=0;ft<Ft[rt].length-St;ft++){if(Y(Ft[rt][ft],xt,ht,at,gt)===!1)return!1;xt++}k==="MultiLineString"&&at++,k==="Polygon"&&gt++}k==="Polygon"&&at++;break;case"MultiPolygon":for(rt=0;rt<Ft.length;rt++){for(gt=0,ft=0;ft<Ft[rt].length;ft++){for(dt=0;dt<Ft[rt][ft].length-St;dt++){if(Y(Ft[rt][ft][dt],xt,ht,at,gt)===!1)return!1;xt++}gt++}at++}break;case"GeometryCollection":for(rt=0;rt<ut.geometries.length;rt++)if(o(ut.geometries[rt],Y,J)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(U,Y,J,rt){var ft=J;return o(U,function(dt,ut,Lt,Ft,Ot){ut===0&&J===void 0?ft=dt:ft=Y(ft,dt,ut,Lt,Ft,Ot)},rt),ft}function f(U,Y){var J;switch(U.type){case"FeatureCollection":for(J=0;J<U.features.length&&Y(U.features[J].properties,J)!==!1;J++);break;case"Feature":Y(U.properties,0);break}}function v(U,Y,J){var rt=J;return f(U,function(ft,dt){dt===0&&J===void 0?rt=ft:rt=Y(rt,ft,dt)}),rt}function b(U,Y){if(U.type==="Feature")Y(U,0);else if(U.type==="FeatureCollection")for(var J=0;J<U.features.length&&Y(U.features[J],J)!==!1;J++);}function g(U,Y,J){var rt=J;return b(U,function(ft,dt){dt===0&&J===void 0?rt=ft:rt=Y(rt,ft,dt)}),rt}function m(U){var Y=[];return o(U,function(J){Y.push(J)}),Y}function _(U,Y){var J,rt,ft,dt,ut,Lt,Ft,Ot,St,xt,At=0,nt=U.type==="FeatureCollection",Mt=U.type==="Feature",z=nt?U.features.length:1;for(J=0;J<z;J++){for(Lt=nt?U.features[J].geometry:Mt?U.geometry:U,Ot=nt?U.features[J].properties:Mt?U.properties:{},St=nt?U.features[J].bbox:Mt?U.bbox:void 0,xt=nt?U.features[J].id:Mt?U.id:void 0,Ft=Lt?Lt.type==="GeometryCollection":!1,ut=Ft?Lt.geometries.length:1,ft=0;ft<ut;ft++){if(dt=Ft?Lt.geometries[ft]:Lt,dt===null){if(Y(null,At,Ot,St,xt)===!1)return!1;continue}switch(dt.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(Y(dt,At,Ot,St,xt)===!1)return!1;break}case"GeometryCollection":{for(rt=0;rt<dt.geometries.length;rt++)if(Y(dt.geometries[rt],At,Ot,St,xt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}At++}}function M(U,Y,J){var rt=J;return _(U,function(ft,dt,ut,Lt,Ft){dt===0&&J===void 0?rt=ft:rt=Y(rt,ft,dt,ut,Lt,Ft)}),rt}function x(U,Y){_(U,function(J,rt,ft,dt,ut){var Lt=J===null?null:J.type;switch(Lt){case null:case"Point":case"LineString":case"Polygon":return Y(Object(t.b)(J,ft,{bbox:dt,id:ut}),rt,0)===!1?!1:void 0}var Ft;switch(Lt){case"MultiPoint":Ft="Point";break;case"MultiLineString":Ft="LineString";break;case"MultiPolygon":Ft="Polygon";break}for(var Ot=0;Ot<J.coordinates.length;Ot++){var St=J.coordinates[Ot],xt={type:Ft,coordinates:St};if(Y(Object(t.b)(xt,ft),rt,Ot)===!1)return!1}})}function y(U,Y,J){var rt=J;return x(U,function(ft,dt,ut){dt===0&&ut===0&&J===void 0?rt=ft:rt=Y(rt,ft,dt,ut)}),rt}function S(U,Y){x(U,function(J,rt,ft){var dt=0;if(!!J.geometry){var ut=J.geometry.type;if(!(ut==="Point"||ut==="MultiPoint")){var Lt,Ft=0,Ot=0,St=0;if(o(J,function(xt,At,nt,Mt,z){if(Lt===void 0||rt>Ft||Mt>Ot||z>St){Lt=xt,Ft=rt,Ot=Mt,St=z,dt=0;return}var Q=Object(t.e)([Lt,xt],J.properties);if(Y(Q,rt,ft,z,dt)===!1)return!1;dt++,Lt=xt})===!1)return!1}}})}function P(U,Y,J){var rt=J,ft=!1;return S(U,function(dt,ut,Lt,Ft,Ot){ft===!1&&J===void 0?rt=dt:rt=Y(rt,dt,ut,Lt,Ft,Ot),ft=!0}),rt}function A(U,Y){if(!U)throw new Error("geojson is required");x(U,function(J,rt,ft){if(J.geometry!==null){var dt=J.geometry.type,ut=J.geometry.coordinates;switch(dt){case"LineString":if(Y(J,rt,ft,0,0)===!1)return!1;break;case"Polygon":for(var Lt=0;Lt<ut.length;Lt++)if(Y(Object(t.e)(ut[Lt],J.properties),rt,ft,Lt)===!1)return!1;break}}})}function O(U,Y,J){var rt=J;return A(U,function(ft,dt,ut,Lt){dt===0&&J===void 0?rt=ft:rt=Y(rt,ft,dt,ut,Lt)}),rt}function L(U,Y){if(Y=Y||{},!Object(t.d)(Y))throw new Error("options is invalid");var J=Y.featureIndex||0,rt=Y.multiFeatureIndex||0,ft=Y.geometryIndex||0,dt=Y.segmentIndex||0,ut=Y.properties,Lt;switch(U.type){case"FeatureCollection":J<0&&(J=U.features.length+J),ut=ut||U.features[J].properties,Lt=U.features[J].geometry;break;case"Feature":ut=ut||U.properties,Lt=U.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Lt=U;break;default:throw new Error("geojson is invalid")}if(Lt===null)return null;var Ft=Lt.coordinates;switch(Lt.type){case"Point":case"MultiPoint":return null;case"LineString":return dt<0&&(dt=Ft.length+dt-1),Object(t.e)([Ft[dt],Ft[dt+1]],ut,Y);case"Polygon":return ft<0&&(ft=Ft.length+ft),dt<0&&(dt=Ft[ft].length+dt-1),Object(t.e)([Ft[ft][dt],Ft[ft][dt+1]],ut,Y);case"MultiLineString":return rt<0&&(rt=Ft.length+rt),dt<0&&(dt=Ft[rt].length+dt-1),Object(t.e)([Ft[rt][dt],Ft[rt][dt+1]],ut,Y);case"MultiPolygon":return rt<0&&(rt=Ft.length+rt),ft<0&&(ft=Ft[rt].length+ft),dt<0&&(dt=Ft[rt][ft].length-dt-1),Object(t.e)([Ft[rt][ft][dt],Ft[rt][ft][dt+1]],ut,Y)}throw new Error("geojson is invalid")}function H(U,Y){if(Y=Y||{},!Object(t.d)(Y))throw new Error("options is invalid");var J=Y.featureIndex||0,rt=Y.multiFeatureIndex||0,ft=Y.geometryIndex||0,dt=Y.coordIndex||0,ut=Y.properties,Lt;switch(U.type){case"FeatureCollection":J<0&&(J=U.features.length+J),ut=ut||U.features[J].properties,Lt=U.features[J].geometry;break;case"Feature":ut=ut||U.properties,Lt=U.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Lt=U;break;default:throw new Error("geojson is invalid")}if(Lt===null)return null;var Ft=Lt.coordinates;switch(Lt.type){case"Point":return Object(t.f)(Ft,ut,Y);case"MultiPoint":return rt<0&&(rt=Ft.length+rt),Object(t.f)(Ft[rt],ut,Y);case"LineString":return dt<0&&(dt=Ft.length+dt),Object(t.f)(Ft[dt],ut,Y);case"Polygon":return ft<0&&(ft=Ft.length+ft),dt<0&&(dt=Ft[ft].length+dt),Object(t.f)(Ft[ft][dt],ut,Y);case"MultiLineString":return rt<0&&(rt=Ft.length+rt),dt<0&&(dt=Ft[rt].length+dt),Object(t.f)(Ft[rt][dt],ut,Y);case"MultiPolygon":return rt<0&&(rt=Ft.length+rt),ft<0&&(ft=Ft[rt].length+ft),dt<0&&(dt=Ft[rt][ft].length-dt),Object(t.f)(Ft[rt][ft][dt],ut,Y)}throw new Error("geojson is invalid")}function F(U,Y){var J=Object.keys(U);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(U);Y&&(rt=rt.filter(function(ft){return Object.getOwnPropertyDescriptor(U,ft).enumerable})),J.push.apply(J,rt)}return J}function Z(U){for(var Y=1;Y<arguments.length;Y++){var J=arguments[Y]!=null?arguments[Y]:{};Y%2?F(Object(J),!0).forEach(function(rt){E()(U,rt,J[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(J)):F(Object(J)).forEach(function(rt){Object.defineProperty(U,rt,Object.getOwnPropertyDescriptor(J,rt))})}return U}function G(U,Y){var J=[],rt={};if(U.features=U.features.filter(function(dt){var ut=dt.geometry;return dt!=null&&ut&&ut.type&&ut.coordinates&&ut.coordinates.length>0}),e()(U,!0),U.features.length===0)return{dataArray:[],featureKeys:rt};var ft=0;return x(U,function(dt,ut){var Lt=s(dt),Ft=ut,Ot=Z(Z({},dt.properties),{},{coordinates:Lt,_id:Ft});J.push(Ot)}),{dataArray:J,featureKeys:rt}}},"5ku3":function(Se,ct,R){"use strict";(function(V){R.d(ct,"a",function(){return e});var E=R("U8pU"),T=R("I0ug");function e(){var u=(typeof V=="undefined"?"undefined":Object(E.a)(V))==="object"&&String(V)==="[object process]"&&!V.browser;return!u||Object(T.a)()}function t(){return e()&&typeof document!="undefined"}}).call(this,R("Q2Ig"))},"5zYK":function(Se,ct,R){"use strict";R.d(ct,"a",function(){return r});var V=R("lSNA"),E=R.n(V),T=R("RIqP"),e=R.n(T),t=R("LvWW"),u=R.n(t);function s(h,n){var i=Object.keys(h);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(h);n&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(h,o).enumerable})),i.push.apply(i,a)}return i}function c(h){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?s(Object(i),!0).forEach(function(a){E()(h,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(a){Object.defineProperty(h,a,Object.getOwnPropertyDescriptor(i,a))})}return h}function r(h,n){var i=n.x,a=n.y,o=n.x1,l=n.y1,f=n.coordinates,v=[];return h.forEach(function(b,g){var m=[];if(i&&a&&(m=[parseFloat(b[i]),parseFloat(b[a])]),i&&a&&o&&l){var _=[parseFloat(b[i]),parseFloat(b[a])],M=[parseFloat(b[o]),parseFloat(b[l])];m=[_,M]}if(f){var x="Polygon";Array.isArray(f[0])||(x="Point"),Array.isArray(f[0])&&!Array.isArray(f[0][0])&&(x="LineString");var y={type:x,coordinates:e()(b[f])};u()(y,!0),m=y.coordinates}var S=c(c({},b),{},{_id:g,coordinates:m});v.push(S)}),{dataArray:v}}},"68d/":function(Se,ct,R){"use strict";R.d(ct,"b",function(){return Ui}),R.d(ct,"c",function(){return Vo}),R.d(ct,"a",function(){return To});var V=R("q1tI"),E=R.n(V),T=Object(V.createContext)({});function e(){return Object(V.useContext)(T)}var t=R("8ml+"),u=R("lwsE"),s=R.n(u),c=R("W8MJ"),r=R.n(c),h=R("7W2i"),n=R.n(h),i=R("a1gu"),a=R.n(i),o=R("Nsbk"),l=R.n(o),f=R("lSNA"),v=R.n(f),b=R("yG8O"),g=R.n(b),m=R("U+yc"),_=R.n(m),M=R("1ABj"),x=R("h1nZ"),y,S,P,A,O;function L(jt,yt){var K=Object.keys(jt);if(Object.getOwnPropertySymbols){var pt=Object.getOwnPropertySymbols(jt);yt&&(pt=pt.filter(function(It){return Object.getOwnPropertyDescriptor(jt,It).enumerable})),K.push.apply(K,pt)}return K}function H(jt){for(var yt=1;yt<arguments.length;yt++){var K=arguments[yt]!=null?arguments[yt]:{};yt%2?L(Object(K),!0).forEach(function(pt){v()(jt,pt,K[pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(K)):L(Object(K)).forEach(function(pt){Object.defineProperty(jt,pt,Object.getOwnPropertyDescriptor(K,pt))})}return jt}var F=(y=Object(x.lazyInject)(x.TYPES.ILogService),S=Object(x.lazyInject)(x.TYPES.IGlobalConfigService),P=function(){function jt(yt){s()(this,jt),g()(this,"logger",A,this),g()(this,"configService",O,this),this.config=void 0,this.config=yt}return r()(jt,[{key:"setContainer",value:function(K,pt){K.bind(x.TYPES.MapConfig).toConstantValue(H(H({},this.config),{},{id:pt})),K.bind(x.TYPES.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),jt}(),A=_()(P.prototype,"logger",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=_()(P.prototype,"configService",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P),Z=R("QILm"),G=R.n(Z),U=R("yXPU"),Y=R.n(U),J=R("J4zp"),rt=R.n(J),ft=R("o0o1"),dt=R.n(ft),ut=R("hi0z"),Lt=R.n(ut),Ft=R("Hel2"),Ot=R("IOcx"),St=R("4cb6");function xt(jt,yt){var K=Object.keys(jt);if(Object.getOwnPropertySymbols){var pt=Object.getOwnPropertySymbols(jt);yt&&(pt=pt.filter(function(It){return Object.getOwnPropertyDescriptor(jt,It).enumerable})),K.push.apply(K,pt)}return K}function At(jt){for(var yt=1;yt<arguments.length;yt++){var K=arguments[yt]!=null?arguments[yt]:{};yt%2?xt(Object(K),!0).forEach(function(pt){v()(jt,pt,K[pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(K)):xt(Object(K)).forEach(function(pt){Object.defineProperty(jt,pt,Object.getOwnPropertyDescriptor(K,pt))})}return jt}function nt(){var jt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},yt={top:0,right:0,bottom:0,left:0};if(typeof jt=="number")return{top:jt,right:jt,bottom:jt,left:jt};if(Array.isArray(jt)){if(jt.length===4)return{top:jt[0],right:jt[1],bottom:jt[2],left:jt[3]};if(jt.length===2)return{top:jt[0],right:jt[1],bottom:jt[0],left:jt[1]}}return At(At({},yt),jt)}var Mt={dark:"amap://styles/2a09079c3daac9420ee53b67307a8006?isPublic=true",light:"amap://styles/1fd9f8ef9751298f11f5c56968312c70?isPublic=true",normal:"amap://styles/normal",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true"},z=Math.PI/180,Q=function(){function jt(){s()(this,jt),this.projectionMatrix=Ot.b.create(),this.viewMatrix=Ot.b.create(),this.viewProjectionMatrix=Ot.b.create(),this.ViewProjectionMatrixUncentered=Ot.b.create(),this.viewUncenteredMatrix=Ot.b.create(),this.zoom=void 0,this.center=void 0}return r()(jt,[{key:"syncWithMapCamera",value:function(K){var pt=K.zoom,It=pt===void 0?1:pt,ie=K.pitch,ze=ie===void 0?0:ie,yn=K.bearing,pn=yn===void 0?0:yn,Tn=K.center,Nr=Tn===void 0?[0,0]:Tn,ce=K.offsetOrigin,be=ce===void 0?[0,0]:ce,Xe=K.cameraHeight,zn=Xe===void 0?1:Xe,lr=K.aspect,vr=lr===void 0?1:lr,Qn=K.near,Jr=Qn===void 0?.1:Qn,$r=K.far,ri=$r===void 0?1e3:$r,ui=K.fov,xi=ui===void 0?0:ui;this.zoom=It,this.center=Nr;var Ti=ze*z,pi=(360-pn)*z;Ot.b.perspective(this.projectionMatrix,xi,vr,Jr,ri);var hi=Ot.d.fromValues(zn*Math.sin(Ti)*Math.sin(pi),-zn*Math.sin(Ti)*Math.cos(pi),zn*Math.cos(Ti)),Cr=Ot.d.fromValues(-Math.cos(Ti)*Math.sin(pi),Math.cos(Ti)*Math.cos(pi),Math.sin(Ti));Ot.b.lookAt(this.viewMatrix,hi,Ot.d.fromValues(0,0,0),Cr),this.viewUncenteredMatrix=Ot.b.clone(this.viewMatrix),Ot.b.translate(this.viewMatrix,this.viewMatrix,Ot.d.fromValues(-be[0],be[1],0)),Ot.b.multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),Ot.b.multiply(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 524288}},{key:"getCenter",value:function(){var K=rt()(this.center,2),pt=K[0],It=K[1];return[pt,It]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(K,pt){var It=85.0511287798,ie=Math.max(Math.min(It,K[1]),-It),ze=256<<20,yn=Math.PI/180,pn=K[0]*yn,Tn=ie*yn;Tn=Math.log(Math.tan(Math.PI/4+Tn/2));var Nr=.5/Math.PI,ce=.5,be=-.5/Math.PI;return yn=.5,pn=ze*(Nr*pn+ce)-215440491,Tn=-(ze*(be*Tn+yn)-106744817),[pn,Tn]}}]),jt}(),ht,et,at,gt,k,ot,it,X,Et,vt,Nt,$t,ee;function kt(jt,yt){var K=Object.keys(jt);if(Object.getOwnPropertySymbols){var pt=Object.getOwnPropertySymbols(jt);yt&&(pt=pt.filter(function(It){return Object.getOwnPropertyDescriptor(jt,It).enumerable})),K.push.apply(K,pt)}return K}function Wt(jt){for(var yt=1;yt<arguments.length;yt++){var K=arguments[yt]!=null?arguments[yt]:{};yt%2?kt(Object(K),!0).forEach(function(pt){v()(jt,pt,K[pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(K)):kt(Object(K)).forEach(function(pt){Object.defineProperty(jt,pt,Object.getOwnPropertyDescriptor(K,pt))})}return jt}R("BGjm")(`/* @antv/l7-maps */
.amap-logo{
 display: none !important;
}
`);var ae=0;window.forceWebGL=!0;var le="15cd8a57710d40c9b7c0e3cc120f1200",je="1.4.15",Oe="amap-script",We=!1,Ye=[],wn=12,er=(ht=Object(St.injectable)(),et=Object(St.inject)(x.TYPES.IGlobalConfigService),at=Object(St.inject)(x.TYPES.ILogService),gt=Object(St.inject)(x.TYPES.MapConfig),k=Object(St.inject)(x.TYPES.ICoordinateSystemService),ot=Object(St.inject)(x.TYPES.IEventEmitter),ht(it=(X=function(){function jt(){var yt=this;s()(this,jt),this.map=void 0,g()(this,"configService",Et,this),g()(this,"logger",vt,this),g()(this,"config",Nt,this),g()(this,"coordinateSystemService",$t,this),g()(this,"eventEmitter",ee,this),this.markerContainer=void 0,this.$mapContainer=void 0,this.viewport=void 0,this.cameraChangedCallback=void 0,this.handleCameraChanged=function(K){var pt=K.camera,It=pt.fov,ie=pt.near,ze=pt.far,yn=pt.height,pn=pt.pitch,Tn=pt.rotation,Nr=pt.aspect,ce=pt.position,be=yt.getCenter(),Xe=be.lng,zn=be.lat;if(yt.cameraChangedCallback){yt.viewport.syncWithMapCamera({aspect:Nr,bearing:360-Tn,far:ze,fov:It,cameraHeight:yn,near:ie,pitch:pn,zoom:yt.map.getZoom()-1,center:[Xe,zn],offsetOrigin:[ce.x,ce.y]});var lr=yt.config.offsetZoom,vr=lr===void 0?wn:lr;yt.viewport.getZoom()>vr?yt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.P20_OFFSET):yt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.P20),yt.cameraChangedCallback(yt.viewport)}}}return r()(jt,[{key:"addMarkerContainer",value:function(){var K=this.map.getContainer();if(K!==null){var pt=K.getElementsByClassName("amap-maps")[0];this.markerContainer=Ft.a.create("div","l7-marker-container",pt)}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(K,pt){x.MapServiceEvent.indexOf(K)!==-1?this.eventEmitter.on(K,pt):this.map.on(K,pt)}},{key:"off",value:function(K,pt){x.MapServiceEvent.indexOf(K)!==-1?this.eventEmitter.off(K,pt):this.map.off(K,pt)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var K;return(K=this.map.getContainer())===null||K===void 0?void 0:K.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var K=this.map.getSize();return[K.getWidth(),K.getHeight()]}},{key:"getType",value:function(){return"amap"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(K){return this.map.setZoom(K)}},{key:"getCenter",value:function(K){if(K!=null&&K.padding){var pt=this.getCenter(),It=this.getSize(),ie=rt()(It,2),ze=ie[0],yn=ie[1],pn=nt(K.padding),Tn=this.lngLatToPixel([pt.lng,pt.lat]),Nr=[(pn.right-pn.left)/2,(pn.bottom-pn.top)/2],ce=this.pixelToLngLat([Tn.x-Nr[0],Tn.y-Nr[1]]);return ce}var be=this.map.getCenter();return{lng:be.getLng(),lat:be.getLat()}}},{key:"setCenter",value:function(K,pt){if(pt!=null&&pt.padding){var It=nt(pt.padding),ie=this.lngLatToPixel(K),ze=[(It.right-It.left)/2,(It.bottom-It.top)/2],yn=this.pixelToLngLat([ie.x+ze[0],ie.y+ze[1]]);this.map.setCenter([yn.lng,yn.lat])}else this.map.setCenter(K)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var K=this.map.getBounds().toBounds(),pt=K.getNorthEast(),It=K.getSouthWest(),ie=this.getCenter(),ze=ie.lng>pt.getLng()||ie.lng<It.getLng()?180-pt.getLng():pt.getLng(),yn=ie.lng<It.getLng()?It.getLng()-180:It.getLng();return[[yn,It.getLat()],[ze,pt.getLat()]]}},{key:"getMinZoom",value:function(){var K=this.map.get("zooms");return K[0]-1}},{key:"getMaxZoom",value:function(){var K=this.map.get("zooms");return K[1]-1}},{key:"setRotation",value:function(K){return this.map.setRotation(K)}},{key:"setPitch",value:function(K){return this.map.setPitch(K)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(K){this.map.panTo(K)}},{key:"panBy",value:function(K){this.map.panTo(K)}},{key:"fitBounds",value:function(K){this.map.setBounds(new AMap.Bounds([K[0][0],K[0][1],K[1][0],K[1][1]]))}},{key:"setZoomAndCenter",value:function(K,pt){this.map.setZoomAndCenter(K,pt)}},{key:"setMapStyle",value:function(K){this.map.setMapStyle(this.getMapStyle(K))}},{key:"setMapStatus",value:function(K){this.map.setStatus(K)}},{key:"pixelToLngLat",value:function(K){var pt=this.map.pixelToLngLat(new AMap.Pixel(K[0],K[1]));return{lng:pt.getLng(),lat:pt.getLat()}}},{key:"lngLatToPixel",value:function(K){var pt=this.map.lnglatToPixel(new AMap.LngLat(K[0],K[1]));return{x:pt.getX(),y:pt.getY()}}},{key:"containerToLngLat",value:function(K){var pt=new AMap.Pixel(K[0],K[1]),It=this.map.containerToLngLat(pt);return{lng:It==null?void 0:It.getLng(),lat:It==null?void 0:It.getLat()}}},{key:"lngLatToContainer",value:function(K){var pt=new AMap.LngLat(K[0],K[1]),It=this.map.lngLatToContainer(pt);return{x:It.getX(),y:It.getY()}}},{key:"lngLatToMercator",value:function(K,pt){return{x:0,y:0,z:0}}},{key:"getModelMatrix",value:function(K,pt,It){var ie=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],ze=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},yn=this.viewport.projectFlat(K),pn=Ot.b.create();return Ot.b.translate(pn,pn,Ot.d.fromValues(yn[0],yn[1],pt)),Ot.b.scale(pn,pn,Ot.d.fromValues(ie[0],ie[1],ie[2])),Ot.b.rotateX(pn,pn,It[0]),Ot.b.rotateY(pn,pn,It[1]),Ot.b.rotateZ(pn,pn,It[2]),pn}},{key:"init",value:function(){var yt=Y()(dt.a.mark(function pt(){var It=this,ie,ze,yn,pn,Tn,Nr,ce,be,Xe,zn,lr,vr,Qn,Jr;return dt.a.wrap(function(ri){for(;;)switch(ri.prev=ri.next){case 0:return ie=this.config,ze=ie.id,yn=ie.style,pn=yn===void 0?"light":yn,Tn=ie.minZoom,Nr=Tn===void 0?0:Tn,ce=ie.maxZoom,be=ce===void 0?18:ce,Xe=ie.token,zn=Xe===void 0?le:Xe,lr=ie.mapInstance,vr=ie.plugin,Qn=vr===void 0?[]:vr,Jr=G()(ie,["id","style","minZoom","maxZoom","token","mapInstance","plugin"]),ri.next=3,new Promise(function(ui){var xi=function(){if(lr)It.map=lr,It.$mapContainer=It.map.getContainer(),setTimeout(function(){It.map.on("camerachange",It.handleCameraChanged),ui()},30);else{It.$mapContainer=It.creatAmapContainer(ze);var pi=new AMap.Map(It.$mapContainer,Wt({mapStyle:It.getMapStyle(pn),zooms:[Nr,be],viewMode:"3D"},Jr));pi.on("camerachange",It.handleCameraChanged),It.map=pi,setTimeout(function(){ui()},10)}};!We&&!lr?(zn===le&&It.logger.warn(It.configService.getSceneWarninfo("MapToken")),We=!0,Qn.push("Map3D"),Lt.a.load({key:zn,version:je,plugins:Qn}).then(function(Ti){xi(),Ye.length&&(Ye.forEach(function(pi){return pi()}),Ye=[])}).catch(function(Ti){throw new Error(Ti)})):We&&window.AMap||lr?xi():Ye.push(xi)});case 3:this.viewport=new Q;case 4:case"end":return ri.stop()}},pt,this)}));function K(){return yt.apply(this,arguments)}return K}()},{key:"exportMap",value:function(K){var pt,It=(pt=this.getContainer())===null||pt===void 0?void 0:pt.getElementsByClassName("amap-layer")[0],ie=K==="jpg"?It==null?void 0:It.toDataURL("image/jpeg"):It==null?void 0:It.toDataURL("image/png");return ie}},{key:"emit",value:function(K){for(var pt,It=arguments.length,ie=new Array(It>1?It-1:0),ze=1;ze<It;ze++)ie[ze-1]=arguments[ze];(pt=this.eventEmitter).emit.apply(pt,[K].concat(ie))}},{key:"once",value:function(K){for(var pt,It=arguments.length,ie=new Array(It>1?It-1:0),ze=1;ze<It;ze++)ie[ze-1]=arguments[ze];(pt=this.eventEmitter).once.apply(pt,[K].concat(ie))}},{key:"destroy",value:function(){this.map.destroy(),delete window.initAMap;var K=document.getElementById(Oe);K&&document.head.removeChild(K)}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(K){this.cameraChangedCallback=K}},{key:"getMapStyle",value:function(K){return Mt[K]?Mt[K]:K}},{key:"creatAmapContainer",value:function(K){var pt=K;typeof K=="string"&&(pt=document.getElementById(K));var It=document.createElement("div");return It.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,It.id="l7_amap_div"+ae++,pt.appendChild(It),It}}]),jt}(),Et=_()(X.prototype,"configService",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vt=_()(X.prototype,"logger",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nt=_()(X.prototype,"config",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$t=_()(X.prototype,"coordinateSystemService",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=_()(X.prototype,"eventEmitter",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X))||it);function wr(jt){var yt=on();return function(){var pt=l()(jt),It;if(yt){var ie=l()(this).constructor;It=Reflect.construct(pt,arguments,ie)}else It=pt.apply(this,arguments);return a()(this,It)}}function on(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var en=function(jt){n()(K,jt);var yt=wr(K);function K(){return s()(this,K),yt.apply(this,arguments)}return r()(K,[{key:"getServiceConstructor",value:function(){return er}}]),K}(F);function An(jt,yt){var K=Object.keys(jt);if(Object.getOwnPropertySymbols){var pt=Object.getOwnPropertySymbols(jt);yt&&(pt=pt.filter(function(It){return Object.getOwnPropertyDescriptor(jt,It).enumerable})),K.push.apply(K,pt)}return K}function jn(jt){for(var yt=1;yt<arguments.length;yt++){var K=arguments[yt]!=null?arguments[yt]:{};yt%2?An(Object(K),!0).forEach(function(pt){pr(jt,pt,K[pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(K)):An(Object(K)).forEach(function(pt){Object.defineProperty(jt,pt,Object.getOwnPropertyDescriptor(K,pt))})}return jt}function pr(jt,yt,K){return yt in jt?Object.defineProperty(jt,yt,{value:K,enumerable:!0,configurable:!0,writable:!0}):jt[yt]=K,jt}function di(jt,yt){return Vt(jt)||pe(jt,yt)||Me(jt,yt)||Ce()}function Ce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Me(jt,yt){if(!!jt){if(typeof jt=="string")return Qt(jt,yt);var K=Object.prototype.toString.call(jt).slice(8,-1);if(K==="Object"&&jt.constructor&&(K=jt.constructor.name),K==="Map"||K==="Set")return Array.from(jt);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return Qt(jt,yt)}}function Qt(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var K=0,pt=new Array(yt);K<yt;K++)pt[K]=jt[K];return pt}function pe(jt,yt){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var K=[],pt=!0,It=!1,ie=void 0;try{for(var ze=jt[Symbol.iterator](),yn;!(pt=(yn=ze.next()).done)&&(K.push(yn.value),!(yt&&K.length===yt));pt=!0);}catch(pn){It=!0,ie=pn}finally{try{!pt&&ze.return!=null&&ze.return()}finally{if(It)throw ie}}return K}}function Vt(jt){if(Array.isArray(jt))return jt}var re=E.a.memo(function(jt){var yt=jt.style,K=jt.className,pt=jt.map,It=jt.option,ie=jt.onSceneLoaded,ze=jt.children,yn=Object(V.useRef)(null),pn=Object(V.useState)(),Tn=di(pn,2),Nr=Tn[0],ce=Tn[1];return Object(V.useEffect)(function(){var be=new t.Scene(jn(jn({id:yn.current},It),{},{map:new en(pt)}));return be.on("loaded",function(){ce(be),ie&&ie(be)}),function(){be.destroy()}},[]),Object(V.useEffect)(function(){Nr&&pt.style&&Nr.setMapStyle(pt.style)},[JSON.stringify(pt.style)]),Object(V.useEffect)(function(){Nr&&pt.zoom&&Nr.setZoom(pt.zoom)},[pt.zoom]),Object(V.useEffect)(function(){Nr&&pt.center&&Nr.setCenter(pt.center)},[JSON.stringify(pt.center)]),Object(V.useEffect)(function(){Nr&&pt.pitch&&Nr.setPitch(pt.pitch)},[pt.pitch]),Object(V.useEffect)(function(){Nr&&pt.rotation&&Nr.setRotation(pt.rotation)},[pt.rotation]),E.a.createElement(T.Provider,{value:Nr},E.a.createElement("div",{ref:yn,className:K,style:yt},Nr&&ze))}),Te=re,ue=R("4ZJM"),xe=R.n(ue),Ke=R("1OyB"),Rn=R("vuIU"),tr=R("md7G"),Pn=R("foSv"),dn=R("Ji7U"),Ar=R("JX7q"),or=R("ODXe"),cn=R("bl9R");function Pr(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Sr(jt,yt){var K=cn.transformMat4([],yt,jt);return cn.scale(K,K,1/K[3]),K}function Re(jt,yt){var K=jt%yt;return K<0?yt+K:K}function $e(jt,yt,K){return K*yt+(1-K)*jt}var Ve=R("ZaHm"),En=R("ZxFD"),xn=R("n+fv");function Nn(jt,yt){if(!jt)throw new Error(yt||"viewport-mercator-project: assertion failed.")}var mn=Math.PI,Dn=mn/4,$n=mn/180,Hn=180/mn,_n=512,br=4003e4,yr=1.5;function Fr(jt){return Math.pow(2,jt)}function Ei(jt){return Math.log2(jt)}function Ta(jt,yt){var K=Object(or.a)(jt,2),pt=K[0],It=K[1];Nn(Number.isFinite(pt)&&Number.isFinite(yt)),Nn(Number.isFinite(It)&&It>=-90&&It<=90,"invalid latitude"),yt*=_n;var ie=pt*$n,ze=It*$n,yn=yt*(ie+mn)/(2*mn),pn=yt*(mn-Math.log(Math.tan(Dn+ze*.5)))/(2*mn);return[yn,pn]}function Aa(jt,yt){var K=Object(or.a)(jt,2),pt=K[0],It=K[1];yt*=_n;var ie=pt/yt*(2*mn)-mn,ze=2*(Math.atan(Math.exp(mn-It/yt*(2*mn)))-Dn);return[ie*Hn,ze*Hn]}function eo(jt){var yt=jt.latitude;Nn(Number.isFinite(yt));var K=Math.cos(yt*$n);return Ei(br*K)-9}function Ho(jt){var yt=jt.latitude,K=jt.longitude,pt=jt.zoom,It=jt.scale,ie=jt.highPrecision,ze=ie===void 0?!1:ie;It=It!==void 0?It:Fr(pt),Nn(Number.isFinite(yt)&&Number.isFinite(K)&&Number.isFinite(It));var yn={},pn=_n*It,Tn=Math.cos(yt*$n),Nr=pn/360,ce=Nr/Tn,be=pn/br/Tn;if(yn.pixelsPerMeter=[be,-be,be],yn.metersPerPixel=[1/be,-1/be,1/be],yn.pixelsPerDegree=[Nr,-ce,be],yn.degreesPerPixel=[1/Nr,-1/ce,1/be],ze){var Xe=$n*Math.tan(yt*$n)/Tn,zn=Nr*Xe/2,lr=pn/br*Xe,vr=lr/ce*be;yn.pixelsPerDegree2=[0,-zn,lr],yn.pixelsPerMeter2=[vr,0,vr]}return yn}function Do(jt,yt){var K=Object(or.a)(jt,3),pt=K[0],It=K[1],ie=K[2],ze=Object(or.a)(yt,3),yn=ze[0],pn=ze[1],Tn=ze[2],Nr=1,ce=Ho({longitude:pt,latitude:It,scale:Nr,highPrecision:!0}),be=ce.pixelsPerMeter,Xe=ce.pixelsPerMeter2,zn=Ta(jt,Nr);zn[0]+=yn*(be[0]+Xe[0]*pn),zn[1]+=pn*(be[1]+Xe[1]*pn);var lr=Aa(zn,Nr),vr=(ie||0)+(Tn||0);return Number.isFinite(ie)||Number.isFinite(Tn)?[lr[0],lr[1],vr]:lr}function io(jt){var yt=jt.height,K=jt.pitch,pt=jt.bearing,It=jt.altitude,ie=jt.center,ze=ie===void 0?null:ie,yn=jt.flipY,pn=yn===void 0?!1:yn,Tn=Pr();return Ve.translate(Tn,Tn,[0,0,-It]),Ve.scale(Tn,Tn,[1,1,1/yt]),Ve.rotateX(Tn,Tn,-K*$n),Ve.rotateZ(Tn,Tn,pt*$n),pn&&Ve.scale(Tn,Tn,[1,-1,1]),ze&&Ve.translate(Tn,Tn,xn.negate([],ze)),Tn}function ds(jt){var yt=jt.width,K=jt.height,pt=jt.altitude,It=pt===void 0?yr:pt,ie=jt.pitch,ze=ie===void 0?0:ie,yn=jt.nearZMultiplier,pn=yn===void 0?1:yn,Tn=jt.farZMultiplier,Nr=Tn===void 0?1:Tn,ce=ze*$n,be=Math.atan(.5/It),Xe=Math.sin(be)*It/Math.sin(Math.PI/2-ce-be),zn=Math.cos(Math.PI/2-ce)*Xe+It;return{fov:2*Math.atan(K/2/It),aspect:yt/K,focalDistance:It,near:pn,far:zn*Nr}}function Ko(jt){var yt=jt.width,K=jt.height,pt=jt.pitch,It=jt.altitude,ie=jt.nearZMultiplier,ze=jt.farZMultiplier,yn=ds({width:yt,height:K,altitude:It,pitch:pt,nearZMultiplier:ie,farZMultiplier:ze}),pn=yn.fov,Tn=yn.aspect,Nr=yn.near,ce=yn.far,be=Ve.perspective([],pn,Tn,Nr,ce);return be}function jo(jt,yt){var K=Object(or.a)(jt,3),pt=K[0],It=K[1],ie=K[2],ze=ie===void 0?0:ie;return Nn(Number.isFinite(pt)&&Number.isFinite(It)&&Number.isFinite(ze)),Sr(yt,[pt,It,ze,1])}function bs(jt,yt){var K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,pt=Object(or.a)(jt,3),It=pt[0],ie=pt[1],ze=pt[2];if(Nn(Number.isFinite(It)&&Number.isFinite(ie),"invalid pixel coordinate"),Number.isFinite(ze)){var yn=Sr(yt,[It,ie,ze,1]);return yn}var pn=Sr(yt,[It,ie,0,1]),Tn=Sr(yt,[It,ie,1,1]),Nr=pn[2],ce=Tn[2],be=Nr===ce?0:((K||0)-Nr)/(ce-Nr);return En.lerp([],pn,Tn,be)}var Ra=Pr(),Xo=function(){function jt(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=yt.width,pt=yt.height,It=yt.viewMatrix,ie=It===void 0?Ra:It,ze=yt.projectionMatrix,yn=ze===void 0?Ra:ze;Object(Ke.a)(this,jt),this.width=K||1,this.height=pt||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=ie,this.projectionMatrix=yn;var pn=Pr();Ve.multiply(pn,pn,this.projectionMatrix),Ve.multiply(pn,pn,this.viewMatrix),this.viewProjectionMatrix=pn;var Tn=Pr();Ve.scale(Tn,Tn,[this.width/2,-this.height/2,1]),Ve.translate(Tn,Tn,[1,-1,0]),Ve.multiply(Tn,Tn,this.viewProjectionMatrix);var Nr=Ve.invert(Pr(),Tn);if(!Nr)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=Tn,this.pixelUnprojectionMatrix=Nr,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(Rn.a)(jt,[{key:"equals",value:function(K){return K instanceof jt?K.width===this.width&&K.height===this.height&&Ve.equals(K.projectionMatrix,this.projectionMatrix)&&Ve.equals(K.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(K){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},It=pt.topLeft,ie=It===void 0?!0:It,ze=this.projectPosition(K),yn=jo(ze,this.pixelProjectionMatrix),pn=Object(or.a)(yn,2),Tn=pn[0],Nr=pn[1],ce=ie?Nr:this.height-Nr;return K.length===2?[Tn,ce]:[Tn,ce,yn[2]]}},{key:"unproject",value:function(K){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},It=pt.topLeft,ie=It===void 0?!0:It,ze=pt.targetZ,yn=Object(or.a)(K,3),pn=yn[0],Tn=yn[1],Nr=yn[2],ce=ie?Tn:this.height-Tn,be=ze&&ze*this.pixelsPerMeter,Xe=bs([pn,ce,Nr],this.pixelUnprojectionMatrix,be),zn=this.unprojectPosition(Xe),lr=Object(or.a)(zn,3),vr=lr[0],Qn=lr[1],Jr=lr[2];return Number.isFinite(Nr)?[vr,Qn,Jr]:Number.isFinite(ze)?[vr,Qn,ze]:[vr,Qn]}},{key:"projectPosition",value:function(K){var pt=this.projectFlat(K),It=Object(or.a)(pt,2),ie=It[0],ze=It[1],yn=(K[2]||0)*this.pixelsPerMeter;return[ie,ze,yn]}},{key:"unprojectPosition",value:function(K){var pt=this.unprojectFlat(K),It=Object(or.a)(pt,2),ie=It[0],ze=It[1],yn=(K[2]||0)/this.pixelsPerMeter;return[ie,ze,yn]}},{key:"projectFlat",value:function(K){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return K}},{key:"unprojectFlat",value:function(K){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return K}}]),jt}();function Bo(jt){var yt=jt.width,K=jt.height,pt=jt.bounds,It=jt.minExtent,ie=It===void 0?0:It,ze=jt.maxZoom,yn=ze===void 0?24:ze,pn=jt.padding,Tn=pn===void 0?0:pn,Nr=jt.offset,ce=Nr===void 0?[0,0]:Nr,be=Object(or.a)(pt,2),Xe=Object(or.a)(be[0],2),zn=Xe[0],lr=Xe[1],vr=Object(or.a)(be[1],2),Qn=vr[0],Jr=vr[1];if(Number.isFinite(Tn)){var $r=Tn;Tn={top:$r,bottom:$r,left:$r,right:$r}}else Nn(Number.isFinite(Tn.top)&&Number.isFinite(Tn.bottom)&&Number.isFinite(Tn.left)&&Number.isFinite(Tn.right));var ri=new qs({width:yt,height:K,longitude:0,latitude:0,zoom:0}),ui=ri.project([zn,Jr]),xi=ri.project([Qn,lr]),Ti=[Math.max(Math.abs(xi[0]-ui[0]),ie),Math.max(Math.abs(xi[1]-ui[1]),ie)],pi=[yt-Tn.left-Tn.right-Math.abs(ce[0])*2,K-Tn.top-Tn.bottom-Math.abs(ce[1])*2];Nn(pi[0]>0&&pi[1]>0);var hi=pi[0]/Ti[0],Cr=pi[1]/Ti[1],Lr=(Tn.right-Tn.left)/2/hi,bi=(Tn.bottom-Tn.top)/2/Cr,ki=[(xi[0]+ui[0])/2+Lr,(xi[1]+ui[1])/2+bi],qr=ri.unproject(ki),da=ri.zoom+Math.log2(Math.abs(Math.min(hi,Cr)));return{longitude:qr[0],latitude:qr[1],zoom:Math.min(da,yn)}}var qs=function(jt){Object(dn.a)(yt,jt);function yt(){var K,pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},It=pt.width,ie=pt.height,ze=pt.latitude,yn=ze===void 0?0:ze,pn=pt.longitude,Tn=pn===void 0?0:pn,Nr=pt.zoom,ce=Nr===void 0?0:Nr,be=pt.pitch,Xe=be===void 0?0:be,zn=pt.bearing,lr=zn===void 0?0:zn,vr=pt.altitude,Qn=vr===void 0?1.5:vr,Jr=pt.nearZMultiplier,$r=pt.farZMultiplier;Object(Ke.a)(this,yt),It=It||1,ie=ie||1;var ri=Fr(ce);Qn=Math.max(.75,Qn);var ui=Ta([Tn,yn],ri);ui[2]=0;var xi=Ko({width:It,height:ie,pitch:Xe,bearing:lr,altitude:Qn,nearZMultiplier:Jr||1/ie,farZMultiplier:$r||1.01}),Ti=io({height:ie,center:ui,pitch:Xe,bearing:lr,altitude:Qn,flipY:!0});return K=Object(tr.a)(this,Object(Pn.a)(yt).call(this,{width:It,height:ie,viewMatrix:Ti,projectionMatrix:xi})),K.latitude=yn,K.longitude=Tn,K.zoom=ce,K.pitch=Xe,K.bearing=lr,K.altitude=Qn,K.scale=ri,K.center=ui,K.pixelsPerMeter=Ho(Object(Ar.a)(Object(Ar.a)(K))).pixelsPerMeter[2],Object.freeze(Object(Ar.a)(Object(Ar.a)(K))),K}return Object(Rn.a)(yt,[{key:"projectFlat",value:function(pt){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Ta(pt,It)}},{key:"unprojectFlat",value:function(pt){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Aa(pt,It)}},{key:"getMapCenterByLngLatPosition",value:function(pt){var It=pt.lngLat,ie=pt.pos,ze=bs(ie,this.pixelUnprojectionMatrix),yn=Ta(It,this.scale),pn=En.add([],yn,En.negate([],ze)),Tn=En.add([],this.center,pn);return Aa(Tn,this.scale)}},{key:"getLocationAtPoint",value:function(pt){var It=pt.lngLat,ie=pt.pos;return this.getMapCenterByLngLatPosition({lngLat:It,pos:ie})}},{key:"fitBounds",value:function(pt){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ie=this.width,ze=this.height,yn=Bo(Object.assign({width:ie,height:ze,bounds:pt},It)),pn=yn.longitude,Tn=yn.latitude,Nr=yn.zoom;return new yt({width:ie,height:ze,longitude:pn,latitude:Tn,zoom:Nr})}}]),yt}(Xo),ao=function(){function jt(){s()(this,jt),this.viewport=void 0}return r()(jt,[{key:"syncWithMapCamera",value:function(K){var pt=K.center,It=K.zoom,ie=K.pitch,ze=K.bearing,yn=K.viewportHeight,pn=K.viewportWidth;this.viewport=new qs({width:pn,height:yn,longitude:pt&&pt[0],latitude:pt&&pt[1],zoom:It,pitch:ie,bearing:ze})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(K,pt){return this.viewport.projectFlat(K,pt)}}]),jt}(),so={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},Hs,Ne,se,Yt,Ee,sn,Fn,rr,qn,Xr,Si,Oi,Gi;function sa(jt,yt){var K=Object.keys(jt);if(Object.getOwnPropertySymbols){var pt=Object.getOwnPropertySymbols(jt);yt&&(pt=pt.filter(function(It){return Object.getOwnPropertyDescriptor(jt,It).enumerable})),K.push.apply(K,pt)}return K}function qa(jt){for(var yt=1;yt<arguments.length;yt++){var K=arguments[yt]!=null?arguments[yt]:{};yt%2?sa(Object(K),!0).forEach(function(pt){v()(jt,pt,K[pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(K)):sa(Object(K)).forEach(function(pt){Object.defineProperty(jt,pt,Object.getOwnPropertyDescriptor(K,pt))})}return jt}R("BGjm")(`/* @antv/l7-maps */
.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:pinch-zoom;touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:none;touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 0 2px ButtonText;box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){-webkit-box-shadow:none;box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;-webkit-box-sizing:border-box;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-flex;display:-webkit-box;display:-ms-flexbox;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-flex-direction:column;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-flex-direction:column-reverse;-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-flex-direction:row-reverse;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 3px rgba(0,0,0,.35);box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`),window.mapboxgl=xe.a;var Oa={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},Eo=0,Ba=12,uo="pk.eyJ1IjoibHp4dWUiLCJhIjoiYnhfTURyRSJ9.Ugm314vAKPHBzcPmY1p4KQ",co=(Hs=Object(St.injectable)(),Ne=Object(St.inject)(x.TYPES.MapConfig),se=Object(St.inject)(x.TYPES.IGlobalConfigService),Yt=Object(St.inject)(x.TYPES.ILogService),Ee=Object(St.inject)(x.TYPES.ICoordinateSystemService),sn=Object(St.inject)(x.TYPES.IEventEmitter),Hs(Fn=(rr=function(){function jt(){var yt=this;s()(this,jt),this.map=void 0,g()(this,"config",qn,this),g()(this,"configService",Xr,this),g()(this,"logger",Si,this),g()(this,"coordinateSystemService",Oi,this),g()(this,"eventEmitter",Gi,this),this.viewport=void 0,this.markerContainer=void 0,this.cameraChangedCallback=void 0,this.$mapContainer=void 0,this.handleCameraChanged=function(){var K=yt.map.getCenter().wrap(),pt=K.lat,It=K.lng;yt.viewport.syncWithMapCamera({bearing:yt.map.getBearing(),center:[It,pt],viewportHeight:yt.map.transform.height,pitch:yt.map.getPitch(),viewportWidth:yt.map.transform.width,zoom:yt.map.getZoom(),cameraHeight:0});var ie=yt.config.offsetZoom,ze=ie===void 0?Ba:ie;yt.viewport.getZoom()>ze?yt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.LNGLAT_OFFSET):yt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.LNGLAT),yt.cameraChangedCallback(yt.viewport)}}return r()(jt,[{key:"addMarkerContainer",value:function(){var K=this.map.getCanvasContainer();this.markerContainer=Ft.a.create("div","l7-marker-container",K),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(K,pt){x.MapServiceEvent.indexOf(K)!==-1?this.eventEmitter.on(K,pt):this.map.on(Oa[K]||K,pt)}},{key:"off",value:function(K,pt){this.map.off(Oa[K]||K,pt)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){var K=this.map.transform;return[K.width,K.height]}},{key:"getType",value:function(){return"mapbox"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(K){return this.map.setZoom(K)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(K){this.map.setCenter(K)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(K){this.map.setBearing(K)}},{key:"zoomIn",value:function(K,pt){this.map.zoomIn(K,pt)}},{key:"zoomOut",value:function(K,pt){this.map.zoomOut(K,pt)}},{key:"setPitch",value:function(K){return this.map.setPitch(K)}},{key:"panTo",value:function(K){this.map.panTo(K)}},{key:"panBy",value:function(K){this.panTo(K)}},{key:"fitBounds",value:function(K,pt){this.map.fitBounds(K,pt)}},{key:"setMaxZoom",value:function(K){this.map.setMaxZoom(K)}},{key:"setMinZoom",value:function(K){this.map.setMinZoom(K)}},{key:"setMapStatus",value:function(K){K.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),K.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),K.dragEnable===!1&&this.map.dragPan.disable(),K.dragEnable===!0&&this.map.dragPan.enable(),K.rotateEnable===!1&&this.map.dragRotate.disable(),K.rotateEnable===!0&&this.map.dragRotate.enable(),K.keyboardEnable===!1&&this.map.keyboard.disable(),K.keyboardEnable===!0&&this.map.keyboard.enable(),K.zoomEnable===!1&&this.map.scrollZoom.disable(),K.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(K,pt){this.map.flyTo({zoom:K,center:pt})}},{key:"setMapStyle",value:function(K){this.map.setStyle(this.getMapStyle(K))}},{key:"pixelToLngLat",value:function(K){return this.map.unproject(K)}},{key:"lngLatToPixel",value:function(K){return this.map.project(K)}},{key:"containerToLngLat",value:function(K){return this.map.unproject(K)}},{key:"lngLatToContainer",value:function(K){return this.map.project(K)}},{key:"lngLatToMercator",value:function(K,pt){var It=window.mapboxgl.MercatorCoordinate.fromLngLat(K,pt),ie=It.x,ze=ie===void 0?0:ie,yn=It.y,pn=yn===void 0?0:yn,Tn=It.z,Nr=Tn===void 0?0:Tn;return{x:ze,y:pn,z:Nr}}},{key:"getModelMatrix",value:function(K,pt,It){var ie=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],ze=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0},yn=window.mapboxgl.MercatorCoordinate.fromLngLat(K,pt),pn=yn.meterInMercatorCoordinateUnits(),Tn=Ot.b.create();return Ot.b.translate(Tn,Tn,Ot.d.fromValues(yn.x-ze.x,yn.y-ze.y,yn.z||0-ze.z)),Ot.b.scale(Tn,Tn,Ot.d.fromValues(pn*ie[0],-pn*ie[1],pn*ie[2])),Ot.b.rotateX(Tn,Tn,It[0]),Ot.b.rotateY(Tn,Tn,It[1]),Ot.b.rotateZ(Tn,Tn,It[2]),Tn}},{key:"init",value:function(){var yt=Y()(dt.a.mark(function pt(){var It,ie,ze,yn,pn,Tn,Nr,ce,be,Xe,zn,lr,vr;return dt.a.wrap(function(Jr){for(;;)switch(Jr.prev=Jr.next){case 0:It=this.config,ie=It.id,ze=ie===void 0?"map":ie,yn=It.attributionControl,pn=yn===void 0?!1:yn,Tn=It.style,Nr=Tn===void 0?"light":Tn,ce=It.token,be=ce===void 0?uo:ce,Xe=It.rotation,zn=Xe===void 0?0:Xe,lr=It.mapInstance,vr=G()(It,["id","attributionControl","style","token","rotation","mapInstance"]),this.viewport=new ao,!lr&&!window.mapboxgl&&this.logger.error(this.configService.getSceneWarninfo("SDK")),be===uo&&Nr!=="blank"&&!window.mapboxgl.accessToken&&!lr&&this.logger.warn(this.configService.getSceneWarninfo("MapToken")),!lr&&!window.mapboxgl.accessToken&&(window.mapboxgl.accessToken=be),lr?(this.map=lr,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatAmapContainer(ze),this.map=new window.mapboxgl.Map(qa({container:this.$mapContainer,style:this.getMapStyle(Nr),attributionControl:pn,bearing:zn},vr))),this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 9:case"end":return Jr.stop()}},pt,this)}));function K(){return yt.apply(this,arguments)}return K}()},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(K){for(var pt,It=arguments.length,ie=new Array(It>1?It-1:0),ze=1;ze<It;ze++)ie[ze-1]=arguments[ze];(pt=this.eventEmitter).emit.apply(pt,[K].concat(ie))}},{key:"once",value:function(K){for(var pt,It=arguments.length,ie=new Array(It>1?It-1:0),ze=1;ze<It;ze++)ie[ze-1]=arguments[ze];(pt=this.eventEmitter).once.apply(pt,[K].concat(ie))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(K){var pt=this.map.getCanvas(),It=K==="jpg"?pt==null?void 0:pt.toDataURL("image/jpeg"):pt==null?void 0:pt.toDataURL("image/png");return It}},{key:"onCameraChanged",value:function(K){this.cameraChangedCallback=K}},{key:"creatAmapContainer",value:function(K){var pt=K;typeof K=="string"&&(pt=document.getElementById(K));var It=document.createElement("div");return It.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,It.id="l7_mapbox_div"+Eo++,pt.appendChild(It),It}},{key:"getMapStyle",value:function(K){return typeof K!="string"?K:so[K]?so[K]:K}}]),jt}(),qn=_()(rr.prototype,"config",[Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xr=_()(rr.prototype,"configService",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Si=_()(rr.prototype,"logger",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oi=_()(rr.prototype,"coordinateSystemService",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gi=_()(rr.prototype,"eventEmitter",[sn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rr))||Fn);function Ja(jt){var yt=Po();return function(){var pt=l()(jt),It;if(yt){var ie=l()(this).constructor;It=Reflect.construct(pt,arguments,ie)}else It=pt.apply(this,arguments);return a()(this,It)}}function Po(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}R("BGjm")(`/* @antv/l7-maps */
.mapboxgl-ctrl-logo {
 display: none !important;
}
`);var ls=function(jt){n()(K,jt);var yt=Ja(K);function K(){return s()(this,K),yt.apply(this,arguments)}return r()(K,[{key:"getServiceConstructor",value:function(){return co}}]),K}(F);function ko(jt,yt){var K=Object.keys(jt);if(Object.getOwnPropertySymbols){var pt=Object.getOwnPropertySymbols(jt);yt&&(pt=pt.filter(function(It){return Object.getOwnPropertyDescriptor(jt,It).enumerable})),K.push.apply(K,pt)}return K}function Es(jt){for(var yt=1;yt<arguments.length;yt++){var K=arguments[yt]!=null?arguments[yt]:{};yt%2?ko(Object(K),!0).forEach(function(pt){Co(jt,pt,K[pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(K)):ko(Object(K)).forEach(function(pt){Object.defineProperty(jt,pt,Object.getOwnPropertyDescriptor(K,pt))})}return jt}function Co(jt,yt,K){return yt in jt?Object.defineProperty(jt,yt,{value:K,enumerable:!0,configurable:!0,writable:!0}):jt[yt]=K,jt}function Za(jt,yt){return cr(jt)||gn(jt,yt)||ss(jt,yt)||Bs()}function Bs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ss(jt,yt){if(!!jt){if(typeof jt=="string")return ja(jt,yt);var K=Object.prototype.toString.call(jt).slice(8,-1);if(K==="Object"&&jt.constructor&&(K=jt.constructor.name),K==="Map"||K==="Set")return Array.from(jt);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return ja(jt,yt)}}function ja(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var K=0,pt=new Array(yt);K<yt;K++)pt[K]=jt[K];return pt}function gn(jt,yt){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var K=[],pt=!0,It=!1,ie=void 0;try{for(var ze=jt[Symbol.iterator](),yn;!(pt=(yn=ze.next()).done)&&(K.push(yn.value),!(yt&&K.length===yt));pt=!0);}catch(pn){It=!0,ie=pn}finally{try{!pt&&ze.return!=null&&ze.return()}finally{if(It)throw ie}}return K}}function cr(jt){if(Array.isArray(jt))return jt}var Gr=E.a.memo(function(jt){var yt=jt.style,K=jt.className,pt=jt.map,It=jt.option,ie=jt.onSceneLoaded,ze=Object(V.createRef)(),yn=Object(V.useState)(),pn=Za(yn,2),Tn=pn[0],Nr=pn[1];return Object(V.useEffect)(function(){var ce=new t.Scene(Es(Es({id:ze.current},It),{},{map:new ls(pt)}));return ce.on("loaded",function(){Nr(ce),ie&&ie(ce)}),function(){ce.destroy()}},[]),Object(V.useEffect)(function(){Tn&&pt.style&&Tn.setMapStyle(pt.style)},[JSON.stringify(pt.style)]),Object(V.useEffect)(function(){Tn&&pt.zoom&&Tn.setZoom(pt.zoom)},[pt.zoom]),Object(V.useEffect)(function(){Tn&&pt.center&&Tn.setCenter(pt.center)},[JSON.stringify(pt.center)]),Object(V.useEffect)(function(){Tn&&pt.pitch!==void 0&&Tn.setPitch(pt.pitch||0)},[pt.pitch]),Object(V.useEffect)(function(){Tn&&pt.rotation&&Tn.setRotation(pt.rotation)},[pt.rotation]),E.a.createElement(T.Provider,{value:Tn},Object(V.createElement)("div",{ref:ze,style:yt,className:K},Tn&&jt.children))}),Ui=Gr,za=R("PJYZ"),go=R.n(za),fo=R("QkVN"),ea=R.n(fo),to=R("uhBA"),Ns=R("cDf5"),Ss=R.n(Ns),Ka=R("zvhG"),ou=R.n(Ka);function Jo(jt,yt){var K=typeof Symbol!="undefined"&&jt[Symbol.iterator]||jt["@@iterator"];if(!K){if(Array.isArray(jt)||(K=Os(jt))||yt&&jt&&typeof jt.length=="number"){K&&(jt=K);var pt=0,It=function(){};return{s:It,n:function(){return pt>=jt.length?{done:!0}:{done:!1,value:jt[pt++]}},e:function(Tn){throw Tn},f:It}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ie=!0,ze=!1,yn;return{s:function(){K=K.call(jt)},n:function(){var Tn=K.next();return ie=Tn.done,Tn},e:function(Tn){ze=!0,yn=Tn},f:function(){try{!ie&&K.return!=null&&K.return()}finally{if(ze)throw yn}}}}function Os(jt,yt){if(!!jt){if(typeof jt=="string")return tu(jt,yt);var K=Object.prototype.toString.call(jt).slice(8,-1);if(K==="Object"&&jt.constructor&&(K=jt.constructor.name),K==="Map"||K==="Set")return Array.from(jt);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return tu(jt,yt)}}function tu(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var K=0,pt=new Array(yt);K<yt;K++)pt[K]=jt[K];return pt}var _s;function vs(jt,yt,K){var pt=K-yt,It=((jt-yt)%pt+pt)%pt+yt;return It===yt?K:It}function ts(jt,yt,K){return Math.min(K,Math.max(yt,jt))}function ws(jt,yt,K){return jt*(1-K)+yt*K}function Ms(jt,yt,K,pt){var It=new ou.a(jt,yt,K,pt);return function(ie){return It.solve(ie)}}var Ou=Ms(.25,.1,.25,1);function Bu(){return window.matchMedia?(_s==null&&(_s=window.matchMedia("(prefers-reduced-motion: reduce)")),_s.matches):!1}function So(jt,yt){var K={},pt=Jo(yt),It;try{for(pt.s();!(It=pt.n()).done;){var ie=It.value;ie in jt&&(K[ie]=jt[ie])}}catch(ze){pt.e(ze)}finally{pt.f()}return K}var eu=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date),Nu=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,Yu=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame;function al(jt){var yt=Nu(jt);return{cancel:function(){return Yu(yt)}}}var Fu=function(){function jt(yt,K){s()(this,jt),this.ne=void 0,this.sw=void 0,yt&&(K?this.setSouthWest(yt).setNorthEast(K):yt.length===4?this.setSouthWest([yt[0],yt[1]]).setNorthEast([yt[2],yt[3]]):this.setSouthWest(yt[0]).setNorthEast(yt[1]))}return r()(jt,[{key:"setNorthEast",value:function(K){return this.ne=K instanceof Ua?new Ua(K.lng,K.lat):Ua.convert(K),this}},{key:"setSouthWest",value:function(K){return this.sw=K instanceof Ua?new Ua(K.lng,K.lat):Ua.convert(K),this}},{key:"extend",value:function(K){var pt=this.sw,It=this.ne,ie,ze;if(K instanceof Ua)ie=K,ze=K;else if(K instanceof jt){if(ie=K.sw,ze=K.ne,!ie||!ze)return this}else{if(Array.isArray(K))if(K.length===4||K.every(Array.isArray)){var yn=K;return this.extend(jt.convert(yn))}else{var pn=K;return this.extend(Ua.convert(pn))}return this}return!pt&&!It?(this.sw=new Ua(ie.lng,ie.lat),this.ne=new Ua(ze.lng,ze.lat)):(pt.lng=Math.min(ie.lng,pt.lng),pt.lat=Math.min(ie.lat,pt.lat),It.lng=Math.max(ze.lng,It.lng),It.lat=Math.max(ze.lat,It.lat)),this}},{key:"getCenter",value:function(){return new Ua((this.sw.lng+this.ne.lng)/2,(this.sw.lat+this.ne.lat)/2)}},{key:"getSouthWest",value:function(){return this.sw}},{key:"getNorthEast",value:function(){return this.ne}},{key:"getNorthWest",value:function(){return new Ua(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new Ua(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this.sw.lng}},{key:"getSouth",value:function(){return this.sw.lat}},{key:"getEast",value:function(){return this.ne.lng}},{key:"getNorth",value:function(){return this.ne.lat}},{key:"toArray",value:function(){return[this.sw.toArray(),this.ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this.sw.toString(),", ").concat(this.ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this.sw&&this.ne)}},{key:"contains",value:function(K){var pt=Ua.convert(K),It=pt.lng,ie=pt.lat,ze=this.sw.lat<=ie&&ie<=this.ne.lat,yn=this.sw.lng<=It&&It<=this.ne.lng;return this.sw.lng>this.ne.lng&&(yn=this.sw.lng>=It&&It>=this.ne.lng),ze&&yn}}],[{key:"convert",value:function(K){return K instanceof jt?K:new jt(K)}}]),jt}(),Oo=63710088e-1,Ua=function(){function jt(yt,K){if(s()(this,jt),this.lng=void 0,this.lat=void 0,isNaN(yt)||isNaN(K))throw new Error("Invalid LngLat object: (".concat(yt,", ").concat(K,")"));if(this.lng=+yt,this.lat=+K,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return r()(jt,[{key:"wrap",value:function(){return new jt(vs(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toBounds",value:function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,pt=40075017,It=360*K/pt,ie=It/Math.cos(Math.PI/180*this.lat);return new Fu(new jt(this.lng-ie,this.lat-It),new jt(this.lng+ie,this.lat+It))}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(K){var pt=Math.PI/180,It=this.lat*pt,ie=K.lat*pt,ze=Math.sin(It)*Math.sin(ie)+Math.cos(It)*Math.cos(ie)*Math.cos((K.lng-this.lng)*pt),yn=Oo*Math.acos(Math.min(ze,1));return yn}}],[{key:"convert",value:function(K){if(K instanceof jt)return K;if(Array.isArray(K)&&(K.length===2||K.length===3))return new jt(Number(K[0]),Number(K[1]));if(!Array.isArray(K)&&Ss()(K)==="object"&&K!==null){var pt="lng"in K?K.lng:K.lon;return new jt(Number(pt),Number(K.lat))}throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),jt}(),ba=function(){function jt(yt,K){s()(this,jt),this.x=void 0,this.y=void 0,this.x=yt,this.y=K}return r()(jt,[{key:"clone",value:function(){return new jt(this.x,this.y)}},{key:"_add",value:function(K){return this.x+=K.x,this.y+=K.y,this}},{key:"add",value:function(K){return this.clone()._add(K)}},{key:"_sub",value:function(K){return this.x-=K.x,this.y-=K.y,this}},{key:"sub",value:function(K){return this.clone()._sub(K)}},{key:"_multByPoint",value:function(K){return this.x*=K.x,this.y*=K.y,this}},{key:"multByPoint",value:function(K){return this.clone()._multByPoint(K)}},{key:"_divByPoint",value:function(K){return this.x/=K.x,this.y/=K.y,this}},{key:"divByPoint",value:function(K){return this.clone()._divByPoint(K)}},{key:"_mult",value:function(K){return this.x*=K,this.y*=K,this}},{key:"mult",value:function(K){return this.clone()._mult(K)}},{key:"_div",value:function(K){return this.x/=K,this.y/=K,this}},{key:"div",value:function(K){return this.clone()._div(K)}},{key:"_rotate",value:function(K){var pt=Math.cos(K),It=Math.sin(K),ie=pt*this.x-It*this.y,ze=It*this.x+pt*this.y;return this.x=ie,this.y=ze,this}},{key:"rotate",value:function(K){return this.clone()._rotate(K)}},{key:"_rotateAround",value:function(K,pt){var It=Math.cos(K),ie=Math.sin(K),ze=pt.x+It*(this.x-pt.x)-ie*(this.y-pt.y),yn=pt.y+ie*(this.x-pt.x)+It*(this.y-pt.y);return this.x=ze,this.y=yn,this}},{key:"roateAround",value:function(K,pt){return this.clone()._rotateAround(K,pt)}},{key:"_matMult",value:function(K){var pt=K[0]*this.x+K[1]*this.y,It=K[2]*this.x+K[3]*this.y;return this.x=pt,this.y=It,this}},{key:"matMult",value:function(K){return this.clone()._matMult(K)}},{key:"_unit",value:function(){return this.div(this.mag()),this}},{key:"unit",value:function(){return this.clone()._unit()}},{key:"_perp",value:function(){var K=this.y;return this.y=this.x,this.x=-K,this}},{key:"perp",value:function(){return this.clone()._perp()}},{key:"_round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"round",value:function(){return this.clone()._round()}},{key:"mag",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"equals",value:function(K){return this.x===K.x&&this.y===K.y}},{key:"dist",value:function(K){return Math.sqrt(this.distSqr(K))}},{key:"distSqr",value:function(K){var pt=K.x-this.x,It=K.y-this.y;return pt*pt+It*It}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"angleTo",value:function(K){return Math.atan2(this.y-K.y,this.x-K.x)}},{key:"angleWith",value:function(K){return this.angleWithSep(K.x,K.y)}},{key:"angleWithSep",value:function(K,pt){return Math.atan2(this.x*pt-this.y*K,this.x*K+this.y*pt)}}],[{key:"convert",value:function(K){return K instanceof jt?K:Array.isArray(K)?new jt(K[0],K[1]):K}}]),jt}(),No=function(){function jt(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,pt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,It=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(s()(this,jt),this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,isNaN(yt)||yt<0||isNaN(K)||K<0||isNaN(pt)||pt<0||isNaN(It)||It<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=yt,this.bottom=K,this.left=pt,this.right=It}return r()(jt,[{key:"interpolate",value:function(K,pt,It){return pt.top!=null&&K.top!=null&&(this.top=ws(K.top,pt.top,It)),pt.bottom!=null&&K.bottom!=null&&(this.bottom=ws(K.bottom,pt.bottom,It)),pt.left!=null&&K.left!=null&&(this.left=ws(K.left,pt.left,It)),pt.right!=null&&K.right!=null&&(this.right=ws(K.right,pt.right,It)),this}},{key:"getCenter",value:function(K,pt){var It=ts((this.left+K-this.right)/2,0,K),ie=ts((this.top+pt-this.bottom)/2,0,pt);return new ba(It,ie)}},{key:"equals",value:function(K){return this.top===K.top&&this.bottom===K.bottom&&this.left===K.left&&this.right===K.right}},{key:"clone",value:function(){return new jt(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),jt}(),hu=2*Math.PI*Oo;function Zu(jt){return hu*Math.cos(jt*Math.PI/180)}function ps(jt){return(180+jt)/360}function $o(jt){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+jt*Math.PI/360)))/360}function Is(jt,yt){return jt/Zu(yt)}function su(jt){return jt*360-180}function Fo(jt){var yt=180-jt*360;return 360/Math.PI*Math.atan(Math.exp(yt*Math.PI/180))-90}function Ku(jt,yt){return jt*Zu(Fo(yt))}function Xs(jt){return 1/Math.cos(jt*Math.PI/180)}var Xa=function(){function jt(yt,K){var pt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;s()(this,jt),this.x=void 0,this.y=void 0,this.z=void 0,this.x=+yt,this.y=+K,this.z=+pt}return r()(jt,[{key:"toLngLat",value:function(){return new Ua(su(this.x),Fo(this.y))}},{key:"toAltitude",value:function(){return Ku(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/hu*Xs(Fo(this.y))}}],[{key:"fromLngLat",value:function(K){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,It=Ua.convert(K);return new jt(ps(It.lng),$o(It.lat),Is(pt,It.lat))}}]),jt}();function yl(jt,yt){var K=typeof Symbol!="undefined"&&jt[Symbol.iterator]||jt["@@iterator"];if(!K){if(Array.isArray(jt)||(K=Hl(jt))||yt&&jt&&typeof jt.length=="number"){K&&(jt=K);var pt=0,It=function(){};return{s:It,n:function(){return pt>=jt.length?{done:!0}:{done:!1,value:jt[pt++]}},e:function(Tn){throw Tn},f:It}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ie=!0,ze=!1,yn;return{s:function(){K=K.call(jt)},n:function(){var Tn=K.next();return ie=Tn.done,Tn},e:function(Tn){ze=!0,yn=Tn},f:function(){try{!ie&&K.return!=null&&K.return()}finally{if(ze)throw yn}}}}function Hl(jt,yt){if(!!jt){if(typeof jt=="string")return xl(jt,yt);var K=Object.prototype.toString.call(jt).slice(8,-1);if(K==="Object"&&jt.constructor&&(K=jt.constructor.name),K==="Map"||K==="Set")return Array.from(jt);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return xl(jt,yt)}}function xl(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var K=0,pt=new Array(yt);K<yt;K++)pt[K]=jt[K];return pt}var yc=8192,Tl=function(){function jt(yt,K,pt,It,ie){s()(this,jt),this.tileSize=void 0,this.tileZoom=void 0,this.lngRange=void 0,this.latRange=void 0,this.maxValidLatitude=void 0,this.scale=void 0,this.width=void 0,this.height=void 0,this.angle=void 0,this.rotationMatrix=void 0,this.pixelsToGLUnits=void 0,this.cameraToCenterDistance=void 0,this.mercatorMatrix=void 0,this.projMatrix=void 0,this.invProjMatrix=void 0,this.alignedProjMatrix=void 0,this.pixelMatrix=void 0,this.pixelMatrixInverse=void 0,this.glCoordMatrix=void 0,this.labelPlaneMatrix=void 0,this._fov=void 0,this._pitch=void 0,this._zoom=void 0,this._renderWorldCopies=void 0,this._minZoom=void 0,this._maxZoom=void 0,this._minPitch=void 0,this._maxPitch=void 0,this._center=void 0,this.zoomFraction=void 0,this.unmodified=void 0,this.edgeInsets=void 0,this.constraining=void 0,this.posMatrixCache=void 0,this.alignedPosMatrixCache=void 0,this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=ie===void 0?!0:ie,this._minZoom=yt||0,this._maxZoom=K||22,this._minPitch=pt==null?0:pt,this._maxPitch=It==null?60:It,this.setMaxBounds(),this.width=0,this.height=0,this._center=new Ua(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this.unmodified=!0,this.edgeInsets=new No,this.posMatrixCache={},this.alignedPosMatrixCache={}}return r()(jt,[{key:"minZoom",get:function(){return this._minZoom},set:function(K){this._minZoom!==K&&(this._minZoom=K,this.zoom=Math.max(this.zoom,K))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(K){this._maxZoom!==K&&(this._maxZoom=K,this.zoom=Math.min(this.zoom,K))}},{key:"minPitch",get:function(){return this._minPitch},set:function(K){this._minPitch!==K&&(this._minPitch=K,this._pitch=Math.max(this._pitch,K))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(K){this._maxPitch!==K&&(this._maxPitch=K,this._pitch=Math.min(this._pitch,K))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(K){K===void 0?K=!0:K===null&&(K=!1),this._renderWorldCopies=K}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new ba(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(K){var pt=-vs(K,-180,180)*Math.PI/180;this.angle!==pt&&(this.unmodified=!1,this.angle=pt,this.calcMatrices(),this.rotationMatrix=Ot.a.create(),Ot.a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(K){var pt=ts(K,this._minPitch,this._maxPitch)/180*Math.PI;this._pitch!==pt&&(this.unmodified=!1,this._pitch=pt,this.calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(K){K=Math.max(.01,Math.min(60,K)),this._fov!==K&&(this.unmodified=!1,this._fov=K/180*Math.PI,this.calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(K){var pt=Math.min(Math.max(K,this._minZoom),this._maxZoom);this._zoom!==pt&&(this.unmodified=!1,this._zoom=pt,this.scale=this.zoomScale(pt),this.tileZoom=Math.floor(pt),this.zoomFraction=pt-this.tileZoom,this.constrain(),this.calcMatrices())}},{key:"center",get:function(){return this._center},set:function(K){K.lat===this._center.lat&&K.lng===this._center.lng||(this.unmodified=!1,this._center=K,this.constrain(),this.calcMatrices())}},{key:"padding",get:function(){return this.edgeInsets.toJSON()},set:function(K){this.edgeInsets.equals(K)||(this.unmodified=!1,this.edgeInsets.interpolate(this.edgeInsets,K,1),this.calcMatrices())}},{key:"centerPoint",get:function(){return this.edgeInsets.getCenter(this.width,this.height)}},{key:"point",get:function(){return this.project(this.center)}},{key:"clone",value:function(){var K=new jt(this._minZoom,this._maxZoom,this._minPitch,this._maxPitch,this._renderWorldCopies);return K.tileSize=this.tileSize,K.latRange=this.latRange,K.width=this.width,K.height=this.height,K.center=this._center,K.zoom=this.zoom,K.angle=this.angle,K.fov=this._fov,K.pitch=this._pitch,K.unmodified=this.unmodified,K.edgeInsets=this.edgeInsets.clone(),K.calcMatrices(),K}},{key:"isPaddingEqual",value:function(K){return this.edgeInsets.equals(K)}},{key:"interpolatePadding",value:function(K,pt,It){this.unmodified=!1,this.edgeInsets.interpolate(K,pt,It),this.constrain(),this.calcMatrices()}},{key:"coveringZoomLevel",value:function(K){var pt=(K.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/K.tileSize));return Math.max(0,pt)}},{key:"resize",value:function(K,pt){this.width=K,this.height=pt,this.pixelsToGLUnits=[2/K,-2/pt],this.constrain(),this.calcMatrices()}},{key:"zoomScale",value:function(K){return Math.pow(2,K)}},{key:"scaleZoom",value:function(K){return Math.log(K)/Math.LN2}},{key:"project",value:function(K){var pt=ts(K.lat,-this.maxValidLatitude,this.maxValidLatitude);return new ba(ps(K.lng)*this.worldSize,$o(pt)*this.worldSize)}},{key:"unproject",value:function(K){return new Xa(K.x/this.worldSize,K.y/this.worldSize).toLngLat()}},{key:"setLocationAtPoint",value:function(K,pt){var It=this.pointCoordinate(pt),ie=this.pointCoordinate(this.centerPoint),ze=this.locationCoordinate(K),yn=new Xa(ze.x-(It.x-ie.x),ze.y-(It.y-ie.y));this.center=this.coordinateLocation(yn),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"pointCoordinate",value:function(K){var pt=0,It=new Float32Array([K.x,K.y,0,1]),ie=new Float32Array([K.x,K.y,1,1]);Ot.e.transformMat4(It,It,this.pixelMatrixInverse),Ot.e.transformMat4(ie,ie,this.pixelMatrixInverse);var ze=It[3],yn=ie[3],pn=It[0]/ze,Tn=ie[0]/yn,Nr=It[1]/ze,ce=ie[1]/yn,be=It[2]/ze,Xe=ie[2]/yn,zn=be===Xe?0:(pt-be)/(Xe-be);return new Xa(ws(pn,Tn,zn)/this.worldSize,ws(Nr,ce,zn)/this.worldSize)}},{key:"getBounds",value:function(){return new Fu().extend(this.pointLocation(new ba(0,0))).extend(this.pointLocation(new ba(this.width,0))).extend(this.pointLocation(new ba(this.width,this.height))).extend(this.pointLocation(new ba(0,this.height)))}},{key:"getMaxBounds",value:function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new Fu([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])}},{key:"setMaxBounds",value:function(K){K?(this.lngRange=[K.getWest(),K.getEast()],this.latRange=[K.getSouth(),K.getNorth()],this.constrain()):(this.lngRange=void 0,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"maxPitchScaleFactor",value:function(){if(!this.pixelMatrixInverse)return 1;var K=this.pointCoordinate(new ba(0,0)),pt=new Float32Array([K.x*this.worldSize,K.y*this.worldSize,0,1]),It=Ot.e.transformMat4(pt,pt,this.pixelMatrix);return It[3]/this.cameraToCenterDistance}},{key:"getCameraPoint",value:function(){var K=this._pitch,pt=Math.tan(K)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new ba(0,pt))}},{key:"getCameraQueryGeometry",value:function(K){var pt=this.getCameraPoint();if(K.length===1)return[K[0],pt];var It=pt.x,ie=pt.y,ze=pt.x,yn=pt.y,pn=yl(K),Tn;try{for(pn.s();!(Tn=pn.n()).done;){var Nr=Tn.value;It=Math.min(It,Nr.x),ie=Math.min(ie,Nr.y),ze=Math.max(ze,Nr.x),yn=Math.max(yn,Nr.y)}}catch(ce){pn.e(ce)}finally{pn.f()}return[new ba(It,ie),new ba(ze,ie),new ba(ze,yn),new ba(It,yn),new ba(It,ie)]}},{key:"coordinatePoint",value:function(K){var pt=Ot.e.fromValues(K.x*this.worldSize,K.y*this.worldSize,0,1);return Ot.e.transformMat4(pt,pt,this.pixelMatrix),new ba(pt[0]/pt[3],pt[1]/pt[3])}},{key:"locationPoint",value:function(K){return this.coordinatePoint(this.locationCoordinate(K))}},{key:"pointLocation",value:function(K){return this.coordinateLocation(this.pointCoordinate(K))}},{key:"locationCoordinate",value:function(K){return Xa.fromLngLat(K)}},{key:"coordinateLocation",value:function(K){return K.toLngLat()}},{key:"getProjectionMatrix",value:function(){return this.projMatrix}},{key:"constrain",value:function(){if(!(!this.center||!this.width||!this.height||this.constraining)){this.constraining=!0;var K=-90,pt=90,It=-180,ie=180,ze,yn,pn,Tn,Nr=this.size,ce=this.unmodified;if(this.latRange){var be=this.latRange;K=$o(be[1])*this.worldSize,pt=$o(be[0])*this.worldSize,ze=pt-K<Nr.y?Nr.y/(pt-K):0}if(this.lngRange){var Xe=this.lngRange;It=ps(Xe[0])*this.worldSize,ie=ps(Xe[1])*this.worldSize,yn=ie-It<Nr.x?Nr.x/(ie-It):0}var zn=this.point,lr=Math.max(yn||0,ze||0);if(lr){this.center=this.unproject(new ba(yn?(ie+It)/2:zn.x,ze?(pt+K)/2:zn.y)),this.zoom+=this.scaleZoom(lr),this.unmodified=ce,this.constraining=!1;return}if(this.latRange){var vr=zn.y,Qn=Nr.y/2;vr-Qn<K&&(Tn=K+Qn),vr+Qn>pt&&(Tn=pt-Qn)}if(this.lngRange){var Jr=zn.x,$r=Nr.x/2;Jr-$r<It&&(pn=It+$r),Jr+$r>ie&&(pn=ie-$r)}(pn!==void 0||Tn!==void 0)&&(this.center=this.unproject(new ba(pn!==void 0?pn:zn.x,Tn!==void 0?Tn:zn.y))),this.unmodified=ce,this.constraining=!1}}},{key:"calcMatrices",value:function(){if(!!this.height){var K=this._fov/2,pt=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(K)*this.height;var It=Math.PI/2+this._pitch,ie=this._fov*(.5+pt.y/this.height),ze=Math.sin(ie)*this.cameraToCenterDistance/Math.sin(ts(Math.PI-It-ie,.01,Math.PI-.01)),yn=this.point,pn=yn.x,Tn=yn.y,Nr=Math.cos(Math.PI/2-this._pitch)*ze+this.cameraToCenterDistance,ce=Nr*1.01,be=this.height/50,Xe=Ot.b.create();Ot.b.perspective(Xe,this._fov,this.width/this.height,be,ce),Xe[8]=-pt.x*2/this.width,Xe[9]=pt.y*2/this.height,Ot.b.scale(Xe,Xe,[1,-1,1]),Ot.b.translate(Xe,Xe,[0,0,-this.cameraToCenterDistance]),Ot.b.rotateX(Xe,Xe,this._pitch),Ot.b.rotateZ(Xe,Xe,this.angle),Ot.b.translate(Xe,Xe,[-pn,-Tn,0]),this.mercatorMatrix=Ot.b.scale(Ot.b.create(),Xe,[this.worldSize,this.worldSize,this.worldSize]),Ot.b.scale(Xe,Xe,Ot.d.fromValues(1,1,Is(1,this.center.lat)*this.worldSize)),this.projMatrix=Xe,this.invProjMatrix=Ot.b.invert(Ot.b.create(),this.projMatrix);var zn=this.width%2/2,lr=this.height%2/2,vr=Math.cos(this.angle),Qn=Math.sin(this.angle),Jr=pn-Math.round(pn)+vr*zn+Qn*lr,$r=Tn-Math.round(Tn)+vr*lr+Qn*zn,ri=Ot.b.clone(Xe);if(Ot.b.translate(ri,ri,[Jr>.5?Jr-1:Jr,$r>.5?$r-1:$r,0]),this.alignedProjMatrix=ri,Xe=Ot.b.create(),Ot.b.scale(Xe,Xe,[this.width/2,-this.height/2,1]),Ot.b.translate(Xe,Xe,[1,-1,0]),this.labelPlaneMatrix=Xe,Xe=Ot.b.create(),Ot.b.scale(Xe,Xe,[1,-1,1]),Ot.b.translate(Xe,Xe,[-1,-1,0]),Ot.b.scale(Xe,Xe,[2/this.width,2/this.height,1]),this.glCoordMatrix=Xe,this.pixelMatrix=Ot.b.multiply(Ot.b.create(),this.labelPlaneMatrix,this.projMatrix),Xe=Ot.b.invert(Ot.b.create(),this.pixelMatrix),!Xe)throw new Error("failed to invert matrix");this.pixelMatrixInverse=Xe,this.posMatrixCache={},this.alignedPosMatrixCache={}}}}]),jt}(),oo=function jt(yt){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s()(this,jt),this.type=void 0,ea()(this,K),this.type=yt};function wu(jt){var yt=bl();return function(){var pt=l()(jt),It;if(yt){var ie=l()(this).constructor;It=Reflect.construct(pt,arguments,ie)}else It=pt.apply(this,arguments);return a()(this,It)}}function bl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var nu=function(jt){n()(K,jt);var yt=wu(K);function K(pt){var It;s()(this,K),It=yt.call(this),It.transform=void 0,It.options=void 0,It.moving=void 0,It.zooming=void 0,It.rotating=void 0,It.pitching=void 0,It.padding=void 0,It.bearingSnap=void 0,It.easeEndTimeoutID=void 0,It.easeStart=void 0,It.easeOptions=void 0,It.easeId=void 0,It.onEaseFrame=void 0,It.onEaseEnd=void 0,It.easeFrameId=void 0,It.renderFrameCallback=function(){var Nr=Math.min((eu()-It.easeStart)/It.easeOptions.duration,1);It.onEaseFrame(It.easeOptions.easing(Nr)),Nr<1?It.easeFrameId=It.requestRenderFrame(It.renderFrameCallback):It.stop()},It.options=pt;var ie=pt.minZoom,ze=pt.maxZoom,yn=pt.minPitch,pn=pt.maxPitch,Tn=pt.renderWorldCopies;return It.moving=!1,It.zooming=!1,It.bearingSnap=pt.bearingSnap,It.transform=new Tl(ie,ze,yn,pn,Tn),It}return r()(K,[{key:"requestRenderFrame",value:function(It){return 0}},{key:"cancelRenderFrame",value:function(It){}},{key:"getCenter",value:function(){var It=this.transform.center,ie=It.lng,ze=It.lat;return new Ua(ie,ze)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setCenter",value:function(It,ie){return this.jumpTo({center:It},ie)}},{key:"setPitch",value:function(It,ie){return this.jumpTo({pitch:It},ie),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"panTo",value:function(It,ie,ze){return this.easeTo(ea()({center:It},ie),ze)}},{key:"zoomOut",value:function(It,ie){return this.zoomTo(this.getZoom()-1,It,ie),this}},{key:"setBearing",value:function(It,ie){return this.jumpTo({bearing:It},ie),this}},{key:"setZoom",value:function(It,ie){return this.jumpTo({zoom:It},ie),this}},{key:"zoomIn",value:function(It,ie){return this.zoomTo(this.getZoom()+1,It,ie),this}},{key:"zoomTo",value:function(It,ie,ze){return this.easeTo(ea()({zoom:It},ie),ze)}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(It,ie){return this.jumpTo({padding:It},ie),this}},{key:"rotateTo",value:function(It,ie,ze){return this.easeTo(ea()({bearing:It},ie),ze)}},{key:"resetNorth",value:function(It,ie){return this.rotateTo(0,ea()({duration:1e3},It),ie),this}},{key:"resetNorthPitch",value:function(It,ie){return this.easeTo(ea()({bearing:0,pitch:0,duration:1e3},It),ie),this}},{key:"fitBounds",value:function(It,ie,ze){return this.fitInternal(this.cameraForBounds(It,ie),ie,ze)}},{key:"cameraForBounds",value:function(It,ie){return It=Fu.convert(It),this.cameraForBoxAndBearing(It.getNorthWest(),It.getSouthEast(),0,ie)}},{key:"snapToNorth",value:function(It,ie){return Math.abs(this.getBearing())<this.bearingSnap?this.resetNorth(It,ie):this}},{key:"jumpTo",value:function(){var It=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ie=arguments.length>1?arguments[1]:void 0;this.stop();var ze=this.transform,yn=!1,pn=!1,Tn=!1;return It.zoom&&ze.zoom!==+It.zoom&&(yn=!0,ze.zoom=+It.zoom),It.center!==void 0&&(ze.center=Ua.convert(It.center)),It.bearing&&ze.bearing!==+It.bearing&&(pn=!0,ze.bearing=+It.bearing),It.pitch&&ze.pitch!==+It.pitch&&(Tn=!0,ze.pitch=+It.pitch),It.padding!=null&&!ze.isPaddingEqual(It.padding)&&(ze.padding=It.padding),this.emit("movestart",new oo("movestart",ie)),this.emit("move",new oo("move",ie)),yn&&(this.emit("zoomstart",new oo("zoomstart",ie)),this.emit("zoom",new oo("zoom",ie)),this.emit("zoomend",new oo("zoomend",ie))),pn&&(this.emit("rotatestart",new oo("rotatestart",ie)),this.emit("rotate",new oo("rotate",ie)),this.emit("rotateend",new oo("rotateend",ie))),Tn&&(this.emit("pitchstart",new oo("pitchstart",ie)),this.emit("pitch",new oo("pitch",ie)),this.emit("pitchend",new oo("pitchend",ie))),this.emit("moveend",new oo("moveend",ie))}},{key:"easeTo",value:function(){var It=this,ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ze=arguments.length>1?arguments[1]:void 0;ie=ea()({offset:[0,0],duration:500,easing:Ou},ie),(ie.animate===!1||!ie.essential&&Bu())&&(ie.duration=0);var yn=this.transform,pn=this.getZoom(),Tn=this.getBearing(),Nr=this.getPitch(),ce=this.getPadding(),be=ie.zoom?+ie.zoom:pn,Xe=ie.bearing?this.normalizeBearing(ie.bearing,Tn):Tn,zn=ie.pitch?+ie.pitch:Nr,lr=ie.padding?ie.padding:yn.padding,vr=ba.convert(ie.offset),Qn=yn.centerPoint.add(vr),Jr=yn.pointLocation(Qn),$r=Ua.convert(ie.center||Jr);this.normalizeCenter($r);var ri=yn.project(Jr),ui=yn.project($r).sub(ri),xi=yn.zoomScale(be-pn),Ti,pi;ie.around&&(Ti=Ua.convert(ie.around),pi=yn.locationPoint(Ti));var hi={moving:this.moving,zooming:this.zooming,rotating:this.rotating,pitching:this.pitching};return this.zooming=this.zooming||be!==pn,this.rotating=this.rotating||Tn!==Xe,this.pitching=this.pitching||zn!==Nr,this.padding=!yn.isPaddingEqual(lr),this.easeId=ie.easeId,this.prepareEase(ze,ie.noMoveStart,hi),clearTimeout(this.easeEndTimeoutID),this.ease(function(Cr){if(It.zooming&&(yn.zoom=ws(pn,be,Cr)),It.rotating&&(yn.bearing=ws(Tn,Xe,Cr)),It.pitching&&(yn.pitch=ws(Nr,zn,Cr)),It.padding&&(yn.interpolatePadding(ce,lr,Cr),Qn=yn.centerPoint.add(vr)),Ti)yn.setLocationAtPoint(Ti,pi);else{var Lr=yn.zoomScale(yn.zoom-pn),bi=be>pn?Math.min(2,xi):Math.max(.5,xi),ki=Math.pow(bi,1-Cr),qr=yn.unproject(ri.add(ui.mult(Cr*ki)).mult(Lr));yn.setLocationAtPoint(yn.renderWorldCopies?qr.wrap():qr,Qn)}It.fireMoveEvents(ze)},function(Cr){It.afterEase(ze,Cr)},ie),this}},{key:"flyTo",value:function(){var It=this,ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ze=arguments.length>1?arguments[1]:void 0;if(!ie.essential&&Bu()){var yn=So(ie,["center","zoom","bearing","pitch","around"]);return this.jumpTo(yn,ze)}this.stop(),ie=ea()({offset:[0,0],speed:1.2,curve:1.42,easing:Ou},ie);var pn=this.transform,Tn=this.getZoom(),Nr=this.getBearing(),ce=this.getPitch(),be=this.getPadding(),Xe=ie.zoom?ts(+ie.zoom,pn.minZoom,pn.maxZoom):Tn,zn=ie.bearing?this.normalizeBearing(ie.bearing,Nr):Nr,lr=ie.pitch?+ie.pitch:ce,vr="padding"in ie?ie.padding:pn.padding,Qn=pn.zoomScale(Xe-Tn),Jr=ba.convert(ie.offset),$r=pn.centerPoint.add(Jr),ri=pn.pointLocation($r),ui=Ua.convert(ie.center||ri);this.normalizeCenter(ui);var xi=pn.project(ri),Ti=pn.project(ui).sub(xi),pi=ie.curve,hi=Math.max(pn.width,pn.height),Cr=hi/Qn,Lr=Ti.mag();if("minZoom"in ie){var bi=ts(Math.min(ie.minZoom,Tn,Xe),pn.minZoom,pn.maxZoom),ki=hi/pn.zoomScale(bi-Tn);pi=Math.sqrt(ki/Lr*2)}var qr=pi*pi;function da(ia){var pa=(Cr*Cr-hi*hi+(ia?-1:1)*qr*qr*Lr*Lr)/(2*(ia?Cr:hi)*qr*Lr);return Math.log(Math.sqrt(pa*pa+1)-pa)}function Li(ia){return(Math.exp(ia)-Math.exp(-ia))/2}function mi(ia){return(Math.exp(ia)+Math.exp(-ia))/2}function Pi(ia){return Li(ia)/mi(ia)}var wi=da(0),ca=function(pa){return mi(wi)/mi(wi+pi*pa)},Pa=function(pa){return hi*((mi(wi)*Pi(wi+pi*pa)-Li(wi))/qr)/Lr},Bi=(da(1)-wi)/pi;if(Math.abs(Lr)<1e-6||!isFinite(Bi)){if(Math.abs(hi-Cr)<1e-6)return this.easeTo(ie,ze);var Ai=Cr<hi?-1:1;Bi=Math.abs(Math.log(Cr/hi))/pi,Pa=function(){return 0},ca=function(pa){return Math.exp(Ai*pi*pa)}}if("duration"in ie)ie.duration=+ie.duration;else{var yi="screenSpeed"in ie?+ie.screenSpeed/pi:+ie.speed;ie.duration=1e3*Bi/yi}return ie.maxDuration&&ie.duration>ie.maxDuration&&(ie.duration=0),this.zooming=!0,this.rotating=Nr!==zn,this.pitching=lr!==ce,this.padding=!pn.isPaddingEqual(vr),this.prepareEase(ze,!1),this.ease(function(ia){var pa=ia*Bi,qi=1/ca(pa);pn.zoom=ia===1?Xe:Tn+pn.scaleZoom(qi),It.rotating&&(pn.bearing=ws(Nr,zn,ia)),It.pitching&&(pn.pitch=ws(ce,lr,ia)),It.padding&&(pn.interpolatePadding(be,vr,ia),$r=pn.centerPoint.add(Jr));var vo=ia===1?ui:pn.unproject(xi.add(Ti.mult(Pa(pa))).mult(qi));pn.setLocationAtPoint(pn.renderWorldCopies?vo.wrap():vo,$r),It.fireMoveEvents(ze)},function(){return It.afterEase(ze)},ie),this}},{key:"fitScreenCoordinates",value:function(It,ie,ze,yn,pn){return this.fitInternal(this.cameraForBoxAndBearing(this.transform.pointLocation(ba.convert(It)),this.transform.pointLocation(ba.convert(ie)),ze,yn),yn,pn)}},{key:"stop",value:function(It,ie){if(this.easeFrameId&&(this.cancelRenderFrame(this.easeFrameId),delete this.easeFrameId,delete this.onEaseFrame),this.onEaseEnd){var ze=this.onEaseEnd;delete this.onEaseEnd,ze.call(this,ie)}return this}},{key:"normalizeBearing",value:function(It,ie){It=vs(It,-180,180);var ze=Math.abs(It-ie);return Math.abs(It-360-ie)<ze&&(It-=360),Math.abs(It+360-ie)<ze&&(It+=360),It}},{key:"normalizeCenter",value:function(It){var ie=this.transform;if(!(!ie.renderWorldCopies||ie.lngRange)){var ze=It.lng-ie.center.lng;It.lng+=ze>180?-360:ze<-180?360:0}}},{key:"fireMoveEvents",value:function(It){this.emit("move",new oo("move",It)),this.zooming&&this.emit("zoom",new oo("zoom",It)),this.rotating&&this.emit("rotate",new oo("rotate",It)),this.pitching&&this.emit("rotate",new oo("pitch",It))}},{key:"prepareEase",value:function(It){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.moving=!0,!ie&&!ze.moving&&this.emit("movestart",new oo("movestart",It)),this.zooming&&!ze.zooming&&this.emit("zoomstart",new oo("zoomstart",It)),this.rotating&&!ze.rotating&&this.emit("rotatestart",new oo("rotatestart",It)),this.pitching&&!ze.pitching&&this.emit("pitchstart",new oo("pitchstart",It))}},{key:"afterEase",value:function(It,ie){if(!(this.easeId&&ie&&this.easeId===ie)){delete this.easeId;var ze=this.zooming,yn=this.rotating,pn=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.padding=!1,ze&&this.emit("zoomend",new oo("zoomend",It)),yn&&this.emit("rotateend",new oo("rotateend",It)),pn&&this.emit("pitchend",new oo("pitchend",It)),this.emit("moveend",new oo("moveend",It))}}},{key:"ease",value:function(It,ie,ze){ze.animate===!1||ze.duration===0?(It(1),ie()):(this.easeStart=eu(),this.easeOptions=ze,this.onEaseFrame=It,this.onEaseEnd=ie,this.easeFrameId=this.requestRenderFrame(this.renderFrameCallback))}},{key:"cameraForBoxAndBearing",value:function(It,ie,ze,yn){var pn={top:0,bottom:0,right:0,left:0};if(yn=ea()({padding:pn,offset:[0,0],maxZoom:this.transform.maxZoom},yn),typeof yn.padding=="number"){var Tn=yn.padding;yn.padding={top:Tn,bottom:Tn,right:Tn,left:Tn}}yn.padding=ea()(pn,yn.padding);var Nr=this.transform,ce=Nr.padding,be=Nr.project(Ua.convert(It)),Xe=Nr.project(Ua.convert(ie)),zn=be.rotate(-ze*Math.PI/180),lr=Xe.rotate(-ze*Math.PI/180),vr=new ba(Math.max(zn.x,lr.x),Math.max(zn.y,lr.y)),Qn=new ba(Math.min(zn.x,lr.x),Math.min(zn.y,lr.y)),Jr=vr.sub(Qn),$r=(Nr.width-(ce.left+ce.right+yn.padding.left+yn.padding.right))/Jr.x,ri=(Nr.height-(ce.top+ce.bottom+yn.padding.top+yn.padding.bottom))/Jr.y;if(!(ri<0||$r<0)){var ui=Math.min(Nr.scaleZoom(Nr.scale*Math.min($r,ri)),yn.maxZoom),xi=ba.convert(yn.offset),Ti=(yn.padding.left-yn.padding.right)/2,pi=(yn.padding.top-yn.padding.bottom)/2,hi=new ba(xi.x+Ti,xi.y+pi),Cr=hi.mult(Nr.scale/Nr.zoomScale(ui)),Lr=Nr.unproject(be.add(Xe).div(2).sub(Cr));return{center:Lr,zoom:ui,bearing:ze}}}},{key:"fitInternal",value:function(It,ie,ze){return It?(ie=ea()(It,ie),delete ie.padding,ie.linear?this.easeTo(ie,ze):this.flyTo(ie,ze)):this}}]),K}(to.EventEmitter);function zu(jt,yt){var K=typeof Symbol!="undefined"&&jt[Symbol.iterator]||jt["@@iterator"];if(!K){if(Array.isArray(jt)||(K=xu(jt))||yt&&jt&&typeof jt.length=="number"){K&&(jt=K);var pt=0,It=function(){};return{s:It,n:function(){return pt>=jt.length?{done:!0}:{done:!1,value:jt[pt++]}},e:function(Tn){throw Tn},f:It}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ie=!0,ze=!1,yn;return{s:function(){K=K.call(jt)},n:function(){var Tn=K.next();return ie=Tn.done,Tn},e:function(Tn){ze=!0,yn=Tn},f:function(){try{!ie&&K.return!=null&&K.return()}finally{if(ze)throw yn}}}}function xu(jt,yt){if(!!jt){if(typeof jt=="string")return bu(jt,yt);var K=Object.prototype.toString.call(jt).slice(8,-1);if(K==="Object"&&jt.constructor&&(K=jt.constructor.name),K==="Map"||K==="Set")return Array.from(jt);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return bu(jt,yt)}}function bu(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var K=0,pt=new Array(yt);K<yt;K++)pt[K]=jt[K];return pt}var Js={},cs=Js;Js.create=function(jt,yt,K){var pt=window.document.createElement(jt);return yt!==void 0&&(pt.className=yt),K&&K.appendChild(pt),pt},Js.createNS=function(jt,yt){var K=window.document.createElementNS(jt,yt);return K};var Ps=window.document&&window.document.documentElement.style;function ol(jt){if(!Ps)return jt[0];var yt=zu(jt),K;try{for(yt.s();!(K=yt.n()).done;){var pt=K.value;if(pt in Ps)return pt}}catch(It){yt.e(It)}finally{yt.f()}return jt[0]}var Al=ol(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),Fl;Js.disableDrag=function(){Ps&&Al&&(Fl=Ps[Al],Ps[Al]="none")},Js.enableDrag=function(){Ps&&Al&&(Ps[Al]=Fl)};var Uu=ol(["transform","WebkitTransform"]);Js.setTransform=function(jt,yt){jt.style[Uu]=yt};var Xu=!1;try{var sl=Object.defineProperty({},"passive",{get:function(){Xu=!0}});window.addEventListener("test",sl,sl),window.removeEventListener("test",sl,sl)}catch(jt){Xu=!1}Js.addEventListener=function(jt,yt,K){var pt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in pt&&Xu?jt.addEventListener(yt,K,pt):jt.addEventListener(yt,K,pt.capture)},Js.removeEventListener=function(jt,yt,K){var pt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};"passive"in pt&&Xu?jt.removeEventListener(yt,K,pt):jt.removeEventListener(yt,K,pt.capture)};var Eu=function jt(yt){yt.preventDefault(),yt.stopPropagation(),window.removeEventListener("click",jt,!0)};Js.suppressClick=function(){window.addEventListener("click",Eu,!0),window.setTimeout(function(){window.removeEventListener("click",Eu,!0)},0)},Js.mousePos=function(jt,yt){var K=jt.getBoundingClientRect();return new ba(yt.clientX-K.left-jt.clientLeft,yt.clientY-K.top-jt.clientTop)},Js.touchPos=function(jt,yt){var K=jt.getBoundingClientRect(),pt=[],It=zu(yt),ie;try{for(It.s();!(ie=It.n()).done;){var ze=ie.value;pt.push(new ba(ze.clientX-K.left-jt.clientLeft,ze.clientY-K.top-jt.clientTop))}}catch(yn){It.e(yn)}finally{It.f()}return pt},Js.mouseButton=function(jt){return typeof window.InstallTrigger!="undefined"&&jt.button===2&&jt.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:jt.button},Js.remove=function(jt){jt.parentNode&&jt.parentNode.removeChild(jt)};function uu(jt){var yt=Ju();return function(){var pt=l()(jt),It;if(yt){var ie=l()(this).constructor;It=Reflect.construct(pt,arguments,ie)}else It=pt.apply(this,arguments);return a()(this,It)}}function Ju(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var Ls=function(jt){n()(K,jt);var yt=uu(K);function K(pt,It,ie){var ze,yn=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};s()(this,K);var pn=cs.mousePos(It.getCanvasContainer(),ie),Tn=It.unproject(pn);return ze=yt.call(this,pt,ea()({point:pn,lngLat:Tn,originalEvent:ie},yn)),ze.type=void 0,ze.target=void 0,ze.originalEvent=void 0,ze.point=void 0,ze.lngLat=void 0,ze.defaultPrevented=void 0,ze.defaultPrevented=!1,ze.target=It,ze}return r()(K,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),K}(oo);function El(jt){var yt=sc();return function(){var pt=l()(jt),It;if(yt){var ie=l()(this).constructor;It=Reflect.construct(pt,arguments,ie)}else It=pt.apply(this,arguments);return a()(this,It)}}function sc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var Cl=function(jt){n()(K,jt);var yt=El(K);function K(pt,It,ie){var ze;s()(this,K);var yn=pt==="touchend"?ie.changedTouches:ie.touches,pn=cs.touchPos(It.getCanvasContainer(),yn),Tn=pn.map(function(be){return It.unproject(be)}),Nr=pn.reduce(function(be,Xe,zn,lr){return be.add(Xe.div(lr.length))},new ba(0,0)),ce=It.unproject(Nr);return ze=yt.call(this,pt,{points:pn,point:Nr,lngLats:Tn,lngLat:ce,originalEvent:ie}),ze.type=void 0,ze.target=void 0,ze.originalEvent=void 0,ze.lngLat=void 0,ze.point=void 0,ze.points=void 0,ze.lngLats=void 0,ze.defaultPrevented=void 0,ze.defaultPrevented=!1,ze}return r()(K,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),K}(oo);function zl(jt){var yt=Yl();return function(){var pt=l()(jt),It;if(yt){var ie=l()(this).constructor;It=Reflect.construct(pt,arguments,ie)}else It=pt.apply(this,arguments);return a()(this,It)}}function Yl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var dc=function(jt){n()(K,jt);var yt=zl(K);function K(pt,It,ie){var ze;return s()(this,K),ze=yt.call(this,pt,{originalEvent:ie}),ze.type=void 0,ze.originalEvent=void 0,ze.defaultPrevented=void 0,ze.target=void 0,ze.defaultPrevented=!1,ze}return r()(K,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),K}(oo),$u=function(){function jt(yt){s()(this,jt),this.map=void 0,this.delayContextMenu=void 0,this.contextMenuEvent=void 0,this.map=yt}return r()(jt,[{key:"reset",value:function(){this.delayContextMenu=!1,delete this.contextMenuEvent}},{key:"mousemove",value:function(K){this.map.emit(K.type,new Ls(K.type,this.map,K))}},{key:"mousedown",value:function(){this.delayContextMenu=!0}},{key:"mouseup",value:function(){this.delayContextMenu=!1,this.contextMenuEvent&&(this.map.emit("contextmenu",new Ls("contextmenu",this.map,this.contextMenuEvent)),delete this.contextMenuEvent)}},{key:"contextmenu",value:function(K){this.delayContextMenu?this.contextMenuEvent=K:this.map.emit(K.type,new Ls(K.type,this.map,K)),this.map.listeners("contextmenu")&&K.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!0}},{key:"disable",value:function(){return!1}}]),jt}(),Ol=function(){function jt(yt,K){s()(this,jt),this.map=void 0,this.el=void 0,this.container=void 0,this.enabled=void 0,this.active=void 0,this.startPos=void 0,this.lastPos=void 0,this.box=void 0,this.clickTolerance=void 0,this.map=yt,this.el=yt.getCanvasContainer(),this.container=yt.getContainer(),this.clickTolerance=K.clickTolerance||1}return r()(jt,[{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active}},{key:"enable",value:function(){this.isEnabled()||(this.enabled=!0)}},{key:"disable",value:function(){!this.isEnabled()||(this.enabled=!1)}},{key:"mousedown",value:function(K,pt){!this.isEnabled()||!(K.shiftKey&&K.button===0)||(cs.disableDrag(),this.startPos=this.lastPos=pt,this.active=!0)}},{key:"mousemoveWindow",value:function(K,pt){if(!!this.active){var It=pt;if(!(this.lastPos.equals(It)||!this.box&&It.dist(this.startPos)<this.clickTolerance)){var ie=this.startPos;this.lastPos=It,this.box||(this.box=cs.create("div","l7-boxzoom",this.container),this.container.classList.add("l7-crosshair"),this.fireEvent("boxzoomstart",K));var ze=Math.min(ie.x,It.x),yn=Math.max(ie.x,It.x),pn=Math.min(ie.y,It.y),Tn=Math.max(ie.y,It.y);cs.setTransform(this.box,"translate(".concat(ze,"px,").concat(pn,"px)")),this.box&&(this.box.style.width="".concat(yn-ze,"px"),this.box.style.height="".concat(Tn-pn,"px"))}}}},{key:"mouseupWindow",value:function(K,pt){var It=this;if(!!this.active&&K.button===0){var ie=this.startPos,ze=pt;if(this.reset(),cs.suppressClick(),ie.x===ze.x&&ie.y===ze.y)this.fireEvent("boxzoomcancel",K);else return this.map.emit("boxzoomend",new oo("boxzoomend",{originalEvent:K})),{cameraAnimation:function(pn){return pn.fitScreenCoordinates(ie,ze,It.map.getBearing(),{linear:!0})}}}}},{key:"keydown",value:function(K){!this.active||K.keyCode===27&&(this.reset(),this.fireEvent("boxzoomcancel",K))}},{key:"reset",value:function(){this.active=!1,this.container.classList.remove("l7-crosshair"),this.box&&(cs.remove(this.box),this.box=null),cs.enableDrag(),delete this.startPos,delete this.lastPos}},{key:"fireEvent",value:function(K,pt){return this.map.emit(K,new oo(K,{originalEvent:pt}))}}]),jt}(),Ul=Ol,wo=function(){function jt(){s()(this,jt),this.enabled=void 0,this.active=void 0,this.reset()}return r()(jt,[{key:"reset",value:function(){this.active=!1}},{key:"dblclick",value:function(K,pt){return K.preventDefault(),{cameraAnimation:function(ie){ie.easeTo({duration:300,zoom:ie.getZoom()+(K.shiftKey?-1:1),around:ie.unproject(pt)},{originalEvent:K})}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),jt}();function ho(jt){var yt=Sl();return function(){var pt=l()(jt),It;if(yt){var ie=l()(this).constructor;It=Reflect.construct(pt,arguments,ie)}else It=pt.apply(this,arguments);return a()(this,It)}}function Sl(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var ul=function(jt){n()(K,jt);var yt=ho(K);function K(){var pt;s()(this,K);for(var It=arguments.length,ie=new Array(It),ze=0;ze<It;ze++)ie[ze]=arguments[ze];return pt=yt.call.apply(yt,[this].concat(ie)),pt.type="renderFrame",pt.timeStamp=void 0,pt}return K}(oo);function Ys(jt,yt){var K=typeof Symbol!="undefined"&&jt[Symbol.iterator]||jt["@@iterator"];if(!K){if(Array.isArray(jt)||(K=Da(jt))||yt&&jt&&typeof jt.length=="number"){K&&(jt=K);var pt=0,It=function(){};return{s:It,n:function(){return pt>=jt.length?{done:!0}:{done:!1,value:jt[pt++]}},e:function(Tn){throw Tn},f:It}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ie=!0,ze=!1,yn;return{s:function(){K=K.call(jt)},n:function(){var Tn=K.next();return ie=Tn.done,Tn},e:function(Tn){ze=!0,yn=Tn},f:function(){try{!ie&&K.return!=null&&K.return()}finally{if(ze)throw yn}}}}function Da(jt,yt){if(!!jt){if(typeof jt=="string")return mo(jt,yt);var K=Object.prototype.toString.call(jt).slice(8,-1);if(K==="Object"&&jt.constructor&&(K=jt.constructor.name),K==="Map"||K==="Set")return Array.from(jt);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return mo(jt,yt)}}function mo(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var K=0,pt=new Array(yt);K<yt;K++)pt[K]=jt[K];return pt}var Gs={linearity:.3,easing:Ms(0,0,.3,1)},wl=ea()({deceleration:2500,maxSpeed:1400},Gs),ll=ea()({deceleration:20,maxSpeed:1400},Gs),Qu=ea()({deceleration:1e3,maxSpeed:360},Gs),xc=ea()({deceleration:1e3,maxSpeed:90},Gs),Zl=function(){function jt(yt){s()(this,jt),this.map=void 0,this.inertiaBuffer=void 0,this.map=yt,this.clear()}return r()(jt,[{key:"clear",value:function(){this.inertiaBuffer=[]}},{key:"record",value:function(K){this.drainInertiaBuffer(),this.inertiaBuffer.push({time:eu(),settings:K})}},{key:"drainInertiaBuffer",value:function(){for(var K=this.inertiaBuffer,pt=eu(),It=160;K.length>0&&pt-K[0].time>It;)K.shift()}},{key:"onMoveEnd",value:function(K){if(this.drainInertiaBuffer(),!(this.inertiaBuffer.length<2)){var pt={zoom:0,bearing:0,pitch:0,pan:new ba(0,0),pinchAround:void 0,around:void 0},It=Ys(this.inertiaBuffer),ie;try{for(It.s();!(ie=It.n()).done;){var ze=ie.value.settings;pt.zoom+=ze.zoomDelta||0,pt.bearing+=ze.bearingDelta||0,pt.pitch+=ze.pitchDelta||0,ze.panDelta&&pt.pan._add(ze.panDelta),ze.around&&(pt.around=ze.around),ze.pinchAround&&(pt.pinchAround=ze.pinchAround)}}catch(lr){It.e(lr)}finally{It.f()}var yn=this.inertiaBuffer[this.inertiaBuffer.length-1],pn=yn.time-this.inertiaBuffer[0].time,Tn={};if(pt.pan.mag()){var Nr=ru(pt.pan.mag(),pn,ea()({},wl,K||{}));Tn.offset=pt.pan.mult(Nr.amount/pt.pan.mag()),Tn.center=this.map.transform.center,qu(Tn,Nr)}if(pt.zoom){var ce=ru(pt.zoom,pn,ll);Tn.zoom=this.map.transform.zoom+ce.amount,qu(Tn,ce)}if(pt.bearing){var be=ru(pt.bearing,pn,Qu);Tn.bearing=this.map.transform.bearing+ts(be.amount,-179,179),qu(Tn,be)}if(pt.pitch){var Xe=ru(pt.pitch,pn,xc);Tn.pitch=this.map.transform.pitch+Xe.amount,qu(Tn,Xe)}if(Tn.zoom||Tn.bearing){var zn=pt.pinchAround===void 0?pt.around:pt.pinchAround;Tn.around=zn?this.map.unproject(zn):this.map.getCenter()}return this.clear(),ea()(Tn,{noMoveStart:!0})}}}]),jt}();function qu(jt,yt){(!jt.duration||jt.duration<yt.duration)&&(jt.duration=yt.duration,jt.easing=yt.easing)}function ru(jt,yt,K){var pt=K.maxSpeed,It=K.linearity,ie=K.deceleration,ze=ts(jt*It/(yt/1e3),-pt,pt),yn=Math.abs(ze)/(ie*It);return{easing:K.easing,duration:yn*1e3,amount:ze*(yn/2)}}var Zs={panStep:100,bearingStep:15,pitchStep:10},es=function(){function jt(){s()(this,jt),this.enabled=void 0,this.active=void 0,this.panStep=void 0,this.bearingStep=void 0,this.pitchStep=void 0;var yt=Zs;this.panStep=yt.panStep,this.bearingStep=yt.bearingStep,this.pitchStep=yt.pitchStep}return r()(jt,[{key:"reset",value:function(){this.active=!1}},{key:"keydown",value:function(K){var pt=this;if(!(K.altKey||K.ctrlKey||K.metaKey)){var It=0,ie=0,ze=0,yn=0,pn=0;switch(K.keyCode){case 61:case 107:case 171:case 187:It=1;break;case 189:case 109:case 173:It=-1;break;case 37:K.shiftKey?ie=-1:(K.preventDefault(),yn=-1);break;case 39:K.shiftKey?ie=1:(K.preventDefault(),yn=1);break;case 38:K.shiftKey?ze=1:(K.preventDefault(),pn=-1);break;case 40:K.shiftKey?ze=-1:(K.preventDefault(),pn=1);break;default:return}return{cameraAnimation:function(Nr){var ce=Nr.getZoom();Nr.easeTo({duration:300,easeId:"keyboardHandler",easing:iu,zoom:It?Math.round(ce)+It*(K.shiftKey?2:1):ce,bearing:Nr.getBearing()+ie*pt.bearingStep,pitch:Nr.getPitch()+ze*pt.pitchStep,offset:[-yn*pt.panStep,-pn*pt.panStep],center:Nr.getCenter()},{originalEvent:K})}}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),jt}();function iu(jt){return jt*(2-jt)}var ku=es,us=function(){function jt(yt,K){s()(this,jt),this.mousedownPos=void 0,this.clickTolerance=void 0,this.map=void 0,this.map=yt,this.clickTolerance=K.clickTolerance}return r()(jt,[{key:"reset",value:function(){delete this.mousedownPos}},{key:"wheel",value:function(K){return this.firePreventable(new dc(K.type,this.map,K))}},{key:"mousedown",value:function(K,pt){return this.mousedownPos=pt,this.firePreventable(new Ls(K.type,this.map,K))}},{key:"mouseup",value:function(K){this.map.emit(K.type,new Ls(K.type,this.map,K))}},{key:"click",value:function(K,pt){this.mousedownPos&&this.mousedownPos.dist(pt)>=this.clickTolerance||this.map.emit(K.type,new Ls(K.type,this.map,K))}},{key:"dblclick",value:function(K){return this.firePreventable(new Ls(K.type,this.map,K))}},{key:"mouseover",value:function(K){this.map.emit(K.type,new Ls(K.type,this.map,K))}},{key:"mouseout",value:function(K){this.map.emit(K.type,new Ls(K.type,this.map,K))}},{key:"touchstart",value:function(K){return this.firePreventable(new Cl(K.type,this.map,K))}},{key:"touchmove",value:function(K){this.map.emit(K.type,new Cl(K.type,this.map,K))}},{key:"touchend",value:function(K){this.map.emit(K.type,new Cl(K.type,this.map,K))}},{key:"touchcancel",value:function(K){this.map.emit(K.type,new Cl(K.type,this.map,K))}},{key:"firePreventable",value:function(K){if(this.map.emit(K.type,K),K.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!1}},{key:"disable",value:function(){return!1}}]),jt}(),Yi=R("iWIM"),Fs=R.n(Yi),tl,Gu=0,Go=2,Yo=(tl={},v()(tl,Gu,1),v()(tl,Go,2),tl);function Su(jt,yt){var K=Yo[yt];return jt.buttons===void 0||(jt.buttons&K)!==K}var Mi=function(){function jt(yt){s()(this,jt),this.enabled=void 0,this.active=void 0,this.lastPoint=void 0,this.eventButton=void 0,this.moved=void 0,this.clickTolerance=void 0,this.reset(),this.clickTolerance=yt.clickTolerance||1}return r()(jt,[{key:"reset",value:function(){this.active=!1,this.moved=!1,delete this.lastPoint,delete this.eventButton}},{key:"mousedown",value:function(K,pt){if(!this.lastPoint){var It=cs.mouseButton(K);!this.correctButton(K,It)||(this.lastPoint=pt,this.eventButton=It)}}},{key:"mousemoveWindow",value:function(K,pt){var It=this.lastPoint;if(!!It){if(K.preventDefault(),Su(K,this.eventButton)){this.reset();return}if(!(!this.moved&&pt.dist(It)<this.clickTolerance))return this.moved=!0,this.lastPoint=pt,this.move(It,pt)}}},{key:"mouseupWindow",value:function(K){if(!!this.lastPoint){var pt=cs.mouseButton(K);pt===this.eventButton&&(this.moved&&cs.suppressClick(),this.reset())}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"correctButton",value:function(K,pt){return!1}},{key:"move",value:function(K,pt){}}]),jt}();function _u(jt){var yt=Iu();return function(){var pt=l()(jt),It;if(yt){var ie=l()(this).constructor;It=Reflect.construct(pt,arguments,ie)}else It=pt.apply(this,arguments);return a()(this,It)}}function Iu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var Lu=function(jt){n()(K,jt);var yt=_u(K);function K(){return s()(this,K),yt.apply(this,arguments)}return r()(K,[{key:"mousedown",value:function(It,ie){Fs()(l()(K.prototype),"mousedown",this).call(this,It,ie),this.lastPoint&&(this.active=!0)}},{key:"move",value:function(It,ie){return{around:ie,panDelta:ie.sub(It)}}},{key:"correctButton",value:function(It,ie){return ie===Gu&&!It.ctrlKey}}]),K}(Mi);function $s(jt){var yt=we();return function(){var pt=l()(jt),It;if(yt){var ie=l()(this).constructor;It=Reflect.construct(pt,arguments,ie)}else It=pt.apply(this,arguments);return a()(this,It)}}function we(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var Pe=function(jt){n()(K,jt);var yt=$s(K);function K(){return s()(this,K),yt.apply(this,arguments)}return r()(K,[{key:"correctButton",value:function(It,ie){return ie===Gu&&It.ctrlKey||ie===Go}},{key:"move",value:function(It,ie){var ze=-.5,yn=(ie.y-It.y)*ze;if(yn)return this.active=!0,{pitchDelta:yn}}},{key:"contextmenu",value:function(It){It.preventDefault()}}]),K}(Mi);function hn(jt){var yt=tn();return function(){var pt=l()(jt),It;if(yt){var ie=l()(this).constructor;It=Reflect.construct(pt,arguments,ie)}else It=pt.apply(this,arguments);return a()(this,It)}}function tn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var On=function(jt){n()(K,jt);var yt=hn(K);function K(){return s()(this,K),yt.apply(this,arguments)}return r()(K,[{key:"contextmenu",value:function(It){It.preventDefault()}},{key:"correctButton",value:function(It,ie){return ie===Gu&&It.ctrlKey||ie===Go}},{key:"move",value:function(It,ie){var ze=.8,yn=(ie.x-It.x)*ze;if(yn)return this.active=!0,{bearingDelta:yn}}}]),K}(Mi),fr=4.000244140625,Ir=1/100,Zr=1/450,ni=2,zr=function(){function jt(yt,K){var pt=this;s()(this,jt),this.map=void 0,this.el=void 0,this.enabled=void 0,this.active=void 0,this.zooming=void 0,this.aroundCenter=void 0,this.around=void 0,this.aroundPoint=void 0,this.type=void 0,this.lastValue=void 0,this.timeout=void 0,this.finishTimeout=void 0,this.lastWheelEvent=void 0,this.lastWheelEventTime=void 0,this.startZoom=void 0,this.targetZoom=void 0,this.delta=void 0,this.easing=void 0,this.prevEase=void 0,this.frameId=void 0,this.handler=void 0,this.defaultZoomRate=void 0,this.wheelZoomRate=void 0,this.onScrollFrame=function(){if(!!pt.frameId&&(pt.frameId=null,!!pt.isActive())){var It=pt.map.transform;if(pt.delta!==0){var ie=pt.type==="wheel"&&Math.abs(pt.delta)>fr?pt.wheelZoomRate:pt.defaultZoomRate,ze=ni/(1+Math.exp(-Math.abs(pt.delta*ie)));pt.delta<0&&ze!==0&&(ze=1/ze);var yn=typeof pt.targetZoom=="number"?It.zoomScale(pt.targetZoom):It.scale;pt.targetZoom=Math.min(It.maxZoom,Math.max(It.minZoom,It.scaleZoom(yn*ze))),pt.type==="wheel"&&(pt.startZoom=It.zoom,pt.easing=pt.smoothOutEasing(200)),pt.delta=0}var pn=typeof pt.targetZoom=="number"?pt.targetZoom:It.zoom,Tn=pt.startZoom,Nr=pt.easing,ce=!1,be;if(pt.type==="wheel"&&Tn&&Nr){var Xe=Math.min((eu()-pt.lastWheelEventTime)/200,1),zn=Nr(Xe);be=ws(Tn,pn,zn),Xe<1?pt.frameId||(pt.frameId=!0):ce=!0}else be=pn,ce=!0;return pt.active=!0,ce&&(pt.active=!1,pt.finishTimeout=setTimeout(function(){pt.zooming=!1,pt.handler.triggerRenderFrame(),delete pt.targetZoom,delete pt.finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ce,zoomDelta:be-It.zoom,around:pt.aroundPoint,originalEvent:pt.lastWheelEvent}}},this.map=yt,this.el=yt.getCanvasContainer(),this.handler=K,this.delta=0,this.defaultZoomRate=Ir,this.wheelZoomRate=Zr}return r()(jt,[{key:"setZoomRate",value:function(K){this.defaultZoomRate=K}},{key:"setWheelZoomRate",value:function(K){this.wheelZoomRate=K}},{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active||this.finishTimeout!==void 0}},{key:"isZooming",value:function(){return!!this.zooming}},{key:"enable",value:function(K){this.isEnabled()||(this.enabled=!0,this.aroundCenter=K&&K.around==="center")}},{key:"disable",value:function(){!this.isEnabled()||(this.enabled=!1)}},{key:"wheel",value:function(K){if(!!this.isEnabled()){var pt=K.deltaMode===window.WheelEvent.DOM_DELTA_LINE?K.deltaY*40:K.deltaY,It=eu(),ie=It-(this.lastWheelEventTime||0);this.lastWheelEventTime=It,pt!==0&&pt%fr==0?this.type="wheel":pt!==0&&Math.abs(pt)<4?this.type="trackpad":ie>400?(this.type=null,this.lastValue=pt,this.timeout=setTimeout(this.onTimeout,40,K)):this.type||(this.type=Math.abs(ie*pt)<200?"trackpad":"wheel",this.timeout&&(clearTimeout(this.timeout),this.timeout=null,pt+=this.lastValue)),K.shiftKey&&pt&&(pt=pt/4),this.type&&(this.lastWheelEvent=K,this.delta-=pt,this.active||this.start(K)),K.preventDefault()}}},{key:"renderFrame",value:function(){return this.onScrollFrame()}},{key:"reset",value:function(){this.active=!1}},{key:"onTimeout",value:function(K){this.type="wheel",this.delta-=this.lastValue,this.active||this.start(K)}},{key:"start",value:function(K){if(!!this.delta){this.frameId&&(this.frameId=null),this.active=!0,this.isZooming()||(this.zooming=!0),this.finishTimeout&&(clearTimeout(this.finishTimeout),delete this.finishTimeout);var pt=cs.mousePos(this.el,K);this.around=Ua.convert(this.aroundCenter?this.map.getCenter():this.map.unproject(pt)),this.aroundPoint=this.map.transform.locationPoint(this.around),this.frameId||(this.frameId=!0,this.handler.triggerRenderFrame())}}},{key:"smoothOutEasing",value:function(K){var pt=Ou;if(this.prevEase){var It=this.prevEase,ie=(eu()-It.start)/It.duration,ze=It.easing(ie+.01)-It.easing(ie),yn=.27/Math.sqrt(ze*ze+1e-4)*.01,pn=Math.sqrt(.27*.27-yn*yn);pt=Ms(yn,pn,.25,1)}return this.prevEase={start:eu(),duration:K,easing:pt},pt}}]),jt}(),ci=zr,xr=function(){function jt(yt,K){s()(this,jt),this.clickZoom=void 0,this.tapZoom=void 0,this.clickZoom=yt,this.tapZoom=K}return r()(jt,[{key:"enable",value:function(){this.clickZoom.enable(),this.tapZoom.enable()}},{key:"disable",value:function(){this.clickZoom.disable(),this.tapZoom.disable()}},{key:"isEnabled",value:function(){return this.clickZoom.isEnabled()&&this.tapZoom.isEnabled()}},{key:"isActive",value:function(){return this.clickZoom.isActive()||this.tapZoom.isActive()}}]),jt}(),Kt=function(){function jt(yt,K,pt){s()(this,jt),this.inertiaOptions=void 0,this.el=void 0,this.mousePan=void 0,this.touchPan=void 0,this.el=yt,this.mousePan=K,this.touchPan=pt}return r()(jt,[{key:"enable",value:function(K){this.inertiaOptions=K||{},this.mousePan.enable(),this.touchPan.enable(),this.el.classList.add("l7-touch-drag-pan")}},{key:"disable",value:function(){this.mousePan.disable(),this.touchPan.disable(),this.el.classList.remove("l7-touch-drag-pan")}},{key:"isEnabled",value:function(){return this.mousePan.isEnabled()&&this.touchPan.isEnabled()}},{key:"isActive",value:function(){return this.mousePan.isActive()||this.touchPan.isActive()}}]),jt}(),te=function(){function jt(yt,K,pt){s()(this,jt),this.mouseRotate=void 0,this.mousePitch=void 0,this.pitchWithRotate=void 0,this.pitchWithRotate=yt.pitchWithRotate,this.mouseRotate=K,this.mousePitch=pt}return r()(jt,[{key:"enable",value:function(){this.mouseRotate.enable(),this.pitchWithRotate&&this.mousePitch.enable()}},{key:"disable",value:function(){this.mouseRotate.disable(),this.mousePitch.disable()}},{key:"isEnabled",value:function(){return this.mouseRotate.isEnabled()&&(!this.pitchWithRotate||this.mousePitch.isEnabled())}},{key:"isActive",value:function(){return this.mouseRotate.isActive()||this.mousePitch.isActive()}}]),jt}(),Ie=function(){function jt(yt,K,pt,It){s()(this,jt),this.el=void 0,this.touchZoom=void 0,this.touchRotate=void 0,this.tapDragZoom=void 0,this.rotationDisabled=void 0,this.enabled=void 0,this.el=yt,this.touchZoom=K,this.touchRotate=pt,this.tapDragZoom=It,this.rotationDisabled=!1,this.enabled=!0}return r()(jt,[{key:"enable",value:function(K){this.touchZoom.enable(K),this.rotationDisabled||this.touchRotate.enable(K),this.tapDragZoom.enable(),this.el.classList.add("l7-touch-zoom-rotate")}},{key:"disable",value:function(){this.touchZoom.disable(),this.touchRotate.disable(),this.tapDragZoom.disable(),this.el.classList.remove("l7-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this.touchZoom.isEnabled()&&(this.rotationDisabled||this.touchRotate.isEnabled())&&this.tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this.touchZoom.isActive()||this.touchRotate.isActive()||this.tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this.rotationDisabled=!0,this.touchRotate.disable()}},{key:"enableRotation",value:function(){this.rotationDisabled=!1,this.touchZoom.isEnabled()&&this.touchRotate.enable()}}]),jt}();function _e(jt,yt){for(var K={},pt=0;pt<jt.length;pt++)K[jt[pt].identifier]=yt[pt];return K}function Dt(jt,yt){var K=typeof Symbol!="undefined"&&jt[Symbol.iterator]||jt["@@iterator"];if(!K){if(Array.isArray(jt)||(K=zt(jt))||yt&&jt&&typeof jt.length=="number"){K&&(jt=K);var pt=0,It=function(){};return{s:It,n:function(){return pt>=jt.length?{done:!0}:{done:!1,value:jt[pt++]}},e:function(Tn){throw Tn},f:It}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ie=!0,ze=!1,yn;return{s:function(){K=K.call(jt)},n:function(){var Tn=K.next();return ie=Tn.done,Tn},e:function(Tn){ze=!0,yn=Tn},f:function(){try{!ie&&K.return!=null&&K.return()}finally{if(ze)throw yn}}}}function zt(jt,yt){if(!!jt){if(typeof jt=="string")return oe(jt,yt);var K=Object.prototype.toString.call(jt).slice(8,-1);if(K==="Object"&&jt.constructor&&(K=jt.constructor.name),K==="Map"||K==="Set")return Array.from(jt);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return oe(jt,yt)}}function oe(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var K=0,pt=new Array(yt);K<yt;K++)pt[K]=jt[K];return pt}function ne(jt){var yt=new ba(0,0),K=Dt(jt),pt;try{for(K.s();!(pt=K.n()).done;){var It=pt.value;yt._add(It)}}catch(ie){K.e(ie)}finally{K.f()}return yt.div(jt.length)}var fe=500,Fe=500,Ze=30,nn=function(){function jt(yt){s()(this,jt),this.numTouches=void 0,this.centroid=void 0,this.startTime=void 0,this.aborted=void 0,this.touches=void 0,this.reset(),this.numTouches=yt.numTouches}return r()(jt,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(K,pt,It){(this.centroid||It.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=K.timeStamp),It.length===this.numTouches&&(this.centroid=ne(pt),this.touches=_e(It,pt)))}},{key:"touchmove",value:function(K,pt,It){if(!(this.aborted||!this.centroid)){var ie=_e(It,pt);for(var ze in this.touches)if(this.touches[ze]){var yn=this.touches[ze],pn=ie[ze];(!pn||pn.dist(yn)>Ze)&&(this.aborted=!0)}}}},{key:"touchend",value:function(K,pt,It){if((!this.centroid||K.timeStamp-this.startTime>Fe)&&(this.aborted=!0),It.length===0){var ie=!this.aborted&&this.centroid;if(this.reset(),ie)return ie}}}]),jt}(),Je=function(){function jt(yt){s()(this,jt),this.singleTap=void 0,this.numTaps=void 0,this.lastTime=void 0,this.lastTap=void 0,this.count=void 0,this.singleTap=new nn(yt),this.numTaps=yt.numTaps,this.reset()}return r()(jt,[{key:"reset",value:function(){this.lastTime=Infinity,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(K,pt,It){this.singleTap.touchstart(K,pt,It)}},{key:"touchmove",value:function(K,pt,It){this.singleTap.touchmove(K,pt,It)}},{key:"touchend",value:function(K,pt,It){var ie=this.singleTap.touchend(K,pt,It);if(ie){var ze=K.timeStamp-this.lastTime<fe,yn=!this.lastTap||this.lastTap.dist(ie)<Ze;if((!ze||!yn)&&this.reset(),this.count++,this.lastTime=K.timeStamp,this.lastTap=ie,this.count===this.numTaps)return this.reset(),ie}}}]),jt}(),vn=function(){function jt(){s()(this,jt),this.enabled=void 0,this.active=void 0,this.swipePoint=void 0,this.swipeTouch=void 0,this.tapTime=void 0,this.tap=void 0,this.tap=new Je({numTouches:1,numTaps:1}),this.reset()}return r()(jt,[{key:"reset",value:function(){this.active=!1,delete this.swipePoint,delete this.swipeTouch,delete this.tapTime,this.tap.reset()}},{key:"touchstart",value:function(K,pt,It){this.swipePoint||(this.tapTime&&K.timeStamp-this.tapTime>fe&&this.reset(),this.tapTime?It.length>0&&(this.swipePoint=pt[0],this.swipeTouch=It[0].identifier):this.tap.touchstart(K,pt,It))}},{key:"touchmove",value:function(K,pt,It){if(!this.tapTime)this.tap.touchmove(K,pt,It);else if(this.swipePoint){if(It[0].identifier!==this.swipeTouch)return;var ie=pt[0],ze=ie.y-this.swipePoint.y;return this.swipePoint=ie,K.preventDefault(),this.active=!0,{zoomDelta:ze/128}}}},{key:"touchend",value:function(K,pt,It){if(this.tapTime)this.swipePoint&&It.length===0&&this.reset();else{var ie=this.tap.touchend(K,pt,It);ie&&(this.tapTime=K.timeStamp)}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),jt}(),fn=function(){function jt(){s()(this,jt),this.enabled=void 0,this.active=void 0,this.zoomIn=void 0,this.zoomOut=void 0,this.zoomIn=new Je({numTouches:1,numTaps:2}),this.zoomOut=new Je({numTouches:2,numTaps:1}),this.reset()}return r()(jt,[{key:"reset",value:function(){this.active=!1,this.zoomIn.reset(),this.zoomOut.reset()}},{key:"touchstart",value:function(K,pt,It){this.zoomIn.touchstart(K,pt,It),this.zoomOut.touchstart(K,pt,It)}},{key:"touchmove",value:function(K,pt,It){this.zoomIn.touchmove(K,pt,It),this.zoomOut.touchmove(K,pt,It)}},{key:"touchend",value:function(K,pt,It){var ie=this,ze=this.zoomIn.touchend(K,pt,It),yn=this.zoomOut.touchend(K,pt,It);if(ze)return this.active=!0,K.preventDefault(),setTimeout(function(){return ie.reset()},0),{cameraAnimation:function(Tn){return Tn.easeTo({duration:300,zoom:Tn.getZoom()+1,around:Tn.unproject(ze)},{originalEvent:K})}};if(yn)return this.active=!0,K.preventDefault(),setTimeout(function(){return ie.reset()},0),{cameraAnimation:function(Tn){return Tn.easeTo({duration:300,zoom:Tn.getZoom()-1,around:Tn.unproject(yn)},{originalEvent:K})}}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),jt}(),Yn=function(){function jt(yt){s()(this,jt),this.enabled=void 0,this.active=void 0,this.touches=void 0,this.minTouches=void 0,this.clickTolerance=void 0,this.sum=void 0,this.minTouches=1,this.clickTolerance=yt.clickTolerance||1,this.reset()}return r()(jt,[{key:"reset",value:function(){this.active=!1,this.touches={},this.sum=new ba(0,0)}},{key:"touchstart",value:function(K,pt,It){return this.calculateTransform(K,pt,It)}},{key:"touchmove",value:function(K,pt,It){if(!!this.active)return K.preventDefault(),this.calculateTransform(K,pt,It)}},{key:"touchend",value:function(K,pt,It){this.calculateTransform(K,pt,It),this.active&&It.length<this.minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"calculateTransform",value:function(K,pt,It){It.length>0&&(this.active=!0);var ie=_e(It,pt),ze=new ba(0,0),yn=new ba(0,0),pn=0;for(var Tn in ie)if(ie[Tn]){var Nr=ie[Tn],ce=this.touches[Tn];ce&&(ze._add(Nr),yn._add(Nr.sub(ce)),pn++,ie[Tn]=Nr)}if(this.touches=ie,!(pn<this.minTouches||!yn.mag())){var be=yn.div(pn);if(this.sum._add(be),!(this.sum.mag()<this.clickTolerance)){var Xe=ze.div(pn);return{around:Xe,panDelta:be}}}}}]),jt}(),kn=function(){function jt(){s()(this,jt),this.enabled=void 0,this.active=void 0,this.firstTwoTouches=void 0,this.vector=void 0,this.startVector=void 0,this.aroundCenter=void 0,this.reset()}return r()(jt,[{key:"reset",value:function(){this.active=!1,delete this.firstTwoTouches}},{key:"start",value:function(K){}},{key:"move",value:function(K,pt,It){}},{key:"touchstart",value:function(K,pt,It){this.firstTwoTouches||It.length<2||(this.firstTwoTouches=[It[0].identifier,It[1].identifier],this.start([pt[0],pt[1]]))}},{key:"touchmove",value:function(K,pt,It){if(!!this.firstTwoTouches){K.preventDefault();var ie=rt()(this.firstTwoTouches,2),ze=ie[0],yn=ie[1],pn=Vn(It,pt,ze),Tn=Vn(It,pt,yn);if(!(!pn||!Tn)){var Nr=this.aroundCenter?null:pn.add(Tn).div(2);return this.move([pn,Tn],Nr,K)}}}},{key:"touchend",value:function(K,pt,It){if(!!this.firstTwoTouches){var ie=rt()(this.firstTwoTouches,2),ze=ie[0],yn=ie[1],pn=Vn(It,pt,ze),Tn=Vn(It,pt,yn);pn&&Tn||(this.active&&cs.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(K){this.enabled=!0,this.aroundCenter=!!K&&K.around==="center"}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),jt}();function Vn(jt,yt,K){for(var pt=0;pt<jt.length;pt++)if(jt[pt].identifier===K)return yt[pt]}function Gn(jt){var yt=hr();return function(){var pt=l()(jt),It;if(yt){var ie=l()(this).constructor;It=Reflect.construct(pt,arguments,ie)}else It=pt.apply(this,arguments);return a()(this,It)}}function hr(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}function mr(jt){return Math.abs(jt.y)>Math.abs(jt.x)}var Yr=100,gi=function(jt){n()(K,jt);var yt=Gn(K);function K(){var pt;s()(this,K);for(var It=arguments.length,ie=new Array(It),ze=0;ze<It;ze++)ie[ze]=arguments[ze];return pt=yt.call.apply(yt,[this].concat(ie)),pt.valid=void 0,pt.firstMove=void 0,pt.lastPoints=void 0,pt}return r()(K,[{key:"reset",value:function(){Fs()(l()(K.prototype),"reset",this).call(this),this.valid=void 0,delete this.firstMove,delete this.lastPoints}},{key:"start",value:function(It){this.lastPoints=It,mr(It[0].sub(It[1]))&&(this.valid=!1)}},{key:"move",value:function(It,ie,ze){var yn=It[0].sub(this.lastPoints[0]),pn=It[1].sub(this.lastPoints[1]);if(this.valid=this.gestureBeginsVertically(yn,pn,ze.timeStamp),!!this.valid){this.lastPoints=It,this.active=!0;var Tn=(yn.y+pn.y)/2,Nr=-.5;return{pitchDelta:Tn*Nr}}}},{key:"gestureBeginsVertically",value:function(It,ie,ze){if(this.valid!==void 0)return this.valid;var yn=2,pn=It.mag()>=yn,Tn=ie.mag()>=yn;if(!(!pn&&!Tn)){if(!pn||!Tn)return this.firstMove===void 0&&(this.firstMove=ze),ze-this.firstMove<Yr?void 0:!1;var Nr=It.y>0==ie.y>0;return mr(It)&&mr(ie)&&Nr}}}]),K}(kn);function Br(jt){var yt=ai();return function(){var pt=l()(jt),It;if(yt){var ie=l()(this).constructor;It=Reflect.construct(pt,arguments,ie)}else It=pt.apply(this,arguments);return a()(this,It)}}function ai(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var fi=25;function Zi(jt,yt){return jt.angleWith(yt)*180/Math.PI}var Ri=function(jt){n()(K,jt);var yt=Br(K);function K(){var pt;s()(this,K);for(var It=arguments.length,ie=new Array(It),ze=0;ze<It;ze++)ie[ze]=arguments[ze];return pt=yt.call.apply(yt,[this].concat(ie)),pt.minDiameter=void 0,pt}return r()(K,[{key:"reset",value:function(){Fs()(l()(K.prototype),"reset",this).call(this),delete this.minDiameter,delete this.startVector,delete this.vector}},{key:"start",value:function(It){this.startVector=this.vector=It[0].sub(It[1]),this.minDiameter=It[0].dist(It[1])}},{key:"move",value:function(It,ie){var ze=this.vector;if(this.vector=It[0].sub(It[1]),!(!this.active&&this.isBelowThreshold(this.vector)))return this.active=!0,{bearingDelta:Zi(this.vector,ze),pinchAround:ie}}},{key:"isBelowThreshold",value:function(It){this.minDiameter=Math.min(this.minDiameter,It.mag());var ie=Math.PI*this.minDiameter,ze=fi/ie*360,yn=Zi(It,this.startVector);return Math.abs(yn)<ze}}]),K}(kn);function Sa(jt){var yt=ya();return function(){var pt=l()(jt),It;if(yt){var ie=l()(this).constructor;It=Reflect.construct(pt,arguments,ie)}else It=pt.apply(this,arguments);return a()(this,It)}}function ya(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var _a=.1;function ei(jt,yt){return Math.log(jt/yt)/Math.LN2}var Ea=function(jt){n()(K,jt);var yt=Sa(K);function K(){var pt;s()(this,K);for(var It=arguments.length,ie=new Array(It),ze=0;ze<It;ze++)ie[ze]=arguments[ze];return pt=yt.call.apply(yt,[this].concat(ie)),pt.distance=void 0,pt.startDistance=void 0,pt}return r()(K,[{key:"reset",value:function(){Fs()(l()(K.prototype),"reset",this).call(this),delete this.distance,delete this.startDistance}},{key:"start",value:function(It){this.startDistance=this.distance=It[0].dist(It[1])}},{key:"move",value:function(It,ie){var ze=this.distance;if(this.distance=It[0].dist(It[1]),!(!this.active&&Math.abs(ei(this.distance,this.startDistance))<_a))return this.active=!0,{zoomDelta:ei(this.distance,ze),pinchAround:ie}}}]),K}(kn);function ka(jt,yt){var K=typeof Symbol!="undefined"&&jt[Symbol.iterator]||jt["@@iterator"];if(!K){if(Array.isArray(jt)||(K=Ga(jt))||yt&&jt&&typeof jt.length=="number"){K&&(jt=K);var pt=0,It=function(){};return{s:It,n:function(){return pt>=jt.length?{done:!0}:{done:!1,value:jt[pt++]}},e:function(Tn){throw Tn},f:It}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ie=!0,ze=!1,yn;return{s:function(){K=K.call(jt)},n:function(){var Tn=K.next();return ie=Tn.done,Tn},e:function(Tn){ze=!0,yn=Tn},f:function(){try{!ie&&K.return!=null&&K.return()}finally{if(ze)throw yn}}}}function Ga(jt,yt){if(!!jt){if(typeof jt=="string")return Ii(jt,yt);var K=Object.prototype.toString.call(jt).slice(8,-1);if(K==="Object"&&jt.constructor&&(K=jt.constructor.name),K==="Map"||K==="Set")return Array.from(jt);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return Ii(jt,yt)}}function Ii(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var K=0,pt=new Array(yt);K<yt;K++)pt[K]=jt[K];return pt}var Ia=function(yt){return yt.zoom||yt.drag||yt.pitch||yt.rotate};function yo(jt){return jt.panDelta&&jt.panDelta.mag()||jt.zoomDelta||jt.bearingDelta||jt.pitchDelta}var zs=function(){function jt(yt,K){var pt=this;s()(this,jt),this.map=void 0,this.el=void 0,this.handlers=void 0,this.eventsInProgress=void 0,this.frameId=void 0,this.inertia=void 0,this.bearingSnap=void 0,this.handlersById=void 0,this.updatingCamera=void 0,this.changes=void 0,this.previousActiveHandlers=void 0,this.bearingChanged=void 0,this.listeners=void 0,this.handleWindowEvent=function(ce){pt.handleEvent(ce,"".concat(ce.type,"Window"))},this.handleEvent=function(ce,be){if(ce.type==="blur"){pt.stop();return}pt.updatingCamera=!0;var Xe=ce.type==="renderFrame"?void 0:ce,zn={needsRenderFrame:!1},lr={},vr={},Qn=ce.touches?pt.getMapTouches(ce.touches):void 0,Jr=Qn?cs.touchPos(pt.el,Qn):cs.mousePos(pt.el,ce),$r=ka(pt.handlers),ri;try{for($r.s();!(ri=$r.n()).done;){var ui=ri.value,xi=ui.handlerName,Ti=ui.handler,pi=ui.allowed;if(!!Ti.isEnabled()){var hi=void 0;if(pt.blockedByActive(vr,pi,xi))Ti.reset();else{var Cr=be||ce.type;Ti&&Ti[Cr]&&(hi=Ti[Cr](ce,Jr,Qn),pt.mergeIHandlerResult(zn,lr,hi,xi,Xe),hi&&hi.needsRenderFrame&&pt.triggerRenderFrame())}(hi||Ti.isActive())&&(vr[xi]=Ti)}}}catch(qr){$r.e(qr)}finally{$r.f()}var Lr={};for(var bi in pt.previousActiveHandlers)vr[bi]||(Lr[bi]=Xe);pt.previousActiveHandlers=vr,(Object.keys(Lr).length||yo(zn))&&(pt.changes.push([zn,lr,Lr]),pt.triggerRenderFrame()),(Object.keys(vr).length||yo(zn))&&pt.map.stop(!0),pt.updatingCamera=!1;var ki=zn.cameraAnimation;ki&&(pt.inertia.clear(),pt.fireEvents({},{}),pt.changes=[],ki(pt.map))},this.map=yt,this.el=this.map.getCanvasContainer(),this.handlers=[],this.handlersById={},this.changes=[],this.inertia=new Zl(yt),this.bearingSnap=K.bearingSnap,this.previousActiveHandlers={},this.eventsInProgress={},this.addDefaultHandlers(K);var It=this.el;this.listeners=[[It,"touchstart",{passive:!1}],[It,"touchmove",{passive:!1}],[It,"touchend",void 0],[It,"touchcancel",void 0],[It,"mousedown",void 0],[It,"mousemove",void 0],[It,"mouseup",void 0],[window.document,"mousemove",{capture:!0}],[window.document,"mouseup",void 0],[It,"mouseover",void 0],[It,"mouseout",void 0],[It,"dblclick",void 0],[It,"click",void 0],[It,"keydown",{capture:!1}],[It,"keyup",void 0],[It,"wheel",{passive:!1}],[It,"contextmenu",void 0],[window,"blur",void 0]];var ie=ka(this.listeners),ze;try{for(ie.s();!(ze=ie.n()).done;){var yn=rt()(ze.value,3),pn=yn[0],Tn=yn[1],Nr=yn[2];cs.addEventListener(pn,Tn,pn===window.document?this.handleWindowEvent:this.handleEvent,Nr)}}catch(ce){ie.e(ce)}finally{ie.f()}}return r()(jt,[{key:"destroy",value:function(){var K=ka(this.listeners),pt;try{for(K.s();!(pt=K.n()).done;){var It=rt()(pt.value,3),ie=It[0],ze=It[1],yn=It[2];cs.removeEventListener(ie,ze,ie===window.document?this.handleWindowEvent:this.handleEvent,yn)}}catch(pn){K.e(pn)}finally{K.f()}}},{key:"stop",value:function(){if(!this.updatingCamera){var K=ka(this.handlers),pt;try{for(K.s();!(pt=K.n()).done;){var It=pt.value.handler;It.reset()}}catch(ie){K.e(ie)}finally{K.f()}this.inertia.clear(),this.fireEvents({},{}),this.changes=[]}}},{key:"isActive",value:function(){var K=ka(this.handlers),pt;try{for(K.s();!(pt=K.n()).done;){var It=pt.value.handler;if(It.isActive())return!0}}catch(ie){K.e(ie)}finally{K.f()}return!1}},{key:"isZooming",value:function(){return!!this.eventsInProgress.zoom||this.map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this.eventsInProgress.rotate}},{key:"isMoving",value:function(){return Boolean(Ia(this.eventsInProgress))||this.isZooming()}},{key:"mergeIHandlerResult",value:function(K,pt,It,ie,ze){if(!!It){ea()(K,It);var yn={handlerName:ie,originalEvent:It.originalEvent||ze};It.zoomDelta!==void 0&&(pt.zoom=yn),It.panDelta!==void 0&&(pt.drag=yn),It.pitchDelta!==void 0&&(pt.pitch=yn),It.bearingDelta!==void 0&&(pt.rotate=yn)}}},{key:"triggerRenderFrame",value:function(){var K=this;this.frameId===void 0&&(this.frameId=this.map.requestRenderFrame(function(pt){delete K.frameId,K.handleEvent(new ul("renderFrame",{timeStamp:pt})),K.applyChanges()}))}},{key:"addDefaultHandlers",value:function(K){var pt=this.map,It=pt.getCanvasContainer();this.add("mapEvent",new us(pt,K));var ie=pt.boxZoom=new Ul(pt,K);this.add("boxZoom",ie);var ze=new fn,yn=new wo;pt.doubleClickZoom=new xr(yn,ze),this.add("tapZoom",ze),this.add("clickZoom",yn);var pn=new vn;this.add("tapDragZoom",pn);var Tn=pt.touchPitch=new gi;this.add("touchPitch",Tn);var Nr=new Pe(K),ce=new On(K);pt.dragRotate=new te(K,Nr,ce),this.add("mouseRotate",Nr,["mousePitch"]),this.add("mousePitch",ce,["mouseRotate"]);var be=new Lu(K),Xe=new Yn(K);pt.dragPan=new Kt(It,be,Xe),this.add("mousePan",be),this.add("touchPan",Xe,["touchZoom","touchRotate"]);var zn=new Ri,lr=new Ea;pt.touchZoomRotate=new Ie(It,lr,zn,pn),this.add("touchRotate",zn,["touchPan","touchZoom"]),this.add("touchZoom",lr,["touchPan","touchRotate"]);var vr=pt.scrollZoom=new ci(pt,this);this.add("scrollZoom",vr,["mousePan"]);var Qn=pt.keyboard=new ku;this.add("keyboard",Qn),this.add("blockableMapEvent",new $u(pt));for(var Jr=0,$r=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Jr<$r.length;Jr++){var ri=$r[Jr];K.interactive&&K[ri]&&pt[ri].enable(K[ri])}}},{key:"add",value:function(K,pt,It){this.handlers.push({handlerName:K,handler:pt,allowed:It}),this.handlersById[K]=pt}},{key:"blockedByActive",value:function(K,pt,It){for(var ie in K)if(ie!==It&&(!pt||pt.indexOf(ie)<0))return!0;return!1}},{key:"getMapTouches",value:function(K){var pt=[],It=ka(K),ie;try{for(It.s();!(ie=It.n()).done;){var ze=ie.value,yn=ze.target;this.el.contains(yn)&&pt.push(ze)}}catch(pn){It.e(pn)}finally{It.f()}return pt}},{key:"applyChanges",value:function(){var K={},pt={},It={},ie=ka(this.changes),ze;try{for(ie.s();!(ze=ie.n()).done;){var yn=rt()(ze.value,3),pn=yn[0],Tn=yn[1],Nr=yn[2];pn.panDelta&&(K.panDelta=(K.panDelta||new ba(0,0))._add(pn.panDelta)),pn.zoomDelta&&(K.zoomDelta=(K.zoomDelta||0)+pn.zoomDelta),pn.bearingDelta&&(K.bearingDelta=(K.bearingDelta||0)+pn.bearingDelta),pn.pitchDelta&&(K.pitchDelta=(K.pitchDelta||0)+pn.pitchDelta),pn.around!==void 0&&(K.around=pn.around),pn.pinchAround!==void 0&&(K.pinchAround=pn.pinchAround),pn.noInertia&&(K.noInertia=pn.noInertia),ea()(pt,Tn),ea()(It,Nr)}}catch(ce){ie.e(ce)}finally{ie.f()}this.updateMapTransform(K,pt,It),this.changes=[]}},{key:"updateMapTransform",value:function(K,pt,It){var ie=this.map,ze=ie.transform;if(!yo(K))return this.fireEvents(pt,It);var yn=K.panDelta,pn=K.zoomDelta,Tn=K.bearingDelta,Nr=K.pitchDelta,ce=K.pinchAround,be=K.around;ce!==void 0&&(be=ce),ie.stop(!0),be=be||ie.transform.centerPoint;var Xe=ze.pointLocation(yn?be.sub(yn):be);Tn&&(ze.bearing+=Tn),Nr&&(ze.pitch+=Nr),pn&&(ze.zoom+=pn),ze.setLocationAtPoint(Xe,be),this.map.update(),K.noInertia||this.inertia.record(K),this.fireEvents(pt,It)}},{key:"fireEvents",value:function(K,pt){var It=this,ie=Ia(this.eventsInProgress),ze=Ia(K),yn={};for(var pn in K)if(K[pn]){var Tn=K[pn].originalEvent;this.eventsInProgress[pn]||(yn["".concat(pn,"start")]=Tn),this.eventsInProgress[pn]=K[pn]}!ie&&ze&&this.fireEvent("movestart",ze.originalEvent);for(var Nr in yn)yn[Nr]&&this.fireEvent(Nr,yn[Nr]);K.rotate&&(this.bearingChanged=!0),ze&&this.fireEvent("move",ze.originalEvent);for(var ce in K)if(K[ce]){var be=K[ce].originalEvent;this.fireEvent(ce,be)}var Xe={},zn;for(var lr in this.eventsInProgress)if(this.eventsInProgress[lr]){var vr=this.eventsInProgress[lr],Qn=vr.handlerName,Jr=vr.originalEvent;this.handlersById[Qn].isActive()||(delete this.eventsInProgress[lr],zn=pt[Qn]||Jr,Xe["".concat(lr,"end")]=zn)}for(var $r in Xe)Xe[$r]&&this.fireEvent($r,Xe[$r]);var ri=Ia(this.eventsInProgress);if((ie||ze)&&!ri){this.updatingCamera=!0;var ui=this.inertia.onMoveEnd(this.map.dragPan.inertiaOptions),xi=function(pi){return pi!==0&&-It.bearingSnap<pi&&pi<It.bearingSnap};ui?(xi(ui.bearing||this.map.getBearing())&&(ui.bearing=0),this.map.easeTo(ui,{originalEvent:zn})):(this.map.emit("moveend",new oo("moveend",{originalEvent:zn})),xi(this.map.getBearing())&&this.map.resetNorth()),this.bearingChanged=!1,this.updatingCamera=!1}}},{key:"fireEvent",value:function(K,pt){this.map.emit(K,new oo(K,pt?{originalEvent:pt}:{}))}}]),jt}(),Ts=zs,el=R("DzJC"),Mu=R.n(el),j=function(){function jt(yt){var K=this;s()(this,jt),this.map=void 0,this.updateHash=void 0,this.hashName=void 0,this.onHashChange=function(){var pt=K.getCurrentHash();if(pt.length>=3&&!pt.some(function(ie){return isNaN(+ie)})){var It=K.map.dragRotate.isEnabled()&&K.map.touchZoomRotate.isEnabled()?+(pt[3]||0):K.map.getBearing();return K.map.jumpTo({center:[+pt[2],+pt[1]],zoom:+pt[0],bearing:It,pitch:+(pt[4]||0)}),!0}return!1},this.getCurrentHash=function(){var pt=window.location.hash.replace("#","");if(K.hashName){var It;return pt.split("&").map(function(ie){return ie.split("=")}).forEach(function(ie){ie[0]===K.hashName&&(It=ie)}),(It&&It[1]||"").split("/")}return pt.split("/")},this.updateHashUnthrottled=function(){var pt=K.getHashString();try{window.history.replaceState(window.history.state,"",pt)}catch(It){}},this.hashName=yt&&encodeURIComponent(yt),this.updateHash=Mu()(this.updateHashUnthrottled,30*1e3/100)}return r()(jt,[{key:"addTo",value:function(K){return this.map=K,window.addEventListener("hashchange",this.onHashChange,!1),this.map.on("moveend",this.updateHash),this}},{key:"remove",value:function(){return window.removeEventListener("hashchange",this.onHashChange,!1),this.map.off("moveend",this.updateHash),delete this.map,this}},{key:"getHashString",value:function(K){var pt=this.map.getCenter(),It=Math.round(this.map.getZoom()*100)/100,ie=Math.ceil((It*Math.LN2+Math.log(512/360/.5))/Math.LN10),ze=Math.pow(10,ie),yn=Math.round(pt.lng*ze)/ze,pn=Math.round(pt.lat*ze)/ze,Tn=this.map.getBearing(),Nr=this.map.getPitch(),ce="";if(K?ce+="/".concat(yn,"/").concat(pn,"/").concat(It):ce+="".concat(It,"/").concat(pn,"/").concat(yn),(Tn||Nr)&&(ce+="/".concat(Math.round(Tn*10)/10)),Nr&&(ce+="/".concat(Math.round(Nr))),this.hashName){var be=this.hashName,Xe=!1,zn=window.location.hash.slice(1).split("&").map(function(lr){var vr=lr.split("=")[0];return vr===be?(Xe=!0,"".concat(vr,"=").concat(ce)):lr}).filter(function(lr){return lr});return Xe||zn.push("".concat(be,"=").concat(ce)),"#".concat(zn.join("&"))}return"#".concat(ce)}}]),jt}(),I=j,w=null,B=[],D=30,W=1e3/D,q=window.performance,st={create:"create",load:"load",fullLoad:"fullLoad"},Ct={mark:function(yt){q.mark(yt)},frame:function(yt){var K=yt;if(w!=null){var pt=K-w;B.push(pt)}w=K},clearMetrics:function(){w=null,B=[],q.clearMeasures("loadTime"),q.clearMeasures("fullLoadTime");for(var yt in st)q.clearMarks(st[yt])},getPerformanceMetrics:function(){var yt=q.measure("loadTime",st.create,st.load).duration,K=q.measure("fullLoadTime",st.create,st.fullLoad).duration,pt=B.length,It=B.reduce(function(pn,Tn){return pn+Tn},0)/pt/1e3,ie=1/It,ze=B.filter(function(pn){return pn>W}).reduce(function(pn,Tn){return pn+(Tn-W)/W},0),yn=ze/(pt+ze)*100;return{loadTime:yt,fullLoadTime:K,fps:ie,percentDroppedFrames:yn}}};function wt(jt,yt){var K=typeof Symbol!="undefined"&&jt[Symbol.iterator]||jt["@@iterator"];if(!K){if(Array.isArray(jt)||(K=Ut(jt))||yt&&jt&&typeof jt.length=="number"){K&&(jt=K);var pt=0,It=function(){};return{s:It,n:function(){return pt>=jt.length?{done:!0}:{done:!1,value:jt[pt++]}},e:function(Tn){throw Tn},f:It}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ie=!0,ze=!1,yn;return{s:function(){K=K.call(jt)},n:function(){var Tn=K.next();return ie=Tn.done,Tn},e:function(Tn){ze=!0,yn=Tn},f:function(){try{!ie&&K.return!=null&&K.return()}finally{if(ze)throw yn}}}}function Ut(jt,yt){if(!!jt){if(typeof jt=="string")return Zt(jt,yt);var K=Object.prototype.toString.call(jt).slice(8,-1);if(K==="Object"&&jt.constructor&&(K=jt.constructor.name),K==="Map"||K==="Set")return Array.from(jt);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return Zt(jt,yt)}}function Zt(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var K=0,pt=new Array(yt);K<yt;K++)pt[K]=jt[K];return pt}var qt=function(){function jt(){s()(this,jt),this.queue=void 0,this.id=void 0,this.cleared=void 0,this.currentlyRunning=void 0,this.queue=[],this.id=0,this.cleared=!1,this.currentlyRunning=!1}return r()(jt,[{key:"add",value:function(K){var pt=++this.id,It=this.queue;return It.push({callback:K,id:pt,cancelled:!1}),pt}},{key:"remove",value:function(K){var pt=this.currentlyRunning,It=pt?this.queue.concat(pt):this.queue,ie=wt(It),ze;try{for(ie.s();!(ze=ie.n()).done;){var yn=ze.value;if(yn.id===K){yn.cancelled=!0;return}}}catch(pn){ie.e(pn)}finally{ie.f()}}},{key:"run",value:function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,pt=this.currentlyRunning=this.queue;this.queue=[];var It=wt(pt),ie;try{for(It.s();!(ie=It.n()).done;){var ze=ie.value;if(!ze.cancelled&&(ze.callback(K),this.cleared))break}}catch(yn){It.e(yn)}finally{It.f()}this.cleared=!1,this.currentlyRunning=!1}},{key:"clear",value:function(){this.currentlyRunning&&(this.cleared=!0),this.queue=[]}}]),jt}(),he=qt;function me(jt){var yt=De();return function(){var pt=l()(jt),It;if(yt){var ie=l()(this).constructor;It=Reflect.construct(pt,arguments,ie)}else It=pt.apply(this,arguments);return a()(this,It)}}function De(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}R("BGjm")(`/* @antv/l7-map */
.l7-map {
  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:-webkit-full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: -webkit-grab;
  cursor: grab;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: -webkit-grabbing;
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  -ms-touch-action: pan-x pan-y;
      touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: pinch-zoom;
      touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  -ms-touch-action: none;
      touch-action: none;
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }
.l7-ctrl-top-left     { top: 0; left: 0; }
.l7-ctrl-top-right    { top: 0; right: 0; }
.l7-ctrl-bottom-left  { bottom: 0; left: 0; }
.l7-ctrl-bottom-right { right: 0; bottom: 0; }

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}
.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }
.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }
.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }
.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }


.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
    cursor: crosshair;
}

.l7-boxzoom {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    background: #fff;
    border: 2px dotted #202020;
    opacity: 0.5;
    z-index: 10;
}
`);var Ae=-2,Ue=22,qe=0,rn=60,Xn={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:Ae,maxZoom:Ue,minPitch:qe,maxPitch:rn,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0},Un=function(jt){n()(K,jt);var yt=me(K);function K(pt){var It;s()(this,K),It=yt.call(this,ea()({},Xn,pt)),It.doubleClickZoom=void 0,It.dragRotate=void 0,It.dragPan=void 0,It.touchZoomRotate=void 0,It.scrollZoom=void 0,It.keyboard=void 0,It.touchPitch=void 0,It.boxZoom=void 0,It.handlers=void 0,It.container=void 0,It.canvas=void 0,It.canvasContainer=void 0,It.renderTaskQueue=new he,It.frame=void 0,It.trackResize=!0,It.hash=void 0,It.onWindowOnline=function(){It.update()},It.onWindowResize=function(ze){It.trackResize&&It.resize({originalEvent:ze}).update()},It.initContainer(),It.resize(),It.handlers=new Ts(go()(It),It.options),typeof window!="undefined"&&(window.addEventListener("online",It.onWindowOnline,!1),window.addEventListener("resize",It.onWindowResize,!1),window.addEventListener("orientationchange",It.onWindowResize,!1));var ie=typeof pt.hash=="string"&&pt.hash||void 0;return pt.hash&&(It.hash=new I(ie).addTo(go()(It))),(!It.hash||!It.hash.onHashChange())&&(It.jumpTo({center:pt.center,zoom:pt.zoom,bearing:pt.bearing,pitch:pt.pitch}),pt.bounds&&(It.resize(),It.fitBounds(pt.bounds,ea()({},pt.fitBoundsOptions,{duration:0})))),It}return r()(K,[{key:"resize",value:function(It){var ie=this.containerDimensions(),ze=ie[0],yn=ie[1];this.transform.resize(ze,yn);var pn=!this.moving;return pn&&(this.stop(),this.emit("movestart",new Event("movestart",It)),this.emit("move",new Event("move",It))),this.emit("resize",new Event("resize",It)),pn&&this.emit("moveend",new Event("moveend",It)),this}},{key:"getContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getCanvasContainer",value:function(){return this.canvasContainer}},{key:"project",value:function(It){return this.transform.locationPoint(Ua.convert(It))}},{key:"unproject",value:function(It){return this.transform.pointLocation(ba.convert(It))}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(It){this.transform.setMaxBounds(Fu.convert(It))}},{key:"setStyle",value:function(It){}},{key:"setMinZoom",value:function(It){if(It=It==null?Ae:It,It>=Ae&&It<=this.transform.maxZoom)return this.transform.minZoom=It,this.getZoom()<It&&this.setZoom(It),this;throw new Error("minZoom must be between ".concat(Ae," and the current maxZoom, inclusive"))}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(It){if(It=It==null?Ue:It,It>=this.transform.minZoom)return this.transform.maxZoom=It,this.getZoom()>It&&this.setZoom(It),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(It){if(It=It==null?qe:It,It<qe)throw new Error("minPitch must be greater than or equal to ".concat(qe));if(It>=qe&&It<=this.transform.maxPitch)return this.transform.minPitch=It,this.getPitch()<It&&this.setPitch(It),this;throw new Error("minPitch must be between ".concat(qe," and the current maxPitch, inclusive"))}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(It){if(It=It==null?rn:It,It>rn)throw new Error("maxPitch must be less than or equal to ".concat(rn));if(It>=this.transform.minPitch)return this.transform.maxPitch=It,this.getPitch()>It&&this.setPitch(It),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(It){this.transform.renderWorldCopies=!!It}},{key:"remove",value:function(){this.frame&&(this.frame.cancel(),this.frame=null),this.renderTaskQueue.clear()}},{key:"requestRenderFrame",value:function(It){return this.update(),this.renderTaskQueue.add(It)}},{key:"cancelRenderFrame",value:function(It){return this.renderTaskQueue.remove(It)}},{key:"triggerRepaint",value:function(){var It=this;this.frame||(this.frame=al(function(ie){Ct.frame(ie),It.frame=null,It.update(ie)}))}},{key:"update",value:function(It){var ie=this;this.frame||(this.frame=al(function(ze){Ct.frame(ze),ie.frame=null,ie.renderTaskQueue.run(It)}))}},{key:"initContainer",value:function(){if(typeof this.options.container=="string"){if(this.container=window.document.getElementById(this.options.container),!this.container)throw new Error("Container '".concat(this.options.container,"' not found."))}else if(this.options.container instanceof HTMLElement)this.container=this.options.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");var It=this.container;It.classList.add("l7-map");var ie=this.canvasContainer=Ft.a.create("div","l7-canvas-container",It);this.options.interactive&&ie.classList.add("l7-interactive")}},{key:"containerDimensions",value:function(){var It=0,ie=0;return this.container&&(It=this.container.clientWidth||400,ie=this.container.clientHeight||300),[It,ie]}},{key:"resizeCanvas",value:function(It,ie){var ze=Ft.a.DPR||1;this.canvas.width=ze*It,this.canvas.height=ze*ie,this.canvas.style.width="".concat(It,"px"),this.canvas.style.height="".concat(ie,"px")}}]),K}(nu),gr=function(){function jt(){s()(this,jt),this.viewport=void 0}return r()(jt,[{key:"syncWithMapCamera",value:function(K){var pt=K.center,It=K.zoom,ie=K.pitch,ze=K.bearing,yn=K.viewportHeight,pn=K.viewportWidth;this.viewport=new qs({width:pn,height:yn,longitude:pt&&pt[0],latitude:pt&&pt[1],zoom:It,pitch:ie,bearing:ze})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(K,pt){return this.viewport.projectFlat(K,pt)}}]),jt}(),Mr={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},Qr,Vr,_i,Di,Wi,Xi,La,Na,Vi,Ma,xa,Hi,ha;function aa(jt,yt){var K=Object.keys(jt);if(Object.getOwnPropertySymbols){var pt=Object.getOwnPropertySymbols(jt);yt&&(pt=pt.filter(function(It){return Object.getOwnPropertyDescriptor(jt,It).enumerable})),K.push.apply(K,pt)}return K}function Ca(jt){for(var yt=1;yt<arguments.length;yt++){var K=arguments[yt]!=null?arguments[yt]:{};yt%2?aa(Object(K),!0).forEach(function(pt){v()(jt,pt,K[pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(K)):aa(Object(K)).forEach(function(pt){Object.defineProperty(jt,pt,Object.getOwnPropertyDescriptor(K,pt))})}return jt}var Va={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},As=12,Rs=(Qr=Object(St.injectable)(),Vr=Object(St.inject)(x.TYPES.MapConfig),_i=Object(St.inject)(x.TYPES.IGlobalConfigService),Di=Object(St.inject)(x.TYPES.ILogService),Wi=Object(St.inject)(x.TYPES.ICoordinateSystemService),Xi=Object(St.inject)(x.TYPES.IEventEmitter),Qr(La=(Na=function(){function jt(){var yt=this;s()(this,jt),this.map=void 0,g()(this,"config",Vi,this),g()(this,"configService",Ma,this),g()(this,"logger",xa,this),g()(this,"coordinateSystemService",Hi,this),g()(this,"eventEmitter",ha,this),this.viewport=void 0,this.markerContainer=void 0,this.cameraChangedCallback=void 0,this.$mapContainer=void 0,this.handleCameraChanged=function(){var K=yt.map.getCenter(),pt=K.lat,It=K.lng,ie=yt.config.offsetCoordinate,ze=ie===void 0?!0:ie;yt.viewport.syncWithMapCamera({bearing:yt.map.getBearing(),center:[It,pt],viewportHeight:yt.map.transform.height,pitch:yt.map.getPitch(),viewportWidth:yt.map.transform.width,zoom:yt.map.getZoom(),cameraHeight:0}),yt.viewport.getZoom()>As&&ze?yt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.LNGLAT_OFFSET):yt.coordinateSystemService.setCoordinateSystem(x.CoordinateSystem.LNGLAT),yt.cameraChangedCallback(yt.viewport)}}return r()(jt,[{key:"addMarkerContainer",value:function(){var K=this.map.getCanvasContainer();this.markerContainer=Ft.a.create("div","l7-marker-container",K),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(K,pt){x.MapServiceEvent.indexOf(K)!==-1?this.eventEmitter.on(K,pt):this.map.on(Va[K]||K,pt)}},{key:"off",value:function(K,pt){this.map.off(Va[K]||K,pt)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){var K=this.map.transform;return[K.width,K.height]}},{key:"getType",value:function(){return"default"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(K){return this.map.setZoom(K)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(K){this.map.setCenter(K)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(K){this.map.setBearing(K)}},{key:"zoomIn",value:function(K,pt){this.map.zoomIn(K,pt)}},{key:"zoomOut",value:function(K,pt){this.map.zoomOut(K,pt)}},{key:"setPitch",value:function(K){return this.map.setPitch(K)}},{key:"panTo",value:function(K){this.map.panTo(K)}},{key:"panBy",value:function(K){this.panTo(K)}},{key:"fitBounds",value:function(K,pt){this.map.fitBounds(K,pt)}},{key:"setMaxZoom",value:function(K){this.map.setMaxZoom(K)}},{key:"setMinZoom",value:function(K){this.map.setMinZoom(K)}},{key:"setMapStatus",value:function(K){K.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),K.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),K.dragEnable===!1&&this.map.dragPan.disable(),K.dragEnable===!0&&this.map.dragPan.enable(),K.rotateEnable===!1&&this.map.dragRotate.disable(),K.dragEnable===!0&&this.map.dragRotate.enable(),K.keyboardEnable===!1&&this.map.keyboard.disable(),K.keyboardEnable===!0&&this.map.keyboard.enable(),K.zoomEnable===!1&&this.map.scrollZoom.disable(),K.zoomEnable===!0&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(K,pt){this.map.flyTo({zoom:K,center:pt})}},{key:"setMapStyle",value:function(K){this.map.setStyle(this.getMapStyle(K))}},{key:"pixelToLngLat",value:function(K){return this.map.unproject(K)}},{key:"lngLatToPixel",value:function(K){return this.map.project(K)}},{key:"containerToLngLat",value:function(K){return this.map.unproject(K)}},{key:"lngLatToContainer",value:function(K){return this.map.project(K)}},{key:"lngLatToMercator",value:function(K,pt){throw new Error("not implement")}},{key:"getModelMatrix",value:function(K,pt,It){var ie=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],ze=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{x:0,y:0,z:0};throw new Error("not implement")}},{key:"init",value:function(){var yt=Y()(dt.a.mark(function pt(){var It,ie,ze,yn,pn,Tn,Nr,ce,be,Xe,zn;return dt.a.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:It=this.config,ie=It.id,ze=ie===void 0?"map":ie,yn=It.attributionControl,pn=yn===void 0?!1:yn,Tn=It.style,Nr=Tn===void 0?"light":Tn,ce=It.rotation,be=ce===void 0?0:ce,Xe=It.mapInstance,zn=G()(It,["id","attributionControl","style","rotation","mapInstance"]),this.viewport=new gr,Xe?(this.map=Xe,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatAmapContainer(ze),this.map=new Un(Ca({container:this.$mapContainer,style:this.getMapStyle(Nr),bearing:be},zn))),this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 6:case"end":return vr.stop()}},pt,this)}));function K(){return yt.apply(this,arguments)}return K}()},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(K){for(var pt,It=arguments.length,ie=new Array(It>1?It-1:0),ze=1;ze<It;ze++)ie[ze-1]=arguments[ze];(pt=this.eventEmitter).emit.apply(pt,[K].concat(ie))}},{key:"once",value:function(K){for(var pt,It=arguments.length,ie=new Array(It>1?It-1:0),ze=1;ze<It;ze++)ie[ze-1]=arguments[ze];(pt=this.eventEmitter).once.apply(pt,[K].concat(ie))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(K){var pt=this.map.getCanvas(),It=K==="jpg"?pt==null?void 0:pt.toDataURL("image/jpeg"):pt==null?void 0:pt.toDataURL("image/png");return It}},{key:"onCameraChanged",value:function(K){this.cameraChangedCallback=K}},{key:"creatAmapContainer",value:function(K){var pt=K;return typeof K=="string"&&(pt=document.getElementById(K)),pt}},{key:"getMapStyle",value:function(K){return typeof K!="string"?K:Mr[K]?Mr[K]:K}}]),jt}(),Vi=_()(Na.prototype,"config",[Vr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ma=_()(Na.prototype,"configService",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xa=_()(Na.prototype,"logger",[Di],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hi=_()(Na.prototype,"coordinateSystemService",[Wi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ha=_()(Na.prototype,"eventEmitter",[Xi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Na))||La);function gs(jt){var yt=fs();return function(){var pt=l()(jt),It;if(yt){var ie=l()(this).constructor;It=Reflect.construct(pt,arguments,ie)}else It=pt.apply(this,arguments);return a()(this,It)}}function fs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(jt){return!1}}var Qs=function(jt){n()(K,jt);var yt=gs(K);function K(){return s()(this,K),yt.apply(this,arguments)}return r()(K,[{key:"getServiceConstructor",value:function(){return Rs}}]),K}(F);function _l(jt,yt){var K=Object.keys(jt);if(Object.getOwnPropertySymbols){var pt=Object.getOwnPropertySymbols(jt);yt&&(pt=pt.filter(function(It){return Object.getOwnPropertyDescriptor(jt,It).enumerable})),K.push.apply(K,pt)}return K}function du(jt){for(var yt=1;yt<arguments.length;yt++){var K=arguments[yt]!=null?arguments[yt]:{};yt%2?_l(Object(K),!0).forEach(function(pt){uc(jt,pt,K[pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(K)):_l(Object(K)).forEach(function(pt){Object.defineProperty(jt,pt,Object.getOwnPropertyDescriptor(K,pt))})}return jt}function uc(jt,yt,K){return yt in jt?Object.defineProperty(jt,yt,{value:K,enumerable:!0,configurable:!0,writable:!0}):jt[yt]=K,jt}function Mc(jt,yt){return Pc(jt)||qc(jt,yt)||ql(jt,yt)||Il()}function Il(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ql(jt,yt){if(!!jt){if(typeof jt=="string")return Ic(jt,yt);var K=Object.prototype.toString.call(jt).slice(8,-1);if(K==="Object"&&jt.constructor&&(K=jt.constructor.name),K==="Map"||K==="Set")return Array.from(jt);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return Ic(jt,yt)}}function Ic(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var K=0,pt=new Array(yt);K<yt;K++)pt[K]=jt[K];return pt}function qc(jt,yt){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var K=[],pt=!0,It=!1,ie=void 0;try{for(var ze=jt[Symbol.iterator](),yn;!(pt=(yn=ze.next()).done)&&(K.push(yn.value),!(yt&&K.length===yt));pt=!0);}catch(pn){It=!0,ie=pn}finally{try{!pt&&ze.return!=null&&ze.return()}finally{if(It)throw ie}}return K}}function Pc(jt){if(Array.isArray(jt))return jt}var Zc=E.a.memo(function(jt){var yt=jt.style,K=jt.className,pt=jt.map,It=jt.option,ie=jt.onSceneLoaded,ze=jt.children,yn=Object(V.useRef)(null),pn=Object(V.useState)(),Tn=Mc(pn,2),Nr=Tn[0],ce=Tn[1];return Object(V.useEffect)(function(){var be=new t.Scene(du(du({id:yn.current},It),{},{map:new Qs(pt)}));return be.on("loaded",function(){ce(be),ie&&ie(be)}),function(){be.destroy()}},[]),Object(V.useEffect)(function(){Nr&&pt.style&&Nr.setMapStyle(pt.style)},[JSON.stringify(pt.style)]),Object(V.useEffect)(function(){Nr&&pt.zoom&&Nr.setZoom(pt.zoom)},[pt.zoom]),Object(V.useEffect)(function(){Nr&&pt.center&&Nr.setCenter(pt.center)},[JSON.stringify(pt.center)]),Object(V.useEffect)(function(){Nr&&pt.pitch&&Nr.setPitch(pt.pitch)},[pt.pitch]),Object(V.useEffect)(function(){Nr&&pt.rotation&&Nr.setRotation(pt.rotation)},[pt.rotation]),E.a.createElement(T.Provider,{value:Nr},E.a.createElement("div",{ref:yn,className:K,style:yt},Nr&&ze))}),of=Zc;function vc(jt,yt){return Tc(jt)||tc(jt,yt)||bc(jt,yt)||kc()}function kc(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bc(jt,yt){if(!!jt){if(typeof jt=="string")return au(jt,yt);var K=Object.prototype.toString.call(jt).slice(8,-1);if(K==="Object"&&jt.constructor&&(K=jt.constructor.name),K==="Map"||K==="Set")return Array.from(jt);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return au(jt,yt)}}function au(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var K=0,pt=new Array(yt);K<yt;K++)pt[K]=jt[K];return pt}function tc(jt,yt){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var K=[],pt=!0,It=!1,ie=void 0;try{for(var ze=jt[Symbol.iterator](),yn;!(pt=(yn=ze.next()).done)&&(K.push(yn.value),!(yt&&K.length===yt));pt=!0);}catch(pn){It=!0,ie=pn}finally{try{!pt&&ze.return!=null&&ze.return()}finally{if(It)throw ie}}return K}}function Tc(jt){if(Array.isArray(jt))return jt}var ec=E.a.memo(function(jt){var yt=jt.style,K=jt.className,pt=jt.map,It=jt.children,ie=Object(V.useRef)(null),ze=Object(V.useState)(),yn=vc(ze,2),pn=yn[0],Tn=yn[1];return Object(V.useEffect)(function(){var Nr=new t.Scene({id:ie.current,map:pt});return Nr.on("loaded",function(){Tn(Nr)}),function(){Nr.destroy()}},[]),E.a.createElement(T.Provider,{value:pn},E.a.createElement("div",{ref:ie,className:K,style:yt},pn&&It))}),Pu=E.a.memo(function(yt){var K=e(),pt=Object(V.useRef)(),It=yt.type,ie=yt.position;return Object(V.useEffect)(function(){var ze;switch(It){case"scale":ze=new t.Scale({position:ie||"bottomright"});break;case"zoom":ze=new t.Zoom({position:ie||"topright"});break;case"logo":ze=new t.Logo({position:ie||"bottomleft"})}return pt.current=ze,K.addControl(ze),function(){pt.current=void 0,K.removeControl(ze)}},[It]),Object(V.useEffect)(function(){pt.current&&pt.current.setPosition(ie)},[ie]),null}),vu=R("i8i4");function cl(jt,yt){return tf(jt)||Gc(jt,yt)||fl(jt,yt)||Ll()}function Ll(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fl(jt,yt){if(!!jt){if(typeof jt=="string")return kl(jt,yt);var K=Object.prototype.toString.call(jt).slice(8,-1);if(K==="Object"&&jt.constructor&&(K=jt.constructor.name),K==="Map"||K==="Set")return Array.from(jt);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return kl(jt,yt)}}function kl(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var K=0,pt=new Array(yt);K<yt;K++)pt[K]=jt[K];return pt}function Gc(jt,yt){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var K=[],pt=!0,It=!1,ie=void 0;try{for(var ze=jt[Symbol.iterator](),yn;!(pt=(yn=ze.next()).done)&&(K.push(yn.value),!(yt&&K.length===yt));pt=!0);}catch(pn){It=!0,ie=pn}finally{try{!pt&&ze.return!=null&&ze.return()}finally{if(It)throw ie}}return K}}function tf(jt){if(Array.isArray(jt))return jt}var Vc=V.useEffect,lc=V.useState;function hl(jt){var yt=jt.className,K=jt.style,pt=jt.children,It=jt.position,ie=e(),ze=lc(function(){return document.createElement("div")}),yn=cl(ze,1),pn=yn[0];return Vc(function(){var Tn=new t.Control({position:It});return Tn.onAdd=function(){if(yt&&(pn.className=yt),K){var Nr=Object.keys(K).map(function(ce){return"".concat(ce,":").concat(K[ce])}).join(";");pn.style.cssText=Nr}return pn},ie.addControl(Tn),function(){ie.removeControl(Tn)}},[]),Object(vu.createPortal)(pt,pn)}var Ec=Object(V.createContext)({});function Kl(){return Object(V.useContext)(Ec)}var dl=V.useEffect,Jf=V.memo(function(yt){var K=yt.layer,pt=yt.active;return dl(function(){K.active(pt.option)},[JSON.stringify(pt)]),null}),cf=V.useEffect,pf=V.memo(function(yt){var K=yt.layer,pt=yt.animate;return cf(function(){K.animate(pt)},[JSON.stringify(pt)]),null}),_f=V.useEffect,Gf=V.memo(function(yt){var K=yt.layer,pt=yt.color;return _f(function(){pt.field?K.color(pt.field,pt.values):K.color(pt.values)},[pt.field,pt.scale,JSON.stringify(pt.values),JSON.stringify(pt.options)]),null}),gf=V.useEffect,Wc=V.memo(function(yt){var K=yt.layer,pt=yt.filter;return gf(function(){pt.field&&K.filter(pt.field,pt.values)},[pt.field,pt.values,JSON.stringify(pt.values),JSON.stringify(pt.options)]),null}),$f=V.useEffect,Ac=V.memo(function(yt){var K=yt.layer,pt=yt.scale;return $f(function(){K.scale(pt.values)},[pt.values]),null}),ef=V.useEffect,Kc=V.memo(function(yt){var K=yt.layer,pt=yt.select;return ef(function(){K.select(pt.option)},[JSON.stringify(pt)]),null}),Mf=V.useEffect,hh=V.memo(function(yt){var K=yt.layer,pt=yt.shape;return Mf(function(){pt.field?K.shape(pt.field,pt.values):K.shape(pt.values)},[pt.field,JSON.stringify(pt.values),JSON.stringify(pt.options)]),null}),Qf=V.useEffect,Vf=V.memo(function(yt){var K=yt.layer,pt=yt.size;return Qf(function(){pt.field?K.size(pt.field,pt.values):K.size(pt.values)},[pt.field,pt.scale,JSON.stringify(pt.values),JSON.stringify(pt.options)]),null});function qf(jt,yt){if(jt==null)return{};var K=ve(jt,yt),pt,It;if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(jt);for(It=0;It<ie.length;It++)pt=ie[It],!(yt.indexOf(pt)>=0)&&(!Object.prototype.propertyIsEnumerable.call(jt,pt)||(K[pt]=jt[pt]))}return K}function ve(jt,yt){if(jt==null)return{};var K={},pt=Object.keys(jt),It,ie;for(ie=0;ie<pt.length;ie++)It=pt[ie],!(yt.indexOf(It)>=0)&&(K[It]=jt[It]);return K}var ye=V.useEffect,Gt=V.memo(function(yt){var K=yt.layer,pt=yt.source,It=pt.data,ie=qf(pt,["data"]);return ye(function(){K.inited?K.setData(It,ie):K.source(It,ie),ie.autoFit&&K.fitBounds(ie&&ie.fitBoundsOptions)},[It,JSON.stringify(ie)]),null}),Xt=V.useEffect,ke=V.memo(function(yt){var K=yt.layer,pt=yt.style;return Xt(function(){K.style(pt)},Object.keys(pt).map(function(It){return pt[It]})),null});function un(jt,yt){return Ci(jt)||ti(jt,yt)||ir(jt,yt)||Wn()}function Wn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ir(jt,yt){if(!!jt){if(typeof jt=="string")return dr(jt,yt);var K=Object.prototype.toString.call(jt).slice(8,-1);if(K==="Object"&&jt.constructor&&(K=jt.constructor.name),K==="Map"||K==="Set")return Array.from(jt);if(K==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return dr(jt,yt)}}function dr(jt,yt){(yt==null||yt>jt.length)&&(yt=jt.length);for(var K=0,pt=new Array(yt);K<yt;K++)pt[K]=jt[K];return pt}function ti(jt,yt){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(jt)))){var K=[],pt=!0,It=!1,ie=void 0;try{for(var ze=jt[Symbol.iterator](),yn;!(pt=(yn=ze.next()).done)&&(K.push(yn.value),!(yt&&K.length===yt));pt=!0);}catch(pn){It=!0,ie=pn}finally{try{!pt&&ze.return!=null&&ze.return()}finally{if(It)throw ie}}return K}}function Ci(jt){if(Array.isArray(jt))return jt}var Ji=V.useEffect,fa=V.useState;function na(jt,yt){var K=yt.source,pt=yt.color,It=yt.shape,ie=yt.style,ze=yt.size,yn=yt.scale,pn=yt.active,Tn=yt.select,Nr=yt.filter,ce=yt.animate,be=yt.options,Xe=yt.onLayerLoaded,zn=e(),lr=fa(),vr=un(lr,2),Qn=vr[0],Jr=vr[1];if(!Qn){var $r;switch(jt){case"polygonLayer":$r=new t.PolygonLayer(be);break;case"lineLayer":$r=new t.LineLayer(be);break;case"pointLayer":$r=new t.PointLayer(be);break;case"heatmapLayer":$r=new t.HeatmapLayer(be);break;case"rasterLayer":$r=new t.RasterLayer(be);break;case"imageLayer":$r=new t.ImageLayer(be);break;case"citybuildingLayer":$r=new t.CityBuildingLayer(be);break;default:$r=new t.PolygonLayer(be)}$r.on("inited",function(){Xe&&Xe($r,zn)}),Jr($r)}return Ji(function(){if(Qn!==void 0)return zn.addLayer(Qn),function(){zn.removeLayer(Qn)}},[]),Ji(function(){Qn&&Qn.inited&&be&&(Qn.updateLayerConfig(be),zn.render())},[be==null?void 0:be.minZoom,be==null?void 0:be.maxZoom,be==null?void 0:be.visible]),Ji(function(){Qn&&Qn.inited&&be&&be.zIndex&&Qn.setIndex(be.zIndex)},[be==null?void 0:be.zIndex]),Ji(function(){Qn&&Qn.inited&&be&&be.blend&&Qn.setBlend(be.blend)},[be==null?void 0:be.blend]),Ji(function(){Qn&&zn.render()},[]),Qn!=null?V.createElement(Ec.Provider,{value:Qn},V.createElement(Gt,{layer:Qn,source:K}),yn&&V.createElement(Ac,{layer:Qn,scale:yn}),pt&&V.createElement(Gf,{layer:Qn,color:pt}),ze&&V.createElement(Vf,{layer:Qn,size:ze}),It&&V.createElement(hh,{layer:Qn,shape:It}),ie&&V.createElement(ke,{layer:Qn,style:ie}),pn&&V.createElement(Jf,{layer:Qn,active:pn}),Tn&&V.createElement(Kc,{layer:Qn,select:Tn}),Nr&&V.createElement(Wc,{layer:Qn,filter:Nr}),ce&&V.createElement(pf,{layer:Qn,animate:ce}),yt.children):null}var no=V.memo(function(yt){return na("polygonLayer",yt)}),$a=V.memo(function(yt){return na("lineLayer",yt)}),Vo=V.memo(function(yt){return na("pointLayer",yt)}),To=V.memo(function(yt){return na("heatmapLayer",yt)}),pu=V.memo(function(yt){return na("rasterLayer",yt)}),lu=V.memo(function(yt){return na("imageLayer",yt)}),Vu=V.memo(function(yt){return na("citybuildingLayer",yt)}),gu=V.useEffect,vl=V.memo(function(jt){var yt=jt.type,K=jt.handler,pt=Kl();return gu(function(){return pt.off(yt,K),pt.on(yt,K),function(){pt.off(yt,K)}},[yt,K]),null}),Qo=V.memo(function(jt){var yt=[{title:"1",color:"rgb(239,243,255)"},{title:"10",color:"rgb(198,219,239)"},{title:"30",color:"rgb(158,202,225)"},{title:"50",color:"rgb(107,174,214)"},{title:"60",color:"rgb(49,130,189)"},{title:"100",color:"rgb(8,81,156)"}],K=jt.items,pt=K===void 0?yt:K;return V.createElement("div",null,V.createElement("div",null,pt.map(function(It,ie){return V.createElement("div",{key:ie,style:{background:It.color,height:"100%",display:"inline-block",cursor:"pointer",width:""+(100-pt.length)/pt.length+"%",marginRight:"1%",padding:5}})})),V.createElement("div",null,pt.map(function(It,ie){return V.createElement("div",{key:ie,style:{background:"#fff",height:"100%",display:"inline-block",textAlign:"left",cursor:"pointer",width:""+(100-pt.length)/pt.length+"%",marginRight:"1%"}},It.title)})))});function ms(jt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ms=function(K){return typeof K}:ms=function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},ms(jt)}function Us(jt,yt){var K=Object.keys(jt);if(Object.getOwnPropertySymbols){var pt=Object.getOwnPropertySymbols(jt);yt&&(pt=pt.filter(function(It){return Object.getOwnPropertyDescriptor(jt,It).enumerable})),K.push.apply(K,pt)}return K}function Tu(jt){for(var yt=1;yt<arguments.length;yt++){var K=arguments[yt]!=null?arguments[yt]:{};yt%2?Us(Object(K),!0).forEach(function(pt){pl(jt,pt,K[pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(jt,Object.getOwnPropertyDescriptors(K)):Us(Object(K)).forEach(function(pt){Object.defineProperty(jt,pt,Object.getOwnPropertyDescriptor(K,pt))})}return jt}function pl(jt,yt,K){return yt in jt?Object.defineProperty(jt,yt,{value:K,enumerable:!0,configurable:!0,writable:!0}):jt[yt]=K,jt}function Gl(jt,yt){if(!(jt instanceof yt))throw new TypeError("Cannot call a class as a function")}function Lc(jt,yt){for(var K=0;K<yt.length;K++){var pt=yt[K];pt.enumerable=pt.enumerable||!1,pt.configurable=!0,"value"in pt&&(pt.writable=!0),Object.defineProperty(jt,pt.key,pt)}}function jc(jt,yt,K){return yt&&Lc(jt.prototype,yt),K&&Lc(jt,K),jt}function Bc(jt,yt){if(typeof yt!="function"&&yt!==null)throw new TypeError("Super expression must either be null or a function");jt.prototype=Object.create(yt&&yt.prototype,{constructor:{value:jt,writable:!0,configurable:!0}}),yt&&If(jt,yt)}function If(jt,yt){return If=Object.setPrototypeOf||function(pt,It){return pt.__proto__=It,pt},If(jt,yt)}function Lf(jt){var yt=Fh();return function(){var pt=Rc(jt),It;if(yt){var ie=Rc(this).constructor;It=Reflect.construct(pt,arguments,ie)}else It=pt.apply(this,arguments);return Wf(this,It)}}function Wf(jt,yt){return yt&&(ms(yt)==="object"||typeof yt=="function")?yt:Rf(jt)}function Rf(jt){if(jt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return jt}function Fh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(jt){return!1}}function Rc(jt){return Rc=Object.setPrototypeOf?Object.getPrototypeOf:function(K){return K.__proto__||Object.getPrototypeOf(K)},Rc(jt)}var mf=function(jt){Bc(K,jt);var yt=Lf(K);function K(pt){var It;return Gl(this,K),It=yt.call(this,pt),It.el=document.createElement("div"),It}return jc(K,[{key:"componentDidMount",value:function(){var It,ie=this.props,ze=ie.lnglat,yn=ie.children,pn=ie.option,Tn=ie.lngLat,Nr=new t.Popup(Tu(Tu({},pn),{},{stopPropagation:(It=this.props.option)===null||It===void 0?void 0:It.stopPropagation}));ze&&Nr.setLnglat(ze),Tn&&Nr.setLnglat(Tn),yn&&Nr.setDOMContent(this.el),this.popup=Nr,this.scene.addPopup(Nr)}},{key:"componentDidUpdate",value:function(It){var ie,ze,yn,pn,Tn,Nr,ce=Array.isArray(It.lnglat)?It.lnglat:[It==null||(ie=It.lnglat)===null||ie===void 0?void 0:ie.lng,It==null||(ze=It.lnglat)===null||ze===void 0?void 0:ze.lat],be=Array.isArray(this.props.lnglat)?this.props.lnglat:[(yn=this.props)===null||yn===void 0||(pn=yn.lnglat)===null||pn===void 0?void 0:pn.lng,(Tn=this.props)===null||Tn===void 0||(Nr=Tn.lnglat)===null||Nr===void 0?void 0:Nr.lat],Xe=ce.toString()!==be.toString();if(Xe){var zn;this.popup.remove(),this.popup=new t.Popup(Tu(Tu({},this.props.option),{},{stopPropagation:(zn=this.props.option)===null||zn===void 0?void 0:zn.stopPropagation})),this.popup.setLnglat(this.props.lnglat),this.popup.setDOMContent(this.el),this.scene.addPopup(this.popup)}}},{key:"componentWillUnmount",value:function(){this.popup.remove()}},{key:"render",value:function(){var It=this;return V.createElement(T.Consumer,{},function(ie){return ie&&(It.scene=ie),Object(vu.createPortal)(It.props.children,It.el)})}}]),K}(V.PureComponent);function nf(jt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nf=function(K){return typeof K}:nf=function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},nf(jt)}function Hc(jt,yt){if(!(jt instanceof yt))throw new TypeError("Cannot call a class as a function")}function sf(jt,yt){for(var K=0;K<yt.length;K++){var pt=yt[K];pt.enumerable=pt.enumerable||!1,pt.configurable=!0,"value"in pt&&(pt.writable=!0),Object.defineProperty(jt,pt.key,pt)}}function cu(jt,yt,K){return yt&&sf(jt.prototype,yt),K&&sf(jt,K),jt}function Pf(jt,yt){if(typeof yt!="function"&&yt!==null)throw new TypeError("Super expression must either be null or a function");jt.prototype=Object.create(yt&&yt.prototype,{constructor:{value:jt,writable:!0,configurable:!0}}),yt&&uf(jt,yt)}function uf(jt,yt){return uf=Object.setPrototypeOf||function(pt,It){return pt.__proto__=It,pt},uf(jt,yt)}function Dc(jt){var yt=Fc();return function(){var pt=ff(jt),It;if(yt){var ie=ff(this).constructor;It=Reflect.construct(pt,arguments,ie)}else It=pt.apply(this,arguments);return Nc(this,It)}}function Nc(jt,yt){return yt&&(nf(yt)==="object"||typeof yt=="function")?yt:Ml(jt)}function Ml(jt){if(jt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return jt}function Fc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(jt){return!1}}function ff(jt){return ff=Object.setPrototypeOf?Object.getPrototypeOf:function(K){return K.__proto__||Object.getPrototypeOf(K)},ff(jt)}var Tf=function(jt){Pf(K,jt);var yt=Dc(K);function K(pt){var It;return Hc(this,K),It=yt.call(this,pt),It.el=document.createElement("div"),It}return cu(K,[{key:"componentDidMount",value:function(){var It=this.props,ie=It.lnglat,ze=It.children,yn=It.option,pn=It.onMarkerLoaded,Tn=new t.Marker(yn);ie&&Tn.setLnglat(ie),ze&&Tn.setElement(this.el),this.marker=Tn,pn&&pn(Tn),this.scene.addMarker(Tn)}},{key:"componentDidUpdate",value:function(It){var ie,ze=(It==null?void 0:It.lnglat.toString())!==((ie=this.props)===null||ie===void 0?void 0:ie.lnglat.toString());ze&&this.marker.setLnglat(this.props.lnglat)}},{key:"componentWillUnmount",value:function(){this.marker&&this.marker.remove()}},{key:"render",value:function(){var It=this;return V.createElement(T.Consumer,{},function(ie){return ie&&(It.scene=ie),Object(vu.createPortal)(It.props.children,It.el)})}}]),K}(V.PureComponent),Hf=V.useEffect,th=V.memo(function(jt){var yt=jt.type,K=jt.handler,pt=e();return Hf(function(){return pt.on(yt,K),function(){pt.off(yt,K)}},[yt]),null}),pc=th,hf=V.useEffect,eh=V.memo(function(yt){var K=yt.name,pt=yt.url,It=e();return hf(function(){It.addImage(K,pt)},[K,pt]),null})},"6AGu":function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.BindingInSyntax=void 0;var V=R("FV85"),E=R("LKzl"),T=function(){function e(t){this._binding=t}return e.prototype.inRequestScope=function(){return this._binding.scope=V.BindingScopeEnum.Request,new E.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=V.BindingScopeEnum.Singleton,new E.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=V.BindingScopeEnum.Transient,new E.BindingWhenOnSyntax(this._binding)},e}();ct.BindingInSyntax=T},"6D9b":function(Se,ct,R){Se.exports={"ant-statistic":"ant-statistic","ant-statistic-title":"ant-statistic-title","ant-statistic-content":"ant-statistic-content","ant-statistic-content-value":"ant-statistic-content-value","ant-statistic-content-prefix":"ant-statistic-content-prefix","ant-statistic-content-suffix":"ant-statistic-content-suffix","ant-statistic-rtl":"ant-statistic-rtl"}},"6NqC":function(Se,ct){},"6acW":function(Se,ct,R){var V=R("dt0z"),E=R("gQMU");function T(e){return E(V(e).toLowerCase())}Se.exports=T},"6nK8":function(Se,ct,R){var V=R("dVn5"),E=R("fo6e"),T=R("dt0z"),e=R("9NmV");function t(u,s,c){return u=T(u),s=c?void 0:s,s===void 0?E(u)?e(u):V(u):u.match(s)||[]}Se.exports=t},"711d":function(Se,ct){function R(V){return function(E){return E==null?void 0:E[V]}}Se.exports=R},"78VC":function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.multiBindToService=void 0;var V=function(T){return function(e){return function(){for(var t=[],u=0;u<arguments.length;u++)t[u]=arguments[u];return t.forEach(function(s){return T.bind(s).toService(e)})}}};ct.multiBindToService=V},"7Ix3":function(Se,ct){function R(V){var E=[];if(V!=null)for(var T in Object(V))E.push(T);return E}Se.exports=R},"7W2i":function(Se,ct,R){var V=R("SksO");function E(T,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(e&&e.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),e&&V(T,e)}Se.exports=E,Se.exports.default=Se.exports,Se.exports.__esModule=!0},"7tbW":function(Se,ct,R){var V=R("LGYb");function E(T){return T&&T.length?V(T):[]}Se.exports=E},"8/Fi":function(Se,ct,R){"use strict";var V=R("J4zp"),E=R.n(V),T=R("9nhX"),e=R.n(T),t=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];function u(L){return t.indexOf(L)}var s=2,c=4,r=64,h=128,n=256,i=512,a=8192,o=16384,l=32768,f=32768*2,v=131072,b=262144,g=524288,m=1048576,_=2097152,M=4194304,x=8388608,y=16777216,S=16777216*2;function P(L,H){return L=e()(Math.floor(L),0,255),H=e()(Math.floor(H),0,255),256*L+H}function A(L){var H=L.color,F=L.radius,Z=L.tileX,G=L.tileY,U=L.shape,Y=L.opacity,J=L.stroke,rt=L.strokeWidth,ft=L.strokeOpacity,dt=[],ut=[],Lt=[],Ft=[P(H[0],H[1]),P(H[2],H[3])],Ot=[P(J[0],J[1]),P(J[2],J[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(St){var xt=E()(St,2),At=xt[0],nt=xt[1];dt.push([].concat(Ft,[(At+1)*x+(nt+1)*_+u(U)*v+F,(Z+512)*g+(G+512)*r])),ut.push([].concat(Ot,[rt,ft])),Lt.push([Y,0,0,0])}),{packedBuffer:dt,packedBuffer2:ut,packedBuffer3:Lt}}function O(L,H){if(L===0&&!H)return 0;if(L===1&&H)return 4294967295;var F=H?1:0,Z=Math.floor(L*127);return Z*S+F*y+Z*v+F*f+Z*i+F*n+Z*s+F}},"88Gu":function(Se,ct){var R=800,V=16,E=Date.now;function T(e){var t=0,u=0;return function(){var s=E(),c=V-(s-u);if(u=s,c>0){if(++t>=R)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}Se.exports=T},"8ml+":function(Se,ct,R){"use strict";var V=R("h1nZ");R.o(V,"CityBuildingLayer")&&R.d(ct,"CityBuildingLayer",function(){return V.CityBuildingLayer}),R.o(V,"Control")&&R.d(ct,"Control",function(){return V.Control}),R.o(V,"HeatmapLayer")&&R.d(ct,"HeatmapLayer",function(){return V.HeatmapLayer}),R.o(V,"ImageLayer")&&R.d(ct,"ImageLayer",function(){return V.ImageLayer}),R.o(V,"LineLayer")&&R.d(ct,"LineLayer",function(){return V.LineLayer}),R.o(V,"Logo")&&R.d(ct,"Logo",function(){return V.Logo}),R.o(V,"Marker")&&R.d(ct,"Marker",function(){return V.Marker}),R.o(V,"PointLayer")&&R.d(ct,"PointLayer",function(){return V.PointLayer}),R.o(V,"PolygonLayer")&&R.d(ct,"PolygonLayer",function(){return V.PolygonLayer}),R.o(V,"Popup")&&R.d(ct,"Popup",function(){return V.Popup}),R.o(V,"RasterLayer")&&R.d(ct,"RasterLayer",function(){return V.RasterLayer}),R.o(V,"Scale")&&R.d(ct,"Scale",function(){return V.Scale}),R.o(V,"Scene")&&R.d(ct,"Scene",function(){return V.Scene}),R.o(V,"Zoom")&&R.d(ct,"Zoom",function(){return V.Zoom});var E=R("kQ+U");R.d(ct,"Scene",function(){return E.a});var T=R("sxDa");R.d(ct,"CityBuildingLayer",function(){return T.a}),R.d(ct,"HeatmapLayer",function(){return T.b}),R.d(ct,"ImageLayer",function(){return T.c}),R.d(ct,"LineLayer",function(){return T.d}),R.d(ct,"PointLayer",function(){return T.e}),R.d(ct,"PolygonLayer",function(){return T.f}),R.d(ct,"RasterLayer",function(){return T.g});var e=R("k5/I");R.d(ct,"Control",function(){return e.a}),R.d(ct,"Logo",function(){return e.b}),R.d(ct,"Marker",function(){return e.c}),R.d(ct,"Popup",function(){return e.d}),R.d(ct,"Scale",function(){return e.e}),R.d(ct,"Zoom",function(){return e.f});var t=R("Hel2"),u=R("RL2/")},"8uyu":function(Se,ct){},"9Fde":function(Se,ct,R){"use strict";var V=this&&this.__awaiter||function(v,b,g,m){function _(M){return M instanceof g?M:new g(function(x){x(M)})}return new(g||(g=Promise))(function(M,x){function y(A){try{P(m.next(A))}catch(O){x(O)}}function S(A){try{P(m.throw(A))}catch(O){x(O)}}function P(A){A.done?M(A.value):_(A.value).then(y,S)}P((m=m.apply(v,b||[])).next())})},E=this&&this.__generator||function(v,b){var g={label:0,sent:function(){if(M[0]&1)throw M[1];return M[1]},trys:[],ops:[]},m,_,M,x;return x={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function y(P){return function(A){return S([P,A])}}function S(P){if(m)throw new TypeError("Generator is already executing.");for(;g;)try{if(m=1,_&&(M=P[0]&2?_.return:P[0]?_.throw||((M=_.return)&&M.call(_),0):_.next)&&!(M=M.call(_,P[1])).done)return M;switch(_=0,M&&(P=[P[0]&2,M.value]),P[0]){case 0:case 1:M=P;break;case 4:return g.label++,{value:P[1],done:!1};case 5:g.label++,_=P[1],P=[0];continue;case 7:P=g.ops.pop(),g.trys.pop();continue;default:if(M=g.trys,!(M=M.length>0&&M[M.length-1])&&(P[0]===6||P[0]===2)){g=0;continue}if(P[0]===3&&(!M||P[1]>M[0]&&P[1]<M[3])){g.label=P[1];break}if(P[0]===6&&g.label<M[1]){g.label=M[1],M=P;break}if(M&&g.label<M[2]){g.label=M[2],g.ops.push(P);break}M[2]&&g.ops.pop(),g.trys.pop();continue}P=b.call(v,g)}catch(A){P=[6,A],_=0}finally{m=M=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}},T=this&&this.__spreadArray||function(v,b){for(var g=0,m=b.length,_=v.length;g<m;g++,_++)v[_]=b[g];return v};Object.defineProperty(ct,"__esModule",{value:!0}),ct.Container=void 0;var e=R("LgvC"),t=R("MON2"),u=R("FV85"),s=R("xfSm"),c=R("wnjb"),r=R("h7MG"),h=R("aPG5"),n=R("gzZq"),i=R("d9O0"),a=R("ujMp"),o=R("HpQ9"),l=R("AwBQ"),f=function(){function v(b){this._appliedMiddleware=[];var g=b||{};if(typeof g!="object")throw new Error(""+t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(g.defaultScope===void 0)g.defaultScope=u.BindingScopeEnum.Transient;else if(g.defaultScope!==u.BindingScopeEnum.Singleton&&g.defaultScope!==u.BindingScopeEnum.Transient&&g.defaultScope!==u.BindingScopeEnum.Request)throw new Error(""+t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(g.autoBindInjectable===void 0)g.autoBindInjectable=!1;else if(typeof g.autoBindInjectable!="boolean")throw new Error(""+t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(g.skipBaseClassChecks===void 0)g.skipBaseClassChecks=!1;else if(typeof g.skipBaseClassChecks!="boolean")throw new Error(""+t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:g.autoBindInjectable,defaultScope:g.defaultScope,skipBaseClassChecks:g.skipBaseClassChecks},this.id=i.id(),this._bindingDictionary=new l.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new c.MetadataReader}return v.merge=function(b,g){for(var m=[],_=2;_<arguments.length;_++)m[_-2]=arguments[_];var M=new v,x=T([b,g],m).map(function(P){return r.getBindingDictionary(P)}),y=r.getBindingDictionary(M);function S(P,A){P.traverse(function(O,L){L.forEach(function(H){A.add(H.serviceIdentifier,H.clone())})})}return x.forEach(function(P){S(P,y)}),M},v.prototype.load=function(){for(var b=[],g=0;g<arguments.length;g++)b[g]=arguments[g];for(var m=this._getContainerModuleHelpersFactory(),_=0,M=b;_<M.length;_++){var x=M[_],y=m(x.id);x.registry(y.bindFunction,y.unbindFunction,y.isboundFunction,y.rebindFunction)}},v.prototype.loadAsync=function(){for(var b=[],g=0;g<arguments.length;g++)b[g]=arguments[g];return V(this,void 0,void 0,function(){var m,_,M,x,y;return E(this,function(S){switch(S.label){case 0:m=this._getContainerModuleHelpersFactory(),_=0,M=b,S.label=1;case 1:return _<M.length?(x=M[_],y=m(x.id),[4,x.registry(y.bindFunction,y.unbindFunction,y.isboundFunction,y.rebindFunction)]):[3,4];case 2:S.sent(),S.label=3;case 3:return _++,[3,1];case 4:return[2]}})})},v.prototype.unload=function(){for(var b=this,g=[],m=0;m<arguments.length;m++)g[m]=arguments[m];var _=function(x){return function(y){return y.moduleId===x}};g.forEach(function(M){var x=_(M.id);b._bindingDictionary.removeByCondition(x)})},v.prototype.bind=function(b){var g=this.options.defaultScope||u.BindingScopeEnum.Transient,m=new e.Binding(b,g);return this._bindingDictionary.add(b,m),new n.BindingToSyntax(m)},v.prototype.rebind=function(b){return this.unbind(b),this.bind(b)},v.prototype.unbind=function(b){try{this._bindingDictionary.remove(b)}catch(g){throw new Error(t.CANNOT_UNBIND+" "+a.getServiceIdentifierAsString(b))}},v.prototype.unbindAll=function(){this._bindingDictionary=new l.Lookup},v.prototype.isBound=function(b){var g=this._bindingDictionary.hasKey(b);return!g&&this.parent&&(g=this.parent.isBound(b)),g},v.prototype.isBoundNamed=function(b,g){return this.isBoundTagged(b,s.NAMED_TAG,g)},v.prototype.isBoundTagged=function(b,g,m){var _=!1;if(this._bindingDictionary.hasKey(b)){var M=this._bindingDictionary.get(b),x=r.createMockRequest(this,b,g,m);_=M.some(function(y){return y.constraint(x)})}return!_&&this.parent&&(_=this.parent.isBoundTagged(b,g,m)),_},v.prototype.snapshot=function(){this._snapshots.push(o.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},v.prototype.restore=function(){var b=this._snapshots.pop();if(b===void 0)throw new Error(t.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=b.bindings,this._middleware=b.middleware},v.prototype.createChild=function(b){var g=new v(b||this.options);return g.parent=this,g},v.prototype.applyMiddleware=function(){for(var b=[],g=0;g<arguments.length;g++)b[g]=arguments[g];this._appliedMiddleware=this._appliedMiddleware.concat(b);var m=this._middleware?this._middleware:this._planAndResolve();this._middleware=b.reduce(function(_,M){return M(_)},m)},v.prototype.applyCustomMetadataReader=function(b){this._metadataReader=b},v.prototype.get=function(b){return this._get(!1,!1,u.TargetTypeEnum.Variable,b)},v.prototype.getTagged=function(b,g,m){return this._get(!1,!1,u.TargetTypeEnum.Variable,b,g,m)},v.prototype.getNamed=function(b,g){return this.getTagged(b,s.NAMED_TAG,g)},v.prototype.getAll=function(b){return this._get(!0,!0,u.TargetTypeEnum.Variable,b)},v.prototype.getAllTagged=function(b,g,m){return this._get(!1,!0,u.TargetTypeEnum.Variable,b,g,m)},v.prototype.getAllNamed=function(b,g){return this.getAllTagged(b,s.NAMED_TAG,g)},v.prototype.resolve=function(b){var g=this.createChild();return g.bind(b).toSelf(),this._appliedMiddleware.forEach(function(m){g.applyMiddleware(m)}),g.get(b)},v.prototype._getContainerModuleHelpersFactory=function(){var b=this,g=function(S,P){S._binding.moduleId=P},m=function(S){return function(P){var A=b.bind.bind(b),O=A(P);return g(O,S),O}},_=function(S){return function(P){var A=b.unbind.bind(b);A(P)}},M=function(S){return function(P){var A=b.isBound.bind(b);return A(P)}},x=function(S){return function(P){var A=b.rebind.bind(b),O=A(P);return g(O,S),O}};return function(y){return{bindFunction:m(y),isboundFunction:M(y),rebindFunction:x(y),unbindFunction:_(y)}}},v.prototype._get=function(b,g,m,_,M,x){var y=null,S={avoidConstraints:b,contextInterceptor:function(A){return A},isMultiInject:g,key:M,serviceIdentifier:_,targetType:m,value:x};if(this._middleware){if(y=this._middleware(S),y==null)throw new Error(t.INVALID_MIDDLEWARE_RETURN)}else y=this._planAndResolve()(S);return y},v.prototype._planAndResolve=function(){var b=this;return function(g){var m=r.plan(b._metadataReader,b,g.isMultiInject,g.targetType,g.serviceIdentifier,g.key,g.value,g.avoidConstraints);m=g.contextInterceptor(m);var _=h.resolve(m);return _}},v}();ct.Container=f},"9NmV":function(Se,ct){var R="\\ud800-\\udfff",V="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",e=V+E+T,t="\\u2700-\\u27bf",u="a-z\\xdf-\\xf6\\xf8-\\xff",s="\\xac\\xb1\\xd7\\xf7",c="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",r="\\u2000-\\u206f",h=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",n="A-Z\\xc0-\\xd6\\xd8-\\xde",i="\\ufe0e\\ufe0f",a=s+c+r+h,o="['\u2019]",l="["+a+"]",f="["+e+"]",v="\\d+",b="["+t+"]",g="["+u+"]",m="[^"+R+a+v+t+u+n+"]",_="\\ud83c[\\udffb-\\udfff]",M="(?:"+f+"|"+_+")",x="[^"+R+"]",y="(?:\\ud83c[\\udde6-\\uddff]){2}",S="[\\ud800-\\udbff][\\udc00-\\udfff]",P="["+n+"]",A="\\u200d",O="(?:"+g+"|"+m+")",L="(?:"+P+"|"+m+")",H="(?:"+o+"(?:d|ll|m|re|s|t|ve))?",F="(?:"+o+"(?:D|LL|M|RE|S|T|VE))?",Z=M+"?",G="["+i+"]?",U="(?:"+A+"(?:"+[x,y,S].join("|")+")"+G+Z+")*",Y="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",J="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rt=G+Z+U,ft="(?:"+[b,y,S].join("|")+")"+rt,dt=RegExp([P+"?"+g+"+"+H+"(?="+[l,P,"$"].join("|")+")",L+"+"+F+"(?="+[l,P+O,"$"].join("|")+")",P+"?"+O+"+"+H,P+"+"+F,J,Y,v,ft].join("|"),"g");function ut(Lt){return Lt.match(dt)||[]}Se.exports=ut},"9lTW":function(Se,ct,R){"use strict";(function(V){var E=R("MgzW");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function T(O,L){if(O===L)return 0;for(var H=O.length,F=L.length,Z=0,G=Math.min(H,F);Z<G;++Z)if(O[Z]!==L[Z]){H=O[Z],F=L[Z];break}return H<F?-1:F<H?1:0}function e(O){return V.Buffer&&typeof V.Buffer.isBuffer=="function"?V.Buffer.isBuffer(O):!!(O!=null&&O._isBuffer)}var t=R("MCLT"),u=Object.prototype.hasOwnProperty,s=Array.prototype.slice,c=function(){return function(){}.name==="foo"}();function r(O){return Object.prototype.toString.call(O)}function h(O){return e(O)||typeof V.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(O):O?!!(O instanceof DataView||O.buffer&&O.buffer instanceof ArrayBuffer):!1}var n=Se.exports=b,i=/\s*function\s+([^\(\s]*)\s*/;function a(O){if(!!t.isFunction(O)){if(c)return O.name;var L=O.toString(),H=L.match(i);return H&&H[1]}}n.AssertionError=function(L){this.name="AssertionError",this.actual=L.actual,this.expected=L.expected,this.operator=L.operator,L.message?(this.message=L.message,this.generatedMessage=!1):(this.message=f(this),this.generatedMessage=!0);var H=L.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,H);else{var F=new Error;if(F.stack){var Z=F.stack,G=a(H),U=Z.indexOf(`
`+G);if(U>=0){var Y=Z.indexOf(`
`,U+1);Z=Z.substring(Y+1)}this.stack=Z}}},t.inherits(n.AssertionError,Error);function o(O,L){return typeof O=="string"?O.length<L?O:O.slice(0,L):O}function l(O){if(c||!t.isFunction(O))return t.inspect(O);var L=a(O),H=L?": "+L:"";return"[Function"+H+"]"}function f(O){return o(l(O.actual),128)+" "+O.operator+" "+o(l(O.expected),128)}function v(O,L,H,F,Z){throw new n.AssertionError({message:H,actual:O,expected:L,operator:F,stackStartFunction:Z})}n.fail=v;function b(O,L){O||v(O,!0,L,"==",n.ok)}n.ok=b,n.equal=function(L,H,F){L!=H&&v(L,H,F,"==",n.equal)},n.notEqual=function(L,H,F){L==H&&v(L,H,F,"!=",n.notEqual)},n.deepEqual=function(L,H,F){g(L,H,!1)||v(L,H,F,"deepEqual",n.deepEqual)},n.deepStrictEqual=function(L,H,F){g(L,H,!0)||v(L,H,F,"deepStrictEqual",n.deepStrictEqual)};function g(O,L,H,F){if(O===L)return!0;if(e(O)&&e(L))return T(O,L)===0;if(t.isDate(O)&&t.isDate(L))return O.getTime()===L.getTime();if(t.isRegExp(O)&&t.isRegExp(L))return O.source===L.source&&O.global===L.global&&O.multiline===L.multiline&&O.lastIndex===L.lastIndex&&O.ignoreCase===L.ignoreCase;if((O===null||typeof O!="object")&&(L===null||typeof L!="object"))return H?O===L:O==L;if(h(O)&&h(L)&&r(O)===r(L)&&!(O instanceof Float32Array||O instanceof Float64Array))return T(new Uint8Array(O.buffer),new Uint8Array(L.buffer))===0;if(e(O)!==e(L))return!1;F=F||{actual:[],expected:[]};var Z=F.actual.indexOf(O);return Z!==-1&&Z===F.expected.indexOf(L)?!0:(F.actual.push(O),F.expected.push(L),_(O,L,H,F))}function m(O){return Object.prototype.toString.call(O)=="[object Arguments]"}function _(O,L,H,F){if(O==null||L===null||L===void 0)return!1;if(t.isPrimitive(O)||t.isPrimitive(L))return O===L;if(H&&Object.getPrototypeOf(O)!==Object.getPrototypeOf(L))return!1;var Z=m(O),G=m(L);if(Z&&!G||!Z&&G)return!1;if(Z)return O=s.call(O),L=s.call(L),g(O,L,H);var U=A(O),Y=A(L),J,rt;if(U.length!==Y.length)return!1;for(U.sort(),Y.sort(),rt=U.length-1;rt>=0;rt--)if(U[rt]!==Y[rt])return!1;for(rt=U.length-1;rt>=0;rt--)if(J=U[rt],!g(O[J],L[J],H,F))return!1;return!0}n.notDeepEqual=function(L,H,F){g(L,H,!1)&&v(L,H,F,"notDeepEqual",n.notDeepEqual)},n.notDeepStrictEqual=M;function M(O,L,H){g(O,L,!0)&&v(O,L,H,"notDeepStrictEqual",M)}n.strictEqual=function(L,H,F){L!==H&&v(L,H,F,"===",n.strictEqual)},n.notStrictEqual=function(L,H,F){L===H&&v(L,H,F,"!==",n.notStrictEqual)};function x(O,L){if(!O||!L)return!1;if(Object.prototype.toString.call(L)=="[object RegExp]")return L.test(O);try{if(O instanceof L)return!0}catch(H){}return Error.isPrototypeOf(L)?!1:L.call({},O)===!0}function y(O){var L;try{O()}catch(H){L=H}return L}function S(O,L,H,F){var Z;if(typeof L!="function")throw new TypeError('"block" argument must be a function');typeof H=="string"&&(F=H,H=null),Z=y(L),F=(H&&H.name?" ("+H.name+").":".")+(F?" "+F:"."),O&&!Z&&v(Z,H,"Missing expected exception"+F);var G=typeof F=="string",U=!O&&t.isError(Z),Y=!O&&Z&&!H;if((U&&G&&x(Z,H)||Y)&&v(Z,H,"Got unwanted exception"+F),O&&Z&&H&&!x(Z,H)||!O&&Z)throw Z}n.throws=function(O,L,H){S(!0,O,L,H)},n.doesNotThrow=function(O,L,H){S(!1,O,L,H)},n.ifError=function(O){if(O)throw O};function P(O,L){O||v(O,!0,L,"==",P)}n.strict=E(P,n,{equal:n.strictEqual,deepEqual:n.deepStrictEqual,notEqual:n.notStrictEqual,notDeepEqual:n.notDeepStrictEqual}),n.strict.strict=n.strict;var A=Object.keys||function(O){var L=[];for(var H in O)u.call(O,H)&&L.push(H);return L}}).call(this,R("IyRk"))},"9nhX":function(Se,ct,R){var V=R("g4R6"),E=R("tLB3");function T(e,t,u){return u===void 0&&(u=t,t=void 0),u!==void 0&&(u=E(u),u=u===u?u:0),t!==void 0&&(t=E(t),t=t===t?t:0),V(E(e),t,u)}Se.exports=T},AFH1:function(Se,ct,R){"use strict";R.d(ct,"a",function(){return V});var V;(function(E){E.TOPRIGHT="topright",E.TOPLEFT="topleft",E.BOTTOMRIGHT="bottomright",E.BOTTOMLEFT="bottomleft"})(V||(V={}))},APxj:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0});var V=R("Ucsi");function E(T,e){e===void 0&&(e=!0);var t=V.makePropertyInjectDecorator(T,e),u=V.makePropertyInjectNamedDecorator(T,e),s=V.makePropertyInjectTaggedDecorator(T,e),c=V.makePropertyMultiInjectDecorator(T,e);return{lazyInject:t,lazyInjectNamed:u,lazyInjectTagged:s,lazyMultiInject:c}}ct.default=E},AwBQ:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.Lookup=void 0;var V=R("MON2"),E=function(){function T(){this._map=new Map}return T.prototype.getMap=function(){return this._map},T.prototype.add=function(e,t){if(e==null)throw new Error(V.NULL_ARGUMENT);if(t==null)throw new Error(V.NULL_ARGUMENT);var u=this._map.get(e);u!==void 0?(u.push(t),this._map.set(e,u)):this._map.set(e,[t])},T.prototype.get=function(e){if(e==null)throw new Error(V.NULL_ARGUMENT);var t=this._map.get(e);if(t!==void 0)return t;throw new Error(V.KEY_NOT_FOUND)},T.prototype.remove=function(e){if(e==null)throw new Error(V.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(V.KEY_NOT_FOUND)},T.prototype.removeByCondition=function(e){var t=this;this._map.forEach(function(u,s){var c=u.filter(function(r){return!e(r)});c.length>0?t._map.set(s,c):t._map.delete(s)})},T.prototype.hasKey=function(e){if(e==null)throw new Error(V.NULL_ARGUMENT);return this._map.has(e)},T.prototype.clone=function(){var e=new T;return this._map.forEach(function(t,u){t.forEach(function(s){return e.add(u,s.clone())})}),e},T.prototype.traverse=function(e){this._map.forEach(function(t,u){e(u,t)})},T}();ct.Lookup=E},"B6l+":function(Se,ct,R){var V=R("Sq3C"),E=R("Z1HP"),T=R("Sxd8"),e=R("dt0z");function t(u,s,c){u=e(u),s=T(s);var r=s?E(u):0;return s&&r<s?u+V(s-r,c):u}Se.exports=t},BGjm:function(Se,ct){Se.exports=R;function R(V,E){E||(E=document);var T=E.head||E.getElementsByTagName("head")[0];if(!T){T=E.createElement("head");var e=E.body||E.getElementsByTagName("body")[0];e?e.parentNode.insertBefore(T,e):E.documentElement.appendChild(T)}var t=E.createElement("style");return t.type="text/css",t.styleSheet?t.styleSheet.cssText=V:t.appendChild(E.createTextNode(V)),T.appendChild(t),t}},BMrR:function(Se,ct,R){"use strict";var V=R("qrJ5");ct.a=V.a},BkRI:function(Se,ct,R){var V=R("OBhP"),E=1,T=4;function e(t){return V(t,E|T)}Se.exports=e},Bnag:function(Se,ct){function R(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}Se.exports=R,Se.exports.default=Se.exports,Se.exports.__esModule=!0},BpBL:function(Se,ct,R){"use strict";R.d(ct,"a",function(){return E});var V=R("Hel2");function E(e,t){var u=t.extent,s=new Promise(function(r){T(e,function(h){r(h)})}),c={images:s,_id:1,dataArray:[{_id:0,coordinates:[[u[0],u[1]],[u[2],u[3]]]}]};return c}function T(e,t){var u=e,s=[];if(typeof u=="string")Object(V.o)({url:u},function(h,n){s.push(n),t(s)});else{var c=u.length,r=0;u.forEach(function(h){Object(V.o)({url:h},function(n,i){r++,s.push(i),r===c&&t(s)})})}return E}},CZoQ:function(Se,ct){function R(V,E,T){for(var e=T-1,t=V.length;++e<t;)if(V[e]===E)return e;return-1}Se.exports=R},"D+ow":function(Se,ct){},D9lx:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.BindingInWhenOnSyntax=void 0;var V=R("6AGu"),E=R("406g"),T=R("z4Hk"),e=function(){function t(u){this._binding=u,this._bindingWhenSyntax=new T.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new E.BindingOnSyntax(this._binding),this._bindingInSyntax=new V.BindingInSyntax(u)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(u){return this._bindingWhenSyntax.when(u)},t.prototype.whenTargetNamed=function(u){return this._bindingWhenSyntax.whenTargetNamed(u)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(u,s){return this._bindingWhenSyntax.whenTargetTagged(u,s)},t.prototype.whenInjectedInto=function(u){return this._bindingWhenSyntax.whenInjectedInto(u)},t.prototype.whenParentNamed=function(u){return this._bindingWhenSyntax.whenParentNamed(u)},t.prototype.whenParentTagged=function(u,s){return this._bindingWhenSyntax.whenParentTagged(u,s)},t.prototype.whenAnyAncestorIs=function(u){return this._bindingWhenSyntax.whenAnyAncestorIs(u)},t.prototype.whenNoAncestorIs=function(u){return this._bindingWhenSyntax.whenNoAncestorIs(u)},t.prototype.whenAnyAncestorNamed=function(u){return this._bindingWhenSyntax.whenAnyAncestorNamed(u)},t.prototype.whenAnyAncestorTagged=function(u,s){return this._bindingWhenSyntax.whenAnyAncestorTagged(u,s)},t.prototype.whenNoAncestorNamed=function(u){return this._bindingWhenSyntax.whenNoAncestorNamed(u)},t.prototype.whenNoAncestorTagged=function(u,s){return this._bindingWhenSyntax.whenNoAncestorTagged(u,s)},t.prototype.whenAnyAncestorMatches=function(u){return this._bindingWhenSyntax.whenAnyAncestorMatches(u)},t.prototype.whenNoAncestorMatches=function(u){return this._bindingWhenSyntax.whenNoAncestorMatches(u)},t.prototype.onActivation=function(u){return this._bindingOnSyntax.onActivation(u)},t}();ct.BindingInWhenOnSyntax=e},DnfT:function(Se,ct,R){Se.exports={"ant-pro-grid-content":"ant-pro-grid-content",wide:"wide"}},"Dw+G":function(Se,ct,R){var V=R("juv8"),E=R("mTTR");function T(e,t){return e&&V(t,E(t),e)}Se.exports=T},DzJC:function(Se,ct,R){var V=R("sEfC"),E=R("GoyQ"),T="Expected a function";function e(t,u,s){var c=!0,r=!0;if(typeof t!="function")throw new TypeError(T);return E(s)&&(c="leading"in s?!!s.leading:c,r="trailing"in s?!!s.trailing:r),V(t,u,{leading:c,maxWait:u,trailing:r})}Se.exports=e},EA7m:function(Se,ct,R){var V=R("zZ0H"),E=R("Ioao"),T=R("wclG");function e(t,u){return T(E(t,u,V),t+"")}Se.exports=e},EEGq:function(Se,ct,R){var V=R("juv8"),E=R("oCl/");function T(e,t){return V(e,E(e),t)}Se.exports=T},EbDI:function(Se,ct){function R(V){if(typeof Symbol!="undefined"&&V[Symbol.iterator]!=null||V["@@iterator"]!=null)return Array.from(V)}Se.exports=R,Se.exports.default=Se.exports,Se.exports.__esModule=!0},EfZ0:function(Se,ct,R){"use strict";R.d(ct,"a",function(){return V});var V={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"}},Em2t:function(Se,ct,R){var V=R("bahg"),E=R("quyA"),T=R("0JQy");function e(t){return E(t)?T(t):V(t)}Se.exports=e},FI6e:function(Se,ct){},FRQA:function(Se,ct,R){"use strict";var V=R("GNNt"),E=R("wEI+"),T=R("DnfT"),e=R.n(T),t=R("q1tI"),u=R.n(t),s=R("TSYQ"),c=R.n(s),r=R("jYQm"),h=function(i){var a=Object(t.useContext)(r.a),o=i.children,l=i.contentWidth,f=i.className,v=i.style,b=Object(t.useContext)(E.b.ConfigContext),g=b.getPrefixCls,m=i.prefixCls||g("pro"),_=l||a.contentWidth,M="".concat(m,"-grid-content");return u.a.createElement("div",{className:c()(M,f,{wide:_==="Fixed"}),style:v},u.a.createElement("div",{className:"".concat(m,"-grid-content-children")},o))};ct.a=h},FV85:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.TargetTypeEnum=ct.BindingTypeEnum=ct.BindingScopeEnum=void 0;var V={Request:"Request",Singleton:"Singleton",Transient:"Transient"};ct.BindingScopeEnum=V;var E={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};ct.BindingTypeEnum=E;var T={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};ct.TargetTypeEnum=T},FmoU:function(Se,ct,R){"use strict";R.d(ct,"a",function(){return m}),R.d(ct,"b",function(){return y});var V=function(U,Y,J){U.prototype=Y.prototype=J,J.constructor=U};function E(U,Y){var J=Object.create(U.prototype);for(var rt in Y)J[rt]=Y[rt];return J}function T(){}var e=.7,t=1/e,u="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",r=/^#([0-9a-f]{3,8})$/,h=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),n=new RegExp("^rgb\\("+[c,c,c]+"\\)$"),i=new RegExp("^rgba\\("+[u,u,u,s]+"\\)$"),a=new RegExp("^rgba\\("+[c,c,c,s]+"\\)$"),o=new RegExp("^hsl\\("+[s,c,c]+"\\)$"),l=new RegExp("^hsla\\("+[s,c,c,s]+"\\)$"),f={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};V(T,m,{copy:function(Y){return Object.assign(new this.constructor,this,Y)},displayable:function(){return this.rgb().displayable()},hex:v,formatHex:v,formatHsl:b,formatRgb:g,toString:g});function v(){return this.rgb().formatHex()}function b(){return H(this).formatHsl()}function g(){return this.rgb().formatRgb()}function m(U){var Y,J;return U=(U+"").trim().toLowerCase(),(Y=r.exec(U))?(J=Y[1].length,Y=parseInt(Y[1],16),J===6?_(Y):J===3?new S(Y>>8&15|Y>>4&240,Y>>4&15|Y&240,(Y&15)<<4|Y&15,1):J===8?M(Y>>24&255,Y>>16&255,Y>>8&255,(Y&255)/255):J===4?M(Y>>12&15|Y>>8&240,Y>>8&15|Y>>4&240,Y>>4&15|Y&240,((Y&15)<<4|Y&15)/255):null):(Y=h.exec(U))?new S(Y[1],Y[2],Y[3],1):(Y=n.exec(U))?new S(Y[1]*255/100,Y[2]*255/100,Y[3]*255/100,1):(Y=i.exec(U))?M(Y[1],Y[2],Y[3],Y[4]):(Y=a.exec(U))?M(Y[1]*255/100,Y[2]*255/100,Y[3]*255/100,Y[4]):(Y=o.exec(U))?L(Y[1],Y[2]/100,Y[3]/100,1):(Y=l.exec(U))?L(Y[1],Y[2]/100,Y[3]/100,Y[4]):f.hasOwnProperty(U)?_(f[U]):U==="transparent"?new S(NaN,NaN,NaN,0):null}function _(U){return new S(U>>16&255,U>>8&255,U&255,1)}function M(U,Y,J,rt){return rt<=0&&(U=Y=J=NaN),new S(U,Y,J,rt)}function x(U){return U instanceof T||(U=m(U)),U?(U=U.rgb(),new S(U.r,U.g,U.b,U.opacity)):new S}function y(U,Y,J,rt){return arguments.length===1?x(U):new S(U,Y,J,rt==null?1:rt)}function S(U,Y,J,rt){this.r=+U,this.g=+Y,this.b=+J,this.opacity=+rt}V(S,y,E(T,{brighter:function(Y){return Y=Y==null?t:Math.pow(t,Y),new S(this.r*Y,this.g*Y,this.b*Y,this.opacity)},darker:function(Y){return Y=Y==null?e:Math.pow(e,Y),new S(this.r*Y,this.g*Y,this.b*Y,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:P,formatHex:P,formatRgb:A,toString:A}));function P(){return"#"+O(this.r)+O(this.g)+O(this.b)}function A(){var U=this.opacity;return U=isNaN(U)?1:Math.max(0,Math.min(1,U)),(U===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(U===1?")":", "+U+")")}function O(U){return U=Math.max(0,Math.min(255,Math.round(U)||0)),(U<16?"0":"")+U.toString(16)}function L(U,Y,J,rt){return rt<=0?U=Y=J=NaN:J<=0||J>=1?U=Y=NaN:Y<=0&&(U=NaN),new Z(U,Y,J,rt)}function H(U){if(U instanceof Z)return new Z(U.h,U.s,U.l,U.opacity);if(U instanceof T||(U=m(U)),!U)return new Z;if(U instanceof Z)return U;U=U.rgb();var Y=U.r/255,J=U.g/255,rt=U.b/255,ft=Math.min(Y,J,rt),dt=Math.max(Y,J,rt),ut=NaN,Lt=dt-ft,Ft=(dt+ft)/2;return Lt?(Y===dt?ut=(J-rt)/Lt+(J<rt)*6:J===dt?ut=(rt-Y)/Lt+2:ut=(Y-J)/Lt+4,Lt/=Ft<.5?dt+ft:2-dt-ft,ut*=60):Lt=Ft>0&&Ft<1?0:ut,new Z(ut,Lt,Ft,U.opacity)}function F(U,Y,J,rt){return arguments.length===1?H(U):new Z(U,Y,J,rt==null?1:rt)}function Z(U,Y,J,rt){this.h=+U,this.s=+Y,this.l=+J,this.opacity=+rt}V(Z,F,E(T,{brighter:function(Y){return Y=Y==null?t:Math.pow(t,Y),new Z(this.h,this.s,this.l*Y,this.opacity)},darker:function(Y){return Y=Y==null?e:Math.pow(e,Y),new Z(this.h,this.s,this.l*Y,this.opacity)},rgb:function(){var Y=this.h%360+(this.h<0)*360,J=isNaN(Y)||isNaN(this.s)?0:this.s,rt=this.l,ft=rt+(rt<.5?rt:1-rt)*J,dt=2*rt-ft;return new S(G(Y>=240?Y-240:Y+120,dt,ft),G(Y,dt,ft),G(Y<120?Y+240:Y-120,dt,ft),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Y=this.opacity;return Y=isNaN(Y)?1:Math.max(0,Math.min(1,Y)),(Y===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Y===1?")":", "+Y+")")}}));function G(U,Y,J){return(U<60?Y+(J-Y)*U/60:U<180?J:U<240?Y+(J-Y)*(240-U)/60:Y)*255}},G6z8:function(Se,ct,R){var V=R("fR/l"),E=R("oCl/"),T=R("mTTR");function e(t){return V(t,T,E)}Se.exports=e},GXnB:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.Metadata=void 0;var V=R("xfSm"),E=function(){function T(e,t){this.key=e,this.value=t}return T.prototype.toString=function(){return this.key===V.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},T}();ct.Metadata=E},Gi0A:function(Se,ct,R){var V=R("QqLw"),E=R("ExA7"),T="[object Map]";function e(t){return E(t)&&V(t)==T}Se.exports=e},Hel2:function(Se,ct,R){"use strict";R.d(ct,"o",function(){return At}),R.d(ct,"m",function(){return z}),R.d(ct,"p",function(){return at}),R.d(ct,"d",function(){return X}),R.d(ct,"q",function(){return vt}),R.d(ct,"r",function(){return $t}),R.d(ct,"j",function(){return ee}),R.d(ct,"h",function(){return kt}),R.d(ct,"b",function(){return Wt}),R.d(ct,"i",function(){return ae}),R.d(ct,"s",function(){return je}),R.d(ct,"k",function(){return Oe}),R.d(ct,"l",function(){return We}),R.d(ct,"n",function(){return Ye}),R.d(ct,"f",function(){return wn}),R.d(ct,"e",function(){return er}),R.d(ct,"g",function(){return wr}),R.d(ct,"a",function(){return V}),R.d(ct,"c",function(){return E});var V={};R.r(V),R.d(V,"getContainer",function(){return c}),R.d(V,"trim",function(){return r}),R.d(V,"splitWords",function(){return h}),R.d(V,"create",function(){return i}),R.d(V,"remove",function(){return a}),R.d(V,"addClass",function(){return o}),R.d(V,"removeClass",function(){return l}),R.d(V,"hasClass",function(){return f}),R.d(V,"setClass",function(){return v}),R.d(V,"getClass",function(){return b}),R.d(V,"empty",function(){return g}),R.d(V,"setTransform",function(){return _}),R.d(V,"triggerResize",function(){return M}),R.d(V,"printCanvas",function(){return x}),R.d(V,"getViewPortScale",function(){return y}),R.d(V,"DPR",function(){return S});var E={};R.r(E),R.d(E,"sum",function(){return An}),R.d(E,"max",function(){return on}),R.d(E,"min",function(){return en}),R.d(E,"mean",function(){return jn}),R.d(E,"mode",function(){return pr}),R.d(E,"statMap",function(){return di}),R.d(E,"getColumn",function(){return Ce}),R.d(E,"getSatByColumn",function(){return Me});function T(Qt){var pe=131,Vt=137,re=0;Qt+="x";for(var Te=Math.floor(9007199254740991/Vt),ue=0;ue<Qt.length;ue++)re>Te&&(re=Math.floor(re/Vt)),re=re*pe+Qt.charCodeAt(ue);return re}function e(Qt){Qt=Qt.toString();for(var pe=5381,Vt=Qt.length;Vt;)pe=pe*33^Qt.charCodeAt(--Vt);return pe>>>0}var t=R("J4zp"),u=R.n(t),s=window.document.documentElement.style;function c(Qt){var pe=Qt;return typeof Qt=="string"&&(pe=document.getElementById(Qt)),pe}function r(Qt){return Qt.trim?Qt.trim():Qt.replace(/^\s+|\s+$/g,"")}function h(Qt){return r(Qt).split(/\s+/)}function n(Qt){if(!s)return Qt[0];for(var pe in Qt)if(Qt[pe]&&Qt[pe]in s)return Qt[pe];return Qt[0]}function i(Qt,pe,Vt){var re=document.createElement(Qt);return re.className=pe||"",Vt&&Vt.appendChild(re),re}function a(Qt){var pe=Qt.parentNode;pe&&pe.removeChild(Qt)}function o(Qt,pe){if(Qt.classList!==void 0)for(var Vt=h(pe),re=0,Te=Vt.length;re<Te;re++)Qt.classList.add(Vt[re]);else if(!f(Qt,pe)){var ue=b(Qt);v(Qt,(ue?ue+" ":"")+pe)}}function l(Qt,pe){Qt.classList!==void 0?Qt.classList.remove(pe):v(Qt,r((" "+b(Qt)+" ").replace(" "+pe+" "," ")))}function f(Qt,pe){if(Qt.classList!==void 0)return Qt.classList.contains(pe);var Vt=b(Qt);return Vt.length>0&&new RegExp("(^|\\s)"+pe+"(\\s|$)").test(Vt)}function v(Qt,pe){Qt instanceof HTMLElement?Qt.className=pe:Qt.className.baseVal=pe}function b(Qt){return Qt instanceof SVGElement&&(Qt=Qt.correspondingElement),Qt.className.baseVal===void 0?Qt.className:Qt.className.baseVal}function g(Qt){for(;Qt&&Qt.firstChild;)Qt.removeChild(Qt.firstChild)}var m=n(["transform","WebkitTransform"]);function _(Qt,pe){Qt.style[m]=pe}function M(){if(typeof Event=="function")window.dispatchEvent(new Event("resize"));else{var Qt=window.document.createEvent("UIEvents");Qt.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(Qt)}}function x(Qt){var pe=["padding: "+(Qt.height/2-8)+"px "+Qt.width/2+"px;","line-height: "+Qt.height+"px;","background-image: url("+Qt.toDataURL()+");"];console.log(`%c
`,pe.join(""))}function y(){var Qt,pe=document.querySelector('meta[name="viewport"]');if(!pe)return 1;var Vt=(Qt=pe.content)===null||Qt===void 0?void 0:Qt.split(","),re=Vt.find(function(Te){var ue=Te.split("="),xe=u()(ue,2),Ke=xe[0],Rn=xe[1];return Ke==="initial-scale"});return re?re.split("=")[1]*1:1}var S=y()<1?1:window.devicePixelRatio,P=R("lwsE"),A=R.n(P),O=R("W8MJ"),L=R.n(O),H=R("7W2i"),F=R.n(H),Z=R("a1gu"),G=R.n(Z),U=R("Nsbk"),Y=R.n(U),J=R("oShl"),rt=R.n(J);function ft(Qt){var pe=dt();return function(){var re=Y()(Qt),Te;if(pe){var ue=Y()(this).constructor;Te=Reflect.construct(re,arguments,ue)}else Te=re.apply(this,arguments);return G()(this,Te)}}function dt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Qt){return!1}}var ut=function(Qt){F()(Vt,Qt);var pe=ft(Vt);function Vt(re,Te,ue){var xe;return A()(this,Vt),xe=pe.call(this,re),xe.status=void 0,xe.url=void 0,xe.status=Te,xe.url=ue,xe.name=xe.constructor.name,xe.message=re,xe}return L()(Vt,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),Vt}(rt()(Error));function Lt(Qt){var pe=new XMLHttpRequest;pe.open("GET",Qt.url,!0);for(var Vt in Qt.headers)Qt.headers.hasOwnProperty(Vt)&&pe.setRequestHeader(Vt,Qt.headers[Vt]);return pe.withCredentials=Qt.credentials==="include",pe}var Ft=function(pe,Vt){var re=Lt(pe);return re.setRequestHeader("Accept","application/json"),re.onerror=function(){Vt(new Error(re.statusText))},re.onload=function(){if(re.status>=200&&re.status<300&&re.response){var Te;try{Te=JSON.parse(re.response)}catch(ue){return Vt(ue)}Vt(null,Te)}else re.status===401?Vt(new ut("".concat(re.statusText),re.status,pe.url)):Vt(new ut(re.statusText,re.status,pe.url))},re.send(),re},Ot=function(pe,Vt){var re=Lt(pe);return re.responseType="arraybuffer",re.onerror=function(){Vt(new Error(re.statusText))},re.onload=function(){var Te=re.response;if(Te.byteLength===0&&re.status===200)return Vt(new Error("http status 200 returned without content."));re.status>=200&&re.status<300&&re.response?Vt(null,{data:Te,cacheControl:re.getResponseHeader("Cache-Control"),expires:re.getResponseHeader("Expires")}):Vt(new ut(re.statusText,re.status,pe.url))},re.send(),re};function St(Qt){var pe=window.document.createElement("a");return pe.href=Qt,pe.protocol===window.document.location.protocol&&pe.host===window.document.location.host}var xt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",At=function(pe,Vt){return Ot(pe,function(re,Te){if(re)Vt(re);else if(Te){var ue=new window.Image;ue.crossOrigin="anonymous";var xe=window.URL||window.webkitURL;ue.onload=function(){Vt(null,ue),xe.revokeObjectURL(ue.src)};var Ke=new window.Blob([new Uint8Array(Te.data)],{type:"image/png"});ue.src=Te.data.byteLength?xe.createObjectURL(Ke):xt}})},nt=R("0wsv"),Mt=2*Math.PI*6378137/2;function z(Qt){var pe=[Infinity,Infinity,-Infinity,-Infinity];return Qt.forEach(function(Vt){var re=Vt.coordinates;Q(pe,re)}),pe}function Q(Qt,pe){return Array.isArray(pe[0])?pe.forEach(function(Vt){Q(Qt,Vt)}):(Qt[0]>pe[0]&&(Qt[0]=pe[0]),Qt[1]>pe[1]&&(Qt[1]=pe[1]),Qt[2]<pe[0]&&(Qt[2]=pe[0]),Qt[3]<pe[1]&&(Qt[3]=pe[1])),Qt}function ht(Qt,pe){return et(Qt,pe)}function et(Qt,pe){return Array.isArray(Qt[0])?Qt.map(function(Vt){return et(Vt,pe)}):pe(Qt)}function at(Qt){var pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Vt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{enable:!0,decimal:1};Qt=it(Qt,pe);var re=Qt[0],Te=Qt[1],ue=re*Mt/180,xe=Math.log(Math.tan((90+Te)*Math.PI/360))/(Math.PI/180);return xe=xe*Mt/180,Vt.enable&&(ue=Number(ue.toFixed(Vt.decimal)),xe=Number(xe.toFixed(Vt.decimal))),Qt.length===3?[ue,xe,Qt[2]]:[ue,xe]}function gt(Qt){var pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,Vt=Qt[0],re=Qt[1],Te=Vt/Mt*180,ue=re/Mt*180;return ue=180/Math.PI*(2*Math.atan(Math.exp(ue*Math.PI/180))-Math.PI/2),pe!=null&&(Te=Number(Te.toFixed(pe)),ue=Number(ue.toFixed(pe))),Qt.length===3?[Te,ue,Qt[2]]:[Te,ue]}function k(Qt){if(Qt==null)throw new Error("lng is required");return(Qt>180||Qt<-180)&&(Qt=Qt%360,Qt>180&&(Qt=-360+Qt),Qt<-180&&(Qt=360+Qt),Qt===0&&(Qt=0)),Qt}function ot(Qt){if(Qt==null)throw new Error("lat is required");return(Qt>90||Qt<-90)&&(Qt=Qt%180,Qt>90&&(Qt=-180+Qt),Qt<-90&&(Qt=180+Qt),Qt===0&&(Qt=0)),Qt}function it(Qt,pe){if(pe===!1)return Qt;var Vt=k(Qt[0]),re=ot(Qt[1]);return re>85&&(re=85),re<-85&&(re=-85),Qt.length===3?[Vt,re,Qt[2]]:[Vt,re]}function X(Qt){var pe=85.0511287798,Vt=Math.max(Math.min(pe,Qt[1]),-pe),re=256<<20,Te=Math.PI/180,ue=Qt[0]*Te,xe=Vt*Te;xe=Math.log(Math.tan(Math.PI/4+xe/2));var Ke=.5/Math.PI,Rn=.5,tr=-.5/Math.PI;return Te=.5,ue=re*(Ke*ue+Rn),xe=re*(tr*xe+Te),[Math.floor(ue),Math.floor(xe)]}function Et(Qt){var pe=.5/Math.PI,Vt=.5,re=-.5/Math.PI,Te=.5,ue=256<<20,xe=u()(Qt,2),Ke=xe[0],Rn=xe[1];Ke=(Ke/ue-Vt)/pe,Rn=(Rn/ue-Te)/re,Rn=(Math.atan(Math.pow(Math.E,Rn))-Math.PI/4)*2,Te=Math.PI/180;var tr=Rn/Te,Pn=Ke/Te;return[Pn,tr]}function vt(Qt,pe,Vt){var re=Object(nt.a)(pe[1]-Qt[1]),Te=Object(nt.a)(pe[0]-Qt[0]),ue=Object(nt.a)(Qt[1]),xe=Object(nt.a)(pe[1]),Ke=Math.pow(Math.sin(re/2),2)+Math.pow(Math.sin(Te/2),2)*Math.cos(ue)*Math.cos(xe);return Object(nt.g)(2*Math.atan2(Math.sqrt(Ke),Math.sqrt(1-Ke)),Vt="meters")}function Nt(Qt){var pe=Math.PI/180,Vt=85.0511287798,re=6378137,Te=Math.max(Math.min(Vt,Qt[1]),-Vt),ue=Math.sin(Te*pe),xe=re*Qt[0]*pe,Ke=re*Math.log((1+ue)/(1-ue))/2;return[xe,Ke]}function $t(Qt,pe){var Vt=Math.abs(Qt[1][1]-Qt[0][1])*pe,re=Math.abs(Qt[1][0]-Qt[0][0])*pe;return[[Qt[0][0]-re,Qt[0][1]-Vt],[Qt[1][0]+re,Qt[1][1]+Vt]]}function ee(Qt,pe){return Qt[0][0]<=pe[0][0]&&Qt[0][1]<=pe[0][1]&&Qt[1][0]>=pe[1][0]&&Qt[1][1]>=pe[1][1]}function kt(Qt){return[[Qt[0],Qt[1]],[Qt[2],Qt[3]]]}var Wt=function(){function Qt(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,Vt=arguments.length>1?arguments[1]:void 0;A()(this,Qt),this.limit=void 0,this.cache=void 0,this.destroy=void 0,this.order=void 0,this.limit=pe,this.destroy=Vt||this.defaultDestroy,this.order=[],this.clear()}return L()(Qt,[{key:"clear",value:function(){var Vt=this;this.order.forEach(function(re){Vt.delete(re)}),this.cache={},this.order=[]}},{key:"get",value:function(Vt){var re=this.cache[Vt];return re&&(this.deleteOrder(Vt),this.appendOrder(Vt)),re}},{key:"set",value:function(Vt,re){this.cache[Vt]?(this.delete(Vt),this.cache[Vt]=re,this.appendOrder(Vt)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[Vt]=re,this.appendOrder(Vt))}},{key:"delete",value:function(Vt){var re=this.cache[Vt];re&&(this.deleteCache(Vt),this.deleteOrder(Vt),this.destroy(re,Vt))}},{key:"deleteCache",value:function(Vt){delete this.cache[Vt]}},{key:"deleteOrder",value:function(Vt){var re=this.order.findIndex(function(Te){return Te===Vt});re>=0&&this.order.splice(re,1)}},{key:"appendOrder",value:function(Vt){this.order.push(Vt)}},{key:"defaultDestroy",value:function(Vt,re){return null}}]),Qt}();function ae(Qt,pe){Qt.forEach(function(Vt){!pe[Vt]||(pe[Vt]=pe[Vt].bind(pe))})}var le=R("FmoU");function je(Qt){var pe=le.a(Qt),Vt=[0,0,0,0];return pe!=null&&(Vt[0]=pe.r/255,Vt[1]=pe.g/255,Vt[2]=pe.b/255,Vt[3]=pe.opacity),Vt}function Oe(Qt){var pe=Qt&&Qt[0],Vt=Qt&&Qt[1],re=Qt&&Qt[2],Te=pe+Vt*256+re*65536-1;return Te}function We(Qt){return[Qt+1&255,Qt+1>>8&255,Qt+1>>8>>8&255]}function Ye(Qt){var pe=document.createElement("canvas"),Vt=pe.getContext("2d");pe.width=256,pe.height=1;for(var re=Vt.createLinearGradient(0,0,256,1),Te=null,ue=Qt.positions[0],xe=Qt.positions[Qt.positions.length-1],Ke=0;Ke<Qt.colors.length;++Ke){var Rn=(Qt.positions[Ke]-ue)/(xe-ue);re.addColorStop(Rn,Qt.colors[Ke])}return Vt.fillStyle=re,Vt.fillRect(0,0,256,1),Te=new Uint8ClampedArray(Vt.getImageData(0,0,256,1).data),new ImageData(Te,256,1)}var wn;(function(Qt){Qt.CENTER="center",Qt.TOP="top",Qt["TOP-LEFT"]="top-left",Qt["TOP-RIGHT"]="top-right",Qt.BOTTOM="bottom",Qt["BOTTOM-LEFT"]="bottom-left",Qt.LEFT="left",Qt.RIGHT="right"})(wn||(wn={}));var er={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function wr(Qt,pe,Vt){var re=Qt.classList;for(var Te in er)er.hasOwnProperty(Te)&&re.remove("l7-".concat(Vt,"-anchor-").concat(Te));re.add("l7-".concat(Vt,"-anchor-").concat(pe))}function on(Qt){if(Qt.length===0)throw new Error("max requires at least one data point");for(var pe=Qt[0],Vt=1;Vt<Qt.length;Vt++)Qt[Vt]>pe&&(pe=Qt[Vt]);return pe*1}function en(Qt){if(Qt.length===0)throw new Error("min requires at least one data point");for(var pe=Qt[0],Vt=1;Vt<Qt.length;Vt++)Qt[Vt]<pe&&(pe=Qt[Vt]);return pe*1}function An(Qt){if(Qt.length===0)return 0;for(var pe=Qt[0]*1,Vt=1;Vt<Qt.length;Vt++)pe+=Qt[Vt]*1;return pe}function jn(Qt){if(Qt.length===0)throw new Error("mean requires at least one data point");return An(Qt)/Qt.length}function pr(Qt){if(Qt.length===0)throw new Error("mean requires at least one data point");if(Qt.length<3)return Qt[0];Qt.sort();for(var pe=Qt[0],Vt=NaN,re=0,Te=1,ue=1;ue<Qt.length+1;ue++)Qt[ue]!==pe?(Te>re&&(re=Te,Vt=pe),Te=1,pe=Qt[ue]):Te++;return Vt*1}var di={min:en,max:on,mean:jn,sum:An,mode:pr};function Ce(Qt,pe){return Qt.map(function(Vt){return Vt[pe]})}function Me(Qt,pe){return di[Qt](pe)}},HpQ9:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.ContainerSnapshot=void 0;var V=function(){function E(){}return E.of=function(T,e){var t=new E;return t.bindings=T,t.middleware=e,t},E}();ct.ContainerSnapshot=V},HthE:function(Se,ct,R){"use strict";R.d(ct,"a",function(){return V}),R.d(ct,"b",function(){return E});var V;(function(T){T[T.LNGLAT=1]="LNGLAT",T[T.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",T[T.VECTOR_TILE=3]="VECTOR_TILE",T[T.IDENTITY=4]="IDENTITY",T[T.P20=5]="P20",T[T.P20_OFFSET=6]="P20_OFFSET",T[T.METER_OFFSET=7]="METER_OFFSET"})(V||(V={}));var E={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter"}},I0ug:function(Se,ct,R){"use strict";(function(V){R.d(ct,"a",function(){return T});var E=R("U8pU");function T(e){if(typeof window!="undefined"&&Object(E.a)(window.process)==="object"&&window.process.type==="renderer"||typeof V!="undefined"&&Object(E.a)(V.versions)==="object"&&Boolean(V.versions.electron))return!0;var t=(typeof navigator=="undefined"?"undefined":Object(E.a)(navigator))==="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,u=e||t;return!!(u&&u.indexOf("Electron")>=0)}}).call(this,R("Q2Ig"))},IOcx:function(Se,ct,R){"use strict";R.d(ct,"a",function(){return V}),R.d(ct,"b",function(){return L}),R.d(ct,"c",function(){return H}),R.d(ct,"d",function(){return F}),R.d(ct,"e",function(){return Z});var V={};R.r(V),R.d(V,"create",function(){return T}),R.d(V,"clone",function(){return e}),R.d(V,"copy",function(){return t}),R.d(V,"identity",function(){return u}),R.d(V,"fromValues",function(){return s}),R.d(V,"set",function(){return c}),R.d(V,"transpose",function(){return r}),R.d(V,"invert",function(){return h}),R.d(V,"adjoint",function(){return n}),R.d(V,"determinant",function(){return i}),R.d(V,"multiply",function(){return a}),R.d(V,"rotate",function(){return o}),R.d(V,"scale",function(){return l}),R.d(V,"fromRotation",function(){return f}),R.d(V,"fromScaling",function(){return v}),R.d(V,"str",function(){return b}),R.d(V,"frob",function(){return g}),R.d(V,"LDU",function(){return m}),R.d(V,"add",function(){return _}),R.d(V,"subtract",function(){return M}),R.d(V,"exactEquals",function(){return x}),R.d(V,"equals",function(){return y}),R.d(V,"multiplyScalar",function(){return S}),R.d(V,"multiplyScalarAndAdd",function(){return P}),R.d(V,"mul",function(){return A}),R.d(V,"sub",function(){return O});var E=R("yU0y");function T(){var G=new E.a(4);return E.a!=Float32Array&&(G[1]=0,G[2]=0),G[0]=1,G[3]=1,G}function e(G){var U=new E.a(4);return U[0]=G[0],U[1]=G[1],U[2]=G[2],U[3]=G[3],U}function t(G,U){return G[0]=U[0],G[1]=U[1],G[2]=U[2],G[3]=U[3],G}function u(G){return G[0]=1,G[1]=0,G[2]=0,G[3]=1,G}function s(G,U,Y,J){var rt=new E.a(4);return rt[0]=G,rt[1]=U,rt[2]=Y,rt[3]=J,rt}function c(G,U,Y,J,rt){return G[0]=U,G[1]=Y,G[2]=J,G[3]=rt,G}function r(G,U){if(G===U){var Y=U[1];G[1]=U[2],G[2]=Y}else G[0]=U[0],G[1]=U[2],G[2]=U[1],G[3]=U[3];return G}function h(G,U){var Y=U[0],J=U[1],rt=U[2],ft=U[3],dt=Y*ft-rt*J;return dt?(dt=1/dt,G[0]=ft*dt,G[1]=-J*dt,G[2]=-rt*dt,G[3]=Y*dt,G):null}function n(G,U){var Y=U[0];return G[0]=U[3],G[1]=-U[1],G[2]=-U[2],G[3]=Y,G}function i(G){return G[0]*G[3]-G[2]*G[1]}function a(G,U,Y){var J=U[0],rt=U[1],ft=U[2],dt=U[3],ut=Y[0],Lt=Y[1],Ft=Y[2],Ot=Y[3];return G[0]=J*ut+ft*Lt,G[1]=rt*ut+dt*Lt,G[2]=J*Ft+ft*Ot,G[3]=rt*Ft+dt*Ot,G}function o(G,U,Y){var J=U[0],rt=U[1],ft=U[2],dt=U[3],ut=Math.sin(Y),Lt=Math.cos(Y);return G[0]=J*Lt+ft*ut,G[1]=rt*Lt+dt*ut,G[2]=J*-ut+ft*Lt,G[3]=rt*-ut+dt*Lt,G}function l(G,U,Y){var J=U[0],rt=U[1],ft=U[2],dt=U[3],ut=Y[0],Lt=Y[1];return G[0]=J*ut,G[1]=rt*ut,G[2]=ft*Lt,G[3]=dt*Lt,G}function f(G,U){var Y=Math.sin(U),J=Math.cos(U);return G[0]=J,G[1]=Y,G[2]=-Y,G[3]=J,G}function v(G,U){return G[0]=U[0],G[1]=0,G[2]=0,G[3]=U[1],G}function b(G){return"mat2("+G[0]+", "+G[1]+", "+G[2]+", "+G[3]+")"}function g(G){return Math.hypot(G[0],G[1],G[2],G[3])}function m(G,U,Y,J){return G[2]=J[2]/J[0],Y[0]=J[0],Y[1]=J[1],Y[3]=J[3]-G[2]*Y[1],[G,U,Y]}function _(G,U,Y){return G[0]=U[0]+Y[0],G[1]=U[1]+Y[1],G[2]=U[2]+Y[2],G[3]=U[3]+Y[3],G}function M(G,U,Y){return G[0]=U[0]-Y[0],G[1]=U[1]-Y[1],G[2]=U[2]-Y[2],G[3]=U[3]-Y[3],G}function x(G,U){return G[0]===U[0]&&G[1]===U[1]&&G[2]===U[2]&&G[3]===U[3]}function y(G,U){var Y=G[0],J=G[1],rt=G[2],ft=G[3],dt=U[0],ut=U[1],Lt=U[2],Ft=U[3];return Math.abs(Y-dt)<=E.b*Math.max(1,Math.abs(Y),Math.abs(dt))&&Math.abs(J-ut)<=E.b*Math.max(1,Math.abs(J),Math.abs(ut))&&Math.abs(rt-Lt)<=E.b*Math.max(1,Math.abs(rt),Math.abs(Lt))&&Math.abs(ft-Ft)<=E.b*Math.max(1,Math.abs(ft),Math.abs(Ft))}function S(G,U,Y){return G[0]=U[0]*Y,G[1]=U[1]*Y,G[2]=U[2]*Y,G[3]=U[3]*Y,G}function P(G,U,Y,J){return G[0]=U[0]+Y[0]*J,G[1]=U[1]+Y[1]*J,G[2]=U[2]+Y[2]*J,G[3]=U[3]+Y[3]*J,G}var A=a,O=M,L=R("ZaHm"),H=R("ZxFD"),F=R("n+fv"),Z=R("bl9R")},ISu3:function(Se,ct,R){"use strict";R.d(ct,"a",function(){return T}),R.d(ct,"c",function(){return e}),R.d(ct,"b",function(){return t}),R.d(ct,"d",function(){return u});var V={},E={},T=function(c){return E[c]},e=function(c,r){E[c]=r},t=function(c){return V[c]},u=function(c,r){V[c]=r}},Ijbi:function(Se,ct,R){var V=R("WkPL");function E(T){if(Array.isArray(T))return V(T)}Se.exports=E,Se.exports.default=Se.exports,Se.exports.__esModule=!0},Ioao:function(Se,ct,R){var V=R("heNW"),E=Math.max;function T(e,t,u){return t=E(t===void 0?e.length-1:t,0),function(){for(var s=arguments,c=-1,r=E(s.length-t,0),h=Array(r);++c<r;)h[c]=s[t+c];c=-1;for(var n=Array(t+1);++c<t;)n[c]=s[c];return n[t]=u(h),V(e,this,n)}}Se.exports=T},IzEo:function(Se,ct,R){"use strict";var V=R("cIOH"),E=R.n(V),T=R("lnY3"),e=R.n(T),t=R("Znn+"),u=R("14J3"),s=R("jCWc")},J2iB:function(Se,ct){function R(V){return V==null}Se.exports=R},J7lC:function(Se,ct){},JBE3:function(Se,ct,R){var V=R("+Qka"),E=R("LsHQ"),T=E(function(e,t,u,s){V(e,t,u,s)});Se.exports=T},Jssm:function(Se,ct,R){"use strict";var V=R("q1tI"),E=R("i8i4"),T=R("17x9"),e=R("fhzG");Se.exports=e({displayName:"ReactFitText",propTypes:{children:T.element.isRequired,compressor:T.number,minFontSize:T.number,maxFontSize:T.number},getDefaultProps:function(){return{compressor:1,minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY}},componentDidMount:function(){window.addEventListener("resize",this._onBodyResize),this._onBodyResize()},componentWillUnmount:function(){window.removeEventListener("resize",this._onBodyResize)},componentDidUpdate:function(){this._onBodyResize()},_onBodyResize:function(){var u=E.findDOMNode(this),s=u.offsetWidth;u.style.fontSize=Math.max(Math.min(s/(this.props.compressor*10),parseFloat(this.props.maxFontSize)),parseFloat(this.props.minFontSize))+"px"},_renderChildren:function(){var u=this;return V.Children.map(this.props.children,function(s){return V.cloneElement(s,{ref:function(r){return u._childRef=r}})})},render:function(){return this._renderChildren()[0]}})},K9nA:function(Se,ct,R){"use strict";(function(V,E){R.d(ct,"b",function(){return u}),R.d(ct,"a",function(){return r});var T=R("U8pU"),e={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,global:typeof V!="undefined"&&V,document:typeof document!="undefined"&&document,process:(typeof E=="undefined"?"undefined":Object(T.a)(E))==="object"&&E},t=e.self||e.window||e.global,u=e.window||e.self||e.global,s=e.global||e.self||e.window,c=e.document||{},r=e.process||{},h=console}).call(this,R("IyRk"),R("Q2Ig"))},KKCa:function(Se,ct){typeof Object.create=="function"?Se.exports=function(V,E){V.super_=E,V.prototype=Object.create(E.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}})}:Se.exports=function(V,E){V.super_=E;var T=function(){};T.prototype=E.prototype,V.prototype=new T,V.prototype.constructor=V}},KwMD:function(Se,ct){function R(V,E,T,e){for(var t=V.length,u=T+(e?1:-1);e?u--:++u<t;)if(E(V[u],u,V))return u;return-1}Se.exports=R},KxBF:function(Se,ct){function R(V,E,T){var e=-1,t=V.length;E<0&&(E=-E>t?0:t+E),T=T>t?t:T,T<0&&(T+=t),t=E>T?0:T-E>>>0,E>>>=0;for(var u=Array(t);++e<t;)u[e]=V[e+E];return u}Se.exports=R},L56e:function(Se,ct,R){"use strict";R.d(ct,"a",function(){return V});var V=["mapload"]},LGYb:function(Se,ct,R){var V=R("1hJj"),E=R("jbM+"),T=R("Xt/L"),e=R("xYSL"),t=R("dQpi"),u=R("rEGp"),s=200;function c(r,h,n){var i=-1,a=E,o=r.length,l=!0,f=[],v=f;if(n)l=!1,a=T;else if(o>=s){var b=h?null:t(r);if(b)return u(b);l=!1,a=e,v=new V}else v=h?[]:f;t:for(;++i<o;){var g=r[i],m=h?h(g):g;if(g=n||g!==0?g:0,l&&m===m){for(var _=v.length;_--;)if(v[_]===m)continue t;h&&v.push(m),f.push(g)}else a(v,m,n)||(v!==f&&v.push(m),f.push(g))}return f}Se.exports=c},LKzl:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.BindingWhenOnSyntax=void 0;var V=R("406g"),E=R("z4Hk"),T=function(){function e(t){this._binding=t,this._bindingWhenSyntax=new E.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new V.BindingOnSyntax(this._binding)}return e.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},e.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(t,u){return this._bindingWhenSyntax.whenTargetTagged(t,u)},e.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},e.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},e.prototype.whenParentTagged=function(t,u){return this._bindingWhenSyntax.whenParentTagged(t,u)},e.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},e.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},e.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},e.prototype.whenAnyAncestorTagged=function(t,u){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,u)},e.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},e.prototype.whenNoAncestorTagged=function(t,u){return this._bindingWhenSyntax.whenNoAncestorTagged(t,u)},e.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},e.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},e.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},e}();ct.BindingWhenOnSyntax=T},LcsW:function(Se,ct,R){var V=R("kekF"),E=V(Object.getPrototypeOf,Object);Se.exports=E},LgvC:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.Binding=void 0;var V=R("FV85"),E=R("d9O0"),T=function(){function e(t,u){this.id=E.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=u,this.type=V.BindingTypeEnum.Invalid,this.constraint=function(s){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===V.BindingScopeEnum.Singleton?this.activated:!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}();ct.Binding=T},LsHQ:function(Se,ct,R){var V=R("EA7m"),E=R("mv/X");function T(e){return V(function(t,u){var s=-1,c=u.length,r=c>1?u[c-1]:void 0,h=c>2?u[2]:void 0;for(r=e.length>3&&typeof r=="function"?(c--,r):void 0,h&&E(u[0],u[1],h)&&(r=c<3?void 0:r,c=1),t=Object(t);++s<c;){var n=u[s];n&&e(t,n,s,r)}return t})}Se.exports=T},LvWW:function(Se,ct,R){var V=R("mhV4");Se.exports=E;function E(c,r){switch(c&&c.type||null){case"FeatureCollection":return c.features=c.features.map(T(E,r)),c;case"GeometryCollection":return c.geometries=c.geometries.map(T(E,r)),c;case"Feature":return c.geometry=E(c.geometry,r),c;case"Polygon":case"MultiPolygon":return e(c,r);default:return c}}function T(c,r){return function(h){return c(h,r)}}function e(c,r){return c.type==="Polygon"?c.coordinates=t(c.coordinates,r):c.type==="MultiPolygon"&&(c.coordinates=c.coordinates.map(T(t,r))),c}function t(c,r){r=!!r,c[0]=u(c[0],r);for(var h=1;h<c.length;h++)c[h]=u(c[h],!r);return c}function u(c,r){return s(c)===r?c:c.reverse()}function s(c){return V.ring(c)>=0}},MCLT:function(Se,ct,R){(function(V){var E=Object.getOwnPropertyDescriptors||function(dt){for(var ut=Object.keys(dt),Lt={},Ft=0;Ft<ut.length;Ft++)Lt[ut[Ft]]=Object.getOwnPropertyDescriptor(dt,ut[Ft]);return Lt},T=/%[sdj%]/g;ct.format=function(ft){if(!_(ft)){for(var dt=[],ut=0;ut<arguments.length;ut++)dt.push(u(arguments[ut]));return dt.join(" ")}for(var ut=1,Lt=arguments,Ft=Lt.length,Ot=String(ft).replace(T,function(xt){if(xt==="%%")return"%";if(ut>=Ft)return xt;switch(xt){case"%s":return String(Lt[ut++]);case"%d":return Number(Lt[ut++]);case"%j":try{return JSON.stringify(Lt[ut++])}catch(At){return"[Circular]"}default:return xt}}),St=Lt[ut];ut<Ft;St=Lt[++ut])b(St)||!S(St)?Ot+=" "+St:Ot+=" "+u(St);return Ot},ct.deprecate=function(ft,dt){if(typeof V!="undefined"&&V.noDeprecation===!0)return ft;if(typeof V=="undefined")return function(){return ct.deprecate(ft,dt).apply(this,arguments)};var ut=!1;function Lt(){if(!ut){if(V.throwDeprecation)throw new Error(dt);V.traceDeprecation?console.trace(dt):console.error(dt),ut=!0}return ft.apply(this,arguments)}return Lt};var e={},t;ct.debuglog=function(ft){if(x(t)&&(t=Object({NODE_ENV:"production"}).NODE_DEBUG||""),ft=ft.toUpperCase(),!e[ft])if(new RegExp("\\b"+ft+"\\b","i").test(t)){var dt=V.pid;e[ft]=function(){var ut=ct.format.apply(ct,arguments);console.error("%s %d: %s",ft,dt,ut)}}else e[ft]=function(){};return e[ft]};function u(ft,dt){var ut={seen:[],stylize:c};return arguments.length>=3&&(ut.depth=arguments[2]),arguments.length>=4&&(ut.colors=arguments[3]),v(dt)?ut.showHidden=dt:dt&&ct._extend(ut,dt),x(ut.showHidden)&&(ut.showHidden=!1),x(ut.depth)&&(ut.depth=2),x(ut.colors)&&(ut.colors=!1),x(ut.customInspect)&&(ut.customInspect=!0),ut.colors&&(ut.stylize=s),h(ut,ft,ut.depth)}ct.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function s(ft,dt){var ut=u.styles[dt];return ut?"["+u.colors[ut][0]+"m"+ft+"["+u.colors[ut][1]+"m":ft}function c(ft,dt){return ft}function r(ft){var dt={};return ft.forEach(function(ut,Lt){dt[ut]=!0}),dt}function h(ft,dt,ut){if(ft.customInspect&&dt&&O(dt.inspect)&&dt.inspect!==ct.inspect&&!(dt.constructor&&dt.constructor.prototype===dt)){var Lt=dt.inspect(ut,ft);return _(Lt)||(Lt=h(ft,Lt,ut)),Lt}var Ft=n(ft,dt);if(Ft)return Ft;var Ot=Object.keys(dt),St=r(Ot);if(ft.showHidden&&(Ot=Object.getOwnPropertyNames(dt)),A(dt)&&(Ot.indexOf("message")>=0||Ot.indexOf("description")>=0))return i(dt);if(Ot.length===0){if(O(dt)){var xt=dt.name?": "+dt.name:"";return ft.stylize("[Function"+xt+"]","special")}if(y(dt))return ft.stylize(RegExp.prototype.toString.call(dt),"regexp");if(P(dt))return ft.stylize(Date.prototype.toString.call(dt),"date");if(A(dt))return i(dt)}var At="",nt=!1,Mt=["{","}"];if(f(dt)&&(nt=!0,Mt=["[","]"]),O(dt)){var z=dt.name?": "+dt.name:"";At=" [Function"+z+"]"}if(y(dt)&&(At=" "+RegExp.prototype.toString.call(dt)),P(dt)&&(At=" "+Date.prototype.toUTCString.call(dt)),A(dt)&&(At=" "+i(dt)),Ot.length===0&&(!nt||dt.length==0))return Mt[0]+At+Mt[1];if(ut<0)return y(dt)?ft.stylize(RegExp.prototype.toString.call(dt),"regexp"):ft.stylize("[Object]","special");ft.seen.push(dt);var Q;return nt?Q=a(ft,dt,ut,St,Ot):Q=Ot.map(function(ht){return o(ft,dt,ut,St,ht,nt)}),ft.seen.pop(),l(Q,At,Mt)}function n(ft,dt){if(x(dt))return ft.stylize("undefined","undefined");if(_(dt)){var ut="'"+JSON.stringify(dt).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ft.stylize(ut,"string")}if(m(dt))return ft.stylize(""+dt,"number");if(v(dt))return ft.stylize(""+dt,"boolean");if(b(dt))return ft.stylize("null","null")}function i(ft){return"["+Error.prototype.toString.call(ft)+"]"}function a(ft,dt,ut,Lt,Ft){for(var Ot=[],St=0,xt=dt.length;St<xt;++St)U(dt,String(St))?Ot.push(o(ft,dt,ut,Lt,String(St),!0)):Ot.push("");return Ft.forEach(function(At){At.match(/^\d+$/)||Ot.push(o(ft,dt,ut,Lt,At,!0))}),Ot}function o(ft,dt,ut,Lt,Ft,Ot){var St,xt,At;if(At=Object.getOwnPropertyDescriptor(dt,Ft)||{value:dt[Ft]},At.get?At.set?xt=ft.stylize("[Getter/Setter]","special"):xt=ft.stylize("[Getter]","special"):At.set&&(xt=ft.stylize("[Setter]","special")),U(Lt,Ft)||(St="["+Ft+"]"),xt||(ft.seen.indexOf(At.value)<0?(b(ut)?xt=h(ft,At.value,null):xt=h(ft,At.value,ut-1),xt.indexOf(`
`)>-1&&(Ot?xt=xt.split(`
`).map(function(nt){return"  "+nt}).join(`
`).substr(2):xt=`
`+xt.split(`
`).map(function(nt){return"   "+nt}).join(`
`))):xt=ft.stylize("[Circular]","special")),x(St)){if(Ot&&Ft.match(/^\d+$/))return xt;St=JSON.stringify(""+Ft),St.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(St=St.substr(1,St.length-2),St=ft.stylize(St,"name")):(St=St.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),St=ft.stylize(St,"string"))}return St+": "+xt}function l(ft,dt,ut){var Lt=0,Ft=ft.reduce(function(Ot,St){return Lt++,St.indexOf(`
`)>=0&&Lt++,Ot+St.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Ft>60?ut[0]+(dt===""?"":dt+`
 `)+" "+ft.join(`,
  `)+" "+ut[1]:ut[0]+dt+" "+ft.join(", ")+" "+ut[1]}function f(ft){return Array.isArray(ft)}ct.isArray=f;function v(ft){return typeof ft=="boolean"}ct.isBoolean=v;function b(ft){return ft===null}ct.isNull=b;function g(ft){return ft==null}ct.isNullOrUndefined=g;function m(ft){return typeof ft=="number"}ct.isNumber=m;function _(ft){return typeof ft=="string"}ct.isString=_;function M(ft){return typeof ft=="symbol"}ct.isSymbol=M;function x(ft){return ft===void 0}ct.isUndefined=x;function y(ft){return S(ft)&&H(ft)==="[object RegExp]"}ct.isRegExp=y;function S(ft){return typeof ft=="object"&&ft!==null}ct.isObject=S;function P(ft){return S(ft)&&H(ft)==="[object Date]"}ct.isDate=P;function A(ft){return S(ft)&&(H(ft)==="[object Error]"||ft instanceof Error)}ct.isError=A;function O(ft){return typeof ft=="function"}ct.isFunction=O;function L(ft){return ft===null||typeof ft=="boolean"||typeof ft=="number"||typeof ft=="string"||typeof ft=="symbol"||typeof ft=="undefined"}ct.isPrimitive=L,ct.isBuffer=R("1gqn");function H(ft){return Object.prototype.toString.call(ft)}function F(ft){return ft<10?"0"+ft.toString(10):ft.toString(10)}var Z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function G(){var ft=new Date,dt=[F(ft.getHours()),F(ft.getMinutes()),F(ft.getSeconds())].join(":");return[ft.getDate(),Z[ft.getMonth()],dt].join(" ")}ct.log=function(){console.log("%s - %s",G(),ct.format.apply(ct,arguments))},ct.inherits=R("KKCa"),ct._extend=function(ft,dt){if(!dt||!S(dt))return ft;for(var ut=Object.keys(dt),Lt=ut.length;Lt--;)ft[ut[Lt]]=dt[ut[Lt]];return ft};function U(ft,dt){return Object.prototype.hasOwnProperty.call(ft,dt)}var Y=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;ct.promisify=function(dt){if(typeof dt!="function")throw new TypeError('The "original" argument must be of type Function');if(Y&&dt[Y]){var ut=dt[Y];if(typeof ut!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ut,Y,{value:ut,enumerable:!1,writable:!1,configurable:!0}),ut}function ut(){for(var Lt,Ft,Ot=new Promise(function(At,nt){Lt=At,Ft=nt}),St=[],xt=0;xt<arguments.length;xt++)St.push(arguments[xt]);St.push(function(At,nt){At?Ft(At):Lt(nt)});try{dt.apply(this,St)}catch(At){Ft(At)}return Ot}return Object.setPrototypeOf(ut,Object.getPrototypeOf(dt)),Y&&Object.defineProperty(ut,Y,{value:ut,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ut,E(dt))},ct.promisify.custom=Y;function J(ft,dt){if(!ft){var ut=new Error("Promise was rejected with a falsy value");ut.reason=ft,ft=ut}return dt(ft)}function rt(ft){if(typeof ft!="function")throw new TypeError('The "original" argument must be of type Function');function dt(){for(var ut=[],Lt=0;Lt<arguments.length;Lt++)ut.push(arguments[Lt]);var Ft=ut.pop();if(typeof Ft!="function")throw new TypeError("The last argument must be of type Function");var Ot=this,St=function(){return Ft.apply(Ot,arguments)};ft.apply(this,ut).then(function(xt){V.nextTick(St,null,xt)},function(xt){V.nextTick(J,xt,St)})}return Object.setPrototypeOf(dt,Object.getPrototypeOf(ft)),Object.defineProperties(dt,E(ft)),dt}ct.callbackify=rt}).call(this,R("Q2Ig"))},MON2:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.STACK_OVERFLOW=ct.CIRCULAR_DEPENDENCY_IN_FACTORY=ct.POST_CONSTRUCT_ERROR=ct.MULTIPLE_POST_CONSTRUCT_METHODS=ct.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=ct.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=ct.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=ct.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=ct.ARGUMENTS_LENGTH_MISMATCH=ct.INVALID_DECORATOR_OPERATION=ct.INVALID_TO_SELF_VALUE=ct.INVALID_FUNCTION_BINDING=ct.INVALID_MIDDLEWARE_RETURN=ct.NO_MORE_SNAPSHOTS_AVAILABLE=ct.INVALID_BINDING_TYPE=ct.NOT_IMPLEMENTED=ct.CIRCULAR_DEPENDENCY=ct.UNDEFINED_INJECT_ANNOTATION=ct.MISSING_INJECT_ANNOTATION=ct.MISSING_INJECTABLE_ANNOTATION=ct.NOT_REGISTERED=ct.CANNOT_UNBIND=ct.AMBIGUOUS_MATCH=ct.KEY_NOT_FOUND=ct.NULL_ARGUMENT=ct.DUPLICATED_METADATA=ct.DUPLICATED_INJECTABLE_DECORATOR=void 0,ct.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",ct.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",ct.NULL_ARGUMENT="NULL argument",ct.KEY_NOT_FOUND="Key Not Found",ct.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",ct.CANNOT_UNBIND="Could not unbind serviceIdentifier:",ct.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",ct.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",ct.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var V=function(u){return"@inject called with undefined this could mean that the class "+u+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};ct.UNDEFINED_INJECT_ANNOTATION=V,ct.CIRCULAR_DEPENDENCY="Circular dependency found:",ct.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",ct.INVALID_BINDING_TYPE="Invalid binding type:",ct.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",ct.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",ct.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",ct.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",ct.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var E=function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];return"The number of constructor arguments in the derived class "+(u[0]+" must be >= than the number of constructor arguments of its base class.")};ct.ARGUMENTS_LENGTH_MISMATCH=E,ct.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",ct.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",ct.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",ct.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",ct.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var T=function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];return"@postConstruct error in class "+u[0]+": "+u[1]};ct.POST_CONSTRUCT_ERROR=T;var e=function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];return"It looks like there is a circular dependency "+("in one of the '"+u[0]+"' bindings. Please investigate bindings with")+("service identifier '"+u[1]+"'.")};ct.CIRCULAR_DEPENDENCY_IN_FACTORY=e,ct.STACK_OVERFLOW="Maximum call stack size exceeded"},MrPd:function(Se,ct,R){var V=R("hypo"),E=R("ljhN"),T=Object.prototype,e=T.hasOwnProperty;function t(u,s,c){var r=u[s];(!(e.call(u,s)&&E(r,c))||c===void 0&&!(s in u))&&V(u,s,c)}Se.exports=t},Nsbk:function(Se,ct){function R(V){return Se.exports=R=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},Se.exports.default=Se.exports,Se.exports.__esModule=!0,R(V)}Se.exports=R,Se.exports.default=Se.exports,Se.exports.__esModule=!0},O0oS:function(Se,ct,R){var V=R("Cwc5"),E=function(){try{var T=V(Object,"defineProperty");return T({},"",{}),T}catch(e){}}();Se.exports=E},O1je:function(Se,ct){},OBhP:function(Se,ct,R){var V=R("fmRc"),E=R("gFfm"),T=R("MrPd"),e=R("WwFo"),t=R("Dw+G"),u=R("5Tg0"),s=R("Q1l4"),c=R("VOtZ"),r=R("EEGq"),h=R("qZTm"),n=R("G6z8"),i=R("QqLw"),a=R("yHx3"),o=R("wrZu"),l=R("+iFO"),f=R("Z0cm"),v=R("DSRE"),b=R("zEVN"),g=R("GoyQ"),m=R("1+5i"),_=R("7GkX"),M=R("mTTR"),x=1,y=2,S=4,P="[object Arguments]",A="[object Array]",O="[object Boolean]",L="[object Date]",H="[object Error]",F="[object Function]",Z="[object GeneratorFunction]",G="[object Map]",U="[object Number]",Y="[object Object]",J="[object RegExp]",rt="[object Set]",ft="[object String]",dt="[object Symbol]",ut="[object WeakMap]",Lt="[object ArrayBuffer]",Ft="[object DataView]",Ot="[object Float32Array]",St="[object Float64Array]",xt="[object Int8Array]",At="[object Int16Array]",nt="[object Int32Array]",Mt="[object Uint8Array]",z="[object Uint8ClampedArray]",Q="[object Uint16Array]",ht="[object Uint32Array]",et={};et[P]=et[A]=et[Lt]=et[Ft]=et[O]=et[L]=et[Ot]=et[St]=et[xt]=et[At]=et[nt]=et[G]=et[U]=et[Y]=et[J]=et[rt]=et[ft]=et[dt]=et[Mt]=et[z]=et[Q]=et[ht]=!0,et[H]=et[F]=et[ut]=!1;function at(gt,k,ot,it,X,Et){var vt,Nt=k&x,$t=k&y,ee=k&S;if(ot&&(vt=X?ot(gt,it,X,Et):ot(gt)),vt!==void 0)return vt;if(!g(gt))return gt;var kt=f(gt);if(kt){if(vt=a(gt),!Nt)return s(gt,vt)}else{var Wt=i(gt),ae=Wt==F||Wt==Z;if(v(gt))return u(gt,Nt);if(Wt==Y||Wt==P||ae&&!X){if(vt=$t||ae?{}:l(gt),!Nt)return $t?r(gt,t(vt,gt)):c(gt,e(vt,gt))}else{if(!et[Wt])return X?gt:{};vt=o(gt,Wt,Nt)}}Et||(Et=new V);var le=Et.get(gt);if(le)return le;Et.set(gt,vt),m(gt)?gt.forEach(function(We){vt.add(at(We,k,ot,We,gt,Et))}):b(gt)&&gt.forEach(function(We,Ye){vt.set(Ye,at(We,k,ot,Ye,gt,Et))});var je=ee?$t?n:h:$t?M:_,Oe=kt?void 0:je(gt);return E(Oe||gt,function(We,Ye){Oe&&(Ye=We,We=gt[Ye]),T(vt,Ye,at(We,k,ot,Ye,gt,Et))}),vt}Se.exports=at},PArb:function(Se,ct,R){"use strict";var V=R("wx14"),E=R("rePB"),T=R("q1tI"),e=R.n(T),t=R("TSYQ"),u=R.n(t),s=R("H84U"),c=function(h,n){var i={};for(var a in h)Object.prototype.hasOwnProperty.call(h,a)&&n.indexOf(a)<0&&(i[a]=h[a]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(h);o<a.length;o++)n.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(h,a[o])&&(i[a[o]]=h[a[o]]);return i},r=function(n){return T.createElement(s.a,null,function(i){var a,o=i.getPrefixCls,l=i.direction,f=n.prefixCls,v=n.type,b=v===void 0?"horizontal":v,g=n.orientation,m=g===void 0?"center":g,_=n.className,M=n.children,x=n.dashed,y=n.plain,S=c(n,["prefixCls","type","orientation","className","children","dashed","plain"]),P=o("divider",f),A=m.length>0?"-".concat(m):m,O=!!M,L=u()(P,"".concat(P,"-").concat(b),(a={},Object(E.a)(a,"".concat(P,"-with-text"),O),Object(E.a)(a,"".concat(P,"-with-text").concat(A),O),Object(E.a)(a,"".concat(P,"-dashed"),!!x),Object(E.a)(a,"".concat(P,"-plain"),!!y),Object(E.a)(a,"".concat(P,"-rtl"),l==="rtl"),a),_);return T.createElement("div",Object(V.a)({className:L},S,{role:"separator"}),M&&T.createElement("span",{className:"".concat(P,"-inner-text")},M))})};ct.a=r},PJYZ:function(Se,ct){function R(V){if(V===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V}Se.exports=R,Se.exports.default=Se.exports,Se.exports.__esModule=!0},PSsN:function(Se,ct){},PUg6:function(Se,ct,R){"use strict";R.d(ct,"a",function(){return V});var V;(function(E){E.normal="normal",E.additive="additive",E.subtractive="subtractive",E.min="min",E.max="max",E.none="none"})(V||(V={}))},Q1l4:function(Se,ct){function R(V,E){var T=-1,e=V.length;for(E||(E=Array(e));++T<e;)E[T]=V[T];return E}Se.exports=R},QGbF:function(Se,ct){},"QQZ/":function(Se,ct,R){var V=R("Sq3C"),E=R("Z1HP"),T=R("Sxd8"),e=R("dt0z");function t(u,s,c){u=e(u),s=T(s);var r=s?E(u):0;return s&&r<s?V(s-r,c)+u:u}Se.exports=t},QcOe:function(Se,ct,R){var V=R("GoyQ"),E=R("6sVZ"),T=R("7Ix3"),e=Object.prototype,t=e.hasOwnProperty;function u(s){if(!V(s))return T(s);var c=E(s),r=[];for(var h in s)h=="constructor"&&(c||!t.call(s,h))||r.push(h);return r}Se.exports=u},QkVN:function(Se,ct,R){var V=R("+Qka"),E=R("LsHQ"),T=E(function(e,t,u){V(e,t,u)});Se.exports=T},"R/W3":function(Se,ct,R){var V=R("KwMD"),E=R("2ajD"),T=R("CZoQ");function e(t,u,s){return u===u?T(t,u,s):V(t,E,s)}Se.exports=e},RIqP:function(Se,ct,R){var V=R("Ijbi"),E=R("EbDI"),T=R("ZhPi"),e=R("Bnag");function t(u){return V(u)||E(u)||T(u)||e()}Se.exports=t,Se.exports.default=Se.exports,Se.exports.__esModule=!0},"RL2/":function(Se,ct,R){"use strict";var V="2.3.9"},RMtq:function(Se,ct){},"RR/i":function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.typeConstraint=ct.namedConstraint=ct.taggedConstraint=ct.traverseAncerstors=void 0;var V=R("xfSm"),E=R("GXnB"),T=function s(c,r){var h=c.parentRequest;return h!==null?r(h)?!0:s(h,r):!1};ct.traverseAncerstors=T;var e=function(c){return function(r){var h=function(i){return i!==null&&i.target!==null&&i.target.matchesTag(c)(r)};return h.metaData=new E.Metadata(c,r),h}};ct.taggedConstraint=e;var t=e(V.NAMED_TAG);ct.namedConstraint=t;var u=function(c){return function(r){var h=null;if(r!==null)if(h=r.bindings[0],typeof c=="string"){var n=h.serviceIdentifier;return n===c}else{var i=r.bindings[0].implementationType;return c===i}return!1}};ct.typeConstraint=u},Sk89:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.postConstruct=void 0;var V=R("MON2"),E=R("xfSm"),T=R("GXnB");function e(){return function(t,u,s){var c=new T.Metadata(E.POST_CONSTRUCT,u);if(Reflect.hasOwnMetadata(E.POST_CONSTRUCT,t.constructor))throw new Error(V.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(E.POST_CONSTRUCT,c,t.constructor)}}ct.postConstruct=e},SksO:function(Se,ct){function R(V,E){return Se.exports=R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Se.exports.default=Se.exports,Se.exports.__esModule=!0,R(V,E)}Se.exports=R,Se.exports.default=Se.exports,Se.exports.__esModule=!0},Sq3C:function(Se,ct,R){var V=R("sKgW"),E=R("zoYe"),T=R("wy8a"),e=R("quyA"),t=R("Z1HP"),u=R("Em2t"),s=Math.ceil;function c(r,h){h=h===void 0?" ":E(h);var n=h.length;if(n<2)return n?V(h,r):h;var i=V(h,s(r/t(h)));return e(h)?T(u(i),0,r).join(""):i.slice(0,r)}Se.exports=c},Sxd8:function(Se,ct,R){var V=R("ZCgT");function E(T){var e=V(T),t=e%1;return e===e?t?e-t:e:0}Se.exports=E},T1AV:function(Se,ct,R){var V=R("t2Dn"),E=R("5Tg0"),T=R("yP5f"),e=R("Q1l4"),t=R("+iFO"),u=R("03A+"),s=R("Z0cm"),c=R("3L66"),r=R("DSRE"),h=R("lSCD"),n=R("GoyQ"),i=R("YO3V"),a=R("c6wG"),o=R("itsj"),l=R("jeLo");function f(v,b,g,m,_,M,x){var y=o(v,g),S=o(b,g),P=x.get(S);if(P){V(v,g,P);return}var A=M?M(y,S,g+"",v,b,x):void 0,O=A===void 0;if(O){var L=s(S),H=!L&&r(S),F=!L&&!H&&a(S);A=S,L||H||F?s(y)?A=y:c(y)?A=e(y):H?(O=!1,A=E(S,!0)):F?(O=!1,A=T(S,!0)):A=[]:i(S)||u(S)?(A=y,u(y)?A=l(y):(!n(y)||h(y))&&(A=t(S))):O=!1}O&&(x.set(S,A),_(A,S,m,M,x),x.delete(S)),V(v,g,A)}Se.exports=f},TKrE:function(Se,ct,R){var V=R("qRkn"),E=R("dt0z"),T=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",u="\\u20d0-\\u20ff",s=e+t+u,c="["+s+"]",r=RegExp(c,"g");function h(n){return n=E(n),n&&n.replace(T,V).replace(r,"")}Se.exports=h},"U+yc":function(Se,ct){function R(V,E,T,e,t){var u={};return Object.keys(e).forEach(function(s){u[s]=e[s]}),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=T.slice().reverse().reduce(function(s,c){return c(V,E,s)||s},u),t&&u.initializer!==void 0&&(u.value=u.initializer?u.initializer.call(t):void 0,u.initializer=void 0),u.initializer===void 0&&(Object.defineProperty(V,E,u),u=null),u}Se.exports=R,Se.exports.default=Se.exports,Se.exports.__esModule=!0},U1ZX:function(Se,ct){},UB5X:function(Se,ct,R){var V=R("NykK"),E=R("ExA7"),T="[object Number]";function e(t){return typeof t=="number"||E(t)&&V(t)==T}Se.exports=e},Ucsi:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0});var V=Symbol.for("INJECTION");function E(s,c,r,h){function n(){return h&&!Reflect.hasMetadata(V,this,c)&&Reflect.defineMetadata(V,r(),this,c),Reflect.hasMetadata(V,this,c)?Reflect.getMetadata(V,this,c):r()}function i(a){Reflect.defineMetadata(V,a,this,c)}Object.defineProperty(s,c,{configurable:!0,enumerable:!0,get:n,set:i})}function T(s,c){return function(r){return function(h,n){var i=function(){return s.get(r)};E(h,n,i,c)}}}ct.makePropertyInjectDecorator=T;function e(s,c){return function(r,h){return function(n,i){var a=function(){return s.getNamed(r,h)};E(n,i,a,c)}}}ct.makePropertyInjectNamedDecorator=e;function t(s,c){return function(r,h,n){return function(i,a){var o=function(){return s.getTagged(r,h,n)};E(i,a,o,c)}}}ct.makePropertyInjectTaggedDecorator=t;function u(s,c){return function(r){return function(h,n){var i=function(){return s.getAll(r)};E(h,n,i,c)}}}ct.makePropertyMultiInjectDecorator=u},V1cb:function(Se,ct,R){"use strict";R.d(ct,"a",function(){return V});var V;(function(E){E.Hover="hover",E.Click="click",E.Select="select",E.Active="active",E.Drag="drag"})(V||(V={}))},VIsB:function(Se,ct,R){"use strict";R.d(ct,"a",function(){return u});var V=R("Hel2");function E(i,a){var o=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!o){if(Array.isArray(i)||(o=T(i))||a&&i&&typeof i.length=="number"){o&&(i=o);var l=0,f=function(){};return{s:f,n:function(){return l>=i.length?{done:!0}:{done:!1,value:i[l++]}},e:function(_){throw _},f}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v=!0,b=!1,g;return{s:function(){o=o.call(i)},n:function(){var _=o.next();return v=_.done,_},e:function(_){b=!0,g=_},f:function(){try{!v&&o.return!=null&&o.return()}finally{if(b)throw g}}}}function T(i,a){if(!!i){if(typeof i=="string")return e(i,a);var o=Object.prototype.toString.call(i).slice(8,-1);if(o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set")return Array.from(i);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return e(i,a)}}function e(i,a){(a==null||a>i.length)&&(a=i.length);for(var o=0,l=new Array(a);o<a;o++)l[o]=i[o];return l}var t=6378e3;function u(i,a){var o=i.dataArray,l=a.size,f=l===void 0?10:l,v=f/(2*Math.PI*t)*(256<<20)/2,b=s(o,f),g=b.gridHash,m=b.gridOffset,_=n(g,m,a);return{yOffset:v,xOffset:v,radius:v,type:"grid",dataArray:_}}function s(i,a){var o=Infinity,l=-Infinity,f,v=E(i),b;try{for(v.s();!(b=v.n()).done;){var g=b.value;f=g.coordinates[1],Number.isFinite(f)&&(o=f<o?f:o,l=f>l?f:l)}}catch(F){v.e(F)}finally{v.f()}var m=(o+l)/2,_=c(a,m);if(_.xOffset<=0||_.yOffset<=0)return{gridHash:{},gridOffset:_};var M={},x=E(i),y;try{for(x.s();!(y=x.n()).done;){var S=y.value,P=S.coordinates[1],A=S.coordinates[0];if(Number.isFinite(P)&&Number.isFinite(A)){var O=Math.floor((P+90)/_.yOffset),L=Math.floor((A+180)/_.xOffset),H="".concat(O,"-").concat(L);M[H]=M[H]||{count:0,points:[]},M[H].count+=1,M[H].points.push(S)}}}catch(F){x.e(F)}finally{x.f()}return{gridHash:M,gridOffset:_}}function c(i,a){var o=r(i),l=h(a,i);return{yOffset:o,xOffset:l}}function r(i){return i/t*(180/Math.PI)}function h(i,a){return a/t*(180/Math.PI)/Math.cos(i*Math.PI/180)}function n(i,a,o){return Object.keys(i).reduce(function(l,f,v){var b=f.split("-"),g=parseInt(b[0],10),m=parseInt(b[1],10),_={};if(o.field&&o.method){var M=V.c.getColumn(i[f].points,o.field);_[o.method]=V.c.statMap[o.method](M)}return Object.assign(_,{_id:v,coordinates:Object(V.d)([-180+a.xOffset*(m+.5),-90+a.yOffset*(g+.5)]),rawData:i[f].points,count:i[f].count}),l.push(_),l},[])}},VOtZ:function(Se,ct,R){var V=R("juv8"),E=R("MvSz");function T(e,t){return V(e,E(e),t)}Se.exports=T},VmRL:function(Se,ct,R){"use strict";Se.exports=V,Se.exports.default=V;function V(G,U,Y){Y=Y||2;var J=U&&U.length,rt=J?U[0]*Y:G.length,ft=E(G,0,rt,Y,!0),dt=[];if(!ft||ft.next===ft.prev)return dt;var ut,Lt,Ft,Ot,St,xt,At;if(J&&(ft=r(G,U,ft,Y)),G.length>80*Y){ut=Ft=G[0],Lt=Ot=G[1];for(var nt=Y;nt<rt;nt+=Y)St=G[nt],xt=G[nt+1],St<ut&&(ut=St),xt<Lt&&(Lt=xt),St>Ft&&(Ft=St),xt>Ot&&(Ot=xt);At=Math.max(Ft-ut,Ot-Lt),At=At!==0?1/At:0}return e(ft,dt,Y,ut,Lt,At),dt}function E(G,U,Y,J,rt){var ft,dt;if(rt===Z(G,U,Y,J)>0)for(ft=U;ft<Y;ft+=J)dt=L(ft,G[ft],G[ft+1],dt);else for(ft=Y-J;ft>=U;ft-=J)dt=L(ft,G[ft],G[ft+1],dt);return dt&&_(dt,dt.next)&&(H(dt),dt=dt.next),dt}function T(G,U){if(!G)return G;U||(U=G);var Y=G,J;do if(J=!1,!Y.steiner&&(_(Y,Y.next)||m(Y.prev,Y,Y.next)===0)){if(H(Y),Y=U=Y.prev,Y===Y.next)break;J=!0}else Y=Y.next;while(J||Y!==U);return U}function e(G,U,Y,J,rt,ft,dt){if(!!G){!dt&&ft&&o(G,J,rt,ft);for(var ut=G,Lt,Ft;G.prev!==G.next;){if(Lt=G.prev,Ft=G.next,ft?u(G,J,rt,ft):t(G)){U.push(Lt.i/Y),U.push(G.i/Y),U.push(Ft.i/Y),H(G),G=Ft.next,ut=Ft.next;continue}if(G=Ft,G===ut){dt?dt===1?(G=s(T(G),U,Y),e(G,U,Y,J,rt,ft,2)):dt===2&&c(G,U,Y,J,rt,ft):e(T(G),U,Y,J,rt,ft,1);break}}}}function t(G){var U=G.prev,Y=G,J=G.next;if(m(U,Y,J)>=0)return!1;for(var rt=G.next.next;rt!==G.prev;){if(b(U.x,U.y,Y.x,Y.y,J.x,J.y,rt.x,rt.y)&&m(rt.prev,rt,rt.next)>=0)return!1;rt=rt.next}return!0}function u(G,U,Y,J){var rt=G.prev,ft=G,dt=G.next;if(m(rt,ft,dt)>=0)return!1;for(var ut=rt.x<ft.x?rt.x<dt.x?rt.x:dt.x:ft.x<dt.x?ft.x:dt.x,Lt=rt.y<ft.y?rt.y<dt.y?rt.y:dt.y:ft.y<dt.y?ft.y:dt.y,Ft=rt.x>ft.x?rt.x>dt.x?rt.x:dt.x:ft.x>dt.x?ft.x:dt.x,Ot=rt.y>ft.y?rt.y>dt.y?rt.y:dt.y:ft.y>dt.y?ft.y:dt.y,St=f(ut,Lt,U,Y,J),xt=f(Ft,Ot,U,Y,J),At=G.prevZ,nt=G.nextZ;At&&At.z>=St&&nt&&nt.z<=xt;){if(At!==G.prev&&At!==G.next&&b(rt.x,rt.y,ft.x,ft.y,dt.x,dt.y,At.x,At.y)&&m(At.prev,At,At.next)>=0||(At=At.prevZ,nt!==G.prev&&nt!==G.next&&b(rt.x,rt.y,ft.x,ft.y,dt.x,dt.y,nt.x,nt.y)&&m(nt.prev,nt,nt.next)>=0))return!1;nt=nt.nextZ}for(;At&&At.z>=St;){if(At!==G.prev&&At!==G.next&&b(rt.x,rt.y,ft.x,ft.y,dt.x,dt.y,At.x,At.y)&&m(At.prev,At,At.next)>=0)return!1;At=At.prevZ}for(;nt&&nt.z<=xt;){if(nt!==G.prev&&nt!==G.next&&b(rt.x,rt.y,ft.x,ft.y,dt.x,dt.y,nt.x,nt.y)&&m(nt.prev,nt,nt.next)>=0)return!1;nt=nt.nextZ}return!0}function s(G,U,Y){var J=G;do{var rt=J.prev,ft=J.next.next;!_(rt,ft)&&M(rt,J,J.next,ft)&&P(rt,ft)&&P(ft,rt)&&(U.push(rt.i/Y),U.push(J.i/Y),U.push(ft.i/Y),H(J),H(J.next),J=G=ft),J=J.next}while(J!==G);return T(J)}function c(G,U,Y,J,rt,ft){var dt=G;do{for(var ut=dt.next.next;ut!==dt.prev;){if(dt.i!==ut.i&&g(dt,ut)){var Lt=O(dt,ut);dt=T(dt,dt.next),Lt=T(Lt,Lt.next),e(dt,U,Y,J,rt,ft),e(Lt,U,Y,J,rt,ft);return}ut=ut.next}dt=dt.next}while(dt!==G)}function r(G,U,Y,J){var rt=[],ft,dt,ut,Lt,Ft;for(ft=0,dt=U.length;ft<dt;ft++)ut=U[ft]*J,Lt=ft<dt-1?U[ft+1]*J:G.length,Ft=E(G,ut,Lt,J,!1),Ft===Ft.next&&(Ft.steiner=!0),rt.push(v(Ft));for(rt.sort(h),ft=0;ft<rt.length;ft++)n(rt[ft],Y),Y=T(Y,Y.next);return Y}function h(G,U){return G.x-U.x}function n(G,U){if(U=i(G,U),U){var Y=O(U,G);T(U,U.next),T(Y,Y.next)}}function i(G,U){var Y=U,J=G.x,rt=G.y,ft=-Infinity,dt;do{if(rt<=Y.y&&rt>=Y.next.y&&Y.next.y!==Y.y){var ut=Y.x+(rt-Y.y)*(Y.next.x-Y.x)/(Y.next.y-Y.y);if(ut<=J&&ut>ft){if(ft=ut,ut===J){if(rt===Y.y)return Y;if(rt===Y.next.y)return Y.next}dt=Y.x<Y.next.x?Y:Y.next}}Y=Y.next}while(Y!==U);if(!dt)return null;if(J===ft)return dt;var Lt=dt,Ft=dt.x,Ot=dt.y,St=Infinity,xt;Y=dt;do J>=Y.x&&Y.x>=Ft&&J!==Y.x&&b(rt<Ot?J:ft,rt,Ft,Ot,rt<Ot?ft:J,rt,Y.x,Y.y)&&(xt=Math.abs(rt-Y.y)/(J-Y.x),P(Y,G)&&(xt<St||xt===St&&(Y.x>dt.x||Y.x===dt.x&&a(dt,Y)))&&(dt=Y,St=xt)),Y=Y.next;while(Y!==Lt);return dt}function a(G,U){return m(G.prev,G,U.prev)<0&&m(U.next,G,G.next)<0}function o(G,U,Y,J){var rt=G;do rt.z===null&&(rt.z=f(rt.x,rt.y,U,Y,J)),rt.prevZ=rt.prev,rt.nextZ=rt.next,rt=rt.next;while(rt!==G);rt.prevZ.nextZ=null,rt.prevZ=null,l(rt)}function l(G){var U,Y,J,rt,ft,dt,ut,Lt,Ft=1;do{for(Y=G,G=null,ft=null,dt=0;Y;){for(dt++,J=Y,ut=0,U=0;U<Ft&&(ut++,J=J.nextZ,!!J);U++);for(Lt=Ft;ut>0||Lt>0&&J;)ut!==0&&(Lt===0||!J||Y.z<=J.z)?(rt=Y,Y=Y.nextZ,ut--):(rt=J,J=J.nextZ,Lt--),ft?ft.nextZ=rt:G=rt,rt.prevZ=ft,ft=rt;Y=J}ft.nextZ=null,Ft*=2}while(dt>1);return G}function f(G,U,Y,J,rt){return G=32767*(G-Y)*rt,U=32767*(U-J)*rt,G=(G|G<<8)&16711935,G=(G|G<<4)&252645135,G=(G|G<<2)&858993459,G=(G|G<<1)&1431655765,U=(U|U<<8)&16711935,U=(U|U<<4)&252645135,U=(U|U<<2)&858993459,U=(U|U<<1)&1431655765,G|U<<1}function v(G){var U=G,Y=G;do(U.x<Y.x||U.x===Y.x&&U.y<Y.y)&&(Y=U),U=U.next;while(U!==G);return Y}function b(G,U,Y,J,rt,ft,dt,ut){return(rt-dt)*(U-ut)-(G-dt)*(ft-ut)>=0&&(G-dt)*(J-ut)-(Y-dt)*(U-ut)>=0&&(Y-dt)*(ft-ut)-(rt-dt)*(J-ut)>=0}function g(G,U){return G.next.i!==U.i&&G.prev.i!==U.i&&!S(G,U)&&(P(G,U)&&P(U,G)&&A(G,U)&&(m(G.prev,G,U.prev)||m(G,U.prev,U))||_(G,U)&&m(G.prev,G,G.next)>0&&m(U.prev,U,U.next)>0)}function m(G,U,Y){return(U.y-G.y)*(Y.x-U.x)-(U.x-G.x)*(Y.y-U.y)}function _(G,U){return G.x===U.x&&G.y===U.y}function M(G,U,Y,J){var rt=y(m(G,U,Y)),ft=y(m(G,U,J)),dt=y(m(Y,J,G)),ut=y(m(Y,J,U));return!!(rt!==ft&&dt!==ut||rt===0&&x(G,Y,U)||ft===0&&x(G,J,U)||dt===0&&x(Y,G,J)||ut===0&&x(Y,U,J))}function x(G,U,Y){return U.x<=Math.max(G.x,Y.x)&&U.x>=Math.min(G.x,Y.x)&&U.y<=Math.max(G.y,Y.y)&&U.y>=Math.min(G.y,Y.y)}function y(G){return G>0?1:G<0?-1:0}function S(G,U){var Y=G;do{if(Y.i!==G.i&&Y.next.i!==G.i&&Y.i!==U.i&&Y.next.i!==U.i&&M(Y,Y.next,G,U))return!0;Y=Y.next}while(Y!==G);return!1}function P(G,U){return m(G.prev,G,G.next)<0?m(G,U,G.next)>=0&&m(G,G.prev,U)>=0:m(G,U,G.prev)<0||m(G,G.next,U)<0}function A(G,U){var Y=G,J=!1,rt=(G.x+U.x)/2,ft=(G.y+U.y)/2;do Y.y>ft!=Y.next.y>ft&&Y.next.y!==Y.y&&rt<(Y.next.x-Y.x)*(ft-Y.y)/(Y.next.y-Y.y)+Y.x&&(J=!J),Y=Y.next;while(Y!==G);return J}function O(G,U){var Y=new F(G.i,G.x,G.y),J=new F(U.i,U.x,U.y),rt=G.next,ft=U.prev;return G.next=U,U.prev=G,Y.next=rt,rt.prev=Y,J.next=Y,Y.prev=J,ft.next=J,J.prev=ft,J}function L(G,U,Y,J){var rt=new F(G,U,Y);return J?(rt.next=J.next,rt.prev=J,J.next.prev=rt,J.next=rt):(rt.prev=rt,rt.next=rt),rt}function H(G){G.next.prev=G.prev,G.prev.next=G.next,G.prevZ&&(G.prevZ.nextZ=G.nextZ),G.nextZ&&(G.nextZ.prevZ=G.prevZ)}function F(G,U,Y){this.i=G,this.x=U,this.y=Y,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}V.deviation=function(G,U,Y,J){var rt=U&&U.length,ft=rt?U[0]*Y:G.length,dt=Math.abs(Z(G,0,ft,Y));if(rt)for(var ut=0,Lt=U.length;ut<Lt;ut++){var Ft=U[ut]*Y,Ot=ut<Lt-1?U[ut+1]*Y:G.length;dt-=Math.abs(Z(G,Ft,Ot,Y))}var St=0;for(ut=0;ut<J.length;ut+=3){var xt=J[ut]*Y,At=J[ut+1]*Y,nt=J[ut+2]*Y;St+=Math.abs((G[xt]-G[nt])*(G[At+1]-G[xt+1])-(G[xt]-G[At])*(G[nt+1]-G[xt+1]))}return dt===0&&St===0?0:Math.abs((St-dt)/dt)};function Z(G,U,Y,J){for(var rt=0,ft=U,dt=Y-J;ft<Y;ft+=J)rt+=(G[dt]-G[ft])*(G[ft+1]+G[dt+1]),dt=ft;return rt}V.flatten=function(G){for(var U=G[0][0].length,Y={vertices:[],holes:[],dimensions:U},J=0,rt=0;rt<G.length;rt++){for(var ft=0;ft<G[rt].length;ft++)for(var dt=0;dt<U;dt++)Y.vertices.push(G[rt][ft][dt]);rt>0&&(J+=G[rt-1].length,Y.holes.push(J))}return Y}},W8MJ:function(Se,ct){function R(E,T){for(var e=0;e<T.length;e++){var t=T[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(E,t.key,t)}}function V(E,T,e){return T&&R(E.prototype,T),e&&R(E,e),E}Se.exports=V,Se.exports.default=Se.exports,Se.exports.__esModule=!0},WFAs:function(Se,ct){var R=Array.isArray;Se.exports=R},WwFo:function(Se,ct,R){var V=R("juv8"),E=R("7GkX");function T(e,t){return e&&V(t,E(t),e)}Se.exports=T},XYm9:function(Se,ct,R){var V=R("+K+b");function E(T,e){var t=e?V(T.buffer):T.buffer;return new T.constructor(t,T.byteOffset,T.byteLength)}Se.exports=E},"Xt/L":function(Se,ct){function R(V,E,T){for(var e=-1,t=V==null?0:V.length;++e<t;)if(T(E,V[e]))return!0;return!1}Se.exports=R},Y8BV:function(Se,ct,R){"use strict";R.d(ct,"a",function(){return V});function V(E,T){var e=T.callback;return e&&(E.dataArray=E.dataArray.filter(e)),E}},YO3V:function(Se,ct,R){var V=R("NykK"),E=R("LcsW"),T=R("ExA7"),e="[object Object]",t=Function.prototype,u=Object.prototype,s=t.toString,c=u.hasOwnProperty,r=s.call(Object);function h(n){if(!T(n)||V(n)!=e)return!1;var i=E(n);if(i===null)return!0;var a=c.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&s.call(a)==r}Se.exports=h},Yk9n:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.inject=ct.LazyServiceIdentifer=void 0;var V=R("MON2"),E=R("xfSm"),T=R("GXnB"),e=R("Ztfv"),t=function(){function s(c){this._cb=c}return s.prototype.unwrap=function(){return this._cb()},s}();ct.LazyServiceIdentifer=t;function u(s){return function(c,r,h){if(s===void 0)throw new Error(V.UNDEFINED_INJECT_ANNOTATION(c.name));var n=new T.Metadata(E.INJECT_TAG,s);typeof h=="number"?e.tagParameter(c,r,h,n):e.tagProperty(c,r,n)}}ct.inject=u},Z1HP:function(Se,ct,R){var V=R("ycre"),E=R("quyA"),T=R("q4HE");function e(t){return E(t)?T(t):V(t)}Se.exports=e},ZCgT:function(Se,ct,R){var V=R("tLB3"),E=1/0,T=17976931348623157e292;function e(t){if(!t)return t===0?t:0;if(t=V(t),t===E||t===-E){var u=t<0?-1:1;return u*T}return t===t?t:0}Se.exports=e},ZK94:function(Se,ct){Se.exports.RADIUS=6378137,Se.exports.FLATTENING=1/298.257223563,Se.exports.POLAR_RADIUS=63567523142e-4},ZaHm:function(Se,ct,R){"use strict";R.r(ct),R.d(ct,"create",function(){return E}),R.d(ct,"clone",function(){return T}),R.d(ct,"copy",function(){return e}),R.d(ct,"fromValues",function(){return t}),R.d(ct,"set",function(){return u}),R.d(ct,"identity",function(){return s}),R.d(ct,"transpose",function(){return c}),R.d(ct,"invert",function(){return r}),R.d(ct,"adjoint",function(){return h}),R.d(ct,"determinant",function(){return n}),R.d(ct,"multiply",function(){return i}),R.d(ct,"translate",function(){return a}),R.d(ct,"scale",function(){return o}),R.d(ct,"rotate",function(){return l}),R.d(ct,"rotateX",function(){return f}),R.d(ct,"rotateY",function(){return v}),R.d(ct,"rotateZ",function(){return b}),R.d(ct,"fromTranslation",function(){return g}),R.d(ct,"fromScaling",function(){return m}),R.d(ct,"fromRotation",function(){return _}),R.d(ct,"fromXRotation",function(){return M}),R.d(ct,"fromYRotation",function(){return x}),R.d(ct,"fromZRotation",function(){return y}),R.d(ct,"fromRotationTranslation",function(){return S}),R.d(ct,"fromQuat2",function(){return P}),R.d(ct,"getTranslation",function(){return A}),R.d(ct,"getScaling",function(){return O}),R.d(ct,"getRotation",function(){return L}),R.d(ct,"fromRotationTranslationScale",function(){return H}),R.d(ct,"fromRotationTranslationScaleOrigin",function(){return F}),R.d(ct,"fromQuat",function(){return Z}),R.d(ct,"frustum",function(){return G}),R.d(ct,"perspective",function(){return U}),R.d(ct,"perspectiveFromFieldOfView",function(){return Y}),R.d(ct,"ortho",function(){return J}),R.d(ct,"lookAt",function(){return rt}),R.d(ct,"targetTo",function(){return ft}),R.d(ct,"str",function(){return dt}),R.d(ct,"frob",function(){return ut}),R.d(ct,"add",function(){return Lt}),R.d(ct,"subtract",function(){return Ft}),R.d(ct,"multiplyScalar",function(){return Ot}),R.d(ct,"multiplyScalarAndAdd",function(){return St}),R.d(ct,"exactEquals",function(){return xt}),R.d(ct,"equals",function(){return At}),R.d(ct,"mul",function(){return nt}),R.d(ct,"sub",function(){return Mt});var V=R("yU0y");function E(){var z=new V.a(16);return V.a!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[11]=0,z[12]=0,z[13]=0,z[14]=0),z[0]=1,z[5]=1,z[10]=1,z[15]=1,z}function T(z){var Q=new V.a(16);return Q[0]=z[0],Q[1]=z[1],Q[2]=z[2],Q[3]=z[3],Q[4]=z[4],Q[5]=z[5],Q[6]=z[6],Q[7]=z[7],Q[8]=z[8],Q[9]=z[9],Q[10]=z[10],Q[11]=z[11],Q[12]=z[12],Q[13]=z[13],Q[14]=z[14],Q[15]=z[15],Q}function e(z,Q){return z[0]=Q[0],z[1]=Q[1],z[2]=Q[2],z[3]=Q[3],z[4]=Q[4],z[5]=Q[5],z[6]=Q[6],z[7]=Q[7],z[8]=Q[8],z[9]=Q[9],z[10]=Q[10],z[11]=Q[11],z[12]=Q[12],z[13]=Q[13],z[14]=Q[14],z[15]=Q[15],z}function t(z,Q,ht,et,at,gt,k,ot,it,X,Et,vt,Nt,$t,ee,kt){var Wt=new V.a(16);return Wt[0]=z,Wt[1]=Q,Wt[2]=ht,Wt[3]=et,Wt[4]=at,Wt[5]=gt,Wt[6]=k,Wt[7]=ot,Wt[8]=it,Wt[9]=X,Wt[10]=Et,Wt[11]=vt,Wt[12]=Nt,Wt[13]=$t,Wt[14]=ee,Wt[15]=kt,Wt}function u(z,Q,ht,et,at,gt,k,ot,it,X,Et,vt,Nt,$t,ee,kt,Wt){return z[0]=Q,z[1]=ht,z[2]=et,z[3]=at,z[4]=gt,z[5]=k,z[6]=ot,z[7]=it,z[8]=X,z[9]=Et,z[10]=vt,z[11]=Nt,z[12]=$t,z[13]=ee,z[14]=kt,z[15]=Wt,z}function s(z){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function c(z,Q){if(z===Q){var ht=Q[1],et=Q[2],at=Q[3],gt=Q[6],k=Q[7],ot=Q[11];z[1]=Q[4],z[2]=Q[8],z[3]=Q[12],z[4]=ht,z[6]=Q[9],z[7]=Q[13],z[8]=et,z[9]=gt,z[11]=Q[14],z[12]=at,z[13]=k,z[14]=ot}else z[0]=Q[0],z[1]=Q[4],z[2]=Q[8],z[3]=Q[12],z[4]=Q[1],z[5]=Q[5],z[6]=Q[9],z[7]=Q[13],z[8]=Q[2],z[9]=Q[6],z[10]=Q[10],z[11]=Q[14],z[12]=Q[3],z[13]=Q[7],z[14]=Q[11],z[15]=Q[15];return z}function r(z,Q){var ht=Q[0],et=Q[1],at=Q[2],gt=Q[3],k=Q[4],ot=Q[5],it=Q[6],X=Q[7],Et=Q[8],vt=Q[9],Nt=Q[10],$t=Q[11],ee=Q[12],kt=Q[13],Wt=Q[14],ae=Q[15],le=ht*ot-et*k,je=ht*it-at*k,Oe=ht*X-gt*k,We=et*it-at*ot,Ye=et*X-gt*ot,wn=at*X-gt*it,er=Et*kt-vt*ee,wr=Et*Wt-Nt*ee,on=Et*ae-$t*ee,en=vt*Wt-Nt*kt,An=vt*ae-$t*kt,jn=Nt*ae-$t*Wt,pr=le*jn-je*An+Oe*en+We*on-Ye*wr+wn*er;return pr?(pr=1/pr,z[0]=(ot*jn-it*An+X*en)*pr,z[1]=(at*An-et*jn-gt*en)*pr,z[2]=(kt*wn-Wt*Ye+ae*We)*pr,z[3]=(Nt*Ye-vt*wn-$t*We)*pr,z[4]=(it*on-k*jn-X*wr)*pr,z[5]=(ht*jn-at*on+gt*wr)*pr,z[6]=(Wt*Oe-ee*wn-ae*je)*pr,z[7]=(Et*wn-Nt*Oe+$t*je)*pr,z[8]=(k*An-ot*on+X*er)*pr,z[9]=(et*on-ht*An-gt*er)*pr,z[10]=(ee*Ye-kt*Oe+ae*le)*pr,z[11]=(vt*Oe-Et*Ye-$t*le)*pr,z[12]=(ot*wr-k*en-it*er)*pr,z[13]=(ht*en-et*wr+at*er)*pr,z[14]=(kt*je-ee*We-Wt*le)*pr,z[15]=(Et*We-vt*je+Nt*le)*pr,z):null}function h(z,Q){var ht=Q[0],et=Q[1],at=Q[2],gt=Q[3],k=Q[4],ot=Q[5],it=Q[6],X=Q[7],Et=Q[8],vt=Q[9],Nt=Q[10],$t=Q[11],ee=Q[12],kt=Q[13],Wt=Q[14],ae=Q[15];return z[0]=ot*(Nt*ae-$t*Wt)-vt*(it*ae-X*Wt)+kt*(it*$t-X*Nt),z[1]=-(et*(Nt*ae-$t*Wt)-vt*(at*ae-gt*Wt)+kt*(at*$t-gt*Nt)),z[2]=et*(it*ae-X*Wt)-ot*(at*ae-gt*Wt)+kt*(at*X-gt*it),z[3]=-(et*(it*$t-X*Nt)-ot*(at*$t-gt*Nt)+vt*(at*X-gt*it)),z[4]=-(k*(Nt*ae-$t*Wt)-Et*(it*ae-X*Wt)+ee*(it*$t-X*Nt)),z[5]=ht*(Nt*ae-$t*Wt)-Et*(at*ae-gt*Wt)+ee*(at*$t-gt*Nt),z[6]=-(ht*(it*ae-X*Wt)-k*(at*ae-gt*Wt)+ee*(at*X-gt*it)),z[7]=ht*(it*$t-X*Nt)-k*(at*$t-gt*Nt)+Et*(at*X-gt*it),z[8]=k*(vt*ae-$t*kt)-Et*(ot*ae-X*kt)+ee*(ot*$t-X*vt),z[9]=-(ht*(vt*ae-$t*kt)-Et*(et*ae-gt*kt)+ee*(et*$t-gt*vt)),z[10]=ht*(ot*ae-X*kt)-k*(et*ae-gt*kt)+ee*(et*X-gt*ot),z[11]=-(ht*(ot*$t-X*vt)-k*(et*$t-gt*vt)+Et*(et*X-gt*ot)),z[12]=-(k*(vt*Wt-Nt*kt)-Et*(ot*Wt-it*kt)+ee*(ot*Nt-it*vt)),z[13]=ht*(vt*Wt-Nt*kt)-Et*(et*Wt-at*kt)+ee*(et*Nt-at*vt),z[14]=-(ht*(ot*Wt-it*kt)-k*(et*Wt-at*kt)+ee*(et*it-at*ot)),z[15]=ht*(ot*Nt-it*vt)-k*(et*Nt-at*vt)+Et*(et*it-at*ot),z}function n(z){var Q=z[0],ht=z[1],et=z[2],at=z[3],gt=z[4],k=z[5],ot=z[6],it=z[7],X=z[8],Et=z[9],vt=z[10],Nt=z[11],$t=z[12],ee=z[13],kt=z[14],Wt=z[15],ae=Q*k-ht*gt,le=Q*ot-et*gt,je=Q*it-at*gt,Oe=ht*ot-et*k,We=ht*it-at*k,Ye=et*it-at*ot,wn=X*ee-Et*$t,er=X*kt-vt*$t,wr=X*Wt-Nt*$t,on=Et*kt-vt*ee,en=Et*Wt-Nt*ee,An=vt*Wt-Nt*kt;return ae*An-le*en+je*on+Oe*wr-We*er+Ye*wn}function i(z,Q,ht){var et=Q[0],at=Q[1],gt=Q[2],k=Q[3],ot=Q[4],it=Q[5],X=Q[6],Et=Q[7],vt=Q[8],Nt=Q[9],$t=Q[10],ee=Q[11],kt=Q[12],Wt=Q[13],ae=Q[14],le=Q[15],je=ht[0],Oe=ht[1],We=ht[2],Ye=ht[3];return z[0]=je*et+Oe*ot+We*vt+Ye*kt,z[1]=je*at+Oe*it+We*Nt+Ye*Wt,z[2]=je*gt+Oe*X+We*$t+Ye*ae,z[3]=je*k+Oe*Et+We*ee+Ye*le,je=ht[4],Oe=ht[5],We=ht[6],Ye=ht[7],z[4]=je*et+Oe*ot+We*vt+Ye*kt,z[5]=je*at+Oe*it+We*Nt+Ye*Wt,z[6]=je*gt+Oe*X+We*$t+Ye*ae,z[7]=je*k+Oe*Et+We*ee+Ye*le,je=ht[8],Oe=ht[9],We=ht[10],Ye=ht[11],z[8]=je*et+Oe*ot+We*vt+Ye*kt,z[9]=je*at+Oe*it+We*Nt+Ye*Wt,z[10]=je*gt+Oe*X+We*$t+Ye*ae,z[11]=je*k+Oe*Et+We*ee+Ye*le,je=ht[12],Oe=ht[13],We=ht[14],Ye=ht[15],z[12]=je*et+Oe*ot+We*vt+Ye*kt,z[13]=je*at+Oe*it+We*Nt+Ye*Wt,z[14]=je*gt+Oe*X+We*$t+Ye*ae,z[15]=je*k+Oe*Et+We*ee+Ye*le,z}function a(z,Q,ht){var et=ht[0],at=ht[1],gt=ht[2],k,ot,it,X,Et,vt,Nt,$t,ee,kt,Wt,ae;return Q===z?(z[12]=Q[0]*et+Q[4]*at+Q[8]*gt+Q[12],z[13]=Q[1]*et+Q[5]*at+Q[9]*gt+Q[13],z[14]=Q[2]*et+Q[6]*at+Q[10]*gt+Q[14],z[15]=Q[3]*et+Q[7]*at+Q[11]*gt+Q[15]):(k=Q[0],ot=Q[1],it=Q[2],X=Q[3],Et=Q[4],vt=Q[5],Nt=Q[6],$t=Q[7],ee=Q[8],kt=Q[9],Wt=Q[10],ae=Q[11],z[0]=k,z[1]=ot,z[2]=it,z[3]=X,z[4]=Et,z[5]=vt,z[6]=Nt,z[7]=$t,z[8]=ee,z[9]=kt,z[10]=Wt,z[11]=ae,z[12]=k*et+Et*at+ee*gt+Q[12],z[13]=ot*et+vt*at+kt*gt+Q[13],z[14]=it*et+Nt*at+Wt*gt+Q[14],z[15]=X*et+$t*at+ae*gt+Q[15]),z}function o(z,Q,ht){var et=ht[0],at=ht[1],gt=ht[2];return z[0]=Q[0]*et,z[1]=Q[1]*et,z[2]=Q[2]*et,z[3]=Q[3]*et,z[4]=Q[4]*at,z[5]=Q[5]*at,z[6]=Q[6]*at,z[7]=Q[7]*at,z[8]=Q[8]*gt,z[9]=Q[9]*gt,z[10]=Q[10]*gt,z[11]=Q[11]*gt,z[12]=Q[12],z[13]=Q[13],z[14]=Q[14],z[15]=Q[15],z}function l(z,Q,ht,et){var at=et[0],gt=et[1],k=et[2],ot=Math.hypot(at,gt,k),it,X,Et,vt,Nt,$t,ee,kt,Wt,ae,le,je,Oe,We,Ye,wn,er,wr,on,en,An,jn,pr,di;return ot<V.b?null:(ot=1/ot,at*=ot,gt*=ot,k*=ot,it=Math.sin(ht),X=Math.cos(ht),Et=1-X,vt=Q[0],Nt=Q[1],$t=Q[2],ee=Q[3],kt=Q[4],Wt=Q[5],ae=Q[6],le=Q[7],je=Q[8],Oe=Q[9],We=Q[10],Ye=Q[11],wn=at*at*Et+X,er=gt*at*Et+k*it,wr=k*at*Et-gt*it,on=at*gt*Et-k*it,en=gt*gt*Et+X,An=k*gt*Et+at*it,jn=at*k*Et+gt*it,pr=gt*k*Et-at*it,di=k*k*Et+X,z[0]=vt*wn+kt*er+je*wr,z[1]=Nt*wn+Wt*er+Oe*wr,z[2]=$t*wn+ae*er+We*wr,z[3]=ee*wn+le*er+Ye*wr,z[4]=vt*on+kt*en+je*An,z[5]=Nt*on+Wt*en+Oe*An,z[6]=$t*on+ae*en+We*An,z[7]=ee*on+le*en+Ye*An,z[8]=vt*jn+kt*pr+je*di,z[9]=Nt*jn+Wt*pr+Oe*di,z[10]=$t*jn+ae*pr+We*di,z[11]=ee*jn+le*pr+Ye*di,Q!==z&&(z[12]=Q[12],z[13]=Q[13],z[14]=Q[14],z[15]=Q[15]),z)}function f(z,Q,ht){var et=Math.sin(ht),at=Math.cos(ht),gt=Q[4],k=Q[5],ot=Q[6],it=Q[7],X=Q[8],Et=Q[9],vt=Q[10],Nt=Q[11];return Q!==z&&(z[0]=Q[0],z[1]=Q[1],z[2]=Q[2],z[3]=Q[3],z[12]=Q[12],z[13]=Q[13],z[14]=Q[14],z[15]=Q[15]),z[4]=gt*at+X*et,z[5]=k*at+Et*et,z[6]=ot*at+vt*et,z[7]=it*at+Nt*et,z[8]=X*at-gt*et,z[9]=Et*at-k*et,z[10]=vt*at-ot*et,z[11]=Nt*at-it*et,z}function v(z,Q,ht){var et=Math.sin(ht),at=Math.cos(ht),gt=Q[0],k=Q[1],ot=Q[2],it=Q[3],X=Q[8],Et=Q[9],vt=Q[10],Nt=Q[11];return Q!==z&&(z[4]=Q[4],z[5]=Q[5],z[6]=Q[6],z[7]=Q[7],z[12]=Q[12],z[13]=Q[13],z[14]=Q[14],z[15]=Q[15]),z[0]=gt*at-X*et,z[1]=k*at-Et*et,z[2]=ot*at-vt*et,z[3]=it*at-Nt*et,z[8]=gt*et+X*at,z[9]=k*et+Et*at,z[10]=ot*et+vt*at,z[11]=it*et+Nt*at,z}function b(z,Q,ht){var et=Math.sin(ht),at=Math.cos(ht),gt=Q[0],k=Q[1],ot=Q[2],it=Q[3],X=Q[4],Et=Q[5],vt=Q[6],Nt=Q[7];return Q!==z&&(z[8]=Q[8],z[9]=Q[9],z[10]=Q[10],z[11]=Q[11],z[12]=Q[12],z[13]=Q[13],z[14]=Q[14],z[15]=Q[15]),z[0]=gt*at+X*et,z[1]=k*at+Et*et,z[2]=ot*at+vt*et,z[3]=it*at+Nt*et,z[4]=X*at-gt*et,z[5]=Et*at-k*et,z[6]=vt*at-ot*et,z[7]=Nt*at-it*et,z}function g(z,Q){return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=Q[0],z[13]=Q[1],z[14]=Q[2],z[15]=1,z}function m(z,Q){return z[0]=Q[0],z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=Q[1],z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=Q[2],z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function _(z,Q,ht){var et=ht[0],at=ht[1],gt=ht[2],k=Math.hypot(et,at,gt),ot,it,X;return k<V.b?null:(k=1/k,et*=k,at*=k,gt*=k,ot=Math.sin(Q),it=Math.cos(Q),X=1-it,z[0]=et*et*X+it,z[1]=at*et*X+gt*ot,z[2]=gt*et*X-at*ot,z[3]=0,z[4]=et*at*X-gt*ot,z[5]=at*at*X+it,z[6]=gt*at*X+et*ot,z[7]=0,z[8]=et*gt*X+at*ot,z[9]=at*gt*X-et*ot,z[10]=gt*gt*X+it,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z)}function M(z,Q){var ht=Math.sin(Q),et=Math.cos(Q);return z[0]=1,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=et,z[6]=ht,z[7]=0,z[8]=0,z[9]=-ht,z[10]=et,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function x(z,Q){var ht=Math.sin(Q),et=Math.cos(Q);return z[0]=et,z[1]=0,z[2]=-ht,z[3]=0,z[4]=0,z[5]=1,z[6]=0,z[7]=0,z[8]=ht,z[9]=0,z[10]=et,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function y(z,Q){var ht=Math.sin(Q),et=Math.cos(Q);return z[0]=et,z[1]=ht,z[2]=0,z[3]=0,z[4]=-ht,z[5]=et,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=1,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function S(z,Q,ht){var et=Q[0],at=Q[1],gt=Q[2],k=Q[3],ot=et+et,it=at+at,X=gt+gt,Et=et*ot,vt=et*it,Nt=et*X,$t=at*it,ee=at*X,kt=gt*X,Wt=k*ot,ae=k*it,le=k*X;return z[0]=1-($t+kt),z[1]=vt+le,z[2]=Nt-ae,z[3]=0,z[4]=vt-le,z[5]=1-(Et+kt),z[6]=ee+Wt,z[7]=0,z[8]=Nt+ae,z[9]=ee-Wt,z[10]=1-(Et+$t),z[11]=0,z[12]=ht[0],z[13]=ht[1],z[14]=ht[2],z[15]=1,z}function P(z,Q){var ht=new V.a(3),et=-Q[0],at=-Q[1],gt=-Q[2],k=Q[3],ot=Q[4],it=Q[5],X=Q[6],Et=Q[7],vt=et*et+at*at+gt*gt+k*k;return vt>0?(ht[0]=(ot*k+Et*et+it*gt-X*at)*2/vt,ht[1]=(it*k+Et*at+X*et-ot*gt)*2/vt,ht[2]=(X*k+Et*gt+ot*at-it*et)*2/vt):(ht[0]=(ot*k+Et*et+it*gt-X*at)*2,ht[1]=(it*k+Et*at+X*et-ot*gt)*2,ht[2]=(X*k+Et*gt+ot*at-it*et)*2),S(z,Q,ht),z}function A(z,Q){return z[0]=Q[12],z[1]=Q[13],z[2]=Q[14],z}function O(z,Q){var ht=Q[0],et=Q[1],at=Q[2],gt=Q[4],k=Q[5],ot=Q[6],it=Q[8],X=Q[9],Et=Q[10];return z[0]=Math.hypot(ht,et,at),z[1]=Math.hypot(gt,k,ot),z[2]=Math.hypot(it,X,Et),z}function L(z,Q){var ht=new V.a(3);O(ht,Q);var et=1/ht[0],at=1/ht[1],gt=1/ht[2],k=Q[0]*et,ot=Q[1]*at,it=Q[2]*gt,X=Q[4]*et,Et=Q[5]*at,vt=Q[6]*gt,Nt=Q[8]*et,$t=Q[9]*at,ee=Q[10]*gt,kt=k+Et+ee,Wt=0;return kt>0?(Wt=Math.sqrt(kt+1)*2,z[3]=.25*Wt,z[0]=(vt-$t)/Wt,z[1]=(Nt-it)/Wt,z[2]=(ot-X)/Wt):k>Et&&k>ee?(Wt=Math.sqrt(1+k-Et-ee)*2,z[3]=(vt-$t)/Wt,z[0]=.25*Wt,z[1]=(ot+X)/Wt,z[2]=(Nt+it)/Wt):Et>ee?(Wt=Math.sqrt(1+Et-k-ee)*2,z[3]=(Nt-it)/Wt,z[0]=(ot+X)/Wt,z[1]=.25*Wt,z[2]=(vt+$t)/Wt):(Wt=Math.sqrt(1+ee-k-Et)*2,z[3]=(ot-X)/Wt,z[0]=(Nt+it)/Wt,z[1]=(vt+$t)/Wt,z[2]=.25*Wt),z}function H(z,Q,ht,et){var at=Q[0],gt=Q[1],k=Q[2],ot=Q[3],it=at+at,X=gt+gt,Et=k+k,vt=at*it,Nt=at*X,$t=at*Et,ee=gt*X,kt=gt*Et,Wt=k*Et,ae=ot*it,le=ot*X,je=ot*Et,Oe=et[0],We=et[1],Ye=et[2];return z[0]=(1-(ee+Wt))*Oe,z[1]=(Nt+je)*Oe,z[2]=($t-le)*Oe,z[3]=0,z[4]=(Nt-je)*We,z[5]=(1-(vt+Wt))*We,z[6]=(kt+ae)*We,z[7]=0,z[8]=($t+le)*Ye,z[9]=(kt-ae)*Ye,z[10]=(1-(vt+ee))*Ye,z[11]=0,z[12]=ht[0],z[13]=ht[1],z[14]=ht[2],z[15]=1,z}function F(z,Q,ht,et,at){var gt=Q[0],k=Q[1],ot=Q[2],it=Q[3],X=gt+gt,Et=k+k,vt=ot+ot,Nt=gt*X,$t=gt*Et,ee=gt*vt,kt=k*Et,Wt=k*vt,ae=ot*vt,le=it*X,je=it*Et,Oe=it*vt,We=et[0],Ye=et[1],wn=et[2],er=at[0],wr=at[1],on=at[2],en=(1-(kt+ae))*We,An=($t+Oe)*We,jn=(ee-je)*We,pr=($t-Oe)*Ye,di=(1-(Nt+ae))*Ye,Ce=(Wt+le)*Ye,Me=(ee+je)*wn,Qt=(Wt-le)*wn,pe=(1-(Nt+kt))*wn;return z[0]=en,z[1]=An,z[2]=jn,z[3]=0,z[4]=pr,z[5]=di,z[6]=Ce,z[7]=0,z[8]=Me,z[9]=Qt,z[10]=pe,z[11]=0,z[12]=ht[0]+er-(en*er+pr*wr+Me*on),z[13]=ht[1]+wr-(An*er+di*wr+Qt*on),z[14]=ht[2]+on-(jn*er+Ce*wr+pe*on),z[15]=1,z}function Z(z,Q){var ht=Q[0],et=Q[1],at=Q[2],gt=Q[3],k=ht+ht,ot=et+et,it=at+at,X=ht*k,Et=et*k,vt=et*ot,Nt=at*k,$t=at*ot,ee=at*it,kt=gt*k,Wt=gt*ot,ae=gt*it;return z[0]=1-vt-ee,z[1]=Et+ae,z[2]=Nt-Wt,z[3]=0,z[4]=Et-ae,z[5]=1-X-ee,z[6]=$t+kt,z[7]=0,z[8]=Nt+Wt,z[9]=$t-kt,z[10]=1-X-vt,z[11]=0,z[12]=0,z[13]=0,z[14]=0,z[15]=1,z}function G(z,Q,ht,et,at,gt,k){var ot=1/(ht-Q),it=1/(at-et),X=1/(gt-k);return z[0]=gt*2*ot,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=gt*2*it,z[6]=0,z[7]=0,z[8]=(ht+Q)*ot,z[9]=(at+et)*it,z[10]=(k+gt)*X,z[11]=-1,z[12]=0,z[13]=0,z[14]=k*gt*2*X,z[15]=0,z}function U(z,Q,ht,et,at){var gt=1/Math.tan(Q/2),k;return z[0]=gt/ht,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=gt,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[11]=-1,z[12]=0,z[13]=0,z[15]=0,at!=null&&at!==Infinity?(k=1/(et-at),z[10]=(at+et)*k,z[14]=2*at*et*k):(z[10]=-1,z[14]=-2*et),z}function Y(z,Q,ht,et){var at=Math.tan(Q.upDegrees*Math.PI/180),gt=Math.tan(Q.downDegrees*Math.PI/180),k=Math.tan(Q.leftDegrees*Math.PI/180),ot=Math.tan(Q.rightDegrees*Math.PI/180),it=2/(k+ot),X=2/(at+gt);return z[0]=it,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=X,z[6]=0,z[7]=0,z[8]=-((k-ot)*it*.5),z[9]=(at-gt)*X*.5,z[10]=et/(ht-et),z[11]=-1,z[12]=0,z[13]=0,z[14]=et*ht/(ht-et),z[15]=0,z}function J(z,Q,ht,et,at,gt,k){var ot=1/(Q-ht),it=1/(et-at),X=1/(gt-k);return z[0]=-2*ot,z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[5]=-2*it,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[10]=2*X,z[11]=0,z[12]=(Q+ht)*ot,z[13]=(at+et)*it,z[14]=(k+gt)*X,z[15]=1,z}function rt(z,Q,ht,et){var at,gt,k,ot,it,X,Et,vt,Nt,$t,ee=Q[0],kt=Q[1],Wt=Q[2],ae=et[0],le=et[1],je=et[2],Oe=ht[0],We=ht[1],Ye=ht[2];return Math.abs(ee-Oe)<V.b&&Math.abs(kt-We)<V.b&&Math.abs(Wt-Ye)<V.b?s(z):(Et=ee-Oe,vt=kt-We,Nt=Wt-Ye,$t=1/Math.hypot(Et,vt,Nt),Et*=$t,vt*=$t,Nt*=$t,at=le*Nt-je*vt,gt=je*Et-ae*Nt,k=ae*vt-le*Et,$t=Math.hypot(at,gt,k),$t?($t=1/$t,at*=$t,gt*=$t,k*=$t):(at=0,gt=0,k=0),ot=vt*k-Nt*gt,it=Nt*at-Et*k,X=Et*gt-vt*at,$t=Math.hypot(ot,it,X),$t?($t=1/$t,ot*=$t,it*=$t,X*=$t):(ot=0,it=0,X=0),z[0]=at,z[1]=ot,z[2]=Et,z[3]=0,z[4]=gt,z[5]=it,z[6]=vt,z[7]=0,z[8]=k,z[9]=X,z[10]=Nt,z[11]=0,z[12]=-(at*ee+gt*kt+k*Wt),z[13]=-(ot*ee+it*kt+X*Wt),z[14]=-(Et*ee+vt*kt+Nt*Wt),z[15]=1,z)}function ft(z,Q,ht,et){var at=Q[0],gt=Q[1],k=Q[2],ot=et[0],it=et[1],X=et[2],Et=at-ht[0],vt=gt-ht[1],Nt=k-ht[2],$t=Et*Et+vt*vt+Nt*Nt;$t>0&&($t=1/Math.sqrt($t),Et*=$t,vt*=$t,Nt*=$t);var ee=it*Nt-X*vt,kt=X*Et-ot*Nt,Wt=ot*vt-it*Et;return $t=ee*ee+kt*kt+Wt*Wt,$t>0&&($t=1/Math.sqrt($t),ee*=$t,kt*=$t,Wt*=$t),z[0]=ee,z[1]=kt,z[2]=Wt,z[3]=0,z[4]=vt*Wt-Nt*kt,z[5]=Nt*ee-Et*Wt,z[6]=Et*kt-vt*ee,z[7]=0,z[8]=Et,z[9]=vt,z[10]=Nt,z[11]=0,z[12]=at,z[13]=gt,z[14]=k,z[15]=1,z}function dt(z){return"mat4("+z[0]+", "+z[1]+", "+z[2]+", "+z[3]+", "+z[4]+", "+z[5]+", "+z[6]+", "+z[7]+", "+z[8]+", "+z[9]+", "+z[10]+", "+z[11]+", "+z[12]+", "+z[13]+", "+z[14]+", "+z[15]+")"}function ut(z){return Math.hypot(z[0],z[1],z[2],z[3],z[4],z[5],z[6],z[7],z[8],z[9],z[10],z[11],z[12],z[13],z[14],z[15])}function Lt(z,Q,ht){return z[0]=Q[0]+ht[0],z[1]=Q[1]+ht[1],z[2]=Q[2]+ht[2],z[3]=Q[3]+ht[3],z[4]=Q[4]+ht[4],z[5]=Q[5]+ht[5],z[6]=Q[6]+ht[6],z[7]=Q[7]+ht[7],z[8]=Q[8]+ht[8],z[9]=Q[9]+ht[9],z[10]=Q[10]+ht[10],z[11]=Q[11]+ht[11],z[12]=Q[12]+ht[12],z[13]=Q[13]+ht[13],z[14]=Q[14]+ht[14],z[15]=Q[15]+ht[15],z}function Ft(z,Q,ht){return z[0]=Q[0]-ht[0],z[1]=Q[1]-ht[1],z[2]=Q[2]-ht[2],z[3]=Q[3]-ht[3],z[4]=Q[4]-ht[4],z[5]=Q[5]-ht[5],z[6]=Q[6]-ht[6],z[7]=Q[7]-ht[7],z[8]=Q[8]-ht[8],z[9]=Q[9]-ht[9],z[10]=Q[10]-ht[10],z[11]=Q[11]-ht[11],z[12]=Q[12]-ht[12],z[13]=Q[13]-ht[13],z[14]=Q[14]-ht[14],z[15]=Q[15]-ht[15],z}function Ot(z,Q,ht){return z[0]=Q[0]*ht,z[1]=Q[1]*ht,z[2]=Q[2]*ht,z[3]=Q[3]*ht,z[4]=Q[4]*ht,z[5]=Q[5]*ht,z[6]=Q[6]*ht,z[7]=Q[7]*ht,z[8]=Q[8]*ht,z[9]=Q[9]*ht,z[10]=Q[10]*ht,z[11]=Q[11]*ht,z[12]=Q[12]*ht,z[13]=Q[13]*ht,z[14]=Q[14]*ht,z[15]=Q[15]*ht,z}function St(z,Q,ht,et){return z[0]=Q[0]+ht[0]*et,z[1]=Q[1]+ht[1]*et,z[2]=Q[2]+ht[2]*et,z[3]=Q[3]+ht[3]*et,z[4]=Q[4]+ht[4]*et,z[5]=Q[5]+ht[5]*et,z[6]=Q[6]+ht[6]*et,z[7]=Q[7]+ht[7]*et,z[8]=Q[8]+ht[8]*et,z[9]=Q[9]+ht[9]*et,z[10]=Q[10]+ht[10]*et,z[11]=Q[11]+ht[11]*et,z[12]=Q[12]+ht[12]*et,z[13]=Q[13]+ht[13]*et,z[14]=Q[14]+ht[14]*et,z[15]=Q[15]+ht[15]*et,z}function xt(z,Q){return z[0]===Q[0]&&z[1]===Q[1]&&z[2]===Q[2]&&z[3]===Q[3]&&z[4]===Q[4]&&z[5]===Q[5]&&z[6]===Q[6]&&z[7]===Q[7]&&z[8]===Q[8]&&z[9]===Q[9]&&z[10]===Q[10]&&z[11]===Q[11]&&z[12]===Q[12]&&z[13]===Q[13]&&z[14]===Q[14]&&z[15]===Q[15]}function At(z,Q){var ht=z[0],et=z[1],at=z[2],gt=z[3],k=z[4],ot=z[5],it=z[6],X=z[7],Et=z[8],vt=z[9],Nt=z[10],$t=z[11],ee=z[12],kt=z[13],Wt=z[14],ae=z[15],le=Q[0],je=Q[1],Oe=Q[2],We=Q[3],Ye=Q[4],wn=Q[5],er=Q[6],wr=Q[7],on=Q[8],en=Q[9],An=Q[10],jn=Q[11],pr=Q[12],di=Q[13],Ce=Q[14],Me=Q[15];return Math.abs(ht-le)<=V.b*Math.max(1,Math.abs(ht),Math.abs(le))&&Math.abs(et-je)<=V.b*Math.max(1,Math.abs(et),Math.abs(je))&&Math.abs(at-Oe)<=V.b*Math.max(1,Math.abs(at),Math.abs(Oe))&&Math.abs(gt-We)<=V.b*Math.max(1,Math.abs(gt),Math.abs(We))&&Math.abs(k-Ye)<=V.b*Math.max(1,Math.abs(k),Math.abs(Ye))&&Math.abs(ot-wn)<=V.b*Math.max(1,Math.abs(ot),Math.abs(wn))&&Math.abs(it-er)<=V.b*Math.max(1,Math.abs(it),Math.abs(er))&&Math.abs(X-wr)<=V.b*Math.max(1,Math.abs(X),Math.abs(wr))&&Math.abs(Et-on)<=V.b*Math.max(1,Math.abs(Et),Math.abs(on))&&Math.abs(vt-en)<=V.b*Math.max(1,Math.abs(vt),Math.abs(en))&&Math.abs(Nt-An)<=V.b*Math.max(1,Math.abs(Nt),Math.abs(An))&&Math.abs($t-jn)<=V.b*Math.max(1,Math.abs($t),Math.abs(jn))&&Math.abs(ee-pr)<=V.b*Math.max(1,Math.abs(ee),Math.abs(pr))&&Math.abs(kt-di)<=V.b*Math.max(1,Math.abs(kt),Math.abs(di))&&Math.abs(Wt-Ce)<=V.b*Math.max(1,Math.abs(Wt),Math.abs(Ce))&&Math.abs(ae-Me)<=V.b*Math.max(1,Math.abs(ae),Math.abs(Me))}var nt=i,Mt=Ft},ZhIB:function(Se,ct,R){var V,E;/*! @preserve
* numeral.js
* version : 2.0.6
* author : Adam Draper
* license : MIT
* http://adamwdraper.github.com/Numeral-js/
*/(function(T,e){V=e,E=typeof V=="function"?V.call(ct,R,ct,Se):V,E!==void 0&&(Se.exports=E)})(this,function(){var T,e,t="2.0.6",u={},s={},c={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},r={currentLocale:c.currentLocale,zeroFormat:c.zeroFormat,nullFormat:c.nullFormat,defaultFormat:c.defaultFormat,scalePercentBy100:c.scalePercentBy100};function h(n,i){this._input=n,this._value=i}return T=function(i){var a,o,l,f;if(T.isNumeral(i))a=i.value();else if(i===0||typeof i=="undefined")a=0;else if(i===null||e.isNaN(i))a=null;else if(typeof i=="string")if(r.zeroFormat&&i===r.zeroFormat)a=0;else if(r.nullFormat&&i===r.nullFormat||!i.replace(/[^0-9]+/g,"").length)a=null;else{for(o in u)if(f=typeof u[o].regexps.unformat=="function"?u[o].regexps.unformat():u[o].regexps.unformat,f&&i.match(f)){l=u[o].unformat;break}l=l||T._.stringToNumber,a=l(i)}else a=Number(i)||null;return new h(i,a)},T.version=t,T.isNumeral=function(n){return n instanceof h},T._=e={numberToFormat:function(i,a,o){var l=s[T.options.currentLocale],f=!1,v=!1,b=0,g="",m=1e12,_=1e9,M=1e6,x=1e3,y="",S=!1,P,A,O,L,H,F,Z,G,U,Y;if(i=i||0,A=Math.abs(i),T._.includes(a,"(")?(f=!0,a=a.replace(/[\(|\)]/g,"")):(T._.includes(a,"+")||T._.includes(a,"-"))&&(G=T._.includes(a,"+")?a.indexOf("+"):i<0?a.indexOf("-"):-1,a=a.replace(/[\+|\-]/g,"")),T._.includes(a,"a")&&(P=a.match(/a(k|m|b|t)?/),P=P?P[1]:!1,T._.includes(a," a")&&(g=" "),a=a.replace(new RegExp(g+"a[kmbt]?"),""),A>=m&&!P||P==="t"?(g+=l.abbreviations.trillion,i=i/m):A<m&&A>=_&&!P||P==="b"?(g+=l.abbreviations.billion,i=i/_):A<_&&A>=M&&!P||P==="m"?(g+=l.abbreviations.million,i=i/M):(A<M&&A>=x&&!P||P==="k")&&(g+=l.abbreviations.thousand,i=i/x)),T._.includes(a,"[.]")&&(v=!0,a=a.replace("[.]",".")),F=i.toString().split(".")[0],Z=a.split(".")[1],U=a.indexOf(","),b=(a.split(".")[0].split(",")[0].match(/0/g)||[]).length,Z?(T._.includes(Z,"[")?(Z=Z.replace("]",""),Z=Z.split("["),y=T._.toFixed(i,Z[0].length+Z[1].length,o,Z[1].length)):y=T._.toFixed(i,Z.length,o),F=y.split(".")[0],T._.includes(y,".")?y=l.delimiters.decimal+y.split(".")[1]:y="",v&&Number(y.slice(1))===0&&(y="")):F=T._.toFixed(i,0,o),g&&!P&&Number(F)>=1e3&&g!==l.abbreviations.trillion)switch(F=String(Number(F)/1e3),g){case l.abbreviations.thousand:g=l.abbreviations.million;break;case l.abbreviations.million:g=l.abbreviations.billion;break;case l.abbreviations.billion:g=l.abbreviations.trillion;break}if(T._.includes(F,"-")&&(F=F.slice(1),S=!0),F.length<b)for(var J=b-F.length;J>0;J--)F="0"+F;return U>-1&&(F=F.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+l.delimiters.thousands)),a.indexOf(".")===0&&(F=""),Y=F+y+(g||""),f?Y=(f&&S?"(":"")+Y+(f&&S?")":""):G>=0?Y=G===0?(S?"-":"+")+Y:Y+(S?"-":"+"):S&&(Y="-"+Y),Y},stringToNumber:function(i){var a=s[r.currentLocale],o=i,l={thousand:3,million:6,billion:9,trillion:12},f,v,b,g;if(r.zeroFormat&&i===r.zeroFormat)v=0;else if(r.nullFormat&&i===r.nullFormat||!i.replace(/[^0-9]+/g,"").length)v=null;else{v=1,a.delimiters.decimal!=="."&&(i=i.replace(/\./g,"").replace(a.delimiters.decimal,"."));for(f in l)if(g=new RegExp("[^a-zA-Z]"+a.abbreviations[f]+"(?:\\)|(\\"+a.currency.symbol+")?(?:\\))?)?$"),o.match(g)){v*=Math.pow(10,l[f]);break}v*=(i.split("-").length+Math.min(i.split("(").length-1,i.split(")").length-1))%2?1:-1,i=i.replace(/[^0-9\.]+/g,""),v*=Number(i)}return v},isNaN:function(n){function i(a){return n.apply(this,arguments)}return i.toString=function(){return n.toString()},i}(function(n){return typeof n=="number"&&isNaN(n)}),includes:function(i,a){return i.indexOf(a)!==-1},insert:function(i,a,o){return i.slice(0,o)+a+i.slice(o)},reduce:function(i,a){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof a!="function")throw new TypeError(a+" is not a function");var o=Object(i),l=o.length>>>0,f=0,v;if(arguments.length===3)v=arguments[2];else{for(;f<l&&!(f in o);)f++;if(f>=l)throw new TypeError("Reduce of empty array with no initial value");v=o[f++]}for(;f<l;f++)f in o&&(v=a(v,o[f],f,o));return v},multiplier:function(i){var a=i.toString().split(".");return a.length<2?1:Math.pow(10,a[1].length)},correctionFactor:function(){var i=Array.prototype.slice.call(arguments);return i.reduce(function(a,o){var l=e.multiplier(o);return a>l?a:l},1)},toFixed:function(i,a,o,l){var f=i.toString().split("."),v=a-(l||0),b,g,m,_;return f.length===2?b=Math.min(Math.max(f[1].length,v),a):b=v,m=Math.pow(10,b),_=(o(i+"e+"+b)/m).toFixed(b),l>a-b&&(g=new RegExp("\\.?0{1,"+(l-(a-b))+"}$"),_=_.replace(g,"")),_}},T.options=r,T.formats=u,T.locales=s,T.locale=function(n){return n&&(r.currentLocale=n.toLowerCase()),r.currentLocale},T.localeData=function(n){if(!n)return s[r.currentLocale];if(n=n.toLowerCase(),!s[n])throw new Error("Unknown locale : "+n);return s[n]},T.reset=function(){for(var n in c)r[n]=c[n]},T.zeroFormat=function(n){r.zeroFormat=typeof n=="string"?n:null},T.nullFormat=function(n){r.nullFormat=typeof n=="string"?n:null},T.defaultFormat=function(n){r.defaultFormat=typeof n=="string"?n:"0.0"},T.register=function(n,i,a){if(i=i.toLowerCase(),this[n+"s"][i])throw new TypeError(i+" "+n+" already registered.");return this[n+"s"][i]=a,a},T.validate=function(n,i){var a,o,l,f,v,b,g,m;if(typeof n!="string"&&(n+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",n)),n=n.trim(),n.match(/^\d+$/))return!0;if(n==="")return!1;try{g=T.localeData(i)}catch(_){g=T.localeData(T.locale())}return l=g.currency.symbol,v=g.abbreviations,a=g.delimiters.decimal,g.delimiters.thousands==="."?o="\\.":o=g.delimiters.thousands,m=n.match(/^[^\d]+/),m!==null&&(n=n.substr(1),m[0]!==l)||(m=n.match(/[^\d]+$/),m!==null&&(n=n.slice(0,-1),m[0]!==v.thousand&&m[0]!==v.million&&m[0]!==v.billion&&m[0]!==v.trillion))?!1:(b=new RegExp(o+"{2}"),n.match(/[^\d.,]/g)?!1:(f=n.split(a),f.length>2?!1:f.length<2?!!f[0].match(/^\d+.*\d$/)&&!f[0].match(b):f[0].length===1?!!f[0].match(/^\d+$/)&&!f[0].match(b)&&!!f[1].match(/^\d+$/):!!f[0].match(/^\d+.*\d$/)&&!f[0].match(b)&&!!f[1].match(/^\d+$/)))},T.fn=h.prototype={clone:function(){return T(this)},format:function(i,a){var o=this._value,l=i||r.defaultFormat,f,v,b;if(a=a||Math.round,o===0&&r.zeroFormat!==null)v=r.zeroFormat;else if(o===null&&r.nullFormat!==null)v=r.nullFormat;else{for(f in u)if(l.match(u[f].regexps.format)){b=u[f].format;break}b=b||T._.numberToFormat,v=b(o,l,a)}return v},value:function(){return this._value},input:function(){return this._input},set:function(i){return this._value=Number(i),this},add:function(i){var a=e.correctionFactor.call(null,this._value,i);function o(l,f,v,b){return l+Math.round(a*f)}return this._value=e.reduce([this._value,i],o,0)/a,this},subtract:function(i){var a=e.correctionFactor.call(null,this._value,i);function o(l,f,v,b){return l-Math.round(a*f)}return this._value=e.reduce([i],o,Math.round(this._value*a))/a,this},multiply:function(i){function a(o,l,f,v){var b=e.correctionFactor(o,l);return Math.round(o*b)*Math.round(l*b)/Math.round(b*b)}return this._value=e.reduce([this._value,i],a,1),this},divide:function(i){function a(o,l,f,v){var b=e.correctionFactor(o,l);return Math.round(o*b)/Math.round(l*b)}return this._value=e.reduce([this._value,i],a),this},difference:function(i){return Math.abs(T(this._value).subtract(i).value())}},T.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(i){var a=i%10;return~~(i%100/10)==1?"th":a===1?"st":a===2?"nd":a===3?"rd":"th"},currency:{symbol:"$"}}),function(){T.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(i,a,o){var l=T._.includes(a," BPS")?" ":"",f;return i=i*1e4,a=a.replace(/\s?BPS/,""),f=T._.numberToFormat(i,a,o),T._.includes(f,")")?(f=f.split(""),f.splice(-1,0,l+"BPS"),f=f.join("")):f=f+l+"BPS",f},unformat:function(i){return+(T._.stringToNumber(i)*1e-4).toFixed(15)}})}(),function(){var n={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},i={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},a=n.suffixes.concat(i.suffixes.filter(function(l){return n.suffixes.indexOf(l)<0})),o=a.join("|");o="("+o.replace("B","B(?!PS)")+")",T.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(o)},format:function(f,v,b){var g,m=T._.includes(v,"ib")?i:n,_=T._.includes(v," b")||T._.includes(v," ib")?" ":"",M,x,y;for(v=v.replace(/\s?i?b/,""),M=0;M<=m.suffixes.length;M++)if(x=Math.pow(m.base,M),y=Math.pow(m.base,M+1),f===null||f===0||f>=x&&f<y){_+=m.suffixes[M],x>0&&(f=f/x);break}return g=T._.numberToFormat(f,v,b),g+_},unformat:function(f){var v=T._.stringToNumber(f),b,g;if(v){for(b=n.suffixes.length-1;b>=0;b--){if(T._.includes(f,n.suffixes[b])){g=Math.pow(n.base,b);break}if(T._.includes(f,i.suffixes[b])){g=Math.pow(i.base,b);break}}v*=g||1}return v}})}(),function(){T.register("format","currency",{regexps:{format:/(\$)/},format:function(i,a,o){var l=T.locales[T.options.currentLocale],f={before:a.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:a.match(/([\+|\-|\)|\s|\$]*)$/)[0]},v,b,g;for(a=a.replace(/\s?\$\s?/,""),v=T._.numberToFormat(i,a,o),i>=0?(f.before=f.before.replace(/[\-\(]/,""),f.after=f.after.replace(/[\-\)]/,"")):i<0&&!T._.includes(f.before,"-")&&!T._.includes(f.before,"(")&&(f.before="-"+f.before),g=0;g<f.before.length;g++)switch(b=f.before[g],b){case"$":v=T._.insert(v,l.currency.symbol,g);break;case" ":v=T._.insert(v," ",g+l.currency.symbol.length-1);break}for(g=f.after.length-1;g>=0;g--)switch(b=f.after[g],b){case"$":v=g===f.after.length-1?v+l.currency.symbol:T._.insert(v,l.currency.symbol,-(f.after.length-(1+g)));break;case" ":v=g===f.after.length-1?v+" ":T._.insert(v," ",-(f.after.length-(1+g)+l.currency.symbol.length-1));break}return v}})}(),function(){T.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(i,a,o){var l,f=typeof i=="number"&&!T._.isNaN(i)?i.toExponential():"0e+0",v=f.split("e");return a=a.replace(/e[\+|\-]{1}0/,""),l=T._.numberToFormat(Number(v[0]),a,o),l+"e"+v[1]},unformat:function(i){var a=T._.includes(i,"e+")?i.split("e+"):i.split("e-"),o=Number(a[0]),l=Number(a[1]);l=T._.includes(i,"e-")?l*=-1:l;function f(v,b,g,m){var _=T._.correctionFactor(v,b),M=v*_*(b*_)/(_*_);return M}return T._.reduce([o,Math.pow(10,l)],f,1)}})}(),function(){T.register("format","ordinal",{regexps:{format:/(o)/},format:function(i,a,o){var l=T.locales[T.options.currentLocale],f,v=T._.includes(a," o")?" ":"";return a=a.replace(/\s?o/,""),v+=l.ordinal(i),f=T._.numberToFormat(i,a,o),f+v}})}(),function(){T.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(i,a,o){var l=T._.includes(a," %")?" ":"",f;return T.options.scalePercentBy100&&(i=i*100),a=a.replace(/\s?\%/,""),f=T._.numberToFormat(i,a,o),T._.includes(f,")")?(f=f.split(""),f.splice(-1,0,l+"%"),f=f.join("")):f=f+l+"%",f},unformat:function(i){var a=T._.stringToNumber(i);return T.options.scalePercentBy100?a*.01:a}})}(),function(){T.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(i,a,o){var l=Math.floor(i/60/60),f=Math.floor((i-l*60*60)/60),v=Math.round(i-l*60*60-f*60);return l+":"+(f<10?"0"+f:f)+":"+(v<10?"0"+v:v)},unformat:function(i){var a=i.split(":"),o=0;return a.length===3?(o=o+Number(a[0])*60*60,o=o+Number(a[1])*60,o=o+Number(a[2])):a.length===2&&(o=o+Number(a[0])*60,o=o+Number(a[1])),Number(o)}})}(),T})},Ztfv:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.tagProperty=ct.tagParameter=ct.decorate=void 0;var V=R("MON2"),E=R("xfSm");function T(r,h,n,i){var a=E.TAGGED;t(a,r,h,i,n)}ct.tagParameter=T;function e(r,h,n){var i=E.TAGGED_PROP;t(i,r.constructor,h,n)}ct.tagProperty=e;function t(r,h,n,i,a){var o={},l=typeof a=="number",f=a!==void 0&&l?a.toString():n;if(l&&n!==void 0)throw new Error(V.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(r,h)&&(o=Reflect.getMetadata(r,h));var v=o[f];if(!Array.isArray(v))v=[];else for(var b=0,g=v;b<g.length;b++){var m=g[b];if(m.key===i.key)throw new Error(V.DUPLICATED_METADATA+" "+m.key.toString())}v.push(i),o[f]=v,Reflect.defineMetadata(r,o,h)}function u(r,h){Reflect.decorate(r,h)}function s(r,h){return function(n,i){h(n,i,r)}}function c(r,h,n){typeof n=="number"?u([s(n,r)],h):typeof n=="string"?Reflect.decorate([r],h,n):u([r],h)}ct.decorate=c},ZxFD:function(Se,ct,R){"use strict";R.r(ct),R.d(ct,"create",function(){return E}),R.d(ct,"clone",function(){return T}),R.d(ct,"fromValues",function(){return e}),R.d(ct,"copy",function(){return t}),R.d(ct,"set",function(){return u}),R.d(ct,"add",function(){return s}),R.d(ct,"subtract",function(){return c}),R.d(ct,"multiply",function(){return r}),R.d(ct,"divide",function(){return h}),R.d(ct,"ceil",function(){return n}),R.d(ct,"floor",function(){return i}),R.d(ct,"min",function(){return a}),R.d(ct,"max",function(){return o}),R.d(ct,"round",function(){return l}),R.d(ct,"scale",function(){return f}),R.d(ct,"scaleAndAdd",function(){return v}),R.d(ct,"distance",function(){return b}),R.d(ct,"squaredDistance",function(){return g}),R.d(ct,"length",function(){return m}),R.d(ct,"squaredLength",function(){return _}),R.d(ct,"negate",function(){return M}),R.d(ct,"inverse",function(){return x}),R.d(ct,"normalize",function(){return y}),R.d(ct,"dot",function(){return S}),R.d(ct,"cross",function(){return P}),R.d(ct,"lerp",function(){return A}),R.d(ct,"random",function(){return O}),R.d(ct,"transformMat2",function(){return L}),R.d(ct,"transformMat2d",function(){return H}),R.d(ct,"transformMat3",function(){return F}),R.d(ct,"transformMat4",function(){return Z}),R.d(ct,"rotate",function(){return G}),R.d(ct,"angle",function(){return U}),R.d(ct,"zero",function(){return Y}),R.d(ct,"str",function(){return J}),R.d(ct,"exactEquals",function(){return rt}),R.d(ct,"equals",function(){return ft}),R.d(ct,"len",function(){return dt}),R.d(ct,"sub",function(){return ut}),R.d(ct,"mul",function(){return Lt}),R.d(ct,"div",function(){return Ft}),R.d(ct,"dist",function(){return Ot}),R.d(ct,"sqrDist",function(){return St}),R.d(ct,"sqrLen",function(){return xt}),R.d(ct,"forEach",function(){return At});var V=R("yU0y");function E(){var nt=new V.a(2);return V.a!=Float32Array&&(nt[0]=0,nt[1]=0),nt}function T(nt){var Mt=new V.a(2);return Mt[0]=nt[0],Mt[1]=nt[1],Mt}function e(nt,Mt){var z=new V.a(2);return z[0]=nt,z[1]=Mt,z}function t(nt,Mt){return nt[0]=Mt[0],nt[1]=Mt[1],nt}function u(nt,Mt,z){return nt[0]=Mt,nt[1]=z,nt}function s(nt,Mt,z){return nt[0]=Mt[0]+z[0],nt[1]=Mt[1]+z[1],nt}function c(nt,Mt,z){return nt[0]=Mt[0]-z[0],nt[1]=Mt[1]-z[1],nt}function r(nt,Mt,z){return nt[0]=Mt[0]*z[0],nt[1]=Mt[1]*z[1],nt}function h(nt,Mt,z){return nt[0]=Mt[0]/z[0],nt[1]=Mt[1]/z[1],nt}function n(nt,Mt){return nt[0]=Math.ceil(Mt[0]),nt[1]=Math.ceil(Mt[1]),nt}function i(nt,Mt){return nt[0]=Math.floor(Mt[0]),nt[1]=Math.floor(Mt[1]),nt}function a(nt,Mt,z){return nt[0]=Math.min(Mt[0],z[0]),nt[1]=Math.min(Mt[1],z[1]),nt}function o(nt,Mt,z){return nt[0]=Math.max(Mt[0],z[0]),nt[1]=Math.max(Mt[1],z[1]),nt}function l(nt,Mt){return nt[0]=Math.round(Mt[0]),nt[1]=Math.round(Mt[1]),nt}function f(nt,Mt,z){return nt[0]=Mt[0]*z,nt[1]=Mt[1]*z,nt}function v(nt,Mt,z,Q){return nt[0]=Mt[0]+z[0]*Q,nt[1]=Mt[1]+z[1]*Q,nt}function b(nt,Mt){var z=Mt[0]-nt[0],Q=Mt[1]-nt[1];return Math.hypot(z,Q)}function g(nt,Mt){var z=Mt[0]-nt[0],Q=Mt[1]-nt[1];return z*z+Q*Q}function m(nt){var Mt=nt[0],z=nt[1];return Math.hypot(Mt,z)}function _(nt){var Mt=nt[0],z=nt[1];return Mt*Mt+z*z}function M(nt,Mt){return nt[0]=-Mt[0],nt[1]=-Mt[1],nt}function x(nt,Mt){return nt[0]=1/Mt[0],nt[1]=1/Mt[1],nt}function y(nt,Mt){var z=Mt[0],Q=Mt[1],ht=z*z+Q*Q;return ht>0&&(ht=1/Math.sqrt(ht)),nt[0]=Mt[0]*ht,nt[1]=Mt[1]*ht,nt}function S(nt,Mt){return nt[0]*Mt[0]+nt[1]*Mt[1]}function P(nt,Mt,z){var Q=Mt[0]*z[1]-Mt[1]*z[0];return nt[0]=nt[1]=0,nt[2]=Q,nt}function A(nt,Mt,z,Q){var ht=Mt[0],et=Mt[1];return nt[0]=ht+Q*(z[0]-ht),nt[1]=et+Q*(z[1]-et),nt}function O(nt,Mt){Mt=Mt||1;var z=V.c()*2*Math.PI;return nt[0]=Math.cos(z)*Mt,nt[1]=Math.sin(z)*Mt,nt}function L(nt,Mt,z){var Q=Mt[0],ht=Mt[1];return nt[0]=z[0]*Q+z[2]*ht,nt[1]=z[1]*Q+z[3]*ht,nt}function H(nt,Mt,z){var Q=Mt[0],ht=Mt[1];return nt[0]=z[0]*Q+z[2]*ht+z[4],nt[1]=z[1]*Q+z[3]*ht+z[5],nt}function F(nt,Mt,z){var Q=Mt[0],ht=Mt[1];return nt[0]=z[0]*Q+z[3]*ht+z[6],nt[1]=z[1]*Q+z[4]*ht+z[7],nt}function Z(nt,Mt,z){var Q=Mt[0],ht=Mt[1];return nt[0]=z[0]*Q+z[4]*ht+z[12],nt[1]=z[1]*Q+z[5]*ht+z[13],nt}function G(nt,Mt,z,Q){var ht=Mt[0]-z[0],et=Mt[1]-z[1],at=Math.sin(Q),gt=Math.cos(Q);return nt[0]=ht*gt-et*at+z[0],nt[1]=ht*at+et*gt+z[1],nt}function U(nt,Mt){var z=nt[0],Q=nt[1],ht=Mt[0],et=Mt[1],at=Math.sqrt(z*z+Q*Q)*Math.sqrt(ht*ht+et*et),gt=at&&(z*ht+Q*et)/at;return Math.acos(Math.min(Math.max(gt,-1),1))}function Y(nt){return nt[0]=0,nt[1]=0,nt}function J(nt){return"vec2("+nt[0]+", "+nt[1]+")"}function rt(nt,Mt){return nt[0]===Mt[0]&&nt[1]===Mt[1]}function ft(nt,Mt){var z=nt[0],Q=nt[1],ht=Mt[0],et=Mt[1];return Math.abs(z-ht)<=V.b*Math.max(1,Math.abs(z),Math.abs(ht))&&Math.abs(Q-et)<=V.b*Math.max(1,Math.abs(Q),Math.abs(et))}var dt=m,ut=c,Lt=r,Ft=h,Ot=b,St=g,xt=_,At=function(){var nt=E();return function(Mt,z,Q,ht,et,at){var gt,k;for(z||(z=2),Q||(Q=0),ht?k=Math.min(ht*z+Q,Mt.length):k=Mt.length,gt=Q;gt<k;gt+=z)nt[0]=Mt[gt],nt[1]=Mt[gt+1],et(nt,nt,at),Mt[gt]=nt[0],Mt[gt+1]=nt[1];return Mt}}()},ZzCi:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.named=void 0;var V=R("xfSm"),E=R("GXnB"),T=R("Ztfv");function e(t){return function(u,s,c){var r=new E.Metadata(V.NAMED_TAG,t);typeof c=="number"?T.tagParameter(u,s,c,r):T.tagProperty(u,s,r)}}ct.named=e},a1gu:function(Se,ct,R){var V=R("cDf5").default,E=R("PJYZ");function T(e,t){return t&&(V(t)==="object"||typeof t=="function")?t:E(e)}Se.exports=T,Se.exports.default=Se.exports,Se.exports.__esModule=!0},aF1E:function(Se,ct,R){"use strict";R.d(ct,"a",function(){return t});var V=R("lSNA"),E=R.n(V);function T(u,s){var c=Object.keys(u);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(u);s&&(r=r.filter(function(h){return Object.getOwnPropertyDescriptor(u,h).enumerable})),c.push.apply(c,r)}return c}function e(u){for(var s=1;s<arguments.length;s++){var c=arguments[s]!=null?arguments[s]:{};s%2?T(Object(c),!0).forEach(function(r){E()(u,r,c[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(c)):T(Object(c)).forEach(function(r){Object.defineProperty(u,r,Object.getOwnPropertyDescriptor(c,r))})}return u}function t(u,s){var c=s.sourceField,r=s.targetField,h=s.data,n={};return h.forEach(function(i){n[i[c]]=i}),u.dataArray=u.dataArray.map(function(i){var a=i[r];return e(e({},i),n[a])}),u}},aHsQ:function(Se,ct,R){"use strict";var V=R("cIOH"),E=R.n(V),T=R("6D9b"),e=R.n(T),t=R("cWXX")},aPG5:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.resolve=void 0;var V=R("MON2"),E=R("FV85"),T=R("qK8v"),e=R("ujMp"),t=R("cSJO"),u=function(h,n,i){try{return i()}catch(a){throw T.isStackOverflowExeption(a)?new Error(V.CIRCULAR_DEPENDENCY_IN_FACTORY(h,n.toString())):a}},s=function r(h){return function(n){n.parentContext.setCurrentRequest(n);var i=n.bindings,a=n.childRequests,o=n.target&&n.target.isArray(),l=!n.parentRequest||!n.parentRequest.target||!n.target||!n.parentRequest.target.matchesArray(n.target.serviceIdentifier);if(o&&l)return a.map(function(_){var M=r(h);return M(_)});var f=null;if(n.target.isOptional()&&i.length===0)return;var v=i[0],b=v.scope===E.BindingScopeEnum.Singleton,g=v.scope===E.BindingScopeEnum.Request;if(b&&v.activated)return v.cache;if(g&&h!==null&&h.has(v.id))return h.get(v.id);if(v.type===E.BindingTypeEnum.ConstantValue)f=v.cache,v.activated=!0;else if(v.type===E.BindingTypeEnum.Function)f=v.cache,v.activated=!0;else if(v.type===E.BindingTypeEnum.Constructor)f=v.implementationType;else if(v.type===E.BindingTypeEnum.DynamicValue&&v.dynamicValue!==null)f=u("toDynamicValue",v.serviceIdentifier,function(){return v.dynamicValue(n.parentContext)});else if(v.type===E.BindingTypeEnum.Factory&&v.factory!==null)f=u("toFactory",v.serviceIdentifier,function(){return v.factory(n.parentContext)});else if(v.type===E.BindingTypeEnum.Provider&&v.provider!==null)f=u("toProvider",v.serviceIdentifier,function(){return v.provider(n.parentContext)});else if(v.type===E.BindingTypeEnum.Instance&&v.implementationType!==null)f=t.resolveInstance(v.implementationType,a,r(h));else{var m=e.getServiceIdentifierAsString(n.serviceIdentifier);throw new Error(V.INVALID_BINDING_TYPE+" "+m)}return typeof v.onActivation=="function"&&(f=v.onActivation(n.parentContext,f)),b&&(v.cache=f,v.activated=!0),g&&h!==null&&!h.has(v.id)&&h.set(v.id,f),f}};function c(r){var h=s(r.plan.rootRequest.requestScope);return h(r.plan.rootRequest)}ct.resolve=c},asDA:function(Se,ct){function R(V,E,T,e){var t=-1,u=V==null?0:V.length;for(e&&u&&(T=V[++t]);++t<u;)T=E(T,V[t],t,V);return T}Se.exports=R},b2z7:function(Se,ct){var R=/\w*$/;function V(E){var T=new E.constructor(E.source,R.exec(E));return T.lastIndex=E.lastIndex,T}Se.exports=V},b48C:function(Se,ct){function R(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(V){return!1}}Se.exports=R,Se.exports.default=Se.exports,Se.exports.__esModule=!0},bB6j:function(Se,ct,R){"use strict";R.d(ct,"a",function(){return V});var V={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),ILogService:Symbol.for("ILogService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")}},bE4E:function(Se,ct,R){Se.exports={"ant-divider":"ant-divider","ant-divider-vertical":"ant-divider-vertical","ant-divider-horizontal":"ant-divider-horizontal","ant-divider-with-text":"ant-divider-with-text","ant-divider-with-text-left":"ant-divider-with-text-left","ant-divider-with-text-right":"ant-divider-with-text-right","ant-divider-inner-text":"ant-divider-inner-text","ant-divider-dashed":"ant-divider-dashed","ant-divider-plain":"ant-divider-plain","ant-divider-rtl":"ant-divider-rtl"}},bPkA:function(Se,ct,R){"use strict";R.d(ct,"a",function(){return V});var V;(function(E){E.Normal="normal",E.PostProcessing="post-processing"})(V||(V={}))},bTtR:function(Se,ct){},bYl4:function(Se,ct){},bahg:function(Se,ct){function R(V){return V.split("")}Se.exports=R},bl9R:function(Se,ct,R){"use strict";R.r(ct),R.d(ct,"create",function(){return E}),R.d(ct,"clone",function(){return T}),R.d(ct,"fromValues",function(){return e}),R.d(ct,"copy",function(){return t}),R.d(ct,"set",function(){return u}),R.d(ct,"add",function(){return s}),R.d(ct,"subtract",function(){return c}),R.d(ct,"multiply",function(){return r}),R.d(ct,"divide",function(){return h}),R.d(ct,"ceil",function(){return n}),R.d(ct,"floor",function(){return i}),R.d(ct,"min",function(){return a}),R.d(ct,"max",function(){return o}),R.d(ct,"round",function(){return l}),R.d(ct,"scale",function(){return f}),R.d(ct,"scaleAndAdd",function(){return v}),R.d(ct,"distance",function(){return b}),R.d(ct,"squaredDistance",function(){return g}),R.d(ct,"length",function(){return m}),R.d(ct,"squaredLength",function(){return _}),R.d(ct,"negate",function(){return M}),R.d(ct,"inverse",function(){return x}),R.d(ct,"normalize",function(){return y}),R.d(ct,"dot",function(){return S}),R.d(ct,"cross",function(){return P}),R.d(ct,"lerp",function(){return A}),R.d(ct,"random",function(){return O}),R.d(ct,"transformMat4",function(){return L}),R.d(ct,"transformQuat",function(){return H}),R.d(ct,"zero",function(){return F}),R.d(ct,"str",function(){return Z}),R.d(ct,"exactEquals",function(){return G}),R.d(ct,"equals",function(){return U}),R.d(ct,"sub",function(){return Y}),R.d(ct,"mul",function(){return J}),R.d(ct,"div",function(){return rt}),R.d(ct,"dist",function(){return ft}),R.d(ct,"sqrDist",function(){return dt}),R.d(ct,"len",function(){return ut}),R.d(ct,"sqrLen",function(){return Lt}),R.d(ct,"forEach",function(){return Ft});var V=R("yU0y");function E(){var Ot=new V.a(4);return V.a!=Float32Array&&(Ot[0]=0,Ot[1]=0,Ot[2]=0,Ot[3]=0),Ot}function T(Ot){var St=new V.a(4);return St[0]=Ot[0],St[1]=Ot[1],St[2]=Ot[2],St[3]=Ot[3],St}function e(Ot,St,xt,At){var nt=new V.a(4);return nt[0]=Ot,nt[1]=St,nt[2]=xt,nt[3]=At,nt}function t(Ot,St){return Ot[0]=St[0],Ot[1]=St[1],Ot[2]=St[2],Ot[3]=St[3],Ot}function u(Ot,St,xt,At,nt){return Ot[0]=St,Ot[1]=xt,Ot[2]=At,Ot[3]=nt,Ot}function s(Ot,St,xt){return Ot[0]=St[0]+xt[0],Ot[1]=St[1]+xt[1],Ot[2]=St[2]+xt[2],Ot[3]=St[3]+xt[3],Ot}function c(Ot,St,xt){return Ot[0]=St[0]-xt[0],Ot[1]=St[1]-xt[1],Ot[2]=St[2]-xt[2],Ot[3]=St[3]-xt[3],Ot}function r(Ot,St,xt){return Ot[0]=St[0]*xt[0],Ot[1]=St[1]*xt[1],Ot[2]=St[2]*xt[2],Ot[3]=St[3]*xt[3],Ot}function h(Ot,St,xt){return Ot[0]=St[0]/xt[0],Ot[1]=St[1]/xt[1],Ot[2]=St[2]/xt[2],Ot[3]=St[3]/xt[3],Ot}function n(Ot,St){return Ot[0]=Math.ceil(St[0]),Ot[1]=Math.ceil(St[1]),Ot[2]=Math.ceil(St[2]),Ot[3]=Math.ceil(St[3]),Ot}function i(Ot,St){return Ot[0]=Math.floor(St[0]),Ot[1]=Math.floor(St[1]),Ot[2]=Math.floor(St[2]),Ot[3]=Math.floor(St[3]),Ot}function a(Ot,St,xt){return Ot[0]=Math.min(St[0],xt[0]),Ot[1]=Math.min(St[1],xt[1]),Ot[2]=Math.min(St[2],xt[2]),Ot[3]=Math.min(St[3],xt[3]),Ot}function o(Ot,St,xt){return Ot[0]=Math.max(St[0],xt[0]),Ot[1]=Math.max(St[1],xt[1]),Ot[2]=Math.max(St[2],xt[2]),Ot[3]=Math.max(St[3],xt[3]),Ot}function l(Ot,St){return Ot[0]=Math.round(St[0]),Ot[1]=Math.round(St[1]),Ot[2]=Math.round(St[2]),Ot[3]=Math.round(St[3]),Ot}function f(Ot,St,xt){return Ot[0]=St[0]*xt,Ot[1]=St[1]*xt,Ot[2]=St[2]*xt,Ot[3]=St[3]*xt,Ot}function v(Ot,St,xt,At){return Ot[0]=St[0]+xt[0]*At,Ot[1]=St[1]+xt[1]*At,Ot[2]=St[2]+xt[2]*At,Ot[3]=St[3]+xt[3]*At,Ot}function b(Ot,St){var xt=St[0]-Ot[0],At=St[1]-Ot[1],nt=St[2]-Ot[2],Mt=St[3]-Ot[3];return Math.hypot(xt,At,nt,Mt)}function g(Ot,St){var xt=St[0]-Ot[0],At=St[1]-Ot[1],nt=St[2]-Ot[2],Mt=St[3]-Ot[3];return xt*xt+At*At+nt*nt+Mt*Mt}function m(Ot){var St=Ot[0],xt=Ot[1],At=Ot[2],nt=Ot[3];return Math.hypot(St,xt,At,nt)}function _(Ot){var St=Ot[0],xt=Ot[1],At=Ot[2],nt=Ot[3];return St*St+xt*xt+At*At+nt*nt}function M(Ot,St){return Ot[0]=-St[0],Ot[1]=-St[1],Ot[2]=-St[2],Ot[3]=-St[3],Ot}function x(Ot,St){return Ot[0]=1/St[0],Ot[1]=1/St[1],Ot[2]=1/St[2],Ot[3]=1/St[3],Ot}function y(Ot,St){var xt=St[0],At=St[1],nt=St[2],Mt=St[3],z=xt*xt+At*At+nt*nt+Mt*Mt;return z>0&&(z=1/Math.sqrt(z)),Ot[0]=xt*z,Ot[1]=At*z,Ot[2]=nt*z,Ot[3]=Mt*z,Ot}function S(Ot,St){return Ot[0]*St[0]+Ot[1]*St[1]+Ot[2]*St[2]+Ot[3]*St[3]}function P(Ot,St,xt,At){var nt=xt[0]*At[1]-xt[1]*At[0],Mt=xt[0]*At[2]-xt[2]*At[0],z=xt[0]*At[3]-xt[3]*At[0],Q=xt[1]*At[2]-xt[2]*At[1],ht=xt[1]*At[3]-xt[3]*At[1],et=xt[2]*At[3]-xt[3]*At[2],at=St[0],gt=St[1],k=St[2],ot=St[3];return Ot[0]=gt*et-k*ht+ot*Q,Ot[1]=-(at*et)+k*z-ot*Mt,Ot[2]=at*ht-gt*z+ot*nt,Ot[3]=-(at*Q)+gt*Mt-k*nt,Ot}function A(Ot,St,xt,At){var nt=St[0],Mt=St[1],z=St[2],Q=St[3];return Ot[0]=nt+At*(xt[0]-nt),Ot[1]=Mt+At*(xt[1]-Mt),Ot[2]=z+At*(xt[2]-z),Ot[3]=Q+At*(xt[3]-Q),Ot}function O(Ot,St){St=St||1;var xt,At,nt,Mt,z,Q;do xt=V.c()*2-1,At=V.c()*2-1,z=xt*xt+At*At;while(z>=1);do nt=V.c()*2-1,Mt=V.c()*2-1,Q=nt*nt+Mt*Mt;while(Q>=1);var ht=Math.sqrt((1-z)/Q);return Ot[0]=St*xt,Ot[1]=St*At,Ot[2]=St*nt*ht,Ot[3]=St*Mt*ht,Ot}function L(Ot,St,xt){var At=St[0],nt=St[1],Mt=St[2],z=St[3];return Ot[0]=xt[0]*At+xt[4]*nt+xt[8]*Mt+xt[12]*z,Ot[1]=xt[1]*At+xt[5]*nt+xt[9]*Mt+xt[13]*z,Ot[2]=xt[2]*At+xt[6]*nt+xt[10]*Mt+xt[14]*z,Ot[3]=xt[3]*At+xt[7]*nt+xt[11]*Mt+xt[15]*z,Ot}function H(Ot,St,xt){var At=St[0],nt=St[1],Mt=St[2],z=xt[0],Q=xt[1],ht=xt[2],et=xt[3],at=et*At+Q*Mt-ht*nt,gt=et*nt+ht*At-z*Mt,k=et*Mt+z*nt-Q*At,ot=-z*At-Q*nt-ht*Mt;return Ot[0]=at*et+ot*-z+gt*-ht-k*-Q,Ot[1]=gt*et+ot*-Q+k*-z-at*-ht,Ot[2]=k*et+ot*-ht+at*-Q-gt*-z,Ot[3]=St[3],Ot}function F(Ot){return Ot[0]=0,Ot[1]=0,Ot[2]=0,Ot[3]=0,Ot}function Z(Ot){return"vec4("+Ot[0]+", "+Ot[1]+", "+Ot[2]+", "+Ot[3]+")"}function G(Ot,St){return Ot[0]===St[0]&&Ot[1]===St[1]&&Ot[2]===St[2]&&Ot[3]===St[3]}function U(Ot,St){var xt=Ot[0],At=Ot[1],nt=Ot[2],Mt=Ot[3],z=St[0],Q=St[1],ht=St[2],et=St[3];return Math.abs(xt-z)<=V.b*Math.max(1,Math.abs(xt),Math.abs(z))&&Math.abs(At-Q)<=V.b*Math.max(1,Math.abs(At),Math.abs(Q))&&Math.abs(nt-ht)<=V.b*Math.max(1,Math.abs(nt),Math.abs(ht))&&Math.abs(Mt-et)<=V.b*Math.max(1,Math.abs(Mt),Math.abs(et))}var Y=c,J=r,rt=h,ft=b,dt=g,ut=m,Lt=_,Ft=function(){var Ot=E();return function(St,xt,At,nt,Mt,z){var Q,ht;for(xt||(xt=4),At||(At=0),nt?ht=Math.min(nt*xt+At,St.length):ht=St.length,Q=At;Q<ht;Q+=xt)Ot[0]=St[Q],Ot[1]=St[Q+1],Ot[2]=St[Q+2],Ot[3]=St[Q+3],Mt(Ot,Ot,z),St[Q]=Ot[0],St[Q+1]=Ot[1],St[Q+2]=Ot[2],St[Q+3]=Ot[3];return St}}()},bx4M:function(Se,ct,R){"use strict";var V=R("rePB"),E=R("wx14"),T=R("q1tI"),e=R("TSYQ"),t=R.n(e),u=R("bT9E"),s=R("H84U"),c=function(M,x){var y={};for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&x.indexOf(S)<0&&(y[S]=M[S]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,S=Object.getOwnPropertySymbols(M);P<S.length;P++)x.indexOf(S[P])<0&&Object.prototype.propertyIsEnumerable.call(M,S[P])&&(y[S[P]]=M[S[P]]);return y},r=function(x){var y=x.prefixCls,S=x.className,P=x.hoverable,A=P===void 0?!0:P,O=c(x,["prefixCls","className","hoverable"]);return T.createElement(s.a,null,function(L){var H=L.getPrefixCls,F=H("card",y),Z=t()("".concat(F,"-grid"),S,Object(V.a)({},"".concat(F,"-grid-hoverable"),A));return T.createElement("div",Object(E.a)({},O,{className:Z}))})},h=r,n=function(M,x){var y={};for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&x.indexOf(S)<0&&(y[S]=M[S]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,S=Object.getOwnPropertySymbols(M);P<S.length;P++)x.indexOf(S[P])<0&&Object.prototype.propertyIsEnumerable.call(M,S[P])&&(y[S[P]]=M[S[P]]);return y},i=function(x){return T.createElement(s.a,null,function(y){var S=y.getPrefixCls,P=x.prefixCls,A=x.className,O=x.avatar,L=x.title,H=x.description,F=n(x,["prefixCls","className","avatar","title","description"]),Z=S("card",P),G=t()("".concat(Z,"-meta"),A),U=O?T.createElement("div",{className:"".concat(Z,"-meta-avatar")},O):null,Y=L?T.createElement("div",{className:"".concat(Z,"-meta-title")},L):null,J=H?T.createElement("div",{className:"".concat(Z,"-meta-description")},H):null,rt=Y||J?T.createElement("div",{className:"".concat(Z,"-meta-detail")},Y,J):null;return T.createElement("div",Object(E.a)({},F,{className:G}),U,rt)})},a=i,o=R("ZTPi"),l=R("BMrR"),f=R("kPKH"),v=R("3Nzz"),b=function(M,x){var y={};for(var S in M)Object.prototype.hasOwnProperty.call(M,S)&&x.indexOf(S)<0&&(y[S]=M[S]);if(M!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,S=Object.getOwnPropertySymbols(M);P<S.length;P++)x.indexOf(S[P])<0&&Object.prototype.propertyIsEnumerable.call(M,S[P])&&(y[S[P]]=M[S[P]]);return y};function g(M){var x=M.map(function(y,S){return T.createElement("li",{style:{width:"".concat(100/M.length,"%")},key:"action-".concat(S)},T.createElement("span",null,y))});return x}var m=function(x){var y,S,P=T.useContext(s.b),A=P.getPrefixCls,O=P.direction,L=T.useContext(v.b),H=function(Ye){var wn;(wn=x.onTabChange)===null||wn===void 0||wn.call(x,Ye)},F=function(){var Ye;return T.Children.forEach(x.children,function(wn){wn&&wn.type&&wn.type===h&&(Ye=!0)}),Ye},Z=x.prefixCls,G=x.className,U=x.extra,Y=x.headStyle,J=Y===void 0?{}:Y,rt=x.bodyStyle,ft=rt===void 0?{}:rt,dt=x.title,ut=x.loading,Lt=x.bordered,Ft=Lt===void 0?!0:Lt,Ot=x.size,St=x.type,xt=x.cover,At=x.actions,nt=x.tabList,Mt=x.children,z=x.activeTabKey,Q=x.defaultActiveTabKey,ht=x.tabBarExtraContent,et=x.hoverable,at=x.tabProps,gt=at===void 0?{}:at,k=b(x,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),ot=A("card",Z),it=ft.padding===0||ft.padding==="0px"?{padding:24}:void 0,X=T.createElement("div",{className:"".concat(ot,"-loading-block")}),Et=T.createElement("div",{className:"".concat(ot,"-loading-content"),style:it},T.createElement(l.a,{gutter:8},T.createElement(f.a,{span:22},X)),T.createElement(l.a,{gutter:8},T.createElement(f.a,{span:8},X),T.createElement(f.a,{span:15},X)),T.createElement(l.a,{gutter:8},T.createElement(f.a,{span:6},X),T.createElement(f.a,{span:18},X)),T.createElement(l.a,{gutter:8},T.createElement(f.a,{span:13},X),T.createElement(f.a,{span:9},X)),T.createElement(l.a,{gutter:8},T.createElement(f.a,{span:4},X),T.createElement(f.a,{span:3},X),T.createElement(f.a,{span:16},X))),vt=z!==void 0,Nt=Object(E.a)(Object(E.a)({},gt),(y={},Object(V.a)(y,vt?"activeKey":"defaultActiveKey",vt?z:Q),Object(V.a)(y,"tabBarExtraContent",ht),y)),$t,ee=nt&&nt.length?T.createElement(o.a,Object(E.a)({size:"large"},Nt,{className:"".concat(ot,"-head-tabs"),onChange:H}),nt.map(function(We){return T.createElement(o.a.TabPane,{tab:We.tab,disabled:We.disabled,key:We.key})})):null;(dt||U||ee)&&($t=T.createElement("div",{className:"".concat(ot,"-head"),style:J},T.createElement("div",{className:"".concat(ot,"-head-wrapper")},dt&&T.createElement("div",{className:"".concat(ot,"-head-title")},dt),U&&T.createElement("div",{className:"".concat(ot,"-extra")},U)),ee));var kt=xt?T.createElement("div",{className:"".concat(ot,"-cover")},xt):null,Wt=T.createElement("div",{className:"".concat(ot,"-body"),style:ft},ut?Et:Mt),ae=At&&At.length?T.createElement("ul",{className:"".concat(ot,"-actions")},g(At)):null,le=Object(u.a)(k,["onTabChange"]),je=Ot||L,Oe=t()(ot,(S={},Object(V.a)(S,"".concat(ot,"-loading"),ut),Object(V.a)(S,"".concat(ot,"-bordered"),Ft),Object(V.a)(S,"".concat(ot,"-hoverable"),et),Object(V.a)(S,"".concat(ot,"-contain-grid"),F()),Object(V.a)(S,"".concat(ot,"-contain-tabs"),nt&&nt.length),Object(V.a)(S,"".concat(ot,"-").concat(je),je),Object(V.a)(S,"".concat(ot,"-type-").concat(St),!!St),Object(V.a)(S,"".concat(ot,"-rtl"),O==="rtl"),S),G);return T.createElement("div",Object(E.a)({},le,{className:Oe}),$t,kt,Wt,ae)};m.Grid=h,m.Meta=a;var _=ct.a=m},bzyH:function(Se,ct){},cQSq:function(Se,ct,R){(function(E,T){Se.exports=T()})(window,function(){return function(V){var E={};function T(e){if(E[e])return E[e].exports;var t=E[e]={i:e,l:!1,exports:{}};return V[e].call(t.exports,t,t.exports,T),t.l=!0,t.exports}return T.m=V,T.c=E,T.d=function(e,t,u){T.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:u})},T.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},T.t=function(e,t){if(t&1&&(e=T(e)),t&8||t&4&&typeof e=="object"&&e&&e.__esModule)return e;var u=Object.create(null);if(T.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:e}),t&2&&typeof e!="string")for(var s in e)T.d(u,s,function(c){return e[c]}.bind(null,s));return u},T.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return T.d(t,"a",t),t},T.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},T.p="",T(T.s="./src/index.ts")}({"./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js":function(E,T,e){(function(u,s){E.exports=s()})(typeof self!="undefined"?self:this,function(){return function(t){var u={};function s(c){if(u[c])return u[c].exports;var r=u[c]={i:c,l:!1,exports:{}};return t[c].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=u,s.d=function(c,r,h){s.o(c,r)||Object.defineProperty(c,r,{configurable:!1,enumerable:!0,get:h})},s.n=function(c){var r=c&&c.__esModule?function(){return c.default}:function(){return c};return s.d(r,"a",r),r},s.o=function(c,r){return Object.prototype.hasOwnProperty.call(c,r)},s.p="",s(s.s=31)}([function(t,u,s){"use strict";var c=s(4);u.a=function(r){return Array.isArray?Array.isArray(r):Object(c.a)(r,"Array")}},function(t,u,s){"use strict";var c=function(h){return h!==null&&typeof h!="function"&&isFinite(h.length)};u.a=c},function(t,u,s){"use strict";var c=s(0),r=s(13);function h(n,i){if(!!n){var a;if(Object(c.a)(n))for(var o=0,l=n.length;o<l&&(a=i(n[o],o),a!==!1);o++);else if(Object(r.a)(n)){for(var f in n)if(n.hasOwnProperty(f)&&(a=i(n[f],f),a===!1))break}}}u.a=h},function(t,u,s){"use strict";var c=s(4);u.a=function(r){return Object(c.a)(r,"Function")}},function(t,u,s){"use strict";var c={}.toString,r=function(n,i){return c.call(n)==="[object "+i+"]"};u.a=r},function(t,u,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"Number")};u.a=r},function(t,u,s){"use strict";var c=function(h){return h==null};u.a=c},function(t,u,s){var c=s(33),r=c.mix;t.exports={assign:r}},function(t,u,s){"use strict";var c=s(4);u.a=function(r){return Object(c.a)(r,"String")}},function(t,u,s){"use strict";var c=s(15),r=s(4),h=function(i){if(!Object(c.a)(i)||!Object(r.a)(i,"Object"))return!1;if(Object.getPrototypeOf(i)===null)return!0;for(var a=i;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(i)===a};u.a=h},function(t,u,s){"use strict";var c=s(6);u.a=function(r){return Object(c.a)(r)?"":r.toString()}},function(t,u,s){var c=s(18),r=function(){function h(i,a){a===void 0&&(a={});var o=this;o.options=a,o.rootNode=c(i,a)}var n=h.prototype;return n.execute=function(){throw new Error("please override this method")},h}();t.exports=r},function(t,u,s){"use strict";var c=s(1),r=function(n,i){return Object(c.a)(n)?n.indexOf(i)>-1:!1};u.a=r},function(t,u,s){"use strict";u.a=function(c){var r=typeof c;return c!==null&&r==="object"||r==="function"}},function(t,u,s){"use strict";var c=s(2),r=s(1),h=function(i,a){if(!Object(r.a)(i))return i;var o=[];return Object(c.a)(i,function(l,f){a(l,f)&&o.push(l)}),o};u.a=h},function(t,u,s){"use strict";var c=function(h){return typeof h=="object"&&h!==null};u.a=c},function(t,u,s){"use strict";u.a=r;function c(h,n){for(var i in n)n.hasOwnProperty(i)&&i!=="constructor"&&n[i]!==void 0&&(h[i]=n[i])}function r(h,n,i,a){return n&&c(h,n),i&&c(h,i),a&&c(h,a),h}},function(t,u,s){var c=s(30),r=["LR","RL","TB","BT","H","V"],h=["LR","RL","H"],n=function(o){return h.indexOf(o)>-1},i=r[0];t.exports=function(a,o,l){var f=o.direction||i;if(o.isHorizontal=n(f),f&&r.indexOf(f)===-1)throw new TypeError("Invalid direction: "+f);if(f===r[0])l(a,o);else if(f===r[1])l(a,o),a.right2left();else if(f===r[2])l(a,o);else if(f===r[3])l(a,o),a.bottom2top();else if(f===r[4]||f===r[5]){var v=c(a,o),b=v.left,g=v.right;l(b,o),l(g,o),o.isHorizontal?b.right2left():b.bottom2top(),g.translate(b.x-g.x,b.y-g.y),a.x=b.x,a.y=g.y;var m=a.getBoundingBox();o.isHorizontal?m.top<0&&a.translate(0,-m.top):m.left<0&&a.translate(-m.left,0)}var _=o.fixedRoot;return _===void 0&&(_=!0),_&&a.translate(-(a.x+a.width/2+a.hgap),-(a.y+a.height/2+a.vgap)),a}},function(t,u,s){var c=s(7),r=18,h=r*2,n=r,i={getId:function(f){return f.id||f.name},getHGap:function(f){return f.hgap||n},getVGap:function(f){return f.vgap||n},getChildren:function(f){return f.children},getHeight:function(f){return f.height||h},getWidth:function(f){var v=f.label||" ";return f.width||v.split("").length*r}};function a(l,f){var v=this;if(v.vgap=v.hgap=0,l instanceof a)return l;v.data=l;var b=f.getHGap(l),g=f.getVGap(l);return v.width=f.getWidth(l),v.height=f.getHeight(l),v.id=f.getId(l),v.x=v.y=0,v.depth=0,v.children||(v.children=[]),v.addGap(b,g),v}c.assign(a.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(f,v){var b=this;b.hgap+=f,b.vgap+=v,b.width+=2*f,b.height+=2*v},eachNode:function(f){for(var v=this,b=[v],g;g=b.shift();)f(g),b=g.children.concat(b)},DFTraverse:function(f){this.eachNode(f)},BFTraverse:function(f){for(var v=this,b=[v],g;g=b.shift();)f(g),b=b.concat(g.children)},getBoundingBox:function(){var f={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(v){f.left=Math.min(f.left,v.x),f.top=Math.min(f.top,v.y),f.width=Math.max(f.width,v.x+v.width),f.height=Math.max(f.height,v.y+v.height)}),f},translate:function(f,v){f===void 0&&(f=0),v===void 0&&(v=0),this.eachNode(function(b){b.x+=f,b.y+=v})},right2left:function(){var f=this,v=f.getBoundingBox();f.eachNode(function(b){b.x=b.x-(b.x-v.left)*2-b.width}),f.translate(v.width,0)},bottom2top:function(){var f=this,v=f.getBoundingBox();f.eachNode(function(b){b.y=b.y-(b.y-v.top)*2-b.height}),f.translate(0,v.height)}});function o(l,f,v){f===void 0&&(f={}),f=c.assign({},i,f);var b=new a(l,f),g=[b],m;if(!v&&!l.collapsed){for(;m=g.shift();)if(!m.data.collapsed){var _=f.getChildren(m.data),M=_?_.length:0;if(m.children=new Array(M),_&&M)for(var x=0;x<M;x++){var y=new a(_[x],f);m.children[x]=y,g.push(y),y.parent=m,y.depth=m.depth+1}}}return b}t.exports=o},function(t,u,s){"use strict";var c=s(6),r=s(20);function h(n,i){var a=Object(r.a)(i),o=a.length;if(Object(c.a)(n))return!o;for(var l=0;l<o;l+=1){var f=a[l];if(i[f]!==n[f]||!(f in n))return!1}return!0}u.a=h},function(t,u,s){"use strict";var c=s(2),r=s(3),h=Object.keys?function(n){return Object.keys(n)}:function(n){var i=[];return Object(c.a)(n,function(a,o){Object(r.a)(n)&&o==="prototype"||i.push(o)}),i};u.a=h},function(t,u,s){"use strict";var c=s(1),r=Array.prototype.splice,h=function(i,a){if(!Object(c.a)(i))return[];for(var o=i?a.length:0,l=o-1;o--;){var f=void 0,v=a[o];(o===l||v!==f)&&(f=v,r.call(i,v,1))}return i};u.a=h},function(t,u,s){"use strict";var c=s(12),r=s(2),h=function(i){var a=[];return Object(r.a)(i,function(o){Object(c.a)(a,o)||a.push(o)}),a};u.a=h},function(t,u,s){"use strict";var c=s(0),r=s(3),h=s(24),n=function(a,o){if(!o)return{0:a};if(!Object(r.a)(o)){var l=Object(c.a)(o)?o:o.replace(/\s+/g,"").split("*");o=function(b){for(var g="_",m=0,_=l.length;m<_;m++)g+=b[l[m]]&&b[l[m]].toString();return g}}var f=Object(h.a)(a,o);return f};u.a=n},function(t,u,s){"use strict";var c=s(2),r=s(0),h=s(3),n=Object.prototype.hasOwnProperty;function i(a,o){if(!o||!Object(r.a)(a))return{};var l={},f=Object(h.a)(o)?o:function(b){return b[o]},v;return Object(c.a)(a,function(b){v=f(b),n.call(l,v)?l[v].push(b):l[v]=[b]}),l}u.a=i},function(t,u,s){"use strict";u.a=function(c,r){return c.hasOwnProperty(r)}},function(t,u,s){"use strict";var c=s(2),r=s(3),h=Object.values?function(n){return Object.values(n)}:function(n){var i=[];return Object(c.a)(n,function(a,o){Object(r.a)(n)&&o==="prototype"||i.push(a)}),i};u.a=h},function(t,u,s){"use strict";var c={}.toString,r=function(n){return c.call(n).replace(/^\[object /,"").replace(/]$/,"")};u.a=r},function(t,u,s){"use strict";var c=Object.prototype,r=function(n){var i=n&&n.constructor,a=typeof i=="function"&&i.prototype||c;return n===a};u.a=r},function(t,u,s){"use strict";var c=s(15),r=s(1),h=s(8),n=function i(a,o){if(a===o)return!0;if(!a||!o||Object(h.a)(a)||Object(h.a)(o))return!1;if(Object(r.a)(a)||Object(r.a)(o)){if(a.length!==o.length)return!1;for(var l=!0,f=0;f<a.length&&(l=i(a[f],o[f]),!!l);f++);return l}if(Object(c.a)(a)||Object(c.a)(o)){var v=Object.keys(a),b=Object.keys(o);if(v.length!==b.length)return!1;for(var l=!0,f=0;f<v.length&&(l=i(a[v[f]],o[v[f]]),!!l);f++);return l}return!1};u.a=n},function(t,u,s){var c=s(18);t.exports=function(r,h){for(var n=c(r.data,h,!0),i=c(r.data,h,!0),a=r.children.length,o=Math.round(a/2),l=h.getSide||function(g,m){return m<o?"right":"left"},f=0;f<a;f++){var v=r.children[f],b=l(v,f);b==="right"?i.children.push(v):n.children.push(v)}return n.eachNode(function(g){g.isRoot()||(g.side="left")}),i.eachNode(function(g){g.isRoot()||(g.side="right")}),{left:n,right:i}}},function(t,u,s){var c={compactBox:s(32),dendrogram:s(114),indented:s(116),mindmap:s(118)};t.exports=c},function(t,u,s){function c(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var r=s(11),h=s(113),n=s(17),i=s(7),a=function(f){c(v,f);function v(){return f.apply(this,arguments)||this}var b=v.prototype;return b.execute=function(){var m=this;return n(m.rootNode,m.options,h)},v}(r),o={};function l(f,v){return v=i.assign({},o,v),new a(f,v).execute()}t.exports=l},function(t,u,s){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var c=s(12);s.d(u,"contains",function(){return c.a}),s.d(u,"includes",function(){return c.a});var r=s(34);s.d(u,"difference",function(){return r.a});var h=s(35);s.d(u,"find",function(){return h.a});var n=s(36);s.d(u,"findIndex",function(){return n.a});var i=s(37);s.d(u,"firstValue",function(){return i.a});var a=s(38);s.d(u,"flatten",function(){return a.a});var o=s(39);s.d(u,"flattenDeep",function(){return o.a});var l=s(40);s.d(u,"getRange",function(){return l.a});var f=s(41);s.d(u,"pull",function(){return f.a});var v=s(21);s.d(u,"pullAt",function(){return v.a});var b=s(42);s.d(u,"reduce",function(){return b.a});var g=s(43);s.d(u,"remove",function(){return g.a});var m=s(44);s.d(u,"sortBy",function(){return m.a});var _=s(45);s.d(u,"union",function(){return _.a});var M=s(22);s.d(u,"uniq",function(){return M.a});var x=s(46);s.d(u,"valuesOfKey",function(){return x.a});var y=s(47);s.d(u,"head",function(){return y.a});var S=s(48);s.d(u,"last",function(){return S.a});var P=s(49);s.d(u,"startsWith",function(){return P.a});var A=s(50);s.d(u,"endsWith",function(){return A.a});var O=s(14);s.d(u,"filter",function(){return O.a});var L=s(51);s.d(u,"every",function(){return L.a});var H=s(52);s.d(u,"some",function(){return H.a});var F=s(53);s.d(u,"group",function(){return F.a});var Z=s(24);s.d(u,"groupBy",function(){return Z.a});var G=s(23);s.d(u,"groupToMap",function(){return G.a});var U=s(54);s.d(u,"getWrapBehavior",function(){return U.a});var Y=s(55);s.d(u,"wrapBehavior",function(){return Y.a});var J=s(56);s.d(u,"number2color",function(){return J.a});var rt=s(57);s.d(u,"parseRadius",function(){return rt.a});var ft=s(58);s.d(u,"clamp",function(){return ft.a});var dt=s(59);s.d(u,"fixedBase",function(){return dt.a});var ut=s(60);s.d(u,"isDecimal",function(){return ut.a});var Lt=s(61);s.d(u,"isEven",function(){return Lt.a});var Ft=s(62);s.d(u,"isInteger",function(){return Ft.a});var Ot=s(63);s.d(u,"isNegative",function(){return Ot.a});var St=s(64);s.d(u,"isNumberEqual",function(){return St.a});var xt=s(65);s.d(u,"isOdd",function(){return xt.a});var At=s(66);s.d(u,"isPositive",function(){return At.a});var nt=s(67);s.d(u,"maxBy",function(){return nt.a});var Mt=s(68);s.d(u,"minBy",function(){return Mt.a});var z=s(69);s.d(u,"mod",function(){return z.a});var Q=s(70);s.d(u,"toDegree",function(){return Q.a});var ht=s(71);s.d(u,"toInteger",function(){return ht.a});var et=s(72);s.d(u,"toRadian",function(){return et.a});var at=s(73);s.d(u,"forIn",function(){return at.a});var gt=s(25);s.d(u,"has",function(){return gt.a});var k=s(74);s.d(u,"hasKey",function(){return k.a});var ot=s(75);s.d(u,"hasValue",function(){return ot.a});var it=s(20);s.d(u,"keys",function(){return it.a});var X=s(19);s.d(u,"isMatch",function(){return X.a});var Et=s(26);s.d(u,"values",function(){return Et.a});var vt=s(76);s.d(u,"lowerCase",function(){return vt.a});var Nt=s(77);s.d(u,"lowerFirst",function(){return Nt.a});var $t=s(78);s.d(u,"substitute",function(){return $t.a});var ee=s(79);s.d(u,"upperCase",function(){return ee.a});var kt=s(80);s.d(u,"upperFirst",function(){return kt.a});var Wt=s(27);s.d(u,"getType",function(){return Wt.a});var ae=s(81);s.d(u,"isArguments",function(){return ae.a});var le=s(0);s.d(u,"isArray",function(){return le.a});var je=s(1);s.d(u,"isArrayLike",function(){return je.a});var Oe=s(82);s.d(u,"isBoolean",function(){return Oe.a});var We=s(83);s.d(u,"isDate",function(){return We.a});var Ye=s(84);s.d(u,"isError",function(){return Ye.a});var wn=s(3);s.d(u,"isFunction",function(){return wn.a});var er=s(85);s.d(u,"isFinite",function(){return er.a});var wr=s(6);s.d(u,"isNil",function(){return wr.a});var on=s(86);s.d(u,"isNull",function(){return on.a});var en=s(5);s.d(u,"isNumber",function(){return en.a});var An=s(13);s.d(u,"isObject",function(){return An.a});var jn=s(15);s.d(u,"isObjectLike",function(){return jn.a});var pr=s(9);s.d(u,"isPlainObject",function(){return pr.a});var di=s(28);s.d(u,"isPrototype",function(){return di.a});var Ce=s(87);s.d(u,"isRegExp",function(){return Ce.a});var Me=s(8);s.d(u,"isString",function(){return Me.a});var Qt=s(4);s.d(u,"isType",function(){return Qt.a});var pe=s(88);s.d(u,"isUndefined",function(){return pe.a});var Vt=s(89);s.d(u,"isElement",function(){return Vt.a});var re=s(90);s.d(u,"requestAnimationFrame",function(){return re.a});var Te=s(91);s.d(u,"clearAnimationFrame",function(){return Te.a});var ue=s(92);s.d(u,"augment",function(){return ue.a});var xe=s(93);s.d(u,"clone",function(){return xe.a});var Ke=s(94);s.d(u,"debounce",function(){return Ke.a});var Rn=s(95);s.d(u,"memoize",function(){return Rn.a});var tr=s(96);s.d(u,"deepMix",function(){return tr.a});var Pn=s(2);s.d(u,"each",function(){return Pn.a});var dn=s(97);s.d(u,"extend",function(){return dn.a});var Ar=s(98);s.d(u,"indexOf",function(){return Ar.a});var or=s(99);s.d(u,"isEmpty",function(){return or.a});var cn=s(29);s.d(u,"isEqual",function(){return cn.a});var Pr=s(100);s.d(u,"isEqualWith",function(){return Pr.a});var Sr=s(101);s.d(u,"map",function(){return Sr.a});var Re=s(102);s.d(u,"mapValues",function(){return Re.a});var $e=s(16);s.d(u,"mix",function(){return $e.a}),s.d(u,"assign",function(){return $e.a});var Ve=s(103);s.d(u,"get",function(){return Ve.a});var En=s(104);s.d(u,"set",function(){return En.a});var xn=s(105);s.d(u,"pick",function(){return xn.a});var Nn=s(106);s.d(u,"throttle",function(){return Nn.a});var mn=s(107);s.d(u,"toArray",function(){return mn.a});var Dn=s(10);s.d(u,"toString",function(){return Dn.a});var $n=s(108);s.d(u,"uniqueId",function(){return $n.a});var Hn=s(109);s.d(u,"noop",function(){return Hn.a});var _n=s(110);s.d(u,"identity",function(){return _n.a});var br=s(111);s.d(u,"size",function(){return br.a});var yr=s(112);s.d(u,"Cache",function(){return yr.a})},function(t,u,s){"use strict";var c=s(14),r=s(12),h=function(i,a){return a===void 0&&(a=[]),Object(c.a)(i,function(o){return!Object(r.a)(a,o)})};u.a=h},function(t,u,s){"use strict";var c=s(3),r=s(19),h=s(0),n=s(9);function i(a,o){if(!Object(h.a)(a))return null;var l;if(Object(c.a)(o)&&(l=o),Object(n.a)(o)&&(l=function(b){return Object(r.a)(b,o)}),l){for(var f=0;f<a.length;f+=1)if(l(a[f]))return a[f]}return null}u.a=i},function(t,u,s){"use strict";function c(r,h,n){n===void 0&&(n=0);for(var i=n;i<r.length;i++)if(h(r[i],i))return i;return-1}u.a=c},function(t,u,s){"use strict";var c=s(6),r=s(0),h=function(i,a){for(var o=null,l=0;l<i.length;l++){var f=i[l],v=f[a];if(!Object(c.a)(v)){Object(r.a)(v)?o=v[0]:o=v;break}}return o};u.a=h},function(t,u,s){"use strict";var c=s(0),r=function(n){if(!Object(c.a)(n))return[];for(var i=[],a=0;a<n.length;a++)i=i.concat(n[a]);return i};u.a=r},function(t,u,s){"use strict";var c=s(0),r=function h(n,i){if(i===void 0&&(i=[]),!Object(c.a)(n))i.push(n);else for(var a=0;a<n.length;a+=1)h(n[a],i);return i};u.a=r},function(t,u,s){"use strict";var c=s(0),r=s(14),h=function(i){if(i=Object(r.a)(i,function(v){return!isNaN(v)}),!i.length)return{min:0,max:0};if(Object(c.a)(i[0])){for(var a=[],o=0;o<i.length;o++)a=a.concat(i[o]);i=a}var l=Math.max.apply(null,i),f=Math.min.apply(null,i);return{min:f,max:l}};u.a=h},function(t,u,s){"use strict";var c=Array.prototype,r=c.splice,h=c.indexOf,n=function(a){for(var o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];for(var f=0;f<o.length;f++)for(var v=o[f],b=-1;(b=h.call(a,v))>-1;)r.call(a,b,1);return a};u.a=n},function(t,u,s){"use strict";var c=s(2),r=s(0),h=s(9),n=function(a,o,l){if(!Object(r.a)(a)&&!Object(h.a)(a))return a;var f=l;return Object(c.a)(a,function(v,b){f=o(f,v,b)}),f};u.a=n},function(t,u,s){"use strict";var c=s(1),r=s(21),h=function(i,a){var o=[];if(!Object(c.a)(i))return o;for(var l=-1,f=[],v=i.length;++l<v;){var b=i[l];a(b,l,i)&&(o.push(b),f.push(l))}return Object(r.a)(i,f),o};u.a=h},function(t,u,s){"use strict";var c=s(0),r=s(8),h=s(3);function n(i,a){var o;if(Object(h.a)(a))o=function(v,b){return a(v)-a(b)};else{var l=[];Object(r.a)(a)?l.push(a):Object(c.a)(a)&&(l=a),o=function(v,b){for(var g=0;g<l.length;g+=1){var m=l[g];if(v[m]>b[m])return 1;if(v[m]<b[m])return-1}return 0}}return i.sort(o),i}u.a=n},function(t,u,s){"use strict";var c=s(22),r=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return Object(c.a)([].concat.apply([],n))};u.a=r},function(t,u,s){"use strict";var c=s(2),r=s(0),h=s(6);u.a=function(n,i){var a=[],o={};return n.forEach(function(l){var f=l[i];Object(h.a)(f)||(Object(r.a)(f)||(f=[f]),Object(c.a)(f,function(v){o[v]||(a.push(v),o[v]=!0)}))}),a}},function(t,u,s){"use strict";u.a=r;var c=s(1);function r(h){if(Object(c.a)(h))return h[0]}},function(t,u,s){"use strict";u.a=r;var c=s(1);function r(h){if(Object(c.a)(h)){var n=h;return n[n.length-1]}}},function(t,u,s){"use strict";var c=s(0),r=s(8);function h(n,i){return Object(c.a)(n)||Object(r.a)(n)?n[0]===i:!1}u.a=h},function(t,u,s){"use strict";var c=s(0),r=s(8);function h(n,i){return Object(c.a)(n)||Object(r.a)(n)?n[n.length-1]===i:!1}u.a=h},function(t,u,s){"use strict";var c=function(h,n){for(var i=0;i<h.length;i++)if(!n(h[i],i))return!1;return!0};u.a=c},function(t,u,s){"use strict";var c=function(h,n){for(var i=0;i<h.length;i++)if(n(h[i],i))return!0;return!1};u.a=c},function(t,u,s){"use strict";var c=s(23);u.a=function(r,h){if(!h)return[r];var n=Object(c.a)(r,h),i=[];for(var a in n)i.push(n[a]);return i}},function(t,u,s){"use strict";function c(r,h){return r["_wrap_"+h]}u.a=c},function(t,u,s){"use strict";function c(r,h){if(r["_wrap_"+h])return r["_wrap_"+h];var n=function(a){r[h](a)};return r["_wrap_"+h]=n,n}u.a=c},function(t,u,s){"use strict";var c={};function r(h){var n=c[h];if(!n){for(var i=h.toString(16),a=i.length;a<6;a++)i="0"+i;n="#"+i,c[h]=n}return n}u.a=r},function(t,u,s){"use strict";var c=s(0);function r(h){var n=0,i=0,a=0,o=0;return Object(c.a)(h)?h.length===1?n=i=a=o=h[0]:h.length===2?(n=a=h[0],i=o=h[1]):h.length===3?(n=h[0],i=o=h[1],a=h[2]):(n=h[0],i=h[1],a=h[2],o=h[3]):n=i=a=o=h,{r1:n,r2:i,r3:a,r4:o}}u.a=r},function(t,u,s){"use strict";var c=function(h,n,i){return h<n?n:h>i?i:h};u.a=c},function(t,u,s){"use strict";var c=function(h,n){var i=n.toString(),a=i.indexOf(".");if(a===-1)return Math.round(h);var o=i.substr(a+1).length;return o>20&&(o=20),parseFloat(h.toFixed(o))};u.a=c},function(t,u,s){"use strict";var c=s(5),r=function(n){return Object(c.a)(n)&&n%1!=0};u.a=r},function(t,u,s){"use strict";var c=s(5),r=function(n){return Object(c.a)(n)&&n%2==0};u.a=r},function(t,u,s){"use strict";var c=s(5),r=Number.isInteger?Number.isInteger:function(h){return Object(c.a)(h)&&h%1==0};u.a=r},function(t,u,s){"use strict";var c=s(5),r=function(n){return Object(c.a)(n)&&n<0};u.a=r},function(t,u,s){"use strict";u.a=r;var c=1e-5;function r(h,n,i){return i===void 0&&(i=c),Math.abs(h-n)<i}},function(t,u,s){"use strict";var c=s(5),r=function(n){return Object(c.a)(n)&&n%2!=0};u.a=r},function(t,u,s){"use strict";var c=s(5),r=function(n){return Object(c.a)(n)&&n>0};u.a=r},function(t,u,s){"use strict";var c=s(2),r=s(0),h=s(3);u.a=function(n,i){if(!!Object(r.a)(n)){var a=n[0],o;Object(h.a)(i)?o=i(n[0]):o=n[0][i];var l;return Object(c.a)(n,function(f){Object(h.a)(i)?l=i(f):l=f[i],l>o&&(a=f,o=l)}),a}}},function(t,u,s){"use strict";var c=s(2),r=s(0),h=s(3);u.a=function(n,i){if(!!Object(r.a)(n)){var a=n[0],o;Object(h.a)(i)?o=i(n[0]):o=n[0][i];var l;return Object(c.a)(n,function(f){Object(h.a)(i)?l=i(f):l=f[i],l<o&&(a=f,o=l)}),a}}},function(t,u,s){"use strict";var c=function(h,n){return(h%n+n)%n};u.a=c},function(t,u,s){"use strict";var c=180/Math.PI,r=function(n){return c*n};u.a=r},function(t,u,s){"use strict";u.a=parseInt},function(t,u,s){"use strict";var c=Math.PI/180,r=function(n){return c*n};u.a=r},function(t,u,s){"use strict";var c=s(2);u.a=c.a},function(t,u,s){"use strict";var c=s(25);u.a=c.a},function(t,u,s){"use strict";var c=s(12),r=s(26);u.a=function(h,n){return Object(c.a)(Object(r.a)(h),n)}},function(t,u,s){"use strict";var c=s(10),r=function(n){return Object(c.a)(n).toLowerCase()};u.a=r},function(t,u,s){"use strict";var c=s(10),r=function(n){var i=Object(c.a)(n);return i.charAt(0).toLowerCase()+i.substring(1)};u.a=r},function(t,u,s){"use strict";function c(r,h){return!r||!h?r:r.replace(/\\?\{([^{}]+)\}/g,function(n,i){return n.charAt(0)==="\\"?n.slice(1):h[i]===void 0?"":h[i]})}u.a=c},function(t,u,s){"use strict";var c=s(10),r=function(n){return Object(c.a)(n).toUpperCase()};u.a=r},function(t,u,s){"use strict";var c=s(10),r=function(n){var i=Object(c.a)(n);return i.charAt(0).toUpperCase()+i.substring(1)};u.a=r},function(t,u,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"Arguments")};u.a=r},function(t,u,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"Boolean")};u.a=r},function(t,u,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"Date")};u.a=r},function(t,u,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"Error")};u.a=r},function(t,u,s){"use strict";var c=s(5);u.a=function(r){return Object(c.a)(r)&&isFinite(r)}},function(t,u,s){"use strict";var c=function(h){return h===null};u.a=c},function(t,u,s){"use strict";var c=s(4),r=function(n){return Object(c.a)(n,"RegExp")};u.a=r},function(t,u,s){"use strict";var c=function(h){return h===void 0};u.a=c},function(t,u,s){"use strict";var c=function(h){return h instanceof Element||h instanceof HTMLDocument};u.a=c},function(t,u,s){"use strict";u.a=c;function c(r){var h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(n){return setTimeout(n,16)};return h(r)}},function(t,u,s){"use strict";u.a=c;function c(r){var h=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;h(r)}},function(t,u,s){"use strict";var c=s(16),r=s(3),h=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];for(var o=i[0],l=1;l<i.length;l++){var f=i[l];Object(r.a)(f)&&(f=f.prototype),Object(c.a)(o.prototype,f)}};u.a=h},function(t,u,s){"use strict";var c=s(0),r=function h(n){if(typeof n!="object"||n===null)return n;var i;if(Object(c.a)(n)){i=[];for(var a=0,o=n.length;a<o;a++)typeof n[a]=="object"&&n[a]!=null?i[a]=h(n[a]):i[a]=n[a]}else{i={};for(var l in n)typeof n[l]=="object"&&n[l]!=null?i[l]=h(n[l]):i[l]=n[l]}return i};u.a=r},function(t,u,s){"use strict";function c(r,h,n){var i;return function(){var a=this,o=arguments,l=function(){i=null,n||r.apply(a,o)},f=n&&!i;clearTimeout(i),i=setTimeout(l,h),f&&r.apply(a,o)}}u.a=c},function(t,u,s){"use strict";var c=s(3);u.a=function(r,h){if(!Object(c.a)(r))throw new TypeError("Expected a function");var n=function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var l=h?h.apply(this,a):a[0],f=i.cache;if(f.has(l))return f.get(l);var v=r.apply(this,a);return f.set(l,v),v};return n.cache=new Map,n}},function(t,u,s){"use strict";var c=s(0),r=s(9),h=5;function n(a,o,l,f){l=l||0,f=f||h;for(var v in o)if(o.hasOwnProperty(v)){var b=o[v];b!==null&&Object(r.a)(b)?(Object(r.a)(a[v])||(a[v]={}),l<f?n(a[v],b,l+1,f):a[v]=o[v]):Object(c.a)(b)?(a[v]=[],a[v]=a[v].concat(b)):b!==void 0&&(a[v]=b)}}var i=function(o){for(var l=[],f=1;f<arguments.length;f++)l[f-1]=arguments[f];for(var v=0;v<l.length;v+=1)n(o,l[v]);return o};u.a=i},function(t,u,s){"use strict";var c=s(16),r=s(3),h=function(i,a,o,l){Object(r.a)(a)||(o=a,a=i,i=function(){});var f=Object.create?function(b,g){return Object.create(b,{constructor:{value:g}})}:function(b,g){function m(){}m.prototype=b;var _=new m;return _.constructor=g,_},v=f(a.prototype,i);return i.prototype=Object(c.a)(v,i.prototype),i.superclass=f(a.prototype,a),Object(c.a)(v,o),Object(c.a)(i,l),i};u.a=h},function(t,u,s){"use strict";var c=s(1),r=function(n,i){if(!Object(c.a)(n))return-1;var a=Array.prototype.indexOf;if(a)return a.call(n,i);for(var o=-1,l=0;l<n.length;l++)if(n[l]===i){o=l;break}return o};u.a=r},function(t,u,s){"use strict";var c=s(6),r=s(1),h=s(27),n=s(28),i=Object.prototype.hasOwnProperty;function a(o){if(Object(c.a)(o))return!0;if(Object(r.a)(o))return!o.length;var l=Object(h.a)(o);if(l==="Map"||l==="Set")return!o.size;if(Object(n.a)(o))return!Object.keys(o).length;for(var f in o)if(i.call(o,f))return!1;return!0}u.a=a},function(t,u,s){"use strict";var c=s(3),r=s(29);u.a=function(h,n,i){return Object(c.a)(i)?!!i(h,n):Object(r.a)(h,n)}},function(t,u,s){"use strict";var c=s(2),r=s(1),h=function(i,a){if(!Object(r.a)(i))return i;var o=[];return Object(c.a)(i,function(l,f){o.push(a(l,f))}),o};u.a=h},function(t,u,s){"use strict";var c=s(6),r=s(13),h=function(i){return i};u.a=function(n,i){i===void 0&&(i=h);var a={};return Object(r.a)(n)&&!Object(c.a)(n)&&Object.keys(n).forEach(function(o){a[o]=i(n[o],o)}),a}},function(t,u,s){"use strict";var c=s(8);u.a=function(r,h,n){for(var i=0,a=Object(c.a)(h)?h.split("."):h;r&&i<a.length;)r=r[a[i++]];return r===void 0||i<a.length?n:r}},function(t,u,s){"use strict";var c=s(13),r=s(8),h=s(5);u.a=function(n,i,a){var o=n,l=Object(r.a)(i)?i.split("."):i;return l.forEach(function(f,v){v<l.length-1?(Object(c.a)(o[f])||(o[f]=Object(h.a)(l[v+1])?[]:{}),o=o[f]):o[f]=a}),n}},function(t,u,s){"use strict";var c=s(2),r=s(9),h=Object.prototype.hasOwnProperty;u.a=function(n,i){if(n===null||!Object(r.a)(n))return{};var a={};return Object(c.a)(i,function(o){h.call(n,o)&&(a[o]=n[o])}),a}},function(t,u,s){"use strict";u.a=function(c,r,h){var n,i,a,o,l=0;h||(h={});var f=function(){l=h.leading===!1?0:Date.now(),n=null,o=c.apply(i,a),n||(i=a=null)},v=function(){var g=Date.now();!l&&h.leading===!1&&(l=g);var m=r-(g-l);return i=this,a=arguments,m<=0||m>r?(n&&(clearTimeout(n),n=null),l=g,o=c.apply(i,a),n||(i=a=null)):!n&&h.trailing!==!1&&(n=setTimeout(f,m)),o};return v.cancel=function(){clearTimeout(n),l=0,n=i=a=null},v}},function(t,u,s){"use strict";var c=s(1);u.a=function(r){return Object(c.a)(r)?Array.prototype.slice.call(r):[]}},function(t,u,s){"use strict";var c={};u.a=function(r){return r=r||"g",c[r]?c[r]+=1:c[r]=1,r+c[r]}},function(t,u,s){"use strict";u.a=function(){}},function(t,u,s){"use strict";u.a=function(c){return c}},function(t,u,s){"use strict";u.a=h;var c=s(6),r=s(1);function h(n){return Object(c.a)(n)?0:Object(r.a)(n)?n.length:Object.keys(n).length}},function(t,u,s){"use strict";var c=function(){function r(){this.map={}}return r.prototype.has=function(h){return this.map[h]!==void 0},r.prototype.get=function(h,n){var i=this.map[h];return i===void 0?n:i},r.prototype.set=function(h,n){this.map[h]=n},r.prototype.clear=function(){this.map={}},r.prototype.delete=function(h){delete this.map[h]},r.prototype.size=function(){return Object.keys(this.map).length},r}();u.a=c},function(t,u){function s(a,o,l,f){f===void 0&&(f=[]);var v=this;v.w=a||0,v.h=o||0,v.y=l||0,v.x=0,v.c=f||[],v.cs=f.length,v.prelim=0,v.mod=0,v.shift=0,v.change=0,v.tl=null,v.tr=null,v.el=null,v.er=null,v.msel=0,v.mser=0}s.fromNode=function(a,o){if(!a)return null;var l=[];return a.children.forEach(function(f){l.push(s.fromNode(f,o))}),o?new s(a.height,a.width,a.x,l):new s(a.width,a.height,a.y,l)};function c(a,o,l){l?a.y+=o:a.x+=o,a.children.forEach(function(f){c(f,o,l)})}function r(a,o){var l=o?a.y:a.x;return a.children.forEach(function(f){l=Math.min(r(f,o),l)}),l}function h(a,o){var l=r(a,o);c(a,-l,o)}function n(a,o,l){l?o.y=a.x:o.x=a.x,a.c.forEach(function(f,v){n(f,o.children[v],l)})}function i(a,o,l){l===void 0&&(l=0),o?(a.x=l,l+=a.width):(a.y=l,l+=a.height),a.children.forEach(function(f){i(f,o,l)})}t.exports=function(a,o){o===void 0&&(o={});var l=o.isHorizontal;function f(F){if(F.cs===0){v(F);return}f(F.c[0]);for(var Z=L(M(F.c[0].el),0,null),G=1;G<F.cs;++G){f(F.c[G]);var U=M(F.c[G].er);b(F,G,Z),Z=L(U,G,Z)}S(F),v(F)}function v(F){F.cs===0?(F.el=F,F.er=F,F.msel=F.mser=0):(F.el=F.c[0].el,F.msel=F.c[0].msel,F.er=F.c[F.cs-1].er,F.mser=F.c[F.cs-1].mser)}function b(F,Z,G){for(var U=F.c[Z-1],Y=U.mod,J=F.c[Z],rt=J.mod;U!==null&&J!==null;){M(U)>G.low&&(G=G.nxt);var ft=Y+U.prelim+U.w-(rt+J.prelim);ft>0&&(rt+=ft,g(F,Z,G.index,ft));var dt=M(U),ut=M(J);dt<=ut&&(U=_(U),U!==null&&(Y+=U.mod)),dt>=ut&&(J=m(J),J!==null&&(rt+=J.mod))}!U&&!!J?x(F,Z,J,rt):!!U&&!J&&y(F,Z,U,Y)}function g(F,Z,G,U){F.c[Z].mod+=U,F.c[Z].msel+=U,F.c[Z].mser+=U,A(F,Z,G,U)}function m(F){return F.cs===0?F.tl:F.c[0]}function _(F){return F.cs===0?F.tr:F.c[F.cs-1]}function M(F){return F.y+F.h}function x(F,Z,G,U){var Y=F.c[0].el;Y.tl=G;var J=U-G.mod-F.c[0].msel;Y.mod+=J,Y.prelim-=J,F.c[0].el=F.c[Z].el,F.c[0].msel=F.c[Z].msel}function y(F,Z,G,U){var Y=F.c[Z].er;Y.tr=G;var J=U-G.mod-F.c[Z].mser;Y.mod+=J,Y.prelim-=J,F.c[Z].er=F.c[Z-1].er,F.c[Z].mser=F.c[Z-1].mser}function S(F){F.prelim=(F.c[0].prelim+F.c[0].mod+F.c[F.cs-1].mod+F.c[F.cs-1].prelim+F.c[F.cs-1].w)/2-F.w/2}function P(F,Z){Z+=F.mod,F.x=F.prelim+Z,O(F);for(var G=0;G<F.cs;G++)P(F.c[G],Z)}function A(F,Z,G,U){if(G!==Z-1){var Y=Z-G;F.c[G+1].shift+=U/Y,F.c[Z].shift-=U/Y,F.c[Z].change-=U-U/Y}}function O(F){for(var Z=0,G=0,U=0;U<F.cs;U++)Z+=F.c[U].shift,G+=Z+F.c[U].change,F.c[U].mod+=G}function L(F,Z,G){for(;G!==null&&F>=G.low;)G=G.nxt;return{low:F,index:Z,nxt:G}}i(a,l);var H=s.fromNode(a,l);return f(H),P(H,0),n(H,a,l),h(a,l),a}},function(t,u,s){function c(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var r=s(11),h=s(115),n=s(17),i=s(7),a=function(f){c(v,f);function v(){return f.apply(this,arguments)||this}var b=v.prototype;return b.execute=function(){var m=this;return m.rootNode.width=0,n(m.rootNode,m.options,h)},v}(r),o={};function l(f,v){return v=i.assign({},o,v),new a(f,v).execute()}t.exports=l},function(t,u,s){var c=s(7);function r(i,a){i===void 0&&(i=0),a===void 0&&(a=[]);var o=this;o.x=o.y=0,o.leftChild=o.rightChild=null,o.height=0,o.children=a}var h={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function n(i,a,o){o?(a.x=i.x,a.y=i.y):(a.x=i.y,a.y=i.x),i.children.forEach(function(l,f){n(l,a.children[f],o)})}t.exports=function(i,a){a===void 0&&(a={}),a=c.assign({},h,a);var o=0;function l(m){if(!m)return null;m.width=0,m.depth&&m.depth>o&&(o=m.depth);var _=m.children,M=_.length,x=new r(m.height,[]);return _.forEach(function(y,S){var P=l(y);x.children.push(P),S===0&&(x.leftChild=P),S===M-1&&(x.rightChild=P)}),x.originNode=m,x.isLeaf=m.isLeaf(),x}function f(m){if(m.isLeaf||m.children.length===0)m.drawingDepth=o;else{var _=m.children.map(function(x){return f(x)}),M=Math.min.apply(null,_);m.drawingDepth=M-1}return m.drawingDepth}var v;function b(m){m.x=m.drawingDepth*a.rankSep,m.isLeaf?(m.y=0,v&&(m.y=v.y+v.height+a.nodeSep,m.originNode.parent!==v.originNode.parent&&(m.y+=a.subTreeSep)),v=m):(m.children.forEach(function(_){b(_)}),m.y=(m.leftChild.y+m.rightChild.y)/2)}var g=l(i);return f(g),b(g),n(g,i,a.isHorizontal),i}},function(t,u,s){function c(b,g){b.prototype=Object.create(g.prototype),b.prototype.constructor=b,b.__proto__=g}var r=s(11),h=s(117),n=s(30),i=s(7),a=["LR","RL","H"],o=a[0],l=function(b){c(g,b);function g(){return b.apply(this,arguments)||this}var m=g.prototype;return m.execute=function(){var M=this,x=M.options,y=M.rootNode;x.isHorizontal=!0;var S=x.indent,P=S===void 0?20:S,A=x.dropCap,O=A===void 0?!0:A,L=x.direction||o;if(L&&a.indexOf(L)===-1)throw new TypeError("Invalid direction: "+L);if(L===a[0])h(y,P,O);else if(L===a[1])h(y,P,O),y.right2left();else if(L===a[2]){var H=n(y,x),F=H.left,Z=H.right;h(F,P,O),F.right2left(),h(Z,P,O);var G=F.getBoundingBox();Z.translate(G.width,0),y.x=Z.x-y.width/2}return y},g}(r),f={};function v(b,g){return g=i.assign({},f,g),new l(b,g).execute()}t.exports=v},function(t,u){function s(c,r,h,n){if(!n)try{if(c.id===c.parent.children[0].id){c.x+=h*c.depth,c.y=r?r.y:0;return}}catch(i){}c.x+=h*c.depth,c.y=r?r.y+r.height:0}t.exports=function(c,r,h){var n=null;c.eachNode(function(i){s(i,n,r,h),n=i})}},function(t,u,s){function c(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var r=s(11),h=s(119),n=s(17),i=s(7),a=function(f){c(v,f);function v(){return f.apply(this,arguments)||this}var b=v.prototype;return b.execute=function(){var m=this;return n(m.rootNode,m.options,h)},v}(r),o={};function l(f,v){return v=i.assign({},o,v),new a(f,v).execute()}t.exports=l},function(t,u,s){var c=s(7);function r(i,a){var o=0;return i.children.length?i.children.forEach(function(l){o+=r(l,a)}):o=i.height,i._subTreeSep=a.getSubTreeSep(i.data),i.totalHeight=Math.max(i.height,o)+2*i._subTreeSep,i.totalHeight}function h(i){var a=i.children,o=a.length;if(o){a.forEach(function(m){h(m)});var l=a[0],f=a[o-1],v=f.y-l.y+f.height,b=0;if(a.forEach(function(m){b+=m.totalHeight}),v>i.height)i.y=l.y+v/2-i.height/2;else if(a.length!==1||i.height>b){var g=i.y+(i.height-v)/2-l.y;a.forEach(function(m){m.translate(0,g)})}else i.y=(l.y+l.height/2+f.y+f.height/2)/2-i.height/2}}var n={getSubTreeSep:function(){return 0}};t.exports=function(i,a){a===void 0&&(a={}),a=c.assign({},n,a),i.parent={x:0,width:0,height:0,y:0},i.BFTraverse(function(o){o.x=o.parent.x+o.parent.width}),i.parent=null,r(i,a),i.startY=0,i.y=i.totalHeight/2-i.height/2,i.eachNode(function(o){var l=o.children,f=l.length;if(f){var v=l[0];if(v.startY=o.startY+o._subTreeSep,f===1)v.y=o.y+o.height/2-v.height/2;else{v.y=v.startY+v.totalHeight/2-v.height/2;for(var b=1;b<f;b++){var g=l[b];g.startY=l[b-1].startY+l[b-1].totalHeight,g.y=g.startY+g.totalHeight/2-g.height/2}}}}),h(i)}}])})},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/augment.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=function(){for(var r=[],h=0;h<arguments.length;h++)r[h]=arguments[h];for(var n=r[0],i=1;i<r.length;i++){var a=r[i];u.default(a)&&(a=a.prototype),t.default(n.prototype,a)}};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/cache.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function u(){this.map={}}return u.prototype.has=function(s){return this.map[s]!==void 0},u.prototype.get=function(s,c){var r=this.map[s];return r===void 0?c:r},u.prototype.set=function(s,c){this.map[s]=c},u.prototype.clear=function(){this.map={}},u.prototype.delete=function(s){delete this.map[s]},u.prototype.size=function(){return Object.keys(this.map).length},u}();T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/clamp.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,c,r){return s<c?c:s>r?r:s};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/clear-animation-frame.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u){var s=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;s(u)}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/clone.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=function s(c){if(typeof c!="object"||c===null)return c;var r;if(t.default(c)){r=[];for(var h=0,n=c.length;h<n;h++)typeof c[h]=="object"&&c[h]!=null?r[h]=s(c[h]):r[h]=c[h]}else{r={};for(var i in c)typeof c[i]=="object"&&c[i]!=null?r[i]=s(c[i]):r[i]=c[i]}return r};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),u=function(c,r){return t.default(c)?c.indexOf(r)>-1:!1};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/debounce.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u,s,c){var r;return function(){var h=this,n=arguments,i=function(){r=null,c||u.apply(h,n)},a=c&&!r;clearTimeout(r),r=setTimeout(i,s),a&&u.apply(h,n)}}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/deep-mix.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js"),s=5;function c(h,n,i,a){i=i||0,a=a||s;for(var o in n)if(n.hasOwnProperty(o)){var l=n[o];l!==null&&u.default(l)?(u.default(h[o])||(h[o]={}),i<a?c(h[o],l,i+1,a):h[o]=n[o]):t.default(l)?(h[o]=[],h[o]=h[o].concat(l)):l!==void 0&&(h[o]=l)}}var r=function(n){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];for(var o=0;o<i.length;o+=1)c(n,i[o]);return n};T.default=r},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/difference.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/filter.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js"),s=function(r,h){return h===void 0&&(h=[]),t.default(r,function(n){return!u.default(h,n)})};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js");function s(c,r){if(!!c){var h;if(t.default(c))for(var n=0,i=c.length;n<i&&(h=r(c[n],n),h!==!1);n++);else if(u.default(c)){for(var a in c)if(c.hasOwnProperty(a)&&(h=r(c[a],a),h===!1))break}}}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/ends-with.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");function s(c,r){return t.default(c)||u.default(c)?c[c.length-1]===r:!1}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/every.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,c){for(var r=0;r<s.length;r++)if(!c(s[r],r))return!1;return!0};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/extend.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=function(r,h,n,i){u.default(h)||(n=h,h=r,r=function(){});var a=Object.create?function(l,f){return Object.create(l,{constructor:{value:f}})}:function(l,f){function v(){}v.prototype=l;var b=new v;return b.constructor=f,b},o=a(h.prototype,r);return r.prototype=t.default(o,r.prototype),r.superclass=a(h.prototype,h),t.default(o,n),t.default(r,i),r};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/filter.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),u=function(c,r){if(!t.default(c))return c;for(var h=[],n=0;n<c.length;n++){var i=c[n];r(i,n)&&h.push(i)}return h};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/find-index.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u,s,c){c===void 0&&(c=0);for(var r=c;r<u.length;r++)if(s(u[r],r))return r;return-1}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/find.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-match.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),c=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js");function r(h,n){if(!s.default(h))return null;var i;if(t.default(n)&&(i=n),c.default(n)&&(i=function(l){return u.default(l,n)}),i){for(var a=0;a<h.length;a+=1)if(i(h[a]))return h[a]}return null}T.default=r},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/first-value.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),s=function(r,h){for(var n=null,i=0;i<r.length;i++){var a=r[i],o=a[h];if(!t.default(o)){u.default(o)?n=o[0]:n=o;break}}return n};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/fixed-base.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,c){var r=c.toString(),h=r.indexOf(".");if(h===-1)return Math.round(s);var n=r.substr(h+1).length;return n>20&&(n=20),parseFloat(s.toFixed(n))};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten-deep.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=function s(c,r){if(r===void 0&&(r=[]),!t.default(c))r.push(c);else for(var h=0;h<c.length;h+=1)s(c[h],r);return r};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=function(c){if(!t.default(c))return[];for(var r=[],h=0;h<c.length;h++)r=r.concat(c[h]);return r};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/for-in.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js");T.default=t.default},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-range.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=function(c){var r=c.filter(function(o){return!isNaN(o)});if(!r.length)return{min:0,max:0};if(t.default(c[0])){for(var h=[],n=0;n<c.length;n++)h=h.concat(c[n]);r=h}var i=Math.max.apply(null,r),a=Math.min.apply(null,r);return{min:a,max:i}};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-type.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={}.toString,u=function(c){return t.call(c).replace(/^\[object /,"").replace(/]$/,"")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-wrap-behavior.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u,s){return u["_wrap_"+s]}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/get.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");T.default=function(u,s,c){for(var r=0,h=t.default(s)?s.split("."):s;u&&r<h.length;)u=u[h[r++]];return u===void 0||r<h.length?c:u}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-by.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=Object.prototype.hasOwnProperty;function c(r,h){if(!h||!t.default(r))return{};for(var n={},i=u.default(h)?h:function(f){return f[h]},a,o=0;o<r.length;o++){var l=r[o];a=i(l),s.call(n,a)?n[a].push(l):n[a]=[l]}return n}T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-to-map.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-by.js"),c=function(h,n){if(!n)return{0:h};if(!u.default(n)){var i=t.default(n)?n:n.replace(/\s+/g,"").split("*");n=function(l){for(var f="_",v=0,b=i.length;v<b;v++)f+=l[i[v]]&&l[i[v]].toString();return f}}var a=s.default(h,n);return a};T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/group.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-to-map.js");T.default=function(u,s){if(!s)return[u];var c=t.default(u,s),r=[];for(var h in c)r.push(c[h]);return r}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-key.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has.js");T.default=t.default},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-value.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/values.js");T.default=function(s,c){return t.default(u.default(s),c)}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/has.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t,u){return t.hasOwnProperty(u)}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/head.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");function u(s){if(t.default(s))return s[0]}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/identity.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t){return t}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/index-of.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),u=function(c,r){if(!t.default(c))return-1;var h=Array.prototype.indexOf;if(h)return h.call(c,r);for(var n=-1,i=0;i<c.length;i++)if(c[i]===r){n=i;break}return n};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js");Object.defineProperty(T,"contains",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(T,"includes",{enumerable:!0,get:function(){return t.default}});var u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/difference.js");Object.defineProperty(T,"difference",{enumerable:!0,get:function(){return u.default}});var s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/find.js");Object.defineProperty(T,"find",{enumerable:!0,get:function(){return s.default}});var c=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/find-index.js");Object.defineProperty(T,"findIndex",{enumerable:!0,get:function(){return c.default}});var r=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/first-value.js");Object.defineProperty(T,"firstValue",{enumerable:!0,get:function(){return r.default}});var h=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten.js");Object.defineProperty(T,"flatten",{enumerable:!0,get:function(){return h.default}});var n=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/flatten-deep.js");Object.defineProperty(T,"flattenDeep",{enumerable:!0,get:function(){return n.default}});var i=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-range.js");Object.defineProperty(T,"getRange",{enumerable:!0,get:function(){return i.default}});var a=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull.js");Object.defineProperty(T,"pull",{enumerable:!0,get:function(){return a.default}});var o=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull-at.js");Object.defineProperty(T,"pullAt",{enumerable:!0,get:function(){return o.default}});var l=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/reduce.js");Object.defineProperty(T,"reduce",{enumerable:!0,get:function(){return l.default}});var f=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/remove.js");Object.defineProperty(T,"remove",{enumerable:!0,get:function(){return f.default}});var v=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/sort-by.js");Object.defineProperty(T,"sortBy",{enumerable:!0,get:function(){return v.default}});var b=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/union.js");Object.defineProperty(T,"union",{enumerable:!0,get:function(){return b.default}});var g=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/uniq.js");Object.defineProperty(T,"uniq",{enumerable:!0,get:function(){return g.default}});var m=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/values-of-key.js");Object.defineProperty(T,"valuesOfKey",{enumerable:!0,get:function(){return m.default}});var _=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/head.js");Object.defineProperty(T,"head",{enumerable:!0,get:function(){return _.default}});var M=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/last.js");Object.defineProperty(T,"last",{enumerable:!0,get:function(){return M.default}});var x=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/starts-with.js");Object.defineProperty(T,"startsWith",{enumerable:!0,get:function(){return x.default}});var y=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/ends-with.js");Object.defineProperty(T,"endsWith",{enumerable:!0,get:function(){return y.default}});var S=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/filter.js");Object.defineProperty(T,"filter",{enumerable:!0,get:function(){return S.default}});var P=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/every.js");Object.defineProperty(T,"every",{enumerable:!0,get:function(){return P.default}});var A=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/some.js");Object.defineProperty(T,"some",{enumerable:!0,get:function(){return A.default}});var O=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group.js");Object.defineProperty(T,"group",{enumerable:!0,get:function(){return O.default}});var L=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-by.js");Object.defineProperty(T,"groupBy",{enumerable:!0,get:function(){return L.default}});var H=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/group-to-map.js");Object.defineProperty(T,"groupToMap",{enumerable:!0,get:function(){return H.default}});var F=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-wrap-behavior.js");Object.defineProperty(T,"getWrapBehavior",{enumerable:!0,get:function(){return F.default}});var Z=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/wrap-behavior.js");Object.defineProperty(T,"wrapBehavior",{enumerable:!0,get:function(){return Z.default}});var G=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/number2color.js");Object.defineProperty(T,"number2color",{enumerable:!0,get:function(){return G.default}});var U=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/parse-radius.js");Object.defineProperty(T,"parseRadius",{enumerable:!0,get:function(){return U.default}});var Y=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/clamp.js");Object.defineProperty(T,"clamp",{enumerable:!0,get:function(){return Y.default}});var J=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/fixed-base.js");Object.defineProperty(T,"fixedBase",{enumerable:!0,get:function(){return J.default}});var rt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-decimal.js");Object.defineProperty(T,"isDecimal",{enumerable:!0,get:function(){return rt.default}});var ft=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-even.js");Object.defineProperty(T,"isEven",{enumerable:!0,get:function(){return ft.default}});var dt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-integer.js");Object.defineProperty(T,"isInteger",{enumerable:!0,get:function(){return dt.default}});var ut=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-negative.js");Object.defineProperty(T,"isNegative",{enumerable:!0,get:function(){return ut.default}});var Lt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number-equal.js");Object.defineProperty(T,"isNumberEqual",{enumerable:!0,get:function(){return Lt.default}});var Ft=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-odd.js");Object.defineProperty(T,"isOdd",{enumerable:!0,get:function(){return Ft.default}});var Ot=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-positive.js");Object.defineProperty(T,"isPositive",{enumerable:!0,get:function(){return Ot.default}});var St=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/max-by.js");Object.defineProperty(T,"maxBy",{enumerable:!0,get:function(){return St.default}});var xt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/min-by.js");Object.defineProperty(T,"minBy",{enumerable:!0,get:function(){return xt.default}});var At=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mod.js");Object.defineProperty(T,"mod",{enumerable:!0,get:function(){return At.default}});var nt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-degree.js");Object.defineProperty(T,"toDegree",{enumerable:!0,get:function(){return nt.default}});var Mt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-integer.js");Object.defineProperty(T,"toInteger",{enumerable:!0,get:function(){return Mt.default}});var z=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-radian.js");Object.defineProperty(T,"toRadian",{enumerable:!0,get:function(){return z.default}});var Q=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/for-in.js");Object.defineProperty(T,"forIn",{enumerable:!0,get:function(){return Q.default}});var ht=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has.js");Object.defineProperty(T,"has",{enumerable:!0,get:function(){return ht.default}});var et=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-key.js");Object.defineProperty(T,"hasKey",{enumerable:!0,get:function(){return et.default}});var at=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/has-value.js");Object.defineProperty(T,"hasValue",{enumerable:!0,get:function(){return at.default}});var gt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/keys.js");Object.defineProperty(T,"keys",{enumerable:!0,get:function(){return gt.default}});var k=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-match.js");Object.defineProperty(T,"isMatch",{enumerable:!0,get:function(){return k.default}});var ot=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/values.js");Object.defineProperty(T,"values",{enumerable:!0,get:function(){return ot.default}});var it=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-case.js");Object.defineProperty(T,"lowerCase",{enumerable:!0,get:function(){return it.default}});var X=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-first.js");Object.defineProperty(T,"lowerFirst",{enumerable:!0,get:function(){return X.default}});var Et=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/substitute.js");Object.defineProperty(T,"substitute",{enumerable:!0,get:function(){return Et.default}});var vt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-case.js");Object.defineProperty(T,"upperCase",{enumerable:!0,get:function(){return vt.default}});var Nt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-first.js");Object.defineProperty(T,"upperFirst",{enumerable:!0,get:function(){return Nt.default}});var $t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-type.js");Object.defineProperty(T,"getType",{enumerable:!0,get:function(){return $t.default}});var ee=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-arguments.js");Object.defineProperty(T,"isArguments",{enumerable:!0,get:function(){return ee.default}});var kt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js");Object.defineProperty(T,"isArray",{enumerable:!0,get:function(){return kt.default}});var Wt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");Object.defineProperty(T,"isArrayLike",{enumerable:!0,get:function(){return Wt.default}});var ae=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-boolean.js");Object.defineProperty(T,"isBoolean",{enumerable:!0,get:function(){return ae.default}});var le=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-date.js");Object.defineProperty(T,"isDate",{enumerable:!0,get:function(){return le.default}});var je=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-error.js");Object.defineProperty(T,"isError",{enumerable:!0,get:function(){return je.default}});var Oe=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");Object.defineProperty(T,"isFunction",{enumerable:!0,get:function(){return Oe.default}});var We=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-finite.js");Object.defineProperty(T,"isFinite",{enumerable:!0,get:function(){return We.default}});var Ye=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js");Object.defineProperty(T,"isNil",{enumerable:!0,get:function(){return Ye.default}});var wn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-null.js");Object.defineProperty(T,"isNull",{enumerable:!0,get:function(){return wn.default}});var er=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js");Object.defineProperty(T,"isNumber",{enumerable:!0,get:function(){return er.default}});var wr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js");Object.defineProperty(T,"isObject",{enumerable:!0,get:function(){return wr.default}});var on=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js");Object.defineProperty(T,"isObjectLike",{enumerable:!0,get:function(){return on.default}});var en=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js");Object.defineProperty(T,"isPlainObject",{enumerable:!0,get:function(){return en.default}});var An=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-prototype.js");Object.defineProperty(T,"isPrototype",{enumerable:!0,get:function(){return An.default}});var jn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-reg-exp.js");Object.defineProperty(T,"isRegExp",{enumerable:!0,get:function(){return jn.default}});var pr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");Object.defineProperty(T,"isString",{enumerable:!0,get:function(){return pr.default}});var di=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");Object.defineProperty(T,"isType",{enumerable:!0,get:function(){return di.default}});var Ce=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-undefined.js");Object.defineProperty(T,"isUndefined",{enumerable:!0,get:function(){return Ce.default}});var Me=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-element.js");Object.defineProperty(T,"isElement",{enumerable:!0,get:function(){return Me.default}});var Qt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/request-animation-frame.js");Object.defineProperty(T,"requestAnimationFrame",{enumerable:!0,get:function(){return Qt.default}});var pe=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/clear-animation-frame.js");Object.defineProperty(T,"clearAnimationFrame",{enumerable:!0,get:function(){return pe.default}});var Vt=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/augment.js");Object.defineProperty(T,"augment",{enumerable:!0,get:function(){return Vt.default}});var re=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/clone.js");Object.defineProperty(T,"clone",{enumerable:!0,get:function(){return re.default}});var Te=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/debounce.js");Object.defineProperty(T,"debounce",{enumerable:!0,get:function(){return Te.default}});var ue=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/memoize.js");Object.defineProperty(T,"memoize",{enumerable:!0,get:function(){return ue.default}});var xe=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/deep-mix.js");Object.defineProperty(T,"deepMix",{enumerable:!0,get:function(){return xe.default}});var Ke=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js");Object.defineProperty(T,"each",{enumerable:!0,get:function(){return Ke.default}});var Rn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/extend.js");Object.defineProperty(T,"extend",{enumerable:!0,get:function(){return Rn.default}});var tr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index-of.js");Object.defineProperty(T,"indexOf",{enumerable:!0,get:function(){return tr.default}});var Pn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-empty.js");Object.defineProperty(T,"isEmpty",{enumerable:!0,get:function(){return Pn.default}});var dn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal.js");Object.defineProperty(T,"isEqual",{enumerable:!0,get:function(){return dn.default}});var Ar=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal-with.js");Object.defineProperty(T,"isEqualWith",{enumerable:!0,get:function(){return Ar.default}});var or=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/map.js");Object.defineProperty(T,"map",{enumerable:!0,get:function(){return or.default}});var cn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/map-values.js");Object.defineProperty(T,"mapValues",{enumerable:!0,get:function(){return cn.default}});var Pr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js");Object.defineProperty(T,"mix",{enumerable:!0,get:function(){return Pr.default}}),Object.defineProperty(T,"assign",{enumerable:!0,get:function(){return Pr.default}});var Sr=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get.js");Object.defineProperty(T,"get",{enumerable:!0,get:function(){return Sr.default}});var Re=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/set.js");Object.defineProperty(T,"set",{enumerable:!0,get:function(){return Re.default}});var $e=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pick.js");Object.defineProperty(T,"pick",{enumerable:!0,get:function(){return $e.default}});var Ve=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/throttle.js");Object.defineProperty(T,"throttle",{enumerable:!0,get:function(){return Ve.default}});var En=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-array.js");Object.defineProperty(T,"toArray",{enumerable:!0,get:function(){return En.default}});var xn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js");Object.defineProperty(T,"toString",{enumerable:!0,get:function(){return xn.default}});var Nn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/unique-id.js");Object.defineProperty(T,"uniqueId",{enumerable:!0,get:function(){return Nn.default}});var mn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/noop.js");Object.defineProperty(T,"noop",{enumerable:!0,get:function(){return mn.default}});var Dn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/identity.js");Object.defineProperty(T,"identity",{enumerable:!0,get:function(){return Dn.default}});var $n=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/size.js");Object.defineProperty(T,"size",{enumerable:!0,get:function(){return $n.default}});var Hn=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/cache.js");Object.defineProperty(T,"Cache",{enumerable:!0,get:function(){return Hn.default}})},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-arguments.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),u=function(c){return t.default(c,"Arguments")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s!==null&&typeof s!="function"&&isFinite(s.length)};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");T.default=function(u){return Array.isArray?Array.isArray(u):t.default(u,"Array")}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-boolean.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),u=function(c){return t.default(c,"Boolean")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-date.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),u=function(c){return t.default(c,"Date")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-decimal.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),u=function(c){return t.default(c)&&c%1!=0};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-element.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s instanceof Element||s instanceof HTMLDocument};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-empty.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/get-type.js"),c=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-prototype.js"),r=Object.prototype.hasOwnProperty;function h(n){if(t.default(n))return!0;if(u.default(n))return!n.length;var i=s.default(n);if(i==="Map"||i==="Set")return!n.size;if(c.default(n))return!Object.keys(n).length;for(var a in n)if(r.call(n,a))return!1;return!0}T.default=h},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal-with.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal.js");T.default=function(s,c,r){return t.default(r)?!!r(s,c):u.default(s,c)}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-equal.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js"),c=function r(h,n){if(h===n)return!0;if(!h||!n||s.default(h)||s.default(n))return!1;if(u.default(h)||u.default(n)){if(h.length!==n.length)return!1;for(var i=!0,a=0;a<h.length&&(i=r(h[a],n[a]),!!i);a++);return i}if(t.default(h)||t.default(n)){var o=Object.keys(h),l=Object.keys(n);if(o.length!==l.length)return!1;for(var i=!0,a=0;a<o.length&&(i=r(h[o[a]],n[o[a]]),!!i);a++);return i}return!1};T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-error.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),u=function(c){return t.default(c,"Error")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-even.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),u=function(c){return t.default(c)&&c%2==0};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-finite.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js");function u(s){return t.default(s)&&isFinite(s)}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");T.default=function(u){return t.default(u,"Function")}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-integer.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),u=Number.isInteger?Number.isInteger:function(s){return t.default(s)&&s%1==0};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-match.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/keys.js");function s(c,r){var h=u.default(r),n=h.length;if(t.default(c))return!n;for(var i=0;i<n;i+=1){var a=h[i];if(r[a]!==c[a]||!(a in c))return!1}return!0}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-negative.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),u=function(c){return t.default(c)&&c<0};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s==null};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-null.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s===null};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number-equal.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=1e-5;function u(s,c,r){return r===void 0&&(r=t),Math.abs(s-c)<r}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),u=function(c){return t.default(c,"Number")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return typeof s=="object"&&s!==null};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t){var u=typeof t;return t!==null&&u==="object"||u==="function"}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-odd.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),u=function(c){return t.default(c)&&c%2!=0};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object-like.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),s=function(r){if(!t.default(r)||!u.default(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var h=r;Object.getPrototypeOf(h)!==null;)h=Object.getPrototypeOf(h);return Object.getPrototypeOf(r)===h};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-positive.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js"),u=function(c){return t.default(c)&&c>0};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-prototype.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.prototype,u=function(c){var r=c&&c.constructor,h=typeof r=="function"&&r.prototype||t;return c===h};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-reg-exp.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js"),u=function(c){return t.default(c,"RegExp")};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js");T.default=function(u){return t.default(u,"String")}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-type.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={}.toString,u=function(c,r){return t.call(c)==="[object "+r+"]"};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-undefined.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s){return s===void 0};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/keys.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=Object.keys?function(c){return Object.keys(c)}:function(c){var r=[];return t.default(c,function(h,n){u.default(c)&&n==="prototype"||r.push(n)}),r};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/last.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");function u(s){if(t.default(s)){var c=s;return c[c.length-1]}}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-case.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),u=function(c){return t.default(c).toLowerCase()};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/lower-first.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),u=function(c){var r=t.default(c);return r.charAt(0).toLowerCase()+r.substring(1)};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/map-values.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js"),s=function(r){return r};T.default=function(c,r){r===void 0&&(r=s);var h={};return u.default(c)&&!t.default(c)&&Object.keys(c).forEach(function(n){h[n]=r(c[n],n)}),h}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/map.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),u=function(c,r){if(!t.default(c))return c;for(var h=[],n=0;n<c.length;n++){var i=c[n];h.push(r(i,n))}return h};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/max-by.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");T.default=function(c,r){if(!!u.default(c)){var h=c[0],n;s.default(r)?n=r(c[0]):n=c[0][r];var i;return t.default(c,function(a){s.default(r)?i=r(a):i=a[r],i>n&&(h=a,n=i)}),h}}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/memoize.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");T.default=function(u,s){if(!t.default(u))throw new TypeError("Expected a function");var c=function r(){for(var h=[],n=0;n<arguments.length;n++)h[n]=arguments[n];var i=s?s.apply(this,h):h[0],a=r.cache;if(a.has(i))return a.get(i);var o=u.apply(this,h);return a.set(i,o),o};return c.cache=new Map,c}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/min-by.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");T.default=function(c,r){if(!!u.default(c)){var h=c[0],n;s.default(r)?n=r(c[0]):n=c[0][r];var i;return t.default(c,function(a){s.default(r)?i=r(a):i=a[r],i<n&&(h=a,n=i)}),h}}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/mix.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(s,c){for(var r in c)c.hasOwnProperty(r)&&r!=="constructor"&&c[r]!==void 0&&(s[r]=c[r])}function u(s,c,r,h){return c&&t(s,c),r&&t(s,r),h&&t(s,h),s}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/mod.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,c){return(s%c+c)%c};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/noop.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(){}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/number2color.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={};function u(s){var c=t[s];if(!c){for(var r=s.toString(16),h=r.length;h<6;h++)r="0"+r;c="#"+r,t[s]=c}return c}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/parse-radius.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js");function u(s){var c=0,r=0,h=0,n=0;return t.default(s)?s.length===1?c=r=h=n=s[0]:s.length===2?(c=h=s[0],r=n=s[1]):s.length===3?(c=s[0],r=n=s[1],h=s[2]):(c=s[0],r=s[1],h=s[2],n=s[3]):c=r=h=n=s,{r1:c,r2:r,r3:h,r4:n}}T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/pick.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js"),s=Object.prototype.hasOwnProperty;T.default=function(c,r){if(c===null||!u.default(c))return{};var h={};return t.default(r,function(n){s.call(c,n)&&(h[n]=c[n])}),h}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull-at.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),u=Array.prototype.splice,s=function(r,h){if(!t.default(r))return[];for(var n=r?h.length:0,i=n-1;n--;){var a=void 0,o=h[n];(n===i||o!==a)&&(a=o,u.call(r,o,1))}return r};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Array.prototype,u=t.splice,s=t.indexOf,c=function(h){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];for(var a=0;a<n.length;a++)for(var o=n[a],l=-1;(l=s.call(h,o))>-1;)u.call(h,l,1);return h};T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/reduce.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-plain-object.js"),c=function(h,n,i){if(!u.default(h)&&!s.default(h))return h;var a=i;return t.default(h,function(o,l){a=n(a,o,l)}),a};T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/remove.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/pull-at.js"),s=function(r,h){var n=[];if(!t.default(r))return n;for(var i=-1,a=[],o=r.length;++i<o;){var l=r[i];h(l,i,r)&&(n.push(l),a.push(i))}return u.default(r,a),n};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/request-animation-frame.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u){var s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(c){return setTimeout(c,16)};return s(u)}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/set.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-object.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-number.js");T.default=function(c,r,h){var n=c,i=u.default(r)?r.split("."):r;return i.forEach(function(a,o){o<i.length-1?(t.default(n[a])||(n[a]=s.default(i[o+1])?[]:{}),n=n[a]):n[a]=h}),c}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/size.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");function s(c){return t.default(c)?0:u.default(c)?c.length:Object.keys(c).length}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/some.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(s,c){for(var r=0;r<s.length;r++)if(c(s[r],r))return!0;return!1};T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/sort-by.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js"),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js");function c(r,h){var n;if(s.default(h))n=function(o,l){return h(o)-h(l)};else{var i=[];u.default(h)?i.push(h):t.default(h)&&(i=h),n=function(o,l){for(var f=0;f<i.length;f+=1){var v=i[f];if(o[v]>l[v])return 1;if(o[v]<l[v])return-1}return 0}}return r.sort(n),r}T.default=c},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/starts-with.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-string.js");function s(c,r){return t.default(c)||u.default(c)?c[0]===r:!1}T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/substitute.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u,s){return!u||!s?u:u.replace(/\\?\{([^{}]+)\}/g,function(c,r){return c.charAt(0)==="\\"?c.slice(1):s[r]===void 0?"":s[r]})}T.default=t},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/throttle.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t,u,s){var c,r,h,n,i=0;s||(s={});var a=function(){i=s.leading===!1?0:Date.now(),c=null,n=t.apply(r,h),c||(r=h=null)},o=function(){var f=Date.now();!i&&s.leading===!1&&(i=f);var v=u-(f-i);return r=this,h=arguments,v<=0||v>u?(c&&(clearTimeout(c),c=null),i=f,n=t.apply(r,h),c||(r=h=null)):!c&&s.trailing!==!1&&(c=setTimeout(a,v)),n};return o.cancel=function(){clearTimeout(c),i=0,c=r=h=null},o}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-array.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array-like.js");T.default=function(u){return t.default(u)?Array.prototype.slice.call(u):[]}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-degree.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=180/Math.PI,u=function(c){return t*c};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-integer.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=parseInt},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-radian.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Math.PI/180,u=function(c){return t*c};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js");T.default=function(u){return t.default(u)?"":u.toString()}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/union.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/uniq.js"),u=function(){for(var c=[],r=0;r<arguments.length;r++)c[r]=arguments[r];return t.default([].concat.apply([],c))};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/uniq.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/contains.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),s=function(r){var h=[];return u.default(r,function(n){t.default(h,n)||h.push(n)}),h};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/unique-id.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={};T.default=function(u){return u=u||"g",t[u]?t[u]+=1:t[u]=1,u+t[u]}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-case.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),u=function(c){return t.default(c).toUpperCase()};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/upper-first.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/to-string.js"),u=function(c){var r=t.default(c);return r.charAt(0).toUpperCase()+r.substring(1)};T.default=u},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/values-of-key.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-array.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-nil.js");T.default=function(s,c){for(var r=[],h={},n=0;n<s.length;n++){var i=s[n],a=i[c];if(!u.default(a)){t.default(a)||(a=[a]);for(var o=0;o<a.length;o++){var l=a[o];h[l]||(r.push(l),h[l]=!0)}}}return r}},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/values.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/each.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/is-function.js"),s=Object.values?function(c){return Object.values(c)}:function(c){var r=[];return t.default(c,function(h,n){u.default(c)&&n==="prototype"||r.push(h)}),r};T.default=s},"./node_modules/_@antv_util@2.0.10@@antv/util/lib/wrap-behavior.js":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(u,s){if(u["_wrap_"+s])return u["_wrap_"+s];var c=function(h){u[s](h)};return u["_wrap_"+s]=c,c}T.default=t},"./node_modules/_abs-svg-path@0.1.1@abs-svg-path/index.js":function(E,T){E.exports=e;function e(t){var u=0,s=0,c=0,r=0;return t.map(function(h){h=h.slice();var n=h[0],i=n.toUpperCase();if(n!=i)switch(h[0]=i,n){case"a":h[6]+=c,h[7]+=r;break;case"v":h[1]+=r;break;case"h":h[1]+=c;break;default:for(var a=1;a<h.length;)h[a++]+=c,h[a++]+=r}switch(i){case"Z":c=u,r=s;break;case"H":c=h[1];break;case"V":r=h[1];break;case"M":c=u=h[1],r=s=h[2];break;default:c=h[h.length-2],r=h[h.length-1]}return h})}},"./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";function u(z,Q){return z<Q?-1:z>Q?1:z>=Q?0:NaN}function s(z){return z.length===1&&(z=c(z)),{left:function(ht,et,at,gt){for(at==null&&(at=0),gt==null&&(gt=ht.length);at<gt;){var k=at+gt>>>1;z(ht[k],et)<0?at=k+1:gt=k}return at},right:function(ht,et,at,gt){for(at==null&&(at=0),gt==null&&(gt=ht.length);at<gt;){var k=at+gt>>>1;z(ht[k],et)>0?gt=k:at=k+1}return at}}}function c(z){return function(Q,ht){return u(z(Q),ht)}}var r=s(u),h=r.right,n=r.left;function i(z,Q){Q==null&&(Q=a);for(var ht=0,et=z.length-1,at=z[0],gt=new Array(et<0?0:et);ht<et;)gt[ht]=Q(at,at=z[++ht]);return gt}function a(z,Q){return[z,Q]}function o(z,Q,ht){var et=z.length,at=Q.length,gt=new Array(et*at),k,ot,it,X;for(ht==null&&(ht=a),k=it=0;k<et;++k)for(X=z[k],ot=0;ot<at;++ot,++it)gt[it]=ht(X,Q[ot]);return gt}function l(z,Q){return Q<z?-1:Q>z?1:Q>=z?0:NaN}function f(z){return z===null?NaN:+z}function v(z,Q){var ht=z.length,et=0,at=-1,gt=0,k,ot,it=0;if(Q==null)for(;++at<ht;)isNaN(k=f(z[at]))||(ot=k-gt,gt+=ot/++et,it+=ot*(k-gt));else for(;++at<ht;)isNaN(k=f(Q(z[at],at,z)))||(ot=k-gt,gt+=ot/++et,it+=ot*(k-gt));if(et>1)return it/(et-1)}function b(z,Q){var ht=v(z,Q);return ht&&Math.sqrt(ht)}function g(z,Q){var ht=z.length,et=-1,at,gt,k;if(Q==null){for(;++et<ht;)if((at=z[et])!=null&&at>=at)for(gt=k=at;++et<ht;)(at=z[et])!=null&&(gt>at&&(gt=at),k<at&&(k=at))}else for(;++et<ht;)if((at=Q(z[et],et,z))!=null&&at>=at)for(gt=k=at;++et<ht;)(at=Q(z[et],et,z))!=null&&(gt>at&&(gt=at),k<at&&(k=at));return[gt,k]}var m=Array.prototype,_=m.slice,M=m.map;function x(z){return function(){return z}}function y(z){return z}function S(z,Q,ht){z=+z,Q=+Q,ht=(at=arguments.length)<2?(Q=z,z=0,1):at<3?1:+ht;for(var et=-1,at=Math.max(0,Math.ceil((Q-z)/ht))|0,gt=new Array(at);++et<at;)gt[et]=z+et*ht;return gt}var P=Math.sqrt(50),A=Math.sqrt(10),O=Math.sqrt(2);function L(z,Q,ht){var et,at=-1,gt,k,ot;if(Q=+Q,z=+z,ht=+ht,z===Q&&ht>0)return[z];if((et=Q<z)&&(gt=z,z=Q,Q=gt),(ot=H(z,Q,ht))===0||!isFinite(ot))return[];if(ot>0)for(z=Math.ceil(z/ot),Q=Math.floor(Q/ot),k=new Array(gt=Math.ceil(Q-z+1));++at<gt;)k[at]=(z+at)*ot;else for(z=Math.floor(z*ot),Q=Math.ceil(Q*ot),k=new Array(gt=Math.ceil(z-Q+1));++at<gt;)k[at]=(z-at)/ot;return et&&k.reverse(),k}function H(z,Q,ht){var et=(Q-z)/Math.max(0,ht),at=Math.floor(Math.log(et)/Math.LN10),gt=et/Math.pow(10,at);return at>=0?(gt>=P?10:gt>=A?5:gt>=O?2:1)*Math.pow(10,at):-Math.pow(10,-at)/(gt>=P?10:gt>=A?5:gt>=O?2:1)}function F(z,Q,ht){var et=Math.abs(Q-z)/Math.max(0,ht),at=Math.pow(10,Math.floor(Math.log(et)/Math.LN10)),gt=et/at;return gt>=P?at*=10:gt>=A?at*=5:gt>=O&&(at*=2),Q<z?-at:at}function Z(z){return Math.ceil(Math.log(z.length)/Math.LN2)+1}function G(){var z=y,Q=g,ht=Z;function et(at){var gt,k=at.length,ot,it=new Array(k);for(gt=0;gt<k;++gt)it[gt]=z(at[gt],gt,at);var X=Q(it),Et=X[0],vt=X[1],Nt=ht(it,Et,vt);Array.isArray(Nt)||(Nt=F(Et,vt,Nt),Nt=S(Math.ceil(Et/Nt)*Nt,vt,Nt));for(var $t=Nt.length;Nt[0]<=Et;)Nt.shift(),--$t;for(;Nt[$t-1]>vt;)Nt.pop(),--$t;var ee=new Array($t+1),kt;for(gt=0;gt<=$t;++gt)kt=ee[gt]=[],kt.x0=gt>0?Nt[gt-1]:Et,kt.x1=gt<$t?Nt[gt]:vt;for(gt=0;gt<k;++gt)ot=it[gt],Et<=ot&&ot<=vt&&ee[h(Nt,ot,0,$t)].push(at[gt]);return ee}return et.value=function(at){return arguments.length?(z=typeof at=="function"?at:x(at),et):z},et.domain=function(at){return arguments.length?(Q=typeof at=="function"?at:x([at[0],at[1]]),et):Q},et.thresholds=function(at){return arguments.length?(ht=typeof at=="function"?at:Array.isArray(at)?x(_.call(at)):x(at),et):ht},et}function U(z,Q,ht){if(ht==null&&(ht=f),!!(et=z.length)){if((Q=+Q)<=0||et<2)return+ht(z[0],0,z);if(Q>=1)return+ht(z[et-1],et-1,z);var et,at=(et-1)*Q,gt=Math.floor(at),k=+ht(z[gt],gt,z),ot=+ht(z[gt+1],gt+1,z);return k+(ot-k)*(at-gt)}}function Y(z,Q,ht){return z=M.call(z,f).sort(u),Math.ceil((ht-Q)/(2*(U(z,.75)-U(z,.25))*Math.pow(z.length,-1/3)))}function J(z,Q,ht){return Math.ceil((ht-Q)/(3.5*b(z)*Math.pow(z.length,-1/3)))}function rt(z,Q){var ht=z.length,et=-1,at,gt;if(Q==null){for(;++et<ht;)if((at=z[et])!=null&&at>=at)for(gt=at;++et<ht;)(at=z[et])!=null&&at>gt&&(gt=at)}else for(;++et<ht;)if((at=Q(z[et],et,z))!=null&&at>=at)for(gt=at;++et<ht;)(at=Q(z[et],et,z))!=null&&at>gt&&(gt=at);return gt}function ft(z,Q){var ht=z.length,et=ht,at=-1,gt,k=0;if(Q==null)for(;++at<ht;)isNaN(gt=f(z[at]))?--et:k+=gt;else for(;++at<ht;)isNaN(gt=f(Q(z[at],at,z)))?--et:k+=gt;if(et)return k/et}function dt(z,Q){var ht=z.length,et=-1,at,gt=[];if(Q==null)for(;++et<ht;)isNaN(at=f(z[et]))||gt.push(at);else for(;++et<ht;)isNaN(at=f(Q(z[et],et,z)))||gt.push(at);return U(gt.sort(u),.5)}function ut(z){for(var Q=z.length,ht,et=-1,at=0,gt,k;++et<Q;)at+=z[et].length;for(gt=new Array(at);--Q>=0;)for(k=z[Q],ht=k.length;--ht>=0;)gt[--at]=k[ht];return gt}function Lt(z,Q){var ht=z.length,et=-1,at,gt;if(Q==null){for(;++et<ht;)if((at=z[et])!=null&&at>=at)for(gt=at;++et<ht;)(at=z[et])!=null&&gt>at&&(gt=at)}else for(;++et<ht;)if((at=Q(z[et],et,z))!=null&&at>=at)for(gt=at;++et<ht;)(at=Q(z[et],et,z))!=null&&gt>at&&(gt=at);return gt}function Ft(z,Q){for(var ht=Q.length,et=new Array(ht);ht--;)et[ht]=z[Q[ht]];return et}function Ot(z,Q){if(!!(ht=z.length)){var ht,et=0,at=0,gt,k=z[at];for(Q==null&&(Q=u);++et<ht;)(Q(gt=z[et],k)<0||Q(k,k)!==0)&&(k=gt,at=et);if(Q(k,k)===0)return at}}function St(z,Q,ht){for(var et=(ht==null?z.length:ht)-(Q=Q==null?0:+Q),at,gt;et;)gt=Math.random()*et--|0,at=z[et+Q],z[et+Q]=z[gt+Q],z[gt+Q]=at;return z}function xt(z,Q){var ht=z.length,et=-1,at,gt=0;if(Q==null)for(;++et<ht;)(at=+z[et])&&(gt+=at);else for(;++et<ht;)(at=+Q(z[et],et,z))&&(gt+=at);return gt}function At(z){if(!(gt=z.length))return[];for(var Q=-1,ht=Lt(z,nt),et=new Array(ht);++Q<ht;)for(var at=-1,gt,k=et[Q]=new Array(gt);++at<gt;)k[at]=z[at][Q];return et}function nt(z){return z.length}function Mt(){return At(arguments)}t.bisect=h,t.bisectRight=h,t.bisectLeft=n,t.ascending=u,t.bisector=s,t.cross=o,t.descending=l,t.deviation=b,t.extent=g,t.histogram=G,t.thresholdFreedmanDiaconis=Y,t.thresholdScott=J,t.thresholdSturges=Z,t.max=rt,t.mean=ft,t.median=dt,t.merge=ut,t.min=Lt,t.pairs=i,t.permute=Ft,t.quantile=U,t.range=S,t.scan=Ot,t.shuffle=St,t.sum=xt,t.ticks=L,t.tickIncrement=H,t.tickStep=F,t.transpose=At,t.variance=v,t.zip=Mt,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-array@2.11.0@d3-array/dist/d3-array.js":function(E,T,e){var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js");(function(u,s){s(T)})(this,function(u){"use strict";function s(Re,$e){return Re<$e?-1:Re>$e?1:Re>=$e?0:NaN}function c(Re){var $e=Re,Ve=Re;Re.length===1&&($e=function(Dn,$n){return Re(Dn)-$n},Ve=r(Re));function En(mn,Dn,$n,Hn){for($n==null&&($n=0),Hn==null&&(Hn=mn.length);$n<Hn;){var _n=$n+Hn>>>1;Ve(mn[_n],Dn)<0?$n=_n+1:Hn=_n}return $n}function xn(mn,Dn,$n,Hn){for($n==null&&($n=0),Hn==null&&(Hn=mn.length);$n<Hn;){var _n=$n+Hn>>>1;Ve(mn[_n],Dn)>0?Hn=_n:$n=_n+1}return $n}function Nn(mn,Dn,$n,Hn){$n==null&&($n=0),Hn==null&&(Hn=mn.length);var _n=En(mn,Dn,$n,Hn-1);return _n>$n&&$e(mn[_n-1],Dn)>-$e(mn[_n],Dn)?_n-1:_n}return{left:En,center:Nn,right:xn}}function r(Re){return function($e,Ve){return s(Re($e),Ve)}}function h(Re){return Re===null?NaN:+Re}function n(Re,$e){var Ve,En,xn,Nn,mn,Dn,$n,xn,Hn,_n,br,yr,Fr;return t.__generator(this,function(Ei){switch(Ei.label){case 0:if($e!==void 0)return[3,9];Ei.label=1;case 1:Ei.trys.push([1,6,7,8]),Ve=t.__values(Re),En=Ve.next(),Ei.label=2;case 2:return En.done?[3,5]:(xn=En.value,xn!=null&&(xn=+xn)>=xn?[4,xn]:[3,4]);case 3:Ei.sent(),Ei.label=4;case 4:return En=Ve.next(),[3,2];case 5:return[3,8];case 6:return Nn=Ei.sent(),_n={error:Nn},[3,8];case 7:try{En&&!En.done&&(br=Ve.return)&&br.call(Ve)}finally{if(_n)throw _n.error}return[7];case 8:return[3,17];case 9:mn=-1,Ei.label=10;case 10:Ei.trys.push([10,15,16,17]),Dn=t.__values(Re),$n=Dn.next(),Ei.label=11;case 11:return $n.done?[3,14]:(xn=$n.value,(xn=$e(xn,++mn,Re))!=null&&(xn=+xn)>=xn?[4,xn]:[3,13]);case 12:Ei.sent(),Ei.label=13;case 13:return $n=Dn.next(),[3,11];case 14:return[3,17];case 15:return Hn=Ei.sent(),yr={error:Hn},[3,17];case 16:try{$n&&!$n.done&&(Fr=Dn.return)&&Fr.call(Dn)}finally{if(yr)throw yr.error}return[7];case 17:return[2]}})}var i=c(s),a=i.right,o=i.left,l=c(h).center;function f(Re,$e){var Ve,En,xn,Nn,mn=0;if($e===void 0)try{for(var Dn=t.__values(Re),$n=Dn.next();!$n.done;$n=Dn.next()){var Hn=$n.value;Hn!=null&&(Hn=+Hn)>=Hn&&++mn}}catch(Fr){Ve={error:Fr}}finally{try{$n&&!$n.done&&(En=Dn.return)&&En.call(Dn)}finally{if(Ve)throw Ve.error}}else{var _n=-1;try{for(var br=t.__values(Re),yr=br.next();!yr.done;yr=br.next()){var Hn=yr.value;(Hn=$e(Hn,++_n,Re))!=null&&(Hn=+Hn)>=Hn&&++mn}}catch(Fr){xn={error:Fr}}finally{try{yr&&!yr.done&&(Nn=br.return)&&Nn.call(br)}finally{if(xn)throw xn.error}}}return mn}function v(Re){return Re.length|0}function b(Re){return!(Re>0)}function g(Re){return typeof Re!="object"||"length"in Re?Re:Array.from(Re)}function m(Re){return function($e){return Re.apply(void 0,t.__spread($e))}}function _(){for(var Re=[],$e=0;$e<arguments.length;$e++)Re[$e]=arguments[$e];var Ve=typeof Re[Re.length-1]=="function"&&m(Re.pop());Re=Re.map(g);var En=Re.map(v),xn=Re.length-1,Nn=new Array(xn+1).fill(0),mn=[];if(xn<0||En.some(b))return mn;for(;;){mn.push(Nn.map(function($n,Hn){return Re[Hn][$n]}));for(var Dn=xn;++Nn[Dn]===En[Dn];){if(Dn===0)return Ve?mn.map(Ve):mn;Nn[Dn--]=0}}}function M(Re,$e){var Ve=0,En=0;return Float64Array.from(Re,$e===void 0?function(xn){return Ve+=+xn||0}:function(xn){return Ve+=+$e(xn,En++,Re)||0})}function x(Re,$e){return $e<Re?-1:$e>Re?1:$e>=Re?0:NaN}function y(Re,$e){var Ve,En,xn,Nn,mn=0,Dn,$n=0,Hn=0;if($e===void 0)try{for(var _n=t.__values(Re),br=_n.next();!br.done;br=_n.next()){var yr=br.value;yr!=null&&(yr=+yr)>=yr&&(Dn=yr-$n,$n+=Dn/++mn,Hn+=Dn*(yr-$n))}}catch(Aa){Ve={error:Aa}}finally{try{br&&!br.done&&(En=_n.return)&&En.call(_n)}finally{if(Ve)throw Ve.error}}else{var Fr=-1;try{for(var Ei=t.__values(Re),Ta=Ei.next();!Ta.done;Ta=Ei.next()){var yr=Ta.value;(yr=$e(yr,++Fr,Re))!=null&&(yr=+yr)>=yr&&(Dn=yr-$n,$n+=Dn/++mn,Hn+=Dn*(yr-$n))}}catch(Aa){xn={error:Aa}}finally{try{Ta&&!Ta.done&&(Nn=Ei.return)&&Nn.call(Ei)}finally{if(xn)throw xn.error}}}if(mn>1)return Hn/(mn-1)}function S(Re,$e){var Ve=y(Re,$e);return Ve&&Math.sqrt(Ve)}function P(Re,$e){var Ve,En,xn,Nn,mn,Dn;if($e===void 0)try{for(var $n=t.__values(Re),Hn=$n.next();!Hn.done;Hn=$n.next()){var _n=Hn.value;_n!=null&&(mn===void 0?_n>=_n&&(mn=Dn=_n):(mn>_n&&(mn=_n),Dn<_n&&(Dn=_n)))}}catch(Ei){Ve={error:Ei}}finally{try{Hn&&!Hn.done&&(En=$n.return)&&En.call($n)}finally{if(Ve)throw Ve.error}}else{var br=-1;try{for(var yr=t.__values(Re),Fr=yr.next();!Fr.done;Fr=yr.next()){var _n=Fr.value;(_n=$e(_n,++br,Re))!=null&&(mn===void 0?_n>=_n&&(mn=Dn=_n):(mn>_n&&(mn=_n),Dn<_n&&(Dn=_n)))}}catch(Ei){xn={error:Ei}}finally{try{Fr&&!Fr.done&&(Nn=yr.return)&&Nn.call(yr)}finally{if(xn)throw xn.error}}}return[mn,Dn]}var A=function(){function Re(){this._partials=new Float64Array(32),this._n=0}return Re.prototype.add=function($e){for(var Ve=this._partials,En=0,xn=0;xn<this._n&&xn<32;xn++){var Nn=Ve[xn],mn=$e+Nn,Dn=Math.abs($e)<Math.abs(Nn)?$e-(mn-Nn):Nn-(mn-$e);Dn&&(Ve[En++]=Dn),$e=mn}return Ve[En]=$e,this._n=En+1,this},Re.prototype.valueOf=function(){var $e=this._partials,Ve=this._n,En,xn,Nn,mn=0;if(Ve>0){for(mn=$e[--Ve];Ve>0&&(En=mn,xn=$e[--Ve],mn=En+xn,Nn=xn-(mn-En),!Nn););Ve>0&&(Nn<0&&$e[Ve-1]<0||Nn>0&&$e[Ve-1]>0)&&(xn=Nn*2,En=mn+xn,xn==En-mn&&(mn=En))}return mn},Re}();function O(Re,$e){var Ve,En,xn,Nn,mn=new A;if($e===void 0)try{for(var Dn=t.__values(Re),$n=Dn.next();!$n.done;$n=Dn.next()){var Hn=$n.value;(Hn=+Hn)&&mn.add(Hn)}}catch(Fr){Ve={error:Fr}}finally{try{$n&&!$n.done&&(En=Dn.return)&&En.call(Dn)}finally{if(Ve)throw Ve.error}}else{var _n=-1;try{for(var br=t.__values(Re),yr=br.next();!yr.done;yr=br.next()){var Hn=yr.value;(Hn=+$e(Hn,++_n,Re))&&mn.add(Hn)}}catch(Fr){xn={error:Fr}}finally{try{yr&&!yr.done&&(Nn=br.return)&&Nn.call(br)}finally{if(xn)throw xn.error}}}return+mn}var L=function(Re){t.__extends($e,Re);function $e(Ve,En){var xn,Nn;Ve===void 0&&(Ve=[]),En===void 0&&(En=U);var mn=Re.call(this)||this;Object.defineProperties(mn,{_intern:{value:new Map},_key:{value:En}});try{for(var Dn=t.__values(Ve),$n=Dn.next();!$n.done;$n=Dn.next()){var Hn=t.__read($n.value,2),_n=Hn[0],br=Hn[1];mn.set(_n,br)}}catch(yr){xn={error:yr}}finally{try{$n&&!$n.done&&(Nn=Dn.return)&&Nn.call(Dn)}finally{if(xn)throw xn.error}}return mn}return $e.prototype.get=function(Ve){return Re.prototype.get.call(this,F(this,Ve))},$e.prototype.has=function(Ve){return Re.prototype.has.call(this,F(this,Ve))},$e.prototype.set=function(Ve,En){return Re.prototype.set.call(this,Z(this,Ve),En)},$e.prototype.delete=function(Ve){return Re.prototype.delete.call(this,G(this,Ve))},$e}(Map),H=function(Re){t.__extends($e,Re);function $e(Ve,En){var xn,Nn;Ve===void 0&&(Ve=[]),En===void 0&&(En=U);var mn=Re.call(this)||this;Object.defineProperties(mn,{_intern:{value:new Map},_key:{value:En}});try{for(var Dn=t.__values(Ve),$n=Dn.next();!$n.done;$n=Dn.next()){var Hn=$n.value;mn.add(Hn)}}catch(_n){xn={error:_n}}finally{try{$n&&!$n.done&&(Nn=Dn.return)&&Nn.call(Dn)}finally{if(xn)throw xn.error}}return mn}return $e.prototype.has=function(Ve){return Re.prototype.has.call(this,F(this,Ve))},$e.prototype.add=function(Ve){return Re.prototype.add.call(this,Z(this,Ve))},$e.prototype.delete=function(Ve){return Re.prototype.delete.call(this,G(this,Ve))},$e}(Set);function F(Re,$e){var Ve=Re._intern,En=Re._key,xn=En($e);return Ve.has(xn)?Ve.get(xn):$e}function Z(Re,$e){var Ve=Re._intern,En=Re._key,xn=En($e);return Ve.has(xn)?Ve.get(xn):(Ve.set(xn,$e),$e)}function G(Re,$e){var Ve=Re._intern,En=Re._key,xn=En($e);return Ve.has(xn)&&($e=Ve.get($e),Ve.delete(xn)),$e}function U(Re){return Re!==null&&typeof Re=="object"?Re.valueOf():Re}function Y(Re){return Re}function J(Re){for(var $e=[],Ve=1;Ve<arguments.length;Ve++)$e[Ve-1]=arguments[Ve];return Ot(Re,Y,Y,$e)}function rt(Re){for(var $e=[],Ve=1;Ve<arguments.length;Ve++)$e[Ve-1]=arguments[Ve];return Ot(Re,Array.from,Y,$e)}function ft(Re,$e){for(var Ve=[],En=2;En<arguments.length;En++)Ve[En-2]=arguments[En];return Ot(Re,Y,$e,Ve)}function dt(Re,$e){for(var Ve=[],En=2;En<arguments.length;En++)Ve[En-2]=arguments[En];return Ot(Re,Array.from,$e,Ve)}function ut(Re){for(var $e=[],Ve=1;Ve<arguments.length;Ve++)$e[Ve-1]=arguments[Ve];return Ot(Re,Y,Ft,$e)}function Lt(Re){for(var $e=[],Ve=1;Ve<arguments.length;Ve++)$e[Ve-1]=arguments[Ve];return Ot(Re,Array.from,Ft,$e)}function Ft(Re){if(Re.length!==1)throw new Error("duplicate key");return Re[0]}function Ot(Re,$e,Ve,En){return function xn(Nn,mn){var Dn,$n,Hn,_n;if(mn>=En.length)return Ve(Nn);var br=new L,yr=En[mn++],Fr=-1;try{for(var Ei=t.__values(Nn),Ta=Ei.next();!Ta.done;Ta=Ei.next()){var Aa=Ta.value,eo=yr(Aa,++Fr,Nn),Ho=br.get(eo);Ho?Ho.push(Aa):br.set(eo,[Aa])}}catch(jo){Dn={error:jo}}finally{try{Ta&&!Ta.done&&($n=Ei.return)&&$n.call(Ei)}finally{if(Dn)throw Dn.error}}try{for(var Do=t.__values(br),io=Do.next();!io.done;io=Do.next()){var ds=t.__read(io.value,2),eo=ds[0],Ko=ds[1];br.set(eo,xn(Ko,mn))}}catch(jo){Hn={error:jo}}finally{try{io&&!io.done&&(_n=Do.return)&&_n.call(Do)}finally{if(Hn)throw Hn.error}}return $e(br)}(Re,0)}function St(Re,$e){return Array.from($e,function(Ve){return Re[Ve]})}function xt(Re){for(var $e=[],Ve=1;Ve<arguments.length;Ve++)$e[Ve-1]=arguments[Ve];if(typeof Re[Symbol.iterator]!="function")throw new TypeError("values is not iterable");Re=Array.from(Re);var En=t.__read($e,1),xn=En[0],Nn=xn===void 0?s:xn;if(Nn.length===1||$e.length>1){var mn=Uint32Array.from(Re,function(Dn,$n){return $n});return $e.length>1?($e=$e.map(function(Dn){return Re.map(Dn)}),mn.sort(function(Dn,$n){var Hn,_n;try{for(var br=t.__values($e),yr=br.next();!yr.done;yr=br.next()){var Fr=yr.value,Ei=s(Fr[Dn],Fr[$n]);if(Ei)return Ei}}catch(Ta){Hn={error:Ta}}finally{try{yr&&!yr.done&&(_n=br.return)&&_n.call(br)}finally{if(Hn)throw Hn.error}}})):(Nn=Re.map(Nn),mn.sort(function(Dn,$n){return s(Nn[Dn],Nn[$n])})),St(Re,mn)}return Re.sort(Nn)}function At(Re,$e,Ve){return($e.length===1?xt(ft(Re,$e,Ve),function(En,xn){var Nn=t.__read(En,2),mn=Nn[0],Dn=Nn[1],$n=t.__read(xn,2),Hn=$n[0],_n=$n[1];return s(Dn,_n)||s(mn,Hn)}):xt(J(Re,Ve),function(En,xn){var Nn=t.__read(En,2),mn=Nn[0],Dn=Nn[1],$n=t.__read(xn,2),Hn=$n[0],_n=$n[1];return $e(Dn,_n)||s(mn,Hn)})).map(function(En){var xn=t.__read(En,1),Nn=xn[0];return Nn})}var nt=Array.prototype,Mt=nt.slice;function z(Re){return function(){return Re}}var Q=Math.sqrt(50),ht=Math.sqrt(10),et=Math.sqrt(2);function at(Re,$e,Ve){var En,xn=-1,Nn,mn,Dn;if($e=+$e,Re=+Re,Ve=+Ve,Re===$e&&Ve>0)return[Re];if((En=$e<Re)&&(Nn=Re,Re=$e,$e=Nn),(Dn=gt(Re,$e,Ve))===0||!isFinite(Dn))return[];if(Dn>0)for(Re=Math.ceil(Re/Dn),$e=Math.floor($e/Dn),mn=new Array(Nn=Math.ceil($e-Re+1));++xn<Nn;)mn[xn]=(Re+xn)*Dn;else for(Dn=-Dn,Re=Math.ceil(Re*Dn),$e=Math.floor($e*Dn),mn=new Array(Nn=Math.ceil($e-Re+1));++xn<Nn;)mn[xn]=(Re+xn)/Dn;return En&&mn.reverse(),mn}function gt(Re,$e,Ve){var En=($e-Re)/Math.max(0,Ve),xn=Math.floor(Math.log(En)/Math.LN10),Nn=En/Math.pow(10,xn);return xn>=0?(Nn>=Q?10:Nn>=ht?5:Nn>=et?2:1)*Math.pow(10,xn):-Math.pow(10,-xn)/(Nn>=Q?10:Nn>=ht?5:Nn>=et?2:1)}function k(Re,$e,Ve){var En=Math.abs($e-Re)/Math.max(0,Ve),xn=Math.pow(10,Math.floor(Math.log(En)/Math.LN10)),Nn=En/xn;return Nn>=Q?xn*=10:Nn>=ht?xn*=5:Nn>=et&&(xn*=2),$e<Re?-xn:xn}function ot(Re,$e,Ve){for(var En;;){var xn=gt(Re,$e,Ve);if(xn===En||xn===0||!isFinite(xn))return[Re,$e];xn>0?(Re=Math.floor(Re/xn)*xn,$e=Math.ceil($e/xn)*xn):xn<0&&(Re=Math.ceil(Re*xn)/xn,$e=Math.floor($e*xn)/xn),En=xn}}function it(Re){return Math.ceil(Math.log(f(Re))/Math.LN2)+1}function X(){var Re=Y,$e=P,Ve=it;function En(xn){var Nn;Array.isArray(xn)||(xn=Array.from(xn));var mn,Dn=xn.length,$n,Hn=new Array(Dn);for(mn=0;mn<Dn;++mn)Hn[mn]=Re(xn[mn],mn,xn);var _n=$e(Hn),br=_n[0],yr=_n[1],Fr=Ve(Hn,br,yr);if(!Array.isArray(Fr)){var Ei=yr,Ta=+Fr;if($e===P&&(Nn=t.__read(ot(br,yr,Ta),2),br=Nn[0],yr=Nn[1]),Fr=at(br,yr,Ta),Fr[Fr.length-1]>=yr)if(Ei>=yr&&$e===P){var Aa=gt(br,yr,Ta);isFinite(Aa)&&(Aa>0?yr=(Math.floor(yr/Aa)+1)*Aa:Aa<0&&(yr=(Math.ceil(yr*-Aa)+1)/-Aa))}else Fr.pop()}for(var eo=Fr.length;Fr[0]<=br;)Fr.shift(),--eo;for(;Fr[eo-1]>yr;)Fr.pop(),--eo;var Ho=new Array(eo+1),Do;for(mn=0;mn<=eo;++mn)Do=Ho[mn]=[],Do.x0=mn>0?Fr[mn-1]:br,Do.x1=mn<eo?Fr[mn]:yr;for(mn=0;mn<Dn;++mn)$n=Hn[mn],br<=$n&&$n<=yr&&Ho[a(Fr,$n,0,eo)].push(xn[mn]);return Ho}return En.value=function(xn){return arguments.length?(Re=typeof xn=="function"?xn:z(xn),En):Re},En.domain=function(xn){return arguments.length?($e=typeof xn=="function"?xn:z([xn[0],xn[1]]),En):$e},En.thresholds=function(xn){return arguments.length?(Ve=typeof xn=="function"?xn:Array.isArray(xn)?z(Mt.call(xn)):z(xn),En):Ve},En}function Et(Re,$e){var Ve,En,xn,Nn,mn;if($e===void 0)try{for(var Dn=t.__values(Re),$n=Dn.next();!$n.done;$n=Dn.next()){var Hn=$n.value;Hn!=null&&(mn<Hn||mn===void 0&&Hn>=Hn)&&(mn=Hn)}}catch(Fr){Ve={error:Fr}}finally{try{$n&&!$n.done&&(En=Dn.return)&&En.call(Dn)}finally{if(Ve)throw Ve.error}}else{var _n=-1;try{for(var br=t.__values(Re),yr=br.next();!yr.done;yr=br.next()){var Hn=yr.value;(Hn=$e(Hn,++_n,Re))!=null&&(mn<Hn||mn===void 0&&Hn>=Hn)&&(mn=Hn)}}catch(Fr){xn={error:Fr}}finally{try{yr&&!yr.done&&(Nn=br.return)&&Nn.call(br)}finally{if(xn)throw xn.error}}}return mn}function vt(Re,$e){var Ve,En,xn,Nn,mn;if($e===void 0)try{for(var Dn=t.__values(Re),$n=Dn.next();!$n.done;$n=Dn.next()){var Hn=$n.value;Hn!=null&&(mn>Hn||mn===void 0&&Hn>=Hn)&&(mn=Hn)}}catch(Fr){Ve={error:Fr}}finally{try{$n&&!$n.done&&(En=Dn.return)&&En.call(Dn)}finally{if(Ve)throw Ve.error}}else{var _n=-1;try{for(var br=t.__values(Re),yr=br.next();!yr.done;yr=br.next()){var Hn=yr.value;(Hn=$e(Hn,++_n,Re))!=null&&(mn>Hn||mn===void 0&&Hn>=Hn)&&(mn=Hn)}}catch(Fr){xn={error:Fr}}finally{try{yr&&!yr.done&&(Nn=br.return)&&Nn.call(br)}finally{if(xn)throw xn.error}}}return mn}function Nt(Re,$e,Ve,En,xn){for(Ve===void 0&&(Ve=0),En===void 0&&(En=Re.length-1),xn===void 0&&(xn=s);En>Ve;){if(En-Ve>600){var Nn=En-Ve+1,mn=$e-Ve+1,Dn=Math.log(Nn),$n=.5*Math.exp(2*Dn/3),Hn=.5*Math.sqrt(Dn*$n*(Nn-$n)/Nn)*(mn-Nn/2<0?-1:1),_n=Math.max(Ve,Math.floor($e-mn*$n/Nn+Hn)),br=Math.min(En,Math.floor($e+(Nn-mn)*$n/Nn+Hn));Nt(Re,$e,_n,br,xn)}var yr=Re[$e],Fr=Ve,Ei=En;for($t(Re,Ve,$e),xn(Re[En],yr)>0&&$t(Re,Ve,En);Fr<Ei;){for($t(Re,Fr,Ei),++Fr,--Ei;xn(Re[Fr],yr)<0;)++Fr;for(;xn(Re[Ei],yr)>0;)--Ei}xn(Re[Ve],yr)===0?$t(Re,Ve,Ei):(++Ei,$t(Re,Ei,En)),Ei<=$e&&(Ve=Ei+1),$e<=Ei&&(En=Ei-1)}return Re}function $t(Re,$e,Ve){var En=Re[$e];Re[$e]=Re[Ve],Re[Ve]=En}function ee(Re,$e,Ve){if(Re=Float64Array.from(n(Re,Ve)),!!(En=Re.length)){if(($e=+$e)<=0||En<2)return vt(Re);if($e>=1)return Et(Re);var En,xn=(En-1)*$e,Nn=Math.floor(xn),mn=Et(Nt(Re,Nn).subarray(0,Nn+1)),Dn=vt(Re.subarray(Nn+1));return mn+(Dn-mn)*(xn-Nn)}}function kt(Re,$e,Ve){if(Ve===void 0&&(Ve=h),!!(En=Re.length)){if(($e=+$e)<=0||En<2)return+Ve(Re[0],0,Re);if($e>=1)return+Ve(Re[En-1],En-1,Re);var En,xn=(En-1)*$e,Nn=Math.floor(xn),mn=+Ve(Re[Nn],Nn,Re),Dn=+Ve(Re[Nn+1],Nn+1,Re);return mn+(Dn-mn)*(xn-Nn)}}function Wt(Re,$e,Ve){return Math.ceil((Ve-$e)/(2*(ee(Re,.75)-ee(Re,.25))*Math.pow(f(Re),-1/3)))}function ae(Re,$e,Ve){return Math.ceil((Ve-$e)/(3.5*S(Re)*Math.pow(f(Re),-1/3)))}function le(Re,$e){var Ve,En,xn,Nn,mn,Dn=-1,$n=-1;if($e===void 0)try{for(var Hn=t.__values(Re),_n=Hn.next();!_n.done;_n=Hn.next()){var br=_n.value;++$n,br!=null&&(mn<br||mn===void 0&&br>=br)&&(mn=br,Dn=$n)}}catch(Ei){Ve={error:Ei}}finally{try{_n&&!_n.done&&(En=Hn.return)&&En.call(Hn)}finally{if(Ve)throw Ve.error}}else try{for(var yr=t.__values(Re),Fr=yr.next();!Fr.done;Fr=yr.next()){var br=Fr.value;(br=$e(br,++$n,Re))!=null&&(mn<br||mn===void 0&&br>=br)&&(mn=br,Dn=$n)}}catch(Ei){xn={error:Ei}}finally{try{Fr&&!Fr.done&&(Nn=yr.return)&&Nn.call(yr)}finally{if(xn)throw xn.error}}return Dn}function je(Re,$e){var Ve,En,xn,Nn,mn=0,Dn=0;if($e===void 0)try{for(var $n=t.__values(Re),Hn=$n.next();!Hn.done;Hn=$n.next()){var _n=Hn.value;_n!=null&&(_n=+_n)>=_n&&(++mn,Dn+=_n)}}catch(Ei){Ve={error:Ei}}finally{try{Hn&&!Hn.done&&(En=$n.return)&&En.call($n)}finally{if(Ve)throw Ve.error}}else{var br=-1;try{for(var yr=t.__values(Re),Fr=yr.next();!Fr.done;Fr=yr.next()){var _n=Fr.value;(_n=$e(_n,++br,Re))!=null&&(_n=+_n)>=_n&&(++mn,Dn+=_n)}}catch(Ei){xn={error:Ei}}finally{try{Fr&&!Fr.done&&(Nn=yr.return)&&Nn.call(yr)}finally{if(xn)throw xn.error}}}if(mn)return Dn/mn}function Oe(Re,$e){return ee(Re,.5,$e)}function We(Re){var $e,Ve,En,xn,Nn,mn;return t.__generator(this,function(Dn){switch(Dn.label){case 0:Dn.trys.push([0,5,6,7]),$e=t.__values(Re),Ve=$e.next(),Dn.label=1;case 1:return Ve.done?[3,4]:(En=Ve.value,[5,t.__values(En)]);case 2:Dn.sent(),Dn.label=3;case 3:return Ve=$e.next(),[3,1];case 4:return[3,7];case 5:return xn=Dn.sent(),Nn={error:xn},[3,7];case 6:try{Ve&&!Ve.done&&(mn=$e.return)&&mn.call($e)}finally{if(Nn)throw Nn.error}return[7];case 7:return[2]}})}function Ye(Re){return Array.from(We(Re))}function wn(Re,$e){var Ve,En,xn,Nn,mn,Dn=-1,$n=-1;if($e===void 0)try{for(var Hn=t.__values(Re),_n=Hn.next();!_n.done;_n=Hn.next()){var br=_n.value;++$n,br!=null&&(mn>br||mn===void 0&&br>=br)&&(mn=br,Dn=$n)}}catch(Ei){Ve={error:Ei}}finally{try{_n&&!_n.done&&(En=Hn.return)&&En.call(Hn)}finally{if(Ve)throw Ve.error}}else try{for(var yr=t.__values(Re),Fr=yr.next();!Fr.done;Fr=yr.next()){var br=Fr.value;(br=$e(br,++$n,Re))!=null&&(mn>br||mn===void 0&&br>=br)&&(mn=br,Dn=$n)}}catch(Ei){xn={error:Ei}}finally{try{Fr&&!Fr.done&&(Nn=yr.return)&&Nn.call(yr)}finally{if(xn)throw xn.error}}return Dn}function er(Re,$e){var Ve,En;$e===void 0&&($e=wr);var xn=[],Nn,mn=!1;try{for(var Dn=t.__values(Re),$n=Dn.next();!$n.done;$n=Dn.next()){var Hn=$n.value;mn&&xn.push($e(Nn,Hn)),Nn=Hn,mn=!0}}catch(_n){Ve={error:_n}}finally{try{$n&&!$n.done&&(En=Dn.return)&&En.call(Dn)}finally{if(Ve)throw Ve.error}}return xn}function wr(Re,$e){return[Re,$e]}function on(Re,$e,Ve){Re=+Re,$e=+$e,Ve=(xn=arguments.length)<2?($e=Re,Re=0,1):xn<3?1:+Ve;for(var En=-1,xn=Math.max(0,Math.ceil(($e-Re)/Ve))|0,Nn=new Array(xn);++En<xn;)Nn[En]=Re+En*Ve;return Nn}function en(Re,$e){var Ve,En,xn,Nn;$e===void 0&&($e=s);var mn,Dn=!1;if($e.length===1){var $n=void 0;try{for(var Hn=t.__values(Re),_n=Hn.next();!_n.done;_n=Hn.next()){var br=_n.value,yr=$e(br);(Dn?s(yr,$n)<0:s(yr,yr)===0)&&(mn=br,$n=yr,Dn=!0)}}catch(Ta){Ve={error:Ta}}finally{try{_n&&!_n.done&&(En=Hn.return)&&En.call(Hn)}finally{if(Ve)throw Ve.error}}}else try{for(var Fr=t.__values(Re),Ei=Fr.next();!Ei.done;Ei=Fr.next()){var yr=Ei.value;(Dn?$e(yr,mn)<0:$e(yr,yr)===0)&&(mn=yr,Dn=!0)}}catch(Ta){xn={error:Ta}}finally{try{Ei&&!Ei.done&&(Nn=Fr.return)&&Nn.call(Fr)}finally{if(xn)throw xn.error}}return mn}function An(Re,$e){var Ve,En;if($e===void 0&&($e=s),$e.length===1)return wn(Re,$e);var xn,Nn=-1,mn=-1;try{for(var Dn=t.__values(Re),$n=Dn.next();!$n.done;$n=Dn.next()){var Hn=$n.value;++mn,(Nn<0?$e(Hn,Hn)===0:$e(Hn,xn)<0)&&(xn=Hn,Nn=mn)}}catch(_n){Ve={error:_n}}finally{try{$n&&!$n.done&&(En=Dn.return)&&En.call(Dn)}finally{if(Ve)throw Ve.error}}return Nn}function jn(Re,$e){var Ve,En,xn,Nn;$e===void 0&&($e=s);var mn,Dn=!1;if($e.length===1){var $n=void 0;try{for(var Hn=t.__values(Re),_n=Hn.next();!_n.done;_n=Hn.next()){var br=_n.value,yr=$e(br);(Dn?s(yr,$n)>0:s(yr,yr)===0)&&(mn=br,$n=yr,Dn=!0)}}catch(Ta){Ve={error:Ta}}finally{try{_n&&!_n.done&&(En=Hn.return)&&En.call(Hn)}finally{if(Ve)throw Ve.error}}}else try{for(var Fr=t.__values(Re),Ei=Fr.next();!Ei.done;Ei=Fr.next()){var yr=Ei.value;(Dn?$e(yr,mn)>0:$e(yr,yr)===0)&&(mn=yr,Dn=!0)}}catch(Ta){xn={error:Ta}}finally{try{Ei&&!Ei.done&&(Nn=Fr.return)&&Nn.call(Fr)}finally{if(xn)throw xn.error}}return mn}function pr(Re,$e){var Ve,En;if($e===void 0&&($e=s),$e.length===1)return le(Re,$e);var xn,Nn=-1,mn=-1;try{for(var Dn=t.__values(Re),$n=Dn.next();!$n.done;$n=Dn.next()){var Hn=$n.value;++mn,(Nn<0?$e(Hn,Hn)===0:$e(Hn,xn)>0)&&(xn=Hn,Nn=mn)}}catch(_n){Ve={error:_n}}finally{try{$n&&!$n.done&&(En=Dn.return)&&En.call(Dn)}finally{if(Ve)throw Ve.error}}return Nn}function di(Re,$e){var Ve=An(Re,$e);return Ve<0?void 0:Ve}var Ce=Me(Math.random);function Me(Re){return function(Ve,En,xn){En===void 0&&(En=0),xn===void 0&&(xn=Ve.length);for(var Nn=xn-(En=+En);Nn;){var mn=Re()*Nn--|0,Dn=Ve[Nn+En];Ve[Nn+En]=Ve[mn+En],Ve[mn+En]=Dn}return Ve}}function Qt(Re,$e){var Ve,En,xn,Nn,mn=0;if($e===void 0)try{for(var Dn=t.__values(Re),$n=Dn.next();!$n.done;$n=Dn.next()){var Hn=$n.value;(Hn=+Hn)&&(mn+=Hn)}}catch(Fr){Ve={error:Fr}}finally{try{$n&&!$n.done&&(En=Dn.return)&&En.call(Dn)}finally{if(Ve)throw Ve.error}}else{var _n=-1;try{for(var br=t.__values(Re),yr=br.next();!yr.done;yr=br.next()){var Hn=yr.value;(Hn=+$e(Hn,++_n,Re))&&(mn+=Hn)}}catch(Fr){xn={error:Fr}}finally{try{yr&&!yr.done&&(Nn=br.return)&&Nn.call(br)}finally{if(xn)throw xn.error}}}return mn}function pe(Re){if(!(Nn=Re.length))return[];for(var $e=-1,Ve=vt(Re,Vt),En=new Array(Ve);++$e<Ve;)for(var xn=-1,Nn,mn=En[$e]=new Array(Nn);++xn<Nn;)mn[xn]=Re[xn][$e];return En}function Vt(Re){return Re.length}function re(){return pe(arguments)}function Te(Re,$e){var Ve,En;if(typeof $e!="function")throw new TypeError("test is not a function");var xn=-1;try{for(var Nn=t.__values(Re),mn=Nn.next();!mn.done;mn=Nn.next()){var Dn=mn.value;if(!$e(Dn,++xn,Re))return!1}}catch($n){Ve={error:$n}}finally{try{mn&&!mn.done&&(En=Nn.return)&&En.call(Nn)}finally{if(Ve)throw Ve.error}}return!0}function ue(Re,$e){var Ve,En;if(typeof $e!="function")throw new TypeError("test is not a function");var xn=-1;try{for(var Nn=t.__values(Re),mn=Nn.next();!mn.done;mn=Nn.next()){var Dn=mn.value;if($e(Dn,++xn,Re))return!0}}catch($n){Ve={error:$n}}finally{try{mn&&!mn.done&&(En=Nn.return)&&En.call(Nn)}finally{if(Ve)throw Ve.error}}return!1}function xe(Re,$e){var Ve,En;if(typeof $e!="function")throw new TypeError("test is not a function");var xn=[],Nn=-1;try{for(var mn=t.__values(Re),Dn=mn.next();!Dn.done;Dn=mn.next()){var $n=Dn.value;$e($n,++Nn,Re)&&xn.push($n)}}catch(Hn){Ve={error:Hn}}finally{try{Dn&&!Dn.done&&(En=mn.return)&&En.call(mn)}finally{if(Ve)throw Ve.error}}return xn}function Ke(Re,$e){if(typeof Re[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof $e!="function")throw new TypeError("mapper is not a function");return Array.from(Re,function(Ve,En){return $e(Ve,En,Re)})}function Rn(Re,$e,Ve){var En,xn;if(typeof $e!="function")throw new TypeError("reducer is not a function");var Nn=Re[Symbol.iterator](),mn,Dn,$n=-1;if(arguments.length<3){if(En=Nn.next(),mn=En.done,Ve=En.value,mn)return;++$n}for(;xn=Nn.next(),mn=xn.done,Dn=xn.value,!mn;)Ve=$e(Ve,Dn,++$n,Re);return Ve}function tr(Re){if(typeof Re[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(Re).reverse()}function Pn(Re){for(var $e,Ve,En,xn,Nn=[],mn=1;mn<arguments.length;mn++)Nn[mn-1]=arguments[mn];Re=new Set(Re);try{for(var Dn=t.__values(Nn),$n=Dn.next();!$n.done;$n=Dn.next()){var Hn=$n.value;try{for(var _n=(En=void 0,t.__values(Hn)),br=_n.next();!br.done;br=_n.next()){var yr=br.value;Re.delete(yr)}}catch(Fr){En={error:Fr}}finally{try{br&&!br.done&&(xn=_n.return)&&xn.call(_n)}finally{if(En)throw En.error}}}}catch(Fr){$e={error:Fr}}finally{try{$n&&!$n.done&&(Ve=Dn.return)&&Ve.call(Dn)}finally{if($e)throw $e.error}}return Re}function dn(Re,$e){var Ve,En,xn,Nn=$e[Symbol.iterator](),mn=new Set;try{for(var Dn=t.__values(Re),$n=Dn.next();!$n.done;$n=Dn.next()){var Hn=$n.value;if(mn.has(Hn))return!1;for(var _n=void 0,br=void 0;(xn=Nn.next(),_n=xn.value,br=xn.done,xn)&&!br;){if(Object.is(Hn,_n))return!1;mn.add(_n)}}}catch(yr){Ve={error:yr}}finally{try{$n&&!$n.done&&(En=Dn.return)&&En.call(Dn)}finally{if(Ve)throw Ve.error}}return!0}function Ar(Re){return Re instanceof Set?Re:new Set(Re)}function or(Re){for(var $e,Ve,En,xn,Nn=[],mn=1;mn<arguments.length;mn++)Nn[mn-1]=arguments[mn];Re=new Set(Re),Nn=Nn.map(Ar);try{t:for(var Dn=t.__values(Re),$n=Dn.next();!$n.done;$n=Dn.next()){var Hn=$n.value;try{for(var _n=(En=void 0,t.__values(Nn)),br=_n.next();!br.done;br=_n.next()){var yr=br.value;if(!yr.has(Hn)){Re.delete(Hn);continue t}}}catch(Fr){En={error:Fr}}finally{try{br&&!br.done&&(xn=_n.return)&&xn.call(_n)}finally{if(En)throw En.error}}}}catch(Fr){$e={error:Fr}}finally{try{$n&&!$n.done&&(Ve=Dn.return)&&Ve.call(Dn)}finally{if($e)throw $e.error}}return Re}function cn(Re,$e){var Ve,En,xn,Nn=Re[Symbol.iterator](),mn=new Set;try{for(var Dn=t.__values($e),$n=Dn.next();!$n.done;$n=Dn.next()){var Hn=$n.value;if(!mn.has(Hn))for(var _n=void 0,br=void 0;xn=Nn.next(),_n=xn.value,br=xn.done,xn;){if(br)return!1;if(mn.add(_n),Object.is(Hn,_n))break}}}catch(yr){Ve={error:yr}}finally{try{$n&&!$n.done&&(En=Dn.return)&&En.call(Dn)}finally{if(Ve)throw Ve.error}}return!0}function Pr(Re,$e){return cn($e,Re)}function Sr(){for(var Re,$e,Ve,En,xn=[],Nn=0;Nn<arguments.length;Nn++)xn[Nn]=arguments[Nn];var mn=new Set;try{for(var Dn=t.__values(xn),$n=Dn.next();!$n.done;$n=Dn.next()){var Hn=$n.value;try{for(var _n=(Ve=void 0,t.__values(Hn)),br=_n.next();!br.done;br=_n.next()){var yr=br.value;mn.add(yr)}}catch(Fr){Ve={error:Fr}}finally{try{br&&!br.done&&(En=_n.return)&&En.call(_n)}finally{if(Ve)throw Ve.error}}}}catch(Fr){Re={error:Fr}}finally{try{$n&&!$n.done&&($e=Dn.return)&&$e.call(Dn)}finally{if(Re)throw Re.error}}return mn}u.Adder=A,u.InternMap=L,u.InternSet=H,u.ascending=s,u.bin=X,u.bisect=a,u.bisectCenter=l,u.bisectLeft=o,u.bisectRight=a,u.bisector=c,u.count=f,u.cross=_,u.cumsum=M,u.descending=x,u.deviation=S,u.difference=Pn,u.disjoint=dn,u.every=Te,u.extent=P,u.filter=xe,u.fsum=O,u.greatest=jn,u.greatestIndex=pr,u.group=J,u.groupSort=At,u.groups=rt,u.histogram=X,u.index=ut,u.indexes=Lt,u.intersection=or,u.least=en,u.leastIndex=An,u.map=Ke,u.max=Et,u.maxIndex=le,u.mean=je,u.median=Oe,u.merge=Ye,u.min=vt,u.minIndex=wn,u.nice=ot,u.pairs=er,u.permute=St,u.quantile=ee,u.quantileSorted=kt,u.quickselect=Nt,u.range=on,u.reduce=Rn,u.reverse=tr,u.rollup=ft,u.rollups=dt,u.scan=di,u.shuffle=Ce,u.shuffler=Me,u.some=ue,u.sort=xt,u.subset=Pr,u.sum=Qt,u.superset=cn,u.thresholdFreedmanDiaconis=Wt,u.thresholdScott=ae,u.thresholdSturges=it,u.tickIncrement=gt,u.tickStep=k,u.ticks=at,u.transpose=pe,u.union=Sr,u.variance=y,u.zip=re,Object.defineProperty(u,"__esModule",{value:!0})})},"./node_modules/_d3-collection@1.0.7@d3-collection/dist/d3-collection.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";var u="$";function s(){}s.prototype=c.prototype={constructor:s,has:function(_){return u+_ in this},get:function(_){return this[u+_]},set:function(_,M){return this[u+_]=M,this},remove:function(_){var M=u+_;return M in this&&delete this[M]},clear:function(){for(var _ in this)_[0]===u&&delete this[_]},keys:function(){var _=[];for(var M in this)M[0]===u&&_.push(M.slice(1));return _},values:function(){var _=[];for(var M in this)M[0]===u&&_.push(this[M]);return _},entries:function(){var _=[];for(var M in this)M[0]===u&&_.push({key:M.slice(1),value:this[M]});return _},size:function(){var _=0;for(var M in this)M[0]===u&&++_;return _},empty:function(){for(var _ in this)if(_[0]===u)return!1;return!0},each:function(_){for(var M in this)M[0]===u&&_(this[M],M.slice(1),this)}};function c(m,_){var M=new s;if(m instanceof s)m.each(function(A,O){M.set(O,A)});else if(Array.isArray(m)){var x=-1,y=m.length,S;if(_==null)for(;++x<y;)M.set(x,m[x]);else for(;++x<y;)M.set(_(S=m[x],x,m),S)}else if(m)for(var P in m)M.set(P,m[P]);return M}function r(){var m=[],_=[],M,x,y;function S(A,O,L,H){if(O>=m.length)return M!=null&&A.sort(M),x!=null?x(A):A;for(var F=-1,Z=A.length,G=m[O++],U,Y,J=c(),rt,ft=L();++F<Z;)(rt=J.get(U=G(Y=A[F])+""))?rt.push(Y):J.set(U,[Y]);return J.each(function(dt,ut){H(ft,ut,S(dt,O,L,H))}),ft}function P(A,O){if(++O>m.length)return A;var L,H=_[O-1];return x!=null&&O>=m.length?L=A.entries():(L=[],A.each(function(F,Z){L.push({key:Z,values:P(F,O)})})),H!=null?L.sort(function(F,Z){return H(F.key,Z.key)}):L}return y={object:function(O){return S(O,0,h,n)},map:function(O){return S(O,0,i,a)},entries:function(O){return P(S(O,0,i,a),0)},key:function(O){return m.push(O),y},sortKeys:function(O){return _[m.length-1]=O,y},sortValues:function(O){return M=O,y},rollup:function(O){return x=O,y}}}function h(){return{}}function n(m,_,M){m[_]=M}function i(){return c()}function a(m,_,M){m.set(_,M)}function o(){}var l=c.prototype;o.prototype=f.prototype={constructor:o,has:l.has,add:function(_){return _+="",this[u+_]=_,this},remove:l.remove,clear:l.clear,values:l.keys,size:l.size,empty:l.empty,each:l.each};function f(m,_){var M=new o;if(m instanceof o)m.each(function(S){M.add(S)});else if(m){var x=-1,y=m.length;if(_==null)for(;++x<y;)M.add(m[x]);else for(;++x<y;)M.add(_(m[x],x,m))}return M}function v(m){var _=[];for(var M in m)_.push(M);return _}function b(m){var _=[];for(var M in m)_.push(m[M]);return _}function g(m){var _=[];for(var M in m)_.push({key:M,value:m[M]});return _}t.nest=r,t.set=f,t.map=c,t.keys=v,t.values=b,t.entries=g,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-composite-projections@1.4.0@d3-composite-projections/d3-composite-projections.js":function(E,T,e){var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js");(function(u,s){s(T,e("./node_modules/_d3-geo@2.0.1@d3-geo/dist/d3-geo.js"),e("./node_modules/_d3-path@2.0.0@d3-path/dist/d3-path.js"))})(this,function(u,s,c){"use strict";var r=1e-6;function h(){}var n=Infinity,i=n,a=-n,o=a,l={point:f,lineStart:h,lineEnd:h,polygonStart:h,polygonEnd:h,result:function(){var At=[[n,i],[a,o]];return a=o=-(i=n=Infinity),At}};function f(xt,At){xt<n&&(n=xt),xt>a&&(a=xt),At<i&&(i=At),At>o&&(o=At)}function v(xt,At,nt){var Mt=At[1][0]-At[0][0],z=At[1][1]-At[0][1],Q=xt.clipExtent&&xt.clipExtent();xt.scale(150).translate([0,0]),Q!=null&&xt.clipExtent(null),s.geoStream(nt,xt.stream(l));var ht=l.result(),et=Math.min(Mt/(ht[1][0]-ht[0][0]),z/(ht[1][1]-ht[0][1])),at=+At[0][0]+(Mt-et*(ht[1][0]+ht[0][0]))/2,gt=+At[0][1]+(z-et*(ht[1][1]+ht[0][1]))/2;return Q!=null&&xt.clipExtent(Q),xt.scale(et*150).translate([at,gt])}function b(xt,At,nt){return v(xt,[[0,0],At],nt)}function g(xt){var At=xt.length;return{point:function(Mt,z){for(var Q=-1;++Q<At;)xt[Q].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)xt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonEnd()}}}function m(){var xt,At,nt=s.geoAlbers(),Mt,z=s.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Q,ht=s.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),et,at,gt={point:function(X,Et){at=[X,Et]}};function k(it){var X=it[0],Et=it[1];return at=null,Mt.point(X,Et),at||(Q.point(X,Et),at)||(et.point(X,Et),at)}k.invert=function(it){var X=nt.scale(),Et=nt.translate(),vt=(it[0]-Et[0])/X,Nt=(it[1]-Et[1])/X;return(Nt>=.12&&Nt<.234&&vt>=-.425&&vt<-.214?z:Nt>=.166&&Nt<.234&&vt>=-.214&&vt<-.115?ht:nt).invert(it)},k.stream=function(it){return xt&&At===it?xt:xt=g([nt.stream(At=it),z.stream(it),ht.stream(it)])},k.precision=function(it){return arguments.length?(nt.precision(it),z.precision(it),ht.precision(it),ot()):nt.precision()},k.scale=function(it){return arguments.length?(nt.scale(it),z.scale(it*.35),ht.scale(it),k.translate(nt.translate())):nt.scale()},k.translate=function(it){if(!arguments.length)return nt.translate();var X=nt.scale(),Et=+it[0],vt=+it[1];return Mt=nt.translate(it).clipExtent([[Et-.455*X,vt-.238*X],[Et+.455*X,vt+.238*X]]).stream(gt),Q=z.translate([Et-.307*X,vt+.201*X]).clipExtent([[Et-.425*X+r,vt+.12*X+r],[Et-.214*X-r,vt+.234*X-r]]).stream(gt),et=ht.translate([Et-.205*X,vt+.212*X]).clipExtent([[Et-.214*X+r,vt+.166*X+r],[Et-.115*X-r,vt+.234*X-r]]).stream(gt),ot()},k.fitExtent=function(it,X){return v(k,it,X)},k.fitSize=function(it,X){return b(k,it,X)};function ot(){return xt=At=null,k}return k.drawCompositionBorders=function(it){var X=nt([-102.91,26.3]),Et=nt([-104,27.5]),vt=nt([-108,29.1]),Nt=nt([-110,29.1]),$t=nt([-110,26.7]),ee=nt([-112.8,27.6]),kt=nt([-114.3,30.6]),Wt=nt([-119.3,30.1]);it.moveTo(X[0],X[1]),it.lineTo(Et[0],Et[1]),it.lineTo(vt[0],vt[1]),it.lineTo(Nt[0],Nt[1]),it.moveTo($t[0],$t[1]),it.lineTo(ee[0],ee[1]),it.lineTo(kt[0],kt[1]),it.lineTo(Wt[0],Wt[1])},k.getCompositionBorders=function(){var it=c.path();return this.drawCompositionBorders(it),it.toString()},k.scale(1070)}function _(xt){var At=xt.length;return{point:function(Mt,z){for(var Q=-1;++Q<At;)xt[Q].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)xt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonEnd()}}}function M(){var xt,At,nt=s.geoAlbers(),Mt,z=s.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Q,ht=s.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),et,at=s.geoConicEqualArea().rotate([66,0]).center([0,18]).parallels([8,18]),gt,k=s.geoEquirectangular().rotate([173,14]),ot,it=s.geoEquirectangular().rotate([-145,-16.8]),X,Et,vt={point:function(kt,Wt){Et=[kt,Wt]}};function Nt(ee){var kt=ee[0],Wt=ee[1];return Et=null,Mt.point(kt,Wt),Et||(Q.point(kt,Wt),Et)||(et.point(kt,Wt),Et)||(gt.point(kt,Wt),Et)||(ot.point(kt,Wt),Et)||(X.point(kt,Wt),Et)}Nt.invert=function(ee){var kt=nt.scale(),Wt=nt.translate(),ae=(ee[0]-Wt[0])/kt,le=(ee[1]-Wt[1])/kt;return(le>=.12&&le<.234&&ae>=-.425&&ae<-.214?z:le>=.166&&le<.234&&ae>=-.214&&ae<-.115?ht:le>=.2064&&le<.2413&&ae>=.312&&ae<.385?at:le>=.09&&le<.1197&&ae>=-.4243&&ae<-.3232?k:le>=-.0518&&le<.0895&&ae>=-.4243&&ae<-.3824?it:nt).invert(ee)},Nt.stream=function(ee){return xt&&At===ee?xt:xt=_([nt.stream(At=ee),z.stream(ee),ht.stream(ee),at.stream(ee),k.stream(ee),it.stream(ee)])},Nt.precision=function(ee){return arguments.length?(nt.precision(ee),z.precision(ee),ht.precision(ee),at.precision(ee),k.precision(ee),it.precision(ee),$t()):nt.precision()},Nt.scale=function(ee){return arguments.length?(nt.scale(ee),z.scale(ee*.35),ht.scale(ee),at.scale(ee),k.scale(ee*2),it.scale(ee),Nt.translate(nt.translate())):nt.scale()},Nt.translate=function(ee){if(!arguments.length)return nt.translate();var kt=nt.scale(),Wt=+ee[0],ae=+ee[1];return Mt=nt.translate(ee).clipExtent([[Wt-.455*kt,ae-.238*kt],[Wt+.455*kt,ae+.238*kt]]).stream(vt),Q=z.translate([Wt-.307*kt,ae+.201*kt]).clipExtent([[Wt-.425*kt+r,ae+.12*kt+r],[Wt-.214*kt-r,ae+.233*kt-r]]).stream(vt),et=ht.translate([Wt-.205*kt,ae+.212*kt]).clipExtent([[Wt-.214*kt+r,ae+.166*kt+r],[Wt-.115*kt-r,ae+.233*kt-r]]).stream(vt),gt=at.translate([Wt+.35*kt,ae+.224*kt]).clipExtent([[Wt+.312*kt+r,ae+.2064*kt+r],[Wt+.385*kt-r,ae+.233*kt-r]]).stream(vt),ot=k.translate([Wt-.492*kt,ae+.09*kt]).clipExtent([[Wt-.4243*kt+r,ae+.0903*kt+r],[Wt-.3233*kt-r,ae+.1197*kt-r]]).stream(vt),X=it.translate([Wt-.408*kt,ae+.018*kt]).clipExtent([[Wt-.4244*kt+r,ae-.0519*kt+r],[Wt-.3824*kt-r,ae+.0895*kt-r]]).stream(vt),$t()},Nt.fitExtent=function(ee,kt){return v(Nt,ee,kt)},Nt.fitSize=function(ee,kt){return b(Nt,ee,kt)};function $t(){return xt=At=null,Nt}return Nt.drawCompositionBorders=function(ee){var kt=nt([-110.4641,28.2805]),Wt=nt([-104.0597,28.9528]),ae=nt([-103.7049,25.1031]),le=nt([-109.8337,24.4531]),je=nt([-124.4745,28.1407]),Oe=nt([-110.931,30.8844]),We=nt([-109.8337,24.4531]),Ye=nt([-122.4628,21.8562]),wn=nt([-76.8579,25.1544]),er=nt([-72.429,24.2097]),wr=nt([-72.8265,22.7056]),on=nt([-77.1852,23.6392]),en=nt([-125.0093,29.7791]),An=nt([-118.5193,31.3262]),jn=nt([-118.064,29.6912]),pr=nt([-124.4369,28.169]),di=nt([-128.1314,37.4582]),Ce=nt([-125.2132,38.214]),Me=nt([-122.3616,30.5115]),Qt=nt([-125.0315,29.8211]);ee.moveTo(kt[0],kt[1]),ee.lineTo(Wt[0],Wt[1]),ee.lineTo(ae[0],ae[1]),ee.lineTo(ae[0],ae[1]),ee.lineTo(le[0],le[1]),ee.closePath(),ee.moveTo(je[0],je[1]),ee.lineTo(Oe[0],Oe[1]),ee.lineTo(We[0],We[1]),ee.lineTo(We[0],We[1]),ee.lineTo(Ye[0],Ye[1]),ee.closePath(),ee.moveTo(wn[0],wn[1]),ee.lineTo(er[0],er[1]),ee.lineTo(wr[0],wr[1]),ee.lineTo(wr[0],wr[1]),ee.lineTo(on[0],on[1]),ee.closePath(),ee.moveTo(en[0],en[1]),ee.lineTo(An[0],An[1]),ee.lineTo(jn[0],jn[1]),ee.lineTo(jn[0],jn[1]),ee.lineTo(pr[0],pr[1]),ee.closePath(),ee.moveTo(di[0],di[1]),ee.lineTo(Ce[0],Ce[1]),ee.lineTo(Me[0],Me[1]),ee.lineTo(Me[0],Me[1]),ee.lineTo(Qt[0],Qt[1]),ee.closePath()},Nt.getCompositionBorders=function(){var ee=c.path();return this.drawCompositionBorders(ee),ee.toString()},Nt.scale(1070)}function x(xt){var At=xt.length;return{point:function(Mt,z){for(var Q=-1;++Q<At;)xt[Q].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)xt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonEnd()}}}function y(){var xt,At,nt=s.geoConicConformal().rotate([5,-38.6]).parallels([0,60]),Mt,z=s.geoConicConformal().rotate([5,-38.6]).parallels([0,60]),Q,ht,et={point:function(ot,it){ht=[ot,it]}};function at(k){var ot=k[0],it=k[1];return ht=null,Mt.point(ot,it),ht||(Q.point(ot,it),ht)}at.invert=function(k){var ot=nt.scale(),it=nt.translate(),X=(k[0]-it[0])/ot,Et=(k[1]-it[1])/ot;return(Et>=.05346&&Et<.0897&&X>=-.13388&&X<-.0322?z:nt).invert(k)},at.stream=function(k){return xt&&At===k?xt:xt=x([nt.stream(At=k),z.stream(k)])},at.precision=function(k){return arguments.length?(nt.precision(k),z.precision(k),gt()):nt.precision()},at.scale=function(k){return arguments.length?(nt.scale(k),z.scale(k),at.translate(nt.translate())):nt.scale()},at.translate=function(k){if(!arguments.length)return nt.translate();var ot=nt.scale(),it=+k[0],X=+k[1];return Mt=nt.translate(k).clipExtent([[it-.06857*ot,X-.1288*ot],[it+.13249*ot,X+.06*ot]]).stream(et),Q=z.translate([it+.1*ot,X-.094*ot]).clipExtent([[it-.1331*ot+r,X+.053457*ot+r],[it-.0354*ot-r,X+.08969*ot-r]]).stream(et),gt()},at.fitExtent=function(k,ot){return v(at,k,ot)},at.fitSize=function(k,ot){return b(at,k,ot)};function gt(){return xt=At=null,at}return at.drawCompositionBorders=function(k){var ot=nt([-14.034675,34.965007]),it=nt([-7.4208899,35.536988]),X=nt([-7.3148275,33.54359]);k.moveTo(ot[0],ot[1]),k.lineTo(it[0],it[1]),k.lineTo(X[0],X[1])},at.getCompositionBorders=function(){var k=c.path();return this.drawCompositionBorders(k),k.toString()},at.scale(2700)}function S(xt){var At=xt.length;return{point:function(Mt,z){for(var Q=-1;++Q<At;)xt[Q].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)xt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonEnd()}}}function P(){var xt,At,nt=s.geoConicConformal().rotate([10,-39.3]).parallels([0,60]),Mt,z=s.geoConicConformal().rotate([17,-32.7]).parallels([0,60]),Q,ht=s.geoConicConformal().rotate([27.8,-38.6]).parallels([0,60]),et,at,gt={point:function(X,Et){at=[X,Et]}};function k(it){var X=it[0],Et=it[1];return at=null,Mt.point(X,Et),at||(Q.point(X,Et),at)||(et.point(X,Et),at)}k.invert=function(it){var X=nt.scale(),Et=nt.translate(),vt=(it[0]-Et[0])/X,Nt=(it[1]-Et[1])/X;return(Nt>=.0093&&Nt<.03678&&vt>=-.03875&&vt<-.0116?z:Nt>=-.0412&&Nt<.0091&&vt>=-.07782&&vt<-.01166?ht:nt).invert(it)},k.stream=function(it){return xt&&At===it?xt:xt=S([nt.stream(At=it),z.stream(it),ht.stream(it)])},k.precision=function(it){return arguments.length?(nt.precision(it),z.precision(it),ht.precision(it),ot()):nt.precision()},k.scale=function(it){return arguments.length?(nt.scale(it),z.scale(it),ht.scale(it*.6),k.translate(nt.translate())):nt.scale()},k.translate=function(it){if(!arguments.length)return nt.translate();var X=nt.scale(),Et=+it[0],vt=+it[1];return Mt=nt.translate(it).clipExtent([[Et-.0115*X,vt-.1138*X],[Et+.2105*X,vt+.0673*X]]).stream(gt),Q=z.translate([Et-.0265*X,vt+.025*X]).clipExtent([[Et-.0388*X+r,vt+.0093*X+r],[Et-.0116*X-r,vt+.0368*X-r]]).stream(gt),et=ht.translate([Et-.045*X,vt+-.02*X]).clipExtent([[Et-.0778*X+r,vt-.0413*X+r],[Et-.0117*X-r,vt+.0091*X-r]]).stream(gt),ot()},k.fitExtent=function(it,X){return v(k,it,X)},k.fitSize=function(it,X){return b(k,it,X)};function ot(){return xt=At=null,k}return k.drawCompositionBorders=function(it){var X=nt([-12.8351,38.7113]),Et=nt([-10.8482,38.7633]),vt=nt([-10.8181,37.2072]),Nt=nt([-12.7345,37.1573]),$t=nt([-16.0753,41.4436]),ee=nt([-10.9168,41.6861]),kt=nt([-10.8557,38.7747]),Wt=nt([-15.6728,38.5505]);it.moveTo(X[0],X[1]),it.lineTo(Et[0],Et[1]),it.lineTo(vt[0],vt[1]),it.lineTo(vt[0],vt[1]),it.lineTo(Nt[0],Nt[1]),it.closePath(),it.moveTo($t[0],$t[1]),it.lineTo(ee[0],ee[1]),it.lineTo(kt[0],kt[1]),it.lineTo(kt[0],kt[1]),it.lineTo(Wt[0],Wt[1]),it.closePath()},k.getCompositionBorders=function(){var it=c.path();return this.drawCompositionBorders(it),it.toString()},k.scale(4200)}function A(xt){var At=xt.length;return{point:function(Mt,z){for(var Q=-1;++Q<At;)xt[Q].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)xt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonEnd()}}}function O(){var xt,At,nt=s.geoMercator().rotate([80,1.5]),Mt,z=s.geoMercator().rotate([90.73,1]),Q,ht,et={point:function(ot,it){ht=[ot,it]}};function at(k){var ot=k[0],it=k[1];return ht=null,Mt.point(ot,it),ht||(Q.point(ot,it),ht)}at.invert=function(k){var ot=nt.scale(),it=nt.translate(),X=(k[0]-it[0])/ot,Et=(k[1]-it[1])/ot;return(Et>=-.0676&&Et<-.026&&X>=-.0857&&X<-.0263?z:nt).invert(k)},at.stream=function(k){return xt&&At===k?xt:xt=A([nt.stream(At=k),z.stream(k)])},at.precision=function(k){return arguments.length?(nt.precision(k),z.precision(k),gt()):nt.precision()},at.scale=function(k){return arguments.length?(nt.scale(k),z.scale(k),at.translate(nt.translate())):nt.scale()},at.translate=function(k){if(!arguments.length)return nt.translate();var ot=nt.scale(),it=+k[0],X=+k[1];return Mt=nt.translate(k).clipExtent([[it-.0262*ot,X-.0734*ot],[it+.1741*ot,X+.079*ot]]).stream(et),Q=z.translate([it-.06*ot,X-.04*ot]).clipExtent([[it-.0857*ot+r,X-.0676*ot+r],[it-.0263*ot-r,X-.026*ot-r]]).stream(et),gt()},at.fitExtent=function(k,ot){return v(at,k,ot)},at.fitSize=function(k,ot){return b(at,k,ot)};function gt(){return xt=At=null,at}return at.drawCompositionBorders=function(k){var ot=nt([-84.9032,2.3757]),it=nt([-81.5047,2.3708]),X=nt([-81.5063,-.01]),Et=nt([-84.9086,-.005]);k.moveTo(ot[0],ot[1]),k.lineTo(it[0],it[1]),k.lineTo(X[0],X[1]),k.lineTo(Et[0],Et[1]),k.closePath()},at.getCompositionBorders=function(){var k=c.path();return this.drawCompositionBorders(k),k.toString()},at.scale(3500)}function L(xt){var At=xt.length;return{point:function(Mt,z){for(var Q=-1;++Q<At;)xt[Q].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)xt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonEnd()}}}function H(){var xt,At,nt=s.geoTransverseMercator().rotate([72,37]),Mt,z=s.geoStereographic().rotate([72,0]),Q,ht=s.geoMercator().rotate([80,33.5]),et,at=s.geoMercator().rotate([110,25]),gt,k,ot={point:function(vt,Nt){k=[vt,Nt]}};function it(Et){var vt=Et[0],Nt=Et[1];return k=null,Mt.point(vt,Nt),k||(Q.point(vt,Nt),k)||(et.point(vt,Nt),k)||(gt.point(vt,Nt),k)}it.invert=function(Et){var vt=nt.scale(),Nt=nt.translate(),$t=(Et[0]-Nt[0])/vt,ee=(Et[1]-Nt[1])/vt;return(ee>=.2582&&ee<.32&&$t>=-.1036&&$t<-.087?z:ee>=-.01298&&ee<.0133&&$t>=-.11396&&$t<-.05944?ht:ee>=.01539&&ee<.03911&&$t>=-.089&&$t<-.0588?at:nt).invert(Et)},it.stream=function(Et){return xt&&At===Et?xt:xt=L([nt.stream(At=Et),z.stream(Et),ht.stream(Et),at.stream(Et)])},it.precision=function(Et){return arguments.length?(nt.precision(Et),z.precision(Et),ht.precision(Et),at.precision(Et),X()):nt.precision()},it.scale=function(Et){return arguments.length?(nt.scale(Et),z.scale(Et*.15),ht.scale(Et*1.5),at.scale(Et*1.5),it.translate(nt.translate())):nt.scale()},it.translate=function(Et){if(!arguments.length)return nt.translate();var vt=nt.scale(),Nt=+Et[0],$t=+Et[1];return Mt=nt.translate(Et).clipExtent([[Nt-.059*vt,$t-.3835*vt],[Nt+.4498*vt,$t+.3375*vt]]).stream(ot),Q=z.translate([Nt-.087*vt,$t+.17*vt]).clipExtent([[Nt-.1166*vt+r,$t+.2582*vt+r],[Nt-.06*vt-r,$t+.32*vt-r]]).stream(ot),et=ht.translate([Nt-.092*vt,$t-0*vt]).clipExtent([[Nt-.114*vt+r,$t-.013*vt+r],[Nt-.0594*vt-r,$t+.0133*vt-r]]).stream(ot),gt=at.translate([Nt-.089*vt,$t-.0265*vt]).clipExtent([[Nt-.089*vt+r,$t+.0154*vt+r],[Nt-.0588*vt-r,$t+.0391*vt-r]]).stream(ot),X()},it.fitExtent=function(Et,vt){return v(it,Et,vt)},it.fitSize=function(Et,vt){return b(it,Et,vt)};function X(){return xt=At=null,it}return it.drawCompositionBorders=function(Et){var vt=nt([-82.6999,-51.3043]),Nt=nt([-77.5442,-51.6631]),$t=nt([-78.0254,-55.186]),ee=nt([-83.6106,-54.7785]),kt=nt([-80.0638,-35.984]),Wt=nt([-76.2153,-36.1811]),ae=nt([-76.2994,-37.6839]),le=nt([-80.2231,-37.4757]),je=nt([-78.442,-37.706]),Oe=nt([-76.263,-37.8054]),We=nt([-76.344,-39.1595]),Ye=nt([-78.5638,-39.0559]);Et.moveTo(vt[0],vt[1]),Et.lineTo(Nt[0],Nt[1]),Et.lineTo($t[0],$t[1]),Et.lineTo($t[0],$t[1]),Et.lineTo(ee[0],ee[1]),Et.closePath(),Et.moveTo(kt[0],kt[1]),Et.lineTo(Wt[0],Wt[1]),Et.lineTo(ae[0],ae[1]),Et.lineTo(ae[0],ae[1]),Et.lineTo(le[0],le[1]),Et.closePath(),Et.moveTo(je[0],je[1]),Et.lineTo(Oe[0],Oe[1]),Et.lineTo(We[0],We[1]),Et.lineTo(We[0],We[1]),Et.lineTo(Ye[0],Ye[1]),Et.closePath()},it.getCompositionBorders=function(){var Et=c.path();return this.drawCompositionBorders(Et),Et.toString()},it.scale(700)}function F(xt){var At=xt.length;return{point:function(Mt,z){for(var Q=-1;++Q<At;)xt[Q].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)xt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonEnd()}}}function Z(){var xt,At,nt=s.geoConicEquidistant().rotate([-136,-22]).parallels([40,34]),Mt,z=s.geoConicEquidistant().rotate([-146,-26]).parallels([40,34]),Q,ht=s.geoConicEquidistant().rotate([-126,-19]).parallels([40,34]),et,at,gt={point:function(X,Et){at=[X,Et]}};function k(it){var X=it[0],Et=it[1];return at=null,Mt.point(X,Et),at||(Q.point(X,Et),at)||(et.point(X,Et),at)}k.invert=function(it){var X=nt.scale(),Et=nt.translate(),vt=(it[0]-Et[0])/X,Nt=(it[1]-Et[1])/X;return(Nt>=-.10925&&Nt<-.02701&&vt>=-.135&&vt<-.0397?z:Nt>=.04713&&Nt<.11138&&vt>=-.03986&&vt<.051?ht:nt).invert(it)},k.stream=function(it){return xt&&At===it?xt:xt=F([nt.stream(At=it),z.stream(it),ht.stream(it)])},k.precision=function(it){return arguments.length?(nt.precision(it),z.precision(it),ht.precision(it),ot()):nt.precision()},k.scale=function(it){return arguments.length?(nt.scale(it),z.scale(it),ht.scale(it*.7),k.translate(nt.translate())):nt.scale()},k.translate=function(it){if(!arguments.length)return nt.translate();var X=nt.scale(),Et=+it[0],vt=+it[1];return Mt=nt.translate(it).clipExtent([[Et-.1352*X,vt-.1091*X],[Et+.117*X,vt+.098*X]]).stream(gt),Q=z.translate([Et-.0425*X,vt-.005*X]).clipExtent([[Et-.135*X+r,vt-.1093*X+r],[Et-.0397*X-r,vt-.027*X-r]]).stream(gt),et=ht.translate(it).clipExtent([[Et-.0399*X+r,vt+.0471*X+r],[Et+.051*X-r,vt+.1114*X-r]]).stream(gt),ot()},k.fitExtent=function(it,X){return v(k,it,X)},k.fitSize=function(it,X){return b(k,it,X)};function ot(){return xt=At=null,k}return k.drawCompositionBorders=function(it){var X=nt([126.01320483689143,41.621090310215585]),Et=nt([133.04304387025903,42.15087523707186]),vt=nt([133.3021766080688,37.43975444725098]),Nt=nt([126.87889168628224,36.95488945159779]),$t=nt([132.9,29.8]),ee=nt([134,33]),kt=nt([139.3,33.2]),Wt=nt([139.16,30.5]);it.moveTo(X[0],X[1]),it.lineTo(Et[0],Et[1]),it.lineTo(vt[0],vt[1]),it.lineTo(Nt[0],Nt[1]),it.closePath(),it.moveTo($t[0],$t[1]),it.lineTo(ee[0],ee[1]),it.lineTo(kt[0],kt[1]),it.lineTo(Wt[0],Wt[1])},k.getCompositionBorders=function(){var it=c.path();return this.drawCompositionBorders(it),it.toString()},k.scale(2200)}function G(xt){var At=xt.length;return{point:function(Mt,z){for(var Q=-1;++Q<At;)xt[Q].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)xt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonEnd()}}}function U(){var xt,At,nt=s.geoConicConformal().rotate([-3,-46.2]).parallels([0,60]),Mt,z=s.geoMercator().center([-53.2,3.9]),Q,ht=s.geoMercator().center([-61.03,14.67]),et,at=s.geoMercator().center([-61.46,16.14]),gt,k=s.geoMercator().center([-62.85,17.92]),ot,it=s.geoMercator().center([-56.23,46.93]),X,Et=s.geoMercator().center([45.16,-12.8]),vt,Nt=s.geoMercator().center([55.52,-21.13]),$t,ee=s.geoMercator().center([165.8,-21.07]),kt,Wt=s.geoMercator().center([-178.1,-14.3]),ae,le=s.geoMercator().center([-150.55,-17.11]),je,Oe=s.geoMercator().center([-150.55,-17.11]),We,Ye,wn={point:function(en,An){Ye=[en,An]}};function er(on){var en=on[0],An=on[1];return Ye=null,Mt.point(en,An),Ye||(Q.point(en,An),Ye)||(et.point(en,An),Ye)||(gt.point(en,An),Ye)||(ot.point(en,An),Ye)||(X.point(en,An),Ye)||(vt.point(en,An),Ye)||($t.point(en,An),Ye)||(kt.point(en,An),Ye)||(ae.point(en,An),Ye)||(je.point(en,An),Ye)||(We.point(en,An),Ye)}er.invert=function(on){var en=nt.scale(),An=nt.translate(),jn=(on[0]-An[0])/en,pr=(on[1]-An[1])/en;return(pr>=.029&&pr<.0864&&jn>=-.14&&jn<-.0996?z:pr>=0&&pr<.029&&jn>=-.14&&jn<-.0996?ht:pr>=-.032&&pr<0&&jn>=-.14&&jn<-.0996?at:pr>=-.052&&pr<-.032&&jn>=-.14&&jn<-.0996?k:pr>=-.076&&pr<.052&&jn>=-.14&&jn<-.0996?it:pr>=-.076&&pr<-.052&&jn>=.0967&&jn<.1371?Et:pr>=-.052&&pr<-.02&&jn>=.0967&&jn<.1371?Nt:pr>=-.02&&pr<.012&&jn>=.0967&&jn<.1371?ee:pr>=.012&&pr<.033&&jn>=.0967&&jn<.1371?Wt:pr>=.033&&pr<.0864&&jn>=.0967&&jn<.1371?le:nt).invert(on)},er.stream=function(on){return xt&&At===on?xt:xt=G([nt.stream(At=on),z.stream(on),ht.stream(on),at.stream(on),k.stream(on),it.stream(on),Et.stream(on),Nt.stream(on),ee.stream(on),Wt.stream(on),le.stream(on),Oe.stream(on)])},er.precision=function(on){return arguments.length?(nt.precision(on),z.precision(on),ht.precision(on),at.precision(on),k.precision(on),it.precision(on),Et.precision(on),Nt.precision(on),ee.precision(on),Wt.precision(on),le.precision(on),Oe.precision(on),wr()):nt.precision()},er.scale=function(on){return arguments.length?(nt.scale(on),z.scale(on*.6),ht.scale(on*1.6),at.scale(on*1.4),k.scale(on*5),it.scale(on*1.3),Et.scale(on*1.6),Nt.scale(on*1.2),ee.scale(on*.3),Wt.scale(on*2.7),le.scale(on*.5),Oe.scale(on*.06),er.translate(nt.translate())):nt.scale()},er.translate=function(on){if(!arguments.length)return nt.translate();var en=nt.scale(),An=+on[0],jn=+on[1];return Mt=nt.translate(on).clipExtent([[An-.0996*en,jn-.0908*en],[An+.0967*en,jn+.0864*en]]).stream(wn),Q=z.translate([An-.12*en,jn+.0575*en]).clipExtent([[An-.14*en+r,jn+.029*en+r],[An-.0996*en-r,jn+.0864*en-r]]).stream(wn),et=ht.translate([An-.12*en,jn+.013*en]).clipExtent([[An-.14*en+r,jn+0*en+r],[An-.0996*en-r,jn+.029*en-r]]).stream(wn),gt=at.translate([An-.12*en,jn-.014*en]).clipExtent([[An-.14*en+r,jn-.032*en+r],[An-.0996*en-r,jn+0*en-r]]).stream(wn),ot=k.translate([An-.12*en,jn-.044*en]).clipExtent([[An-.14*en+r,jn-.052*en+r],[An-.0996*en-r,jn-.032*en-r]]).stream(wn),X=it.translate([An-.12*en,jn-.065*en]).clipExtent([[An-.14*en+r,jn-.076*en+r],[An-.0996*en-r,jn-.052*en-r]]).stream(wn),vt=Et.translate([An+.117*en,jn-.064*en]).clipExtent([[An+.0967*en+r,jn-.076*en+r],[An+.1371*en-r,jn-.052*en-r]]).stream(wn),$t=Nt.translate([An+.116*en,jn-.0355*en]).clipExtent([[An+.0967*en+r,jn-.052*en+r],[An+.1371*en-r,jn-.02*en-r]]).stream(wn),kt=ee.translate([An+.116*en,jn-.0048*en]).clipExtent([[An+.0967*en+r,jn-.02*en+r],[An+.1371*en-r,jn+.012*en-r]]).stream(wn),ae=Wt.translate([An+.116*en,jn+.022*en]).clipExtent([[An+.0967*en+r,jn+.012*en+r],[An+.1371*en-r,jn+.033*en-r]]).stream(wn),We=Oe.translate([An+.11*en,jn+.045*en]).clipExtent([[An+.0967*en+r,jn+.033*en+r],[An+.1371*en-r,jn+.06*en-r]]).stream(wn),je=le.translate([An+.115*en,jn+.075*en]).clipExtent([[An+.0967*en+r,jn+.06*en+r],[An+.1371*en-r,jn+.0864*en-r]]).stream(wn),wr()},er.fitExtent=function(on,en){return v(er,on,en)},er.fitSize=function(on,en){return b(er,on,en)};function wr(){return xt=At=null,er}return er.drawCompositionBorders=function(on){var en,An,jn,pr;en=nt([-7.938886725111036,43.7219460918835]),An=nt([-4.832080896458295,44.12930268549372]),jn=nt([-4.205299743793263,40.98096346967365]),pr=nt([-7.071796453126152,40.610037319181444]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath(),en=nt([-8.42751373617692,45.32889452553031]),An=nt([-5.18599305777107,45.7566442062976]),jn=nt([-4.832080905154431,44.129302726751426]),pr=nt([-7.938886737126192,43.72194613263854]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath(),en=nt([-9.012656899657046,47.127733821030176]),An=nt([-5.6105244772793155,47.579777861410626]),jn=nt([-5.185993067168585,45.756644248170346]),pr=nt([-8.427513749141811,45.32889456686326]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath(),en=nt([-9.405747558985553,48.26506375557457]),An=nt([-5.896175018439575,48.733352850851624]),jn=nt([-5.610524487556043,47.57977790393761]),pr=nt([-9.012656913808351,47.127733862971255]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath(),en=nt([-9.908436061346974,49.642448789505856]),An=nt([-6.262026716233124,50.131426841787174]),jn=nt([-5.896175029331232,48.73335289377258]),pr=nt([-9.40574757396393,48.26506379787767]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath(),en=nt([11.996907706504462,50.16039028163579]),An=nt([15.649907879773343,49.68279246765253]),jn=nt([15.156712840526632,48.30371557625831]),pr=nt([11.64122661754411,48.761078240546816]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath(),en=nt([11.641226606955788,48.7610781975889]),An=nt([15.156712825832164,48.30371553390465]),jn=nt([14.549932166241172,46.4866532486199]),pr=nt([11.204443787952183,46.91899233914248]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath(),en=nt([11.204443778297161,46.918992296823646]),An=nt([14.549932152815039,46.486653206856396]),jn=nt([13.994409796764009,44.695833444323256]),pr=nt([10.805306599253848,45.105133870684924]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath(),en=nt([10.805306590412085,45.10513382903308]),An=nt([13.99440978444733,44.695833403183606]),jn=nt([13.654633799024392,43.53552468558152]),pr=nt([10.561516803980956,43.930671459798624]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath(),en=nt([10.561516795617383,43.93067141859757]),An=nt([13.654633787361952,43.5355246448671]),jn=nt([12.867691604239901,40.640701985019405]),pr=nt([9.997809515987688,41.00288343254471]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath(),en=nt([10.8,42.4]),An=nt([12.8,42.13]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1])},er.getCompositionBorders=function(){var on=c.path();return this.drawCompositionBorders(on),on.toString()},er.scale(2700)}function Y(xt){var At=xt.length;return{point:function(Mt,z){for(var Q=-1;++Q<At;)xt[Q].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)xt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonEnd()}}}function J(){var xt,At,nt=s.geoConicConformal().rotate([-10,-53]).parallels([0,60]),Mt,z=s.geoMercator().center([-61.46,16.14]),Q,ht=s.geoMercator().center([-53.2,3.9]),et,at=s.geoConicConformal().rotate([27.8,-38.9]).parallels([0,60]),gt,k=s.geoConicConformal().rotate([25.43,-37.398]).parallels([0,60]),ot,it=s.geoConicConformal().rotate([31.17,-39.539]).parallels([0,60]),X,Et=s.geoConicConformal().rotate([17,-32.7]).parallels([0,60]),vt,Nt=s.geoConicConformal().rotate([16,-28.5]).parallels([0,60]),$t,ee=s.geoMercator().center([-61.03,14.67]),kt,Wt=s.geoMercator().center([45.16,-12.8]),ae,le=s.geoMercator().center([55.52,-21.13]),je,Oe=s.geoConicConformal().rotate([-14.4,-35.95]).parallels([0,60]),We,Ye,wn={point:function(en,An){Ye=[en,An]}};function er(on){var en=on[0],An=on[1];return Ye=null,Mt.point(en,An),Ye||(et.point(en,An),Ye)||(kt.point(en,An),Ye)||(Q.point(en,An),Ye)||($t.point(en,An),Ye)||(vt.point(en,An),Ye)||(ae.point(en,An),Ye)||(je.point(en,An),Ye)||(We.point(en,An),Ye)||(gt.point(en,An),Ye)||(ot.point(en,An),Ye)||(X.point(en,An),Ye)}er.invert=function(on){var en=nt.scale(),An=nt.translate(),jn=(on[0]-(An[0]+.08*en))/en,pr=(on[1]-An[1])/en;return(pr>=-.31&&pr<-.24&&jn>=.14&&jn<.24?z:pr>=-.24&&pr<-.17&&jn>=.14&&jn<.24?ht:pr>=-.17&&pr<-.12&&jn>=.21&&jn<.24?k:pr>=-.17&&pr<-.14&&jn>=.14&&jn<.165?it:pr>=-.17&&pr<-.1&&jn>=.14&&jn<.24?at:pr>=-.1&&pr<-.03&&jn>=.14&&jn<.24?Et:pr>=-.03&&pr<.04&&jn>=.14&&jn<.24?Nt:pr>=-.31&&pr<-.24&&jn>=.24&&jn<.34?ee:pr>=-.24&&pr<-.17&&jn>=.24&&jn<.34?Wt:pr>=-.17&&pr<-.1&&jn>=.24&&jn<.34?le:pr>=-.1&&pr<-.03&&jn>=.24&&jn<.34?Oe:nt).invert(on)},er.stream=function(on){return xt&&At===on?xt:xt=Y([nt.stream(At=on),ht.stream(on),ee.stream(on),z.stream(on),Nt.stream(on),Et.stream(on),Wt.stream(on),le.stream(on),Oe.stream(on),at.stream(on),k.stream(on),it.stream(on)])},er.precision=function(on){return arguments.length?(nt.precision(on),ht.precision(on),ee.precision(on),z.precision(on),Nt.precision(on),Et.precision(on),Wt.precision(on),le.precision(on),Oe.precision(on),at.precision(on),k.precision(on),it.precision(on),wr()):nt.precision()},er.scale=function(on){return arguments.length?(nt.scale(on),z.scale(on*3),ht.scale(on*.8),ee.scale(on*3.5),le.scale(on*2.7),at.scale(on*2),k.scale(on*2),it.scale(on*2),Et.scale(on*3),Nt.scale(on),Wt.scale(on*5.5),Oe.scale(on*6),er.translate(nt.translate())):nt.scale()},er.translate=function(on){if(!arguments.length)return nt.translate();var en=nt.scale(),An=+on[0],jn=+on[1];return Mt=nt.translate([An-.08*en,jn]).clipExtent([[An-.51*en,jn-.33*en],[An+.5*en,jn+.33*en]]).stream(wn),Q=z.translate([An+.19*en,jn-.275*en]).clipExtent([[An+.14*en+r,jn-.31*en+r],[An+.24*en-r,jn-.24*en-r]]).stream(wn),et=ht.translate([An+.19*en,jn-.205*en]).clipExtent([[An+.14*en+r,jn-.24*en+r],[An+.24*en-r,jn-.17*en-r]]).stream(wn),gt=at.translate([An+.19*en,jn-.135*en]).clipExtent([[An+.14*en+r,jn-.17*en+r],[An+.24*en-r,jn-.1*en-r]]).stream(wn),ot=k.translate([An+.225*en,jn-.147*en]).clipExtent([[An+.21*en+r,jn-.17*en+r],[An+.24*en-r,jn-.12*en-r]]).stream(wn),X=it.translate([An+.153*en,jn-.15*en]).clipExtent([[An+.14*en+r,jn-.17*en+r],[An+.165*en-r,jn-.14*en-r]]).stream(wn),vt=Et.translate([An+.19*en,jn-.065*en]).clipExtent([[An+.14*en+r,jn-.1*en+r],[An+.24*en-r,jn-.03*en-r]]).stream(wn),$t=Nt.translate([An+.19*en,jn+.005*en]).clipExtent([[An+.14*en+r,jn-.03*en+r],[An+.24*en-r,jn+.04*en-r]]).stream(wn),kt=ee.translate([An+.29*en,jn-.275*en]).clipExtent([[An+.24*en+r,jn-.31*en+r],[An+.34*en-r,jn-.24*en-r]]).stream(wn),ae=Wt.translate([An+.29*en,jn-.205*en]).clipExtent([[An+.24*en+r,jn-.24*en+r],[An+.34*en-r,jn-.17*en-r]]).stream(wn),je=le.translate([An+.29*en,jn-.135*en]).clipExtent([[An+.24*en+r,jn-.17*en+r],[An+.34*en-r,jn-.1*en-r]]).stream(wn),We=Oe.translate([An+.29*en,jn-.065*en]).clipExtent([[An+.24*en+r,jn-.1*en+r],[An+.34*en-r,jn-.03*en-r]]).stream(wn),wr()},er.fitExtent=function(on,en){return v(er,on,en)},er.fitSize=function(on,en){return b(er,on,en)};function wr(){return xt=At=null,er}return er.drawCompositionBorders=function(on){var en,An,jn,pr;en=nt([42.45755610828648,63.343658547914934]),An=nt([52.65837266667029,59.35045080290929]),jn=nt([47.19754502247785,56.12653496548117]),pr=nt([37.673034273363044,59.61638268506111]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath(),en=nt([59.41110754003403,62.35069727399336]),An=nt([66.75050228640794,57.11797303636038]),jn=nt([60.236065725110436,54.63331433818992]),pr=nt([52.65837313153311,59.350450804599355]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath(),en=nt([48.81091130080243,66.93353402634641]),An=nt([59.41110730654679,62.35069740653086]),jn=nt([52.6583728974441,59.3504509222445]),pr=nt([42.45755631675751,63.34365868805821]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath(),en=nt([31.054198418446475,52.1080673766184]),An=nt([39.09869284884117,49.400700047190554]),jn=nt([36.0580811499175,46.02944174908498]),pr=nt([28.690508588835726,48.433126979386415]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath(),en=nt([33.977877745912025,55.849945501331]),An=nt([42.75328432167726,52.78455122462353]),jn=nt([39.09869297540224,49.400700176148625]),pr=nt([31.05419851807008,52.10806751810923]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath(),en=nt([52.658372900759296,59.35045068526415]),An=nt([60.23606549583304,54.63331423800264]),jn=nt([54.6756370953122,51.892298789399455]),pr=nt([47.19754524788189,56.126534861222794]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath(),en=nt([47.19754506082455,56.126534735591456]),An=nt([54.675636900123514,51.892298681337095]),jn=nt([49.94448648951486,48.98775484983285]),pr=nt([42.75328468716108,52.78455126060818]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath(),en=nt([42.75328453416769,52.78455113209101]),An=nt([49.94448632339758,48.98775473706457]),jn=nt([45.912339990394315,45.99361784987003]),pr=nt([39.09869317356607,49.40070009378711]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath(),en=nt([37.673034114296634,59.61638254183119]),An=nt([47.197544835420544,56.126534839849846]),jn=nt([42.75328447467064,52.78455135314068]),pr=nt([33.977877870363905,55.849945644671145]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath(),en=nt([44.56748486446032,57.26489367845818]),jn=nt([43.9335791193588,53.746540942601726]),pr=nt([43,56]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath(),en=nt([37.673034114296634,59.61638254183119]),An=nt([40.25902691953466,58.83002044222639]),jn=nt([38.458270492742024,57.26232178028002]),pr=nt([35.97754948030156,58.00266637992386]),on.moveTo(en[0],en[1]),on.lineTo(An[0],An[1]),on.lineTo(jn[0],jn[1]),on.lineTo(pr[0],pr[1]),on.closePath()},er.getCompositionBorders=function(){var on=c.path();return this.drawCompositionBorders(on),on.toString()},er.scale(750)}function rt(xt){var At=xt.length;return{point:function(Mt,z){for(var Q=-1;++Q<At;)xt[Q].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)xt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonEnd()}}}function ft(){var xt,At,nt=s.geoConicConformal().rotate([-5.5,-52.2]).parallels([0,60]),Mt,z=s.geoMercator().center([-68.25,12.2]),Q,ht=s.geoMercator().center([-63.1,17.5]),et,at,gt={point:function(X,Et){at=[X,Et]}};function k(it){var X=t.__read(it,2),Et=X[0],vt=X[1];return at=null,Mt.point(Et,vt),at||(Q.point(Et,vt),at)||(et.point(Et,vt),at)}k.invert=function(it){var X=nt.scale(),Et=nt.translate(),vt=(it[0]-Et[0])/X,Nt=(it[1]-Et[1])/X;return(Nt>=-.0067&&Nt<.0015&&vt>=-.0232&&vt<-.0154?z:Nt>=-.022&&Nt<-.014&&vt>=-.023&&vt<-.014?ht:nt).invert(it)},k.stream=function(it){return xt&&At===it?xt:xt=rt([nt.stream(At=it),z.stream(it),ht.stream(it)])},k.precision=function(it){return arguments.length?(nt.precision(it),z.precision(it),ht.precision(it),ot()):nt.precision()},k.scale=function(it){return arguments.length?(nt.scale(it),z.scale(it),ht.scale(it),k.translate(nt.translate())):nt.scale()},k.translate=function(it){if(!arguments.length)return nt.translate();var X=nt.scale(),Et=+it[0],vt=+it[1];return Mt=nt.translate(it).clipExtent([[Et-.0245*X,vt-.026*X],[Et+.023*X,vt+.026*X]]).stream(gt),Q=z.translate([Et-.0186*X,vt-.00325*X]).clipExtent([[Et-.0232*X+r,vt-.0067*X+r],[Et-.0154*X-r,vt+.0015*X-r]]).stream(gt),et=ht.translate([Et-.0185*X,vt-.017*X]).clipExtent([[Et-.023*X+r,vt-.022*X+r],[Et-.014*X-r,vt-.014*X-r]]).stream(gt),ot()},k.fitExtent=function(it,X){return v(k,it,X)},k.fitSize=function(it,X){return b(k,it,X)};function ot(){return xt=At=null,k}return k.drawCompositionBorders=function(it){var X=nt([3.30573,52.5562]),Et=nt([4.043,52.572]),vt=nt([4.0646,52.1017]),Nt=nt([3.3382,52.0861]),$t=nt([3.262,53.439]),ee=nt([4.1373,53.4571]),kt=nt([4.1574,52.9946]),Wt=nt([3.2951,52.9768]);it.moveTo(X[0],X[1]),it.lineTo(Et[0],Et[1]),it.lineTo(vt[0],vt[1]),it.lineTo(vt[0],vt[1]),it.lineTo(Nt[0],Nt[1]),it.closePath(),it.moveTo($t[0],$t[1]),it.lineTo(ee[0],ee[1]),it.lineTo(kt[0],kt[1]),it.lineTo(kt[0],kt[1]),it.lineTo(Wt[0],Wt[1]),it.closePath()},k.getCompositionBorders=function(){var it=c.path();return this.drawCompositionBorders(it),it.toString()},k.scale(4200)}function dt(xt){var At=xt.length;return{point:function(Mt,z){for(var Q=-1;++Q<At;)xt[Q].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)xt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonEnd()}}}function ut(){var xt,At,nt=s.geoMercator().center([105.25,4]),Mt,z=s.geoMercator().center([118.65,2.86]),Q,ht,et={point:function(ot,it){ht=[ot,it]}};function at(k){var ot=k[0],it=k[1];return ht=null,Mt.point(ot,it),ht||(Q.point(ot,it),ht)}at.invert=function(k){var ot=nt.scale(),it=nt.translate(),X=(k[0]-it[0])/ot,Et=(k[1]-it[1])/ot;return(Et>=-.0521&&Et<.0229&&X>=-.0111&&X<.1?z:nt).invert(k)},at.stream=function(k){return xt&&At===k?xt:xt=dt([nt.stream(At=k),z.stream(k)])},at.precision=function(k){return arguments.length?(nt.precision(k),z.precision(k),gt()):nt.precision()},at.scale=function(k){return arguments.length?(nt.scale(k),z.scale(k*.615),at.translate(nt.translate())):nt.scale()},at.translate=function(k){if(!arguments.length)return nt.translate();var ot=nt.scale(),it=+k[0],X=+k[1];return Mt=nt.translate(k).clipExtent([[it-.11*ot,X-.0521*ot],[it-.0111*ot,X+.0521*ot]]).stream(et),Q=z.translate([it+.09*ot,X-0*ot]).clipExtent([[it-.0111*ot+r,X-.0521*ot+r],[it+.1*ot-r,X+.024*ot-r]]).stream(et),gt()},at.fitExtent=function(k,ot){return v(at,k,ot)},at.fitSize=function(k,ot){return b(at,k,ot)};function gt(){return xt=At=null,at}return at.drawCompositionBorders=function(k){var ot=nt([106.3214,2.0228]),it=nt([105.1843,2.3761]),X=nt([104.2151,3.3618]),Et=nt([104.215,4.5651]);k.moveTo(ot[0],ot[1]),k.lineTo(it[0],it[1]),k.lineTo(X[0],X[1]),k.lineTo(Et[0],Et[1])},at.getCompositionBorders=function(){var k=c.path();return this.drawCompositionBorders(k),k.toString()},at.scale(4800)}function Lt(xt){var At=xt.length;return{point:function(Mt,z){for(var Q=-1;++Q<At;)xt[Q].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)xt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonEnd()}}}function Ft(){var xt,At,nt=s.geoMercator().rotate([-9.5,-1.5]),Mt,z=s.geoMercator().rotate([-8.6,-3.5]),Q,ht=s.geoMercator().rotate([-5.6,1.45]),et,at,gt={point:function(X,Et){at=[X,Et]}};function k(it){var X=it[0],Et=it[1];return at=null,Mt.point(X,Et),at||(Q.point(X,Et),at)||(et.point(X,Et),at)}k.invert=function(it){var X=nt.scale(),Et=nt.translate(),vt=(it[0]-Et[0])/X,Nt=(it[1]-Et[1])/X;return(Nt>=-.02&&Nt<0&&vt>=-.038&&vt<-.005?z:Nt>=0&&Nt<.02&&vt>=-.038&&vt<-.005?ht:nt).invert(it)},k.stream=function(it){return xt&&At===it?xt:xt=Lt([nt.stream(At=it),z.stream(it),ht.stream(it)])},k.precision=function(it){return arguments.length?(nt.precision(it),z.precision(it),ht.precision(it),ot()):nt.precision()},k.scale=function(it){return arguments.length?(nt.scale(it),z.scale(it*1.5),ht.scale(it*4),k.translate(nt.translate())):nt.scale()},k.translate=function(it){if(!arguments.length)return nt.translate();var X=nt.scale(),Et=+it[0],vt=+it[1];return Mt=nt.translate(it).clipExtent([[Et-.005*X,vt-.02*X],[Et+.038*X,vt+.02*X]]).stream(gt),Q=z.translate([Et-.025*X,vt-.01*X]).clipExtent([[Et-.038*X+r,vt-.02*X+r],[Et-.005*X-r,vt+0*X-r]]).stream(gt),et=ht.translate([Et-.025*X,vt+.01*X]).clipExtent([[Et-.038*X+r,vt-0*X+r],[Et-.005*X-r,vt+.02*X-r]]).stream(gt),ot()},k.fitExtent=function(it,X){return v(k,it,X)},k.fitSize=function(it,X){return b(k,it,X)};function ot(){return xt=At=null,k}return k.drawCompositionBorders=function(it){var X,Et,vt,Nt;X=nt([9.21327272751682,2.645820439454123]),Et=nt([11.679126293239872,2.644755519268689]),vt=nt([11.676845389029227,.35307824637606433]),Nt=nt([9.213572917774014,.35414205204417754]),it.moveTo(X[0],X[1]),it.lineTo(Et[0],Et[1]),it.lineTo(vt[0],vt[1]),it.lineTo(Nt[0],Nt[1]),it.closePath(),X=nt([7.320873711543669,2.64475551449975]),Et=nt([9.213272722738658,2.645820434679803]),vt=nt([9.213422896480349,1.4999812505283054]),Nt=nt([7.322014760520787,1.4989168878985566]),it.moveTo(X[0],X[1]),it.lineTo(Et[0],Et[1]),it.lineTo(vt[0],vt[1]),it.lineTo(Nt[0],Nt[1]),it.closePath(),X=nt([7.3220147605302905,1.4989168783492766]),Et=nt([9.213422896481598,1.499981240979021]),vt=nt([9.213572912999604,.354142056817247]),Nt=nt([7.323154615739809,.353078251154504]),it.moveTo(X[0],X[1]),it.lineTo(Et[0],Et[1]),it.lineTo(vt[0],vt[1]),it.lineTo(Nt[0],Nt[1]),it.closePath()},k.getCompositionBorders=function(){var it=c.path();return this.drawCompositionBorders(it),it.toString()},k.scale(12e3)}function Ot(xt){var At=xt.length;return{point:function(Mt,z){for(var Q=-1;++Q<At;)xt[Q].point(Mt,z)},sphere:function(){for(var Mt=-1;++Mt<At;)xt[Mt].sphere()},lineStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineStart()},lineEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].lineEnd()},polygonStart:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonStart()},polygonEnd:function(){for(var Mt=-1;++Mt<At;)xt[Mt].polygonEnd()}}}function St(){var xt,At,nt=s.geoAlbers().rotate([4.4,.8]).center([0,55.4]).parallels([50,60]),Mt,z=s.geoAlbers().rotate([4.4,.8]).center([0,55.4]).parallels([50,60]),Q,ht,et={point:function(ot,it){ht=[ot,it]}};function at(k){var ot=k[0],it=k[1];return ht=null,Mt.point(ot,it),ht||(Q.point(ot,it),ht)}at.invert=function(k){var ot=nt.scale(),it=nt.translate(),X=(k[0]-it[0])/ot,Et=(k[1]-it[1])/ot;return(Et>=-.089&&Et<.06&&X>=.029&&X<.046?z:nt).invert(k)},at.stream=function(k){return xt&&At===k?xt:xt=Ot([nt.stream(At=k),z.stream(k)])},at.precision=function(k){return arguments.length?(nt.precision(k),z.precision(k),gt()):nt.precision()},at.scale=function(k){return arguments.length?(nt.scale(k),z.scale(k),at.translate(nt.translate())):nt.scale()},at.translate=function(k){if(!arguments.length)return nt.translate();var ot=nt.scale(),it=+k[0],X=+k[1];return Mt=nt.translate(k).clipExtent([[it-.065*ot,X-.089*ot],[it+.075*ot,X+.089*ot]]).stream(et),Q=z.translate([it+.01*ot,X+.025*ot]).clipExtent([[it+.029*ot+r,X-.089*ot+r],[it+.046*ot-r,X-.06*ot-r]]).stream(et),gt()},at.fitExtent=function(k,ot){return v(at,k,ot)},at.fitSize=function(k,ot){return b(at,k,ot)};function gt(){return xt=At=null,at}return at.drawCompositionBorders=function(k){var ot,it,X,Et;ot=nt([-1.113205870242365,59.64920050773357]),it=nt([.807899092399606,59.59085836472269]),X=nt([.5778611961420386,57.93467822832577]),Et=nt([-1.25867782078448,57.99029450085142]),k.moveTo(ot[0],ot[1]),k.lineTo(it[0],it[1]),k.lineTo(X[0],X[1]),k.lineTo(Et[0],Et[1]),k.closePath()},at.getCompositionBorders=function(){var k=c.path();return this.drawCompositionBorders(k),k.toString()},at.scale(2800)}u.geoAlbersUk=St,u.geoAlbersUsa=m,u.geoAlbersUsaTerritories=M,u.geoConicConformalEurope=J,u.geoConicConformalFrance=U,u.geoConicConformalNetherlands=ft,u.geoConicConformalPortugal=P,u.geoConicConformalSpain=y,u.geoConicEquidistantJapan=Z,u.geoMercatorEcuador=O,u.geoMercatorEquatorialGuinea=Ft,u.geoMercatorMalaysia=ut,u.geoTransverseMercatorChile=H,Object.defineProperty(u,"__esModule",{value:!0})})},"./node_modules/_d3-dsv@1.2.0@d3-dsv/dist/d3-dsv.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";var u={},s={},c=34,r=10,h=13;function n(J){return new Function("d","return {"+J.map(function(rt,ft){return JSON.stringify(rt)+": d["+ft+'] || ""'}).join(",")+"}")}function i(J,rt){var ft=n(J);return function(dt,ut){return rt(ft(dt),ut,J)}}function a(J){var rt=Object.create(null),ft=[];return J.forEach(function(dt){for(var ut in dt)ut in rt||ft.push(rt[ut]=ut)}),ft}function o(J,rt){var ft=J+"",dt=ft.length;return dt<rt?new Array(rt-dt+1).join(0)+ft:ft}function l(J){return J<0?"-"+o(-J,6):J>9999?"+"+o(J,6):o(J,4)}function f(J){var rt=J.getUTCHours(),ft=J.getUTCMinutes(),dt=J.getUTCSeconds(),ut=J.getUTCMilliseconds();return isNaN(J)?"Invalid Date":l(J.getUTCFullYear())+"-"+o(J.getUTCMonth()+1,2)+"-"+o(J.getUTCDate(),2)+(ut?"T"+o(rt,2)+":"+o(ft,2)+":"+o(dt,2)+"."+o(ut,3)+"Z":dt?"T"+o(rt,2)+":"+o(ft,2)+":"+o(dt,2)+"Z":ft||rt?"T"+o(rt,2)+":"+o(ft,2)+"Z":"")}function v(J){var rt=new RegExp('["'+J+`
\r]`),ft=J.charCodeAt(0);function dt(nt,Mt){var z,Q,ht=ut(nt,function(et,at){if(z)return z(et,at-1);Q=et,z=Mt?i(et,Mt):n(et)});return ht.columns=Q||[],ht}function ut(nt,Mt){var z=[],Q=nt.length,ht=0,et=0,at,gt=Q<=0,k=!1;nt.charCodeAt(Q-1)===r&&--Q,nt.charCodeAt(Q-1)===h&&--Q;function ot(){if(gt)return s;if(k)return k=!1,u;var X,Et=ht,vt;if(nt.charCodeAt(Et)===c){for(;ht++<Q&&nt.charCodeAt(ht)!==c||nt.charCodeAt(++ht)===c;);return(X=ht)>=Q?gt=!0:(vt=nt.charCodeAt(ht++))===r?k=!0:vt===h&&(k=!0,nt.charCodeAt(ht)===r&&++ht),nt.slice(Et+1,X-1).replace(/""/g,'"')}for(;ht<Q;){if((vt=nt.charCodeAt(X=ht++))===r)k=!0;else if(vt===h)k=!0,nt.charCodeAt(ht)===r&&++ht;else if(vt!==ft)continue;return nt.slice(Et,X)}return gt=!0,nt.slice(Et,Q)}for(;(at=ot())!==s;){for(var it=[];at!==u&&at!==s;)it.push(at),at=ot();Mt&&(it=Mt(it,et++))==null||z.push(it)}return z}function Lt(nt,Mt){return nt.map(function(z){return Mt.map(function(Q){return At(z[Q])}).join(J)})}function Ft(nt,Mt){return Mt==null&&(Mt=a(nt)),[Mt.map(At).join(J)].concat(Lt(nt,Mt)).join(`
`)}function Ot(nt,Mt){return Mt==null&&(Mt=a(nt)),Lt(nt,Mt).join(`
`)}function St(nt){return nt.map(xt).join(`
`)}function xt(nt){return nt.map(At).join(J)}function At(nt){return nt==null?"":nt instanceof Date?f(nt):rt.test(nt+="")?'"'+nt.replace(/"/g,'""')+'"':nt}return{parse:dt,parseRows:ut,format:Ft,formatBody:Ot,formatRows:St,formatRow:xt,formatValue:At}}var b=v(","),g=b.parse,m=b.parseRows,_=b.format,M=b.formatBody,x=b.formatRows,y=b.formatRow,S=b.formatValue,P=v("	"),A=P.parse,O=P.parseRows,L=P.format,H=P.formatBody,F=P.formatRows,Z=P.formatRow,G=P.formatValue;function U(J){for(var rt in J){var ft=J[rt].trim(),dt,ut;if(!ft)ft=null;else if(ft==="true")ft=!0;else if(ft==="false")ft=!1;else if(ft==="NaN")ft=NaN;else if(!isNaN(dt=+ft))ft=dt;else if(ut=ft.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Y&&!!ut[4]&&!ut[7]&&(ft=ft.replace(/-/g,"/").replace(/T/," ")),ft=new Date(ft);else continue;J[rt]=ft}return J}var Y=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();t.autoType=U,t.csvFormat=_,t.csvFormatBody=M,t.csvFormatRow=y,t.csvFormatRows=x,t.csvFormatValue=S,t.csvParse=g,t.csvParseRows=m,t.dsvFormat=v,t.tsvFormat=L,t.tsvFormatBody=H,t.tsvFormatRow=Z,t.tsvFormatRows=F,t.tsvFormatValue=G,t.tsvParse=A,t.tsvParseRows=O,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js":function(E,T,e){(function(t,u){u(T,e("./node_modules/_d3-geo@1.12.1@d3-geo/dist/d3-geo.js"),e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(t,u,s){"use strict";var c=Math.abs,r=Math.atan,h=Math.atan2,n=Math.cos,i=Math.exp,a=Math.floor,o=Math.log,l=Math.max,f=Math.min,v=Math.pow,b=Math.round,g=Math.sign||function(D){return D>0?1:D<0?-1:0},m=Math.sin,_=Math.tan,M=1e-6,x=1e-12,y=Math.PI,S=y/2,P=y/4,A=Math.SQRT1_2,O=J(2),L=J(y),H=y*2,F=180/y,Z=y/180;function G(D){return D?D/Math.sin(D):1}function U(D){return D>1?S:D<-1?-S:Math.asin(D)}function Y(D){return D>1?0:D<-1?y:Math.acos(D)}function J(D){return D>0?Math.sqrt(D):0}function rt(D){return D=i(2*D),(D-1)/(D+1)}function ft(D){return(i(D)-i(-D))/2}function dt(D){return(i(D)+i(-D))/2}function ut(D){return o(D+J(D*D+1))}function Lt(D){return o(D+J(D*D-1))}function Ft(D){var W=_(D/2),q=2*o(n(D/2))/(W*W);function st(Ct,wt){var Ut=n(Ct),Zt=n(wt),qt=m(wt),he=Zt*Ut,me=-((1-he?o((1+he)/2)/(1-he):-.5)+q/(1+he));return[me*Zt*m(Ct),me*qt]}return st.invert=function(Ct,wt){var Ut=J(Ct*Ct+wt*wt),Zt=-D/2,qt=50,he;if(!Ut)return[0,0];do{var me=Zt/2,De=n(me),Ae=m(me),Ue=_(me),qe=o(1/De);Zt-=he=(2/Ue*qe-q*Ue-Ut)/(-qe/(Ae*Ae)+1-q/(2*De*De))}while(c(he)>M&&--qt>0);var rn=m(Zt);return[h(Ct*rn,Ut*n(Zt)),U(wt*rn/Ut)]},st}var Ot=function(){var W=S,q=u.geoProjectionMutator(Ft),st=q(W);return st.radius=function(Ct){return arguments.length?q(W=Ct*Z):W*F},st.scale(179.976).clipAngle(147)};function St(D,W){var q=n(W),st=G(Y(q*n(D/=2)));return[2*q*m(D)*st,m(W)*st]}St.invert=function(D,W){if(!(D*D+4*W*W>y*y+M)){var q=D,st=W,Ct=25;do{var wt=m(q),Ut=m(q/2),Zt=n(q/2),qt=m(st),he=n(st),me=m(2*st),De=qt*qt,Ae=he*he,Ue=Ut*Ut,qe=1-Ae*Zt*Zt,rn=qe?Y(he*Zt)*J(Xn=1/qe):Xn=0,Xn,Un=2*rn*he*Ut-D,gr=rn*qt-W,Mr=Xn*(Ae*Ue+rn*he*Zt*De),Qr=Xn*(.5*wt*me-rn*2*qt*Ut),Vr=Xn*.25*(me*Ut-rn*qt*Ae*wt),_i=Xn*(De*Zt+rn*Ue*he),Di=Qr*Vr-_i*Mr;if(!Di)break;var Wi=(gr*Qr-Un*_i)/Di,Xi=(Un*Vr-gr*Mr)/Di;q-=Wi,st-=Xi}while((c(Wi)>M||c(Xi)>M)&&--Ct>0);return[q,st]}};var xt=function(){return u.geoProjection(St).scale(152.63)};function At(D){var W=m(D),q=n(D),st=D>=0?1:-1,Ct=_(st*D),wt=(1+W-q)/2;function Ut(Zt,qt){var he=n(qt),me=n(Zt/=2);return[(1+he)*m(Zt),(st*qt>-h(me,Ct)-.001?0:-st*10)+wt+m(qt)*q-(1+he)*W*me]}return Ut.invert=function(Zt,qt){var he=0,me=0,De=50;do{var Ae=n(he),Ue=m(he),qe=n(me),rn=m(me),Xn=1+qe,Un=Xn*Ue-Zt,gr=wt+rn*q-Xn*W*Ae-qt,Mr=Xn*Ae/2,Qr=-Ue*rn,Vr=W*Xn*Ue/2,_i=q*qe+W*Ae*rn,Di=Qr*Vr-_i*Mr,Wi=(gr*Qr-Un*_i)/Di/2,Xi=(Un*Vr-gr*Mr)/Di;he-=Wi,me-=Xi}while((c(Wi)>M||c(Xi)>M)&&--De>0);return st*me>-h(n(he),Ct)-.001?[he*2,me]:null},Ut}var nt=function(){var W=20*Z,q=W>=0?1:-1,st=_(q*W),Ct=u.geoProjectionMutator(At),wt=Ct(W),Ut=wt.stream;return wt.parallel=function(Zt){return arguments.length?(st=_((q=(W=Zt*Z)>=0?1:-1)*W),Ct(W)):W*F},wt.stream=function(Zt){var qt=wt.rotate(),he=Ut(Zt),me=(wt.rotate([0,0]),Ut(Zt));return wt.rotate(qt),he.sphere=function(){me.polygonStart(),me.lineStart();for(var De=q*-180;q*De<180;De+=q*90)me.point(De,q*90);for(;q*(De-=W)>=-180;)me.point(De,q*-h(n(De*Z/2),st)*F);me.lineEnd(),me.polygonEnd()},he},wt.scale(218.695).center([0,28.0974])};function Mt(D,W){var q=_(W/2),st=J(1-q*q),Ct=1+st*n(D/=2),wt=m(D)*st/Ct,Ut=q/Ct,Zt=wt*wt,qt=Ut*Ut;return[4/3*wt*(3+Zt-3*qt),4/3*Ut*(3+3*Zt-qt)]}Mt.invert=function(D,W){if(D*=3/8,W*=3/8,!D&&c(W)>1)return null;var q=D*D,st=W*W,Ct=1+q+st,wt=J((Ct-J(Ct*Ct-4*W*W))/2),Ut=U(wt)/3,Zt=wt?Lt(c(W/wt))/3:ut(c(D))/3,qt=n(Ut),he=dt(Zt),me=he*he-qt*qt;return[g(D)*2*h(ft(Zt)*qt,.25-me),g(W)*2*h(he*m(Ut),.25+me)]};var z=function(){return u.geoProjection(Mt).scale(66.1603)},Q=J(8),ht=o(1+O);function et(D,W){var q=c(W);return q<P?[D,o(_(P+W/2))]:[D*n(q)*(2*O-1/m(q)),g(W)*(2*O*(q-P)-o(_(q/2)))]}et.invert=function(D,W){if((wt=c(W))<ht)return[D,2*r(i(W))-S];var q=P,st=25,Ct,wt;do{var Ut=n(q/2),Zt=_(q/2);q-=Ct=(Q*(q-P)-o(Zt)-wt)/(Q-Ut*Ut/(2*Zt))}while(c(Ct)>x&&--st>0);return[D/(n(q)*(Q-1/m(q))),g(W)*q]};var at=function(){return u.geoProjection(et).scale(112.314)};function gt(D){var W=2*y/D;function q(st,Ct){var wt=u.geoAzimuthalEquidistantRaw(st,Ct);if(c(st)>S){var Ut=h(wt[1],wt[0]),Zt=J(wt[0]*wt[0]+wt[1]*wt[1]),qt=W*b((Ut-S)/W)+S,he=h(m(Ut-=qt),2-n(Ut));Ut=qt+U(y/Zt*m(he))-he,wt[0]=Zt*n(Ut),wt[1]=Zt*m(Ut)}return wt}return q.invert=function(st,Ct){var wt=J(st*st+Ct*Ct);if(wt>S){var Ut=h(Ct,st),Zt=W*b((Ut-S)/W)+S,qt=Ut>Zt?-1:1,he=wt*n(Zt-Ut),me=1/_(qt*Y((he-y)/J(y*(y-2*he)+wt*wt)));Ut=Zt+2*r((me+qt*J(me*me-3))/3),st=wt*n(Ut),Ct=wt*m(Ut)}return u.geoAzimuthalEquidistantRaw.invert(st,Ct)},q}var k=function(){var W=5,q=u.geoProjectionMutator(gt),st=q(W),Ct=st.stream,wt=.01,Ut=-n(wt*Z),Zt=m(wt*Z);return st.lobes=function(qt){return arguments.length?q(W=+qt):W},st.stream=function(qt){var he=st.rotate(),me=Ct(qt),De=(st.rotate([0,0]),Ct(qt));return st.rotate(he),me.sphere=function(){De.polygonStart(),De.lineStart();for(var Ae=0,Ue=360/W,qe=2*y/W,rn=90-180/W,Xn=S;Ae<W;++Ae,rn-=Ue,Xn-=qe)De.point(h(Zt*n(Xn),Ut)*F,U(Zt*m(Xn))*F),rn<-90?(De.point(-90,-180-rn-wt),De.point(-90,-180-rn+wt)):(De.point(90,rn+wt),De.point(90,rn-wt));De.lineEnd(),De.polygonEnd()},me},st.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)};function ot(D,W){var q=D*m(W),st=30,Ct;do W-=Ct=(W+m(W)-q)/(1+n(W));while(c(Ct)>M&&--st>0);return W/2}function it(D,W,q){function st(Ct,wt){return[D*Ct*n(wt=ot(q,wt)),W*m(wt)]}return st.invert=function(Ct,wt){return wt=U(wt/W),[Ct/(D*n(wt)),U((2*wt+m(2*wt))/q)]},st}var X=it(O/S,O,y),Et=function(){return u.geoProjection(X).scale(169.529)},vt=2.00276,Nt=1.11072;function $t(D,W){var q=ot(y,W);return[vt*D/(1/n(W)+Nt/n(q)),(W+O*m(q))/vt]}$t.invert=function(D,W){var q=vt*W,st=W<0?-P:P,Ct=25,wt,Ut;do Ut=q-O*m(st),st-=wt=(m(2*st)+2*st-y*m(Ut))/(2*n(2*st)+2+y*n(Ut)*O*n(st));while(c(wt)>M&&--Ct>0);return Ut=q-O*m(st),[D*(1/n(Ut)+Nt/n(st))/vt,Ut]};var ee=function(){return u.geoProjection($t).scale(160.857)},kt=function(W){var q=0,st=u.geoProjectionMutator(W),Ct=st(q);return Ct.parallel=function(wt){return arguments.length?st(q=wt*Z):q*F},Ct};function Wt(D,W){return[D*n(W),W]}Wt.invert=function(D,W){return[D/n(W),W]};var ae=function(){return u.geoProjection(Wt).scale(152.63)};function le(D){if(!D)return Wt;var W=1/_(D);function q(st,Ct){var wt=W+D-Ct,Ut=wt&&st*n(Ct)/wt;return[wt*m(Ut),W-wt*n(Ut)]}return q.invert=function(st,Ct){var wt=J(st*st+(Ct=W-Ct)*Ct),Ut=W+D-wt;return[wt/n(Ut)*h(st,Ct),Ut]},q}var je=function(){return kt(le).scale(123.082).center([0,26.1441]).parallel(45)};function Oe(D){function W(q,st){var Ct=S-st,wt=Ct&&q*D*m(Ct)/Ct;return[Ct*m(wt)/D,S-Ct*n(wt)]}return W.invert=function(q,st){var Ct=q*D,wt=S-st,Ut=J(Ct*Ct+wt*wt),Zt=h(Ct,wt);return[(Ut?Ut/m(Ut):1)*Zt/D,S-Ut]},W}var We=function(){var W=.5,q=u.geoProjectionMutator(Oe),st=q(W);return st.fraction=function(Ct){return arguments.length?q(W=+Ct):W},st.scale(158.837)},Ye=it(1,4/y,y),wn=function(){return u.geoProjection(Ye).scale(152.63)};function er(D,W,q,st,Ct,wt){var Ut=n(wt),Zt;if(c(D)>1||c(wt)>1)Zt=Y(q*Ct+W*st*Ut);else{var qt=m(D/2),he=m(wt/2);Zt=2*U(J(qt*qt+W*st*he*he))}return c(Zt)>M?[Zt,h(st*m(wt),W*Ct-q*st*Ut)]:[0,0]}function wr(D,W,q){return Y((D*D+W*W-q*q)/(2*D*W))}function on(D){return D-2*y*a((D+y)/(2*y))}function en(D,W,q){for(var st=[[D[0],D[1],m(D[1]),n(D[1])],[W[0],W[1],m(W[1]),n(W[1])],[q[0],q[1],m(q[1]),n(q[1])]],Ct=st[2],wt,Ut=0;Ut<3;++Ut,Ct=wt)wt=st[Ut],Ct.v=er(wt[1]-Ct[1],Ct[3],Ct[2],wt[3],wt[2],wt[0]-Ct[0]),Ct.point=[0,0];var Zt=wr(st[0].v[0],st[2].v[0],st[1].v[0]),qt=wr(st[0].v[0],st[1].v[0],st[2].v[0]),he=y-Zt;st[2].point[1]=0,st[0].point[0]=-(st[1].point[0]=st[0].v[0]/2);var me=[st[2].point[0]=st[0].point[0]+st[2].v[0]*n(Zt),2*(st[0].point[1]=st[1].point[1]=st[2].v[0]*m(Zt))];function De(Ae,Ue){var qe=m(Ue),rn=n(Ue),Xn=new Array(3),Un;for(Un=0;Un<3;++Un){var gr=st[Un];if(Xn[Un]=er(Ue-gr[1],gr[3],gr[2],rn,qe,Ae-gr[0]),!Xn[Un][0])return gr.point;Xn[Un][1]=on(Xn[Un][1]-gr.v[1])}var Mr=me.slice();for(Un=0;Un<3;++Un){var Qr=Un==2?0:Un+1,Vr=wr(st[Un].v[0],Xn[Un][0],Xn[Qr][0]);Xn[Un][1]<0&&(Vr=-Vr),Un?Un==1?(Vr=qt-Vr,Mr[0]-=Xn[Un][0]*n(Vr),Mr[1]-=Xn[Un][0]*m(Vr)):(Vr=he-Vr,Mr[0]+=Xn[Un][0]*n(Vr),Mr[1]+=Xn[Un][0]*m(Vr)):(Mr[0]+=Xn[Un][0]*n(Vr),Mr[1]-=Xn[Un][0]*m(Vr))}return Mr[0]/=3,Mr[1]/=3,Mr}return De}function An(D){return D[0]*=Z,D[1]*=Z,D}function jn(){return pr([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function pr(D,W,q){var st=u.geoCentroid({type:"MultiPoint",coordinates:[D,W,q]}),Ct=[-st[0],-st[1]],wt=u.geoRotation(Ct),Ut=u.geoProjection(en(An(wt(D)),An(wt(W)),An(wt(q)))).rotate(Ct),Zt=Ut.center;return delete Ut.rotate,Ut.center=function(qt){return arguments.length?Zt(wt(qt)):wt.invert(Zt())},Ut.clipAngle(90)}function di(D,W){var q=J(1-m(W));return[2/L*D*q,L*(1-q)]}di.invert=function(D,W){var q=(q=W/L-1)*q;return[q>0?D*J(y/q)/2:0,U(1-q)]};var Ce=function(){return u.geoProjection(di).scale(95.6464).center([0,30])};function Me(D){var W=_(D);function q(st,Ct){return[st,(st?st/m(st):1)*(m(Ct)*n(st)-W*n(Ct))]}return q.invert=W?function(st,Ct){st&&(Ct*=m(st)/st);var wt=n(st);return[st,2*h(J(wt*wt+W*W-Ct*Ct)-wt,W-Ct)]}:function(st,Ct){return[st,U(st?Ct*_(st)/st:Ct)]},q}var Qt=function(){return kt(Me).scale(249.828).clipAngle(90)},pe=J(3);function Vt(D,W){return[pe*D*(2*n(2*W/3)-1)/L,pe*L*m(W/3)]}Vt.invert=function(D,W){var q=3*U(W/(pe*L));return[L*D/(pe*(2*n(2*q/3)-1)),q]};var re=function(){return u.geoProjection(Vt).scale(156.19)};function Te(D){var W=n(D);function q(st,Ct){return[st*W,m(Ct)/W]}return q.invert=function(st,Ct){return[st/W,U(Ct*W)]},q}var ue=function(){return kt(Te).parallel(38.58).scale(195.044)};function xe(D){var W=n(D);function q(st,Ct){return[st*W,(1+W)*_(Ct/2)]}return q.invert=function(st,Ct){return[st/W,r(Ct/(1+W))*2]},q}var Ke=function(){return kt(xe).scale(124.75)};function Rn(D,W){var q=J(8/(3*y));return[q*D*(1-c(W)/y),q*W]}Rn.invert=function(D,W){var q=J(8/(3*y)),st=W/q;return[D/(q*(1-c(st)/y)),st]};var tr=function(){return u.geoProjection(Rn).scale(165.664)};function Pn(D,W){var q=J(4-3*m(c(W)));return[2/J(6*y)*D*q,g(W)*J(2*y/3)*(2-q)]}Pn.invert=function(D,W){var q=2-c(W)/J(2*y/3);return[D*J(6*y)/(2*q),g(W)*U((4-q*q)/3)]};var dn=function(){return u.geoProjection(Pn).scale(165.664)};function Ar(D,W){var q=J(y*(4+y));return[2/q*D*(1+J(1-4*W*W/(y*y))),4/q*W]}Ar.invert=function(D,W){var q=J(y*(4+y))/2;return[D*q/(1+J(1-W*W*(4+y)/(4*y))),W*q/2]};var or=function(){return u.geoProjection(Ar).scale(180.739)};function cn(D,W){var q=(2+S)*m(W);W/=2;for(var st=0,Ct=Infinity;st<10&&c(Ct)>M;st++){var wt=n(W);W-=Ct=(W+m(W)*(wt+2)-q)/(2*wt*(1+wt))}return[2/J(y*(4+y))*D*(1+n(W)),2*J(y/(4+y))*m(W)]}cn.invert=function(D,W){var q=W*J((4+y)/y)/2,st=U(q),Ct=n(st);return[D/(2/J(y*(4+y))*(1+Ct)),U((st+q*(Ct+2))/(2+S))]};var Pr=function(){return u.geoProjection(cn).scale(180.739)};function Sr(D,W){return[D*(1+n(W))/J(2+y),2*W/J(2+y)]}Sr.invert=function(D,W){var q=J(2+y),st=W*q/2;return[q*D/(1+n(st)),st]};var Re=function(){return u.geoProjection(Sr).scale(173.044)};function $e(D,W){for(var q=(1+S)*m(W),st=0,Ct=Infinity;st<10&&c(Ct)>M;st++)W-=Ct=(W+m(W)-q)/(1+n(W));return q=J(2+y),[D*(1+n(W))/q,2*W/q]}$e.invert=function(D,W){var q=1+S,st=J(q/2);return[D*2*st/(1+n(W*=st)),U((W+m(W))/q)]};var Ve=function(){return u.geoProjection($e).scale(173.044)},En=3+2*O;function xn(D,W){var q=m(D/=2),st=n(D),Ct=J(n(W)),wt=n(W/=2),Ut=m(W)/(wt+O*st*Ct),Zt=J(2/(1+Ut*Ut)),qt=J((O*wt+(st+q)*Ct)/(O*wt+(st-q)*Ct));return[En*(Zt*(qt-1/qt)-2*o(qt)),En*(Zt*Ut*(qt+1/qt)-2*r(Ut))]}xn.invert=function(D,W){if(!(wt=Mt.invert(D/1.2,W*1.065)))return null;var q=wt[0],st=wt[1],Ct=20,wt;D/=En,W/=En;do{var Ut=q/2,Zt=st/2,qt=m(Ut),he=n(Ut),me=m(Zt),De=n(Zt),Ae=n(st),Ue=J(Ae),qe=me/(De+O*he*Ue),rn=qe*qe,Xn=J(2/(1+rn)),Un=O*De+(he+qt)*Ue,gr=O*De+(he-qt)*Ue,Mr=Un/gr,Qr=J(Mr),Vr=Qr-1/Qr,_i=Qr+1/Qr,Di=Xn*Vr-2*o(Qr)-D,Wi=Xn*qe*_i-2*r(qe)-W,Xi=me&&A*Ue*qt*rn/me,La=(O*he*De+Ue)/(2*(De+O*he*Ue)*(De+O*he*Ue)*Ue),Na=-.5*qe*Xn*Xn*Xn,Vi=Na*Xi,Ma=Na*La,xa=(xa=2*De+O*Ue*(he-qt))*xa*Qr,Hi=(O*he*De*Ue+Ae)/xa,ha=-(O*qt*me)/(Ue*xa),aa=Vr*Vi-2*Hi/Qr+Xn*(Hi+Hi/Mr),Ca=Vr*Ma-2*ha/Qr+Xn*(ha+ha/Mr),Va=qe*_i*Vi-2*Xi/(1+rn)+Xn*_i*Xi+Xn*qe*(Hi-Hi/Mr),As=qe*_i*Ma-2*La/(1+rn)+Xn*_i*La+Xn*qe*(ha-ha/Mr),Rs=Ca*Va-As*aa;if(!Rs)break;var gs=(Wi*Ca-Di*As)/Rs,fs=(Di*Va-Wi*aa)/Rs;q-=gs,st=l(-S,f(S,st-fs))}while((c(gs)>M||c(fs)>M)&&--Ct>0);return c(c(st)-S)<M?[0,st]:Ct&&[q,st]};var Nn=function(){return u.geoProjection(xn).scale(62.5271)},mn=n(35*Z);function Dn(D,W){var q=_(W/2);return[D*mn*J(1-q*q),(1+mn)*q]}Dn.invert=function(D,W){var q=W/(1+mn);return[D&&D/(mn*J(1-q*q)),2*r(q)]};var $n=function(){return u.geoProjection(Dn).scale(137.152)};function Hn(D,W){var q=W/2,st=n(q);return[2*D/L*n(W)*st*st,L*_(q)]}Hn.invert=function(D,W){var q=r(W/L),st=n(q),Ct=2*q;return[D*L/2/(n(Ct)*st*st),Ct]};var _n=function(){return u.geoProjection(Hn).scale(135.264)};function br(D){return[D[0]/2,U(_(D[1]/2*Z))*F]}function yr(D){return[D[0]*2,2*r(m(D[1]*Z))*F]}var Fr=function(W){W==null&&(W=u.geoOrthographic);var q=W(),st=u.geoEquirectangular().scale(F).precision(0).clipAngle(null).translate([0,0]);function Ct(Ut){return q(br(Ut))}q.invert&&(Ct.invert=function(Ut){return yr(q.invert(Ut))}),Ct.stream=function(Ut){var Zt=q.stream(Ut),qt=st.stream({point:function(me,De){Zt.point(me/2,U(_(-De/2*Z))*F)},lineStart:function(){Zt.lineStart()},lineEnd:function(){Zt.lineEnd()},polygonStart:function(){Zt.polygonStart()},polygonEnd:function(){Zt.polygonEnd()}});return qt.sphere=Zt.sphere,qt};function wt(Ut){Ct[Ut]=function(Zt){return arguments.length?(q[Ut](Zt),Ct):q[Ut]()}}return Ct.rotate=function(Ut){return arguments.length?(st.rotate(Ut),Ct):st.rotate()},Ct.center=function(Ut){return arguments.length?(q.center(br(Ut)),Ct):yr(q.center())},wt("clipAngle"),wt("clipExtent"),wt("scale"),wt("translate"),wt("precision"),Ct.scale(249.5)};function Ei(D,W){var q=2*y/W,st=D*D;function Ct(wt,Ut){var Zt=u.geoAzimuthalEquidistantRaw(wt,Ut),qt=Zt[0],he=Zt[1],me=qt*qt+he*he;if(me>st){var De=J(me),Ae=h(he,qt),Ue=q*b(Ae/q),qe=Ae-Ue,rn=D*n(qe),Xn=(D*m(qe)-qe*m(rn))/(S-rn),Un=Ta(qe,Xn),gr=(y-D)/Aa(Un,rn,y);qt=De;var Mr=50,Qr;do qt-=Qr=(D+Aa(Un,rn,qt)*gr-De)/(Un(qt)*gr);while(c(Qr)>M&&--Mr>0);he=qe*m(qt),qt<S&&(he-=Xn*(qt-S));var Vr=m(Ue),_i=n(Ue);Zt[0]=qt*_i-he*Vr,Zt[1]=qt*Vr+he*_i}return Zt}return Ct.invert=function(wt,Ut){var Zt=wt*wt+Ut*Ut;if(Zt>st){var qt=J(Zt),he=h(Ut,wt),me=q*b(he/q),De=he-me;wt=qt*n(De),Ut=qt*m(De);for(var Ae=wt-S,Ue=m(wt),qe=Ut/Ue,rn=wt<S?Infinity:0,Xn=10;;){var Un=D*m(qe),gr=D*n(qe),Mr=m(gr),Qr=S-gr,Vr=(Un-qe*Mr)/Qr,_i=Ta(qe,Vr);if(c(rn)<x||!--Xn)break;qe-=rn=(qe*Ue-Vr*Ae-Ut)/(Ue-Ae*2*(Qr*(gr+qe*Un*n(gr)-Mr)-Un*(Un-qe*Mr))/(Qr*Qr))}qt=D+Aa(_i,gr,wt)*(y-D)/Aa(_i,gr,y),he=me+qe,wt=qt*n(he),Ut=qt*m(he)}return u.geoAzimuthalEquidistantRaw.invert(wt,Ut)},Ct}function Ta(D,W){return function(q){var st=D*n(q);return q<S&&(st-=W),J(1+st*st)}}function Aa(D,W,q){for(var st=50,Ct=(q-W)/st,wt=D(W)+D(q),Ut=1,Zt=W;Ut<st;++Ut)wt+=2*D(Zt+=Ct);return wt*.5*Ct}var eo=function(){var W=6,q=30*Z,st=n(q),Ct=m(q),wt=u.geoProjectionMutator(Ei),Ut=wt(q,W),Zt=Ut.stream,qt=.01,he=-n(qt*Z),me=m(qt*Z);return Ut.radius=function(De){return arguments.length?(st=n(q=De*Z),Ct=m(q),wt(q,W)):q*F},Ut.lobes=function(De){return arguments.length?wt(q,W=+De):W},Ut.stream=function(De){var Ae=Ut.rotate(),Ue=Zt(De),qe=(Ut.rotate([0,0]),Zt(De));return Ut.rotate(Ae),Ue.sphere=function(){qe.polygonStart(),qe.lineStart();for(var rn=0,Xn=2*y/W,Un=0;rn<W;++rn,Un-=Xn)qe.point(h(me*n(Un),he)*F,U(me*m(Un))*F),qe.point(h(Ct*n(Un-Xn/2),st)*F,U(Ct*m(Un-Xn/2))*F);qe.lineEnd(),qe.polygonEnd()},Ue},Ut.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)},Ho=function(W,q,st,Ct,wt,Ut,Zt,qt){arguments.length<8&&(qt=0);function he(me,De){if(!De)return[W*me/y,0];var Ae=De*De,Ue=W+Ae*(q+Ae*(st+Ae*Ct)),qe=De*(wt-1+Ae*(Ut-qt+Ae*Zt)),rn=(Ue*Ue+qe*qe)/(2*qe),Xn=me*U(Ue/rn)/y;return[rn*m(Xn),De*(1+Ae*qt)+rn*(1-n(Xn))]}return he.invert=function(me,De){var Ae=y*me/W,Ue=De,qe,rn,Xn=50;do{var Un=Ue*Ue,gr=W+Un*(q+Un*(st+Un*Ct)),Mr=Ue*(wt-1+Un*(Ut-qt+Un*Zt)),Qr=gr*gr+Mr*Mr,Vr=2*Mr,_i=Qr/Vr,Di=_i*_i,Wi=U(gr/_i)/y,Xi=Ae*Wi,La=gr*gr,Na=(2*q+Un*(4*st+Un*6*Ct))*Ue,Vi=wt+Un*(3*Ut+Un*5*Zt),Ma=2*(gr*Na+Mr*(Vi-1)),xa=2*(Vi-1),Hi=(Ma*Vr-Qr*xa)/(Vr*Vr),ha=n(Xi),aa=m(Xi),Ca=_i*ha,Va=_i*aa,As=Ae/y*(1/J(1-La/Di))*(Na*_i-gr*Hi)/Di,Rs=Va-me,gs=Ue*(1+Un*qt)+_i-Ca-De,fs=Hi*aa+Ca*As,Qs=Ca*Wi,_l=1+Hi-(Hi*ha-Va*As),du=Va*Wi,uc=fs*du-_l*Qs;if(!uc)break;Ae-=qe=(gs*fs-Rs*_l)/uc,Ue-=rn=(Rs*du-gs*Qs)/uc}while((c(qe)>M||c(rn)>M)&&--Xn>0);return[Ae,Ue]},he},Do=Ho(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),io=function(){return u.geoProjection(Do).scale(149.995)},ds=Ho(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),Ko=function(){return u.geoProjection(ds).scale(153.93)},jo=Ho(5/6*y,-.62636,-.0344,0,1.3493,-.05524,0,.045),bs=function(){return u.geoProjection(jo).scale(130.945)};function Ra(D,W){var q=D*D,st=W*W;return[D*(1-.162388*st)*(.87-952426e-9*q*q),W*(1+st/12)]}Ra.invert=function(D,W){var q=D,st=W,Ct=50,wt;do{var Ut=st*st;st-=wt=(st*(1+Ut/12)-W)/(1+Ut/4)}while(c(wt)>M&&--Ct>0);Ct=50,D/=1-.162388*Ut;do{var Zt=(Zt=q*q)*Zt;q-=wt=(q*(.87-952426e-9*Zt)-D)/(.87-.00476213*Zt)}while(c(wt)>M&&--Ct>0);return[q,st]};var Xo=function(){return u.geoProjection(Ra).scale(131.747)},Bo=Ho(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762),qs=function(){return u.geoProjection(Bo).scale(131.087)},ao=function(W){var q=W(S,0)[0]-W(-S,0)[0];function st(Ct,wt){var Ut=Ct>0?-.5:.5,Zt=W(Ct+Ut*y,wt);return Zt[0]-=Ut*q,Zt}return W.invert&&(st.invert=function(Ct,wt){var Ut=Ct>0?-.5:.5,Zt=W.invert(Ct+Ut*q,wt),qt=Zt[0]-Ut*y;return qt<-y?qt+=2*y:qt>y&&(qt-=2*y),Zt[0]=qt,Zt}),st};function so(D,W){var q=g(D),st=g(W),Ct=n(W),wt=n(D)*Ct,Ut=m(D)*Ct,Zt=m(st*W);D=c(h(Ut,Zt)),W=U(wt),c(D-S)>M&&(D%=S);var qt=Hs(D>y/4?S-D:D,W);return D>y/4&&(Zt=qt[0],qt[0]=-qt[1],qt[1]=-Zt),qt[0]*=q,qt[1]*=-st,qt}so.invert=function(D,W){c(D)>1&&(D=g(D)*2-D),c(W)>1&&(W=g(W)*2-W);var q=g(D),st=g(W),Ct=-q*D,wt=-st*W,Ut=wt/Ct<1,Zt=Ne(Ut?wt:Ct,Ut?Ct:wt),qt=Zt[0],he=Zt[1],me=n(he);return Ut&&(qt=-S-qt),[q*(h(m(qt)*me,-m(he))+y),st*U(n(qt)*me)]};function Hs(D,W){if(W===S)return[0,0];var q=m(W),st=q*q,Ct=st*st,wt=1+Ct,Ut=1+3*Ct,Zt=1-Ct,qt=U(1/J(wt)),he=Zt+st*wt*qt,me=(1-q)/he,De=J(me),Ae=me*wt,Ue=J(Ae),qe=De*Zt,rn,Xn;if(D===0)return[0,-(qe+st*Ue)];var Un=n(W),gr=1/Un,Mr=2*q*Un,Qr=(-3*st+qt*Ut)*Mr,Vr=(-he*Un-(1-q)*Qr)/(he*he),_i=.5*Vr/De,Di=Zt*_i-2*st*De*Mr,Wi=st*wt*Vr+me*Ut*Mr,Xi=-gr*Mr,La=-gr*Wi,Na=-2*gr*Di,Vi=4*D/y,Ma;if(D>.222*y||W<y/4&&D>.175*y){if(rn=(qe+st*J(Ae*(1+Ct)-qe*qe))/(1+Ct),D>y/4)return[rn,rn];var xa=rn,Hi=.5*rn;rn=.5*(Hi+xa),Xn=50;do{var ha=J(Ae-rn*rn),aa=rn*(Na+Xi*ha)+La*U(rn/Ue)-Vi;if(!aa)break;aa<0?Hi=rn:xa=rn,rn=.5*(Hi+xa)}while(c(xa-Hi)>M&&--Xn>0)}else{rn=M,Xn=25;do{var Ca=rn*rn,Va=J(Ae-Ca),As=Na+Xi*Va,Rs=rn*As+La*U(rn/Ue)-Vi,gs=As+(La-Xi*Ca)/Va;rn-=Ma=Va?Rs/gs:0}while(c(Ma)>M&&--Xn>0)}return[rn,-qe-st*J(Ae-rn*rn)]}function Ne(D,W){for(var q=0,st=1,Ct=.5,wt=50;;){var Ut=Ct*Ct,Zt=J(Ct),qt=U(1/J(1+Ut)),he=1-Ut+Ct*(1+Ut)*qt,me=(1-Zt)/he,De=J(me),Ae=me*(1+Ut),Ue=De*(1-Ut),qe=Ae-D*D,rn=J(qe),Xn=W+Ue+Ct*rn;if(c(st-q)<x||--wt==0||Xn===0)break;Xn>0?q=Ct:st=Ct,Ct=.5*(q+st)}if(!wt)return null;var Un=U(Zt),gr=n(Un),Mr=1/gr,Qr=2*Zt*gr,Vr=(-3*Ct+qt*(1+3*Ut))*Qr,_i=(-he*gr-(1-Zt)*Vr)/(he*he),Di=.5*_i/De,Wi=(1-Ut)*Di-2*Ct*De*Qr,Xi=-2*Mr*Wi,La=-Mr*Qr,Na=-Mr*(Ct*(1+Ut)*_i+me*(1+3*Ut)*Qr);return[y/4*(D*(Xi+La*rn)+Na*U(D/J(Ae))),Un]}var se=function(){return u.geoProjection(ao(so)).scale(239.75)};function Yt(D,W,q){var st,Ct,wt;return D?(st=Ee(D,q),W?(Ct=Ee(W,1-q),wt=Ct[1]*Ct[1]+q*st[0]*st[0]*Ct[0]*Ct[0],[[st[0]*Ct[2]/wt,st[1]*st[2]*Ct[0]*Ct[1]/wt],[st[1]*Ct[1]/wt,-st[0]*st[2]*Ct[0]*Ct[2]/wt],[st[2]*Ct[1]*Ct[2]/wt,-q*st[0]*st[1]*Ct[0]/wt]]):[[st[0],0],[st[1],0],[st[2],0]]):(Ct=Ee(W,1-q),[[0,Ct[0]/Ct[1]],[1/Ct[1],0],[Ct[2]/Ct[1],0]])}function Ee(D,W){var q,st,Ct,wt,Ut;if(W<M)return wt=m(D),st=n(D),q=W*(D-wt*st)/4,[wt-q*st,st+q*wt,1-W*wt*wt/2,D-q];if(W>=1-M)return q=(1-W)/4,st=dt(D),wt=rt(D),Ct=1/st,Ut=st*ft(D),[wt+q*(Ut-D)/(st*st),Ct-q*wt*Ct*(Ut-D),Ct+q*wt*Ct*(Ut+D),2*r(i(D))-S+q*(Ut-D)/st];var Zt=[1,0,0,0,0,0,0,0,0],qt=[J(W),0,0,0,0,0,0,0,0],he=0;for(st=J(1-W),Ut=1;c(qt[he]/Zt[he])>M&&he<8;)q=Zt[he++],qt[he]=(q-st)/2,Zt[he]=(q+st)/2,st=J(q*st),Ut*=2;Ct=Ut*Zt[he]*D;do wt=qt[he]*m(st=Ct)/Zt[he],Ct=(U(wt)+Ct)/2;while(--he);return[m(Ct),wt=n(Ct),wt/n(Ct-st),Ct]}function sn(D,W,q){var st=c(D),Ct=c(W),wt=ft(Ct);if(st){var Ut=1/m(st),Zt=1/(_(st)*_(st)),qt=-(Zt+q*(wt*wt*Ut*Ut)-1+q),he=(q-1)*Zt,me=(-qt+J(qt*qt-4*he))/2;return[Fn(r(1/J(me)),q)*g(D),Fn(r(J((me/Zt-1)/q)),1-q)*g(W)]}return[0,Fn(r(wt),1-q)*g(W)]}function Fn(D,W){if(!W)return D;if(W===1)return o(_(D/2+P));for(var q=1,st=J(1-W),Ct=J(W),wt=0;c(Ct)>M;wt++){if(D%y){var Ut=r(st*_(D)/q);Ut<0&&(Ut+=y),D+=Ut+~~(D/y)*y}else D+=D;Ct=(q+st)/2,st=J(q*st),Ct=((q=Ct)-st)/2}return D/(v(2,wt)*q)}function rr(D,W){var q=(O-1)/(O+1),st=J(1-q*q),Ct=Fn(S,st*st),wt=-1,Ut=o(_(y/4+c(W)/2)),Zt=i(wt*Ut)/J(q),qt=qn(Zt*n(wt*D),Zt*m(wt*D)),he=sn(qt[0],qt[1],st*st);return[-he[1],(W>=0?1:-1)*(.5*Ct-he[0])]}function qn(D,W){var q=D*D,st=W+1,Ct=1-q-W*W;return[.5*((D>=0?S:-S)-h(Ct,2*D)),-.25*o(Ct*Ct+4*q)+.5*o(st*st+q)]}function Xr(D,W){var q=W[0]*W[0]+W[1]*W[1];return[(D[0]*W[0]+D[1]*W[1])/q,(D[1]*W[0]-D[0]*W[1])/q]}rr.invert=function(D,W){var q=(O-1)/(O+1),st=J(1-q*q),Ct=Fn(S,st*st),wt=-1,Ut=Yt(.5*Ct-W,-D,st*st),Zt=Xr(Ut[0],Ut[1]),qt=h(Zt[1],Zt[0])/wt;return[qt,2*r(i(.5/wt*o(q*Zt[0]*Zt[0]+q*Zt[1]*Zt[1])))-S]};var Si=function(){return u.geoProjection(ao(rr)).scale(151.496)};function Oi(D,W){if(arguments.length<2&&(W=D),W===1)return u.geoAzimuthalEqualAreaRaw;if(W===Infinity)return Gi;function q(st,Ct){var wt=u.geoAzimuthalEqualAreaRaw(st/W,Ct);return wt[0]*=D,wt}return q.invert=function(st,Ct){var wt=u.geoAzimuthalEqualAreaRaw.invert(st/D,Ct);return wt[0]*=W,wt},q}function Gi(D,W){return[D*n(W)/n(W/=2),2*m(W)]}Gi.invert=function(D,W){var q=2*U(W/2);return[D*n(q/2)/n(q),q]};var sa=function(){var W=2,q=u.geoProjectionMutator(Oi),st=q(W);return st.coefficient=function(Ct){return arguments.length?q(W=+Ct):W},st.scale(169.529)};function qa(D){var W=m(D),q=n(D),st=Oa(D);st.invert=Oa(-D);function Ct(wt,Ut){var Zt=st(wt,Ut);wt=Zt[0],Ut=Zt[1];var qt=m(Ut),he=n(Ut),me=n(wt),De=Y(W*qt+q*he*me),Ae=m(De),Ue=c(Ae)>M?De/Ae:1;return[Ue*q*m(wt),(c(wt)>S?Ue:-Ue)*(W*he-q*qt*me)]}return Ct.invert=function(wt,Ut){var Zt=J(wt*wt+Ut*Ut),qt=-m(Zt),he=n(Zt),me=Zt*he,De=-Ut*qt,Ae=Zt*W,Ue=J(me*me+De*De-Ae*Ae),qe=h(me*Ae+De*Ue,De*Ae-me*Ue),rn=(Zt>S?-1:1)*h(wt*qt,Zt*n(qe)*he+Ut*m(qe)*qt);return st.invert(rn,qe)},Ct}function Oa(D){var W=m(D),q=n(D);return function(st,Ct){var wt=n(Ct),Ut=n(st)*wt,Zt=m(st)*wt,qt=m(Ct);return[h(Zt,Ut*q-qt*W),U(qt*q+Ut*W)]}}var Eo=function(){var W=0,q=u.geoProjectionMutator(qa),st=q(W),Ct=st.rotate,wt=st.stream,Ut=u.geoCircle();return st.parallel=function(Zt){if(!arguments.length)return W*F;var qt=st.rotate();return q(W=Zt*Z).rotate(qt)},st.rotate=function(Zt){return arguments.length?(Ct.call(st,[Zt[0],Zt[1]-W*F]),Ut.center([-Zt[0],-Zt[1]]),st):(Zt=Ct.call(st),Zt[1]+=W*F,Zt)},st.stream=function(Zt){return Zt=wt(Zt),Zt.sphere=function(){Zt.polygonStart();var qt=.01,he=Ut.radius(90-qt)().coordinates[0],me=he.length-1,De=-1,Ae;for(Zt.lineStart();++De<me;)Zt.point((Ae=he[De])[0],Ae[1]);for(Zt.lineEnd(),he=Ut.radius(90+qt)().coordinates[0],me=he.length-1,Zt.lineStart();--De>=0;)Zt.point((Ae=he[De])[0],Ae[1]);Zt.lineEnd(),Zt.polygonEnd()},Zt},st.scale(79.4187).parallel(45).clipAngle(180-.001)},Ba=41+48/36+37/3600,uo=Te(0);function co(D){var W=Ba*Z,q=di(y,W)[0]-di(-y,W)[0],st=uo(0,W)[1],Ct=di(0,W)[1],wt=L-Ct,Ut=H/D,Zt=4/H,qt=st+wt*wt*4/H;function he(me,De){var Ae,Ue=c(De);if(Ue>W){var qe=f(D-1,l(0,a((me+y)/Ut)));me+=y*(D-1)/D-qe*Ut,Ae=di(me,Ue),Ae[0]=Ae[0]*H/q-H*(D-1)/(2*D)+qe*H/D,Ae[1]=st+(Ae[1]-Ct)*4*wt/H,De<0&&(Ae[1]=-Ae[1])}else Ae=uo(me,De);return Ae[0]*=Zt,Ae[1]/=qt,Ae}return he.invert=function(me,De){me/=Zt,De*=qt;var Ae=c(De);if(Ae>st){var Ue=f(D-1,l(0,a((me+y)/Ut)));me=(me+y*(D-1)/D-Ue*Ut)*q/H;var qe=di.invert(me,.25*(Ae-st)*H/wt+Ct);return qe[0]-=y*(D-1)/D-Ue*Ut,De<0&&(qe[1]=-qe[1]),qe}return uo.invert(me,De)},he}function Ja(D){return{type:"Polygon",coordinates:[s.range(-180,180+D/2,D).map(function(W,q){return[W,q&1?90-1e-6:Ba]}).concat(s.range(180,-180-D/2,-D).map(function(W,q){return[W,q&1?-90+1e-6:-Ba]}))]}}var Po=function(){var W=4,q=u.geoProjectionMutator(co),st=q(W),Ct=st.stream;return st.lobes=function(wt){return arguments.length?q(W=+wt):W},st.stream=function(wt){var Ut=st.rotate(),Zt=Ct(wt),qt=(st.rotate([0,0]),Ct(wt));return st.rotate(Ut),Zt.sphere=function(){u.geoStream(Ja(180/W),qt)},Zt},st.scale(239.75)};function ls(D){var W=1+D,q=m(1/W),st=U(q),Ct=2*J(y/(wt=y+4*st*W)),wt,Ut=.5*Ct*(W+J(D*(2+D))),Zt=D*D,qt=W*W;function he(me,De){var Ae=1-m(De),Ue,qe;if(Ae&&Ae<2){var rn=S-De,Xn=25,Un;do{var gr=m(rn),Mr=n(rn),Qr=st+h(gr,W-Mr),Vr=1+qt-2*W*Mr;rn-=Un=(rn-Zt*st-W*gr+Vr*Qr-.5*Ae*wt)/(2*W*gr*Qr)}while(c(Un)>x&&--Xn>0);Ue=Ct*J(Vr),qe=me*Qr/y}else Ue=Ct*(D+Ae),qe=me*st/y;return[Ue*m(qe),Ut-Ue*n(qe)]}return he.invert=function(me,De){var Ae=me*me+(De-=Ut)*De,Ue=(1+qt-Ae/(Ct*Ct))/(2*W),qe=Y(Ue),rn=m(qe),Xn=st+h(rn,W-Ue);return[U(me/J(Ae))*y/Xn,U(1-2*(qe-Zt*st-W*rn+(1+qt-2*W*Ue)*Xn)/wt)]},he}var ko=function(){var W=1,q=u.geoProjectionMutator(ls),st=q(W);return st.ratio=function(Ct){return arguments.length?q(W=+Ct):W},st.scale(167.774).center([0,18.67])},Es=.7109889596207567,Co=.0528035274542;function Za(D,W){return W>-Es?(D=X(D,W),D[1]+=Co,D):Wt(D,W)}Za.invert=function(D,W){return W>-Es?X.invert(D,W-Co):Wt.invert(D,W)};var Bs=function(){return u.geoProjection(Za).rotate([-20,-55]).scale(164.263).center([0,-5.4036])};function ss(D,W){return c(W)>Es?(D=X(D,W),D[1]-=W>0?Co:-Co,D):Wt(D,W)}ss.invert=function(D,W){return c(W)>Es?X.invert(D,W+(W>0?Co:-Co)):Wt.invert(D,W)};var ja=function(){return u.geoProjection(ss).scale(152.63)};function gn(D,W){return c(D[0]-W[0])<M&&c(D[1]-W[1])<M}function cr(D,W){for(var q=-1,st=D.length,Ct=D[0],wt,Ut,Zt,qt=[];++q<st;){wt=D[q],Ut=(wt[0]-Ct[0])/W,Zt=(wt[1]-Ct[1])/W;for(var he=0;he<W;++he)qt.push([Ct[0]+he*Ut,Ct[1]+he*Zt]);Ct=wt}return qt.push(wt),qt}function Gr(D){var W=[],q,st,Ct,wt,Ut,Zt,qt,he=D[0].length;for(qt=0;qt<he;++qt)q=D[0][qt],st=q[0][0],Ct=q[0][1],wt=q[1][1],Ut=q[2][0],Zt=q[2][1],W.push(cr([[st+M,Ct+M],[st+M,wt-M],[Ut-M,wt-M],[Ut-M,Zt+M]],30));for(qt=D[1].length-1;qt>=0;--qt)q=D[1][qt],st=q[0][0],Ct=q[0][1],wt=q[1][1],Ut=q[2][0],Zt=q[2][1],W.push(cr([[Ut-M,Zt-M],[Ut-M,wt+M],[st+M,wt+M],[st+M,Ct-M]],30));return{type:"Polygon",coordinates:[s.merge(W)]}}var Ui=function(W,q){var st=Gr(q);q=q.map(function(qt){return qt.map(function(he){return[[he[0][0]*Z,he[0][1]*Z],[he[1][0]*Z,he[1][1]*Z],[he[2][0]*Z,he[2][1]*Z]]})});var Ct=q.map(function(qt){return qt.map(function(he){var me=W(he[0][0],he[0][1])[0],De=W(he[2][0],he[2][1])[0],Ae=W(he[1][0],he[0][1])[1],Ue=W(he[1][0],he[1][1])[1],qe;return Ae>Ue&&(qe=Ae,Ae=Ue,Ue=qe),[[me,Ae],[De,Ue]]})});function wt(qt,he){for(var me=he<0?-1:1,De=q[+(he<0)],Ae=0,Ue=De.length-1;Ae<Ue&&qt>De[Ae][2][0];++Ae);var qe=W(qt-De[Ae][1][0],he);return qe[0]+=W(De[Ae][1][0],me*he>me*De[Ae][0][1]?De[Ae][0][1]:he)[0],qe}W.invert&&(wt.invert=function(qt,he){for(var me=Ct[+(he<0)],De=q[+(he<0)],Ae=0,Ue=me.length;Ae<Ue;++Ae){var qe=me[Ae];if(qe[0][0]<=qt&&qt<qe[1][0]&&qe[0][1]<=he&&he<qe[1][1]){var rn=W.invert(qt-W(De[Ae][1][0],0)[0],he);return rn[0]+=De[Ae][1][0],gn(wt(rn[0],rn[1]),[qt,he])?rn:null}}});var Ut=u.geoProjection(wt),Zt=Ut.stream;return Ut.stream=function(qt){var he=Ut.rotate(),me=Zt(qt),De=(Ut.rotate([0,0]),Zt(qt));return Ut.rotate(he),me.sphere=function(){u.geoStream(st,De)},me},Ut},za=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],go=function(){return Ui($t,za).scale(160.857)},fo=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],ea=function(){return Ui(ss,fo).scale(152.63)},to=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Ns=function(){return Ui(X,to).scale(169.529)},Ss=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],Ka=function(){return Ui(X,Ss).scale(169.529).rotate([20,0])},ou=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],Jo=function(){return Ui(Za,ou).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},Os=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]],tu=function(){return Ui(Wt,Os).scale(152.63).rotate([-20,0])};function _s(D,W){return[3/H*D*J(y*y/3-W*W),W]}_s.invert=function(D,W){return[H/3*D/J(y*y/3-W*W),W]};var vs=function(){return u.geoProjection(_s).scale(158.837)};function ts(D){function W(q,st){if(c(c(st)-S)<M)return[0,st<0?-2:2];var Ct=m(st),wt=v((1+Ct)/(1-Ct),D/2),Ut=.5*(wt+1/wt)+n(q*=D);return[2*m(q)/Ut,(wt-1/wt)/Ut]}return W.invert=function(q,st){var Ct=c(st);if(c(Ct-2)<M)return q?null:[0,g(st)*S];if(Ct>2)return null;q/=2,st/=2;var wt=q*q,Ut=st*st,Zt=2*st/(1+wt+Ut);return Zt=v((1+Zt)/(1-Zt),1/D),[h(2*q,1-wt-Ut)/D,U((Zt-1)/(Zt+1))]},W}var ws=function(){var W=.5,q=u.geoProjectionMutator(ts),st=q(W);return st.spacing=function(Ct){return arguments.length?q(W=+Ct):W},st.scale(124.75)},Ms=y/O;function Ou(D,W){return[D*(1+J(n(W)))/2,W/(n(W/2)*n(D/6))]}Ou.invert=function(D,W){var q=c(D),st=c(W),Ct=M,wt=S;st<Ms?wt*=st/Ms:Ct+=6*Y(Ms/st);for(var Ut=0;Ut<25;Ut++){var Zt=m(wt),qt=J(n(wt)),he=m(wt/2),me=n(wt/2),De=m(Ct/6),Ae=n(Ct/6),Ue=.5*Ct*(1+qt)-q,qe=wt/(me*Ae)-st,rn=qt?-.25*Ct*Zt/qt:0,Xn=.5*(1+qt),Un=(1+.5*wt*he/me)/(me*Ae),gr=wt/me*(De/6)/(Ae*Ae),Mr=rn*gr-Un*Xn,Qr=(Ue*gr-qe*Xn)/Mr,Vr=(qe*rn-Ue*Un)/Mr;if(wt-=Qr,Ct-=Vr,c(Qr)<M&&c(Vr)<M)break}return[D<0?-Ct:Ct,W<0?-wt:wt]};var Bu=function(){return u.geoProjection(Ou).scale(97.2672)};function So(D,W){var q=D*D,st=W*W;return[D*(.975534+st*(-.119161+q*-.0143059+st*-.0547009)),W*(1.00384+q*(.0802894+st*-.02855+q*199025e-9)+st*(.0998909+st*-.0491032))]}So.invert=function(D,W){var q=g(D)*y,st=W/2,Ct=50;do{var wt=q*q,Ut=st*st,Zt=q*st,qt=q*(.975534+Ut*(-.119161+wt*-.0143059+Ut*-.0547009))-D,he=st*(1.00384+wt*(.0802894+Ut*-.02855+wt*199025e-9)+Ut*(.0998909+Ut*-.0491032))-W,me=.975534-Ut*(.119161+3*wt*.0143059+Ut*.0547009),De=-Zt*(2*.119161+4*.0547009*Ut+2*.0143059*wt),Ae=Zt*(2*.0802894+4*199025e-9*wt+2*-.02855*Ut),Ue=1.00384+wt*(.0802894+199025e-9*wt)+Ut*(3*(.0998909-.02855*wt)-5*.0491032*Ut),qe=De*Ae-Ue*me,rn=(he*De-qt*Ue)/qe,Xn=(qt*Ae-he*me)/qe;q-=rn,st-=Xn}while((c(rn)>M||c(Xn)>M)&&--Ct>0);return Ct&&[q,st]};var eu=function(){return u.geoProjection(So).scale(139.98)};function Nu(D,W){return[m(D)/n(W),_(W)*n(D)]}Nu.invert=function(D,W){var q=D*D,st=W*W,Ct=st+1,wt=D?A*J((Ct-J(q*q+2*q*(st-1)+Ct*Ct))/q+1):1/J(Ct);return[U(D*wt),g(W)*Y(wt)]};var Yu=function(){return u.geoProjection(Nu).scale(144.049).clipAngle(90-.001)};function al(D){var W=n(D),q=_(P+D/2);function st(Ct,wt){var Ut=wt-D,Zt=c(Ut)<M?Ct*W:c(Zt=P+wt/2)<M||c(c(Zt)-S)<M?0:Ct*Ut/o(_(Zt)/q);return[Zt,Ut]}return st.invert=function(Ct,wt){var Ut,Zt=wt+D;return[c(wt)<M?Ct/W:c(Ut=P+Zt/2)<M||c(c(Ut)-S)<M?0:Ct*o(_(Ut)/q)/wt,Zt]},st}var Fu=function(){return kt(al).parallel(40).scale(158.837)};function Oo(D,W){return[D,1.25*o(_(P+.4*W))]}Oo.invert=function(D,W){return[D,2.5*r(i(.8*W))-.625*y]};var Ua=function(){return u.geoProjection(Oo).scale(108.318)};function ba(D){var W=D.length-1;function q(st,Ct){for(var wt=n(Ct),Ut=2/(1+wt*n(st)),Zt=Ut*wt*m(st),qt=Ut*m(Ct),he=W,me=D[he],De=me[0],Ae=me[1],Ue;--he>=0;)me=D[he],De=me[0]+Zt*(Ue=De)-qt*Ae,Ae=me[1]+Zt*Ae+qt*Ue;return De=Zt*(Ue=De)-qt*Ae,Ae=Zt*Ae+qt*Ue,[De,Ae]}return q.invert=function(st,Ct){var wt=20,Ut=st,Zt=Ct;do{for(var qt=W,he=D[qt],me=he[0],De=he[1],Ae=0,Ue=0,qe;--qt>=0;)he=D[qt],Ae=me+Ut*(qe=Ae)-Zt*Ue,Ue=De+Ut*Ue+Zt*qe,me=he[0]+Ut*(qe=me)-Zt*De,De=he[1]+Ut*De+Zt*qe;Ae=me+Ut*(qe=Ae)-Zt*Ue,Ue=De+Ut*Ue+Zt*qe,me=Ut*(qe=me)-Zt*De-st,De=Ut*De+Zt*qe-Ct;var rn=Ae*Ae+Ue*Ue,Xn,Un;Ut-=Xn=(me*Ae+De*Ue)/rn,Zt-=Un=(De*Ae-me*Ue)/rn}while(c(Xn)+c(Un)>M*M&&--wt>0);if(wt){var gr=J(Ut*Ut+Zt*Zt),Mr=2*r(gr*.5),Qr=m(Mr);return[h(Ut*Qr,gr*n(Mr)),gr?U(Zt*Qr/gr):0]}},q}var No=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],hu=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Zu=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],ps=[[.9245,0],[0,0],[.01943,0]],$o=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Is(){return Xa(No,[152,-64]).scale(1500).center([-160.908,62.4864]).clipAngle(25)}function su(){return Xa(hu,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Fo(){return Xa(Zu,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Ku(){return Xa(ps,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Xs(){return Xa($o,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Xa(D,W){var q=u.geoProjection(ba(D)).rotate(W).clipAngle(90),st=u.geoRotation(W),Ct=q.center;return delete q.rotate,q.center=function(wt){return arguments.length?Ct(st(wt)):st.invert(Ct())},q}var yl=J(6),Hl=J(7);function xl(D,W){var q=U(7*m(W)/(3*yl));return[yl*D*(2*n(2*q/3)-1)/Hl,9*m(q/3)/Hl]}xl.invert=function(D,W){var q=3*U(W*Hl/9);return[D*Hl/(yl*(2*n(2*q/3)-1)),U(m(q)*3*yl/7)]};var yc=function(){return u.geoProjection(xl).scale(164.859)};function Tl(D,W){for(var q=(1+A)*m(W),st=W,Ct=0,wt;Ct<25&&(st-=wt=(m(st/2)+m(st)-q)/(.5*n(st/2)+n(st)),!(c(wt)<M));Ct++);return[D*(1+2*n(st)/n(st/2))/(3*O),2*J(3)*m(st/2)/J(2+O)]}Tl.invert=function(D,W){var q=W*J(2+O)/(2*J(3)),st=2*U(q);return[3*O*D/(1+2*n(st)/n(st/2)),U((q+m(st))/(1+A))]};var oo=function(){return u.geoProjection(Tl).scale(188.209)};function wu(D,W){for(var q=J(6/(4+y)),st=(1+y/4)*m(W),Ct=W/2,wt=0,Ut;wt<25&&(Ct-=Ut=(Ct/2+m(Ct)-st)/(.5+n(Ct)),!(c(Ut)<M));wt++);return[q*(.5+n(Ct))*D/1.5,q*Ct]}wu.invert=function(D,W){var q=J(6/(4+y)),st=W/q;return c(c(st)-S)<M&&(st=st<0?-S:S),[1.5*D/(q*(.5+n(st))),U((st/2+m(st))/(1+y/4))]};var bl=function(){return u.geoProjection(wu).scale(166.518)};function nu(D,W){var q=W*W,st=q*q;return[D*(.8707-.131979*q+st*(-.013791+st*(.003971*q-.001529*st))),W*(1.007226+q*(.015085+st*(-.044475+.028874*q-.005916*st)))]}nu.invert=function(D,W){var q=W,st=25,Ct;do{var wt=q*q,Ut=wt*wt;q-=Ct=(q*(1.007226+wt*(.015085+Ut*(-.044475+.028874*wt-.005916*Ut)))-W)/(1.007226+wt*(.015085*3+Ut*(-.044475*7+.028874*9*wt-.005916*11*Ut)))}while(c(Ct)>M&&--st>0);return[D/(.8707+(wt=q*q)*(-.131979+wt*(-.013791+wt*wt*wt*(.003971-.001529*wt)))),q]};var zu=function(){return u.geoProjection(nu).scale(175.295)};function xu(D,W){var q=W*W,st=q*q,Ct=q*st;return[D*(.84719-.13063*q+Ct*Ct*(-.04515+.05494*q-.02326*st+.00331*Ct)),W*(1.01183+st*st*(-.02625+.01926*q-.00396*st))]}xu.invert=function(D,W){var q=W,st=25,Ct,wt,Ut,Zt;do wt=q*q,Ut=wt*wt,q-=Ct=(q*(1.01183+Ut*Ut*(-.02625+.01926*wt-.00396*Ut))-W)/(1.01183+Ut*Ut*(9*-.02625+11*.01926*wt+13*-.00396*Ut));while(c(Ct)>x&&--st>0);return wt=q*q,Ut=wt*wt,Zt=wt*Ut,[D/(.84719-.13063*wt+Zt*Zt*(-.04515+.05494*wt-.02326*Ut+.00331*Zt)),q]};var bu=function(){return u.geoProjection(xu).scale(175.295)};function Js(D,W){return[D*(1+n(W))/2,2*(W-_(W/2))]}Js.invert=function(D,W){for(var q=W/2,st=0,Ct=Infinity;st<10&&c(Ct)>M;++st){var wt=n(W/2);W-=Ct=(W-_(W/2)-q)/(1-.5/(wt*wt))}return[2*D/(1+n(W)),W]};var cs=function(){return u.geoProjection(Js).scale(152.63)},Ps=1.0148,ol=.23185,Al=-.14499,Fl=.02406,Uu=Ps,Xu=5*ol,sl=7*Al,Eu=9*Fl,uu=1.790857183;function Ju(D,W){var q=W*W;return[D,W*(Ps+q*q*(ol+q*(Al+Fl*q)))]}Ju.invert=function(D,W){W>uu?W=uu:W<-uu&&(W=-uu);var q=W,st;do{var Ct=q*q;q-=st=(q*(Ps+Ct*Ct*(ol+Ct*(Al+Fl*Ct)))-W)/(Uu+Ct*Ct*(Xu+Ct*(sl+Eu*Ct)))}while(c(st)>M);return[D,q]};var Ls=function(){return u.geoProjection(Ju).scale(139.319)};function El(D,W){if(c(W)<M)return[D,0];var q=_(W),st=D*m(W);return[m(st)/q,W+(1-n(st))/q]}El.invert=function(D,W){if(c(W)<M)return[D,0];var q=D*D+W*W,st=W*.5,Ct=10,wt;do{var Ut=_(st),Zt=1/n(st),qt=q-2*W*st+st*st;st-=wt=(Ut*qt+2*(st-W))/(2+qt*Zt*Zt+2*(st-W)*Ut)}while(c(wt)>M&&--Ct>0);return Ut=_(st),[(c(W)<c(st+1/Ut)?U(D*Ut):g(D)*(Y(c(D*Ut))+S))/m(st),st]};var sc=function(){return u.geoProjection(El).scale(103.74)},Cl=function(W,q){var st=dc(W[1],W[0]),Ct=dc(q[1],q[0]),wt=Ol(st,Ct),Ut=$u(st)/$u(Ct);return Yl([1,0,W[0][0],0,1,W[0][1]],Yl([Ut,0,0,0,Ut,0],Yl([n(wt),m(wt),0,-m(wt),n(wt),0],[1,0,-q[0][0],0,1,-q[0][1]])))};function zl(D){var W=1/(D[0]*D[4]-D[1]*D[3]);return[W*D[4],-W*D[1],W*(D[1]*D[5]-D[2]*D[4]),-W*D[3],W*D[0],W*(D[2]*D[3]-D[0]*D[5])]}function Yl(D,W){return[D[0]*W[0]+D[1]*W[3],D[0]*W[1]+D[1]*W[4],D[0]*W[2]+D[1]*W[5]+D[2],D[3]*W[0]+D[4]*W[3],D[3]*W[1]+D[4]*W[4],D[3]*W[2]+D[4]*W[5]+D[5]]}function dc(D,W){return[D[0]-W[0],D[1]-W[1]]}function $u(D){return J(D[0]*D[0]+D[1]*D[1])}function Ol(D,W){return h(D[0]*W[1]-D[1]*W[0],D[0]*W[0]+D[1]*W[1])}var Ul=function(W,q,st){st=st==null?-y/6:st,Ct(W,{transform:[n(st),m(st),0,-m(st),n(st),0]});function Ct(me,De){if(me.edges=ul(me.face),De.face){var Ae=me.shared=Sl(me.face,De.face),Ue=Cl(Ae.map(De.project),Ae.map(me.project));me.transform=De.transform?Yl(De.transform,Ue):Ue;for(var qe=De.edges,rn=0,Xn=qe.length;rn<Xn;++rn)ho(Ae[0],qe[rn][1])&&ho(Ae[1],qe[rn][0])&&(qe[rn]=me),ho(Ae[0],qe[rn][0])&&ho(Ae[1],qe[rn][1])&&(qe[rn]=me);for(qe=me.edges,rn=0,Xn=qe.length;rn<Xn;++rn)ho(Ae[0],qe[rn][0])&&ho(Ae[1],qe[rn][1])&&(qe[rn]=De),ho(Ae[0],qe[rn][1])&&ho(Ae[1],qe[rn][0])&&(qe[rn]=De)}else me.transform=De.transform;return me.children&&me.children.forEach(function(Un){Ct(Un,me)}),me}function wt(me,De){var Ae=q(me,De),Ue=Ae.project([me*F,De*F]),qe;return(qe=Ae.transform)?[qe[0]*Ue[0]+qe[1]*Ue[1]+qe[2],-(qe[3]*Ue[0]+qe[4]*Ue[1]+qe[5])]:(Ue[1]=-Ue[1],Ue)}Ys(W)&&(wt.invert=function(me,De){var Ae=Ut(W,[me,-De]);return Ae&&(Ae[0]*=Z,Ae[1]*=Z,Ae)});function Ut(me,De){var Ae=me.project.invert,Ue=me.transform,qe=De;if(Ue&&(Ue=zl(Ue),qe=[Ue[0]*qe[0]+Ue[1]*qe[1]+Ue[2],Ue[3]*qe[0]+Ue[4]*qe[1]+Ue[5]]),Ae&&me===Zt(rn=Ae(qe)))return rn;for(var rn,Xn=me.children,Un=0,gr=Xn&&Xn.length;Un<gr;++Un)if(rn=Ut(Xn[Un],De))return rn}function Zt(me){return q(me[0]*Z,me[1]*Z)}var qt=u.geoProjection(wt),he=qt.stream;return qt.stream=function(me){var De=qt.rotate(),Ae=he(me),Ue=(qt.rotate([0,0]),he(me));return qt.rotate(De),Ae.sphere=function(){Ue.polygonStart(),Ue.lineStart(),wo(Ue,W),Ue.lineEnd(),Ue.polygonEnd()},Ae},qt};function wo(D,W,q){var st,Ct=W.edges,wt=Ct.length,Ut,Zt={type:"MultiPoint",coordinates:W.face},qt=W.face.filter(function(rn){return c(rn[1])!==90}),he=u.geoBounds({type:"MultiPoint",coordinates:qt}),me=!1,De=-1,Ae=he[1][0]-he[0][0],Ue=Ae===180||Ae===360?[(he[0][0]+he[1][0])/2,(he[0][1]+he[1][1])/2]:u.geoCentroid(Zt);if(q)for(;++De<wt&&Ct[De]!==q;);++De;for(var qe=0;qe<wt;++qe)Ut=Ct[(qe+De)%wt],Array.isArray(Ut)?(me||(D.point((st=u.geoInterpolate(Ut[0],Ue)(M))[0],st[1]),me=!0),D.point((st=u.geoInterpolate(Ut[1],Ue)(M))[0],st[1])):(me=!1,Ut!==q&&wo(D,Ut,W))}function ho(D,W){return D&&W&&D[0]===W[0]&&D[1]===W[1]}function Sl(D,W){for(var q,st,Ct=D.length,wt=null,Ut=0;Ut<Ct;++Ut){q=D[Ut];for(var Zt=W.length;--Zt>=0;)if(st=W[Zt],q[0]===st[0]&&q[1]===st[1]){if(wt)return[wt,q];wt=q}}}function ul(D){for(var W=D.length,q=[],st=D[W-1],Ct=0;Ct<W;++Ct)q.push([st,st=D[Ct]]);return q}function Ys(D){return D.project.invert||D.children&&D.children.some(Ys)}var Da=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],mo=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(D){return D.map(function(W){return Da[W]})}),Gs=function(W){W=W||function(st){var Ct=u.geoCentroid({type:"MultiPoint",coordinates:st});return u.geoGnomonic().scale(1).translate([0,0]).rotate([-Ct[0],-Ct[1]])};var q=mo.map(function(st){return{face:st,project:W(st)}});return[-1,0,0,1,0,1,4,5].forEach(function(st,Ct){var wt=q[st];wt&&(wt.children||(wt.children=[])).push(q[Ct])}),Ul(q[0],function(st,Ct){return q[st<-y/2?Ct<0?6:4:st<0?Ct<0?2:0:st<y/2?Ct<0?3:1:Ct<0?7:5]}).scale(101.858).center([0,45])},wl=2/J(3);function ll(D,W){var q=di(D,W);return[q[0]*wl,q[1]]}ll.invert=function(D,W){return di.invert(D/wl,W)};var Qu=function(W){W=W||function(st){var Ct=u.geoCentroid({type:"MultiPoint",coordinates:st});return u.geoProjection(ll).translate([0,0]).scale(1).rotate(Ct[1]>0?[-Ct[0],0]:[180-Ct[0],180])};var q=mo.map(function(st){return{face:st,project:W(st)}});return[-1,0,0,1,0,1,4,5].forEach(function(st,Ct){var wt=q[st];wt&&(wt.children||(wt.children=[])).push(q[Ct])}),Ul(q[0],function(st,Ct){return q[st<-y/2?Ct<0?6:4:st<0?Ct<0?2:0:st<y/2?Ct<0?3:1:Ct<0?7:5]}).scale(121.906).center([0,48.5904])},xc=function(W){W=W||function(Zt){var qt=Zt.length===6?u.geoCentroid({type:"MultiPoint",coordinates:Zt}):Zt[0];return u.geoGnomonic().scale(1).translate([0,0]).rotate([-qt[0],-qt[1]])};var q=mo.map(function(Zt){for(var qt=Zt.map(Zs),he=qt.length,me=qt[he-1],De,Ae=[],Ue=0;Ue<he;++Ue)De=qt[Ue],Ae.push(ru([me[0]*.9486832980505138+De[0]*.31622776601683794,me[1]*.9486832980505138+De[1]*.31622776601683794,me[2]*.9486832980505138+De[2]*.31622776601683794]),ru([De[0]*.9486832980505138+me[0]*.31622776601683794,De[1]*.9486832980505138+me[1]*.31622776601683794,De[2]*.9486832980505138+me[2]*.31622776601683794])),me=De;return Ae}),st=[],Ct=[-1,0,0,1,0,1,4,5];q.forEach(function(Zt,qt){for(var he=mo[qt],me=he.length,De=st[qt]=[],Ae=0;Ae<me;++Ae)q.push([he[Ae],Zt[(Ae*2+2)%(2*me)],Zt[(Ae*2+1)%(2*me)]]),Ct.push(qt),De.push(qu(Zs(Zt[(Ae*2+2)%(2*me)]),Zs(Zt[(Ae*2+1)%(2*me)])))});var wt=q.map(function(Zt){return{project:W(Zt),face:Zt}});Ct.forEach(function(Zt,qt){var he=wt[Zt];he&&(he.children||(he.children=[])).push(wt[qt])});function Ut(Zt,qt){var he=n(qt),me=[he*n(Zt),he*m(Zt),m(qt)],De=Zt<-y/2?qt<0?6:4:Zt<0?qt<0?2:0:Zt<y/2?qt<0?3:1:qt<0?7:5,Ae=st[De];return wt[Zl(Ae[0],me)<0?8+3*De:Zl(Ae[1],me)<0?8+3*De+1:Zl(Ae[2],me)<0?8+3*De+2:De]}return Ul(wt[0],Ut).scale(110.625).center([0,45])};function Zl(D,W){for(var q=0,st=D.length,Ct=0;q<st;++q)Ct+=D[q]*W[q];return Ct}function qu(D,W){return[D[1]*W[2]-D[2]*W[1],D[2]*W[0]-D[0]*W[2],D[0]*W[1]-D[1]*W[0]]}function ru(D){return[h(D[1],D[0])*F,U(l(-1,f(1,D[2])))*F]}function Zs(D){var W=D[0]*Z,q=D[1]*Z,st=n(q);return[st*n(W),st*m(W),m(q)]}var es=function(){},iu=function(W){if((st=W.length)<4)return!1;for(var q=0,st,Ct=W[st-1][1]*W[0][0]-W[st-1][0]*W[0][1];++q<st;)Ct+=W[q-1][1]*W[q][0]-W[q-1][0]*W[q][1];return Ct<=0},ku=function(W,q){for(var st=q[0],Ct=q[1],wt=!1,Ut=0,Zt=W.length,qt=Zt-1;Ut<Zt;qt=Ut++){var he=W[Ut],me=he[0],De=he[1],Ae=W[qt],Ue=Ae[0],qe=Ae[1];De>Ct^qe>Ct&&st<(Ue-me)*(Ct-De)/(qe-De)+me&&(wt=!wt)}return wt},us=function(W,q){var st=q.stream,Ct;if(!st)throw new Error("invalid projection");switch(W&&W.type){case"Feature":Ct=Fs;break;case"FeatureCollection":Ct=Yi;break;default:Ct=Gu;break}return Ct(W,st)};function Yi(D,W){return{type:"FeatureCollection",features:D.features.map(function(q){return Fs(q,W)})}}function Fs(D,W){return{type:"Feature",id:D.id,properties:D.properties,geometry:Gu(D.geometry,W)}}function tl(D,W){return{type:"GeometryCollection",geometries:D.geometries.map(function(q){return Gu(q,W)})}}function Gu(D,W){if(!D)return null;if(D.type==="GeometryCollection")return tl(D,W);var q;switch(D.type){case"Point":q=Su;break;case"MultiPoint":q=Su;break;case"LineString":q=Mi;break;case"MultiLineString":q=Mi;break;case"Polygon":q=_u;break;case"MultiPolygon":q=_u;break;case"Sphere":q=_u;break;default:return null}return u.geoStream(D,W(q)),q.result()}var Go=[],Yo=[],Su={point:function(W,q){Go.push([W,q])},result:function(){var W=Go.length?Go.length<2?{type:"Point",coordinates:Go[0]}:{type:"MultiPoint",coordinates:Go}:null;return Go=[],W}},Mi={lineStart:es,point:function(W,q){Go.push([W,q])},lineEnd:function(){Go.length&&(Yo.push(Go),Go=[])},result:function(){var W=Yo.length?Yo.length<2?{type:"LineString",coordinates:Yo[0]}:{type:"MultiLineString",coordinates:Yo}:null;return Yo=[],W}},_u={polygonStart:es,lineStart:es,point:function(W,q){Go.push([W,q])},lineEnd:function(){var W=Go.length;if(W){do Go.push(Go[0].slice());while(++W<4);Yo.push(Go),Go=[]}},polygonEnd:es,result:function(){if(!Yo.length)return null;var W=[],q=[];return Yo.forEach(function(st){iu(st)?W.push([st]):q.push(st)}),q.forEach(function(st){var Ct=st[0];W.some(function(wt){if(ku(wt[0],Ct))return wt.push(st),!0})||W.push([st])}),Yo=[],W.length?W.length>1?{type:"MultiPolygon",coordinates:W}:{type:"Polygon",coordinates:W[0]}:null}},Iu=function(W){var q=W(S,0)[0]-W(-S,0)[0];function st(Ct,wt){var Ut=c(Ct)<S,Zt=W(Ut?Ct:Ct>0?Ct-y:Ct+y,wt),qt=(Zt[0]-Zt[1])*A,he=(Zt[0]+Zt[1])*A;if(Ut)return[qt,he];var me=q*A,De=qt>0^he>0?-1:1;return[De*qt-g(he)*me,De*he-g(qt)*me]}return W.invert&&(st.invert=function(Ct,wt){var Ut=(Ct+wt)*A,Zt=(wt-Ct)*A,qt=c(Ut)<.5*q&&c(Zt)<.5*q;if(!qt){var he=q*A,me=Ut>0^Zt>0?-1:1,De=-me*Ct+(Zt>0?1:-1)*he,Ae=-me*wt+(Ut>0?1:-1)*he;Ut=(-De-Ae)*A,Zt=(De-Ae)*A}var Ue=W.invert(Ut,Zt);return qt||(Ue[0]+=Ut>0?y:-y),Ue}),u.geoProjection(st).rotate([-90,-90,45]).clipAngle(180-.001)},Lu=function(){return Iu(so).scale(176.423)},$s=function(){return Iu(rr).scale(111.48)},we=function(W,q){if(!(0<=(q=+q)&&q<=20))throw new Error("invalid digits");function st(he){var me=he.length,De=2,Ae=new Array(me);for(Ae[0]=+he[0].toFixed(q),Ae[1]=+he[1].toFixed(q);De<me;)Ae[De]=he[De],++De;return Ae}function Ct(he){return he.map(st)}function wt(he){return he.map(Ct)}function Ut(he){if(he==null)return he;var me;switch(he.type){case"GeometryCollection":me={type:"GeometryCollection",geometries:he.geometries.map(Ut)};break;case"Point":me={type:"Point",coordinates:st(he.coordinates)};break;case"MultiPoint":case"LineString":me={type:he.type,coordinates:Ct(he.coordinates)};break;case"MultiLineString":case"Polygon":me={type:he.type,coordinates:wt(he.coordinates)};break;case"MultiPolygon":me={type:"MultiPolygon",coordinates:he.coordinates.map(wt)};break;default:return he}return he.bbox!=null&&(me.bbox=he.bbox),me}function Zt(he){var me={type:"Feature",properties:he.properties,geometry:Ut(he.geometry)};return he.id!=null&&(me.id=he.id),he.bbox!=null&&(me.bbox=he.bbox),me}if(W!=null)switch(W.type){case"Feature":return Zt(W);case"FeatureCollection":{var qt={type:"FeatureCollection",features:W.features.map(Zt)};return W.bbox!=null&&(qt.bbox=W.bbox),qt}default:return Ut(W)}return W};function Pe(D){var W=m(D);function q(st,Ct){var wt=W?_(st*W/2)/W:st/2;if(!Ct)return[2*wt,-D];var Ut=2*r(wt*m(Ct)),Zt=1/_(Ct);return[m(Ut)*Zt,Ct+(1-n(Ut))*Zt-D]}return q.invert=function(st,Ct){if(c(Ct+=D)<M)return[W?2*r(W*st/2)/W:st,0];var wt=st*st+Ct*Ct,Ut=0,Zt=10,qt;do{var he=_(Ut),me=1/n(Ut),De=wt-2*Ct*Ut+Ut*Ut;Ut-=qt=(he*De+2*(Ut-Ct))/(2+De*me*me+2*(Ut-Ct)*he)}while(c(qt)>M&&--Zt>0);var Ae=st*(he=_(Ut)),Ue=_(c(Ct)<c(Ut+1/he)?U(Ae)*.5:Y(Ae)*.5+y/4)/m(Ut);return[W?2*r(W*Ue)/W:2*Ue,Ut]},q}var hn=function(){return kt(Pe).scale(131.215)},tn=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];tn.forEach(function(D){D[1]*=1.0144});function On(D,W){var q=f(18,c(W)*36/y),st=a(q),Ct=q-st,wt=(De=tn[st])[0],Ut=De[1],Zt=(De=tn[++st])[0],qt=De[1],he=(De=tn[f(19,++st)])[0],me=De[1],De;return[D*(Zt+Ct*(he-wt)/2+Ct*Ct*(he-2*Zt+wt)/2),(W>0?S:-S)*(qt+Ct*(me-Ut)/2+Ct*Ct*(me-2*qt+Ut)/2)]}On.invert=function(D,W){var q=W/S,st=q*90,Ct=f(18,c(st/5)),wt=l(0,a(Ct));do{var Ut=tn[wt][1],Zt=tn[wt+1][1],qt=tn[f(19,wt+2)][1],he=qt-Ut,me=qt-2*Zt+Ut,De=2*(c(q)-Zt)/he,Ae=me/he,Ue=De*(1-Ae*De*(1-2*Ae*De));if(Ue>=0||wt===1){st=(W>=0?5:-5)*(Ue+Ct);var qe=50,rn;do Ct=f(18,c(st)/5),wt=a(Ct),Ue=Ct-wt,Ut=tn[wt][1],Zt=tn[wt+1][1],qt=tn[f(19,wt+2)][1],st-=(rn=(W>=0?S:-S)*(Zt+Ue*(qt-Ut)/2+Ue*Ue*(qt-2*Zt+Ut)/2)-W)*F;while(c(rn)>x&&--qe>0);break}}while(--wt>=0);var Xn=tn[wt][0],Un=tn[wt+1][0],gr=tn[f(19,wt+2)][0];return[D/(Un+Ue*(gr-Xn)/2+Ue*Ue*(gr-2*Un+Xn)/2),st*Z]};var fr=function(){return u.geoProjection(On).scale(152.63)};function Ir(D){function W(q,st){var Ct=n(st),wt=(D-1)/(D-Ct*n(q));return[wt*Ct*m(q),wt*m(st)]}return W.invert=function(q,st){var Ct=q*q+st*st,wt=J(Ct),Ut=(D-J(1-Ct*(D+1)/(D-1)))/((D-1)/wt+wt/(D-1));return[h(q*Ut,wt*J(1-Ut*Ut)),wt?U(st*Ut/wt):0]},W}function Zr(D,W){var q=Ir(D);if(!W)return q;var st=n(W),Ct=m(W);function wt(Ut,Zt){var qt=q(Ut,Zt),he=qt[1],me=he*Ct/(D-1)+st;return[qt[0]*st/me,he/me]}return wt.invert=function(Ut,Zt){var qt=(D-1)/(D-1-Zt*Ct);return q.invert(qt*Ut,qt*Zt*st)},wt}var ni=function(){var W=2,q=0,st=u.geoProjectionMutator(Zr),Ct=st(W,q);return Ct.distance=function(wt){return arguments.length?st(W=+wt,q):W},Ct.tilt=function(wt){return arguments.length?st(W,q=wt*Z):q*F},Ct.scale(432.147).clipAngle(Y(1/W)*F-1e-6)},zr=1e-4,ci=1e4,xr=-180,Kt=xr+zr,te=180,Ie=te-zr,_e=-90,Dt=_e+zr,zt=90,oe=zt-zr;function ne(D){return D.length>0}function fe(D){return Math.floor(D*ci)/ci}function Fe(D){return D===_e||D===zt?[0,D]:[xr,fe(D)]}function Ze(D){var W=D[0],q=D[1],st=!1;return W<=Kt?(W=xr,st=!0):W>=Ie&&(W=te,st=!0),q<=Dt?(q=_e,st=!0):q>=oe&&(q=zt,st=!0),st?[W,q]:D}function nn(D){return D.map(Ze)}function Je(D,W,q){for(var st=0,Ct=D.length;st<Ct;++st){var wt=D[st].slice();q.push({index:-1,polygon:W,ring:wt});for(var Ut=0,Zt=wt.length;Ut<Zt;++Ut){var qt=wt[Ut],he=qt[0],me=qt[1];if(he<=Kt||he>=Ie||me<=Dt||me>=oe){wt[Ut]=Ze(qt);for(var De=Ut+1;De<Zt;++De){var Ae=wt[De],Ue=Ae[0],qe=Ae[1];if(Ue>Kt&&Ue<Ie&&qe>Dt&&qe<oe)break}if(De===Ut+1)continue;if(Ut){var rn={index:-1,polygon:W,ring:wt.slice(0,Ut+1)};rn.ring[rn.ring.length-1]=Fe(me),q[q.length-1]=rn}else q.pop();if(De>=Zt)break;q.push({index:-1,polygon:W,ring:wt=wt.slice(De-1)}),wt[0]=Fe(wt[0][1]),Ut=-1,Zt=wt.length}}}}function vn(D){var W,q=D.length,st={},Ct={},wt,Ut,Zt,qt,he;for(W=0;W<q;++W){if(wt=D[W],Ut=wt.ring[0],qt=wt.ring[wt.ring.length-1],Ut[0]===qt[0]&&Ut[1]===qt[1]){wt.polygon.push(wt.ring),D[W]=null;continue}wt.index=W,st[Ut]=Ct[qt]=wt}for(W=0;W<q;++W)if(wt=D[W],wt){if(Ut=wt.ring[0],qt=wt.ring[wt.ring.length-1],Zt=Ct[Ut],he=st[qt],delete st[Ut],delete Ct[qt],Ut[0]===qt[0]&&Ut[1]===qt[1]){wt.polygon.push(wt.ring);continue}Zt?(delete Ct[Ut],delete st[Zt.ring[0]],Zt.ring.pop(),D[Zt.index]=null,wt={index:-1,polygon:Zt.polygon,ring:Zt.ring.concat(wt.ring)},Zt===he?wt.polygon.push(wt.ring):(wt.index=q++,D.push(st[wt.ring[0]]=Ct[wt.ring[wt.ring.length-1]]=wt))):he?(delete st[qt],delete Ct[he.ring[he.ring.length-1]],wt.ring.pop(),wt={index:q++,polygon:he.polygon,ring:wt.ring.concat(he.ring)},D[he.index]=null,D.push(st[wt.ring[0]]=Ct[wt.ring[wt.ring.length-1]]=wt)):(wt.ring.push(wt.ring[0]),wt.polygon.push(wt.ring))}}function fn(D){var W={type:"Feature",geometry:Yn(D.geometry)};return D.id!=null&&(W.id=D.id),D.bbox!=null&&(W.bbox=D.bbox),D.properties!=null&&(W.properties=D.properties),W}function Yn(D){if(D==null)return D;var W,q,st,Ct;switch(D.type){case"GeometryCollection":W={type:"GeometryCollection",geometries:D.geometries.map(Yn)};break;case"Point":W={type:"Point",coordinates:Ze(D.coordinates)};break;case"MultiPoint":case"LineString":W={type:D.type,coordinates:nn(D.coordinates)};break;case"MultiLineString":W={type:"MultiLineString",coordinates:D.coordinates.map(nn)};break;case"Polygon":{var wt=[];Je(D.coordinates,wt,q=[]),vn(q),W={type:"Polygon",coordinates:wt};break}case"MultiPolygon":{q=[],st=-1,Ct=D.coordinates.length;for(var Ut=new Array(Ct);++st<Ct;)Je(D.coordinates[st],Ut[st]=[],q);vn(q),W={type:"MultiPolygon",coordinates:Ut.filter(ne)};break}default:return D}return D.bbox!=null&&(W.bbox=D.bbox),W}var kn=function(W){if(W==null)return W;switch(W.type){case"Feature":return fn(W);case"FeatureCollection":{var q={type:"FeatureCollection",features:W.features.map(fn)};return W.bbox!=null&&(q.bbox=W.bbox),q}default:return Yn(W)}};function Vn(D,W){var q=_(W/2),st=m(P*q);return[D*(.74482-.34588*st*st),1.70711*q]}Vn.invert=function(D,W){var q=W/1.70711,st=m(P*q);return[D/(.74482-.34588*st*st),2*r(q)]};var Gn=function(){return u.geoProjection(Vn).scale(146.153)},hr=function(W,q,st){var Ct=u.geoInterpolate(q,st),wt=Ct(.5),Ut=u.geoRotation([-wt[0],-wt[1]])(q),Zt=Ct.distance/2,qt=-U(m(Ut[1]*Z)/m(Zt)),he=[-wt[0],-wt[1],-(Ut[0]>0?y-qt:qt)*F],me=u.geoProjection(W(Zt)).rotate(he),De=u.geoRotation(he),Ae=me.center;return delete me.rotate,me.center=function(Ue){return arguments.length?Ae(De(Ue)):De.invert(Ae())},me.clipAngle(90)};function mr(D){var W=n(D);function q(st,Ct){var wt=u.geoGnomonicRaw(st,Ct);return wt[0]*=W,wt}return q.invert=function(st,Ct){return u.geoGnomonicRaw.invert(st/W,Ct)},q}function Yr(){return gi([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function gi(D,W){return hr(mr,D,W)}function Br(D){if(!(D*=2))return u.geoAzimuthalEquidistantRaw;var W=-D/2,q=-W,st=D*D,Ct=_(q),wt=.5/m(q);function Ut(Zt,qt){var he=Y(n(qt)*n(Zt-W)),me=Y(n(qt)*n(Zt-q)),De=qt<0?-1:1;return he*=he,me*=me,[(he-me)/(2*D),De*J(4*st*me-(st-he+me)*(st-he+me))/(2*D)]}return Ut.invert=function(Zt,qt){var he=qt*qt,me=n(J(he+(Ae=Zt+W)*Ae)),De=n(J(he+(Ae=Zt+q)*Ae)),Ae,Ue;return[h(Ue=me-De,Ae=(me+De)*Ct),(qt<0?-1:1)*Y(J(Ae*Ae+Ue*Ue)*wt)]},Ut}function ai(){return fi([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function fi(D,W){return hr(Br,D,W)}function Zi(D,W){if(c(W)<M)return[D,0];var q=c(W/S),st=U(q);if(c(D)<M||c(c(W)-S)<M)return[0,g(W)*y*_(st/2)];var Ct=n(st),wt=c(y/D-D/y)/2,Ut=wt*wt,Zt=Ct/(q+Ct-1),qt=Zt*(2/q-1),he=qt*qt,me=he+Ut,De=Zt-he,Ae=Ut+Zt;return[g(D)*y*(wt*De+J(Ut*De*De-me*(Zt*Zt-he)))/me,g(W)*y*(qt*Ae-wt*J((Ut+1)*me-Ae*Ae))/me]}Zi.invert=function(D,W){if(c(W)<M)return[D,0];if(c(D)<M)return[0,S*m(2*r(W/y))];var q=(D/=y)*D,st=(W/=y)*W,Ct=q+st,wt=Ct*Ct,Ut=-c(W)*(1+Ct),Zt=Ut-2*st+q,qt=-2*Ut+1+2*st+wt,he=st/qt+(2*Zt*Zt*Zt/(qt*qt*qt)-9*Ut*Zt/(qt*qt))/27,me=(Ut-Zt*Zt/(3*qt))/qt,De=2*J(-me/3),Ae=Y(3*he/(me*De))/3;return[y*(Ct-1+J(1+2*(q-st)+wt))/(2*D),g(W)*y*(-De*n(Ae+y/3)-Zt/(3*qt))]};var Ri=function(){return u.geoProjection(Zi).scale(79.4183)};function Sa(D,W){if(c(W)<M)return[D,0];var q=c(W/S),st=U(q);if(c(D)<M||c(c(W)-S)<M)return[0,g(W)*y*_(st/2)];var Ct=n(st),wt=c(y/D-D/y)/2,Ut=wt*wt,Zt=Ct*(J(1+Ut)-wt*Ct)/(1+Ut*q*q);return[g(D)*y*Zt,g(W)*y*J(1-Zt*(2*wt+Zt))]}Sa.invert=function(D,W){if(!D)return[0,S*m(2*r(W/y))];var q=c(D/y),st=(1-q*q-(W/=y)*W)/(2*q),Ct=st*st,wt=J(Ct+1);return[g(D)*y*(wt-st),g(W)*S*m(2*h(J((1-2*st*q)*(st+wt)-q),J(wt+st+q)))]};var ya=function(){return u.geoProjection(Sa).scale(79.4183)};function _a(D,W){if(c(W)<M)return[D,0];var q=W/S,st=U(q);if(c(D)<M||c(c(W)-S)<M)return[0,y*_(st/2)];var Ct=(y/D-D/y)/2,wt=q/(1+n(st));return[y*(g(D)*J(Ct*Ct+1-wt*wt)-Ct),y*wt]}_a.invert=function(D,W){if(!W)return[D,0];var q=W/y,st=(y*y*(1-q*q)-D*D)/(2*y*D);return[D?y*(g(D)*J(st*st+1)-st):0,S*m(2*r(q))]};var ei=function(){return u.geoProjection(_a).scale(79.4183)};function Ea(D,W){if(!W)return[D,0];var q=c(W);if(!D||q===S)return[0,W];var st=q/S,Ct=st*st,wt=(8*st-Ct*(Ct+2)-5)/(2*Ct*(st-1)),Ut=wt*wt,Zt=st*wt,qt=Ct+Ut+2*Zt,he=st+3*wt,me=D/S,De=me+1/me,Ae=g(c(D)-S)*J(De*De-4),Ue=Ae*Ae,qe=qt*(Ct+Ut*Ue-1)+(1-Ct)*(Ct*(he*he+4*Ut)+12*Zt*Ut+4*Ut*Ut),rn=(Ae*(qt+Ut-1)+2*J(qe))/(4*qt+Ue);return[g(D)*S*rn,g(W)*S*J(1+Ae*c(rn)-rn*rn)]}Ea.invert=function(D,W){var q;if(!D||!W)return[D,W];W/=y;var st=g(D)*D/S,Ct=(st*st-1+4*W*W)/c(st),wt=Ct*Ct,Ut=2*W,Zt=50;do{var qt=Ut*Ut,he=(8*Ut-qt*(qt+2)-5)/(2*qt*(Ut-1)),me=(3*Ut-qt*Ut-10)/(2*qt*Ut),De=he*he,Ae=Ut*he,Ue=Ut+he,qe=Ue*Ue,rn=Ut+3*he,Xn=qe*(qt+De*wt-1)+(1-qt)*(qt*(rn*rn+4*De)+De*(12*Ae+4*De)),Un=-2*Ue*(4*Ae*De+(1-4*qt+3*qt*qt)*(1+me)+De*(-6+14*qt-wt+(-8+8*qt-2*wt)*me)+Ae*(-8+12*qt+(-10+10*qt-wt)*me)),gr=J(Xn),Mr=Ct*(qe+De-1)+2*gr-st*(4*qe+wt),Qr=Ct*(2*he*me+2*Ue*(1+me))+Un/gr-8*Ue*(Ct*(-1+De+qe)+2*gr)*(1+me)/(wt+4*qe);Ut-=q=Mr/Qr}while(q>M&&--Zt>0);return[g(D)*(J(Ct*Ct+4)+Ct)*y/4,S*Ut]};var ka=function(){return u.geoProjection(Ea).scale(127.16)},Ga=4*y+3*J(3),Ii=2*J(2*y*J(3)/Ga),Ia=it(Ii*J(3)/y,Ii,Ga/6),yo=function(){return u.geoProjection(Ia).scale(176.84)};function zs(D,W){return[D*J(1-3*W*W/(y*y)),W]}zs.invert=function(D,W){return[D/J(1-3*W*W/(y*y)),W]};var Ts=function(){return u.geoProjection(zs).scale(152.63)};function el(D,W){var q=.90631*m(W),st=J(1-q*q),Ct=J(2/(1+st*n(D/=3)));return[2.66723*st*Ct*m(D),1.24104*q*Ct]}el.invert=function(D,W){var q=D/2.66723,st=W/1.24104,Ct=J(q*q+st*st),wt=2*U(Ct/2);return[3*h(D*_(wt),2.66723*Ct),Ct&&U(W*m(wt)/(1.24104*.90631*Ct))]};var Mu=function(){return u.geoProjection(el).scale(172.632)};function j(D,W){var q=n(W),st=n(D)*q,Ct=1-st,wt=n(D=h(m(D)*q,-m(W))),Ut=m(D);return q=J(1-st*st),[Ut*q-wt*Ct,-wt*q-Ut*Ct]}j.invert=function(D,W){var q=(D*D+W*W)/-2,st=J(-q*(2+q)),Ct=W*q+D*st,wt=D*q-W*st,Ut=J(wt*wt+Ct*Ct);return[h(st*Ct,Ut*(1+q)),Ut?-U(st*wt/Ut):0]};var I=function(){return u.geoProjection(j).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)};function w(D,W){var q=St(D,W);return[(q[0]+D/S)/2,(q[1]+W)/2]}w.invert=function(D,W){var q=D,st=W,Ct=25;do{var wt=n(st),Ut=m(st),Zt=m(2*st),qt=Ut*Ut,he=wt*wt,me=m(q),De=n(q/2),Ae=m(q/2),Ue=Ae*Ae,qe=1-he*De*De,rn=qe?Y(wt*De)*J(Xn=1/qe):Xn=0,Xn,Un=.5*(2*rn*wt*Ae+q/S)-D,gr=.5*(rn*Ut+st)-W,Mr=.5*Xn*(he*Ue+rn*wt*De*qt)+.5/S,Qr=Xn*(me*Zt/4-rn*Ut*Ae),Vr=.125*Xn*(Zt*Ae-rn*Ut*he*me),_i=.5*Xn*(qt*De+rn*Ue*wt)+.5,Di=Qr*Vr-_i*Mr,Wi=(gr*Qr-Un*_i)/Di,Xi=(Un*Vr-gr*Mr)/Di;q-=Wi,st-=Xi}while((c(Wi)>M||c(Xi)>M)&&--Ct>0);return[q,st]};var B=function(){return u.geoProjection(w).scale(158.837)};t.geoAiry=Ot,t.geoAiryRaw=Ft,t.geoAitoff=xt,t.geoAitoffRaw=St,t.geoArmadillo=nt,t.geoArmadilloRaw=At,t.geoAugust=z,t.geoAugustRaw=Mt,t.geoBaker=at,t.geoBakerRaw=et,t.geoBerghaus=k,t.geoBerghausRaw=gt,t.geoBoggs=ee,t.geoBoggsRaw=$t,t.geoBonne=je,t.geoBonneRaw=le,t.geoBottomley=We,t.geoBottomleyRaw=Oe,t.geoBromley=wn,t.geoBromleyRaw=Ye,t.geoChamberlin=pr,t.geoChamberlinRaw=en,t.geoChamberlinAfrica=jn,t.geoCollignon=Ce,t.geoCollignonRaw=di,t.geoCraig=Qt,t.geoCraigRaw=Me,t.geoCraster=re,t.geoCrasterRaw=Vt,t.geoCylindricalEqualArea=ue,t.geoCylindricalEqualAreaRaw=Te,t.geoCylindricalStereographic=Ke,t.geoCylindricalStereographicRaw=xe,t.geoEckert1=tr,t.geoEckert1Raw=Rn,t.geoEckert2=dn,t.geoEckert2Raw=Pn,t.geoEckert3=or,t.geoEckert3Raw=Ar,t.geoEckert4=Pr,t.geoEckert4Raw=cn,t.geoEckert5=Re,t.geoEckert5Raw=Sr,t.geoEckert6=Ve,t.geoEckert6Raw=$e,t.geoEisenlohr=Nn,t.geoEisenlohrRaw=xn,t.geoFahey=$n,t.geoFaheyRaw=Dn,t.geoFoucaut=_n,t.geoFoucautRaw=Hn,t.geoGilbert=Fr,t.geoGingery=eo,t.geoGingeryRaw=Ei,t.geoGinzburg4=io,t.geoGinzburg4Raw=Do,t.geoGinzburg5=Ko,t.geoGinzburg5Raw=ds,t.geoGinzburg6=bs,t.geoGinzburg6Raw=jo,t.geoGinzburg8=Xo,t.geoGinzburg8Raw=Ra,t.geoGinzburg9=qs,t.geoGinzburg9Raw=Bo,t.geoGringorten=se,t.geoGringortenRaw=so,t.geoGuyou=Si,t.geoGuyouRaw=rr,t.geoHammer=sa,t.geoHammerRaw=Oi,t.geoHammerRetroazimuthal=Eo,t.geoHammerRetroazimuthalRaw=qa,t.geoHealpix=Po,t.geoHealpixRaw=co,t.geoHill=ko,t.geoHillRaw=ls,t.geoHomolosine=ja,t.geoHomolosineRaw=ss,t.geoInterrupt=Ui,t.geoInterruptedBoggs=go,t.geoInterruptedHomolosine=ea,t.geoInterruptedMollweide=Ns,t.geoInterruptedMollweideHemispheres=Ka,t.geoInterruptedSinuMollweide=Jo,t.geoInterruptedSinusoidal=tu,t.geoKavrayskiy7=vs,t.geoKavrayskiy7Raw=_s,t.geoLagrange=ws,t.geoLagrangeRaw=ts,t.geoLarrivee=Bu,t.geoLarriveeRaw=Ou,t.geoLaskowski=eu,t.geoLaskowskiRaw=So,t.geoLittrow=Yu,t.geoLittrowRaw=Nu,t.geoLoximuthal=Fu,t.geoLoximuthalRaw=al,t.geoMiller=Ua,t.geoMillerRaw=Oo,t.geoModifiedStereographic=Xa,t.geoModifiedStereographicRaw=ba,t.geoModifiedStereographicAlaska=Is,t.geoModifiedStereographicGs48=su,t.geoModifiedStereographicGs50=Fo,t.geoModifiedStereographicMiller=Ku,t.geoModifiedStereographicLee=Xs,t.geoMollweide=Et,t.geoMollweideRaw=X,t.geoMtFlatPolarParabolic=yc,t.geoMtFlatPolarParabolicRaw=xl,t.geoMtFlatPolarQuartic=oo,t.geoMtFlatPolarQuarticRaw=Tl,t.geoMtFlatPolarSinusoidal=bl,t.geoMtFlatPolarSinusoidalRaw=wu,t.geoNaturalEarth=zu,t.geoNaturalEarthRaw=nu,t.geoNaturalEarth2=bu,t.geoNaturalEarth2Raw=xu,t.geoNellHammer=cs,t.geoNellHammerRaw=Js,t.geoPatterson=Ls,t.geoPattersonRaw=Ju,t.geoPolyconic=sc,t.geoPolyconicRaw=El,t.geoPolyhedral=Ul,t.geoPolyhedralButterfly=Gs,t.geoPolyhedralCollignon=Qu,t.geoPolyhedralWaterman=xc,t.geoProject=us,t.geoGringortenQuincuncial=Lu,t.geoPeirceQuincuncial=$s,t.geoPierceQuincuncial=$s,t.geoQuantize=we,t.geoQuincuncial=Iu,t.geoRectangularPolyconic=hn,t.geoRectangularPolyconicRaw=Pe,t.geoRobinson=fr,t.geoRobinsonRaw=On,t.geoSatellite=ni,t.geoSatelliteRaw=Zr,t.geoSinuMollweide=Bs,t.geoSinuMollweideRaw=Za,t.geoSinusoidal=ae,t.geoSinusoidalRaw=Wt,t.geoStitch=kn,t.geoTimes=Gn,t.geoTimesRaw=Vn,t.geoTwoPointAzimuthal=gi,t.geoTwoPointAzimuthalRaw=mr,t.geoTwoPointAzimuthalUsa=Yr,t.geoTwoPointEquidistant=fi,t.geoTwoPointEquidistantRaw=Br,t.geoTwoPointEquidistantUsa=ai,t.geoVanDerGrinten=Ri,t.geoVanDerGrintenRaw=Zi,t.geoVanDerGrinten2=ya,t.geoVanDerGrinten2Raw=Sa,t.geoVanDerGrinten3=ei,t.geoVanDerGrinten3Raw=_a,t.geoVanDerGrinten4=ka,t.geoVanDerGrinten4Raw=Ea,t.geoWagner4=yo,t.geoWagner4Raw=Ia,t.geoWagner6=Ts,t.geoWagner6Raw=zs,t.geoWagner7=Mu,t.geoWagner7Raw=el,t.geoWiechel=I,t.geoWiechelRaw=j,t.geoWinkel3=B,t.geoWinkel3Raw=w,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo@1.12.1@d3-geo/dist/d3-geo.js":function(E,T,e){(function(t,u){u(T,e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(t,u){"use strict";function s(){return new c}function c(){this.reset()}c.prototype={constructor:c,reset:function(){this.s=this.t=0},add:function(zt){h(r,zt,this.t),h(this,r.s,this.s),this.s?this.t+=r.t:this.s=r.t},valueOf:function(){return this.s}};var r=new c;function h(Dt,zt,oe){var ne=Dt.s=zt+oe,fe=ne-zt,Fe=ne-fe;Dt.t=zt-Fe+(oe-fe)}var n=1e-6,i=1e-12,a=Math.PI,o=a/2,l=a/4,f=a*2,v=180/a,b=a/180,g=Math.abs,m=Math.atan,_=Math.atan2,M=Math.cos,x=Math.ceil,y=Math.exp,S=Math.log,P=Math.pow,A=Math.sin,O=Math.sign||function(Dt){return Dt>0?1:Dt<0?-1:0},L=Math.sqrt,H=Math.tan;function F(Dt){return Dt>1?0:Dt<-1?a:Math.acos(Dt)}function Z(Dt){return Dt>1?o:Dt<-1?-o:Math.asin(Dt)}function G(Dt){return(Dt=A(Dt/2))*Dt}function U(){}function Y(Dt,zt){Dt&&rt.hasOwnProperty(Dt.type)&&rt[Dt.type](Dt,zt)}var J={Feature:function(zt,oe){Y(zt.geometry,oe)},FeatureCollection:function(zt,oe){for(var ne=zt.features,fe=-1,Fe=ne.length;++fe<Fe;)Y(ne[fe].geometry,oe)}},rt={Sphere:function(zt,oe){oe.sphere()},Point:function(zt,oe){zt=zt.coordinates,oe.point(zt[0],zt[1],zt[2])},MultiPoint:function(zt,oe){for(var ne=zt.coordinates,fe=-1,Fe=ne.length;++fe<Fe;)zt=ne[fe],oe.point(zt[0],zt[1],zt[2])},LineString:function(zt,oe){ft(zt.coordinates,oe,0)},MultiLineString:function(zt,oe){for(var ne=zt.coordinates,fe=-1,Fe=ne.length;++fe<Fe;)ft(ne[fe],oe,0)},Polygon:function(zt,oe){dt(zt.coordinates,oe)},MultiPolygon:function(zt,oe){for(var ne=zt.coordinates,fe=-1,Fe=ne.length;++fe<Fe;)dt(ne[fe],oe)},GeometryCollection:function(zt,oe){for(var ne=zt.geometries,fe=-1,Fe=ne.length;++fe<Fe;)Y(ne[fe],oe)}};function ft(Dt,zt,oe){var ne=-1,fe=Dt.length-oe,Fe;for(zt.lineStart();++ne<fe;)Fe=Dt[ne],zt.point(Fe[0],Fe[1],Fe[2]);zt.lineEnd()}function dt(Dt,zt){var oe=-1,ne=Dt.length;for(zt.polygonStart();++oe<ne;)ft(Dt[oe],zt,1);zt.polygonEnd()}function ut(Dt,zt){Dt&&J.hasOwnProperty(Dt.type)?J[Dt.type](Dt,zt):Y(Dt,zt)}var Lt=s(),Ft=s(),Ot,St,xt,At,nt,Mt={point:U,lineStart:U,lineEnd:U,polygonStart:function(){Lt.reset(),Mt.lineStart=z,Mt.lineEnd=Q},polygonEnd:function(){var zt=+Lt;Ft.add(zt<0?f+zt:zt),this.lineStart=this.lineEnd=this.point=U},sphere:function(){Ft.add(f)}};function z(){Mt.point=ht}function Q(){et(Ot,St)}function ht(Dt,zt){Mt.point=et,Ot=Dt,St=zt,Dt*=b,zt*=b,xt=Dt,At=M(zt=zt/2+l),nt=A(zt)}function et(Dt,zt){Dt*=b,zt*=b,zt=zt/2+l;var oe=Dt-xt,ne=oe>=0?1:-1,fe=ne*oe,Fe=M(zt),Ze=A(zt),nn=nt*Ze,Je=At*Fe+nn*M(fe),vn=nn*ne*A(fe);Lt.add(_(vn,Je)),xt=Dt,At=Fe,nt=Ze}function at(Dt){return Ft.reset(),ut(Dt,Mt),Ft*2}function gt(Dt){return[_(Dt[1],Dt[0]),Z(Dt[2])]}function k(Dt){var zt=Dt[0],oe=Dt[1],ne=M(oe);return[ne*M(zt),ne*A(zt),A(oe)]}function ot(Dt,zt){return Dt[0]*zt[0]+Dt[1]*zt[1]+Dt[2]*zt[2]}function it(Dt,zt){return[Dt[1]*zt[2]-Dt[2]*zt[1],Dt[2]*zt[0]-Dt[0]*zt[2],Dt[0]*zt[1]-Dt[1]*zt[0]]}function X(Dt,zt){Dt[0]+=zt[0],Dt[1]+=zt[1],Dt[2]+=zt[2]}function Et(Dt,zt){return[Dt[0]*zt,Dt[1]*zt,Dt[2]*zt]}function vt(Dt){var zt=L(Dt[0]*Dt[0]+Dt[1]*Dt[1]+Dt[2]*Dt[2]);Dt[0]/=zt,Dt[1]/=zt,Dt[2]/=zt}var Nt,$t,ee,kt,Wt,ae,le,je,Oe=s(),We,Ye,wn={point:er,lineStart:on,lineEnd:en,polygonStart:function(){wn.point=An,wn.lineStart=jn,wn.lineEnd=pr,Oe.reset(),Mt.polygonStart()},polygonEnd:function(){Mt.polygonEnd(),wn.point=er,wn.lineStart=on,wn.lineEnd=en,Lt<0?(Nt=-(ee=180),$t=-(kt=90)):Oe>n?kt=90:Oe<-n&&($t=-90),Ye[0]=Nt,Ye[1]=ee},sphere:function(){Nt=-(ee=180),$t=-(kt=90)}};function er(Dt,zt){We.push(Ye=[Nt=Dt,ee=Dt]),zt<$t&&($t=zt),zt>kt&&(kt=zt)}function wr(Dt,zt){var oe=k([Dt*b,zt*b]);if(je){var ne=it(je,oe),fe=[ne[1],-ne[0],0],Fe=it(fe,ne);vt(Fe),Fe=gt(Fe);var Ze=Dt-Wt,nn=Ze>0?1:-1,Je=Fe[0]*v*nn,vn,fn=g(Ze)>180;fn^(nn*Wt<Je&&Je<nn*Dt)?(vn=Fe[1]*v,vn>kt&&(kt=vn)):(Je=(Je+360)%360-180,fn^(nn*Wt<Je&&Je<nn*Dt)?(vn=-Fe[1]*v,vn<$t&&($t=vn)):(zt<$t&&($t=zt),zt>kt&&(kt=zt))),fn?Dt<Wt?di(Nt,Dt)>di(Nt,ee)&&(ee=Dt):di(Dt,ee)>di(Nt,ee)&&(Nt=Dt):ee>=Nt?(Dt<Nt&&(Nt=Dt),Dt>ee&&(ee=Dt)):Dt>Wt?di(Nt,Dt)>di(Nt,ee)&&(ee=Dt):di(Dt,ee)>di(Nt,ee)&&(Nt=Dt)}else We.push(Ye=[Nt=Dt,ee=Dt]);zt<$t&&($t=zt),zt>kt&&(kt=zt),je=oe,Wt=Dt}function on(){wn.point=wr}function en(){Ye[0]=Nt,Ye[1]=ee,wn.point=er,je=null}function An(Dt,zt){if(je){var oe=Dt-Wt;Oe.add(g(oe)>180?oe+(oe>0?360:-360):oe)}else ae=Dt,le=zt;Mt.point(Dt,zt),wr(Dt,zt)}function jn(){Mt.lineStart()}function pr(){An(ae,le),Mt.lineEnd(),g(Oe)>n&&(Nt=-(ee=180)),Ye[0]=Nt,Ye[1]=ee,je=null}function di(Dt,zt){return(zt-=Dt)<0?zt+360:zt}function Ce(Dt,zt){return Dt[0]-zt[0]}function Me(Dt,zt){return Dt[0]<=Dt[1]?Dt[0]<=zt&&zt<=Dt[1]:zt<Dt[0]||Dt[1]<zt}function Qt(Dt){var zt,oe,ne,fe,Fe,Ze,nn;if(kt=ee=-(Nt=$t=Infinity),We=[],ut(Dt,wn),oe=We.length){for(We.sort(Ce),zt=1,ne=We[0],Fe=[ne];zt<oe;++zt)fe=We[zt],Me(ne,fe[0])||Me(ne,fe[1])?(di(ne[0],fe[1])>di(ne[0],ne[1])&&(ne[1]=fe[1]),di(fe[0],ne[1])>di(ne[0],ne[1])&&(ne[0]=fe[0])):Fe.push(ne=fe);for(Ze=-Infinity,oe=Fe.length-1,zt=0,ne=Fe[oe];zt<=oe;ne=fe,++zt)fe=Fe[zt],(nn=di(ne[1],fe[0]))>Ze&&(Ze=nn,Nt=fe[0],ee=ne[1])}return We=Ye=null,Nt===Infinity||$t===Infinity?[[NaN,NaN],[NaN,NaN]]:[[Nt,$t],[ee,kt]]}var pe,Vt,re,Te,ue,xe,Ke,Rn,tr,Pn,dn,Ar,or,cn,Pr,Sr,Re={sphere:U,point:$e,lineStart:En,lineEnd:mn,polygonStart:function(){Re.lineStart=Dn,Re.lineEnd=$n},polygonEnd:function(){Re.lineStart=En,Re.lineEnd=mn}};function $e(Dt,zt){Dt*=b,zt*=b;var oe=M(zt);Ve(oe*M(Dt),oe*A(Dt),A(zt))}function Ve(Dt,zt,oe){++pe,re+=(Dt-re)/pe,Te+=(zt-Te)/pe,ue+=(oe-ue)/pe}function En(){Re.point=xn}function xn(Dt,zt){Dt*=b,zt*=b;var oe=M(zt);cn=oe*M(Dt),Pr=oe*A(Dt),Sr=A(zt),Re.point=Nn,Ve(cn,Pr,Sr)}function Nn(Dt,zt){Dt*=b,zt*=b;var oe=M(zt),ne=oe*M(Dt),fe=oe*A(Dt),Fe=A(zt),Ze=_(L((Ze=Pr*Fe-Sr*fe)*Ze+(Ze=Sr*ne-cn*Fe)*Ze+(Ze=cn*fe-Pr*ne)*Ze),cn*ne+Pr*fe+Sr*Fe);Vt+=Ze,xe+=Ze*(cn+(cn=ne)),Ke+=Ze*(Pr+(Pr=fe)),Rn+=Ze*(Sr+(Sr=Fe)),Ve(cn,Pr,Sr)}function mn(){Re.point=$e}function Dn(){Re.point=Hn}function $n(){_n(Ar,or),Re.point=$e}function Hn(Dt,zt){Ar=Dt,or=zt,Dt*=b,zt*=b,Re.point=_n;var oe=M(zt);cn=oe*M(Dt),Pr=oe*A(Dt),Sr=A(zt),Ve(cn,Pr,Sr)}function _n(Dt,zt){Dt*=b,zt*=b;var oe=M(zt),ne=oe*M(Dt),fe=oe*A(Dt),Fe=A(zt),Ze=Pr*Fe-Sr*fe,nn=Sr*ne-cn*Fe,Je=cn*fe-Pr*ne,vn=L(Ze*Ze+nn*nn+Je*Je),fn=Z(vn),Yn=vn&&-fn/vn;tr+=Yn*Ze,Pn+=Yn*nn,dn+=Yn*Je,Vt+=fn,xe+=fn*(cn+(cn=ne)),Ke+=fn*(Pr+(Pr=fe)),Rn+=fn*(Sr+(Sr=Fe)),Ve(cn,Pr,Sr)}function br(Dt){pe=Vt=re=Te=ue=xe=Ke=Rn=tr=Pn=dn=0,ut(Dt,Re);var zt=tr,oe=Pn,ne=dn,fe=zt*zt+oe*oe+ne*ne;return fe<i&&(zt=xe,oe=Ke,ne=Rn,Vt<n&&(zt=re,oe=Te,ne=ue),fe=zt*zt+oe*oe+ne*ne,fe<i)?[NaN,NaN]:[_(oe,zt)*v,Z(ne/L(fe))*v]}function yr(Dt){return function(){return Dt}}function Fr(Dt,zt){function oe(ne,fe){return ne=Dt(ne,fe),zt(ne[0],ne[1])}return Dt.invert&&zt.invert&&(oe.invert=function(ne,fe){return ne=zt.invert(ne,fe),ne&&Dt.invert(ne[0],ne[1])}),oe}function Ei(Dt,zt){return[g(Dt)>a?Dt+Math.round(-Dt/f)*f:Dt,zt]}Ei.invert=Ei;function Ta(Dt,zt,oe){return(Dt%=f)?zt||oe?Fr(eo(Dt),Ho(zt,oe)):eo(Dt):zt||oe?Ho(zt,oe):Ei}function Aa(Dt){return function(zt,oe){return zt+=Dt,[zt>a?zt-f:zt<-a?zt+f:zt,oe]}}function eo(Dt){var zt=Aa(Dt);return zt.invert=Aa(-Dt),zt}function Ho(Dt,zt){var oe=M(Dt),ne=A(Dt),fe=M(zt),Fe=A(zt);function Ze(nn,Je){var vn=M(Je),fn=M(nn)*vn,Yn=A(nn)*vn,kn=A(Je),Vn=kn*oe+fn*ne;return[_(Yn*fe-Vn*Fe,fn*oe-kn*ne),Z(Vn*fe+Yn*Fe)]}return Ze.invert=function(nn,Je){var vn=M(Je),fn=M(nn)*vn,Yn=A(nn)*vn,kn=A(Je),Vn=kn*fe-Yn*Fe;return[_(Yn*fe+kn*Fe,fn*oe+Vn*ne),Z(Vn*oe-fn*ne)]},Ze}function Do(Dt){Dt=Ta(Dt[0]*b,Dt[1]*b,Dt.length>2?Dt[2]*b:0);function zt(oe){return oe=Dt(oe[0]*b,oe[1]*b),oe[0]*=v,oe[1]*=v,oe}return zt.invert=function(oe){return oe=Dt.invert(oe[0]*b,oe[1]*b),oe[0]*=v,oe[1]*=v,oe},zt}function io(Dt,zt,oe,ne,fe,Fe){if(!!oe){var Ze=M(zt),nn=A(zt),Je=ne*oe;fe==null?(fe=zt+ne*f,Fe=zt-Je/2):(fe=ds(Ze,fe),Fe=ds(Ze,Fe),(ne>0?fe<Fe:fe>Fe)&&(fe+=ne*f));for(var vn,fn=fe;ne>0?fn>Fe:fn<Fe;fn-=Je)vn=gt([Ze,-nn*M(fn),-nn*A(fn)]),Dt.point(vn[0],vn[1])}}function ds(Dt,zt){zt=k(zt),zt[0]-=Dt,vt(zt);var oe=F(-zt[1]);return((-zt[2]<0?-oe:oe)+f-n)%f}function Ko(){var Dt=yr([0,0]),zt=yr(90),oe=yr(6),ne,fe,Fe={point:Ze};function Ze(Je,vn){ne.push(Je=fe(Je,vn)),Je[0]*=v,Je[1]*=v}function nn(){var Je=Dt.apply(this,arguments),vn=zt.apply(this,arguments)*b,fn=oe.apply(this,arguments)*b;return ne=[],fe=Ta(-Je[0]*b,-Je[1]*b,0).invert,io(Fe,vn,fn,1),Je={type:"Polygon",coordinates:[ne]},ne=fe=null,Je}return nn.center=function(Je){return arguments.length?(Dt=typeof Je=="function"?Je:yr([+Je[0],+Je[1]]),nn):Dt},nn.radius=function(Je){return arguments.length?(zt=typeof Je=="function"?Je:yr(+Je),nn):zt},nn.precision=function(Je){return arguments.length?(oe=typeof Je=="function"?Je:yr(+Je),nn):oe},nn}function jo(){var Dt=[],zt;return{point:function(ne,fe,Fe){zt.push([ne,fe,Fe])},lineStart:function(){Dt.push(zt=[])},lineEnd:U,rejoin:function(){Dt.length>1&&Dt.push(Dt.pop().concat(Dt.shift()))},result:function(){var ne=Dt;return Dt=[],zt=null,ne}}}function bs(Dt,zt){return g(Dt[0]-zt[0])<n&&g(Dt[1]-zt[1])<n}function Ra(Dt,zt,oe,ne){this.x=Dt,this.z=zt,this.o=oe,this.e=ne,this.v=!1,this.n=this.p=null}function Xo(Dt,zt,oe,ne,fe){var Fe=[],Ze=[],nn,Je;if(Dt.forEach(function(Gn){if(!((hr=Gn.length-1)<=0)){var hr,mr=Gn[0],Yr=Gn[hr],gi;if(bs(mr,Yr)){if(!mr[2]&&!Yr[2]){for(fe.lineStart(),nn=0;nn<hr;++nn)fe.point((mr=Gn[nn])[0],mr[1]);fe.lineEnd();return}Yr[0]+=2*n}Fe.push(gi=new Ra(mr,Gn,null,!0)),Ze.push(gi.o=new Ra(mr,null,gi,!1)),Fe.push(gi=new Ra(Yr,Gn,null,!1)),Ze.push(gi.o=new Ra(Yr,null,gi,!0))}}),!!Fe.length){for(Ze.sort(zt),Bo(Fe),Bo(Ze),nn=0,Je=Ze.length;nn<Je;++nn)Ze[nn].e=oe=!oe;for(var vn=Fe[0],fn,Yn;;){for(var kn=vn,Vn=!0;kn.v;)if((kn=kn.n)===vn)return;fn=kn.z,fe.lineStart();do{if(kn.v=kn.o.v=!0,kn.e){if(Vn)for(nn=0,Je=fn.length;nn<Je;++nn)fe.point((Yn=fn[nn])[0],Yn[1]);else ne(kn.x,kn.n.x,1,fe);kn=kn.n}else{if(Vn)for(fn=kn.p.z,nn=fn.length-1;nn>=0;--nn)fe.point((Yn=fn[nn])[0],Yn[1]);else ne(kn.x,kn.p.x,-1,fe);kn=kn.p}kn=kn.o,fn=kn.z,Vn=!Vn}while(!kn.v);fe.lineEnd()}}}function Bo(Dt){if(!!(zt=Dt.length)){for(var zt,oe=0,ne=Dt[0],fe;++oe<zt;)ne.n=fe=Dt[oe],fe.p=ne,ne=fe;ne.n=fe=Dt[0],fe.p=ne}}var qs=s();function ao(Dt){return g(Dt[0])<=a?Dt[0]:O(Dt[0])*((g(Dt[0])+a)%f-a)}function so(Dt,zt){var oe=ao(zt),ne=zt[1],fe=A(ne),Fe=[A(oe),-M(oe),0],Ze=0,nn=0;qs.reset(),fe===1?ne=o+n:fe===-1&&(ne=-o-n);for(var Je=0,vn=Dt.length;Je<vn;++Je)if(!!(Yn=(fn=Dt[Je]).length))for(var fn,Yn,kn=fn[Yn-1],Vn=ao(kn),Gn=kn[1]/2+l,hr=A(Gn),mr=M(Gn),Yr=0;Yr<Yn;++Yr,Vn=Br,hr=fi,mr=Zi,kn=gi){var gi=fn[Yr],Br=ao(gi),ai=gi[1]/2+l,fi=A(ai),Zi=M(ai),Ri=Br-Vn,Sa=Ri>=0?1:-1,ya=Sa*Ri,_a=ya>a,ei=hr*fi;if(qs.add(_(ei*Sa*A(ya),mr*Zi+ei*M(ya))),Ze+=_a?Ri+Sa*f:Ri,_a^Vn>=oe^Br>=oe){var Ea=it(k(kn),k(gi));vt(Ea);var ka=it(Fe,Ea);vt(ka);var Ga=(_a^Ri>=0?-1:1)*Z(ka[2]);(ne>Ga||ne===Ga&&(Ea[0]||Ea[1]))&&(nn+=_a^Ri>=0?1:-1)}}return(Ze<-n||Ze<n&&qs<-n)^nn&1}function Hs(Dt,zt,oe,ne){return function(fe){var Fe=zt(fe),Ze=jo(),nn=zt(Ze),Je=!1,vn,fn,Yn,kn={point:Vn,lineStart:hr,lineEnd:mr,polygonStart:function(){kn.point=Yr,kn.lineStart=gi,kn.lineEnd=Br,fn=[],vn=[]},polygonEnd:function(){kn.point=Vn,kn.lineStart=hr,kn.lineEnd=mr,fn=u.merge(fn);var fi=so(vn,ne);fn.length?(Je||(fe.polygonStart(),Je=!0),Xo(fn,se,fi,oe,fe)):fi&&(Je||(fe.polygonStart(),Je=!0),fe.lineStart(),oe(null,null,1,fe),fe.lineEnd()),Je&&(fe.polygonEnd(),Je=!1),fn=vn=null},sphere:function(){fe.polygonStart(),fe.lineStart(),oe(null,null,1,fe),fe.lineEnd(),fe.polygonEnd()}};function Vn(ai,fi){Dt(ai,fi)&&fe.point(ai,fi)}function Gn(ai,fi){Fe.point(ai,fi)}function hr(){kn.point=Gn,Fe.lineStart()}function mr(){kn.point=Vn,Fe.lineEnd()}function Yr(ai,fi){Yn.push([ai,fi]),nn.point(ai,fi)}function gi(){nn.lineStart(),Yn=[]}function Br(){Yr(Yn[0][0],Yn[0][1]),nn.lineEnd();var ai=nn.clean(),fi=Ze.result(),Zi,Ri=fi.length,Sa,ya,_a;if(Yn.pop(),vn.push(Yn),Yn=null,!!Ri){if(ai&1){if(ya=fi[0],(Sa=ya.length-1)>0){for(Je||(fe.polygonStart(),Je=!0),fe.lineStart(),Zi=0;Zi<Sa;++Zi)fe.point((_a=ya[Zi])[0],_a[1]);fe.lineEnd()}return}Ri>1&&ai&2&&fi.push(fi.pop().concat(fi.shift())),fn.push(fi.filter(Ne))}}return kn}}function Ne(Dt){return Dt.length>1}function se(Dt,zt){return((Dt=Dt.x)[0]<0?Dt[1]-o-n:o-Dt[1])-((zt=zt.x)[0]<0?zt[1]-o-n:o-zt[1])}var Yt=Hs(function(){return!0},Ee,Fn,[-a,-o]);function Ee(Dt){var zt=NaN,oe=NaN,ne=NaN,fe;return{lineStart:function(){Dt.lineStart(),fe=1},point:function(Ze,nn){var Je=Ze>0?a:-a,vn=g(Ze-zt);g(vn-a)<n?(Dt.point(zt,oe=(oe+nn)/2>0?o:-o),Dt.point(ne,oe),Dt.lineEnd(),Dt.lineStart(),Dt.point(Je,oe),Dt.point(Ze,oe),fe=0):ne!==Je&&vn>=a&&(g(zt-ne)<n&&(zt-=ne*n),g(Ze-Je)<n&&(Ze-=Je*n),oe=sn(zt,oe,Ze,nn),Dt.point(ne,oe),Dt.lineEnd(),Dt.lineStart(),Dt.point(Je,oe),fe=0),Dt.point(zt=Ze,oe=nn),ne=Je},lineEnd:function(){Dt.lineEnd(),zt=oe=NaN},clean:function(){return 2-fe}}}function sn(Dt,zt,oe,ne){var fe,Fe,Ze=A(Dt-oe);return g(Ze)>n?m((A(zt)*(Fe=M(ne))*A(oe)-A(ne)*(fe=M(zt))*A(Dt))/(fe*Fe*Ze)):(zt+ne)/2}function Fn(Dt,zt,oe,ne){var fe;if(Dt==null)fe=oe*o,ne.point(-a,fe),ne.point(0,fe),ne.point(a,fe),ne.point(a,0),ne.point(a,-fe),ne.point(0,-fe),ne.point(-a,-fe),ne.point(-a,0),ne.point(-a,fe);else if(g(Dt[0]-zt[0])>n){var Fe=Dt[0]<zt[0]?a:-a;fe=oe*Fe/2,ne.point(-Fe,fe),ne.point(0,fe),ne.point(Fe,fe)}else ne.point(zt[0],zt[1])}function rr(Dt){var zt=M(Dt),oe=6*b,ne=zt>0,fe=g(zt)>n;function Fe(fn,Yn,kn,Vn){io(Vn,Dt,oe,kn,fn,Yn)}function Ze(fn,Yn){return M(fn)*M(Yn)>zt}function nn(fn){var Yn,kn,Vn,Gn,hr;return{lineStart:function(){Gn=Vn=!1,hr=1},point:function(Yr,gi){var Br=[Yr,gi],ai,fi=Ze(Yr,gi),Zi=ne?fi?0:vn(Yr,gi):fi?vn(Yr+(Yr<0?a:-a),gi):0;if(!Yn&&(Gn=Vn=fi)&&fn.lineStart(),fi!==Vn&&(ai=Je(Yn,Br),(!ai||bs(Yn,ai)||bs(Br,ai))&&(Br[2]=1)),fi!==Vn)hr=0,fi?(fn.lineStart(),ai=Je(Br,Yn),fn.point(ai[0],ai[1])):(ai=Je(Yn,Br),fn.point(ai[0],ai[1],2),fn.lineEnd()),Yn=ai;else if(fe&&Yn&&ne^fi){var Ri;!(Zi&kn)&&(Ri=Je(Br,Yn,!0))&&(hr=0,ne?(fn.lineStart(),fn.point(Ri[0][0],Ri[0][1]),fn.point(Ri[1][0],Ri[1][1]),fn.lineEnd()):(fn.point(Ri[1][0],Ri[1][1]),fn.lineEnd(),fn.lineStart(),fn.point(Ri[0][0],Ri[0][1],3)))}fi&&(!Yn||!bs(Yn,Br))&&fn.point(Br[0],Br[1]),Yn=Br,Vn=fi,kn=Zi},lineEnd:function(){Vn&&fn.lineEnd(),Yn=null},clean:function(){return hr|(Gn&&Vn)<<1}}}function Je(fn,Yn,kn){var Vn=k(fn),Gn=k(Yn),hr=[1,0,0],mr=it(Vn,Gn),Yr=ot(mr,mr),gi=mr[0],Br=Yr-gi*gi;if(!Br)return!kn&&fn;var ai=zt*Yr/Br,fi=-zt*gi/Br,Zi=it(hr,mr),Ri=Et(hr,ai),Sa=Et(mr,fi);X(Ri,Sa);var ya=Zi,_a=ot(Ri,ya),ei=ot(ya,ya),Ea=_a*_a-ei*(ot(Ri,Ri)-1);if(!(Ea<0)){var ka=L(Ea),Ga=Et(ya,(-_a-ka)/ei);if(X(Ga,Ri),Ga=gt(Ga),!kn)return Ga;var Ii=fn[0],Ia=Yn[0],yo=fn[1],zs=Yn[1],Ts;Ia<Ii&&(Ts=Ii,Ii=Ia,Ia=Ts);var el=Ia-Ii,Mu=g(el-a)<n,j=Mu||el<n;if(!Mu&&zs<yo&&(Ts=yo,yo=zs,zs=Ts),j?Mu?yo+zs>0^Ga[1]<(g(Ga[0]-Ii)<n?yo:zs):yo<=Ga[1]&&Ga[1]<=zs:el>a^(Ii<=Ga[0]&&Ga[0]<=Ia)){var I=Et(ya,(-_a+ka)/ei);return X(I,Ri),[Ga,gt(I)]}}}function vn(fn,Yn){var kn=ne?Dt:a-Dt,Vn=0;return fn<-kn?Vn|=1:fn>kn&&(Vn|=2),Yn<-kn?Vn|=4:Yn>kn&&(Vn|=8),Vn}return Hs(Ze,nn,Fe,ne?[0,-Dt]:[-a,Dt-a])}function qn(Dt,zt,oe,ne,fe,Fe){var Ze=Dt[0],nn=Dt[1],Je=zt[0],vn=zt[1],fn=0,Yn=1,kn=Je-Ze,Vn=vn-nn,Gn;if(Gn=oe-Ze,!(!kn&&Gn>0)){if(Gn/=kn,kn<0){if(Gn<fn)return;Gn<Yn&&(Yn=Gn)}else if(kn>0){if(Gn>Yn)return;Gn>fn&&(fn=Gn)}if(Gn=fe-Ze,!(!kn&&Gn<0)){if(Gn/=kn,kn<0){if(Gn>Yn)return;Gn>fn&&(fn=Gn)}else if(kn>0){if(Gn<fn)return;Gn<Yn&&(Yn=Gn)}if(Gn=ne-nn,!(!Vn&&Gn>0)){if(Gn/=Vn,Vn<0){if(Gn<fn)return;Gn<Yn&&(Yn=Gn)}else if(Vn>0){if(Gn>Yn)return;Gn>fn&&(fn=Gn)}if(Gn=Fe-nn,!(!Vn&&Gn<0)){if(Gn/=Vn,Vn<0){if(Gn>Yn)return;Gn>fn&&(fn=Gn)}else if(Vn>0){if(Gn<fn)return;Gn<Yn&&(Yn=Gn)}return fn>0&&(Dt[0]=Ze+fn*kn,Dt[1]=nn+fn*Vn),Yn<1&&(zt[0]=Ze+Yn*kn,zt[1]=nn+Yn*Vn),!0}}}}}var Xr=1e9,Si=-Xr;function Oi(Dt,zt,oe,ne){function fe(vn,fn){return Dt<=vn&&vn<=oe&&zt<=fn&&fn<=ne}function Fe(vn,fn,Yn,kn){var Vn=0,Gn=0;if(vn==null||(Vn=Ze(vn,Yn))!==(Gn=Ze(fn,Yn))||Je(vn,fn)<0^Yn>0)do kn.point(Vn===0||Vn===3?Dt:oe,Vn>1?ne:zt);while((Vn=(Vn+Yn+4)%4)!==Gn);else kn.point(fn[0],fn[1])}function Ze(vn,fn){return g(vn[0]-Dt)<n?fn>0?0:3:g(vn[0]-oe)<n?fn>0?2:1:g(vn[1]-zt)<n?fn>0?1:0:fn>0?3:2}function nn(vn,fn){return Je(vn.x,fn.x)}function Je(vn,fn){var Yn=Ze(vn,1),kn=Ze(fn,1);return Yn!==kn?Yn-kn:Yn===0?fn[1]-vn[1]:Yn===1?vn[0]-fn[0]:Yn===2?vn[1]-fn[1]:fn[0]-vn[0]}return function(vn){var fn=vn,Yn=jo(),kn,Vn,Gn,hr,mr,Yr,gi,Br,ai,fi,Zi,Ri={point:Sa,lineStart:Ea,lineEnd:ka,polygonStart:_a,polygonEnd:ei};function Sa(Ii,Ia){fe(Ii,Ia)&&fn.point(Ii,Ia)}function ya(){for(var Ii=0,Ia=0,yo=Vn.length;Ia<yo;++Ia)for(var zs=Vn[Ia],Ts=1,el=zs.length,Mu=zs[0],j,I,w=Mu[0],B=Mu[1];Ts<el;++Ts)j=w,I=B,Mu=zs[Ts],w=Mu[0],B=Mu[1],I<=ne?B>ne&&(w-j)*(ne-I)>(B-I)*(Dt-j)&&++Ii:B<=ne&&(w-j)*(ne-I)<(B-I)*(Dt-j)&&--Ii;return Ii}function _a(){fn=Yn,kn=[],Vn=[],Zi=!0}function ei(){var Ii=ya(),Ia=Zi&&Ii,yo=(kn=u.merge(kn)).length;(Ia||yo)&&(vn.polygonStart(),Ia&&(vn.lineStart(),Fe(null,null,1,vn),vn.lineEnd()),yo&&Xo(kn,nn,Ii,Fe,vn),vn.polygonEnd()),fn=vn,kn=Vn=Gn=null}function Ea(){Ri.point=Ga,Vn&&Vn.push(Gn=[]),fi=!0,ai=!1,gi=Br=NaN}function ka(){kn&&(Ga(hr,mr),Yr&&ai&&Yn.rejoin(),kn.push(Yn.result())),Ri.point=Sa,ai&&fn.lineEnd()}function Ga(Ii,Ia){var yo=fe(Ii,Ia);if(Vn&&Gn.push([Ii,Ia]),fi)hr=Ii,mr=Ia,Yr=yo,fi=!1,yo&&(fn.lineStart(),fn.point(Ii,Ia));else if(yo&&ai)fn.point(Ii,Ia);else{var zs=[gi=Math.max(Si,Math.min(Xr,gi)),Br=Math.max(Si,Math.min(Xr,Br))],Ts=[Ii=Math.max(Si,Math.min(Xr,Ii)),Ia=Math.max(Si,Math.min(Xr,Ia))];qn(zs,Ts,Dt,zt,oe,ne)?(ai||(fn.lineStart(),fn.point(zs[0],zs[1])),fn.point(Ts[0],Ts[1]),yo||fn.lineEnd(),Zi=!1):yo&&(fn.lineStart(),fn.point(Ii,Ia),Zi=!1)}gi=Ii,Br=Ia,ai=yo}return Ri}}function Gi(){var Dt=0,zt=0,oe=960,ne=500,fe,Fe,Ze;return Ze={stream:function(Je){return fe&&Fe===Je?fe:fe=Oi(Dt,zt,oe,ne)(Fe=Je)},extent:function(Je){return arguments.length?(Dt=+Je[0][0],zt=+Je[0][1],oe=+Je[1][0],ne=+Je[1][1],fe=Fe=null,Ze):[[Dt,zt],[oe,ne]]}}}var sa=s(),qa,Oa,Eo,Ba={sphere:U,point:U,lineStart:uo,lineEnd:U,polygonStart:U,polygonEnd:U};function uo(){Ba.point=Ja,Ba.lineEnd=co}function co(){Ba.point=Ba.lineEnd=U}function Ja(Dt,zt){Dt*=b,zt*=b,qa=Dt,Oa=A(zt),Eo=M(zt),Ba.point=Po}function Po(Dt,zt){Dt*=b,zt*=b;var oe=A(zt),ne=M(zt),fe=g(Dt-qa),Fe=M(fe),Ze=A(fe),nn=ne*Ze,Je=Eo*oe-Oa*ne*Fe,vn=Oa*oe+Eo*ne*Fe;sa.add(_(L(nn*nn+Je*Je),vn)),qa=Dt,Oa=oe,Eo=ne}function ls(Dt){return sa.reset(),ut(Dt,Ba),+sa}var ko=[null,null],Es={type:"LineString",coordinates:ko};function Co(Dt,zt){return ko[0]=Dt,ko[1]=zt,ls(Es)}var Za={Feature:function(zt,oe){return ss(zt.geometry,oe)},FeatureCollection:function(zt,oe){for(var ne=zt.features,fe=-1,Fe=ne.length;++fe<Fe;)if(ss(ne[fe].geometry,oe))return!0;return!1}},Bs={Sphere:function(){return!0},Point:function(zt,oe){return ja(zt.coordinates,oe)},MultiPoint:function(zt,oe){for(var ne=zt.coordinates,fe=-1,Fe=ne.length;++fe<Fe;)if(ja(ne[fe],oe))return!0;return!1},LineString:function(zt,oe){return gn(zt.coordinates,oe)},MultiLineString:function(zt,oe){for(var ne=zt.coordinates,fe=-1,Fe=ne.length;++fe<Fe;)if(gn(ne[fe],oe))return!0;return!1},Polygon:function(zt,oe){return cr(zt.coordinates,oe)},MultiPolygon:function(zt,oe){for(var ne=zt.coordinates,fe=-1,Fe=ne.length;++fe<Fe;)if(cr(ne[fe],oe))return!0;return!1},GeometryCollection:function(zt,oe){for(var ne=zt.geometries,fe=-1,Fe=ne.length;++fe<Fe;)if(ss(ne[fe],oe))return!0;return!1}};function ss(Dt,zt){return Dt&&Bs.hasOwnProperty(Dt.type)?Bs[Dt.type](Dt,zt):!1}function ja(Dt,zt){return Co(Dt,zt)===0}function gn(Dt,zt){for(var oe,ne,fe,Fe=0,Ze=Dt.length;Fe<Ze;Fe++){if(ne=Co(Dt[Fe],zt),ne===0||Fe>0&&(fe=Co(Dt[Fe],Dt[Fe-1]),fe>0&&oe<=fe&&ne<=fe&&(oe+ne-fe)*(1-Math.pow((oe-ne)/fe,2))<i*fe))return!0;oe=ne}return!1}function cr(Dt,zt){return!!so(Dt.map(Gr),Ui(zt))}function Gr(Dt){return Dt=Dt.map(Ui),Dt.pop(),Dt}function Ui(Dt){return[Dt[0]*b,Dt[1]*b]}function za(Dt,zt){return(Dt&&Za.hasOwnProperty(Dt.type)?Za[Dt.type]:ss)(Dt,zt)}function go(Dt,zt,oe){var ne=u.range(Dt,zt-n,oe).concat(zt);return function(fe){return ne.map(function(Fe){return[fe,Fe]})}}function fo(Dt,zt,oe){var ne=u.range(Dt,zt-n,oe).concat(zt);return function(fe){return ne.map(function(Fe){return[Fe,fe]})}}function ea(){var Dt,zt,oe,ne,fe,Fe,Ze,nn,Je=10,vn=Je,fn=90,Yn=360,kn,Vn,Gn,hr,mr=2.5;function Yr(){return{type:"MultiLineString",coordinates:gi()}}function gi(){return u.range(x(ne/fn)*fn,oe,fn).map(Gn).concat(u.range(x(nn/Yn)*Yn,Ze,Yn).map(hr)).concat(u.range(x(zt/Je)*Je,Dt,Je).filter(function(Br){return g(Br%fn)>n}).map(kn)).concat(u.range(x(Fe/vn)*vn,fe,vn).filter(function(Br){return g(Br%Yn)>n}).map(Vn))}return Yr.lines=function(){return gi().map(function(Br){return{type:"LineString",coordinates:Br}})},Yr.outline=function(){return{type:"Polygon",coordinates:[Gn(ne).concat(hr(Ze).slice(1),Gn(oe).reverse().slice(1),hr(nn).reverse().slice(1))]}},Yr.extent=function(Br){return arguments.length?Yr.extentMajor(Br).extentMinor(Br):Yr.extentMinor()},Yr.extentMajor=function(Br){return arguments.length?(ne=+Br[0][0],oe=+Br[1][0],nn=+Br[0][1],Ze=+Br[1][1],ne>oe&&(Br=ne,ne=oe,oe=Br),nn>Ze&&(Br=nn,nn=Ze,Ze=Br),Yr.precision(mr)):[[ne,nn],[oe,Ze]]},Yr.extentMinor=function(Br){return arguments.length?(zt=+Br[0][0],Dt=+Br[1][0],Fe=+Br[0][1],fe=+Br[1][1],zt>Dt&&(Br=zt,zt=Dt,Dt=Br),Fe>fe&&(Br=Fe,Fe=fe,fe=Br),Yr.precision(mr)):[[zt,Fe],[Dt,fe]]},Yr.step=function(Br){return arguments.length?Yr.stepMajor(Br).stepMinor(Br):Yr.stepMinor()},Yr.stepMajor=function(Br){return arguments.length?(fn=+Br[0],Yn=+Br[1],Yr):[fn,Yn]},Yr.stepMinor=function(Br){return arguments.length?(Je=+Br[0],vn=+Br[1],Yr):[Je,vn]},Yr.precision=function(Br){return arguments.length?(mr=+Br,kn=go(Fe,fe,90),Vn=fo(zt,Dt,mr),Gn=go(nn,Ze,90),hr=fo(ne,oe,mr),Yr):mr},Yr.extentMajor([[-180,-90+n],[180,90-n]]).extentMinor([[-180,-80-n],[180,80+n]])}function to(){return ea()()}function Ns(Dt,zt){var oe=Dt[0]*b,ne=Dt[1]*b,fe=zt[0]*b,Fe=zt[1]*b,Ze=M(ne),nn=A(ne),Je=M(Fe),vn=A(Fe),fn=Ze*M(oe),Yn=Ze*A(oe),kn=Je*M(fe),Vn=Je*A(fe),Gn=2*Z(L(G(Fe-ne)+Ze*Je*G(fe-oe))),hr=A(Gn),mr=Gn?function(Yr){var gi=A(Yr*=Gn)/hr,Br=A(Gn-Yr)/hr,ai=Br*fn+gi*kn,fi=Br*Yn+gi*Vn,Zi=Br*nn+gi*vn;return[_(fi,ai)*v,_(Zi,L(ai*ai+fi*fi))*v]}:function(){return[oe*v,ne*v]};return mr.distance=Gn,mr}function Ss(Dt){return Dt}var Ka=s(),ou=s(),Jo,Os,tu,_s,vs={point:U,lineStart:U,lineEnd:U,polygonStart:function(){vs.lineStart=ts,vs.lineEnd=Ou},polygonEnd:function(){vs.lineStart=vs.lineEnd=vs.point=U,Ka.add(g(ou)),ou.reset()},result:function(){var zt=Ka/2;return Ka.reset(),zt}};function ts(){vs.point=ws}function ws(Dt,zt){vs.point=Ms,Jo=tu=Dt,Os=_s=zt}function Ms(Dt,zt){ou.add(_s*Dt-tu*zt),tu=Dt,_s=zt}function Ou(){Ms(Jo,Os)}var Bu=Infinity,So=Bu,eu=-Bu,Nu=eu,Yu={point:al,lineStart:U,lineEnd:U,polygonStart:U,polygonEnd:U,result:function(){var zt=[[Bu,So],[eu,Nu]];return eu=Nu=-(So=Bu=Infinity),zt}};function al(Dt,zt){Dt<Bu&&(Bu=Dt),Dt>eu&&(eu=Dt),zt<So&&(So=zt),zt>Nu&&(Nu=zt)}var Fu=0,Oo=0,Ua=0,ba=0,No=0,hu=0,Zu=0,ps=0,$o=0,Is,su,Fo,Ku,Xs={point:Xa,lineStart:yl,lineEnd:yc,polygonStart:function(){Xs.lineStart=Tl,Xs.lineEnd=oo},polygonEnd:function(){Xs.point=Xa,Xs.lineStart=yl,Xs.lineEnd=yc},result:function(){var zt=$o?[Zu/$o,ps/$o]:hu?[ba/hu,No/hu]:Ua?[Fu/Ua,Oo/Ua]:[NaN,NaN];return Fu=Oo=Ua=ba=No=hu=Zu=ps=$o=0,zt}};function Xa(Dt,zt){Fu+=Dt,Oo+=zt,++Ua}function yl(){Xs.point=Hl}function Hl(Dt,zt){Xs.point=xl,Xa(Fo=Dt,Ku=zt)}function xl(Dt,zt){var oe=Dt-Fo,ne=zt-Ku,fe=L(oe*oe+ne*ne);ba+=fe*(Fo+Dt)/2,No+=fe*(Ku+zt)/2,hu+=fe,Xa(Fo=Dt,Ku=zt)}function yc(){Xs.point=Xa}function Tl(){Xs.point=wu}function oo(){bl(Is,su)}function wu(Dt,zt){Xs.point=bl,Xa(Is=Fo=Dt,su=Ku=zt)}function bl(Dt,zt){var oe=Dt-Fo,ne=zt-Ku,fe=L(oe*oe+ne*ne);ba+=fe*(Fo+Dt)/2,No+=fe*(Ku+zt)/2,hu+=fe,fe=Ku*Dt-Fo*zt,Zu+=fe*(Fo+Dt),ps+=fe*(Ku+zt),$o+=fe*3,Xa(Fo=Dt,Ku=zt)}function nu(Dt){this._context=Dt}nu.prototype={_radius:4.5,pointRadius:function(zt){return this._radius=zt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(zt,oe){switch(this._point){case 0:{this._context.moveTo(zt,oe),this._point=1;break}case 1:{this._context.lineTo(zt,oe);break}default:{this._context.moveTo(zt+this._radius,oe),this._context.arc(zt,oe,this._radius,0,f);break}}},result:U};var zu=s(),xu,bu,Js,cs,Ps,ol={point:U,lineStart:function(){ol.point=Al},lineEnd:function(){xu&&Fl(bu,Js),ol.point=U},polygonStart:function(){xu=!0},polygonEnd:function(){xu=null},result:function(){var zt=+zu;return zu.reset(),zt}};function Al(Dt,zt){ol.point=Fl,bu=cs=Dt,Js=Ps=zt}function Fl(Dt,zt){cs-=Dt,Ps-=zt,zu.add(L(cs*cs+Ps*Ps)),cs=Dt,Ps=zt}function Uu(){this._string=[]}Uu.prototype={_radius:4.5,_circle:Xu(4.5),pointRadius:function(zt){return(zt=+zt)!==this._radius&&(this._radius=zt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(zt,oe){switch(this._point){case 0:{this._string.push("M",zt,",",oe),this._point=1;break}case 1:{this._string.push("L",zt,",",oe);break}default:{this._circle==null&&(this._circle=Xu(this._radius)),this._string.push("M",zt,",",oe,this._circle);break}}},result:function(){if(this._string.length){var zt=this._string.join("");return this._string=[],zt}else return null}};function Xu(Dt){return"m0,"+Dt+"a"+Dt+","+Dt+" 0 1,1 0,"+-2*Dt+"a"+Dt+","+Dt+" 0 1,1 0,"+2*Dt+"z"}function sl(Dt,zt){var oe=4.5,ne,fe;function Fe(Ze){return Ze&&(typeof oe=="function"&&fe.pointRadius(+oe.apply(this,arguments)),ut(Ze,ne(fe))),fe.result()}return Fe.area=function(Ze){return ut(Ze,ne(vs)),vs.result()},Fe.measure=function(Ze){return ut(Ze,ne(ol)),ol.result()},Fe.bounds=function(Ze){return ut(Ze,ne(Yu)),Yu.result()},Fe.centroid=function(Ze){return ut(Ze,ne(Xs)),Xs.result()},Fe.projection=function(Ze){return arguments.length?(ne=Ze==null?(Dt=null,Ss):(Dt=Ze).stream,Fe):Dt},Fe.context=function(Ze){return arguments.length?(fe=Ze==null?(zt=null,new Uu):new nu(zt=Ze),typeof oe!="function"&&fe.pointRadius(oe),Fe):zt},Fe.pointRadius=function(Ze){return arguments.length?(oe=typeof Ze=="function"?Ze:(fe.pointRadius(+Ze),+Ze),Fe):oe},Fe.projection(Dt).context(zt)}function Eu(Dt){return{stream:uu(Dt)}}function uu(Dt){return function(zt){var oe=new Ju;for(var ne in Dt)oe[ne]=Dt[ne];return oe.stream=zt,oe}}function Ju(){}Ju.prototype={constructor:Ju,point:function(zt,oe){this.stream.point(zt,oe)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ls(Dt,zt,oe){var ne=Dt.clipExtent&&Dt.clipExtent();return Dt.scale(150).translate([0,0]),ne!=null&&Dt.clipExtent(null),ut(oe,Dt.stream(Yu)),zt(Yu.result()),ne!=null&&Dt.clipExtent(ne),Dt}function El(Dt,zt,oe){return Ls(Dt,function(ne){var fe=zt[1][0]-zt[0][0],Fe=zt[1][1]-zt[0][1],Ze=Math.min(fe/(ne[1][0]-ne[0][0]),Fe/(ne[1][1]-ne[0][1])),nn=+zt[0][0]+(fe-Ze*(ne[1][0]+ne[0][0]))/2,Je=+zt[0][1]+(Fe-Ze*(ne[1][1]+ne[0][1]))/2;Dt.scale(150*Ze).translate([nn,Je])},oe)}function sc(Dt,zt,oe){return El(Dt,[[0,0],zt],oe)}function Cl(Dt,zt,oe){return Ls(Dt,function(ne){var fe=+zt,Fe=fe/(ne[1][0]-ne[0][0]),Ze=(fe-Fe*(ne[1][0]+ne[0][0]))/2,nn=-Fe*ne[0][1];Dt.scale(150*Fe).translate([Ze,nn])},oe)}function zl(Dt,zt,oe){return Ls(Dt,function(ne){var fe=+zt,Fe=fe/(ne[1][1]-ne[0][1]),Ze=-Fe*ne[0][0],nn=(fe-Fe*(ne[1][1]+ne[0][1]))/2;Dt.scale(150*Fe).translate([Ze,nn])},oe)}var Yl=16,dc=M(30*b);function $u(Dt,zt){return+zt?Ul(Dt,zt):Ol(Dt)}function Ol(Dt){return uu({point:function(oe,ne){oe=Dt(oe,ne),this.stream.point(oe[0],oe[1])}})}function Ul(Dt,zt){function oe(ne,fe,Fe,Ze,nn,Je,vn,fn,Yn,kn,Vn,Gn,hr,mr){var Yr=vn-ne,gi=fn-fe,Br=Yr*Yr+gi*gi;if(Br>4*zt&&hr--){var ai=Ze+kn,fi=nn+Vn,Zi=Je+Gn,Ri=L(ai*ai+fi*fi+Zi*Zi),Sa=Z(Zi/=Ri),ya=g(g(Zi)-1)<n||g(Fe-Yn)<n?(Fe+Yn)/2:_(fi,ai),_a=Dt(ya,Sa),ei=_a[0],Ea=_a[1],ka=ei-ne,Ga=Ea-fe,Ii=gi*ka-Yr*Ga;(Ii*Ii/Br>zt||g((Yr*ka+gi*Ga)/Br-.5)>.3||Ze*kn+nn*Vn+Je*Gn<dc)&&(oe(ne,fe,Fe,Ze,nn,Je,ei,Ea,ya,ai/=Ri,fi/=Ri,Zi,hr,mr),mr.point(ei,Ea),oe(ei,Ea,ya,ai,fi,Zi,vn,fn,Yn,kn,Vn,Gn,hr,mr))}}return function(ne){var fe,Fe,Ze,nn,Je,vn,fn,Yn,kn,Vn,Gn,hr,mr={point:Yr,lineStart:gi,lineEnd:ai,polygonStart:function(){ne.polygonStart(),mr.lineStart=fi},polygonEnd:function(){ne.polygonEnd(),mr.lineStart=gi}};function Yr(Sa,ya){Sa=Dt(Sa,ya),ne.point(Sa[0],Sa[1])}function gi(){Yn=NaN,mr.point=Br,ne.lineStart()}function Br(Sa,ya){var _a=k([Sa,ya]),ei=Dt(Sa,ya);oe(Yn,kn,fn,Vn,Gn,hr,Yn=ei[0],kn=ei[1],fn=Sa,Vn=_a[0],Gn=_a[1],hr=_a[2],Yl,ne),ne.point(Yn,kn)}function ai(){mr.point=Yr,ne.lineEnd()}function fi(){gi(),mr.point=Zi,mr.lineEnd=Ri}function Zi(Sa,ya){Br(fe=Sa,ya),Fe=Yn,Ze=kn,nn=Vn,Je=Gn,vn=hr,mr.point=Br}function Ri(){oe(Yn,kn,fn,Vn,Gn,hr,Fe,Ze,fe,nn,Je,vn,Yl,ne),mr.lineEnd=ai,ai()}return mr}}var wo=uu({point:function(zt,oe){this.stream.point(zt*b,oe*b)}});function ho(Dt){return uu({point:function(oe,ne){var fe=Dt(oe,ne);return this.stream.point(fe[0],fe[1])}})}function Sl(Dt,zt,oe,ne,fe){function Fe(Ze,nn){return Ze*=ne,nn*=fe,[zt+Dt*Ze,oe-Dt*nn]}return Fe.invert=function(Ze,nn){return[(Ze-zt)/Dt*ne,(oe-nn)/Dt*fe]},Fe}function ul(Dt,zt,oe,ne,fe,Fe){var Ze=M(Fe),nn=A(Fe),Je=Ze*Dt,vn=nn*Dt,fn=Ze/Dt,Yn=nn/Dt,kn=(nn*oe-Ze*zt)/Dt,Vn=(nn*zt+Ze*oe)/Dt;function Gn(hr,mr){return hr*=ne,mr*=fe,[Je*hr-vn*mr+zt,oe-vn*hr-Je*mr]}return Gn.invert=function(hr,mr){return[ne*(fn*hr-Yn*mr+kn),fe*(Vn-Yn*hr-fn*mr)]},Gn}function Ys(Dt){return Da(function(){return Dt})()}function Da(Dt){var zt,oe=150,ne=480,fe=250,Fe=0,Ze=0,nn=0,Je=0,vn=0,fn,Yn=0,kn=1,Vn=1,Gn=null,hr=Yt,mr=null,Yr,gi,Br,ai=Ss,fi=.5,Zi,Ri,Sa,ya,_a;function ei(Ii){return Sa(Ii[0]*b,Ii[1]*b)}function Ea(Ii){return Ii=Sa.invert(Ii[0],Ii[1]),Ii&&[Ii[0]*v,Ii[1]*v]}ei.stream=function(Ii){return ya&&_a===Ii?ya:ya=wo(ho(fn)(hr(Zi(ai(_a=Ii)))))},ei.preclip=function(Ii){return arguments.length?(hr=Ii,Gn=void 0,Ga()):hr},ei.postclip=function(Ii){return arguments.length?(ai=Ii,mr=Yr=gi=Br=null,Ga()):ai},ei.clipAngle=function(Ii){return arguments.length?(hr=+Ii?rr(Gn=Ii*b):(Gn=null,Yt),Ga()):Gn*v},ei.clipExtent=function(Ii){return arguments.length?(ai=Ii==null?(mr=Yr=gi=Br=null,Ss):Oi(mr=+Ii[0][0],Yr=+Ii[0][1],gi=+Ii[1][0],Br=+Ii[1][1]),Ga()):mr==null?null:[[mr,Yr],[gi,Br]]},ei.scale=function(Ii){return arguments.length?(oe=+Ii,ka()):oe},ei.translate=function(Ii){return arguments.length?(ne=+Ii[0],fe=+Ii[1],ka()):[ne,fe]},ei.center=function(Ii){return arguments.length?(Fe=Ii[0]%360*b,Ze=Ii[1]%360*b,ka()):[Fe*v,Ze*v]},ei.rotate=function(Ii){return arguments.length?(nn=Ii[0]%360*b,Je=Ii[1]%360*b,vn=Ii.length>2?Ii[2]%360*b:0,ka()):[nn*v,Je*v,vn*v]},ei.angle=function(Ii){return arguments.length?(Yn=Ii%360*b,ka()):Yn*v},ei.reflectX=function(Ii){return arguments.length?(kn=Ii?-1:1,ka()):kn<0},ei.reflectY=function(Ii){return arguments.length?(Vn=Ii?-1:1,ka()):Vn<0},ei.precision=function(Ii){return arguments.length?(Zi=$u(Ri,fi=Ii*Ii),Ga()):L(fi)},ei.fitExtent=function(Ii,Ia){return El(ei,Ii,Ia)},ei.fitSize=function(Ii,Ia){return sc(ei,Ii,Ia)},ei.fitWidth=function(Ii,Ia){return Cl(ei,Ii,Ia)},ei.fitHeight=function(Ii,Ia){return zl(ei,Ii,Ia)};function ka(){var Ii=ul(oe,0,0,kn,Vn,Yn).apply(null,zt(Fe,Ze)),Ia=(Yn?ul:Sl)(oe,ne-Ii[0],fe-Ii[1],kn,Vn,Yn);return fn=Ta(nn,Je,vn),Ri=Fr(zt,Ia),Sa=Fr(fn,Ri),Zi=$u(Ri,fi),Ga()}function Ga(){return ya=_a=null,ei}return function(){return zt=Dt.apply(this,arguments),ei.invert=zt.invert&&Ea,ka()}}function mo(Dt){var zt=0,oe=a/3,ne=Da(Dt),fe=ne(zt,oe);return fe.parallels=function(Fe){return arguments.length?ne(zt=Fe[0]*b,oe=Fe[1]*b):[zt*v,oe*v]},fe}function Gs(Dt){var zt=M(Dt);function oe(ne,fe){return[ne*zt,A(fe)/zt]}return oe.invert=function(ne,fe){return[ne/zt,Z(fe*zt)]},oe}function wl(Dt,zt){var oe=A(Dt),ne=(oe+A(zt))/2;if(g(ne)<n)return Gs(Dt);var fe=1+oe*(2*ne-oe),Fe=L(fe)/ne;function Ze(nn,Je){var vn=L(fe-2*ne*A(Je))/ne;return[vn*A(nn*=ne),Fe-vn*M(nn)]}return Ze.invert=function(nn,Je){var vn=Fe-Je,fn=_(nn,g(vn))*O(vn);return vn*ne<0&&(fn-=a*O(nn)*O(vn)),[fn/ne,Z((fe-(nn*nn+vn*vn)*ne*ne)/(2*ne))]},Ze}function ll(){return mo(wl).scale(155.424).center([0,33.6442])}function Qu(){return ll().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function xc(Dt){var zt=Dt.length;return{point:function(ne,fe){for(var Fe=-1;++Fe<zt;)Dt[Fe].point(ne,fe)},sphere:function(){for(var ne=-1;++ne<zt;)Dt[ne].sphere()},lineStart:function(){for(var ne=-1;++ne<zt;)Dt[ne].lineStart()},lineEnd:function(){for(var ne=-1;++ne<zt;)Dt[ne].lineEnd()},polygonStart:function(){for(var ne=-1;++ne<zt;)Dt[ne].polygonStart()},polygonEnd:function(){for(var ne=-1;++ne<zt;)Dt[ne].polygonEnd()}}}function Zl(){var Dt,zt,oe=Qu(),ne,fe=ll().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Fe,Ze=ll().rotate([157,0]).center([-3,19.9]).parallels([8,18]),nn,Je,vn={point:function(Vn,Gn){Je=[Vn,Gn]}};function fn(kn){var Vn=kn[0],Gn=kn[1];return Je=null,ne.point(Vn,Gn),Je||(Fe.point(Vn,Gn),Je)||(nn.point(Vn,Gn),Je)}fn.invert=function(kn){var Vn=oe.scale(),Gn=oe.translate(),hr=(kn[0]-Gn[0])/Vn,mr=(kn[1]-Gn[1])/Vn;return(mr>=.12&&mr<.234&&hr>=-.425&&hr<-.214?fe:mr>=.166&&mr<.234&&hr>=-.214&&hr<-.115?Ze:oe).invert(kn)},fn.stream=function(kn){return Dt&&zt===kn?Dt:Dt=xc([oe.stream(zt=kn),fe.stream(kn),Ze.stream(kn)])},fn.precision=function(kn){return arguments.length?(oe.precision(kn),fe.precision(kn),Ze.precision(kn),Yn()):oe.precision()},fn.scale=function(kn){return arguments.length?(oe.scale(kn),fe.scale(kn*.35),Ze.scale(kn),fn.translate(oe.translate())):oe.scale()},fn.translate=function(kn){if(!arguments.length)return oe.translate();var Vn=oe.scale(),Gn=+kn[0],hr=+kn[1];return ne=oe.translate(kn).clipExtent([[Gn-.455*Vn,hr-.238*Vn],[Gn+.455*Vn,hr+.238*Vn]]).stream(vn),Fe=fe.translate([Gn-.307*Vn,hr+.201*Vn]).clipExtent([[Gn-.425*Vn+n,hr+.12*Vn+n],[Gn-.214*Vn-n,hr+.234*Vn-n]]).stream(vn),nn=Ze.translate([Gn-.205*Vn,hr+.212*Vn]).clipExtent([[Gn-.214*Vn+n,hr+.166*Vn+n],[Gn-.115*Vn-n,hr+.234*Vn-n]]).stream(vn),Yn()},fn.fitExtent=function(kn,Vn){return El(fn,kn,Vn)},fn.fitSize=function(kn,Vn){return sc(fn,kn,Vn)},fn.fitWidth=function(kn,Vn){return Cl(fn,kn,Vn)},fn.fitHeight=function(kn,Vn){return zl(fn,kn,Vn)};function Yn(){return Dt=zt=null,fn}return fn.scale(1070)}function qu(Dt){return function(zt,oe){var ne=M(zt),fe=M(oe),Fe=Dt(ne*fe);return[Fe*fe*A(zt),Fe*A(oe)]}}function ru(Dt){return function(zt,oe){var ne=L(zt*zt+oe*oe),fe=Dt(ne),Fe=A(fe),Ze=M(fe);return[_(zt*Fe,ne*Ze),Z(ne&&oe*Fe/ne)]}}var Zs=qu(function(Dt){return L(2/(1+Dt))});Zs.invert=ru(function(Dt){return 2*Z(Dt/2)});function es(){return Ys(Zs).scale(124.75).clipAngle(180-.001)}var iu=qu(function(Dt){return(Dt=F(Dt))&&Dt/A(Dt)});iu.invert=ru(function(Dt){return Dt});function ku(){return Ys(iu).scale(79.4188).clipAngle(180-.001)}function us(Dt,zt){return[Dt,S(H((o+zt)/2))]}us.invert=function(Dt,zt){return[Dt,2*m(y(zt))-o]};function Yi(){return Fs(us).scale(961/f)}function Fs(Dt){var zt=Ys(Dt),oe=zt.center,ne=zt.scale,fe=zt.translate,Fe=zt.clipExtent,Ze=null,nn,Je,vn;zt.scale=function(Yn){return arguments.length?(ne(Yn),fn()):ne()},zt.translate=function(Yn){return arguments.length?(fe(Yn),fn()):fe()},zt.center=function(Yn){return arguments.length?(oe(Yn),fn()):oe()},zt.clipExtent=function(Yn){return arguments.length?(Yn==null?Ze=nn=Je=vn=null:(Ze=+Yn[0][0],nn=+Yn[0][1],Je=+Yn[1][0],vn=+Yn[1][1]),fn()):Ze==null?null:[[Ze,nn],[Je,vn]]};function fn(){var Yn=a*ne(),kn=zt(Do(zt.rotate()).invert([0,0]));return Fe(Ze==null?[[kn[0]-Yn,kn[1]-Yn],[kn[0]+Yn,kn[1]+Yn]]:Dt===us?[[Math.max(kn[0]-Yn,Ze),nn],[Math.min(kn[0]+Yn,Je),vn]]:[[Ze,Math.max(kn[1]-Yn,nn)],[Je,Math.min(kn[1]+Yn,vn)]])}return fn()}function tl(Dt){return H((o+Dt)/2)}function Gu(Dt,zt){var oe=M(Dt),ne=Dt===zt?A(Dt):S(oe/M(zt))/S(tl(zt)/tl(Dt)),fe=oe*P(tl(Dt),ne)/ne;if(!ne)return us;function Fe(Ze,nn){fe>0?nn<-o+n&&(nn=-o+n):nn>o-n&&(nn=o-n);var Je=fe/P(tl(nn),ne);return[Je*A(ne*Ze),fe-Je*M(ne*Ze)]}return Fe.invert=function(Ze,nn){var Je=fe-nn,vn=O(ne)*L(Ze*Ze+Je*Je),fn=_(Ze,g(Je))*O(Je);return Je*ne<0&&(fn-=a*O(Ze)*O(Je)),[fn/ne,2*m(P(fe/vn,1/ne))-o]},Fe}function Go(){return mo(Gu).scale(109.5).parallels([30,30])}function Yo(Dt,zt){return[Dt,zt]}Yo.invert=Yo;function Su(){return Ys(Yo).scale(152.63)}function Mi(Dt,zt){var oe=M(Dt),ne=Dt===zt?A(Dt):(oe-M(zt))/(zt-Dt),fe=oe/ne+Dt;if(g(ne)<n)return Yo;function Fe(Ze,nn){var Je=fe-nn,vn=ne*Ze;return[Je*A(vn),fe-Je*M(vn)]}return Fe.invert=function(Ze,nn){var Je=fe-nn,vn=_(Ze,g(Je))*O(Je);return Je*ne<0&&(vn-=a*O(Ze)*O(Je)),[vn/ne,fe-O(ne)*L(Ze*Ze+Je*Je)]},Fe}function _u(){return mo(Mi).scale(131.154).center([0,13.9389])}var Iu=1.340264,Lu=-.081106,$s=893e-6,we=.003796,Pe=L(3)/2,hn=12;function tn(Dt,zt){var oe=Z(Pe*A(zt)),ne=oe*oe,fe=ne*ne*ne;return[Dt*M(oe)/(Pe*(Iu+3*Lu*ne+fe*(7*$s+9*we*ne))),oe*(Iu+Lu*ne+fe*($s+we*ne))]}tn.invert=function(Dt,zt){for(var oe=zt,ne=oe*oe,fe=ne*ne*ne,Fe=0,Ze,nn,Je;Fe<hn&&(nn=oe*(Iu+Lu*ne+fe*($s+we*ne))-zt,Je=Iu+3*Lu*ne+fe*(7*$s+9*we*ne),oe-=Ze=nn/Je,ne=oe*oe,fe=ne*ne*ne,!(g(Ze)<i));++Fe);return[Pe*Dt*(Iu+3*Lu*ne+fe*(7*$s+9*we*ne))/M(oe),Z(A(oe)/Pe)]};function On(){return Ys(tn).scale(177.158)}function fr(Dt,zt){var oe=M(zt),ne=M(Dt)*oe;return[oe*A(Dt)/ne,A(zt)/ne]}fr.invert=ru(m);function Ir(){return Ys(fr).scale(144.049).clipAngle(60)}function Zr(){var Dt=1,zt=0,oe=0,ne=1,fe=1,Fe=0,Ze,nn,Je=null,vn,fn,Yn,kn=1,Vn=1,Gn=uu({point:function(fi,Zi){var Ri=Br([fi,Zi]);this.stream.point(Ri[0],Ri[1])}}),hr=Ss,mr,Yr;function gi(){return kn=Dt*ne,Vn=Dt*fe,mr=Yr=null,Br}function Br(ai){var fi=ai[0]*kn,Zi=ai[1]*Vn;if(Fe){var Ri=Zi*Ze-fi*nn;fi=fi*Ze+Zi*nn,Zi=Ri}return[fi+zt,Zi+oe]}return Br.invert=function(ai){var fi=ai[0]-zt,Zi=ai[1]-oe;if(Fe){var Ri=Zi*Ze+fi*nn;fi=fi*Ze-Zi*nn,Zi=Ri}return[fi/kn,Zi/Vn]},Br.stream=function(ai){return mr&&Yr===ai?mr:mr=Gn(hr(Yr=ai))},Br.postclip=function(ai){return arguments.length?(hr=ai,Je=vn=fn=Yn=null,gi()):hr},Br.clipExtent=function(ai){return arguments.length?(hr=ai==null?(Je=vn=fn=Yn=null,Ss):Oi(Je=+ai[0][0],vn=+ai[0][1],fn=+ai[1][0],Yn=+ai[1][1]),gi()):Je==null?null:[[Je,vn],[fn,Yn]]},Br.scale=function(ai){return arguments.length?(Dt=+ai,gi()):Dt},Br.translate=function(ai){return arguments.length?(zt=+ai[0],oe=+ai[1],gi()):[zt,oe]},Br.angle=function(ai){return arguments.length?(Fe=ai%360*b,nn=A(Fe),Ze=M(Fe),gi()):Fe*v},Br.reflectX=function(ai){return arguments.length?(ne=ai?-1:1,gi()):ne<0},Br.reflectY=function(ai){return arguments.length?(fe=ai?-1:1,gi()):fe<0},Br.fitExtent=function(ai,fi){return El(Br,ai,fi)},Br.fitSize=function(ai,fi){return sc(Br,ai,fi)},Br.fitWidth=function(ai,fi){return Cl(Br,ai,fi)},Br.fitHeight=function(ai,fi){return zl(Br,ai,fi)},Br}function ni(Dt,zt){var oe=zt*zt,ne=oe*oe;return[Dt*(.8707-.131979*oe+ne*(-.013791+ne*(.003971*oe-.001529*ne))),zt*(1.007226+oe*(.015085+ne*(-.044475+.028874*oe-.005916*ne)))]}ni.invert=function(Dt,zt){var oe=zt,ne=25,fe;do{var Fe=oe*oe,Ze=Fe*Fe;oe-=fe=(oe*(1.007226+Fe*(.015085+Ze*(-.044475+.028874*Fe-.005916*Ze)))-zt)/(1.007226+Fe*(.015085*3+Ze*(-.044475*7+.028874*9*Fe-.005916*11*Ze)))}while(g(fe)>n&&--ne>0);return[Dt/(.8707+(Fe=oe*oe)*(-.131979+Fe*(-.013791+Fe*Fe*Fe*(.003971-.001529*Fe)))),oe]};function zr(){return Ys(ni).scale(175.295)}function ci(Dt,zt){return[M(zt)*A(Dt),A(zt)]}ci.invert=ru(Z);function xr(){return Ys(ci).scale(249.5).clipAngle(90+n)}function Kt(Dt,zt){var oe=M(zt),ne=1+M(Dt)*oe;return[oe*A(Dt)/ne,A(zt)/ne]}Kt.invert=ru(function(Dt){return 2*m(Dt)});function te(){return Ys(Kt).scale(250).clipAngle(142)}function Ie(Dt,zt){return[S(H((o+zt)/2)),-Dt]}Ie.invert=function(Dt,zt){return[-zt,2*m(y(Dt))-o]};function _e(){var Dt=Fs(Ie),zt=Dt.center,oe=Dt.rotate;return Dt.center=function(ne){return arguments.length?zt([-ne[1],ne[0]]):(ne=zt(),[ne[1],-ne[0]])},Dt.rotate=function(ne){return arguments.length?oe([ne[0],ne[1],ne.length>2?ne[2]+90:90]):(ne=oe(),[ne[0],ne[1],ne[2]-90])},oe([0,0,90]).scale(159.155)}t.geoAlbers=Qu,t.geoAlbersUsa=Zl,t.geoArea=at,t.geoAzimuthalEqualArea=es,t.geoAzimuthalEqualAreaRaw=Zs,t.geoAzimuthalEquidistant=ku,t.geoAzimuthalEquidistantRaw=iu,t.geoBounds=Qt,t.geoCentroid=br,t.geoCircle=Ko,t.geoClipAntimeridian=Yt,t.geoClipCircle=rr,t.geoClipExtent=Gi,t.geoClipRectangle=Oi,t.geoConicConformal=Go,t.geoConicConformalRaw=Gu,t.geoConicEqualArea=ll,t.geoConicEqualAreaRaw=wl,t.geoConicEquidistant=_u,t.geoConicEquidistantRaw=Mi,t.geoContains=za,t.geoDistance=Co,t.geoEqualEarth=On,t.geoEqualEarthRaw=tn,t.geoEquirectangular=Su,t.geoEquirectangularRaw=Yo,t.geoGnomonic=Ir,t.geoGnomonicRaw=fr,t.geoGraticule=ea,t.geoGraticule10=to,t.geoIdentity=Zr,t.geoInterpolate=Ns,t.geoLength=ls,t.geoMercator=Yi,t.geoMercatorRaw=us,t.geoNaturalEarth1=zr,t.geoNaturalEarth1Raw=ni,t.geoOrthographic=xr,t.geoOrthographicRaw=ci,t.geoPath=sl,t.geoProjection=Ys,t.geoProjectionMutator=Da,t.geoRotation=Do,t.geoStereographic=te,t.geoStereographicRaw=Kt,t.geoStream=ut,t.geoTransform=Eu,t.geoTransverseMercator=_e,t.geoTransverseMercatorRaw=Ie,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js":function(E,T,e){(function(t,u){u(T,e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(t,u){"use strict";var s=function(){return new c};function c(){this.reset()}c.prototype={constructor:c,reset:function(){this.s=this.t=0},add:function(Pe){h(r,Pe,this.t),h(this,r.s,this.s),this.s?this.t+=r.t:this.s=r.t},valueOf:function(){return this.s}};var r=new c;function h(we,Pe,hn){var tn=we.s=Pe+hn,On=tn-Pe,fr=tn-On;we.t=Pe-fr+(hn-On)}var n=1e-6,i=1e-12,a=Math.PI,o=a/2,l=a/4,f=a*2,v=180/a,b=a/180,g=Math.abs,m=Math.atan,_=Math.atan2,M=Math.cos,x=Math.ceil,y=Math.exp,S=Math.log,P=Math.pow,A=Math.sin,O=Math.sign||function(we){return we>0?1:we<0?-1:0},L=Math.sqrt,H=Math.tan;function F(we){return we>1?0:we<-1?a:Math.acos(we)}function Z(we){return we>1?o:we<-1?-o:Math.asin(we)}function G(we){return(we=A(we/2))*we}function U(){}function Y(we,Pe){we&&rt.hasOwnProperty(we.type)&&rt[we.type](we,Pe)}var J={Feature:function(Pe,hn){Y(Pe.geometry,hn)},FeatureCollection:function(Pe,hn){for(var tn=Pe.features,On=-1,fr=tn.length;++On<fr;)Y(tn[On].geometry,hn)}},rt={Sphere:function(Pe,hn){hn.sphere()},Point:function(Pe,hn){Pe=Pe.coordinates,hn.point(Pe[0],Pe[1],Pe[2])},MultiPoint:function(Pe,hn){for(var tn=Pe.coordinates,On=-1,fr=tn.length;++On<fr;)Pe=tn[On],hn.point(Pe[0],Pe[1],Pe[2])},LineString:function(Pe,hn){ft(Pe.coordinates,hn,0)},MultiLineString:function(Pe,hn){for(var tn=Pe.coordinates,On=-1,fr=tn.length;++On<fr;)ft(tn[On],hn,0)},Polygon:function(Pe,hn){dt(Pe.coordinates,hn)},MultiPolygon:function(Pe,hn){for(var tn=Pe.coordinates,On=-1,fr=tn.length;++On<fr;)dt(tn[On],hn)},GeometryCollection:function(Pe,hn){for(var tn=Pe.geometries,On=-1,fr=tn.length;++On<fr;)Y(tn[On],hn)}};function ft(we,Pe,hn){var tn=-1,On=we.length-hn,fr;for(Pe.lineStart();++tn<On;)fr=we[tn],Pe.point(fr[0],fr[1],fr[2]);Pe.lineEnd()}function dt(we,Pe){var hn=-1,tn=we.length;for(Pe.polygonStart();++hn<tn;)ft(we[hn],Pe,1);Pe.polygonEnd()}var ut=function(Pe,hn){Pe&&J.hasOwnProperty(Pe.type)?J[Pe.type](Pe,hn):Y(Pe,hn)},Lt=s(),Ft=s(),Ot,St,xt,At,nt,Mt={point:U,lineStart:U,lineEnd:U,polygonStart:function(){Lt.reset(),Mt.lineStart=z,Mt.lineEnd=Q},polygonEnd:function(){var Pe=+Lt;Ft.add(Pe<0?f+Pe:Pe),this.lineStart=this.lineEnd=this.point=U},sphere:function(){Ft.add(f)}};function z(){Mt.point=ht}function Q(){et(Ot,St)}function ht(we,Pe){Mt.point=et,Ot=we,St=Pe,we*=b,Pe*=b,xt=we,At=M(Pe=Pe/2+l),nt=A(Pe)}function et(we,Pe){we*=b,Pe*=b,Pe=Pe/2+l;var hn=we-xt,tn=hn>=0?1:-1,On=tn*hn,fr=M(Pe),Ir=A(Pe),Zr=nt*Ir,ni=At*fr+Zr*M(On),zr=Zr*tn*A(On);Lt.add(_(zr,ni)),xt=we,At=fr,nt=Ir}var at=function(Pe){return Ft.reset(),ut(Pe,Mt),Ft*2};function gt(we){return[_(we[1],we[0]),Z(we[2])]}function k(we){var Pe=we[0],hn=we[1],tn=M(hn);return[tn*M(Pe),tn*A(Pe),A(hn)]}function ot(we,Pe){return we[0]*Pe[0]+we[1]*Pe[1]+we[2]*Pe[2]}function it(we,Pe){return[we[1]*Pe[2]-we[2]*Pe[1],we[2]*Pe[0]-we[0]*Pe[2],we[0]*Pe[1]-we[1]*Pe[0]]}function X(we,Pe){we[0]+=Pe[0],we[1]+=Pe[1],we[2]+=Pe[2]}function Et(we,Pe){return[we[0]*Pe,we[1]*Pe,we[2]*Pe]}function vt(we){var Pe=L(we[0]*we[0]+we[1]*we[1]+we[2]*we[2]);we[0]/=Pe,we[1]/=Pe,we[2]/=Pe}var Nt,$t,ee,kt,Wt,ae,le,je,Oe=s(),We,Ye,wn={point:er,lineStart:on,lineEnd:en,polygonStart:function(){wn.point=An,wn.lineStart=jn,wn.lineEnd=pr,Oe.reset(),Mt.polygonStart()},polygonEnd:function(){Mt.polygonEnd(),wn.point=er,wn.lineStart=on,wn.lineEnd=en,Lt<0?(Nt=-(ee=180),$t=-(kt=90)):Oe>n?kt=90:Oe<-n&&($t=-90),Ye[0]=Nt,Ye[1]=ee}};function er(we,Pe){We.push(Ye=[Nt=we,ee=we]),Pe<$t&&($t=Pe),Pe>kt&&(kt=Pe)}function wr(we,Pe){var hn=k([we*b,Pe*b]);if(je){var tn=it(je,hn),On=[tn[1],-tn[0],0],fr=it(On,tn);vt(fr),fr=gt(fr);var Ir=we-Wt,Zr=Ir>0?1:-1,ni=fr[0]*v*Zr,zr,ci=g(Ir)>180;ci^(Zr*Wt<ni&&ni<Zr*we)?(zr=fr[1]*v,zr>kt&&(kt=zr)):(ni=(ni+360)%360-180,ci^(Zr*Wt<ni&&ni<Zr*we)?(zr=-fr[1]*v,zr<$t&&($t=zr)):(Pe<$t&&($t=Pe),Pe>kt&&(kt=Pe))),ci?we<Wt?di(Nt,we)>di(Nt,ee)&&(ee=we):di(we,ee)>di(Nt,ee)&&(Nt=we):ee>=Nt?(we<Nt&&(Nt=we),we>ee&&(ee=we)):we>Wt?di(Nt,we)>di(Nt,ee)&&(ee=we):di(we,ee)>di(Nt,ee)&&(Nt=we)}else We.push(Ye=[Nt=we,ee=we]);Pe<$t&&($t=Pe),Pe>kt&&(kt=Pe),je=hn,Wt=we}function on(){wn.point=wr}function en(){Ye[0]=Nt,Ye[1]=ee,wn.point=er,je=null}function An(we,Pe){if(je){var hn=we-Wt;Oe.add(g(hn)>180?hn+(hn>0?360:-360):hn)}else ae=we,le=Pe;Mt.point(we,Pe),wr(we,Pe)}function jn(){Mt.lineStart()}function pr(){An(ae,le),Mt.lineEnd(),g(Oe)>n&&(Nt=-(ee=180)),Ye[0]=Nt,Ye[1]=ee,je=null}function di(we,Pe){return(Pe-=we)<0?Pe+360:Pe}function Ce(we,Pe){return we[0]-Pe[0]}function Me(we,Pe){return we[0]<=we[1]?we[0]<=Pe&&Pe<=we[1]:Pe<we[0]||we[1]<Pe}var Qt=function(Pe){var hn,tn,On,fr,Ir,Zr,ni;if(kt=ee=-(Nt=$t=Infinity),We=[],ut(Pe,wn),tn=We.length){for(We.sort(Ce),hn=1,On=We[0],Ir=[On];hn<tn;++hn)fr=We[hn],Me(On,fr[0])||Me(On,fr[1])?(di(On[0],fr[1])>di(On[0],On[1])&&(On[1]=fr[1]),di(fr[0],On[1])>di(On[0],On[1])&&(On[0]=fr[0])):Ir.push(On=fr);for(Zr=-Infinity,tn=Ir.length-1,hn=0,On=Ir[tn];hn<=tn;On=fr,++hn)fr=Ir[hn],(ni=di(On[1],fr[0]))>Zr&&(Zr=ni,Nt=fr[0],ee=On[1])}return We=Ye=null,Nt===Infinity||$t===Infinity?[[NaN,NaN],[NaN,NaN]]:[[Nt,$t],[ee,kt]]},pe,Vt,re,Te,ue,xe,Ke,Rn,tr,Pn,dn,Ar,or,cn,Pr,Sr,Re={sphere:U,point:$e,lineStart:En,lineEnd:mn,polygonStart:function(){Re.lineStart=Dn,Re.lineEnd=$n},polygonEnd:function(){Re.lineStart=En,Re.lineEnd=mn}};function $e(we,Pe){we*=b,Pe*=b;var hn=M(Pe);Ve(hn*M(we),hn*A(we),A(Pe))}function Ve(we,Pe,hn){++pe,re+=(we-re)/pe,Te+=(Pe-Te)/pe,ue+=(hn-ue)/pe}function En(){Re.point=xn}function xn(we,Pe){we*=b,Pe*=b;var hn=M(Pe);cn=hn*M(we),Pr=hn*A(we),Sr=A(Pe),Re.point=Nn,Ve(cn,Pr,Sr)}function Nn(we,Pe){we*=b,Pe*=b;var hn=M(Pe),tn=hn*M(we),On=hn*A(we),fr=A(Pe),Ir=_(L((Ir=Pr*fr-Sr*On)*Ir+(Ir=Sr*tn-cn*fr)*Ir+(Ir=cn*On-Pr*tn)*Ir),cn*tn+Pr*On+Sr*fr);Vt+=Ir,xe+=Ir*(cn+(cn=tn)),Ke+=Ir*(Pr+(Pr=On)),Rn+=Ir*(Sr+(Sr=fr)),Ve(cn,Pr,Sr)}function mn(){Re.point=$e}function Dn(){Re.point=Hn}function $n(){_n(Ar,or),Re.point=$e}function Hn(we,Pe){Ar=we,or=Pe,we*=b,Pe*=b,Re.point=_n;var hn=M(Pe);cn=hn*M(we),Pr=hn*A(we),Sr=A(Pe),Ve(cn,Pr,Sr)}function _n(we,Pe){we*=b,Pe*=b;var hn=M(Pe),tn=hn*M(we),On=hn*A(we),fr=A(Pe),Ir=Pr*fr-Sr*On,Zr=Sr*tn-cn*fr,ni=cn*On-Pr*tn,zr=L(Ir*Ir+Zr*Zr+ni*ni),ci=Z(zr),xr=zr&&-ci/zr;tr+=xr*Ir,Pn+=xr*Zr,dn+=xr*ni,Vt+=ci,xe+=ci*(cn+(cn=tn)),Ke+=ci*(Pr+(Pr=On)),Rn+=ci*(Sr+(Sr=fr)),Ve(cn,Pr,Sr)}var br=function(Pe){pe=Vt=re=Te=ue=xe=Ke=Rn=tr=Pn=dn=0,ut(Pe,Re);var hn=tr,tn=Pn,On=dn,fr=hn*hn+tn*tn+On*On;return fr<i&&(hn=xe,tn=Ke,On=Rn,Vt<n&&(hn=re,tn=Te,On=ue),fr=hn*hn+tn*tn+On*On,fr<i)?[NaN,NaN]:[_(tn,hn)*v,Z(On/L(fr))*v]},yr=function(Pe){return function(){return Pe}},Fr=function(Pe,hn){function tn(On,fr){return On=Pe(On,fr),hn(On[0],On[1])}return Pe.invert&&hn.invert&&(tn.invert=function(On,fr){return On=hn.invert(On,fr),On&&Pe.invert(On[0],On[1])}),tn};function Ei(we,Pe){return[we>a?we-f:we<-a?we+f:we,Pe]}Ei.invert=Ei;function Ta(we,Pe,hn){return(we%=f)?Pe||hn?Fr(eo(we),Ho(Pe,hn)):eo(we):Pe||hn?Ho(Pe,hn):Ei}function Aa(we){return function(Pe,hn){return Pe+=we,[Pe>a?Pe-f:Pe<-a?Pe+f:Pe,hn]}}function eo(we){var Pe=Aa(we);return Pe.invert=Aa(-we),Pe}function Ho(we,Pe){var hn=M(we),tn=A(we),On=M(Pe),fr=A(Pe);function Ir(Zr,ni){var zr=M(ni),ci=M(Zr)*zr,xr=A(Zr)*zr,Kt=A(ni),te=Kt*hn+ci*tn;return[_(xr*On-te*fr,ci*hn-Kt*tn),Z(te*On+xr*fr)]}return Ir.invert=function(Zr,ni){var zr=M(ni),ci=M(Zr)*zr,xr=A(Zr)*zr,Kt=A(ni),te=Kt*On-xr*fr;return[_(xr*On+Kt*fr,ci*hn+te*tn),Z(te*hn-ci*tn)]},Ir}var Do=function(Pe){Pe=Ta(Pe[0]*b,Pe[1]*b,Pe.length>2?Pe[2]*b:0);function hn(tn){return tn=Pe(tn[0]*b,tn[1]*b),tn[0]*=v,tn[1]*=v,tn}return hn.invert=function(tn){return tn=Pe.invert(tn[0]*b,tn[1]*b),tn[0]*=v,tn[1]*=v,tn},hn};function io(we,Pe,hn,tn,On,fr){if(!!hn){var Ir=M(Pe),Zr=A(Pe),ni=tn*hn;On==null?(On=Pe+tn*f,fr=Pe-ni/2):(On=ds(Ir,On),fr=ds(Ir,fr),(tn>0?On<fr:On>fr)&&(On+=tn*f));for(var zr,ci=On;tn>0?ci>fr:ci<fr;ci-=ni)zr=gt([Ir,-Zr*M(ci),-Zr*A(ci)]),we.point(zr[0],zr[1])}}function ds(we,Pe){Pe=k(Pe),Pe[0]-=we,vt(Pe);var hn=F(-Pe[1]);return((-Pe[2]<0?-hn:hn)+f-n)%f}var Ko=function(){var Pe=yr([0,0]),hn=yr(90),tn=yr(6),On,fr,Ir={point:Zr};function Zr(zr,ci){On.push(zr=fr(zr,ci)),zr[0]*=v,zr[1]*=v}function ni(){var zr=Pe.apply(this,arguments),ci=hn.apply(this,arguments)*b,xr=tn.apply(this,arguments)*b;return On=[],fr=Ta(-zr[0]*b,-zr[1]*b,0).invert,io(Ir,ci,xr,1),zr={type:"Polygon",coordinates:[On]},On=fr=null,zr}return ni.center=function(zr){return arguments.length?(Pe=typeof zr=="function"?zr:yr([+zr[0],+zr[1]]),ni):Pe},ni.radius=function(zr){return arguments.length?(hn=typeof zr=="function"?zr:yr(+zr),ni):hn},ni.precision=function(zr){return arguments.length?(tn=typeof zr=="function"?zr:yr(+zr),ni):tn},ni},jo=function(){var Pe=[],hn;return{point:function(On,fr){hn.push([On,fr])},lineStart:function(){Pe.push(hn=[])},lineEnd:U,rejoin:function(){Pe.length>1&&Pe.push(Pe.pop().concat(Pe.shift()))},result:function(){var On=Pe;return Pe=[],hn=null,On}}},bs=function(Pe,hn,tn,On,fr,Ir){var Zr=Pe[0],ni=Pe[1],zr=hn[0],ci=hn[1],xr=0,Kt=1,te=zr-Zr,Ie=ci-ni,_e;if(_e=tn-Zr,!(!te&&_e>0)){if(_e/=te,te<0){if(_e<xr)return;_e<Kt&&(Kt=_e)}else if(te>0){if(_e>Kt)return;_e>xr&&(xr=_e)}if(_e=fr-Zr,!(!te&&_e<0)){if(_e/=te,te<0){if(_e>Kt)return;_e>xr&&(xr=_e)}else if(te>0){if(_e<xr)return;_e<Kt&&(Kt=_e)}if(_e=On-ni,!(!Ie&&_e>0)){if(_e/=Ie,Ie<0){if(_e<xr)return;_e<Kt&&(Kt=_e)}else if(Ie>0){if(_e>Kt)return;_e>xr&&(xr=_e)}if(_e=Ir-ni,!(!Ie&&_e<0)){if(_e/=Ie,Ie<0){if(_e>Kt)return;_e>xr&&(xr=_e)}else if(Ie>0){if(_e<xr)return;_e<Kt&&(Kt=_e)}return xr>0&&(Pe[0]=Zr+xr*te,Pe[1]=ni+xr*Ie),Kt<1&&(hn[0]=Zr+Kt*te,hn[1]=ni+Kt*Ie),!0}}}}},Ra=function(Pe,hn){return g(Pe[0]-hn[0])<n&&g(Pe[1]-hn[1])<n};function Xo(we,Pe,hn,tn){this.x=we,this.z=Pe,this.o=hn,this.e=tn,this.v=!1,this.n=this.p=null}var Bo=function(Pe,hn,tn,On,fr){var Ir=[],Zr=[],ni,zr;if(Pe.forEach(function(_e){if(!((Dt=_e.length-1)<=0)){var Dt,zt=_e[0],oe=_e[Dt],ne;if(Ra(zt,oe)){for(fr.lineStart(),ni=0;ni<Dt;++ni)fr.point((zt=_e[ni])[0],zt[1]);fr.lineEnd();return}Ir.push(ne=new Xo(zt,_e,null,!0)),Zr.push(ne.o=new Xo(zt,null,ne,!1)),Ir.push(ne=new Xo(oe,_e,null,!1)),Zr.push(ne.o=new Xo(oe,null,ne,!0))}}),!!Ir.length){for(Zr.sort(hn),qs(Ir),qs(Zr),ni=0,zr=Zr.length;ni<zr;++ni)Zr[ni].e=tn=!tn;for(var ci=Ir[0],xr,Kt;;){for(var te=ci,Ie=!0;te.v;)if((te=te.n)===ci)return;xr=te.z,fr.lineStart();do{if(te.v=te.o.v=!0,te.e){if(Ie)for(ni=0,zr=xr.length;ni<zr;++ni)fr.point((Kt=xr[ni])[0],Kt[1]);else On(te.x,te.n.x,1,fr);te=te.n}else{if(Ie)for(xr=te.p.z,ni=xr.length-1;ni>=0;--ni)fr.point((Kt=xr[ni])[0],Kt[1]);else On(te.x,te.p.x,-1,fr);te=te.p}te=te.o,xr=te.z,Ie=!Ie}while(!te.v);fr.lineEnd()}}};function qs(we){if(!!(Pe=we.length)){for(var Pe,hn=0,tn=we[0],On;++hn<Pe;)tn.n=On=we[hn],On.p=tn,tn=On;tn.n=On=we[0],On.p=tn}}var ao=1e9,so=-ao;function Hs(we,Pe,hn,tn){function On(zr,ci){return we<=zr&&zr<=hn&&Pe<=ci&&ci<=tn}function fr(zr,ci,xr,Kt){var te=0,Ie=0;if(zr==null||(te=Ir(zr,xr))!==(Ie=Ir(ci,xr))||ni(zr,ci)<0^xr>0)do Kt.point(te===0||te===3?we:hn,te>1?tn:Pe);while((te=(te+xr+4)%4)!==Ie);else Kt.point(ci[0],ci[1])}function Ir(zr,ci){return g(zr[0]-we)<n?ci>0?0:3:g(zr[0]-hn)<n?ci>0?2:1:g(zr[1]-Pe)<n?ci>0?1:0:ci>0?3:2}function Zr(zr,ci){return ni(zr.x,ci.x)}function ni(zr,ci){var xr=Ir(zr,1),Kt=Ir(ci,1);return xr!==Kt?xr-Kt:xr===0?ci[1]-zr[1]:xr===1?zr[0]-ci[0]:xr===2?zr[1]-ci[1]:ci[0]-zr[0]}return function(zr){var ci=zr,xr=jo(),Kt,te,Ie,_e,Dt,zt,oe,ne,fe,Fe,Ze,nn={point:Je,lineStart:kn,lineEnd:Vn,polygonStart:fn,polygonEnd:Yn};function Je(hr,mr){On(hr,mr)&&ci.point(hr,mr)}function vn(){for(var hr=0,mr=0,Yr=te.length;mr<Yr;++mr)for(var gi=te[mr],Br=1,ai=gi.length,fi=gi[0],Zi,Ri,Sa=fi[0],ya=fi[1];Br<ai;++Br)Zi=Sa,Ri=ya,fi=gi[Br],Sa=fi[0],ya=fi[1],Ri<=tn?ya>tn&&(Sa-Zi)*(tn-Ri)>(ya-Ri)*(we-Zi)&&++hr:ya<=tn&&(Sa-Zi)*(tn-Ri)<(ya-Ri)*(we-Zi)&&--hr;return hr}function fn(){ci=xr,Kt=[],te=[],Ze=!0}function Yn(){var hr=vn(),mr=Ze&&hr,Yr=(Kt=u.merge(Kt)).length;(mr||Yr)&&(zr.polygonStart(),mr&&(zr.lineStart(),fr(null,null,1,zr),zr.lineEnd()),Yr&&Bo(Kt,Zr,hr,fr,zr),zr.polygonEnd()),ci=zr,Kt=te=Ie=null}function kn(){nn.point=Gn,te&&te.push(Ie=[]),Fe=!0,fe=!1,oe=ne=NaN}function Vn(){Kt&&(Gn(_e,Dt),zt&&fe&&xr.rejoin(),Kt.push(xr.result())),nn.point=Je,fe&&ci.lineEnd()}function Gn(hr,mr){var Yr=On(hr,mr);if(te&&Ie.push([hr,mr]),Fe)_e=hr,Dt=mr,zt=Yr,Fe=!1,Yr&&(ci.lineStart(),ci.point(hr,mr));else if(Yr&&fe)ci.point(hr,mr);else{var gi=[oe=Math.max(so,Math.min(ao,oe)),ne=Math.max(so,Math.min(ao,ne))],Br=[hr=Math.max(so,Math.min(ao,hr)),mr=Math.max(so,Math.min(ao,mr))];bs(gi,Br,we,Pe,hn,tn)?(fe||(ci.lineStart(),ci.point(gi[0],gi[1])),ci.point(Br[0],Br[1]),Yr||ci.lineEnd(),Ze=!1):Yr&&(ci.lineStart(),ci.point(hr,mr),Ze=!1)}oe=hr,ne=mr,fe=Yr}return nn}}var Ne=function(){var Pe=0,hn=0,tn=960,On=500,fr,Ir,Zr;return Zr={stream:function(zr){return fr&&Ir===zr?fr:fr=Hs(Pe,hn,tn,On)(Ir=zr)},extent:function(zr){return arguments.length?(Pe=+zr[0][0],hn=+zr[0][1],tn=+zr[1][0],On=+zr[1][1],fr=Ir=null,Zr):[[Pe,hn],[tn,On]]}}},se=s(),Yt=function(Pe,hn){var tn=hn[0],On=hn[1],fr=[A(tn),-M(tn),0],Ir=0,Zr=0;se.reset();for(var ni=0,zr=Pe.length;ni<zr;++ni)if(!!(xr=(ci=Pe[ni]).length))for(var ci,xr,Kt=ci[xr-1],te=Kt[0],Ie=Kt[1]/2+l,_e=A(Ie),Dt=M(Ie),zt=0;zt<xr;++zt,te=ne,_e=Fe,Dt=Ze,Kt=oe){var oe=ci[zt],ne=oe[0],fe=oe[1]/2+l,Fe=A(fe),Ze=M(fe),nn=ne-te,Je=nn>=0?1:-1,vn=Je*nn,fn=vn>a,Yn=_e*Fe;if(se.add(_(Yn*Je*A(vn),Dt*Ze+Yn*M(vn))),Ir+=fn?nn+Je*f:nn,fn^te>=tn^ne>=tn){var kn=it(k(Kt),k(oe));vt(kn);var Vn=it(fr,kn);vt(Vn);var Gn=(fn^nn>=0?-1:1)*Z(Vn[2]);(On>Gn||On===Gn&&(kn[0]||kn[1]))&&(Zr+=fn^nn>=0?1:-1)}}return(Ir<-n||Ir<n&&se<-n)^Zr&1},Ee=s(),sn,Fn,rr,qn={sphere:U,point:U,lineStart:Xr,lineEnd:U,polygonStart:U,polygonEnd:U};function Xr(){qn.point=Oi,qn.lineEnd=Si}function Si(){qn.point=qn.lineEnd=U}function Oi(we,Pe){we*=b,Pe*=b,sn=we,Fn=A(Pe),rr=M(Pe),qn.point=Gi}function Gi(we,Pe){we*=b,Pe*=b;var hn=A(Pe),tn=M(Pe),On=g(we-sn),fr=M(On),Ir=A(On),Zr=tn*Ir,ni=rr*hn-Fn*tn*fr,zr=Fn*hn+rr*tn*fr;Ee.add(_(L(Zr*Zr+ni*ni),zr)),sn=we,Fn=hn,rr=tn}var sa=function(Pe){return Ee.reset(),ut(Pe,qn),+Ee},qa=[null,null],Oa={type:"LineString",coordinates:qa},Eo=function(Pe,hn){return qa[0]=Pe,qa[1]=hn,sa(Oa)},Ba={Feature:function(Pe,hn){return co(Pe.geometry,hn)},FeatureCollection:function(Pe,hn){for(var tn=Pe.features,On=-1,fr=tn.length;++On<fr;)if(co(tn[On].geometry,hn))return!0;return!1}},uo={Sphere:function(){return!0},Point:function(Pe,hn){return Ja(Pe.coordinates,hn)},MultiPoint:function(Pe,hn){for(var tn=Pe.coordinates,On=-1,fr=tn.length;++On<fr;)if(Ja(tn[On],hn))return!0;return!1},LineString:function(Pe,hn){return Po(Pe.coordinates,hn)},MultiLineString:function(Pe,hn){for(var tn=Pe.coordinates,On=-1,fr=tn.length;++On<fr;)if(Po(tn[On],hn))return!0;return!1},Polygon:function(Pe,hn){return ls(Pe.coordinates,hn)},MultiPolygon:function(Pe,hn){for(var tn=Pe.coordinates,On=-1,fr=tn.length;++On<fr;)if(ls(tn[On],hn))return!0;return!1},GeometryCollection:function(Pe,hn){for(var tn=Pe.geometries,On=-1,fr=tn.length;++On<fr;)if(co(tn[On],hn))return!0;return!1}};function co(we,Pe){return we&&uo.hasOwnProperty(we.type)?uo[we.type](we,Pe):!1}function Ja(we,Pe){return Eo(we,Pe)===0}function Po(we,Pe){var hn=Eo(we[0],we[1]),tn=Eo(we[0],Pe),On=Eo(Pe,we[1]);return tn+On<=hn+n}function ls(we,Pe){return!!Yt(we.map(ko),Es(Pe))}function ko(we){return we=we.map(Es),we.pop(),we}function Es(we){return[we[0]*b,we[1]*b]}var Co=function(Pe,hn){return(Pe&&Ba.hasOwnProperty(Pe.type)?Ba[Pe.type]:co)(Pe,hn)};function Za(we,Pe,hn){var tn=u.range(we,Pe-n,hn).concat(Pe);return function(On){return tn.map(function(fr){return[On,fr]})}}function Bs(we,Pe,hn){var tn=u.range(we,Pe-n,hn).concat(Pe);return function(On){return tn.map(function(fr){return[fr,On]})}}function ss(){var we,Pe,hn,tn,On,fr,Ir,Zr,ni=10,zr=ni,ci=90,xr=360,Kt,te,Ie,_e,Dt=2.5;function zt(){return{type:"MultiLineString",coordinates:oe()}}function oe(){return u.range(x(tn/ci)*ci,hn,ci).map(Ie).concat(u.range(x(Zr/xr)*xr,Ir,xr).map(_e)).concat(u.range(x(Pe/ni)*ni,we,ni).filter(function(ne){return g(ne%ci)>n}).map(Kt)).concat(u.range(x(fr/zr)*zr,On,zr).filter(function(ne){return g(ne%xr)>n}).map(te))}return zt.lines=function(){return oe().map(function(ne){return{type:"LineString",coordinates:ne}})},zt.outline=function(){return{type:"Polygon",coordinates:[Ie(tn).concat(_e(Ir).slice(1),Ie(hn).reverse().slice(1),_e(Zr).reverse().slice(1))]}},zt.extent=function(ne){return arguments.length?zt.extentMajor(ne).extentMinor(ne):zt.extentMinor()},zt.extentMajor=function(ne){return arguments.length?(tn=+ne[0][0],hn=+ne[1][0],Zr=+ne[0][1],Ir=+ne[1][1],tn>hn&&(ne=tn,tn=hn,hn=ne),Zr>Ir&&(ne=Zr,Zr=Ir,Ir=ne),zt.precision(Dt)):[[tn,Zr],[hn,Ir]]},zt.extentMinor=function(ne){return arguments.length?(Pe=+ne[0][0],we=+ne[1][0],fr=+ne[0][1],On=+ne[1][1],Pe>we&&(ne=Pe,Pe=we,we=ne),fr>On&&(ne=fr,fr=On,On=ne),zt.precision(Dt)):[[Pe,fr],[we,On]]},zt.step=function(ne){return arguments.length?zt.stepMajor(ne).stepMinor(ne):zt.stepMinor()},zt.stepMajor=function(ne){return arguments.length?(ci=+ne[0],xr=+ne[1],zt):[ci,xr]},zt.stepMinor=function(ne){return arguments.length?(ni=+ne[0],zr=+ne[1],zt):[ni,zr]},zt.precision=function(ne){return arguments.length?(Dt=+ne,Kt=Za(fr,On,90),te=Bs(Pe,we,Dt),Ie=Za(Zr,Ir,90),_e=Bs(tn,hn,Dt),zt):Dt},zt.extentMajor([[-180,-90+n],[180,90-n]]).extentMinor([[-180,-80-n],[180,80+n]])}function ja(){return ss()()}var gn=function(Pe,hn){var tn=Pe[0]*b,On=Pe[1]*b,fr=hn[0]*b,Ir=hn[1]*b,Zr=M(On),ni=A(On),zr=M(Ir),ci=A(Ir),xr=Zr*M(tn),Kt=Zr*A(tn),te=zr*M(fr),Ie=zr*A(fr),_e=2*Z(L(G(Ir-On)+Zr*zr*G(fr-tn))),Dt=A(_e),zt=_e?function(oe){var ne=A(oe*=_e)/Dt,fe=A(_e-oe)/Dt,Fe=fe*xr+ne*te,Ze=fe*Kt+ne*Ie,nn=fe*ni+ne*ci;return[_(Ze,Fe)*v,_(nn,L(Fe*Fe+Ze*Ze))*v]}:function(){return[tn*v,On*v]};return zt.distance=_e,zt},cr=function(Pe){return Pe},Gr=s(),Ui=s(),za,go,fo,ea,to={point:U,lineStart:U,lineEnd:U,polygonStart:function(){to.lineStart=Ns,to.lineEnd=ou},polygonEnd:function(){to.lineStart=to.lineEnd=to.point=U,Gr.add(g(Ui)),Ui.reset()},result:function(){var Pe=Gr/2;return Gr.reset(),Pe}};function Ns(){to.point=Ss}function Ss(we,Pe){to.point=Ka,za=fo=we,go=ea=Pe}function Ka(we,Pe){Ui.add(ea*we-fo*Pe),fo=we,ea=Pe}function ou(){Ka(za,go)}var Jo=Infinity,Os=Jo,tu=-Jo,_s=tu,vs={point:ts,lineStart:U,lineEnd:U,polygonStart:U,polygonEnd:U,result:function(){var Pe=[[Jo,Os],[tu,_s]];return tu=_s=-(Os=Jo=Infinity),Pe}};function ts(we,Pe){we<Jo&&(Jo=we),we>tu&&(tu=we),Pe<Os&&(Os=Pe),Pe>_s&&(_s=Pe)}var ws=0,Ms=0,Ou=0,Bu=0,So=0,eu=0,Nu=0,Yu=0,al=0,Fu,Oo,Ua,ba,No={point:hu,lineStart:Zu,lineEnd:Is,polygonStart:function(){No.lineStart=su,No.lineEnd=Fo},polygonEnd:function(){No.point=hu,No.lineStart=Zu,No.lineEnd=Is},result:function(){var Pe=al?[Nu/al,Yu/al]:eu?[Bu/eu,So/eu]:Ou?[ws/Ou,Ms/Ou]:[NaN,NaN];return ws=Ms=Ou=Bu=So=eu=Nu=Yu=al=0,Pe}};function hu(we,Pe){ws+=we,Ms+=Pe,++Ou}function Zu(){No.point=ps}function ps(we,Pe){No.point=$o,hu(Ua=we,ba=Pe)}function $o(we,Pe){var hn=we-Ua,tn=Pe-ba,On=L(hn*hn+tn*tn);Bu+=On*(Ua+we)/2,So+=On*(ba+Pe)/2,eu+=On,hu(Ua=we,ba=Pe)}function Is(){No.point=hu}function su(){No.point=Ku}function Fo(){Xs(Fu,Oo)}function Ku(we,Pe){No.point=Xs,hu(Fu=Ua=we,Oo=ba=Pe)}function Xs(we,Pe){var hn=we-Ua,tn=Pe-ba,On=L(hn*hn+tn*tn);Bu+=On*(Ua+we)/2,So+=On*(ba+Pe)/2,eu+=On,On=ba*we-Ua*Pe,Nu+=On*(Ua+we),Yu+=On*(ba+Pe),al+=On*3,hu(Ua=we,ba=Pe)}function Xa(we){this._context=we}Xa.prototype={_radius:4.5,pointRadius:function(Pe){return this._radius=Pe,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Pe,hn){switch(this._point){case 0:{this._context.moveTo(Pe,hn),this._point=1;break}case 1:{this._context.lineTo(Pe,hn);break}default:{this._context.moveTo(Pe+this._radius,hn),this._context.arc(Pe,hn,this._radius,0,f);break}}},result:U};var yl=s(),Hl,xl,yc,Tl,oo,wu={point:U,lineStart:function(){wu.point=bl},lineEnd:function(){Hl&&nu(xl,yc),wu.point=U},polygonStart:function(){Hl=!0},polygonEnd:function(){Hl=null},result:function(){var Pe=+yl;return yl.reset(),Pe}};function bl(we,Pe){wu.point=nu,xl=Tl=we,yc=oo=Pe}function nu(we,Pe){Tl-=we,oo-=Pe,yl.add(L(Tl*Tl+oo*oo)),Tl=we,oo=Pe}function zu(){this._string=[]}zu.prototype={_radius:4.5,_circle:xu(4.5),pointRadius:function(Pe){return(Pe=+Pe)!==this._radius&&(this._radius=Pe,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Pe,hn){switch(this._point){case 0:{this._string.push("M",Pe,",",hn),this._point=1;break}case 1:{this._string.push("L",Pe,",",hn);break}default:{this._circle==null&&(this._circle=xu(this._radius)),this._string.push("M",Pe,",",hn,this._circle);break}}},result:function(){if(this._string.length){var Pe=this._string.join("");return this._string=[],Pe}else return null}};function xu(we){return"m0,"+we+"a"+we+","+we+" 0 1,1 0,"+-2*we+"a"+we+","+we+" 0 1,1 0,"+2*we+"z"}var bu=function(Pe,hn){var tn=4.5,On,fr;function Ir(Zr){return Zr&&(typeof tn=="function"&&fr.pointRadius(+tn.apply(this,arguments)),ut(Zr,On(fr))),fr.result()}return Ir.area=function(Zr){return ut(Zr,On(to)),to.result()},Ir.measure=function(Zr){return ut(Zr,On(wu)),wu.result()},Ir.bounds=function(Zr){return ut(Zr,On(vs)),vs.result()},Ir.centroid=function(Zr){return ut(Zr,On(No)),No.result()},Ir.projection=function(Zr){return arguments.length?(On=Zr==null?(Pe=null,cr):(Pe=Zr).stream,Ir):Pe},Ir.context=function(Zr){return arguments.length?(fr=Zr==null?(hn=null,new zu):new Xa(hn=Zr),typeof tn!="function"&&fr.pointRadius(tn),Ir):hn},Ir.pointRadius=function(Zr){return arguments.length?(tn=typeof Zr=="function"?Zr:(fr.pointRadius(+Zr),+Zr),Ir):tn},Ir.projection(Pe).context(hn)},Js=function(Pe,hn,tn,On){return function(fr,Ir){var Zr=hn(Ir),ni=fr.invert(On[0],On[1]),zr=jo(),ci=hn(zr),xr=!1,Kt,te,Ie,_e={point:Dt,lineStart:oe,lineEnd:ne,polygonStart:function(){_e.point=fe,_e.lineStart=Fe,_e.lineEnd=Ze,te=[],Kt=[]},polygonEnd:function(){_e.point=Dt,_e.lineStart=oe,_e.lineEnd=ne,te=u.merge(te);var Je=Yt(Kt,ni);te.length?(xr||(Ir.polygonStart(),xr=!0),Bo(te,Ps,Je,tn,Ir)):Je&&(xr||(Ir.polygonStart(),xr=!0),Ir.lineStart(),tn(null,null,1,Ir),Ir.lineEnd()),xr&&(Ir.polygonEnd(),xr=!1),te=Kt=null},sphere:function(){Ir.polygonStart(),Ir.lineStart(),tn(null,null,1,Ir),Ir.lineEnd(),Ir.polygonEnd()}};function Dt(nn,Je){var vn=fr(nn,Je);Pe(nn=vn[0],Je=vn[1])&&Ir.point(nn,Je)}function zt(nn,Je){var vn=fr(nn,Je);Zr.point(vn[0],vn[1])}function oe(){_e.point=zt,Zr.lineStart()}function ne(){_e.point=Dt,Zr.lineEnd()}function fe(nn,Je){Ie.push([nn,Je]);var vn=fr(nn,Je);ci.point(vn[0],vn[1])}function Fe(){ci.lineStart(),Ie=[]}function Ze(){fe(Ie[0][0],Ie[0][1]),ci.lineEnd();var nn=ci.clean(),Je=zr.result(),vn,fn=Je.length,Yn,kn,Vn;if(Ie.pop(),Kt.push(Ie),Ie=null,!!fn){if(nn&1){if(kn=Je[0],(Yn=kn.length-1)>0){for(xr||(Ir.polygonStart(),xr=!0),Ir.lineStart(),vn=0;vn<Yn;++vn)Ir.point((Vn=kn[vn])[0],Vn[1]);Ir.lineEnd()}return}fn>1&&nn&2&&Je.push(Je.pop().concat(Je.shift())),te.push(Je.filter(cs))}}return _e}};function cs(we){return we.length>1}function Ps(we,Pe){return((we=we.x)[0]<0?we[1]-o-n:o-we[1])-((Pe=Pe.x)[0]<0?Pe[1]-o-n:o-Pe[1])}var ol=Js(function(){return!0},Al,Uu,[-a,-o]);function Al(we){var Pe=NaN,hn=NaN,tn=NaN,On;return{lineStart:function(){we.lineStart(),On=1},point:function(Ir,Zr){var ni=Ir>0?a:-a,zr=g(Ir-Pe);g(zr-a)<n?(we.point(Pe,hn=(hn+Zr)/2>0?o:-o),we.point(tn,hn),we.lineEnd(),we.lineStart(),we.point(ni,hn),we.point(Ir,hn),On=0):tn!==ni&&zr>=a&&(g(Pe-tn)<n&&(Pe-=tn*n),g(Ir-ni)<n&&(Ir-=ni*n),hn=Fl(Pe,hn,Ir,Zr),we.point(tn,hn),we.lineEnd(),we.lineStart(),we.point(ni,hn),On=0),we.point(Pe=Ir,hn=Zr),tn=ni},lineEnd:function(){we.lineEnd(),Pe=hn=NaN},clean:function(){return 2-On}}}function Fl(we,Pe,hn,tn){var On,fr,Ir=A(we-hn);return g(Ir)>n?m((A(Pe)*(fr=M(tn))*A(hn)-A(tn)*(On=M(Pe))*A(we))/(On*fr*Ir)):(Pe+tn)/2}function Uu(we,Pe,hn,tn){var On;if(we==null)On=hn*o,tn.point(-a,On),tn.point(0,On),tn.point(a,On),tn.point(a,0),tn.point(a,-On),tn.point(0,-On),tn.point(-a,-On),tn.point(-a,0),tn.point(-a,On);else if(g(we[0]-Pe[0])>n){var fr=we[0]<Pe[0]?a:-a;On=hn*fr/2,tn.point(-fr,On),tn.point(0,On),tn.point(fr,On)}else tn.point(Pe[0],Pe[1])}var Xu=function(Pe,hn){var tn=M(Pe),On=tn>0,fr=g(tn)>n;function Ir(xr,Kt,te,Ie){io(Ie,Pe,hn,te,xr,Kt)}function Zr(xr,Kt){return M(xr)*M(Kt)>tn}function ni(xr){var Kt,te,Ie,_e,Dt;return{lineStart:function(){_e=Ie=!1,Dt=1},point:function(oe,ne){var fe=[oe,ne],Fe,Ze=Zr(oe,ne),nn=On?Ze?0:ci(oe,ne):Ze?ci(oe+(oe<0?a:-a),ne):0;if(!Kt&&(_e=Ie=Ze)&&xr.lineStart(),Ze!==Ie&&(Fe=zr(Kt,fe),(!Fe||Ra(Kt,Fe)||Ra(fe,Fe))&&(fe[0]+=n,fe[1]+=n,Ze=Zr(fe[0],fe[1]))),Ze!==Ie)Dt=0,Ze?(xr.lineStart(),Fe=zr(fe,Kt),xr.point(Fe[0],Fe[1])):(Fe=zr(Kt,fe),xr.point(Fe[0],Fe[1]),xr.lineEnd()),Kt=Fe;else if(fr&&Kt&&On^Ze){var Je;!(nn&te)&&(Je=zr(fe,Kt,!0))&&(Dt=0,On?(xr.lineStart(),xr.point(Je[0][0],Je[0][1]),xr.point(Je[1][0],Je[1][1]),xr.lineEnd()):(xr.point(Je[1][0],Je[1][1]),xr.lineEnd(),xr.lineStart(),xr.point(Je[0][0],Je[0][1])))}Ze&&(!Kt||!Ra(Kt,fe))&&xr.point(fe[0],fe[1]),Kt=fe,Ie=Ze,te=nn},lineEnd:function(){Ie&&xr.lineEnd(),Kt=null},clean:function(){return Dt|(_e&&Ie)<<1}}}function zr(xr,Kt,te){var Ie=k(xr),_e=k(Kt),Dt=[1,0,0],zt=it(Ie,_e),oe=ot(zt,zt),ne=zt[0],fe=oe-ne*ne;if(!fe)return!te&&xr;var Fe=tn*oe/fe,Ze=-tn*ne/fe,nn=it(Dt,zt),Je=Et(Dt,Fe),vn=Et(zt,Ze);X(Je,vn);var fn=nn,Yn=ot(Je,fn),kn=ot(fn,fn),Vn=Yn*Yn-kn*(ot(Je,Je)-1);if(!(Vn<0)){var Gn=L(Vn),hr=Et(fn,(-Yn-Gn)/kn);if(X(hr,Je),hr=gt(hr),!te)return hr;var mr=xr[0],Yr=Kt[0],gi=xr[1],Br=Kt[1],ai;Yr<mr&&(ai=mr,mr=Yr,Yr=ai);var fi=Yr-mr,Zi=g(fi-a)<n,Ri=Zi||fi<n;if(!Zi&&Br<gi&&(ai=gi,gi=Br,Br=ai),Ri?Zi?gi+Br>0^hr[1]<(g(hr[0]-mr)<n?gi:Br):gi<=hr[1]&&hr[1]<=Br:fi>a^(mr<=hr[0]&&hr[0]<=Yr)){var Sa=Et(fn,(-Yn+Gn)/kn);return X(Sa,Je),[hr,gt(Sa)]}}}function ci(xr,Kt){var te=On?Pe:a-Pe,Ie=0;return xr<-te?Ie|=1:xr>te&&(Ie|=2),Kt<-te?Ie|=4:Kt>te&&(Ie|=8),Ie}return Js(Zr,ni,Ir,On?[0,-Pe]:[-a,Pe-a])},sl=function(Pe){return{stream:Eu(Pe)}};function Eu(we){return function(Pe){var hn=new uu;for(var tn in we)hn[tn]=we[tn];return hn.stream=Pe,hn}}function uu(){}uu.prototype={constructor:uu,point:function(Pe,hn){this.stream.point(Pe,hn)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ju(we,Pe,hn){var tn=Pe[1][0]-Pe[0][0],On=Pe[1][1]-Pe[0][1],fr=we.clipExtent&&we.clipExtent();we.scale(150).translate([0,0]),fr!=null&&we.clipExtent(null),ut(hn,we.stream(vs));var Ir=vs.result(),Zr=Math.min(tn/(Ir[1][0]-Ir[0][0]),On/(Ir[1][1]-Ir[0][1])),ni=+Pe[0][0]+(tn-Zr*(Ir[1][0]+Ir[0][0]))/2,zr=+Pe[0][1]+(On-Zr*(Ir[1][1]+Ir[0][1]))/2;return fr!=null&&we.clipExtent(fr),we.scale(Zr*150).translate([ni,zr])}function Ls(we,Pe,hn){return Ju(we,[[0,0],Pe],hn)}var El=16,sc=M(30*b),Cl=function(Pe,hn){return+hn?Yl(Pe,hn):zl(Pe)};function zl(we){return Eu({point:function(hn,tn){hn=we(hn,tn),this.stream.point(hn[0],hn[1])}})}function Yl(we,Pe){function hn(tn,On,fr,Ir,Zr,ni,zr,ci,xr,Kt,te,Ie,_e,Dt){var zt=zr-tn,oe=ci-On,ne=zt*zt+oe*oe;if(ne>4*Pe&&_e--){var fe=Ir+Kt,Fe=Zr+te,Ze=ni+Ie,nn=L(fe*fe+Fe*Fe+Ze*Ze),Je=Z(Ze/=nn),vn=g(g(Ze)-1)<n||g(fr-xr)<n?(fr+xr)/2:_(Fe,fe),fn=we(vn,Je),Yn=fn[0],kn=fn[1],Vn=Yn-tn,Gn=kn-On,hr=oe*Vn-zt*Gn;(hr*hr/ne>Pe||g((zt*Vn+oe*Gn)/ne-.5)>.3||Ir*Kt+Zr*te+ni*Ie<sc)&&(hn(tn,On,fr,Ir,Zr,ni,Yn,kn,vn,fe/=nn,Fe/=nn,Ze,_e,Dt),Dt.point(Yn,kn),hn(Yn,kn,vn,fe,Fe,Ze,zr,ci,xr,Kt,te,Ie,_e,Dt))}}return function(tn){var On,fr,Ir,Zr,ni,zr,ci,xr,Kt,te,Ie,_e,Dt={point:zt,lineStart:oe,lineEnd:fe,polygonStart:function(){tn.polygonStart(),Dt.lineStart=Fe},polygonEnd:function(){tn.polygonEnd(),Dt.lineStart=oe}};function zt(Je,vn){Je=we(Je,vn),tn.point(Je[0],Je[1])}function oe(){xr=NaN,Dt.point=ne,tn.lineStart()}function ne(Je,vn){var fn=k([Je,vn]),Yn=we(Je,vn);hn(xr,Kt,ci,te,Ie,_e,xr=Yn[0],Kt=Yn[1],ci=Je,te=fn[0],Ie=fn[1],_e=fn[2],El,tn),tn.point(xr,Kt)}function fe(){Dt.point=zt,tn.lineEnd()}function Fe(){oe(),Dt.point=Ze,Dt.lineEnd=nn}function Ze(Je,vn){ne(On=Je,vn),fr=xr,Ir=Kt,Zr=te,ni=Ie,zr=_e,Dt.point=ne}function nn(){hn(xr,Kt,ci,te,Ie,_e,fr,Ir,On,Zr,ni,zr,El,tn),Dt.lineEnd=fe,fe()}return Dt}}var dc=Eu({point:function(Pe,hn){this.stream.point(Pe*b,hn*b)}});function $u(we){return Ol(function(){return we})()}function Ol(we){var Pe,hn=150,tn=480,On=250,fr,Ir,Zr=0,ni=0,zr=0,ci=0,xr=0,Kt,te,Ie=null,_e=ol,Dt=null,zt,oe,ne,fe=cr,Fe=.5,Ze=Cl(Yn,Fe),nn,Je;function vn(Gn){return Gn=te(Gn[0]*b,Gn[1]*b),[Gn[0]*hn+fr,Ir-Gn[1]*hn]}function fn(Gn){return Gn=te.invert((Gn[0]-fr)/hn,(Ir-Gn[1])/hn),Gn&&[Gn[0]*v,Gn[1]*v]}function Yn(Gn,hr){return Gn=Pe(Gn,hr),[Gn[0]*hn+fr,Ir-Gn[1]*hn]}vn.stream=function(Gn){return nn&&Je===Gn?nn:nn=dc(_e(Kt,Ze(fe(Je=Gn))))},vn.clipAngle=function(Gn){return arguments.length?(_e=+Gn?Xu(Ie=Gn*b,6*b):(Ie=null,ol),Vn()):Ie*v},vn.clipExtent=function(Gn){return arguments.length?(fe=Gn==null?(Dt=zt=oe=ne=null,cr):Hs(Dt=+Gn[0][0],zt=+Gn[0][1],oe=+Gn[1][0],ne=+Gn[1][1]),Vn()):Dt==null?null:[[Dt,zt],[oe,ne]]},vn.scale=function(Gn){return arguments.length?(hn=+Gn,kn()):hn},vn.translate=function(Gn){return arguments.length?(tn=+Gn[0],On=+Gn[1],kn()):[tn,On]},vn.center=function(Gn){return arguments.length?(Zr=Gn[0]%360*b,ni=Gn[1]%360*b,kn()):[Zr*v,ni*v]},vn.rotate=function(Gn){return arguments.length?(zr=Gn[0]%360*b,ci=Gn[1]%360*b,xr=Gn.length>2?Gn[2]%360*b:0,kn()):[zr*v,ci*v,xr*v]},vn.precision=function(Gn){return arguments.length?(Ze=Cl(Yn,Fe=Gn*Gn),Vn()):L(Fe)},vn.fitExtent=function(Gn,hr){return Ju(vn,Gn,hr)},vn.fitSize=function(Gn,hr){return Ls(vn,Gn,hr)};function kn(){te=Fr(Kt=Ta(zr,ci,xr),Pe);var Gn=Pe(Zr,ni);return fr=tn-Gn[0]*hn,Ir=On+Gn[1]*hn,Vn()}function Vn(){return nn=Je=null,vn}return function(){return Pe=we.apply(this,arguments),vn.invert=Pe.invert&&fn,kn()}}function Ul(we){var Pe=0,hn=a/3,tn=Ol(we),On=tn(Pe,hn);return On.parallels=function(fr){return arguments.length?tn(Pe=fr[0]*b,hn=fr[1]*b):[Pe*v,hn*v]},On}function wo(we){var Pe=M(we);function hn(tn,On){return[tn*Pe,A(On)/Pe]}return hn.invert=function(tn,On){return[tn/Pe,Z(On*Pe)]},hn}function ho(we,Pe){var hn=A(we),tn=(hn+A(Pe))/2;if(g(tn)<n)return wo(we);var On=1+hn*(2*tn-hn),fr=L(On)/tn;function Ir(Zr,ni){var zr=L(On-2*tn*A(ni))/tn;return[zr*A(Zr*=tn),fr-zr*M(Zr)]}return Ir.invert=function(Zr,ni){var zr=fr-ni;return[_(Zr,g(zr))/tn*O(zr),Z((On-(Zr*Zr+zr*zr)*tn*tn)/(2*tn))]},Ir}var Sl=function(){return Ul(ho).scale(155.424).center([0,33.6442])},ul=function(){return Sl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function Ys(we){var Pe=we.length;return{point:function(tn,On){for(var fr=-1;++fr<Pe;)we[fr].point(tn,On)},sphere:function(){for(var tn=-1;++tn<Pe;)we[tn].sphere()},lineStart:function(){for(var tn=-1;++tn<Pe;)we[tn].lineStart()},lineEnd:function(){for(var tn=-1;++tn<Pe;)we[tn].lineEnd()},polygonStart:function(){for(var tn=-1;++tn<Pe;)we[tn].polygonStart()},polygonEnd:function(){for(var tn=-1;++tn<Pe;)we[tn].polygonEnd()}}}var Da=function(){var Pe,hn,tn=ul(),On,fr=Sl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Ir,Zr=Sl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),ni,zr,ci={point:function(Ie,_e){zr=[Ie,_e]}};function xr(te){var Ie=te[0],_e=te[1];return zr=null,On.point(Ie,_e),zr||(Ir.point(Ie,_e),zr)||(ni.point(Ie,_e),zr)}xr.invert=function(te){var Ie=tn.scale(),_e=tn.translate(),Dt=(te[0]-_e[0])/Ie,zt=(te[1]-_e[1])/Ie;return(zt>=.12&&zt<.234&&Dt>=-.425&&Dt<-.214?fr:zt>=.166&&zt<.234&&Dt>=-.214&&Dt<-.115?Zr:tn).invert(te)},xr.stream=function(te){return Pe&&hn===te?Pe:Pe=Ys([tn.stream(hn=te),fr.stream(te),Zr.stream(te)])},xr.precision=function(te){return arguments.length?(tn.precision(te),fr.precision(te),Zr.precision(te),Kt()):tn.precision()},xr.scale=function(te){return arguments.length?(tn.scale(te),fr.scale(te*.35),Zr.scale(te),xr.translate(tn.translate())):tn.scale()},xr.translate=function(te){if(!arguments.length)return tn.translate();var Ie=tn.scale(),_e=+te[0],Dt=+te[1];return On=tn.translate(te).clipExtent([[_e-.455*Ie,Dt-.238*Ie],[_e+.455*Ie,Dt+.238*Ie]]).stream(ci),Ir=fr.translate([_e-.307*Ie,Dt+.201*Ie]).clipExtent([[_e-.425*Ie+n,Dt+.12*Ie+n],[_e-.214*Ie-n,Dt+.234*Ie-n]]).stream(ci),ni=Zr.translate([_e-.205*Ie,Dt+.212*Ie]).clipExtent([[_e-.214*Ie+n,Dt+.166*Ie+n],[_e-.115*Ie-n,Dt+.234*Ie-n]]).stream(ci),Kt()},xr.fitExtent=function(te,Ie){return Ju(xr,te,Ie)},xr.fitSize=function(te,Ie){return Ls(xr,te,Ie)};function Kt(){return Pe=hn=null,xr}return xr.scale(1070)};function mo(we){return function(Pe,hn){var tn=M(Pe),On=M(hn),fr=we(tn*On);return[fr*On*A(Pe),fr*A(hn)]}}function Gs(we){return function(Pe,hn){var tn=L(Pe*Pe+hn*hn),On=we(tn),fr=A(On),Ir=M(On);return[_(Pe*fr,tn*Ir),Z(tn&&hn*fr/tn)]}}var wl=mo(function(we){return L(2/(1+we))});wl.invert=Gs(function(we){return 2*Z(we/2)});var ll=function(){return $u(wl).scale(124.75).clipAngle(180-.001)},Qu=mo(function(we){return(we=F(we))&&we/A(we)});Qu.invert=Gs(function(we){return we});var xc=function(){return $u(Qu).scale(79.4188).clipAngle(180-.001)};function Zl(we,Pe){return[we,S(H((o+Pe)/2))]}Zl.invert=function(we,Pe){return[we,2*m(y(Pe))-o]};var qu=function(){return ru(Zl).scale(961/f)};function ru(we){var Pe=$u(we),hn=Pe.center,tn=Pe.scale,On=Pe.translate,fr=Pe.clipExtent,Ir=null,Zr,ni,zr;Pe.scale=function(xr){return arguments.length?(tn(xr),ci()):tn()},Pe.translate=function(xr){return arguments.length?(On(xr),ci()):On()},Pe.center=function(xr){return arguments.length?(hn(xr),ci()):hn()},Pe.clipExtent=function(xr){return arguments.length?(xr==null?Ir=Zr=ni=zr=null:(Ir=+xr[0][0],Zr=+xr[0][1],ni=+xr[1][0],zr=+xr[1][1]),ci()):Ir==null?null:[[Ir,Zr],[ni,zr]]};function ci(){var xr=a*tn(),Kt=Pe(Do(Pe.rotate()).invert([0,0]));return fr(Ir==null?[[Kt[0]-xr,Kt[1]-xr],[Kt[0]+xr,Kt[1]+xr]]:we===Zl?[[Math.max(Kt[0]-xr,Ir),Zr],[Math.min(Kt[0]+xr,ni),zr]]:[[Ir,Math.max(Kt[1]-xr,Zr)],[ni,Math.min(Kt[1]+xr,zr)]])}return ci()}function Zs(we){return H((o+we)/2)}function es(we,Pe){var hn=M(we),tn=we===Pe?A(we):S(hn/M(Pe))/S(Zs(Pe)/Zs(we)),On=hn*P(Zs(we),tn)/tn;if(!tn)return Zl;function fr(Ir,Zr){On>0?Zr<-o+n&&(Zr=-o+n):Zr>o-n&&(Zr=o-n);var ni=On/P(Zs(Zr),tn);return[ni*A(tn*Ir),On-ni*M(tn*Ir)]}return fr.invert=function(Ir,Zr){var ni=On-Zr,zr=O(tn)*L(Ir*Ir+ni*ni);return[_(Ir,g(ni))/tn*O(ni),2*m(P(On/zr,1/tn))-o]},fr}var iu=function(){return Ul(es).scale(109.5).parallels([30,30])};function ku(we,Pe){return[we,Pe]}ku.invert=ku;var us=function(){return $u(ku).scale(152.63)};function Yi(we,Pe){var hn=M(we),tn=we===Pe?A(we):(hn-M(Pe))/(Pe-we),On=hn/tn+we;if(g(tn)<n)return ku;function fr(Ir,Zr){var ni=On-Zr,zr=tn*Ir;return[ni*A(zr),On-ni*M(zr)]}return fr.invert=function(Ir,Zr){var ni=On-Zr;return[_(Ir,g(ni))/tn*O(ni),On-O(tn)*L(Ir*Ir+ni*ni)]},fr}var Fs=function(){return Ul(Yi).scale(131.154).center([0,13.9389])};function tl(we,Pe){var hn=M(Pe),tn=M(we)*hn;return[hn*A(we)/tn,A(Pe)/tn]}tl.invert=Gs(m);var Gu=function(){return $u(tl).scale(144.049).clipAngle(60)};function Go(we,Pe,hn,tn){return we===1&&Pe===1&&hn===0&&tn===0?cr:Eu({point:function(fr,Ir){this.stream.point(fr*we+hn,Ir*Pe+tn)}})}var Yo=function(){var Pe=1,hn=0,tn=0,On=1,fr=1,Ir=cr,Zr=null,ni,zr,ci,xr=cr,Kt,te,Ie;function _e(){return Kt=te=null,Ie}return Ie={stream:function(zt){return Kt&&te===zt?Kt:Kt=Ir(xr(te=zt))},clipExtent:function(zt){return arguments.length?(xr=zt==null?(Zr=ni=zr=ci=null,cr):Hs(Zr=+zt[0][0],ni=+zt[0][1],zr=+zt[1][0],ci=+zt[1][1]),_e()):Zr==null?null:[[Zr,ni],[zr,ci]]},scale:function(zt){return arguments.length?(Ir=Go((Pe=+zt)*On,Pe*fr,hn,tn),_e()):Pe},translate:function(zt){return arguments.length?(Ir=Go(Pe*On,Pe*fr,hn=+zt[0],tn=+zt[1]),_e()):[hn,tn]},reflectX:function(zt){return arguments.length?(Ir=Go(Pe*(On=zt?-1:1),Pe*fr,hn,tn),_e()):On<0},reflectY:function(zt){return arguments.length?(Ir=Go(Pe*On,Pe*(fr=zt?-1:1),hn,tn),_e()):fr<0},fitExtent:function(zt,oe){return Ju(Ie,zt,oe)},fitSize:function(zt,oe){return Ls(Ie,zt,oe)}}};function Su(we,Pe){return[M(Pe)*A(we),A(Pe)]}Su.invert=Gs(Z);var Mi=function(){return $u(Su).scale(249.5).clipAngle(90+n)};function _u(we,Pe){var hn=M(Pe),tn=1+M(we)*hn;return[hn*A(we)/tn,A(Pe)/tn]}_u.invert=Gs(function(we){return 2*m(we)});var Iu=function(){return $u(_u).scale(250).clipAngle(142)};function Lu(we,Pe){return[S(H((o+Pe)/2)),-we]}Lu.invert=function(we,Pe){return[-Pe,2*m(y(we))-o]};var $s=function(){var Pe=ru(Lu),hn=Pe.center,tn=Pe.rotate;return Pe.center=function(On){return arguments.length?hn([-On[1],On[0]]):(On=hn(),[On[1],-On[0]])},Pe.rotate=function(On){return arguments.length?tn([On[0],On[1],On.length>2?On[2]+90:90]):(On=tn(),[On[0],On[1],On[2]-90])},tn([0,0,90]).scale(159.155)};t.geoArea=at,t.geoBounds=Qt,t.geoCentroid=br,t.geoCircle=Ko,t.geoClipExtent=Ne,t.geoContains=Co,t.geoDistance=Eo,t.geoGraticule=ss,t.geoGraticule10=ja,t.geoInterpolate=gn,t.geoLength=sa,t.geoPath=bu,t.geoAlbers=ul,t.geoAlbersUsa=Da,t.geoAzimuthalEqualArea=ll,t.geoAzimuthalEqualAreaRaw=wl,t.geoAzimuthalEquidistant=xc,t.geoAzimuthalEquidistantRaw=Qu,t.geoConicConformal=iu,t.geoConicConformalRaw=es,t.geoConicEqualArea=Sl,t.geoConicEqualAreaRaw=ho,t.geoConicEquidistant=Fs,t.geoConicEquidistantRaw=Yi,t.geoEquirectangular=us,t.geoEquirectangularRaw=ku,t.geoGnomonic=Gu,t.geoGnomonicRaw=tl,t.geoIdentity=Yo,t.geoProjection=$u,t.geoProjectionMutator=Ol,t.geoMercator=qu,t.geoMercatorRaw=Zl,t.geoOrthographic=Mi,t.geoOrthographicRaw=Su,t.geoStereographic=Iu,t.geoStereographicRaw=_u,t.geoTransverseMercator=$s,t.geoTransverseMercatorRaw=Lu,t.geoRotation=Do,t.geoStream=ut,t.geoTransform=sl,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-geo@2.0.1@d3-geo/dist/d3-geo.js":function(E,T,e){(function(t,u){u(T,e("./node_modules/_d3-array@2.11.0@d3-array/dist/d3-array.js"))})(this,function(t,u){"use strict";var s=1e-6,c=1e-12,r=Math.PI,h=r/2,n=r/4,i=r*2,a=180/r,o=r/180,l=Math.abs,f=Math.atan,v=Math.atan2,b=Math.cos,g=Math.ceil,m=Math.exp,_=Math.hypot,M=Math.log,x=Math.pow,y=Math.sin,S=Math.sign||function(Kt){return Kt>0?1:Kt<0?-1:0},P=Math.sqrt,A=Math.tan;function O(Kt){return Kt>1?0:Kt<-1?r:Math.acos(Kt)}function L(Kt){return Kt>1?h:Kt<-1?-h:Math.asin(Kt)}function H(Kt){return(Kt=y(Kt/2))*Kt}function F(){}function Z(Kt,te){Kt&&U.hasOwnProperty(Kt.type)&&U[Kt.type](Kt,te)}var G={Feature:function(te,Ie){Z(te.geometry,Ie)},FeatureCollection:function(te,Ie){for(var _e=te.features,Dt=-1,zt=_e.length;++Dt<zt;)Z(_e[Dt].geometry,Ie)}},U={Sphere:function(te,Ie){Ie.sphere()},Point:function(te,Ie){te=te.coordinates,Ie.point(te[0],te[1],te[2])},MultiPoint:function(te,Ie){for(var _e=te.coordinates,Dt=-1,zt=_e.length;++Dt<zt;)te=_e[Dt],Ie.point(te[0],te[1],te[2])},LineString:function(te,Ie){Y(te.coordinates,Ie,0)},MultiLineString:function(te,Ie){for(var _e=te.coordinates,Dt=-1,zt=_e.length;++Dt<zt;)Y(_e[Dt],Ie,0)},Polygon:function(te,Ie){J(te.coordinates,Ie)},MultiPolygon:function(te,Ie){for(var _e=te.coordinates,Dt=-1,zt=_e.length;++Dt<zt;)J(_e[Dt],Ie)},GeometryCollection:function(te,Ie){for(var _e=te.geometries,Dt=-1,zt=_e.length;++Dt<zt;)Z(_e[Dt],Ie)}};function Y(Kt,te,Ie){var _e=-1,Dt=Kt.length-Ie,zt;for(te.lineStart();++_e<Dt;)zt=Kt[_e],te.point(zt[0],zt[1],zt[2]);te.lineEnd()}function J(Kt,te){var Ie=-1,_e=Kt.length;for(te.polygonStart();++Ie<_e;)Y(Kt[Ie],te,1);te.polygonEnd()}function rt(Kt,te){Kt&&G.hasOwnProperty(Kt.type)?G[Kt.type](Kt,te):Z(Kt,te)}var ft=new u.Adder,dt=new u.Adder,ut,Lt,Ft,Ot,St,xt={point:F,lineStart:F,lineEnd:F,polygonStart:function(){ft=new u.Adder,xt.lineStart=At,xt.lineEnd=nt},polygonEnd:function(){var te=+ft;dt.add(te<0?i+te:te),this.lineStart=this.lineEnd=this.point=F},sphere:function(){dt.add(i)}};function At(){xt.point=Mt}function nt(){z(ut,Lt)}function Mt(Kt,te){xt.point=z,ut=Kt,Lt=te,Kt*=o,te*=o,Ft=Kt,Ot=b(te=te/2+n),St=y(te)}function z(Kt,te){Kt*=o,te*=o,te=te/2+n;var Ie=Kt-Ft,_e=Ie>=0?1:-1,Dt=_e*Ie,zt=b(te),oe=y(te),ne=St*oe,fe=Ot*zt+ne*b(Dt),Fe=ne*_e*y(Dt);ft.add(v(Fe,fe)),Ft=Kt,Ot=zt,St=oe}function Q(Kt){return dt=new u.Adder,rt(Kt,xt),dt*2}function ht(Kt){return[v(Kt[1],Kt[0]),L(Kt[2])]}function et(Kt){var te=Kt[0],Ie=Kt[1],_e=b(Ie);return[_e*b(te),_e*y(te),y(Ie)]}function at(Kt,te){return Kt[0]*te[0]+Kt[1]*te[1]+Kt[2]*te[2]}function gt(Kt,te){return[Kt[1]*te[2]-Kt[2]*te[1],Kt[2]*te[0]-Kt[0]*te[2],Kt[0]*te[1]-Kt[1]*te[0]]}function k(Kt,te){Kt[0]+=te[0],Kt[1]+=te[1],Kt[2]+=te[2]}function ot(Kt,te){return[Kt[0]*te,Kt[1]*te,Kt[2]*te]}function it(Kt){var te=P(Kt[0]*Kt[0]+Kt[1]*Kt[1]+Kt[2]*Kt[2]);Kt[0]/=te,Kt[1]/=te,Kt[2]/=te}var X,Et,vt,Nt,$t,ee,kt,Wt,ae,le,je,Oe={point:We,lineStart:wn,lineEnd:er,polygonStart:function(){Oe.point=wr,Oe.lineStart=on,Oe.lineEnd=en,ae=new u.Adder,xt.polygonStart()},polygonEnd:function(){xt.polygonEnd(),Oe.point=We,Oe.lineStart=wn,Oe.lineEnd=er,ft<0?(X=-(vt=180),Et=-(Nt=90)):ae>s?Nt=90:ae<-s&&(Et=-90),je[0]=X,je[1]=vt},sphere:function(){X=-(vt=180),Et=-(Nt=90)}};function We(Kt,te){le.push(je=[X=Kt,vt=Kt]),te<Et&&(Et=te),te>Nt&&(Nt=te)}function Ye(Kt,te){var Ie=et([Kt*o,te*o]);if(Wt){var _e=gt(Wt,Ie),Dt=[_e[1],-_e[0],0],zt=gt(Dt,_e);it(zt),zt=ht(zt);var oe=Kt-$t,ne=oe>0?1:-1,fe=zt[0]*a*ne,Fe,Ze=l(oe)>180;Ze^(ne*$t<fe&&fe<ne*Kt)?(Fe=zt[1]*a,Fe>Nt&&(Nt=Fe)):(fe=(fe+360)%360-180,Ze^(ne*$t<fe&&fe<ne*Kt)?(Fe=-zt[1]*a,Fe<Et&&(Et=Fe)):(te<Et&&(Et=te),te>Nt&&(Nt=te))),Ze?Kt<$t?An(X,Kt)>An(X,vt)&&(vt=Kt):An(Kt,vt)>An(X,vt)&&(X=Kt):vt>=X?(Kt<X&&(X=Kt),Kt>vt&&(vt=Kt)):Kt>$t?An(X,Kt)>An(X,vt)&&(vt=Kt):An(Kt,vt)>An(X,vt)&&(X=Kt)}else le.push(je=[X=Kt,vt=Kt]);te<Et&&(Et=te),te>Nt&&(Nt=te),Wt=Ie,$t=Kt}function wn(){Oe.point=Ye}function er(){je[0]=X,je[1]=vt,Oe.point=We,Wt=null}function wr(Kt,te){if(Wt){var Ie=Kt-$t;ae.add(l(Ie)>180?Ie+(Ie>0?360:-360):Ie)}else ee=Kt,kt=te;xt.point(Kt,te),Ye(Kt,te)}function on(){xt.lineStart()}function en(){wr(ee,kt),xt.lineEnd(),l(ae)>s&&(X=-(vt=180)),je[0]=X,je[1]=vt,Wt=null}function An(Kt,te){return(te-=Kt)<0?te+360:te}function jn(Kt,te){return Kt[0]-te[0]}function pr(Kt,te){return Kt[0]<=Kt[1]?Kt[0]<=te&&te<=Kt[1]:te<Kt[0]||Kt[1]<te}function di(Kt){var te,Ie,_e,Dt,zt,oe,ne;if(Nt=vt=-(X=Et=Infinity),le=[],rt(Kt,Oe),Ie=le.length){for(le.sort(jn),te=1,_e=le[0],zt=[_e];te<Ie;++te)Dt=le[te],pr(_e,Dt[0])||pr(_e,Dt[1])?(An(_e[0],Dt[1])>An(_e[0],_e[1])&&(_e[1]=Dt[1]),An(Dt[0],_e[1])>An(_e[0],_e[1])&&(_e[0]=Dt[0])):zt.push(_e=Dt);for(oe=-Infinity,Ie=zt.length-1,te=0,_e=zt[Ie];te<=Ie;_e=Dt,++te)Dt=zt[te],(ne=An(_e[1],Dt[0]))>oe&&(oe=ne,X=Dt[0],vt=_e[1])}return le=je=null,X===Infinity||Et===Infinity?[[NaN,NaN],[NaN,NaN]]:[[X,Et],[vt,Nt]]}var Ce,Me,Qt,pe,Vt,re,Te,ue,xe,Ke,Rn,tr,Pn,dn,Ar,or,cn={sphere:F,point:Pr,lineStart:Re,lineEnd:En,polygonStart:function(){cn.lineStart=xn,cn.lineEnd=Nn},polygonEnd:function(){cn.lineStart=Re,cn.lineEnd=En}};function Pr(Kt,te){Kt*=o,te*=o;var Ie=b(te);Sr(Ie*b(Kt),Ie*y(Kt),y(te))}function Sr(Kt,te,Ie){++Ce,Qt+=(Kt-Qt)/Ce,pe+=(te-pe)/Ce,Vt+=(Ie-Vt)/Ce}function Re(){cn.point=$e}function $e(Kt,te){Kt*=o,te*=o;var Ie=b(te);dn=Ie*b(Kt),Ar=Ie*y(Kt),or=y(te),cn.point=Ve,Sr(dn,Ar,or)}function Ve(Kt,te){Kt*=o,te*=o;var Ie=b(te),_e=Ie*b(Kt),Dt=Ie*y(Kt),zt=y(te),oe=v(P((oe=Ar*zt-or*Dt)*oe+(oe=or*_e-dn*zt)*oe+(oe=dn*Dt-Ar*_e)*oe),dn*_e+Ar*Dt+or*zt);Me+=oe,re+=oe*(dn+(dn=_e)),Te+=oe*(Ar+(Ar=Dt)),ue+=oe*(or+(or=zt)),Sr(dn,Ar,or)}function En(){cn.point=Pr}function xn(){cn.point=mn}function Nn(){Dn(tr,Pn),cn.point=Pr}function mn(Kt,te){tr=Kt,Pn=te,Kt*=o,te*=o,cn.point=Dn;var Ie=b(te);dn=Ie*b(Kt),Ar=Ie*y(Kt),or=y(te),Sr(dn,Ar,or)}function Dn(Kt,te){Kt*=o,te*=o;var Ie=b(te),_e=Ie*b(Kt),Dt=Ie*y(Kt),zt=y(te),oe=Ar*zt-or*Dt,ne=or*_e-dn*zt,fe=dn*Dt-Ar*_e,Fe=_(oe,ne,fe),Ze=L(Fe),nn=Fe&&-Ze/Fe;xe.add(nn*oe),Ke.add(nn*ne),Rn.add(nn*fe),Me+=Ze,re+=Ze*(dn+(dn=_e)),Te+=Ze*(Ar+(Ar=Dt)),ue+=Ze*(or+(or=zt)),Sr(dn,Ar,or)}function $n(Kt){Ce=Me=Qt=pe=Vt=re=Te=ue=0,xe=new u.Adder,Ke=new u.Adder,Rn=new u.Adder,rt(Kt,cn);var te=+xe,Ie=+Ke,_e=+Rn,Dt=_(te,Ie,_e);return Dt<c&&(te=re,Ie=Te,_e=ue,Me<s&&(te=Qt,Ie=pe,_e=Vt),Dt=_(te,Ie,_e),Dt<c)?[NaN,NaN]:[v(Ie,te)*a,L(_e/Dt)*a]}function Hn(Kt){return function(){return Kt}}function _n(Kt,te){function Ie(_e,Dt){return _e=Kt(_e,Dt),te(_e[0],_e[1])}return Kt.invert&&te.invert&&(Ie.invert=function(_e,Dt){return _e=te.invert(_e,Dt),_e&&Kt.invert(_e[0],_e[1])}),Ie}function br(Kt,te){return[l(Kt)>r?Kt+Math.round(-Kt/i)*i:Kt,te]}br.invert=br;function yr(Kt,te,Ie){return(Kt%=i)?te||Ie?_n(Ei(Kt),Ta(te,Ie)):Ei(Kt):te||Ie?Ta(te,Ie):br}function Fr(Kt){return function(te,Ie){return te+=Kt,[te>r?te-i:te<-r?te+i:te,Ie]}}function Ei(Kt){var te=Fr(Kt);return te.invert=Fr(-Kt),te}function Ta(Kt,te){var Ie=b(Kt),_e=y(Kt),Dt=b(te),zt=y(te);function oe(ne,fe){var Fe=b(fe),Ze=b(ne)*Fe,nn=y(ne)*Fe,Je=y(fe),vn=Je*Ie+Ze*_e;return[v(nn*Dt-vn*zt,Ze*Ie-Je*_e),L(vn*Dt+nn*zt)]}return oe.invert=function(ne,fe){var Fe=b(fe),Ze=b(ne)*Fe,nn=y(ne)*Fe,Je=y(fe),vn=Je*Dt-nn*zt;return[v(nn*Dt+Je*zt,Ze*Ie+vn*_e),L(vn*Ie-Ze*_e)]},oe}function Aa(Kt){Kt=yr(Kt[0]*o,Kt[1]*o,Kt.length>2?Kt[2]*o:0);function te(Ie){return Ie=Kt(Ie[0]*o,Ie[1]*o),Ie[0]*=a,Ie[1]*=a,Ie}return te.invert=function(Ie){return Ie=Kt.invert(Ie[0]*o,Ie[1]*o),Ie[0]*=a,Ie[1]*=a,Ie},te}function eo(Kt,te,Ie,_e,Dt,zt){if(!!Ie){var oe=b(te),ne=y(te),fe=_e*Ie;Dt==null?(Dt=te+_e*i,zt=te-fe/2):(Dt=Ho(oe,Dt),zt=Ho(oe,zt),(_e>0?Dt<zt:Dt>zt)&&(Dt+=_e*i));for(var Fe,Ze=Dt;_e>0?Ze>zt:Ze<zt;Ze-=fe)Fe=ht([oe,-ne*b(Ze),-ne*y(Ze)]),Kt.point(Fe[0],Fe[1])}}function Ho(Kt,te){te=et(te),te[0]-=Kt,it(te);var Ie=O(-te[1]);return((-te[2]<0?-Ie:Ie)+i-s)%i}function Do(){var Kt=Hn([0,0]),te=Hn(90),Ie=Hn(6),_e,Dt,zt={point:oe};function oe(fe,Fe){_e.push(fe=Dt(fe,Fe)),fe[0]*=a,fe[1]*=a}function ne(){var fe=Kt.apply(this,arguments),Fe=te.apply(this,arguments)*o,Ze=Ie.apply(this,arguments)*o;return _e=[],Dt=yr(-fe[0]*o,-fe[1]*o,0).invert,eo(zt,Fe,Ze,1),fe={type:"Polygon",coordinates:[_e]},_e=Dt=null,fe}return ne.center=function(fe){return arguments.length?(Kt=typeof fe=="function"?fe:Hn([+fe[0],+fe[1]]),ne):Kt},ne.radius=function(fe){return arguments.length?(te=typeof fe=="function"?fe:Hn(+fe),ne):te},ne.precision=function(fe){return arguments.length?(Ie=typeof fe=="function"?fe:Hn(+fe),ne):Ie},ne}function io(){var Kt=[],te;return{point:function(_e,Dt,zt){te.push([_e,Dt,zt])},lineStart:function(){Kt.push(te=[])},lineEnd:F,rejoin:function(){Kt.length>1&&Kt.push(Kt.pop().concat(Kt.shift()))},result:function(){var _e=Kt;return Kt=[],te=null,_e}}}function ds(Kt,te){return l(Kt[0]-te[0])<s&&l(Kt[1]-te[1])<s}function Ko(Kt,te,Ie,_e){this.x=Kt,this.z=te,this.o=Ie,this.e=_e,this.v=!1,this.n=this.p=null}function jo(Kt,te,Ie,_e,Dt){var zt=[],oe=[],ne,fe;if(Kt.forEach(function(fn){if(!((Yn=fn.length-1)<=0)){var Yn,kn=fn[0],Vn=fn[Yn],Gn;if(ds(kn,Vn)){if(!kn[2]&&!Vn[2]){for(Dt.lineStart(),ne=0;ne<Yn;++ne)Dt.point((kn=fn[ne])[0],kn[1]);Dt.lineEnd();return}Vn[0]+=2*s}zt.push(Gn=new Ko(kn,fn,null,!0)),oe.push(Gn.o=new Ko(kn,null,Gn,!1)),zt.push(Gn=new Ko(Vn,fn,null,!1)),oe.push(Gn.o=new Ko(Vn,null,Gn,!0))}}),!!zt.length){for(oe.sort(te),bs(zt),bs(oe),ne=0,fe=oe.length;ne<fe;++ne)oe[ne].e=Ie=!Ie;for(var Fe=zt[0],Ze,nn;;){for(var Je=Fe,vn=!0;Je.v;)if((Je=Je.n)===Fe)return;Ze=Je.z,Dt.lineStart();do{if(Je.v=Je.o.v=!0,Je.e){if(vn)for(ne=0,fe=Ze.length;ne<fe;++ne)Dt.point((nn=Ze[ne])[0],nn[1]);else _e(Je.x,Je.n.x,1,Dt);Je=Je.n}else{if(vn)for(Ze=Je.p.z,ne=Ze.length-1;ne>=0;--ne)Dt.point((nn=Ze[ne])[0],nn[1]);else _e(Je.x,Je.p.x,-1,Dt);Je=Je.p}Je=Je.o,Ze=Je.z,vn=!vn}while(!Je.v);Dt.lineEnd()}}}function bs(Kt){if(!!(te=Kt.length)){for(var te,Ie=0,_e=Kt[0],Dt;++Ie<te;)_e.n=Dt=Kt[Ie],Dt.p=_e,_e=Dt;_e.n=Dt=Kt[0],Dt.p=_e}}function Ra(Kt){return l(Kt[0])<=r?Kt[0]:S(Kt[0])*((l(Kt[0])+r)%i-r)}function Xo(Kt,te){var Ie=Ra(te),_e=te[1],Dt=y(_e),zt=[y(Ie),-b(Ie),0],oe=0,ne=0,fe=new u.Adder;Dt===1?_e=h+s:Dt===-1&&(_e=-h-s);for(var Fe=0,Ze=Kt.length;Fe<Ze;++Fe)if(!!(Je=(nn=Kt[Fe]).length))for(var nn,Je,vn=nn[Je-1],fn=Ra(vn),Yn=vn[1]/2+n,kn=y(Yn),Vn=b(Yn),Gn=0;Gn<Je;++Gn,fn=mr,kn=gi,Vn=Br,vn=hr){var hr=nn[Gn],mr=Ra(hr),Yr=hr[1]/2+n,gi=y(Yr),Br=b(Yr),ai=mr-fn,fi=ai>=0?1:-1,Zi=fi*ai,Ri=Zi>r,Sa=kn*gi;if(fe.add(v(Sa*fi*y(Zi),Vn*Br+Sa*b(Zi))),oe+=Ri?ai+fi*i:ai,Ri^fn>=Ie^mr>=Ie){var ya=gt(et(vn),et(hr));it(ya);var _a=gt(zt,ya);it(_a);var ei=(Ri^ai>=0?-1:1)*L(_a[2]);(_e>ei||_e===ei&&(ya[0]||ya[1]))&&(ne+=Ri^ai>=0?1:-1)}}return(oe<-s||oe<s&&fe<-c)^ne&1}function Bo(Kt,te,Ie,_e){return function(Dt){var zt=te(Dt),oe=io(),ne=te(oe),fe=!1,Fe,Ze,nn,Je={point:vn,lineStart:Yn,lineEnd:kn,polygonStart:function(){Je.point=Vn,Je.lineStart=Gn,Je.lineEnd=hr,Ze=[],Fe=[]},polygonEnd:function(){Je.point=vn,Je.lineStart=Yn,Je.lineEnd=kn,Ze=u.merge(Ze);var Yr=Xo(Fe,_e);Ze.length?(fe||(Dt.polygonStart(),fe=!0),jo(Ze,ao,Yr,Ie,Dt)):Yr&&(fe||(Dt.polygonStart(),fe=!0),Dt.lineStart(),Ie(null,null,1,Dt),Dt.lineEnd()),fe&&(Dt.polygonEnd(),fe=!1),Ze=Fe=null},sphere:function(){Dt.polygonStart(),Dt.lineStart(),Ie(null,null,1,Dt),Dt.lineEnd(),Dt.polygonEnd()}};function vn(mr,Yr){Kt(mr,Yr)&&Dt.point(mr,Yr)}function fn(mr,Yr){zt.point(mr,Yr)}function Yn(){Je.point=fn,zt.lineStart()}function kn(){Je.point=vn,zt.lineEnd()}function Vn(mr,Yr){nn.push([mr,Yr]),ne.point(mr,Yr)}function Gn(){ne.lineStart(),nn=[]}function hr(){Vn(nn[0][0],nn[0][1]),ne.lineEnd();var mr=ne.clean(),Yr=oe.result(),gi,Br=Yr.length,ai,fi,Zi;if(nn.pop(),Fe.push(nn),nn=null,!!Br){if(mr&1){if(fi=Yr[0],(ai=fi.length-1)>0){for(fe||(Dt.polygonStart(),fe=!0),Dt.lineStart(),gi=0;gi<ai;++gi)Dt.point((Zi=fi[gi])[0],Zi[1]);Dt.lineEnd()}return}Br>1&&mr&2&&Yr.push(Yr.pop().concat(Yr.shift())),Ze.push(Yr.filter(qs))}}return Je}}function qs(Kt){return Kt.length>1}function ao(Kt,te){return((Kt=Kt.x)[0]<0?Kt[1]-h-s:h-Kt[1])-((te=te.x)[0]<0?te[1]-h-s:h-te[1])}var so=Bo(function(){return!0},Hs,se,[-r,-h]);function Hs(Kt){var te=NaN,Ie=NaN,_e=NaN,Dt;return{lineStart:function(){Kt.lineStart(),Dt=1},point:function(oe,ne){var fe=oe>0?r:-r,Fe=l(oe-te);l(Fe-r)<s?(Kt.point(te,Ie=(Ie+ne)/2>0?h:-h),Kt.point(_e,Ie),Kt.lineEnd(),Kt.lineStart(),Kt.point(fe,Ie),Kt.point(oe,Ie),Dt=0):_e!==fe&&Fe>=r&&(l(te-_e)<s&&(te-=_e*s),l(oe-fe)<s&&(oe-=fe*s),Ie=Ne(te,Ie,oe,ne),Kt.point(_e,Ie),Kt.lineEnd(),Kt.lineStart(),Kt.point(fe,Ie),Dt=0),Kt.point(te=oe,Ie=ne),_e=fe},lineEnd:function(){Kt.lineEnd(),te=Ie=NaN},clean:function(){return 2-Dt}}}function Ne(Kt,te,Ie,_e){var Dt,zt,oe=y(Kt-Ie);return l(oe)>s?f((y(te)*(zt=b(_e))*y(Ie)-y(_e)*(Dt=b(te))*y(Kt))/(Dt*zt*oe)):(te+_e)/2}function se(Kt,te,Ie,_e){var Dt;if(Kt==null)Dt=Ie*h,_e.point(-r,Dt),_e.point(0,Dt),_e.point(r,Dt),_e.point(r,0),_e.point(r,-Dt),_e.point(0,-Dt),_e.point(-r,-Dt),_e.point(-r,0),_e.point(-r,Dt);else if(l(Kt[0]-te[0])>s){var zt=Kt[0]<te[0]?r:-r;Dt=Ie*zt/2,_e.point(-zt,Dt),_e.point(0,Dt),_e.point(zt,Dt)}else _e.point(te[0],te[1])}function Yt(Kt){var te=b(Kt),Ie=6*o,_e=te>0,Dt=l(te)>s;function zt(Ze,nn,Je,vn){eo(vn,Kt,Ie,Je,Ze,nn)}function oe(Ze,nn){return b(Ze)*b(nn)>te}function ne(Ze){var nn,Je,vn,fn,Yn;return{lineStart:function(){fn=vn=!1,Yn=1},point:function(Vn,Gn){var hr=[Vn,Gn],mr,Yr=oe(Vn,Gn),gi=_e?Yr?0:Fe(Vn,Gn):Yr?Fe(Vn+(Vn<0?r:-r),Gn):0;if(!nn&&(fn=vn=Yr)&&Ze.lineStart(),Yr!==vn&&(mr=fe(nn,hr),(!mr||ds(nn,mr)||ds(hr,mr))&&(hr[2]=1)),Yr!==vn)Yn=0,Yr?(Ze.lineStart(),mr=fe(hr,nn),Ze.point(mr[0],mr[1])):(mr=fe(nn,hr),Ze.point(mr[0],mr[1],2),Ze.lineEnd()),nn=mr;else if(Dt&&nn&&_e^Yr){var Br;!(gi&Je)&&(Br=fe(hr,nn,!0))&&(Yn=0,_e?(Ze.lineStart(),Ze.point(Br[0][0],Br[0][1]),Ze.point(Br[1][0],Br[1][1]),Ze.lineEnd()):(Ze.point(Br[1][0],Br[1][1]),Ze.lineEnd(),Ze.lineStart(),Ze.point(Br[0][0],Br[0][1],3)))}Yr&&(!nn||!ds(nn,hr))&&Ze.point(hr[0],hr[1]),nn=hr,vn=Yr,Je=gi},lineEnd:function(){vn&&Ze.lineEnd(),nn=null},clean:function(){return Yn|(fn&&vn)<<1}}}function fe(Ze,nn,Je){var vn=et(Ze),fn=et(nn),Yn=[1,0,0],kn=gt(vn,fn),Vn=at(kn,kn),Gn=kn[0],hr=Vn-Gn*Gn;if(!hr)return!Je&&Ze;var mr=te*Vn/hr,Yr=-te*Gn/hr,gi=gt(Yn,kn),Br=ot(Yn,mr),ai=ot(kn,Yr);k(Br,ai);var fi=gi,Zi=at(Br,fi),Ri=at(fi,fi),Sa=Zi*Zi-Ri*(at(Br,Br)-1);if(!(Sa<0)){var ya=P(Sa),_a=ot(fi,(-Zi-ya)/Ri);if(k(_a,Br),_a=ht(_a),!Je)return _a;var ei=Ze[0],Ea=nn[0],ka=Ze[1],Ga=nn[1],Ii;Ea<ei&&(Ii=ei,ei=Ea,Ea=Ii);var Ia=Ea-ei,yo=l(Ia-r)<s,zs=yo||Ia<s;if(!yo&&Ga<ka&&(Ii=ka,ka=Ga,Ga=Ii),zs?yo?ka+Ga>0^_a[1]<(l(_a[0]-ei)<s?ka:Ga):ka<=_a[1]&&_a[1]<=Ga:Ia>r^(ei<=_a[0]&&_a[0]<=Ea)){var Ts=ot(fi,(-Zi+ya)/Ri);return k(Ts,Br),[_a,ht(Ts)]}}}function Fe(Ze,nn){var Je=_e?Kt:r-Kt,vn=0;return Ze<-Je?vn|=1:Ze>Je&&(vn|=2),nn<-Je?vn|=4:nn>Je&&(vn|=8),vn}return Bo(oe,ne,zt,_e?[0,-Kt]:[-r,Kt-r])}function Ee(Kt,te,Ie,_e,Dt,zt){var oe=Kt[0],ne=Kt[1],fe=te[0],Fe=te[1],Ze=0,nn=1,Je=fe-oe,vn=Fe-ne,fn;if(fn=Ie-oe,!(!Je&&fn>0)){if(fn/=Je,Je<0){if(fn<Ze)return;fn<nn&&(nn=fn)}else if(Je>0){if(fn>nn)return;fn>Ze&&(Ze=fn)}if(fn=Dt-oe,!(!Je&&fn<0)){if(fn/=Je,Je<0){if(fn>nn)return;fn>Ze&&(Ze=fn)}else if(Je>0){if(fn<Ze)return;fn<nn&&(nn=fn)}if(fn=_e-ne,!(!vn&&fn>0)){if(fn/=vn,vn<0){if(fn<Ze)return;fn<nn&&(nn=fn)}else if(vn>0){if(fn>nn)return;fn>Ze&&(Ze=fn)}if(fn=zt-ne,!(!vn&&fn<0)){if(fn/=vn,vn<0){if(fn>nn)return;fn>Ze&&(Ze=fn)}else if(vn>0){if(fn<Ze)return;fn<nn&&(nn=fn)}return Ze>0&&(Kt[0]=oe+Ze*Je,Kt[1]=ne+Ze*vn),nn<1&&(te[0]=oe+nn*Je,te[1]=ne+nn*vn),!0}}}}}var sn=1e9,Fn=-sn;function rr(Kt,te,Ie,_e){function Dt(Fe,Ze){return Kt<=Fe&&Fe<=Ie&&te<=Ze&&Ze<=_e}function zt(Fe,Ze,nn,Je){var vn=0,fn=0;if(Fe==null||(vn=oe(Fe,nn))!==(fn=oe(Ze,nn))||fe(Fe,Ze)<0^nn>0)do Je.point(vn===0||vn===3?Kt:Ie,vn>1?_e:te);while((vn=(vn+nn+4)%4)!==fn);else Je.point(Ze[0],Ze[1])}function oe(Fe,Ze){return l(Fe[0]-Kt)<s?Ze>0?0:3:l(Fe[0]-Ie)<s?Ze>0?2:1:l(Fe[1]-te)<s?Ze>0?1:0:Ze>0?3:2}function ne(Fe,Ze){return fe(Fe.x,Ze.x)}function fe(Fe,Ze){var nn=oe(Fe,1),Je=oe(Ze,1);return nn!==Je?nn-Je:nn===0?Ze[1]-Fe[1]:nn===1?Fe[0]-Ze[0]:nn===2?Fe[1]-Ze[1]:Ze[0]-Fe[0]}return function(Fe){var Ze=Fe,nn=io(),Je,vn,fn,Yn,kn,Vn,Gn,hr,mr,Yr,gi,Br={point:ai,lineStart:Sa,lineEnd:ya,polygonStart:Zi,polygonEnd:Ri};function ai(ei,Ea){Dt(ei,Ea)&&Ze.point(ei,Ea)}function fi(){for(var ei=0,Ea=0,ka=vn.length;Ea<ka;++Ea)for(var Ga=vn[Ea],Ii=1,Ia=Ga.length,yo=Ga[0],zs,Ts,el=yo[0],Mu=yo[1];Ii<Ia;++Ii)zs=el,Ts=Mu,yo=Ga[Ii],el=yo[0],Mu=yo[1],Ts<=_e?Mu>_e&&(el-zs)*(_e-Ts)>(Mu-Ts)*(Kt-zs)&&++ei:Mu<=_e&&(el-zs)*(_e-Ts)<(Mu-Ts)*(Kt-zs)&&--ei;return ei}function Zi(){Ze=nn,Je=[],vn=[],gi=!0}function Ri(){var ei=fi(),Ea=gi&&ei,ka=(Je=u.merge(Je)).length;(Ea||ka)&&(Fe.polygonStart(),Ea&&(Fe.lineStart(),zt(null,null,1,Fe),Fe.lineEnd()),ka&&jo(Je,ne,ei,zt,Fe),Fe.polygonEnd()),Ze=Fe,Je=vn=fn=null}function Sa(){Br.point=_a,vn&&vn.push(fn=[]),Yr=!0,mr=!1,Gn=hr=NaN}function ya(){Je&&(_a(Yn,kn),Vn&&mr&&nn.rejoin(),Je.push(nn.result())),Br.point=ai,mr&&Ze.lineEnd()}function _a(ei,Ea){var ka=Dt(ei,Ea);if(vn&&fn.push([ei,Ea]),Yr)Yn=ei,kn=Ea,Vn=ka,Yr=!1,ka&&(Ze.lineStart(),Ze.point(ei,Ea));else if(ka&&mr)Ze.point(ei,Ea);else{var Ga=[Gn=Math.max(Fn,Math.min(sn,Gn)),hr=Math.max(Fn,Math.min(sn,hr))],Ii=[ei=Math.max(Fn,Math.min(sn,ei)),Ea=Math.max(Fn,Math.min(sn,Ea))];Ee(Ga,Ii,Kt,te,Ie,_e)?(mr||(Ze.lineStart(),Ze.point(Ga[0],Ga[1])),Ze.point(Ii[0],Ii[1]),ka||Ze.lineEnd(),gi=!1):ka&&(Ze.lineStart(),Ze.point(ei,Ea),gi=!1)}Gn=ei,hr=Ea,mr=ka}return Br}}function qn(){var Kt=0,te=0,Ie=960,_e=500,Dt,zt,oe;return oe={stream:function(fe){return Dt&&zt===fe?Dt:Dt=rr(Kt,te,Ie,_e)(zt=fe)},extent:function(fe){return arguments.length?(Kt=+fe[0][0],te=+fe[0][1],Ie=+fe[1][0],_e=+fe[1][1],Dt=zt=null,oe):[[Kt,te],[Ie,_e]]}}}var Xr,Si,Oi,Gi,sa={sphere:F,point:F,lineStart:qa,lineEnd:F,polygonStart:F,polygonEnd:F};function qa(){sa.point=Eo,sa.lineEnd=Oa}function Oa(){sa.point=sa.lineEnd=F}function Eo(Kt,te){Kt*=o,te*=o,Si=Kt,Oi=y(te),Gi=b(te),sa.point=Ba}function Ba(Kt,te){Kt*=o,te*=o;var Ie=y(te),_e=b(te),Dt=l(Kt-Si),zt=b(Dt),oe=y(Dt),ne=_e*oe,fe=Gi*Ie-Oi*_e*zt,Fe=Oi*Ie+Gi*_e*zt;Xr.add(v(P(ne*ne+fe*fe),Fe)),Si=Kt,Oi=Ie,Gi=_e}function uo(Kt){return Xr=new u.Adder,rt(Kt,sa),+Xr}var co=[null,null],Ja={type:"LineString",coordinates:co};function Po(Kt,te){return co[0]=Kt,co[1]=te,uo(Ja)}var ls={Feature:function(te,Ie){return Es(te.geometry,Ie)},FeatureCollection:function(te,Ie){for(var _e=te.features,Dt=-1,zt=_e.length;++Dt<zt;)if(Es(_e[Dt].geometry,Ie))return!0;return!1}},ko={Sphere:function(){return!0},Point:function(te,Ie){return Co(te.coordinates,Ie)},MultiPoint:function(te,Ie){for(var _e=te.coordinates,Dt=-1,zt=_e.length;++Dt<zt;)if(Co(_e[Dt],Ie))return!0;return!1},LineString:function(te,Ie){return Za(te.coordinates,Ie)},MultiLineString:function(te,Ie){for(var _e=te.coordinates,Dt=-1,zt=_e.length;++Dt<zt;)if(Za(_e[Dt],Ie))return!0;return!1},Polygon:function(te,Ie){return Bs(te.coordinates,Ie)},MultiPolygon:function(te,Ie){for(var _e=te.coordinates,Dt=-1,zt=_e.length;++Dt<zt;)if(Bs(_e[Dt],Ie))return!0;return!1},GeometryCollection:function(te,Ie){for(var _e=te.geometries,Dt=-1,zt=_e.length;++Dt<zt;)if(Es(_e[Dt],Ie))return!0;return!1}};function Es(Kt,te){return Kt&&ko.hasOwnProperty(Kt.type)?ko[Kt.type](Kt,te):!1}function Co(Kt,te){return Po(Kt,te)===0}function Za(Kt,te){for(var Ie,_e,Dt,zt=0,oe=Kt.length;zt<oe;zt++){if(_e=Po(Kt[zt],te),_e===0||zt>0&&(Dt=Po(Kt[zt],Kt[zt-1]),Dt>0&&Ie<=Dt&&_e<=Dt&&(Ie+_e-Dt)*(1-Math.pow((Ie-_e)/Dt,2))<c*Dt))return!0;Ie=_e}return!1}function Bs(Kt,te){return!!Xo(Kt.map(ss),ja(te))}function ss(Kt){return Kt=Kt.map(ja),Kt.pop(),Kt}function ja(Kt){return[Kt[0]*o,Kt[1]*o]}function gn(Kt,te){return(Kt&&ls.hasOwnProperty(Kt.type)?ls[Kt.type]:Es)(Kt,te)}function cr(Kt,te,Ie){var _e=u.range(Kt,te-s,Ie).concat(te);return function(Dt){return _e.map(function(zt){return[Dt,zt]})}}function Gr(Kt,te,Ie){var _e=u.range(Kt,te-s,Ie).concat(te);return function(Dt){return _e.map(function(zt){return[zt,Dt]})}}function Ui(){var Kt,te,Ie,_e,Dt,zt,oe,ne,fe=10,Fe=fe,Ze=90,nn=360,Je,vn,fn,Yn,kn=2.5;function Vn(){return{type:"MultiLineString",coordinates:Gn()}}function Gn(){return u.range(g(_e/Ze)*Ze,Ie,Ze).map(fn).concat(u.range(g(ne/nn)*nn,oe,nn).map(Yn)).concat(u.range(g(te/fe)*fe,Kt,fe).filter(function(hr){return l(hr%Ze)>s}).map(Je)).concat(u.range(g(zt/Fe)*Fe,Dt,Fe).filter(function(hr){return l(hr%nn)>s}).map(vn))}return Vn.lines=function(){return Gn().map(function(hr){return{type:"LineString",coordinates:hr}})},Vn.outline=function(){return{type:"Polygon",coordinates:[fn(_e).concat(Yn(oe).slice(1),fn(Ie).reverse().slice(1),Yn(ne).reverse().slice(1))]}},Vn.extent=function(hr){return arguments.length?Vn.extentMajor(hr).extentMinor(hr):Vn.extentMinor()},Vn.extentMajor=function(hr){return arguments.length?(_e=+hr[0][0],Ie=+hr[1][0],ne=+hr[0][1],oe=+hr[1][1],_e>Ie&&(hr=_e,_e=Ie,Ie=hr),ne>oe&&(hr=ne,ne=oe,oe=hr),Vn.precision(kn)):[[_e,ne],[Ie,oe]]},Vn.extentMinor=function(hr){return arguments.length?(te=+hr[0][0],Kt=+hr[1][0],zt=+hr[0][1],Dt=+hr[1][1],te>Kt&&(hr=te,te=Kt,Kt=hr),zt>Dt&&(hr=zt,zt=Dt,Dt=hr),Vn.precision(kn)):[[te,zt],[Kt,Dt]]},Vn.step=function(hr){return arguments.length?Vn.stepMajor(hr).stepMinor(hr):Vn.stepMinor()},Vn.stepMajor=function(hr){return arguments.length?(Ze=+hr[0],nn=+hr[1],Vn):[Ze,nn]},Vn.stepMinor=function(hr){return arguments.length?(fe=+hr[0],Fe=+hr[1],Vn):[fe,Fe]},Vn.precision=function(hr){return arguments.length?(kn=+hr,Je=cr(zt,Dt,90),vn=Gr(te,Kt,kn),fn=cr(ne,oe,90),Yn=Gr(_e,Ie,kn),Vn):kn},Vn.extentMajor([[-180,-90+s],[180,90-s]]).extentMinor([[-180,-80-s],[180,80+s]])}function za(){return Ui()()}function go(Kt,te){var Ie=Kt[0]*o,_e=Kt[1]*o,Dt=te[0]*o,zt=te[1]*o,oe=b(_e),ne=y(_e),fe=b(zt),Fe=y(zt),Ze=oe*b(Ie),nn=oe*y(Ie),Je=fe*b(Dt),vn=fe*y(Dt),fn=2*L(P(H(zt-_e)+oe*fe*H(Dt-Ie))),Yn=y(fn),kn=fn?function(Vn){var Gn=y(Vn*=fn)/Yn,hr=y(fn-Vn)/Yn,mr=hr*Ze+Gn*Je,Yr=hr*nn+Gn*vn,gi=hr*ne+Gn*Fe;return[v(Yr,mr)*a,v(gi,P(mr*mr+Yr*Yr))*a]}:function(){return[Ie*a,_e*a]};return kn.distance=fn,kn}var fo=function(te){return te},ea=new u.Adder,to=new u.Adder,Ns,Ss,Ka,ou,Jo={point:F,lineStart:F,lineEnd:F,polygonStart:function(){Jo.lineStart=Os,Jo.lineEnd=vs},polygonEnd:function(){Jo.lineStart=Jo.lineEnd=Jo.point=F,ea.add(l(to)),to=new u.Adder},result:function(){var te=ea/2;return ea=new u.Adder,te}};function Os(){Jo.point=tu}function tu(Kt,te){Jo.point=_s,Ns=Ka=Kt,Ss=ou=te}function _s(Kt,te){to.add(ou*Kt-Ka*te),Ka=Kt,ou=te}function vs(){_s(Ns,Ss)}var ts=Infinity,ws=ts,Ms=-ts,Ou=Ms,Bu={point:So,lineStart:F,lineEnd:F,polygonStart:F,polygonEnd:F,result:function(){var te=[[ts,ws],[Ms,Ou]];return Ms=Ou=-(ws=ts=Infinity),te}};function So(Kt,te){Kt<ts&&(ts=Kt),Kt>Ms&&(Ms=Kt),te<ws&&(ws=te),te>Ou&&(Ou=te)}var eu=0,Nu=0,Yu=0,al=0,Fu=0,Oo=0,Ua=0,ba=0,No=0,hu,Zu,ps,$o,Is={point:su,lineStart:Fo,lineEnd:Xa,polygonStart:function(){Is.lineStart=yl,Is.lineEnd=Hl},polygonEnd:function(){Is.point=su,Is.lineStart=Fo,Is.lineEnd=Xa},result:function(){var te=No?[Ua/No,ba/No]:Oo?[al/Oo,Fu/Oo]:Yu?[eu/Yu,Nu/Yu]:[NaN,NaN];return eu=Nu=Yu=al=Fu=Oo=Ua=ba=No=0,te}};function su(Kt,te){eu+=Kt,Nu+=te,++Yu}function Fo(){Is.point=Ku}function Ku(Kt,te){Is.point=Xs,su(ps=Kt,$o=te)}function Xs(Kt,te){var Ie=Kt-ps,_e=te-$o,Dt=P(Ie*Ie+_e*_e);al+=Dt*(ps+Kt)/2,Fu+=Dt*($o+te)/2,Oo+=Dt,su(ps=Kt,$o=te)}function Xa(){Is.point=su}function yl(){Is.point=xl}function Hl(){yc(hu,Zu)}function xl(Kt,te){Is.point=yc,su(hu=ps=Kt,Zu=$o=te)}function yc(Kt,te){var Ie=Kt-ps,_e=te-$o,Dt=P(Ie*Ie+_e*_e);al+=Dt*(ps+Kt)/2,Fu+=Dt*($o+te)/2,Oo+=Dt,Dt=$o*Kt-ps*te,Ua+=Dt*(ps+Kt),ba+=Dt*($o+te),No+=Dt*3,su(ps=Kt,$o=te)}function Tl(Kt){this._context=Kt}Tl.prototype={_radius:4.5,pointRadius:function(te){return this._radius=te,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(te,Ie){switch(this._point){case 0:{this._context.moveTo(te,Ie),this._point=1;break}case 1:{this._context.lineTo(te,Ie);break}default:{this._context.moveTo(te+this._radius,Ie),this._context.arc(te,Ie,this._radius,0,i);break}}},result:F};var oo=new u.Adder,wu,bl,nu,zu,xu,bu={point:F,lineStart:function(){bu.point=Js},lineEnd:function(){wu&&cs(bl,nu),bu.point=F},polygonStart:function(){wu=!0},polygonEnd:function(){wu=null},result:function(){var te=+oo;return oo=new u.Adder,te}};function Js(Kt,te){bu.point=cs,bl=zu=Kt,nu=xu=te}function cs(Kt,te){zu-=Kt,xu-=te,oo.add(P(zu*zu+xu*xu)),zu=Kt,xu=te}function Ps(){this._string=[]}Ps.prototype={_radius:4.5,_circle:ol(4.5),pointRadius:function(te){return(te=+te)!==this._radius&&(this._radius=te,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(te,Ie){switch(this._point){case 0:{this._string.push("M",te,",",Ie),this._point=1;break}case 1:{this._string.push("L",te,",",Ie);break}default:{this._circle==null&&(this._circle=ol(this._radius)),this._string.push("M",te,",",Ie,this._circle);break}}},result:function(){if(this._string.length){var te=this._string.join("");return this._string=[],te}else return null}};function ol(Kt){return"m0,"+Kt+"a"+Kt+","+Kt+" 0 1,1 0,"+-2*Kt+"a"+Kt+","+Kt+" 0 1,1 0,"+2*Kt+"z"}function Al(Kt,te){var Ie=4.5,_e,Dt;function zt(oe){return oe&&(typeof Ie=="function"&&Dt.pointRadius(+Ie.apply(this,arguments)),rt(oe,_e(Dt))),Dt.result()}return zt.area=function(oe){return rt(oe,_e(Jo)),Jo.result()},zt.measure=function(oe){return rt(oe,_e(bu)),bu.result()},zt.bounds=function(oe){return rt(oe,_e(Bu)),Bu.result()},zt.centroid=function(oe){return rt(oe,_e(Is)),Is.result()},zt.projection=function(oe){return arguments.length?(_e=oe==null?(Kt=null,fo):(Kt=oe).stream,zt):Kt},zt.context=function(oe){return arguments.length?(Dt=oe==null?(te=null,new Ps):new Tl(te=oe),typeof Ie!="function"&&Dt.pointRadius(Ie),zt):te},zt.pointRadius=function(oe){return arguments.length?(Ie=typeof oe=="function"?oe:(Dt.pointRadius(+oe),+oe),zt):Ie},zt.projection(Kt).context(te)}function Fl(Kt){return{stream:Uu(Kt)}}function Uu(Kt){return function(te){var Ie=new Xu;for(var _e in Kt)Ie[_e]=Kt[_e];return Ie.stream=te,Ie}}function Xu(){}Xu.prototype={constructor:Xu,point:function(te,Ie){this.stream.point(te,Ie)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function sl(Kt,te,Ie){var _e=Kt.clipExtent&&Kt.clipExtent();return Kt.scale(150).translate([0,0]),_e!=null&&Kt.clipExtent(null),rt(Ie,Kt.stream(Bu)),te(Bu.result()),_e!=null&&Kt.clipExtent(_e),Kt}function Eu(Kt,te,Ie){return sl(Kt,function(_e){var Dt=te[1][0]-te[0][0],zt=te[1][1]-te[0][1],oe=Math.min(Dt/(_e[1][0]-_e[0][0]),zt/(_e[1][1]-_e[0][1])),ne=+te[0][0]+(Dt-oe*(_e[1][0]+_e[0][0]))/2,fe=+te[0][1]+(zt-oe*(_e[1][1]+_e[0][1]))/2;Kt.scale(150*oe).translate([ne,fe])},Ie)}function uu(Kt,te,Ie){return Eu(Kt,[[0,0],te],Ie)}function Ju(Kt,te,Ie){return sl(Kt,function(_e){var Dt=+te,zt=Dt/(_e[1][0]-_e[0][0]),oe=(Dt-zt*(_e[1][0]+_e[0][0]))/2,ne=-zt*_e[0][1];Kt.scale(150*zt).translate([oe,ne])},Ie)}function Ls(Kt,te,Ie){return sl(Kt,function(_e){var Dt=+te,zt=Dt/(_e[1][1]-_e[0][1]),oe=-zt*_e[0][0],ne=(Dt-zt*(_e[1][1]+_e[0][1]))/2;Kt.scale(150*zt).translate([oe,ne])},Ie)}var El=16,sc=b(30*o);function Cl(Kt,te){return+te?Yl(Kt,te):zl(Kt)}function zl(Kt){return Uu({point:function(Ie,_e){Ie=Kt(Ie,_e),this.stream.point(Ie[0],Ie[1])}})}function Yl(Kt,te){function Ie(_e,Dt,zt,oe,ne,fe,Fe,Ze,nn,Je,vn,fn,Yn,kn){var Vn=Fe-_e,Gn=Ze-Dt,hr=Vn*Vn+Gn*Gn;if(hr>4*te&&Yn--){var mr=oe+Je,Yr=ne+vn,gi=fe+fn,Br=P(mr*mr+Yr*Yr+gi*gi),ai=L(gi/=Br),fi=l(l(gi)-1)<s||l(zt-nn)<s?(zt+nn)/2:v(Yr,mr),Zi=Kt(fi,ai),Ri=Zi[0],Sa=Zi[1],ya=Ri-_e,_a=Sa-Dt,ei=Gn*ya-Vn*_a;(ei*ei/hr>te||l((Vn*ya+Gn*_a)/hr-.5)>.3||oe*Je+ne*vn+fe*fn<sc)&&(Ie(_e,Dt,zt,oe,ne,fe,Ri,Sa,fi,mr/=Br,Yr/=Br,gi,Yn,kn),kn.point(Ri,Sa),Ie(Ri,Sa,fi,mr,Yr,gi,Fe,Ze,nn,Je,vn,fn,Yn,kn))}}return function(_e){var Dt,zt,oe,ne,fe,Fe,Ze,nn,Je,vn,fn,Yn,kn={point:Vn,lineStart:Gn,lineEnd:mr,polygonStart:function(){_e.polygonStart(),kn.lineStart=Yr},polygonEnd:function(){_e.polygonEnd(),kn.lineStart=Gn}};function Vn(ai,fi){ai=Kt(ai,fi),_e.point(ai[0],ai[1])}function Gn(){nn=NaN,kn.point=hr,_e.lineStart()}function hr(ai,fi){var Zi=et([ai,fi]),Ri=Kt(ai,fi);Ie(nn,Je,Ze,vn,fn,Yn,nn=Ri[0],Je=Ri[1],Ze=ai,vn=Zi[0],fn=Zi[1],Yn=Zi[2],El,_e),_e.point(nn,Je)}function mr(){kn.point=Vn,_e.lineEnd()}function Yr(){Gn(),kn.point=gi,kn.lineEnd=Br}function gi(ai,fi){hr(Dt=ai,fi),zt=nn,oe=Je,ne=vn,fe=fn,Fe=Yn,kn.point=hr}function Br(){Ie(nn,Je,Ze,vn,fn,Yn,zt,oe,Dt,ne,fe,Fe,El,_e),kn.lineEnd=mr,mr()}return kn}}var dc=Uu({point:function(te,Ie){this.stream.point(te*o,Ie*o)}});function $u(Kt){return Uu({point:function(Ie,_e){var Dt=Kt(Ie,_e);return this.stream.point(Dt[0],Dt[1])}})}function Ol(Kt,te,Ie,_e,Dt){function zt(oe,ne){return oe*=_e,ne*=Dt,[te+Kt*oe,Ie-Kt*ne]}return zt.invert=function(oe,ne){return[(oe-te)/Kt*_e,(Ie-ne)/Kt*Dt]},zt}function Ul(Kt,te,Ie,_e,Dt,zt){if(!zt)return Ol(Kt,te,Ie,_e,Dt);var oe=b(zt),ne=y(zt),fe=oe*Kt,Fe=ne*Kt,Ze=oe/Kt,nn=ne/Kt,Je=(ne*Ie-oe*te)/Kt,vn=(ne*te+oe*Ie)/Kt;function fn(Yn,kn){return Yn*=_e,kn*=Dt,[fe*Yn-Fe*kn+te,Ie-Fe*Yn-fe*kn]}return fn.invert=function(Yn,kn){return[_e*(Ze*Yn-nn*kn+Je),Dt*(vn-nn*Yn-Ze*kn)]},fn}function wo(Kt){return ho(function(){return Kt})()}function ho(Kt){var te,Ie=150,_e=480,Dt=250,zt=0,oe=0,ne=0,fe=0,Fe=0,Ze,nn=0,Je=1,vn=1,fn=null,Yn=so,kn=null,Vn,Gn,hr,mr=fo,Yr=.5,gi,Br,ai,fi,Zi;function Ri(ei){return ai(ei[0]*o,ei[1]*o)}function Sa(ei){return ei=ai.invert(ei[0],ei[1]),ei&&[ei[0]*a,ei[1]*a]}Ri.stream=function(ei){return fi&&Zi===ei?fi:fi=dc($u(Ze)(Yn(gi(mr(Zi=ei)))))},Ri.preclip=function(ei){return arguments.length?(Yn=ei,fn=void 0,_a()):Yn},Ri.postclip=function(ei){return arguments.length?(mr=ei,kn=Vn=Gn=hr=null,_a()):mr},Ri.clipAngle=function(ei){return arguments.length?(Yn=+ei?Yt(fn=ei*o):(fn=null,so),_a()):fn*a},Ri.clipExtent=function(ei){return arguments.length?(mr=ei==null?(kn=Vn=Gn=hr=null,fo):rr(kn=+ei[0][0],Vn=+ei[0][1],Gn=+ei[1][0],hr=+ei[1][1]),_a()):kn==null?null:[[kn,Vn],[Gn,hr]]},Ri.scale=function(ei){return arguments.length?(Ie=+ei,ya()):Ie},Ri.translate=function(ei){return arguments.length?(_e=+ei[0],Dt=+ei[1],ya()):[_e,Dt]},Ri.center=function(ei){return arguments.length?(zt=ei[0]%360*o,oe=ei[1]%360*o,ya()):[zt*a,oe*a]},Ri.rotate=function(ei){return arguments.length?(ne=ei[0]%360*o,fe=ei[1]%360*o,Fe=ei.length>2?ei[2]%360*o:0,ya()):[ne*a,fe*a,Fe*a]},Ri.angle=function(ei){return arguments.length?(nn=ei%360*o,ya()):nn*a},Ri.reflectX=function(ei){return arguments.length?(Je=ei?-1:1,ya()):Je<0},Ri.reflectY=function(ei){return arguments.length?(vn=ei?-1:1,ya()):vn<0},Ri.precision=function(ei){return arguments.length?(gi=Cl(Br,Yr=ei*ei),_a()):P(Yr)},Ri.fitExtent=function(ei,Ea){return Eu(Ri,ei,Ea)},Ri.fitSize=function(ei,Ea){return uu(Ri,ei,Ea)},Ri.fitWidth=function(ei,Ea){return Ju(Ri,ei,Ea)},Ri.fitHeight=function(ei,Ea){return Ls(Ri,ei,Ea)};function ya(){var ei=Ul(Ie,0,0,Je,vn,nn).apply(null,te(zt,oe)),Ea=Ul(Ie,_e-ei[0],Dt-ei[1],Je,vn,nn);return Ze=yr(ne,fe,Fe),Br=_n(te,Ea),ai=_n(Ze,Br),gi=Cl(Br,Yr),_a()}function _a(){return fi=Zi=null,Ri}return function(){return te=Kt.apply(this,arguments),Ri.invert=te.invert&&Sa,ya()}}function Sl(Kt){var te=0,Ie=r/3,_e=ho(Kt),Dt=_e(te,Ie);return Dt.parallels=function(zt){return arguments.length?_e(te=zt[0]*o,Ie=zt[1]*o):[te*a,Ie*a]},Dt}function ul(Kt){var te=b(Kt);function Ie(_e,Dt){return[_e*te,y(Dt)/te]}return Ie.invert=function(_e,Dt){return[_e/te,L(Dt*te)]},Ie}function Ys(Kt,te){var Ie=y(Kt),_e=(Ie+y(te))/2;if(l(_e)<s)return ul(Kt);var Dt=1+Ie*(2*_e-Ie),zt=P(Dt)/_e;function oe(ne,fe){var Fe=P(Dt-2*_e*y(fe))/_e;return[Fe*y(ne*=_e),zt-Fe*b(ne)]}return oe.invert=function(ne,fe){var Fe=zt-fe,Ze=v(ne,l(Fe))*S(Fe);return Fe*_e<0&&(Ze-=r*S(ne)*S(Fe)),[Ze/_e,L((Dt-(ne*ne+Fe*Fe)*_e*_e)/(2*_e))]},oe}function Da(){return Sl(Ys).scale(155.424).center([0,33.6442])}function mo(){return Da().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Gs(Kt){var te=Kt.length;return{point:function(_e,Dt){for(var zt=-1;++zt<te;)Kt[zt].point(_e,Dt)},sphere:function(){for(var _e=-1;++_e<te;)Kt[_e].sphere()},lineStart:function(){for(var _e=-1;++_e<te;)Kt[_e].lineStart()},lineEnd:function(){for(var _e=-1;++_e<te;)Kt[_e].lineEnd()},polygonStart:function(){for(var _e=-1;++_e<te;)Kt[_e].polygonStart()},polygonEnd:function(){for(var _e=-1;++_e<te;)Kt[_e].polygonEnd()}}}function wl(){var Kt,te,Ie=mo(),_e,Dt=Da().rotate([154,0]).center([-2,58.5]).parallels([55,65]),zt,oe=Da().rotate([157,0]).center([-3,19.9]).parallels([8,18]),ne,fe,Fe={point:function(vn,fn){fe=[vn,fn]}};function Ze(Je){var vn=Je[0],fn=Je[1];return fe=null,_e.point(vn,fn),fe||(zt.point(vn,fn),fe)||(ne.point(vn,fn),fe)}Ze.invert=function(Je){var vn=Ie.scale(),fn=Ie.translate(),Yn=(Je[0]-fn[0])/vn,kn=(Je[1]-fn[1])/vn;return(kn>=.12&&kn<.234&&Yn>=-.425&&Yn<-.214?Dt:kn>=.166&&kn<.234&&Yn>=-.214&&Yn<-.115?oe:Ie).invert(Je)},Ze.stream=function(Je){return Kt&&te===Je?Kt:Kt=Gs([Ie.stream(te=Je),Dt.stream(Je),oe.stream(Je)])},Ze.precision=function(Je){return arguments.length?(Ie.precision(Je),Dt.precision(Je),oe.precision(Je),nn()):Ie.precision()},Ze.scale=function(Je){return arguments.length?(Ie.scale(Je),Dt.scale(Je*.35),oe.scale(Je),Ze.translate(Ie.translate())):Ie.scale()},Ze.translate=function(Je){if(!arguments.length)return Ie.translate();var vn=Ie.scale(),fn=+Je[0],Yn=+Je[1];return _e=Ie.translate(Je).clipExtent([[fn-.455*vn,Yn-.238*vn],[fn+.455*vn,Yn+.238*vn]]).stream(Fe),zt=Dt.translate([fn-.307*vn,Yn+.201*vn]).clipExtent([[fn-.425*vn+s,Yn+.12*vn+s],[fn-.214*vn-s,Yn+.234*vn-s]]).stream(Fe),ne=oe.translate([fn-.205*vn,Yn+.212*vn]).clipExtent([[fn-.214*vn+s,Yn+.166*vn+s],[fn-.115*vn-s,Yn+.234*vn-s]]).stream(Fe),nn()},Ze.fitExtent=function(Je,vn){return Eu(Ze,Je,vn)},Ze.fitSize=function(Je,vn){return uu(Ze,Je,vn)},Ze.fitWidth=function(Je,vn){return Ju(Ze,Je,vn)},Ze.fitHeight=function(Je,vn){return Ls(Ze,Je,vn)};function nn(){return Kt=te=null,Ze}return Ze.scale(1070)}function ll(Kt){return function(te,Ie){var _e=b(te),Dt=b(Ie),zt=Kt(_e*Dt);return zt===Infinity?[2,0]:[zt*Dt*y(te),zt*y(Ie)]}}function Qu(Kt){return function(te,Ie){var _e=P(te*te+Ie*Ie),Dt=Kt(_e),zt=y(Dt),oe=b(Dt);return[v(te*zt,_e*oe),L(_e&&Ie*zt/_e)]}}var xc=ll(function(Kt){return P(2/(1+Kt))});xc.invert=Qu(function(Kt){return 2*L(Kt/2)});function Zl(){return wo(xc).scale(124.75).clipAngle(180-.001)}var qu=ll(function(Kt){return(Kt=O(Kt))&&Kt/y(Kt)});qu.invert=Qu(function(Kt){return Kt});function ru(){return wo(qu).scale(79.4188).clipAngle(180-.001)}function Zs(Kt,te){return[Kt,M(A((h+te)/2))]}Zs.invert=function(Kt,te){return[Kt,2*f(m(te))-h]};function es(){return iu(Zs).scale(961/i)}function iu(Kt){var te=wo(Kt),Ie=te.center,_e=te.scale,Dt=te.translate,zt=te.clipExtent,oe=null,ne,fe,Fe;te.scale=function(nn){return arguments.length?(_e(nn),Ze()):_e()},te.translate=function(nn){return arguments.length?(Dt(nn),Ze()):Dt()},te.center=function(nn){return arguments.length?(Ie(nn),Ze()):Ie()},te.clipExtent=function(nn){return arguments.length?(nn==null?oe=ne=fe=Fe=null:(oe=+nn[0][0],ne=+nn[0][1],fe=+nn[1][0],Fe=+nn[1][1]),Ze()):oe==null?null:[[oe,ne],[fe,Fe]]};function Ze(){var nn=r*_e(),Je=te(Aa(te.rotate()).invert([0,0]));return zt(oe==null?[[Je[0]-nn,Je[1]-nn],[Je[0]+nn,Je[1]+nn]]:Kt===Zs?[[Math.max(Je[0]-nn,oe),ne],[Math.min(Je[0]+nn,fe),Fe]]:[[oe,Math.max(Je[1]-nn,ne)],[fe,Math.min(Je[1]+nn,Fe)]])}return Ze()}function ku(Kt){return A((h+Kt)/2)}function us(Kt,te){var Ie=b(Kt),_e=Kt===te?y(Kt):M(Ie/b(te))/M(ku(te)/ku(Kt)),Dt=Ie*x(ku(Kt),_e)/_e;if(!_e)return Zs;function zt(oe,ne){Dt>0?ne<-h+s&&(ne=-h+s):ne>h-s&&(ne=h-s);var fe=Dt/x(ku(ne),_e);return[fe*y(_e*oe),Dt-fe*b(_e*oe)]}return zt.invert=function(oe,ne){var fe=Dt-ne,Fe=S(_e)*P(oe*oe+fe*fe),Ze=v(oe,l(fe))*S(fe);return fe*_e<0&&(Ze-=r*S(oe)*S(fe)),[Ze/_e,2*f(x(Dt/Fe,1/_e))-h]},zt}function Yi(){return Sl(us).scale(109.5).parallels([30,30])}function Fs(Kt,te){return[Kt,te]}Fs.invert=Fs;function tl(){return wo(Fs).scale(152.63)}function Gu(Kt,te){var Ie=b(Kt),_e=Kt===te?y(Kt):(Ie-b(te))/(te-Kt),Dt=Ie/_e+Kt;if(l(_e)<s)return Fs;function zt(oe,ne){var fe=Dt-ne,Fe=_e*oe;return[fe*y(Fe),Dt-fe*b(Fe)]}return zt.invert=function(oe,ne){var fe=Dt-ne,Fe=v(oe,l(fe))*S(fe);return fe*_e<0&&(Fe-=r*S(oe)*S(fe)),[Fe/_e,Dt-S(_e)*P(oe*oe+fe*fe)]},zt}function Go(){return Sl(Gu).scale(131.154).center([0,13.9389])}var Yo=1.340264,Su=-.081106,Mi=893e-6,_u=.003796,Iu=P(3)/2,Lu=12;function $s(Kt,te){var Ie=L(Iu*y(te)),_e=Ie*Ie,Dt=_e*_e*_e;return[Kt*b(Ie)/(Iu*(Yo+3*Su*_e+Dt*(7*Mi+9*_u*_e))),Ie*(Yo+Su*_e+Dt*(Mi+_u*_e))]}$s.invert=function(Kt,te){for(var Ie=te,_e=Ie*Ie,Dt=_e*_e*_e,zt=0,oe,ne,fe;zt<Lu&&(ne=Ie*(Yo+Su*_e+Dt*(Mi+_u*_e))-te,fe=Yo+3*Su*_e+Dt*(7*Mi+9*_u*_e),Ie-=oe=ne/fe,_e=Ie*Ie,Dt=_e*_e*_e,!(l(oe)<c));++zt);return[Iu*Kt*(Yo+3*Su*_e+Dt*(7*Mi+9*_u*_e))/b(Ie),L(y(Ie)/Iu)]};function we(){return wo($s).scale(177.158)}function Pe(Kt,te){var Ie=b(te),_e=b(Kt)*Ie;return[Ie*y(Kt)/_e,y(te)/_e]}Pe.invert=Qu(f);function hn(){return wo(Pe).scale(144.049).clipAngle(60)}function tn(){var Kt=1,te=0,Ie=0,_e=1,Dt=1,zt=0,oe,ne,fe=null,Fe,Ze,nn,Je=1,vn=1,fn=Uu({point:function(Yr,gi){var Br=hr([Yr,gi]);this.stream.point(Br[0],Br[1])}}),Yn=fo,kn,Vn;function Gn(){return Je=Kt*_e,vn=Kt*Dt,kn=Vn=null,hr}function hr(mr){var Yr=mr[0]*Je,gi=mr[1]*vn;if(zt){var Br=gi*oe-Yr*ne;Yr=Yr*oe+gi*ne,gi=Br}return[Yr+te,gi+Ie]}return hr.invert=function(mr){var Yr=mr[0]-te,gi=mr[1]-Ie;if(zt){var Br=gi*oe+Yr*ne;Yr=Yr*oe-gi*ne,gi=Br}return[Yr/Je,gi/vn]},hr.stream=function(mr){return kn&&Vn===mr?kn:kn=fn(Yn(Vn=mr))},hr.postclip=function(mr){return arguments.length?(Yn=mr,fe=Fe=Ze=nn=null,Gn()):Yn},hr.clipExtent=function(mr){return arguments.length?(Yn=mr==null?(fe=Fe=Ze=nn=null,fo):rr(fe=+mr[0][0],Fe=+mr[0][1],Ze=+mr[1][0],nn=+mr[1][1]),Gn()):fe==null?null:[[fe,Fe],[Ze,nn]]},hr.scale=function(mr){return arguments.length?(Kt=+mr,Gn()):Kt},hr.translate=function(mr){return arguments.length?(te=+mr[0],Ie=+mr[1],Gn()):[te,Ie]},hr.angle=function(mr){return arguments.length?(zt=mr%360*o,ne=y(zt),oe=b(zt),Gn()):zt*a},hr.reflectX=function(mr){return arguments.length?(_e=mr?-1:1,Gn()):_e<0},hr.reflectY=function(mr){return arguments.length?(Dt=mr?-1:1,Gn()):Dt<0},hr.fitExtent=function(mr,Yr){return Eu(hr,mr,Yr)},hr.fitSize=function(mr,Yr){return uu(hr,mr,Yr)},hr.fitWidth=function(mr,Yr){return Ju(hr,mr,Yr)},hr.fitHeight=function(mr,Yr){return Ls(hr,mr,Yr)},hr}function On(Kt,te){var Ie=te*te,_e=Ie*Ie;return[Kt*(.8707-.131979*Ie+_e*(-.013791+_e*(.003971*Ie-.001529*_e))),te*(1.007226+Ie*(.015085+_e*(-.044475+.028874*Ie-.005916*_e)))]}On.invert=function(Kt,te){var Ie=te,_e=25,Dt;do{var zt=Ie*Ie,oe=zt*zt;Ie-=Dt=(Ie*(1.007226+zt*(.015085+oe*(-.044475+.028874*zt-.005916*oe)))-te)/(1.007226+zt*(.015085*3+oe*(-.044475*7+.028874*9*zt-.005916*11*oe)))}while(l(Dt)>s&&--_e>0);return[Kt/(.8707+(zt=Ie*Ie)*(-.131979+zt*(-.013791+zt*zt*zt*(.003971-.001529*zt)))),Ie]};function fr(){return wo(On).scale(175.295)}function Ir(Kt,te){return[b(te)*y(Kt),y(te)]}Ir.invert=Qu(L);function Zr(){return wo(Ir).scale(249.5).clipAngle(90+s)}function ni(Kt,te){var Ie=b(te),_e=1+b(Kt)*Ie;return[Ie*y(Kt)/_e,y(te)/_e]}ni.invert=Qu(function(Kt){return 2*f(Kt)});function zr(){return wo(ni).scale(250).clipAngle(142)}function ci(Kt,te){return[M(A((h+te)/2)),-Kt]}ci.invert=function(Kt,te){return[-te,2*f(m(Kt))-h]};function xr(){var Kt=iu(ci),te=Kt.center,Ie=Kt.rotate;return Kt.center=function(_e){return arguments.length?te([-_e[1],_e[0]]):(_e=te(),[_e[1],-_e[0]])},Kt.rotate=function(_e){return arguments.length?Ie([_e[0],_e[1],_e.length>2?_e[2]+90:90]):(_e=Ie(),[_e[0],_e[1],_e[2]-90])},Ie([0,0,90]).scale(159.155)}t.geoAlbers=mo,t.geoAlbersUsa=wl,t.geoArea=Q,t.geoAzimuthalEqualArea=Zl,t.geoAzimuthalEqualAreaRaw=xc,t.geoAzimuthalEquidistant=ru,t.geoAzimuthalEquidistantRaw=qu,t.geoBounds=di,t.geoCentroid=$n,t.geoCircle=Do,t.geoClipAntimeridian=so,t.geoClipCircle=Yt,t.geoClipExtent=qn,t.geoClipRectangle=rr,t.geoConicConformal=Yi,t.geoConicConformalRaw=us,t.geoConicEqualArea=Da,t.geoConicEqualAreaRaw=Ys,t.geoConicEquidistant=Go,t.geoConicEquidistantRaw=Gu,t.geoContains=gn,t.geoDistance=Po,t.geoEqualEarth=we,t.geoEqualEarthRaw=$s,t.geoEquirectangular=tl,t.geoEquirectangularRaw=Fs,t.geoGnomonic=hn,t.geoGnomonicRaw=Pe,t.geoGraticule=Ui,t.geoGraticule10=za,t.geoIdentity=tn,t.geoInterpolate=go,t.geoLength=uo,t.geoMercator=es,t.geoMercatorRaw=Zs,t.geoNaturalEarth1=fr,t.geoNaturalEarth1Raw=On,t.geoOrthographic=Zr,t.geoOrthographicRaw=Ir,t.geoPath=Al,t.geoProjection=wo,t.geoProjectionMutator=ho,t.geoRotation=Aa,t.geoStereographic=zr,t.geoStereographicRaw=ni,t.geoStream=rt,t.geoTransform=Fl,t.geoTransverseMercator=xr,t.geoTransverseMercatorRaw=ci,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-hexjson@1.1.1@d3-hexjson/build/d3-hexjson.js":function(E,T,e){(function(t,u){u(T,e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"))})(this,function(t,u){"use strict";function s(l,f,v){var b=l.layout,g=[],m=0;Object.keys(l.hexes).forEach(function(H){l.hexes[H].key=H,g.push(l.hexes[H])});var _=u.max(g,function(H){return+H.q}),M=u.min(g,function(H){return+H.q}),x=u.max(g,function(H){return+H.r}),y=u.min(g,function(H){return+H.r}),S=_-M+1,P=x-y+1;b==="odd-r"||b==="even-r"?m=u.min([f/((S+.5)*Math.sqrt(3)),v/((P+1/3)*1.5)]):m=u.min([v/((P+.5)*Math.sqrt(3)),f/((S+1/3)*1.5)]);var A=m*Math.sqrt(3),O=h(b,A,m),L=n(O);return g.forEach(function(H){H.qc=H.q-M,H.rc=x-H.r,H.x=c(H,b,A,m),H.y=r(H,b,A,m),H.vertices=O,H.points=L}),g}function c(l,f,v,b){var g=0,m=0;switch(f){case"odd-r":m=l.rc%2==1?v:v/2,g=l.qc*v+m;break;case"even-r":m=l.rc%2==0?v:v/2,g=l.qc*v+m;break;case"odd-q":case"even-q":g=l.qc*b*1.5+b;break}return g}function r(l,f,v,b){var g=0,m=0;switch(f){case"odd-r":case"even-r":g=l.rc*b*1.5+b;break;case"odd-q":m=l.qc%2==1?v:v/2,g=l.rc*v+m;break;case"even-q":m=l.qc%2==0?v:v/2,g=l.rc*v+m;break}return g}function h(l,f,v){var b=[];switch(l){case"odd-r":case"even-r":b.push({x:0,y:0-v}),b.push({x:0+f*.5,y:0-.5*v}),b.push({x:0+f*.5,y:0+.5*v}),b.push({x:0,y:0+v}),b.push({x:0-f*.5,y:0+.5*v}),b.push({x:0-f*.5,y:0-.5*v});break;case"odd-q":case"even-q":b.push({x:0-v,y:0}),b.push({x:0-.5*v,y:0-f*.5}),b.push({x:0+.5*v,y:0-f*.5}),b.push({x:0+v,y:0}),b.push({x:0+.5*v,y:0+f*.5}),b.push({x:0-.5*v,y:0+f*.5});break}return b}function n(l){var f="";return l.forEach(function(v){f+=v.x+","+v.y+" "}),f.substring(0,f.length-1)}function i(l){var f={};f.layout=l.layout,f.hexes={};var v=[];Object.keys(l.hexes).forEach(function(S){v.push(l.hexes[S])});var b=u.max(v,function(S){return+S.q}),g=u.min(v,function(S){return+S.q}),m=u.max(v,function(S){return+S.r}),_=u.min(v,function(S){return+S.r}),M,x,y;for(M=g;M<=b;M++)for(x=_;x<=m;x++)y="Q"+M+"R"+x,f.hexes[y]={q:M,r:x};return f}function a(l,f,v,b){var g=[],m=l.layout;Object.keys(l.hexes).forEach(function(dt){g.push(l.hexes[dt])});var _=u.max(g,function(dt){return+dt.q}),M=u.min(g,function(dt){return+dt.q}),x=u.max(g,function(dt){return+dt.r}),y=u.min(g,function(dt){return+dt.r}),S=_-M+1,P=x-y+1,A;m==="odd-r"||m==="even-r"?A=u.min([f/((S+.5)*Math.sqrt(3)),v/((P+1/3)*1.5)]):A=u.min([v/((P+.5)*Math.sqrt(3)),f/((S+1/3)*1.5)]);var O=A*Math.sqrt(3),L=[],H=A*A*4,F=g.length;if(F>1){g.forEach(function(dt){dt.qc=dt.q-M,dt.rc=x-dt.r,dt.x=c(dt,m,O,A),dt.y=r(dt,m,O,A)});for(var Z=0;Z<F-1;Z++)for(var G=Z+1;G<F;G++){var U=g[Z],Y=g[G];if(U[b]!==Y[b]&&Math.abs(U.q-Y.q)<=1&&Math.abs(U.r-Y.r)<=1&&(U.x-Y.x)*(U.x-Y.x)+(U.y-Y.y)*(U.y-Y.y)<H){var J={};J.x=Y.x+(U.x-Y.x)/2,J.y=Y.y+(U.y-Y.y)/2;var rt={},ft=Math.sqrt(3)*4;rt.dx=(U.y-Y.y)/ft,rt.dy=-(U.x-Y.x)/ft,L.push({x:J.x-2*rt.dx,y:J.y-2*rt.dy}),L.push({x:J.x-rt.dx,y:J.y-rt.dy}),L.push({x:J.x,y:J.y}),L.push({x:J.x+rt.dx,y:J.y+rt.dy}),L.push({x:J.x+2*rt.dx,y:J.y+2*rt.dy})}}}return L}function o(l,f,v,b){var g=[],m=l.layout;Object.keys(l.hexes).forEach(function(ut){g.push(l.hexes[ut])});var _=u.max(g,function(ut){return+ut.q}),M=u.min(g,function(ut){return+ut.q}),x=u.max(g,function(ut){return+ut.r}),y=u.min(g,function(ut){return+ut.r}),S=_-M+1,P=x-y+1,A;m==="odd-r"||m==="even-r"?A=u.min([f/((S+.5)*Math.sqrt(3)),v/((P+1/3)*1.5)]):A=u.min([v/((P+.5)*Math.sqrt(3)),f/((S+1/3)*1.5)]);var O=A*Math.sqrt(3),L=[],H=A*A*4,F=g.length;if(F>1){g.forEach(function(ut){ut.qc=ut.q-M,ut.rc=x-ut.r,ut.x=c(ut,m,O,A),ut.y=r(ut,m,O,A)});for(var Z=0;Z<F-1;Z++)for(var G=Z+1;G<F;G++){var U=g[Z],Y=g[G];if(U[b]!==Y[b]&&Math.abs(U.q-Y.q)<=1&&Math.abs(U.r-Y.r)<=1&&(U.x-Y.x)*(U.x-Y.x)+(U.y-Y.y)*(U.y-Y.y)<H){var J={};J.x=Y.x+(U.x-Y.x)/2,J.y=Y.y+(U.y-Y.y)/2;var rt={},ft=1;U[b]<Y[b]&&(ft=-1);var dt=Math.sqrt(3)*2*ft;rt.dx=(U.y-Y.y)/dt,rt.dy=-(U.x-Y.x)/dt,L.push({x1:J.x-rt.dx,y1:J.y-rt.dy,x2:J.x+rt.dx,y2:J.y+rt.dy})}}}return L}t.renderHexJSON=s,t.getGridForHexJSON=i,t.getBoundaryDotsForHexJSON=a,t.getBoundarySegmentsForHexJSON=o,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";function u(Vt,re){return Vt.parent===re.parent?1:2}function s(Vt){return Vt.reduce(c,0)/Vt.length}function c(Vt,re){return Vt+re.x}function r(Vt){return 1+Vt.reduce(h,0)}function h(Vt,re){return Math.max(Vt,re.y)}function n(Vt){for(var re;re=Vt.children;)Vt=re[0];return Vt}function i(Vt){for(var re;re=Vt.children;)Vt=re[re.length-1];return Vt}function a(){var Vt=u,re=1,Te=1,ue=!1;function xe(Ke){var Rn,tr=0;Ke.eachAfter(function(cn){var Pr=cn.children;Pr?(cn.x=s(Pr),cn.y=r(Pr)):(cn.x=Rn?tr+=Vt(cn,Rn):0,cn.y=0,Rn=cn)});var Pn=n(Ke),dn=i(Ke),Ar=Pn.x-Vt(Pn,dn)/2,or=dn.x+Vt(dn,Pn)/2;return Ke.eachAfter(ue?function(cn){cn.x=(cn.x-Ke.x)*re,cn.y=(Ke.y-cn.y)*Te}:function(cn){cn.x=(cn.x-Ar)/(or-Ar)*re,cn.y=(1-(Ke.y?cn.y/Ke.y:1))*Te})}return xe.separation=function(Ke){return arguments.length?(Vt=Ke,xe):Vt},xe.size=function(Ke){return arguments.length?(ue=!1,re=+Ke[0],Te=+Ke[1],xe):ue?null:[re,Te]},xe.nodeSize=function(Ke){return arguments.length?(ue=!0,re=+Ke[0],Te=+Ke[1],xe):ue?[re,Te]:null},xe}function o(Vt){var re=0,Te=Vt.children,ue=Te&&Te.length;if(!ue)re=1;else for(;--ue>=0;)re+=Te[ue].value;Vt.value=re}function l(){return this.eachAfter(o)}function f(Vt){var re=this,Te,ue=[re],xe,Ke,Rn;do for(Te=ue.reverse(),ue=[];re=Te.pop();)if(Vt(re),xe=re.children,xe)for(Ke=0,Rn=xe.length;Ke<Rn;++Ke)ue.push(xe[Ke]);while(ue.length);return this}function v(Vt){for(var re=this,Te=[re],ue,xe;re=Te.pop();)if(Vt(re),ue=re.children,ue)for(xe=ue.length-1;xe>=0;--xe)Te.push(ue[xe]);return this}function b(Vt){for(var re=this,Te=[re],ue=[],xe,Ke,Rn;re=Te.pop();)if(ue.push(re),xe=re.children,xe)for(Ke=0,Rn=xe.length;Ke<Rn;++Ke)Te.push(xe[Ke]);for(;re=ue.pop();)Vt(re);return this}function g(Vt){return this.eachAfter(function(re){for(var Te=+Vt(re.data)||0,ue=re.children,xe=ue&&ue.length;--xe>=0;)Te+=ue[xe].value;re.value=Te})}function m(Vt){return this.eachBefore(function(re){re.children&&re.children.sort(Vt)})}function _(Vt){for(var re=this,Te=M(re,Vt),ue=[re];re!==Te;)re=re.parent,ue.push(re);for(var xe=ue.length;Vt!==Te;)ue.splice(xe,0,Vt),Vt=Vt.parent;return ue}function M(Vt,re){if(Vt===re)return Vt;var Te=Vt.ancestors(),ue=re.ancestors(),xe=null;for(Vt=Te.pop(),re=ue.pop();Vt===re;)xe=Vt,Vt=Te.pop(),re=ue.pop();return xe}function x(){for(var Vt=this,re=[Vt];Vt=Vt.parent;)re.push(Vt);return re}function y(){var Vt=[];return this.each(function(re){Vt.push(re)}),Vt}function S(){var Vt=[];return this.eachBefore(function(re){re.children||Vt.push(re)}),Vt}function P(){var Vt=this,re=[];return Vt.each(function(Te){Te!==Vt&&re.push({source:Te.parent,target:Te})}),re}function A(Vt,re){var Te=new Z(Vt),ue=+Vt.value&&(Te.value=Vt.value),xe,Ke=[Te],Rn,tr,Pn,dn;for(re==null&&(re=L);xe=Ke.pop();)if(ue&&(xe.value=+xe.data.value),(tr=re(xe.data))&&(dn=tr.length))for(xe.children=new Array(dn),Pn=dn-1;Pn>=0;--Pn)Ke.push(Rn=xe.children[Pn]=new Z(tr[Pn])),Rn.parent=xe,Rn.depth=xe.depth+1;return Te.eachBefore(F)}function O(){return A(this).eachBefore(H)}function L(Vt){return Vt.children}function H(Vt){Vt.data=Vt.data.data}function F(Vt){var re=0;do Vt.height=re;while((Vt=Vt.parent)&&Vt.height<++re)}function Z(Vt){this.data=Vt,this.depth=this.height=0,this.parent=null}Z.prototype=A.prototype={constructor:Z,count:l,each:f,eachAfter:b,eachBefore:v,sum:g,sort:m,path:_,ancestors:x,descendants:y,leaves:S,links:P,copy:O};var G=Array.prototype.slice;function U(Vt){for(var re=Vt.length,Te,ue;re;)ue=Math.random()*re--|0,Te=Vt[re],Vt[re]=Vt[ue],Vt[ue]=Te;return Vt}function Y(Vt){for(var re=0,Te=(Vt=U(G.call(Vt))).length,ue=[],xe,Ke;re<Te;)xe=Vt[re],Ke&&ft(Ke,xe)?++re:(Ke=ut(ue=J(ue,xe)),re=0);return Ke}function J(Vt,re){var Te,ue;if(dt(re,Vt))return[re];for(Te=0;Te<Vt.length;++Te)if(rt(re,Vt[Te])&&dt(Ft(Vt[Te],re),Vt))return[Vt[Te],re];for(Te=0;Te<Vt.length-1;++Te)for(ue=Te+1;ue<Vt.length;++ue)if(rt(Ft(Vt[Te],Vt[ue]),re)&&rt(Ft(Vt[Te],re),Vt[ue])&&rt(Ft(Vt[ue],re),Vt[Te])&&dt(Ot(Vt[Te],Vt[ue],re),Vt))return[Vt[Te],Vt[ue],re];throw new Error}function rt(Vt,re){var Te=Vt.r-re.r,ue=re.x-Vt.x,xe=re.y-Vt.y;return Te<0||Te*Te<ue*ue+xe*xe}function ft(Vt,re){var Te=Vt.r-re.r+1e-6,ue=re.x-Vt.x,xe=re.y-Vt.y;return Te>0&&Te*Te>ue*ue+xe*xe}function dt(Vt,re){for(var Te=0;Te<re.length;++Te)if(!ft(Vt,re[Te]))return!1;return!0}function ut(Vt){switch(Vt.length){case 1:return Lt(Vt[0]);case 2:return Ft(Vt[0],Vt[1]);case 3:return Ot(Vt[0],Vt[1],Vt[2])}}function Lt(Vt){return{x:Vt.x,y:Vt.y,r:Vt.r}}function Ft(Vt,re){var Te=Vt.x,ue=Vt.y,xe=Vt.r,Ke=re.x,Rn=re.y,tr=re.r,Pn=Ke-Te,dn=Rn-ue,Ar=tr-xe,or=Math.sqrt(Pn*Pn+dn*dn);return{x:(Te+Ke+Pn/or*Ar)/2,y:(ue+Rn+dn/or*Ar)/2,r:(or+xe+tr)/2}}function Ot(Vt,re,Te){var ue=Vt.x,xe=Vt.y,Ke=Vt.r,Rn=re.x,tr=re.y,Pn=re.r,dn=Te.x,Ar=Te.y,or=Te.r,cn=ue-Rn,Pr=ue-dn,Sr=xe-tr,Re=xe-Ar,$e=Pn-Ke,Ve=or-Ke,En=ue*ue+xe*xe-Ke*Ke,xn=En-Rn*Rn-tr*tr+Pn*Pn,Nn=En-dn*dn-Ar*Ar+or*or,mn=Pr*Sr-cn*Re,Dn=(Sr*Nn-Re*xn)/(mn*2)-ue,$n=(Re*$e-Sr*Ve)/mn,Hn=(Pr*xn-cn*Nn)/(mn*2)-xe,_n=(cn*Ve-Pr*$e)/mn,br=$n*$n+_n*_n-1,yr=2*(Ke+Dn*$n+Hn*_n),Fr=Dn*Dn+Hn*Hn-Ke*Ke,Ei=-(br?(yr+Math.sqrt(yr*yr-4*br*Fr))/(2*br):Fr/yr);return{x:ue+Dn+$n*Ei,y:xe+Hn+_n*Ei,r:Ei}}function St(Vt,re,Te){var ue=Vt.x-re.x,xe,Ke,Rn=Vt.y-re.y,tr,Pn,dn=ue*ue+Rn*Rn;dn?(Ke=re.r+Te.r,Ke*=Ke,Pn=Vt.r+Te.r,Pn*=Pn,Ke>Pn?(xe=(dn+Pn-Ke)/(2*dn),tr=Math.sqrt(Math.max(0,Pn/dn-xe*xe)),Te.x=Vt.x-xe*ue-tr*Rn,Te.y=Vt.y-xe*Rn+tr*ue):(xe=(dn+Ke-Pn)/(2*dn),tr=Math.sqrt(Math.max(0,Ke/dn-xe*xe)),Te.x=re.x+xe*ue-tr*Rn,Te.y=re.y+xe*Rn+tr*ue)):(Te.x=re.x+Te.r,Te.y=re.y)}function xt(Vt,re){var Te=Vt.r+re.r-1e-6,ue=re.x-Vt.x,xe=re.y-Vt.y;return Te>0&&Te*Te>ue*ue+xe*xe}function At(Vt){var re=Vt._,Te=Vt.next._,ue=re.r+Te.r,xe=(re.x*Te.r+Te.x*re.r)/ue,Ke=(re.y*Te.r+Te.y*re.r)/ue;return xe*xe+Ke*Ke}function nt(Vt){this._=Vt,this.next=null,this.previous=null}function Mt(Vt){if(!(xe=Vt.length))return 0;var re,Te,ue,xe,Ke,Rn,tr,Pn,dn,Ar,or;if(re=Vt[0],re.x=0,re.y=0,!(xe>1))return re.r;if(Te=Vt[1],re.x=-Te.r,Te.x=re.r,Te.y=0,!(xe>2))return re.r+Te.r;St(Te,re,ue=Vt[2]),re=new nt(re),Te=new nt(Te),ue=new nt(ue),re.next=ue.previous=Te,Te.next=re.previous=ue,ue.next=Te.previous=re;t:for(tr=3;tr<xe;++tr){St(re._,Te._,ue=Vt[tr]),ue=new nt(ue),Pn=Te.next,dn=re.previous,Ar=Te._.r,or=re._.r;do if(Ar<=or){if(xt(Pn._,ue._)){Te=Pn,re.next=Te,Te.previous=re,--tr;continue t}Ar+=Pn._.r,Pn=Pn.next}else{if(xt(dn._,ue._)){re=dn,re.next=Te,Te.previous=re,--tr;continue t}or+=dn._.r,dn=dn.previous}while(Pn!==dn.next);for(ue.previous=re,ue.next=Te,re.next=Te.previous=Te=ue,Ke=At(re);(ue=ue.next)!==Te;)(Rn=At(ue))<Ke&&(re=ue,Ke=Rn);Te=re.next}for(re=[Te._],ue=Te;(ue=ue.next)!==Te;)re.push(ue._);for(ue=Y(re),tr=0;tr<xe;++tr)re=Vt[tr],re.x-=ue.x,re.y-=ue.y;return ue.r}function z(Vt){return Mt(Vt),Vt}function Q(Vt){return Vt==null?null:ht(Vt)}function ht(Vt){if(typeof Vt!="function")throw new Error;return Vt}function et(){return 0}function at(Vt){return function(){return Vt}}function gt(Vt){return Math.sqrt(Vt.value)}function k(){var Vt=null,re=1,Te=1,ue=et;function xe(Ke){return Ke.x=re/2,Ke.y=Te/2,Vt?Ke.eachBefore(ot(Vt)).eachAfter(it(ue,.5)).eachBefore(X(1)):Ke.eachBefore(ot(gt)).eachAfter(it(et,1)).eachAfter(it(ue,Ke.r/Math.min(re,Te))).eachBefore(X(Math.min(re,Te)/(2*Ke.r))),Ke}return xe.radius=function(Ke){return arguments.length?(Vt=Q(Ke),xe):Vt},xe.size=function(Ke){return arguments.length?(re=+Ke[0],Te=+Ke[1],xe):[re,Te]},xe.padding=function(Ke){return arguments.length?(ue=typeof Ke=="function"?Ke:at(+Ke),xe):ue},xe}function ot(Vt){return function(re){re.children||(re.r=Math.max(0,+Vt(re)||0))}}function it(Vt,re){return function(Te){if(ue=Te.children){var ue,xe,Ke=ue.length,Rn=Vt(Te)*re||0,tr;if(Rn)for(xe=0;xe<Ke;++xe)ue[xe].r+=Rn;if(tr=Mt(ue),Rn)for(xe=0;xe<Ke;++xe)ue[xe].r-=Rn;Te.r=tr+Rn}}}function X(Vt){return function(re){var Te=re.parent;re.r*=Vt,Te&&(re.x=Te.x+Vt*re.x,re.y=Te.y+Vt*re.y)}}function Et(Vt){Vt.x0=Math.round(Vt.x0),Vt.y0=Math.round(Vt.y0),Vt.x1=Math.round(Vt.x1),Vt.y1=Math.round(Vt.y1)}function vt(Vt,re,Te,ue,xe){for(var Ke=Vt.children,Rn,tr=-1,Pn=Ke.length,dn=Vt.value&&(ue-re)/Vt.value;++tr<Pn;)Rn=Ke[tr],Rn.y0=Te,Rn.y1=xe,Rn.x0=re,Rn.x1=re+=Rn.value*dn}function Nt(){var Vt=1,re=1,Te=0,ue=!1;function xe(Rn){var tr=Rn.height+1;return Rn.x0=Rn.y0=Te,Rn.x1=Vt,Rn.y1=re/tr,Rn.eachBefore(Ke(re,tr)),ue&&Rn.eachBefore(Et),Rn}function Ke(Rn,tr){return function(Pn){Pn.children&&vt(Pn,Pn.x0,Rn*(Pn.depth+1)/tr,Pn.x1,Rn*(Pn.depth+2)/tr);var dn=Pn.x0,Ar=Pn.y0,or=Pn.x1-Te,cn=Pn.y1-Te;or<dn&&(dn=or=(dn+or)/2),cn<Ar&&(Ar=cn=(Ar+cn)/2),Pn.x0=dn,Pn.y0=Ar,Pn.x1=or,Pn.y1=cn}}return xe.round=function(Rn){return arguments.length?(ue=!!Rn,xe):ue},xe.size=function(Rn){return arguments.length?(Vt=+Rn[0],re=+Rn[1],xe):[Vt,re]},xe.padding=function(Rn){return arguments.length?(Te=+Rn,xe):Te},xe}var $t="$",ee={depth:-1},kt={};function Wt(Vt){return Vt.id}function ae(Vt){return Vt.parentId}function le(){var Vt=Wt,re=ae;function Te(ue){var xe,Ke,Rn=ue.length,tr,Pn,dn,Ar=new Array(Rn),or,cn,Pr={};for(Ke=0;Ke<Rn;++Ke)xe=ue[Ke],dn=Ar[Ke]=new Z(xe),(or=Vt(xe,Ke,ue))!=null&&(or+="")&&(cn=$t+(dn.id=or),Pr[cn]=cn in Pr?kt:dn);for(Ke=0;Ke<Rn;++Ke)if(dn=Ar[Ke],or=re(ue[Ke],Ke,ue),or==null||!(or+="")){if(tr)throw new Error("multiple roots");tr=dn}else{if(Pn=Pr[$t+or],!Pn)throw new Error("missing: "+or);if(Pn===kt)throw new Error("ambiguous: "+or);Pn.children?Pn.children.push(dn):Pn.children=[dn],dn.parent=Pn}if(!tr)throw new Error("no root");if(tr.parent=ee,tr.eachBefore(function(Sr){Sr.depth=Sr.parent.depth+1,--Rn}).eachBefore(F),tr.parent=null,Rn>0)throw new Error("cycle");return tr}return Te.id=function(ue){return arguments.length?(Vt=ht(ue),Te):Vt},Te.parentId=function(ue){return arguments.length?(re=ht(ue),Te):re},Te}function je(Vt,re){return Vt.parent===re.parent?1:2}function Oe(Vt){var re=Vt.children;return re?re[0]:Vt.t}function We(Vt){var re=Vt.children;return re?re[re.length-1]:Vt.t}function Ye(Vt,re,Te){var ue=Te/(re.i-Vt.i);re.c-=ue,re.s+=Te,Vt.c+=ue,re.z+=Te,re.m+=Te}function wn(Vt){for(var re=0,Te=0,ue=Vt.children,xe=ue.length,Ke;--xe>=0;)Ke=ue[xe],Ke.z+=re,Ke.m+=re,re+=Ke.s+(Te+=Ke.c)}function er(Vt,re,Te){return Vt.a.parent===re.parent?Vt.a:Te}function wr(Vt,re){this._=Vt,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=re}wr.prototype=Object.create(Z.prototype);function on(Vt){for(var re=new wr(Vt,0),Te,ue=[re],xe,Ke,Rn,tr;Te=ue.pop();)if(Ke=Te._.children)for(Te.children=new Array(tr=Ke.length),Rn=tr-1;Rn>=0;--Rn)ue.push(xe=Te.children[Rn]=new wr(Ke[Rn],Rn)),xe.parent=Te;return(re.parent=new wr(null,0)).children=[re],re}function en(){var Vt=je,re=1,Te=1,ue=null;function xe(dn){var Ar=on(dn);if(Ar.eachAfter(Ke),Ar.parent.m=-Ar.z,Ar.eachBefore(Rn),ue)dn.eachBefore(Pn);else{var or=dn,cn=dn,Pr=dn;dn.eachBefore(function(En){En.x<or.x&&(or=En),En.x>cn.x&&(cn=En),En.depth>Pr.depth&&(Pr=En)});var Sr=or===cn?1:Vt(or,cn)/2,Re=Sr-or.x,$e=re/(cn.x+Sr+Re),Ve=Te/(Pr.depth||1);dn.eachBefore(function(En){En.x=(En.x+Re)*$e,En.y=En.depth*Ve})}return dn}function Ke(dn){var Ar=dn.children,or=dn.parent.children,cn=dn.i?or[dn.i-1]:null;if(Ar){wn(dn);var Pr=(Ar[0].z+Ar[Ar.length-1].z)/2;cn?(dn.z=cn.z+Vt(dn._,cn._),dn.m=dn.z-Pr):dn.z=Pr}else cn&&(dn.z=cn.z+Vt(dn._,cn._));dn.parent.A=tr(dn,cn,dn.parent.A||or[0])}function Rn(dn){dn._.x=dn.z+dn.parent.m,dn.m+=dn.parent.m}function tr(dn,Ar,or){if(Ar){for(var cn=dn,Pr=dn,Sr=Ar,Re=cn.parent.children[0],$e=cn.m,Ve=Pr.m,En=Sr.m,xn=Re.m,Nn;Sr=We(Sr),cn=Oe(cn),Sr&&cn;)Re=Oe(Re),Pr=We(Pr),Pr.a=dn,Nn=Sr.z+En-cn.z-$e+Vt(Sr._,cn._),Nn>0&&(Ye(er(Sr,dn,or),dn,Nn),$e+=Nn,Ve+=Nn),En+=Sr.m,$e+=cn.m,xn+=Re.m,Ve+=Pr.m;Sr&&!We(Pr)&&(Pr.t=Sr,Pr.m+=En-Ve),cn&&!Oe(Re)&&(Re.t=cn,Re.m+=$e-xn,or=dn)}return or}function Pn(dn){dn.x*=re,dn.y=dn.depth*Te}return xe.separation=function(dn){return arguments.length?(Vt=dn,xe):Vt},xe.size=function(dn){return arguments.length?(ue=!1,re=+dn[0],Te=+dn[1],xe):ue?null:[re,Te]},xe.nodeSize=function(dn){return arguments.length?(ue=!0,re=+dn[0],Te=+dn[1],xe):ue?[re,Te]:null},xe}function An(Vt,re,Te,ue,xe){for(var Ke=Vt.children,Rn,tr=-1,Pn=Ke.length,dn=Vt.value&&(xe-Te)/Vt.value;++tr<Pn;)Rn=Ke[tr],Rn.x0=re,Rn.x1=ue,Rn.y0=Te,Rn.y1=Te+=Rn.value*dn}var jn=(1+Math.sqrt(5))/2;function pr(Vt,re,Te,ue,xe,Ke){for(var Rn=[],tr=re.children,Pn,dn,Ar=0,or=0,cn=tr.length,Pr,Sr,Re=re.value,$e,Ve,En,xn,Nn,mn,Dn;Ar<cn;){Pr=xe-Te,Sr=Ke-ue;do $e=tr[or++].value;while(!$e&&or<cn);for(Ve=En=$e,mn=Math.max(Sr/Pr,Pr/Sr)/(Re*Vt),Dn=$e*$e*mn,Nn=Math.max(En/Dn,Dn/Ve);or<cn;++or){if($e+=dn=tr[or].value,dn<Ve&&(Ve=dn),dn>En&&(En=dn),Dn=$e*$e*mn,xn=Math.max(En/Dn,Dn/Ve),xn>Nn){$e-=dn;break}Nn=xn}Rn.push(Pn={value:$e,dice:Pr<Sr,children:tr.slice(Ar,or)}),Pn.dice?vt(Pn,Te,ue,xe,Re?ue+=Sr*$e/Re:Ke):An(Pn,Te,ue,Re?Te+=Pr*$e/Re:xe,Ke),Re-=$e,Ar=or}return Rn}var di=function Vt(re){function Te(ue,xe,Ke,Rn,tr){pr(re,ue,xe,Ke,Rn,tr)}return Te.ratio=function(ue){return Vt((ue=+ue)>1?ue:1)},Te}(jn);function Ce(){var Vt=di,re=!1,Te=1,ue=1,xe=[0],Ke=et,Rn=et,tr=et,Pn=et,dn=et;function Ar(cn){return cn.x0=cn.y0=0,cn.x1=Te,cn.y1=ue,cn.eachBefore(or),xe=[0],re&&cn.eachBefore(Et),cn}function or(cn){var Pr=xe[cn.depth],Sr=cn.x0+Pr,Re=cn.y0+Pr,$e=cn.x1-Pr,Ve=cn.y1-Pr;$e<Sr&&(Sr=$e=(Sr+$e)/2),Ve<Re&&(Re=Ve=(Re+Ve)/2),cn.x0=Sr,cn.y0=Re,cn.x1=$e,cn.y1=Ve,cn.children&&(Pr=xe[cn.depth+1]=Ke(cn)/2,Sr+=dn(cn)-Pr,Re+=Rn(cn)-Pr,$e-=tr(cn)-Pr,Ve-=Pn(cn)-Pr,$e<Sr&&(Sr=$e=(Sr+$e)/2),Ve<Re&&(Re=Ve=(Re+Ve)/2),Vt(cn,Sr,Re,$e,Ve))}return Ar.round=function(cn){return arguments.length?(re=!!cn,Ar):re},Ar.size=function(cn){return arguments.length?(Te=+cn[0],ue=+cn[1],Ar):[Te,ue]},Ar.tile=function(cn){return arguments.length?(Vt=ht(cn),Ar):Vt},Ar.padding=function(cn){return arguments.length?Ar.paddingInner(cn).paddingOuter(cn):Ar.paddingInner()},Ar.paddingInner=function(cn){return arguments.length?(Ke=typeof cn=="function"?cn:at(+cn),Ar):Ke},Ar.paddingOuter=function(cn){return arguments.length?Ar.paddingTop(cn).paddingRight(cn).paddingBottom(cn).paddingLeft(cn):Ar.paddingTop()},Ar.paddingTop=function(cn){return arguments.length?(Rn=typeof cn=="function"?cn:at(+cn),Ar):Rn},Ar.paddingRight=function(cn){return arguments.length?(tr=typeof cn=="function"?cn:at(+cn),Ar):tr},Ar.paddingBottom=function(cn){return arguments.length?(Pn=typeof cn=="function"?cn:at(+cn),Ar):Pn},Ar.paddingLeft=function(cn){return arguments.length?(dn=typeof cn=="function"?cn:at(+cn),Ar):dn},Ar}function Me(Vt,re,Te,ue,xe){var Ke=Vt.children,Rn,tr=Ke.length,Pn,dn=new Array(tr+1);for(dn[0]=Pn=Rn=0;Rn<tr;++Rn)dn[Rn+1]=Pn+=Ke[Rn].value;Ar(0,tr,Vt.value,re,Te,ue,xe);function Ar(or,cn,Pr,Sr,Re,$e,Ve){if(or>=cn-1){var En=Ke[or];En.x0=Sr,En.y0=Re,En.x1=$e,En.y1=Ve;return}for(var xn=dn[or],Nn=Pr/2+xn,mn=or+1,Dn=cn-1;mn<Dn;){var $n=mn+Dn>>>1;dn[$n]<Nn?mn=$n+1:Dn=$n}Nn-dn[mn-1]<dn[mn]-Nn&&or+1<mn&&--mn;var Hn=dn[mn]-xn,_n=Pr-Hn;if($e-Sr>Ve-Re){var br=(Sr*_n+$e*Hn)/Pr;Ar(or,mn,Hn,Sr,Re,br,Ve),Ar(mn,cn,_n,br,Re,$e,Ve)}else{var yr=(Re*_n+Ve*Hn)/Pr;Ar(or,mn,Hn,Sr,Re,$e,yr),Ar(mn,cn,_n,Sr,yr,$e,Ve)}}}function Qt(Vt,re,Te,ue,xe){(Vt.depth&1?An:vt)(Vt,re,Te,ue,xe)}var pe=function Vt(re){function Te(ue,xe,Ke,Rn,tr){if((Pn=ue._squarify)&&Pn.ratio===re)for(var Pn,dn,Ar,or,cn=-1,Pr,Sr=Pn.length,Re=ue.value;++cn<Sr;){for(dn=Pn[cn],Ar=dn.children,or=dn.value=0,Pr=Ar.length;or<Pr;++or)dn.value+=Ar[or].value;dn.dice?vt(dn,xe,Ke,Rn,Ke+=(tr-Ke)*dn.value/Re):An(dn,xe,Ke,xe+=(Rn-xe)*dn.value/Re,tr),Re-=dn.value}else ue._squarify=Pn=pr(re,ue,xe,Ke,Rn,tr),Pn.ratio=re}return Te.ratio=function(ue){return Vt((ue=+ue)>1?ue:1)},Te}(jn);t.cluster=a,t.hierarchy=A,t.pack=k,t.packEnclose=Y,t.packSiblings=z,t.partition=Nt,t.stratify=le,t.tree=en,t.treemap=Ce,t.treemapBinary=Me,t.treemapDice=vt,t.treemapResquarify=pe,t.treemapSlice=An,t.treemapSliceDice=Qt,t.treemapSquarify=di,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-path@1.0.9@d3-path/dist/d3-path.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";var u=Math.PI,s=2*u,c=1e-6,r=s-c;function h(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new h}h.prototype=n.prototype={constructor:h,moveTo:function(a,o){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+o)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(a,o){this._+="L"+(this._x1=+a)+","+(this._y1=+o)},quadraticCurveTo:function(a,o,l,f){this._+="Q"+ +a+","+ +o+","+(this._x1=+l)+","+(this._y1=+f)},bezierCurveTo:function(a,o,l,f,v,b){this._+="C"+ +a+","+ +o+","+ +l+","+ +f+","+(this._x1=+v)+","+(this._y1=+b)},arcTo:function(a,o,l,f,v){a=+a,o=+o,l=+l,f=+f,v=+v;var b=this._x1,g=this._y1,m=l-a,_=f-o,M=b-a,x=g-o,y=M*M+x*x;if(v<0)throw new Error("negative radius: "+v);if(this._x1===null)this._+="M"+(this._x1=a)+","+(this._y1=o);else if(y>c)if(!(Math.abs(x*m-_*M)>c)||!v)this._+="L"+(this._x1=a)+","+(this._y1=o);else{var S=l-b,P=f-g,A=m*m+_*_,O=S*S+P*P,L=Math.sqrt(A),H=Math.sqrt(y),F=v*Math.tan((u-Math.acos((A+y-O)/(2*L*H)))/2),Z=F/H,G=F/L;Math.abs(Z-1)>c&&(this._+="L"+(a+Z*M)+","+(o+Z*x)),this._+="A"+v+","+v+",0,0,"+ +(x*S>M*P)+","+(this._x1=a+G*m)+","+(this._y1=o+G*_)}},arc:function(a,o,l,f,v,b){a=+a,o=+o,l=+l,b=!!b;var g=l*Math.cos(f),m=l*Math.sin(f),_=a+g,M=o+m,x=1^b,y=b?f-v:v-f;if(l<0)throw new Error("negative radius: "+l);this._x1===null?this._+="M"+_+","+M:(Math.abs(this._x1-_)>c||Math.abs(this._y1-M)>c)&&(this._+="L"+_+","+M),!!l&&(y<0&&(y=y%s+s),y>r?this._+="A"+l+","+l+",0,1,"+x+","+(a-g)+","+(o-m)+"A"+l+","+l+",0,1,"+x+","+(this._x1=_)+","+(this._y1=M):y>c&&(this._+="A"+l+","+l+",0,"+ +(y>=u)+","+x+","+(this._x1=a+l*Math.cos(v))+","+(this._y1=o+l*Math.sin(v))))},rect:function(a,o,l,f){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+o)+"h"+ +l+"v"+ +f+"h"+-l+"Z"},toString:function(){return this._}},t.path=n,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-path@2.0.0@d3-path/dist/d3-path.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";var u=Math.PI,s=2*u,c=1e-6,r=s-c;function h(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new h}h.prototype=n.prototype={constructor:h,moveTo:function(a,o){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+o)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(a,o){this._+="L"+(this._x1=+a)+","+(this._y1=+o)},quadraticCurveTo:function(a,o,l,f){this._+="Q"+ +a+","+ +o+","+(this._x1=+l)+","+(this._y1=+f)},bezierCurveTo:function(a,o,l,f,v,b){this._+="C"+ +a+","+ +o+","+ +l+","+ +f+","+(this._x1=+v)+","+(this._y1=+b)},arcTo:function(a,o,l,f,v){a=+a,o=+o,l=+l,f=+f,v=+v;var b=this._x1,g=this._y1,m=l-a,_=f-o,M=b-a,x=g-o,y=M*M+x*x;if(v<0)throw new Error("negative radius: "+v);if(this._x1===null)this._+="M"+(this._x1=a)+","+(this._y1=o);else if(y>c)if(!(Math.abs(x*m-_*M)>c)||!v)this._+="L"+(this._x1=a)+","+(this._y1=o);else{var S=l-b,P=f-g,A=m*m+_*_,O=S*S+P*P,L=Math.sqrt(A),H=Math.sqrt(y),F=v*Math.tan((u-Math.acos((A+y-O)/(2*L*H)))/2),Z=F/H,G=F/L;Math.abs(Z-1)>c&&(this._+="L"+(a+Z*M)+","+(o+Z*x)),this._+="A"+v+","+v+",0,0,"+ +(x*S>M*P)+","+(this._x1=a+G*m)+","+(this._y1=o+G*_)}},arc:function(a,o,l,f,v,b){a=+a,o=+o,l=+l,b=!!b;var g=l*Math.cos(f),m=l*Math.sin(f),_=a+g,M=o+m,x=1^b,y=b?f-v:v-f;if(l<0)throw new Error("negative radius: "+l);this._x1===null?this._+="M"+_+","+M:(Math.abs(this._x1-_)>c||Math.abs(this._y1-M)>c)&&(this._+="L"+_+","+M),!!l&&(y<0&&(y=y%s+s),y>r?this._+="A"+l+","+l+",0,1,"+x+","+(a-g)+","+(o-m)+"A"+l+","+l+",0,1,"+x+","+(this._x1=_)+","+(this._y1=M):y>c&&(this._+="A"+l+","+l+",0,"+ +(y>=u)+","+x+","+(this._x1=a+l*Math.cos(v))+","+(this._y1=o+l*Math.sin(v))))},rect:function(a,o,l,f){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+o)+"h"+ +l+"v"+ +f+"h"+-l+"Z"},toString:function(){return this._}},t.path=n,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-sankey@0.9.1@d3-sankey/dist/d3-sankey.js":function(E,T,e){var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js");(function(u,s){s(T,e("./node_modules/_d3-array@1.2.4@d3-array/dist/d3-array.js"),e("./node_modules/_d3-collection@1.0.7@d3-collection/dist/d3-collection.js"),e("./node_modules/_d3-shape@1.3.7@d3-shape/dist/d3-shape.js"))})(this,function(u,s,c,r){"use strict";function h(O){return O.target.depth}function n(O){return O.depth}function i(O,L){return L-1-O.height}function a(O,L){return O.sourceLinks.length?O.depth:L-1}function o(O){return O.targetLinks.length?O.depth:O.sourceLinks.length?s.min(O.sourceLinks,h)-1:0}function l(O){return function(){return O}}function f(O,L){return b(O.source,L.source)||O.index-L.index}function v(O,L){return b(O.target,L.target)||O.index-L.index}function b(O,L){return O.y0-L.y0}function g(O){return O.value}function m(O){return O.index}function _(O){return O.nodes}function M(O){return O.links}function x(O,L){var H=O.get(L);if(!H)throw new Error("missing: "+L);return H}function y(){var O=0,L=0,H=1,F=1,Z=24,G=8,U=m,Y=a,J,rt=_,ft=M,dt=6;function ut(){var At={nodes:rt.apply(null,arguments),links:ft.apply(null,arguments)};return Lt(At),Ft(At),Ot(At),St(At),xt(At),At}ut.update=function(At){return xt(At),At},ut.nodeId=function(At){return arguments.length?(U=typeof At=="function"?At:l(At),ut):U},ut.nodeAlign=function(At){return arguments.length?(Y=typeof At=="function"?At:l(At),ut):Y},ut.nodeSort=function(At){return arguments.length?(J=At,ut):J},ut.nodeWidth=function(At){return arguments.length?(Z=+At,ut):Z},ut.nodePadding=function(At){return arguments.length?(G=+At,ut):G},ut.nodes=function(At){return arguments.length?(rt=typeof At=="function"?At:l(At),ut):rt},ut.links=function(At){return arguments.length?(ft=typeof At=="function"?At:l(At),ut):ft},ut.size=function(At){return arguments.length?(O=L=0,H=+At[0],F=+At[1],ut):[H-O,F-L]},ut.extent=function(At){return arguments.length?(O=+At[0][0],H=+At[1][0],L=+At[0][1],F=+At[1][1],ut):[[O,L],[H,F]]},ut.iterations=function(At){return arguments.length?(dt=+At,ut):dt};function Lt(At){At.nodes.forEach(function(Mt,z){Mt.index=z,Mt.sourceLinks=[],Mt.targetLinks=[]});var nt=c.map(At.nodes,U);At.links.forEach(function(Mt,z){Mt.index=z;var Q=Mt.source,ht=Mt.target;typeof Q!="object"&&(Q=Mt.source=x(nt,Q)),typeof ht!="object"&&(ht=Mt.target=x(nt,ht)),Q.sourceLinks.push(Mt),ht.targetLinks.push(Mt)})}function Ft(At){At.nodes.forEach(function(nt){nt.value=Math.max(s.sum(nt.sourceLinks,g),s.sum(nt.targetLinks,g))})}function Ot(At){var nt,Mt,z,Q=At.nodes.length;for(nt=At.nodes,Mt=[],z=0;nt.length;++z,nt=Mt,Mt=[]){if(z>Q)throw new Error("circular link");nt.forEach(function(et){et.depth=z,et.sourceLinks.forEach(function(at){Mt.indexOf(at.target)<0&&Mt.push(at.target)})})}for(nt=At.nodes,Mt=[],z=0;nt.length;++z,nt=Mt,Mt=[]){if(z>Q)throw new Error("circular link");nt.forEach(function(et){et.height=z,et.targetLinks.forEach(function(at){Mt.indexOf(at.source)<0&&Mt.push(at.source)})})}var ht=(H-O-Z)/(z-1);At.nodes.forEach(function(et){et.x1=(et.x0=O+Math.max(0,Math.min(z-1,Math.floor(Y.call(null,et,z))))*ht)+Z})}function St(At){var nt=c.nest().key(function(gt){return gt.x0}).sortKeys(s.ascending).entries(At.nodes).map(function(gt){return gt.values});Q(),at();for(var Mt=.9,z=dt;z>0;--z,Mt*=.9)et(Mt),at(),ht(Mt),at();function Q(){var gt=s.min(nt,function(k){return(F-L-(k.length-1)*G)/s.sum(k,g)});nt.forEach(function(k){J!=null&&k.sort(J),k.forEach(function(ot,it){ot.y1=(ot.y0=it)+ot.value*gt})}),At.links.forEach(function(k){k.width=k.value*gt})}function ht(gt){nt.forEach(function(k){k.forEach(function(ot){var it,X,Et,vt,Nt=ot.y0;try{for(var $t=t.__values(ot.sourceLinks.sort(v)),ee=$t.next();!ee.done;ee=$t.next()){var kt=ee.value,Wt=kt.target,ae=kt.width,le=kt.value;if(le>0){var je=0;try{for(var Oe=(Et=void 0,t.__values(Wt.targetLinks)),We=Oe.next();!We.done;We=Oe.next()){var Ye=We.value,wn=Ye.source,er=Ye.width;if(wn===ot)break;je+=er+G/2}}catch(wr){Et={error:wr}}finally{try{We&&!We.done&&(vt=Oe.return)&&vt.call(Oe)}finally{if(Et)throw Et.error}}je=(Nt-je-Wt.y0)*gt*(le/Math.min(ot.value,Wt.value)),Wt.y0+=je,Wt.y1+=je}Nt+=ae+G/2}}catch(wr){it={error:wr}}finally{try{ee&&!ee.done&&(X=$t.return)&&X.call($t)}finally{if(it)throw it.error}}})})}function et(gt){nt.slice().reverse().forEach(function(k){k.forEach(function(ot){var it,X,Et,vt,Nt=ot.y0;try{for(var $t=t.__values(ot.targetLinks.sort(f)),ee=$t.next();!ee.done;ee=$t.next()){var kt=ee.value,Wt=kt.source,ae=kt.width,le=kt.value;if(le>0){var je=0;try{for(var Oe=(Et=void 0,t.__values(Wt.sourceLinks)),We=Oe.next();!We.done;We=Oe.next()){var Ye=We.value,wn=Ye.target,er=Ye.width;if(wn===ot)break;je+=er+G/2}}catch(wr){Et={error:wr}}finally{try{We&&!We.done&&(vt=Oe.return)&&vt.call(Oe)}finally{if(Et)throw Et.error}}je=(Nt-je-Wt.y0)*gt*(le/Math.min(ot.value,Wt.value)),Wt.y0+=je,Wt.y1+=je}Nt+=ae+G/2}}catch(wr){it={error:wr}}finally{try{ee&&!ee.done&&(X=$t.return)&&X.call($t)}finally{if(it)throw it.error}}})})}function at(){nt.forEach(function(gt){var k,ot,it=L,X=gt.length,Et;for(J===void 0&&gt.sort(b),Et=0;Et<X;++Et)k=gt[Et],ot=it-k.y0,ot>0&&(k.y0+=ot,k.y1+=ot),it=k.y1+G;if(ot=it-G-F,ot>0)for(it=k.y0-=ot,k.y1-=ot,Et=X-2;Et>=0;--Et)k=gt[Et],ot=k.y1+G-it,ot>0&&(k.y0-=ot,k.y1-=ot),it=k.y0})}}function xt(At){At.nodes.forEach(function(nt){nt.sourceLinks.sort(v),nt.targetLinks.sort(f)}),At.nodes.forEach(function(nt){var Mt=nt.y0,z=Mt;nt.sourceLinks.forEach(function(Q){Q.y0=Mt+Q.width/2,Mt+=Q.width}),nt.targetLinks.forEach(function(Q){Q.y1=z+Q.width/2,z+=Q.width})})}return ut}function S(O){return[O.source.x1,O.y0]}function P(O){return[O.target.x0,O.y1]}function A(){return r.linkHorizontal().source(S).target(P)}u.sankey=y,u.sankeyCenter=o,u.sankeyLeft=n,u.sankeyRight=i,u.sankeyJustify=a,u.sankeyLinkHorizontal=A,Object.defineProperty(u,"__esModule",{value:!0})})},"./node_modules/_d3-shape@1.3.7@d3-shape/dist/d3-shape.js":function(E,T,e){(function(t,u){u(T,e("./node_modules/_d3-path@1.0.9@d3-path/dist/d3-path.js"))})(this,function(t,u){"use strict";function s(Ne){return function(){return Ne}}var c=Math.abs,r=Math.atan2,h=Math.cos,n=Math.max,i=Math.min,a=Math.sin,o=Math.sqrt,l=1e-12,f=Math.PI,v=f/2,b=2*f;function g(Ne){return Ne>1?0:Ne<-1?f:Math.acos(Ne)}function m(Ne){return Ne>=1?v:Ne<=-1?-v:Math.asin(Ne)}function _(Ne){return Ne.innerRadius}function M(Ne){return Ne.outerRadius}function x(Ne){return Ne.startAngle}function y(Ne){return Ne.endAngle}function S(Ne){return Ne&&Ne.padAngle}function P(Ne,se,Yt,Ee,sn,Fn,rr,qn){var Xr=Yt-Ne,Si=Ee-se,Oi=rr-sn,Gi=qn-Fn,sa=Gi*Xr-Oi*Si;if(!(sa*sa<l))return sa=(Oi*(se-Fn)-Gi*(Ne-sn))/sa,[Ne+sa*Xr,se+sa*Si]}function A(Ne,se,Yt,Ee,sn,Fn,rr){var qn=Ne-Yt,Xr=se-Ee,Si=(rr?Fn:-Fn)/o(qn*qn+Xr*Xr),Oi=Si*Xr,Gi=-Si*qn,sa=Ne+Oi,qa=se+Gi,Oa=Yt+Oi,Eo=Ee+Gi,Ba=(sa+Oa)/2,uo=(qa+Eo)/2,co=Oa-sa,Ja=Eo-qa,Po=co*co+Ja*Ja,ls=sn-Fn,ko=sa*Eo-Oa*qa,Es=(Ja<0?-1:1)*o(n(0,ls*ls*Po-ko*ko)),Co=(ko*Ja-co*Es)/Po,Za=(-ko*co-Ja*Es)/Po,Bs=(ko*Ja+co*Es)/Po,ss=(-ko*co+Ja*Es)/Po,ja=Co-Ba,gn=Za-uo,cr=Bs-Ba,Gr=ss-uo;return ja*ja+gn*gn>cr*cr+Gr*Gr&&(Co=Bs,Za=ss),{cx:Co,cy:Za,x01:-Oi,y01:-Gi,x11:Co*(sn/ls-1),y11:Za*(sn/ls-1)}}function O(){var Ne=_,se=M,Yt=s(0),Ee=null,sn=x,Fn=y,rr=S,qn=null;function Xr(){var Si,Oi,Gi=+Ne.apply(this,arguments),sa=+se.apply(this,arguments),qa=sn.apply(this,arguments)-v,Oa=Fn.apply(this,arguments)-v,Eo=c(Oa-qa),Ba=Oa>qa;if(qn||(qn=Si=u.path()),sa<Gi&&(Oi=sa,sa=Gi,Gi=Oi),!(sa>l))qn.moveTo(0,0);else if(Eo>b-l)qn.moveTo(sa*h(qa),sa*a(qa)),qn.arc(0,0,sa,qa,Oa,!Ba),Gi>l&&(qn.moveTo(Gi*h(Oa),Gi*a(Oa)),qn.arc(0,0,Gi,Oa,qa,Ba));else{var uo=qa,co=Oa,Ja=qa,Po=Oa,ls=Eo,ko=Eo,Es=rr.apply(this,arguments)/2,Co=Es>l&&(Ee?+Ee.apply(this,arguments):o(Gi*Gi+sa*sa)),Za=i(c(sa-Gi)/2,+Yt.apply(this,arguments)),Bs=Za,ss=Za,ja,gn;if(Co>l){var cr=m(Co/Gi*a(Es)),Gr=m(Co/sa*a(Es));(ls-=cr*2)>l?(cr*=Ba?1:-1,Ja+=cr,Po-=cr):(ls=0,Ja=Po=(qa+Oa)/2),(ko-=Gr*2)>l?(Gr*=Ba?1:-1,uo+=Gr,co-=Gr):(ko=0,uo=co=(qa+Oa)/2)}var Ui=sa*h(uo),za=sa*a(uo),go=Gi*h(Po),fo=Gi*a(Po);if(Za>l){var ea=sa*h(co),to=sa*a(co),Ns=Gi*h(Ja),Ss=Gi*a(Ja),Ka;if(Eo<f&&(Ka=P(Ui,za,Ns,Ss,ea,to,go,fo))){var ou=Ui-Ka[0],Jo=za-Ka[1],Os=ea-Ka[0],tu=to-Ka[1],_s=1/a(g((ou*Os+Jo*tu)/(o(ou*ou+Jo*Jo)*o(Os*Os+tu*tu)))/2),vs=o(Ka[0]*Ka[0]+Ka[1]*Ka[1]);Bs=i(Za,(Gi-vs)/(_s-1)),ss=i(Za,(sa-vs)/(_s+1))}}ko>l?ss>l?(ja=A(Ns,Ss,Ui,za,sa,ss,Ba),gn=A(ea,to,go,fo,sa,ss,Ba),qn.moveTo(ja.cx+ja.x01,ja.cy+ja.y01),ss<Za?qn.arc(ja.cx,ja.cy,ss,r(ja.y01,ja.x01),r(gn.y01,gn.x01),!Ba):(qn.arc(ja.cx,ja.cy,ss,r(ja.y01,ja.x01),r(ja.y11,ja.x11),!Ba),qn.arc(0,0,sa,r(ja.cy+ja.y11,ja.cx+ja.x11),r(gn.cy+gn.y11,gn.cx+gn.x11),!Ba),qn.arc(gn.cx,gn.cy,ss,r(gn.y11,gn.x11),r(gn.y01,gn.x01),!Ba))):(qn.moveTo(Ui,za),qn.arc(0,0,sa,uo,co,!Ba)):qn.moveTo(Ui,za),!(Gi>l)||!(ls>l)?qn.lineTo(go,fo):Bs>l?(ja=A(go,fo,ea,to,Gi,-Bs,Ba),gn=A(Ui,za,Ns,Ss,Gi,-Bs,Ba),qn.lineTo(ja.cx+ja.x01,ja.cy+ja.y01),Bs<Za?qn.arc(ja.cx,ja.cy,Bs,r(ja.y01,ja.x01),r(gn.y01,gn.x01),!Ba):(qn.arc(ja.cx,ja.cy,Bs,r(ja.y01,ja.x01),r(ja.y11,ja.x11),!Ba),qn.arc(0,0,Gi,r(ja.cy+ja.y11,ja.cx+ja.x11),r(gn.cy+gn.y11,gn.cx+gn.x11),Ba),qn.arc(gn.cx,gn.cy,Bs,r(gn.y11,gn.x11),r(gn.y01,gn.x01),!Ba))):qn.arc(0,0,Gi,Po,Ja,Ba)}if(qn.closePath(),Si)return qn=null,Si+""||null}return Xr.centroid=function(){var Si=(+Ne.apply(this,arguments)+ +se.apply(this,arguments))/2,Oi=(+sn.apply(this,arguments)+ +Fn.apply(this,arguments))/2-f/2;return[h(Oi)*Si,a(Oi)*Si]},Xr.innerRadius=function(Si){return arguments.length?(Ne=typeof Si=="function"?Si:s(+Si),Xr):Ne},Xr.outerRadius=function(Si){return arguments.length?(se=typeof Si=="function"?Si:s(+Si),Xr):se},Xr.cornerRadius=function(Si){return arguments.length?(Yt=typeof Si=="function"?Si:s(+Si),Xr):Yt},Xr.padRadius=function(Si){return arguments.length?(Ee=Si==null?null:typeof Si=="function"?Si:s(+Si),Xr):Ee},Xr.startAngle=function(Si){return arguments.length?(sn=typeof Si=="function"?Si:s(+Si),Xr):sn},Xr.endAngle=function(Si){return arguments.length?(Fn=typeof Si=="function"?Si:s(+Si),Xr):Fn},Xr.padAngle=function(Si){return arguments.length?(rr=typeof Si=="function"?Si:s(+Si),Xr):rr},Xr.context=function(Si){return arguments.length?(qn=Si==null?null:Si,Xr):qn},Xr}function L(Ne){this._context=Ne}L.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(se,Yt){switch(se=+se,Yt=+Yt,this._point){case 0:this._point=1,this._line?this._context.lineTo(se,Yt):this._context.moveTo(se,Yt);break;case 1:this._point=2;default:this._context.lineTo(se,Yt);break}}};function H(Ne){return new L(Ne)}function F(Ne){return Ne[0]}function Z(Ne){return Ne[1]}function G(){var Ne=F,se=Z,Yt=s(!0),Ee=null,sn=H,Fn=null;function rr(qn){var Xr,Si=qn.length,Oi,Gi=!1,sa;for(Ee==null&&(Fn=sn(sa=u.path())),Xr=0;Xr<=Si;++Xr)!(Xr<Si&&Yt(Oi=qn[Xr],Xr,qn))===Gi&&((Gi=!Gi)?Fn.lineStart():Fn.lineEnd()),Gi&&Fn.point(+Ne(Oi,Xr,qn),+se(Oi,Xr,qn));if(sa)return Fn=null,sa+""||null}return rr.x=function(qn){return arguments.length?(Ne=typeof qn=="function"?qn:s(+qn),rr):Ne},rr.y=function(qn){return arguments.length?(se=typeof qn=="function"?qn:s(+qn),rr):se},rr.defined=function(qn){return arguments.length?(Yt=typeof qn=="function"?qn:s(!!qn),rr):Yt},rr.curve=function(qn){return arguments.length?(sn=qn,Ee!=null&&(Fn=sn(Ee)),rr):sn},rr.context=function(qn){return arguments.length?(qn==null?Ee=Fn=null:Fn=sn(Ee=qn),rr):Ee},rr}function U(){var Ne=F,se=null,Yt=s(0),Ee=Z,sn=s(!0),Fn=null,rr=H,qn=null;function Xr(Oi){var Gi,sa,qa,Oa=Oi.length,Eo,Ba=!1,uo,co=new Array(Oa),Ja=new Array(Oa);for(Fn==null&&(qn=rr(uo=u.path())),Gi=0;Gi<=Oa;++Gi){if(!(Gi<Oa&&sn(Eo=Oi[Gi],Gi,Oi))===Ba)if(Ba=!Ba)sa=Gi,qn.areaStart(),qn.lineStart();else{for(qn.lineEnd(),qn.lineStart(),qa=Gi-1;qa>=sa;--qa)qn.point(co[qa],Ja[qa]);qn.lineEnd(),qn.areaEnd()}Ba&&(co[Gi]=+Ne(Eo,Gi,Oi),Ja[Gi]=+Yt(Eo,Gi,Oi),qn.point(se?+se(Eo,Gi,Oi):co[Gi],Ee?+Ee(Eo,Gi,Oi):Ja[Gi]))}if(uo)return qn=null,uo+""||null}function Si(){return G().defined(sn).curve(rr).context(Fn)}return Xr.x=function(Oi){return arguments.length?(Ne=typeof Oi=="function"?Oi:s(+Oi),se=null,Xr):Ne},Xr.x0=function(Oi){return arguments.length?(Ne=typeof Oi=="function"?Oi:s(+Oi),Xr):Ne},Xr.x1=function(Oi){return arguments.length?(se=Oi==null?null:typeof Oi=="function"?Oi:s(+Oi),Xr):se},Xr.y=function(Oi){return arguments.length?(Yt=typeof Oi=="function"?Oi:s(+Oi),Ee=null,Xr):Yt},Xr.y0=function(Oi){return arguments.length?(Yt=typeof Oi=="function"?Oi:s(+Oi),Xr):Yt},Xr.y1=function(Oi){return arguments.length?(Ee=Oi==null?null:typeof Oi=="function"?Oi:s(+Oi),Xr):Ee},Xr.lineX0=Xr.lineY0=function(){return Si().x(Ne).y(Yt)},Xr.lineY1=function(){return Si().x(Ne).y(Ee)},Xr.lineX1=function(){return Si().x(se).y(Yt)},Xr.defined=function(Oi){return arguments.length?(sn=typeof Oi=="function"?Oi:s(!!Oi),Xr):sn},Xr.curve=function(Oi){return arguments.length?(rr=Oi,Fn!=null&&(qn=rr(Fn)),Xr):rr},Xr.context=function(Oi){return arguments.length?(Oi==null?Fn=qn=null:qn=rr(Fn=Oi),Xr):Fn},Xr}function Y(Ne,se){return se<Ne?-1:se>Ne?1:se>=Ne?0:NaN}function J(Ne){return Ne}function rt(){var Ne=J,se=Y,Yt=null,Ee=s(0),sn=s(b),Fn=s(0);function rr(qn){var Xr,Si=qn.length,Oi,Gi,sa=0,qa=new Array(Si),Oa=new Array(Si),Eo=+Ee.apply(this,arguments),Ba=Math.min(b,Math.max(-b,sn.apply(this,arguments)-Eo)),uo,co=Math.min(Math.abs(Ba)/Si,Fn.apply(this,arguments)),Ja=co*(Ba<0?-1:1),Po;for(Xr=0;Xr<Si;++Xr)(Po=Oa[qa[Xr]=Xr]=+Ne(qn[Xr],Xr,qn))>0&&(sa+=Po);for(se!=null?qa.sort(function(ls,ko){return se(Oa[ls],Oa[ko])}):Yt!=null&&qa.sort(function(ls,ko){return Yt(qn[ls],qn[ko])}),Xr=0,Gi=sa?(Ba-Si*Ja)/sa:0;Xr<Si;++Xr,Eo=uo)Oi=qa[Xr],Po=Oa[Oi],uo=Eo+(Po>0?Po*Gi:0)+Ja,Oa[Oi]={data:qn[Oi],index:Xr,value:Po,startAngle:Eo,endAngle:uo,padAngle:co};return Oa}return rr.value=function(qn){return arguments.length?(Ne=typeof qn=="function"?qn:s(+qn),rr):Ne},rr.sortValues=function(qn){return arguments.length?(se=qn,Yt=null,rr):se},rr.sort=function(qn){return arguments.length?(Yt=qn,se=null,rr):Yt},rr.startAngle=function(qn){return arguments.length?(Ee=typeof qn=="function"?qn:s(+qn),rr):Ee},rr.endAngle=function(qn){return arguments.length?(sn=typeof qn=="function"?qn:s(+qn),rr):sn},rr.padAngle=function(qn){return arguments.length?(Fn=typeof qn=="function"?qn:s(+qn),rr):Fn},rr}var ft=ut(H);function dt(Ne){this._curve=Ne}dt.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(se,Yt){this._curve.point(Yt*Math.sin(se),Yt*-Math.cos(se))}};function ut(Ne){function se(Yt){return new dt(Ne(Yt))}return se._curve=Ne,se}function Lt(Ne){var se=Ne.curve;return Ne.angle=Ne.x,delete Ne.x,Ne.radius=Ne.y,delete Ne.y,Ne.curve=function(Yt){return arguments.length?se(ut(Yt)):se()._curve},Ne}function Ft(){return Lt(G().curve(ft))}function Ot(){var Ne=U().curve(ft),se=Ne.curve,Yt=Ne.lineX0,Ee=Ne.lineX1,sn=Ne.lineY0,Fn=Ne.lineY1;return Ne.angle=Ne.x,delete Ne.x,Ne.startAngle=Ne.x0,delete Ne.x0,Ne.endAngle=Ne.x1,delete Ne.x1,Ne.radius=Ne.y,delete Ne.y,Ne.innerRadius=Ne.y0,delete Ne.y0,Ne.outerRadius=Ne.y1,delete Ne.y1,Ne.lineStartAngle=function(){return Lt(Yt())},delete Ne.lineX0,Ne.lineEndAngle=function(){return Lt(Ee())},delete Ne.lineX1,Ne.lineInnerRadius=function(){return Lt(sn())},delete Ne.lineY0,Ne.lineOuterRadius=function(){return Lt(Fn())},delete Ne.lineY1,Ne.curve=function(rr){return arguments.length?se(ut(rr)):se()._curve},Ne}function St(Ne,se){return[(se=+se)*Math.cos(Ne-=Math.PI/2),se*Math.sin(Ne)]}var xt=Array.prototype.slice;function At(Ne){return Ne.source}function nt(Ne){return Ne.target}function Mt(Ne){var se=At,Yt=nt,Ee=F,sn=Z,Fn=null;function rr(){var qn,Xr=xt.call(arguments),Si=se.apply(this,Xr),Oi=Yt.apply(this,Xr);if(Fn||(Fn=qn=u.path()),Ne(Fn,+Ee.apply(this,(Xr[0]=Si,Xr)),+sn.apply(this,Xr),+Ee.apply(this,(Xr[0]=Oi,Xr)),+sn.apply(this,Xr)),qn)return Fn=null,qn+""||null}return rr.source=function(qn){return arguments.length?(se=qn,rr):se},rr.target=function(qn){return arguments.length?(Yt=qn,rr):Yt},rr.x=function(qn){return arguments.length?(Ee=typeof qn=="function"?qn:s(+qn),rr):Ee},rr.y=function(qn){return arguments.length?(sn=typeof qn=="function"?qn:s(+qn),rr):sn},rr.context=function(qn){return arguments.length?(Fn=qn==null?null:qn,rr):Fn},rr}function z(Ne,se,Yt,Ee,sn){Ne.moveTo(se,Yt),Ne.bezierCurveTo(se=(se+Ee)/2,Yt,se,sn,Ee,sn)}function Q(Ne,se,Yt,Ee,sn){Ne.moveTo(se,Yt),Ne.bezierCurveTo(se,Yt=(Yt+sn)/2,Ee,Yt,Ee,sn)}function ht(Ne,se,Yt,Ee,sn){var Fn=St(se,Yt),rr=St(se,Yt=(Yt+sn)/2),qn=St(Ee,Yt),Xr=St(Ee,sn);Ne.moveTo(Fn[0],Fn[1]),Ne.bezierCurveTo(rr[0],rr[1],qn[0],qn[1],Xr[0],Xr[1])}function et(){return Mt(z)}function at(){return Mt(Q)}function gt(){var Ne=Mt(ht);return Ne.angle=Ne.x,delete Ne.x,Ne.radius=Ne.y,delete Ne.y,Ne}var k={draw:function(se,Yt){var Ee=Math.sqrt(Yt/f);se.moveTo(Ee,0),se.arc(0,0,Ee,0,b)}},ot={draw:function(se,Yt){var Ee=Math.sqrt(Yt/5)/2;se.moveTo(-3*Ee,-Ee),se.lineTo(-Ee,-Ee),se.lineTo(-Ee,-3*Ee),se.lineTo(Ee,-3*Ee),se.lineTo(Ee,-Ee),se.lineTo(3*Ee,-Ee),se.lineTo(3*Ee,Ee),se.lineTo(Ee,Ee),se.lineTo(Ee,3*Ee),se.lineTo(-Ee,3*Ee),se.lineTo(-Ee,Ee),se.lineTo(-3*Ee,Ee),se.closePath()}},it=Math.sqrt(1/3),X=it*2,Et={draw:function(se,Yt){var Ee=Math.sqrt(Yt/X),sn=Ee*it;se.moveTo(0,-Ee),se.lineTo(sn,0),se.lineTo(0,Ee),se.lineTo(-sn,0),se.closePath()}},vt=.8908130915292852,Nt=Math.sin(f/10)/Math.sin(7*f/10),$t=Math.sin(b/10)*Nt,ee=-Math.cos(b/10)*Nt,kt={draw:function(se,Yt){var Ee=Math.sqrt(Yt*vt),sn=$t*Ee,Fn=ee*Ee;se.moveTo(0,-Ee),se.lineTo(sn,Fn);for(var rr=1;rr<5;++rr){var qn=b*rr/5,Xr=Math.cos(qn),Si=Math.sin(qn);se.lineTo(Si*Ee,-Xr*Ee),se.lineTo(Xr*sn-Si*Fn,Si*sn+Xr*Fn)}se.closePath()}},Wt={draw:function(se,Yt){var Ee=Math.sqrt(Yt),sn=-Ee/2;se.rect(sn,sn,Ee,Ee)}},ae=Math.sqrt(3),le={draw:function(se,Yt){var Ee=-Math.sqrt(Yt/(ae*3));se.moveTo(0,Ee*2),se.lineTo(-ae*Ee,-Ee),se.lineTo(ae*Ee,-Ee),se.closePath()}},je=-.5,Oe=Math.sqrt(3)/2,We=1/Math.sqrt(12),Ye=(We/2+1)*3,wn={draw:function(se,Yt){var Ee=Math.sqrt(Yt/Ye),sn=Ee/2,Fn=Ee*We,rr=sn,qn=Ee*We+Ee,Xr=-rr,Si=qn;se.moveTo(sn,Fn),se.lineTo(rr,qn),se.lineTo(Xr,Si),se.lineTo(je*sn-Oe*Fn,Oe*sn+je*Fn),se.lineTo(je*rr-Oe*qn,Oe*rr+je*qn),se.lineTo(je*Xr-Oe*Si,Oe*Xr+je*Si),se.lineTo(je*sn+Oe*Fn,je*Fn-Oe*sn),se.lineTo(je*rr+Oe*qn,je*qn-Oe*rr),se.lineTo(je*Xr+Oe*Si,je*Si-Oe*Xr),se.closePath()}},er=[k,ot,Et,Wt,kt,le,wn];function wr(){var Ne=s(k),se=s(64),Yt=null;function Ee(){var sn;if(Yt||(Yt=sn=u.path()),Ne.apply(this,arguments).draw(Yt,+se.apply(this,arguments)),sn)return Yt=null,sn+""||null}return Ee.type=function(sn){return arguments.length?(Ne=typeof sn=="function"?sn:s(sn),Ee):Ne},Ee.size=function(sn){return arguments.length?(se=typeof sn=="function"?sn:s(+sn),Ee):se},Ee.context=function(sn){return arguments.length?(Yt=sn==null?null:sn,Ee):Yt},Ee}function on(){}function en(Ne,se,Yt){Ne._context.bezierCurveTo((2*Ne._x0+Ne._x1)/3,(2*Ne._y0+Ne._y1)/3,(Ne._x0+2*Ne._x1)/3,(Ne._y0+2*Ne._y1)/3,(Ne._x0+4*Ne._x1+se)/6,(Ne._y0+4*Ne._y1+Yt)/6)}function An(Ne){this._context=Ne}An.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:en(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(se,Yt){switch(se=+se,Yt=+Yt,this._point){case 0:this._point=1,this._line?this._context.lineTo(se,Yt):this._context.moveTo(se,Yt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:en(this,se,Yt);break}this._x0=this._x1,this._x1=se,this._y0=this._y1,this._y1=Yt}};function jn(Ne){return new An(Ne)}function pr(Ne){this._context=Ne}pr.prototype={areaStart:on,areaEnd:on,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(se,Yt){switch(se=+se,Yt=+Yt,this._point){case 0:this._point=1,this._x2=se,this._y2=Yt;break;case 1:this._point=2,this._x3=se,this._y3=Yt;break;case 2:this._point=3,this._x4=se,this._y4=Yt,this._context.moveTo((this._x0+4*this._x1+se)/6,(this._y0+4*this._y1+Yt)/6);break;default:en(this,se,Yt);break}this._x0=this._x1,this._x1=se,this._y0=this._y1,this._y1=Yt}};function di(Ne){return new pr(Ne)}function Ce(Ne){this._context=Ne}Ce.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(se,Yt){switch(se=+se,Yt=+Yt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var Ee=(this._x0+4*this._x1+se)/6,sn=(this._y0+4*this._y1+Yt)/6;this._line?this._context.lineTo(Ee,sn):this._context.moveTo(Ee,sn);break;case 3:this._point=4;default:en(this,se,Yt);break}this._x0=this._x1,this._x1=se,this._y0=this._y1,this._y1=Yt}};function Me(Ne){return new Ce(Ne)}function Qt(Ne,se){this._basis=new An(Ne),this._beta=se}Qt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var se=this._x,Yt=this._y,Ee=se.length-1;if(Ee>0)for(var sn=se[0],Fn=Yt[0],rr=se[Ee]-sn,qn=Yt[Ee]-Fn,Xr=-1,Si;++Xr<=Ee;)Si=Xr/Ee,this._basis.point(this._beta*se[Xr]+(1-this._beta)*(sn+Si*rr),this._beta*Yt[Xr]+(1-this._beta)*(Fn+Si*qn));this._x=this._y=null,this._basis.lineEnd()},point:function(se,Yt){this._x.push(+se),this._y.push(+Yt)}};var pe=function Ne(se){function Yt(Ee){return se===1?new An(Ee):new Qt(Ee,se)}return Yt.beta=function(Ee){return Ne(+Ee)},Yt}(.85);function Vt(Ne,se,Yt){Ne._context.bezierCurveTo(Ne._x1+Ne._k*(Ne._x2-Ne._x0),Ne._y1+Ne._k*(Ne._y2-Ne._y0),Ne._x2+Ne._k*(Ne._x1-se),Ne._y2+Ne._k*(Ne._y1-Yt),Ne._x2,Ne._y2)}function re(Ne,se){this._context=Ne,this._k=(1-se)/6}re.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Vt(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(se,Yt){switch(se=+se,Yt=+Yt,this._point){case 0:this._point=1,this._line?this._context.lineTo(se,Yt):this._context.moveTo(se,Yt);break;case 1:this._point=2,this._x1=se,this._y1=Yt;break;case 2:this._point=3;default:Vt(this,se,Yt);break}this._x0=this._x1,this._x1=this._x2,this._x2=se,this._y0=this._y1,this._y1=this._y2,this._y2=Yt}};var Te=function Ne(se){function Yt(Ee){return new re(Ee,se)}return Yt.tension=function(Ee){return Ne(+Ee)},Yt}(0);function ue(Ne,se){this._context=Ne,this._k=(1-se)/6}ue.prototype={areaStart:on,areaEnd:on,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(se,Yt){switch(se=+se,Yt=+Yt,this._point){case 0:this._point=1,this._x3=se,this._y3=Yt;break;case 1:this._point=2,this._context.moveTo(this._x4=se,this._y4=Yt);break;case 2:this._point=3,this._x5=se,this._y5=Yt;break;default:Vt(this,se,Yt);break}this._x0=this._x1,this._x1=this._x2,this._x2=se,this._y0=this._y1,this._y1=this._y2,this._y2=Yt}};var xe=function Ne(se){function Yt(Ee){return new ue(Ee,se)}return Yt.tension=function(Ee){return Ne(+Ee)},Yt}(0);function Ke(Ne,se){this._context=Ne,this._k=(1-se)/6}Ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(se,Yt){switch(se=+se,Yt=+Yt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Vt(this,se,Yt);break}this._x0=this._x1,this._x1=this._x2,this._x2=se,this._y0=this._y1,this._y1=this._y2,this._y2=Yt}};var Rn=function Ne(se){function Yt(Ee){return new Ke(Ee,se)}return Yt.tension=function(Ee){return Ne(+Ee)},Yt}(0);function tr(Ne,se,Yt){var Ee=Ne._x1,sn=Ne._y1,Fn=Ne._x2,rr=Ne._y2;if(Ne._l01_a>l){var qn=2*Ne._l01_2a+3*Ne._l01_a*Ne._l12_a+Ne._l12_2a,Xr=3*Ne._l01_a*(Ne._l01_a+Ne._l12_a);Ee=(Ee*qn-Ne._x0*Ne._l12_2a+Ne._x2*Ne._l01_2a)/Xr,sn=(sn*qn-Ne._y0*Ne._l12_2a+Ne._y2*Ne._l01_2a)/Xr}if(Ne._l23_a>l){var Si=2*Ne._l23_2a+3*Ne._l23_a*Ne._l12_a+Ne._l12_2a,Oi=3*Ne._l23_a*(Ne._l23_a+Ne._l12_a);Fn=(Fn*Si+Ne._x1*Ne._l23_2a-se*Ne._l12_2a)/Oi,rr=(rr*Si+Ne._y1*Ne._l23_2a-Yt*Ne._l12_2a)/Oi}Ne._context.bezierCurveTo(Ee,sn,Fn,rr,Ne._x2,Ne._y2)}function Pn(Ne,se){this._context=Ne,this._alpha=se}Pn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(se,Yt){if(se=+se,Yt=+Yt,this._point){var Ee=this._x2-se,sn=this._y2-Yt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Ee*Ee+sn*sn,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(se,Yt):this._context.moveTo(se,Yt);break;case 1:this._point=2;break;case 2:this._point=3;default:tr(this,se,Yt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=se,this._y0=this._y1,this._y1=this._y2,this._y2=Yt}};var dn=function Ne(se){function Yt(Ee){return se?new Pn(Ee,se):new re(Ee,0)}return Yt.alpha=function(Ee){return Ne(+Ee)},Yt}(.5);function Ar(Ne,se){this._context=Ne,this._alpha=se}Ar.prototype={areaStart:on,areaEnd:on,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(se,Yt){if(se=+se,Yt=+Yt,this._point){var Ee=this._x2-se,sn=this._y2-Yt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Ee*Ee+sn*sn,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=se,this._y3=Yt;break;case 1:this._point=2,this._context.moveTo(this._x4=se,this._y4=Yt);break;case 2:this._point=3,this._x5=se,this._y5=Yt;break;default:tr(this,se,Yt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=se,this._y0=this._y1,this._y1=this._y2,this._y2=Yt}};var or=function Ne(se){function Yt(Ee){return se?new Ar(Ee,se):new ue(Ee,0)}return Yt.alpha=function(Ee){return Ne(+Ee)},Yt}(.5);function cn(Ne,se){this._context=Ne,this._alpha=se}cn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(se,Yt){if(se=+se,Yt=+Yt,this._point){var Ee=this._x2-se,sn=this._y2-Yt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Ee*Ee+sn*sn,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:tr(this,se,Yt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=se,this._y0=this._y1,this._y1=this._y2,this._y2=Yt}};var Pr=function Ne(se){function Yt(Ee){return se?new cn(Ee,se):new Ke(Ee,0)}return Yt.alpha=function(Ee){return Ne(+Ee)},Yt}(.5);function Sr(Ne){this._context=Ne}Sr.prototype={areaStart:on,areaEnd:on,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(se,Yt){se=+se,Yt=+Yt,this._point?this._context.lineTo(se,Yt):(this._point=1,this._context.moveTo(se,Yt))}};function Re(Ne){return new Sr(Ne)}function $e(Ne){return Ne<0?-1:1}function Ve(Ne,se,Yt){var Ee=Ne._x1-Ne._x0,sn=se-Ne._x1,Fn=(Ne._y1-Ne._y0)/(Ee||sn<0&&-0),rr=(Yt-Ne._y1)/(sn||Ee<0&&-0),qn=(Fn*sn+rr*Ee)/(Ee+sn);return($e(Fn)+$e(rr))*Math.min(Math.abs(Fn),Math.abs(rr),.5*Math.abs(qn))||0}function En(Ne,se){var Yt=Ne._x1-Ne._x0;return Yt?(3*(Ne._y1-Ne._y0)/Yt-se)/2:se}function xn(Ne,se,Yt){var Ee=Ne._x0,sn=Ne._y0,Fn=Ne._x1,rr=Ne._y1,qn=(Fn-Ee)/3;Ne._context.bezierCurveTo(Ee+qn,sn+qn*se,Fn-qn,rr-qn*Yt,Fn,rr)}function Nn(Ne){this._context=Ne}Nn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:xn(this,this._t0,En(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(se,Yt){var Ee=NaN;if(se=+se,Yt=+Yt,!(se===this._x1&&Yt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(se,Yt):this._context.moveTo(se,Yt);break;case 1:this._point=2;break;case 2:this._point=3,xn(this,En(this,Ee=Ve(this,se,Yt)),Ee);break;default:xn(this,this._t0,Ee=Ve(this,se,Yt));break}this._x0=this._x1,this._x1=se,this._y0=this._y1,this._y1=Yt,this._t0=Ee}}};function mn(Ne){this._context=new Dn(Ne)}(mn.prototype=Object.create(Nn.prototype)).point=function(Ne,se){Nn.prototype.point.call(this,se,Ne)};function Dn(Ne){this._context=Ne}Dn.prototype={moveTo:function(se,Yt){this._context.moveTo(Yt,se)},closePath:function(){this._context.closePath()},lineTo:function(se,Yt){this._context.lineTo(Yt,se)},bezierCurveTo:function(se,Yt,Ee,sn,Fn,rr){this._context.bezierCurveTo(Yt,se,sn,Ee,rr,Fn)}};function $n(Ne){return new Nn(Ne)}function Hn(Ne){return new mn(Ne)}function _n(Ne){this._context=Ne}_n.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var se=this._x,Yt=this._y,Ee=se.length;if(Ee)if(this._line?this._context.lineTo(se[0],Yt[0]):this._context.moveTo(se[0],Yt[0]),Ee===2)this._context.lineTo(se[1],Yt[1]);else for(var sn=br(se),Fn=br(Yt),rr=0,qn=1;qn<Ee;++rr,++qn)this._context.bezierCurveTo(sn[0][rr],Fn[0][rr],sn[1][rr],Fn[1][rr],se[qn],Yt[qn]);(this._line||this._line!==0&&Ee===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(se,Yt){this._x.push(+se),this._y.push(+Yt)}};function br(Ne){var se,Yt=Ne.length-1,Ee,sn=new Array(Yt),Fn=new Array(Yt),rr=new Array(Yt);for(sn[0]=0,Fn[0]=2,rr[0]=Ne[0]+2*Ne[1],se=1;se<Yt-1;++se)sn[se]=1,Fn[se]=4,rr[se]=4*Ne[se]+2*Ne[se+1];for(sn[Yt-1]=2,Fn[Yt-1]=7,rr[Yt-1]=8*Ne[Yt-1]+Ne[Yt],se=1;se<Yt;++se)Ee=sn[se]/Fn[se-1],Fn[se]-=Ee,rr[se]-=Ee*rr[se-1];for(sn[Yt-1]=rr[Yt-1]/Fn[Yt-1],se=Yt-2;se>=0;--se)sn[se]=(rr[se]-sn[se+1])/Fn[se];for(Fn[Yt-1]=(Ne[Yt]+sn[Yt-1])/2,se=0;se<Yt-1;++se)Fn[se]=2*Ne[se+1]-sn[se+1];return[sn,Fn]}function yr(Ne){return new _n(Ne)}function Fr(Ne,se){this._context=Ne,this._t=se}Fr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(se,Yt){switch(se=+se,Yt=+Yt,this._point){case 0:this._point=1,this._line?this._context.lineTo(se,Yt):this._context.moveTo(se,Yt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Yt),this._context.lineTo(se,Yt);else{var Ee=this._x*(1-this._t)+se*this._t;this._context.lineTo(Ee,this._y),this._context.lineTo(Ee,Yt)}break}}this._x=se,this._y=Yt}};function Ei(Ne){return new Fr(Ne,.5)}function Ta(Ne){return new Fr(Ne,0)}function Aa(Ne){return new Fr(Ne,1)}function eo(Ne,se){if((rr=Ne.length)>1)for(var Yt=1,Ee,sn,Fn=Ne[se[0]],rr,qn=Fn.length;Yt<rr;++Yt)for(sn=Fn,Fn=Ne[se[Yt]],Ee=0;Ee<qn;++Ee)Fn[Ee][1]+=Fn[Ee][0]=isNaN(sn[Ee][1])?sn[Ee][0]:sn[Ee][1]}function Ho(Ne){for(var se=Ne.length,Yt=new Array(se);--se>=0;)Yt[se]=se;return Yt}function Do(Ne,se){return Ne[se]}function io(){var Ne=s([]),se=Ho,Yt=eo,Ee=Do;function sn(Fn){var rr=Ne.apply(this,arguments),qn,Xr=Fn.length,Si=rr.length,Oi=new Array(Si),Gi;for(qn=0;qn<Si;++qn){for(var sa=rr[qn],qa=Oi[qn]=new Array(Xr),Oa=0,Eo;Oa<Xr;++Oa)qa[Oa]=Eo=[0,+Ee(Fn[Oa],sa,Oa,Fn)],Eo.data=Fn[Oa];qa.key=sa}for(qn=0,Gi=se(Oi);qn<Si;++qn)Oi[Gi[qn]].index=qn;return Yt(Oi,Gi),Oi}return sn.keys=function(Fn){return arguments.length?(Ne=typeof Fn=="function"?Fn:s(xt.call(Fn)),sn):Ne},sn.value=function(Fn){return arguments.length?(Ee=typeof Fn=="function"?Fn:s(+Fn),sn):Ee},sn.order=function(Fn){return arguments.length?(se=Fn==null?Ho:typeof Fn=="function"?Fn:s(xt.call(Fn)),sn):se},sn.offset=function(Fn){return arguments.length?(Yt=Fn==null?eo:Fn,sn):Yt},sn}function ds(Ne,se){if((Ee=Ne.length)>0){for(var Yt,Ee,sn=0,Fn=Ne[0].length,rr;sn<Fn;++sn){for(rr=Yt=0;Yt<Ee;++Yt)rr+=Ne[Yt][sn][1]||0;if(rr)for(Yt=0;Yt<Ee;++Yt)Ne[Yt][sn][1]/=rr}eo(Ne,se)}}function Ko(Ne,se){if((Xr=Ne.length)>0)for(var Yt,Ee=0,sn,Fn,rr,qn,Xr,Si=Ne[se[0]].length;Ee<Si;++Ee)for(rr=qn=0,Yt=0;Yt<Xr;++Yt)(Fn=(sn=Ne[se[Yt]][Ee])[1]-sn[0])>0?(sn[0]=rr,sn[1]=rr+=Fn):Fn<0?(sn[1]=qn,sn[0]=qn+=Fn):(sn[0]=0,sn[1]=Fn)}function jo(Ne,se){if((sn=Ne.length)>0){for(var Yt=0,Ee=Ne[se[0]],sn,Fn=Ee.length;Yt<Fn;++Yt){for(var rr=0,qn=0;rr<sn;++rr)qn+=Ne[rr][Yt][1]||0;Ee[Yt][1]+=Ee[Yt][0]=-qn/2}eo(Ne,se)}}function bs(Ne,se){if(!(!((rr=Ne.length)>0)||!((Fn=(sn=Ne[se[0]]).length)>0))){for(var Yt=0,Ee=1,sn,Fn,rr;Ee<Fn;++Ee){for(var qn=0,Xr=0,Si=0;qn<rr;++qn){for(var Oi=Ne[se[qn]],Gi=Oi[Ee][1]||0,sa=Oi[Ee-1][1]||0,qa=(Gi-sa)/2,Oa=0;Oa<qn;++Oa){var Eo=Ne[se[Oa]],Ba=Eo[Ee][1]||0,uo=Eo[Ee-1][1]||0;qa+=Ba-uo}Xr+=Gi,Si+=qa*Gi}sn[Ee-1][1]+=sn[Ee-1][0]=Yt,Xr&&(Yt-=Si/Xr)}sn[Ee-1][1]+=sn[Ee-1][0]=Yt,eo(Ne,se)}}function Ra(Ne){var se=Ne.map(Xo);return Ho(Ne).sort(function(Yt,Ee){return se[Yt]-se[Ee]})}function Xo(Ne){for(var se=-1,Yt=0,Ee=Ne.length,sn,Fn=-Infinity;++se<Ee;)(sn=+Ne[se][1])>Fn&&(Fn=sn,Yt=se);return Yt}function Bo(Ne){var se=Ne.map(qs);return Ho(Ne).sort(function(Yt,Ee){return se[Yt]-se[Ee]})}function qs(Ne){for(var se=0,Yt=-1,Ee=Ne.length,sn;++Yt<Ee;)(sn=+Ne[Yt][1])&&(se+=sn);return se}function ao(Ne){return Bo(Ne).reverse()}function so(Ne){var se=Ne.length,Yt,Ee,sn=Ne.map(qs),Fn=Ra(Ne),rr=0,qn=0,Xr=[],Si=[];for(Yt=0;Yt<se;++Yt)Ee=Fn[Yt],rr<qn?(rr+=sn[Ee],Xr.push(Ee)):(qn+=sn[Ee],Si.push(Ee));return Si.reverse().concat(Xr)}function Hs(Ne){return Ho(Ne).reverse()}t.arc=O,t.area=U,t.areaRadial=Ot,t.curveBasis=jn,t.curveBasisClosed=di,t.curveBasisOpen=Me,t.curveBundle=pe,t.curveCardinal=Te,t.curveCardinalClosed=xe,t.curveCardinalOpen=Rn,t.curveCatmullRom=dn,t.curveCatmullRomClosed=or,t.curveCatmullRomOpen=Pr,t.curveLinear=H,t.curveLinearClosed=Re,t.curveMonotoneX=$n,t.curveMonotoneY=Hn,t.curveNatural=yr,t.curveStep=Ei,t.curveStepAfter=Aa,t.curveStepBefore=Ta,t.line=G,t.lineRadial=Ft,t.linkHorizontal=et,t.linkRadial=gt,t.linkVertical=at,t.pie=rt,t.pointRadial=St,t.radialArea=Ot,t.radialLine=Ft,t.stack=io,t.stackOffsetDiverging=Ko,t.stackOffsetExpand=ds,t.stackOffsetNone=eo,t.stackOffsetSilhouette=jo,t.stackOffsetWiggle=bs,t.stackOrderAppearance=Ra,t.stackOrderAscending=Bo,t.stackOrderDescending=ao,t.stackOrderInsideOut=so,t.stackOrderNone=Ho,t.stackOrderReverse=Hs,t.symbol=wr,t.symbolCircle=k,t.symbolCross=ot,t.symbolDiamond=Et,t.symbolSquare=Wt,t.symbolStar=kt,t.symbolTriangle=le,t.symbolWye=wn,t.symbols=er,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_d3-voronoi@1.1.4@d3-voronoi/dist/d3-voronoi.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";function u(z){return function(){return z}}function s(z){return z[0]}function c(z){return z[1]}function r(){this._=null}function h(z){z.U=z.C=z.L=z.R=z.P=z.N=null}r.prototype={constructor:r,insert:function(Q,ht){var et,at,gt;if(Q){if(ht.P=Q,ht.N=Q.N,Q.N&&(Q.N.P=ht),Q.N=ht,Q.R){for(Q=Q.R;Q.L;)Q=Q.L;Q.L=ht}else Q.R=ht;et=Q}else this._?(Q=a(this._),ht.P=null,ht.N=Q,Q.P=Q.L=ht,et=Q):(ht.P=ht.N=null,this._=ht,et=null);for(ht.L=ht.R=null,ht.U=et,ht.C=!0,Q=ht;et&&et.C;)at=et.U,et===at.L?(gt=at.R,gt&&gt.C?(et.C=gt.C=!1,at.C=!0,Q=at):(Q===et.R&&(n(this,et),Q=et,et=Q.U),et.C=!1,at.C=!0,i(this,at))):(gt=at.L,gt&&gt.C?(et.C=gt.C=!1,at.C=!0,Q=at):(Q===et.L&&(i(this,et),Q=et,et=Q.U),et.C=!1,at.C=!0,n(this,at))),et=Q.U;this._.C=!1},remove:function(Q){Q.N&&(Q.N.P=Q.P),Q.P&&(Q.P.N=Q.N),Q.N=Q.P=null;var ht=Q.U,et,at=Q.L,gt=Q.R,k,ot;if(at?gt?k=a(gt):k=at:k=gt,ht?ht.L===Q?ht.L=k:ht.R=k:this._=k,at&&gt?(ot=k.C,k.C=Q.C,k.L=at,at.U=k,k!==gt?(ht=k.U,k.U=Q.U,Q=k.R,ht.L=Q,k.R=gt,gt.U=k):(k.U=ht,ht=k,Q=k.R)):(ot=Q.C,Q=k),Q&&(Q.U=ht),!ot){if(Q&&Q.C){Q.C=!1;return}do{if(Q===this._)break;if(Q===ht.L){if(et=ht.R,et.C&&(et.C=!1,ht.C=!0,n(this,ht),et=ht.R),et.L&&et.L.C||et.R&&et.R.C){(!et.R||!et.R.C)&&(et.L.C=!1,et.C=!0,i(this,et),et=ht.R),et.C=ht.C,ht.C=et.R.C=!1,n(this,ht),Q=this._;break}}else if(et=ht.L,et.C&&(et.C=!1,ht.C=!0,i(this,ht),et=ht.L),et.L&&et.L.C||et.R&&et.R.C){(!et.L||!et.L.C)&&(et.R.C=!1,et.C=!0,n(this,et),et=ht.L),et.C=ht.C,ht.C=et.L.C=!1,i(this,ht),Q=this._;break}et.C=!0,Q=ht,ht=ht.U}while(!Q.C);Q&&(Q.C=!1)}}};function n(z,Q){var ht=Q,et=Q.R,at=ht.U;at?at.L===ht?at.L=et:at.R=et:z._=et,et.U=at,ht.U=et,ht.R=et.L,ht.R&&(ht.R.U=ht),et.L=ht}function i(z,Q){var ht=Q,et=Q.L,at=ht.U;at?at.L===ht?at.L=et:at.R=et:z._=et,et.U=at,ht.U=et,ht.L=et.R,ht.L&&(ht.L.U=ht),et.R=ht}function a(z){for(;z.L;)z=z.L;return z}function o(z,Q,ht,et){var at=[null,null],gt=St.push(at)-1;return at.left=z,at.right=Q,ht&&f(at,z,Q,ht),et&&f(at,Q,z,et),Ft[z.index].halfedges.push(gt),Ft[Q.index].halfedges.push(gt),at}function l(z,Q,ht){var et=[Q,ht];return et.left=z,et}function f(z,Q,ht,et){!z[0]&&!z[1]?(z[0]=et,z.left=Q,z.right=ht):z.left===ht?z[1]=et:z[0]=et}function v(z,Q,ht,et,at){var gt=z[0],k=z[1],ot=gt[0],it=gt[1],X=k[0],Et=k[1],vt=0,Nt=1,$t=X-ot,ee=Et-it,kt;if(kt=Q-ot,!(!$t&&kt>0)){if(kt/=$t,$t<0){if(kt<vt)return;kt<Nt&&(Nt=kt)}else if($t>0){if(kt>Nt)return;kt>vt&&(vt=kt)}if(kt=et-ot,!(!$t&&kt<0)){if(kt/=$t,$t<0){if(kt>Nt)return;kt>vt&&(vt=kt)}else if($t>0){if(kt<vt)return;kt<Nt&&(Nt=kt)}if(kt=ht-it,!(!ee&&kt>0)){if(kt/=ee,ee<0){if(kt<vt)return;kt<Nt&&(Nt=kt)}else if(ee>0){if(kt>Nt)return;kt>vt&&(vt=kt)}if(kt=at-it,!(!ee&&kt<0)){if(kt/=ee,ee<0){if(kt>Nt)return;kt>vt&&(vt=kt)}else if(ee>0){if(kt<vt)return;kt<Nt&&(Nt=kt)}return!(vt>0)&&!(Nt<1)||(vt>0&&(z[0]=[ot+vt*$t,it+vt*ee]),Nt<1&&(z[1]=[ot+Nt*$t,it+Nt*ee])),!0}}}}}function b(z,Q,ht,et,at){var gt=z[1];if(gt)return!0;var k=z[0],ot=z.left,it=z.right,X=ot[0],Et=ot[1],vt=it[0],Nt=it[1],$t=(X+vt)/2,ee=(Et+Nt)/2,kt,Wt;if(Nt===Et){if($t<Q||$t>=et)return;if(X>vt){if(!k)k=[$t,ht];else if(k[1]>=at)return;gt=[$t,at]}else{if(!k)k=[$t,at];else if(k[1]<ht)return;gt=[$t,ht]}}else if(kt=(X-vt)/(Nt-Et),Wt=ee-kt*$t,kt<-1||kt>1)if(X>vt){if(!k)k=[(ht-Wt)/kt,ht];else if(k[1]>=at)return;gt=[(at-Wt)/kt,at]}else{if(!k)k=[(at-Wt)/kt,at];else if(k[1]<ht)return;gt=[(ht-Wt)/kt,ht]}else if(Et<Nt){if(!k)k=[Q,kt*Q+Wt];else if(k[0]>=et)return;gt=[et,kt*et+Wt]}else{if(!k)k=[et,kt*et+Wt];else if(k[0]<Q)return;gt=[Q,kt*Q+Wt]}return z[0]=k,z[1]=gt,!0}function g(z,Q,ht,et){for(var at=St.length,gt;at--;)(!b(gt=St[at],z,Q,ht,et)||!v(gt,z,Q,ht,et)||!(Math.abs(gt[0][0]-gt[1][0])>dt||Math.abs(gt[0][1]-gt[1][1])>dt))&&delete St[at]}function m(z){return Ft[z.index]={site:z,halfedges:[]}}function _(z,Q){var ht=z.site,et=Q.left,at=Q.right;return ht===at&&(at=et,et=ht),at?Math.atan2(at[1]-et[1],at[0]-et[0]):(ht===et?(et=Q[1],at=Q[0]):(et=Q[0],at=Q[1]),Math.atan2(et[0]-at[0],at[1]-et[1]))}function M(z,Q){return Q[+(Q.left!==z.site)]}function x(z,Q){return Q[+(Q.left===z.site)]}function y(){for(var z=0,Q=Ft.length,ht,et,at,gt;z<Q;++z)if((ht=Ft[z])&&(gt=(et=ht.halfedges).length)){var k=new Array(gt),ot=new Array(gt);for(at=0;at<gt;++at)k[at]=at,ot[at]=_(ht,St[et[at]]);for(k.sort(function(it,X){return ot[X]-ot[it]}),at=0;at<gt;++at)ot[at]=et[k[at]];for(at=0;at<gt;++at)et[at]=ot[at]}}function S(z,Q,ht,et){var at=Ft.length,gt,k,ot,it,X,Et,vt,Nt,$t,ee,kt,Wt,ae=!0;for(gt=0;gt<at;++gt)if(k=Ft[gt]){for(ot=k.site,X=k.halfedges,it=X.length;it--;)St[X[it]]||X.splice(it,1);for(it=0,Et=X.length;it<Et;)ee=x(k,St[X[it]]),kt=ee[0],Wt=ee[1],vt=M(k,St[X[++it%Et]]),Nt=vt[0],$t=vt[1],(Math.abs(kt-Nt)>dt||Math.abs(Wt-$t)>dt)&&(X.splice(it,0,St.push(l(ot,ee,Math.abs(kt-z)<dt&&et-Wt>dt?[z,Math.abs(Nt-z)<dt?$t:et]:Math.abs(Wt-et)<dt&&ht-kt>dt?[Math.abs($t-et)<dt?Nt:ht,et]:Math.abs(kt-ht)<dt&&Wt-Q>dt?[ht,Math.abs(Nt-ht)<dt?$t:Q]:Math.abs(Wt-Q)<dt&&kt-z>dt?[Math.abs($t-Q)<dt?Nt:z,Q]:null))-1),++Et);Et&&(ae=!1)}if(ae){var le,je,Oe,We=Infinity;for(gt=0,ae=null;gt<at;++gt)(k=Ft[gt])&&(ot=k.site,le=ot[0]-z,je=ot[1]-Q,Oe=le*le+je*je,Oe<We&&(We=Oe,ae=k));if(ae){var Ye=[z,Q],wn=[z,et],er=[ht,et],wr=[ht,Q];ae.halfedges.push(St.push(l(ot=ae.site,Ye,wn))-1,St.push(l(ot,wn,er))-1,St.push(l(ot,er,wr))-1,St.push(l(ot,wr,Ye))-1)}}for(gt=0;gt<at;++gt)(k=Ft[gt])&&(k.halfedges.length||delete Ft[gt])}var P=[],A;function O(){h(this),this.x=this.y=this.arc=this.site=this.cy=null}function L(z){var Q=z.P,ht=z.N;if(!(!Q||!ht)){var et=Q.site,at=z.site,gt=ht.site;if(et!==gt){var k=at[0],ot=at[1],it=et[0]-k,X=et[1]-ot,Et=gt[0]-k,vt=gt[1]-ot,Nt=2*(it*vt-X*Et);if(!(Nt>=-ut)){var $t=it*it+X*X,ee=Et*Et+vt*vt,kt=(vt*$t-X*ee)/Nt,Wt=(it*ee-Et*$t)/Nt,ae=P.pop()||new O;ae.arc=z,ae.site=at,ae.x=kt+k,ae.y=(ae.cy=Wt+ot)+Math.sqrt(kt*kt+Wt*Wt),z.circle=ae;for(var le=null,je=Ot._;je;)if(ae.y<je.y||ae.y===je.y&&ae.x<=je.x)if(je.L)je=je.L;else{le=je.P;break}else if(je.R)je=je.R;else{le=je;break}Ot.insert(le,ae),le||(A=ae)}}}}function H(z){var Q=z.circle;Q&&(Q.P||(A=Q.N),Ot.remove(Q),P.push(Q),h(Q),z.circle=null)}var F=[];function Z(){h(this),this.edge=this.site=this.circle=null}function G(z){var Q=F.pop()||new Z;return Q.site=z,Q}function U(z){H(z),Lt.remove(z),F.push(z),h(z)}function Y(z){var Q=z.circle,ht=Q.x,et=Q.cy,at=[ht,et],gt=z.P,k=z.N,ot=[z];U(z);for(var it=gt;it.circle&&Math.abs(ht-it.circle.x)<dt&&Math.abs(et-it.circle.cy)<dt;)gt=it.P,ot.unshift(it),U(it),it=gt;ot.unshift(it),H(it);for(var X=k;X.circle&&Math.abs(ht-X.circle.x)<dt&&Math.abs(et-X.circle.cy)<dt;)k=X.N,ot.push(X),U(X),X=k;ot.push(X),H(X);var Et=ot.length,vt;for(vt=1;vt<Et;++vt)X=ot[vt],it=ot[vt-1],f(X.edge,it.site,X.site,at);it=ot[0],X=ot[Et-1],X.edge=o(it.site,X.site,null,at),L(it),L(X)}function J(z){for(var Q=z[0],ht=z[1],et,at,gt,k,ot=Lt._;ot;)if(gt=rt(ot,ht)-Q,gt>dt)ot=ot.L;else if(k=Q-ft(ot,ht),k>dt){if(!ot.R){et=ot;break}ot=ot.R}else{gt>-dt?(et=ot.P,at=ot):k>-dt?(et=ot,at=ot.N):et=at=ot;break}m(z);var it=G(z);if(Lt.insert(et,it),!(!et&&!at)){if(et===at){H(et),at=G(et.site),Lt.insert(it,at),it.edge=at.edge=o(et.site,it.site),L(et),L(at);return}if(!at){it.edge=o(et.site,it.site);return}H(et),H(at);var X=et.site,Et=X[0],vt=X[1],Nt=z[0]-Et,$t=z[1]-vt,ee=at.site,kt=ee[0]-Et,Wt=ee[1]-vt,ae=2*(Nt*Wt-$t*kt),le=Nt*Nt+$t*$t,je=kt*kt+Wt*Wt,Oe=[(Wt*le-$t*je)/ae+Et,(Nt*je-kt*le)/ae+vt];f(at.edge,X,ee,Oe),it.edge=o(X,z,null,Oe),at.edge=o(z,ee,null,Oe),L(et),L(at)}}function rt(z,Q){var ht=z.site,et=ht[0],at=ht[1],gt=at-Q;if(!gt)return et;var k=z.P;if(!k)return-Infinity;ht=k.site;var ot=ht[0],it=ht[1],X=it-Q;if(!X)return ot;var Et=ot-et,vt=1/gt-1/X,Nt=Et/X;return vt?(-Nt+Math.sqrt(Nt*Nt-2*vt*(Et*Et/(-2*X)-it+X/2+at-gt/2)))/vt+et:(et+ot)/2}function ft(z,Q){var ht=z.N;if(ht)return rt(ht,Q);var et=z.site;return et[1]===Q?et[0]:Infinity}var dt=1e-6,ut=1e-12,Lt,Ft,Ot,St;function xt(z,Q,ht){return(z[0]-ht[0])*(Q[1]-z[1])-(z[0]-Q[0])*(ht[1]-z[1])}function At(z,Q){return Q[1]-z[1]||Q[0]-z[0]}function nt(z,Q){var ht=z.sort(At).pop(),et,at,gt;for(St=[],Ft=new Array(z.length),Lt=new r,Ot=new r;;)if(gt=A,ht&&(!gt||ht[1]<gt.y||ht[1]===gt.y&&ht[0]<gt.x))(ht[0]!==et||ht[1]!==at)&&(J(ht),et=ht[0],at=ht[1]),ht=z.pop();else if(gt)Y(gt.arc);else break;if(y(),Q){var k=+Q[0][0],ot=+Q[0][1],it=+Q[1][0],X=+Q[1][1];g(k,ot,it,X),S(k,ot,it,X)}this.edges=St,this.cells=Ft,Lt=Ot=St=Ft=null}nt.prototype={constructor:nt,polygons:function(){var Q=this.edges;return this.cells.map(function(ht){var et=ht.halfedges.map(function(at){return M(ht,Q[at])});return et.data=ht.site.data,et})},triangles:function(){var Q=[],ht=this.edges;return this.cells.forEach(function(et,at){if(!!(it=(k=et.halfedges).length))for(var gt=et.site,k,ot=-1,it,X,Et=ht[k[it-1]],vt=Et.left===gt?Et.right:Et.left;++ot<it;)X=vt,Et=ht[k[ot]],vt=Et.left===gt?Et.right:Et.left,X&&vt&&at<X.index&&at<vt.index&&xt(gt,X,vt)<0&&Q.push([gt.data,X.data,vt.data])}),Q},links:function(){return this.edges.filter(function(Q){return Q.right}).map(function(Q){return{source:Q.left.data,target:Q.right.data}})},find:function(Q,ht,et){for(var at=this,gt,k=at._found||0,ot=at.cells.length,it;!(it=at.cells[k]);)if(++k>=ot)return null;var X=Q-it.site[0],Et=ht-it.site[1],vt=X*X+Et*Et;do it=at.cells[gt=k],k=null,it.halfedges.forEach(function(Nt){var $t=at.edges[Nt],ee=$t.left;if(!((ee===it.site||!ee)&&!(ee=$t.right))){var kt=Q-ee[0],Wt=ht-ee[1],ae=kt*kt+Wt*Wt;ae<vt&&(vt=ae,k=ee.index)}});while(k!==null);return at._found=gt,et==null||vt<=et*et?it.site:null}};function Mt(){var z=s,Q=c,ht=null;function et(at){return new nt(at.map(function(gt,k){var ot=[Math.round(z(gt,k,at)/dt)*dt,Math.round(Q(gt,k,at)/dt)*dt];return ot.index=k,ot.data=gt,ot}),ht)}return et.polygons=function(at){return et(at).polygons()},et.links=function(at){return et(at).links()},et.triangles=function(at){return et(at).triangles()},et.x=function(at){return arguments.length?(z=typeof at=="function"?at:u(+at),et):z},et.y=function(at){return arguments.length?(Q=typeof at=="function"?at:u(+at),et):Q},et.extent=function(at){return arguments.length?(ht=at==null?null:[[+at[0][0],+at[0][1]],[+at[1][0],+at[1][1]]],et):ht&&[[ht[0][0],ht[0][1]],[ht[1][0],ht[1][1]]]},et.size=function(at){return arguments.length?(ht=at==null?null:[[0,0],[+at[0],+at[1]]],et):ht&&[ht[1][0]-ht[0][0],ht[1][1]-ht[0][1]]},et}t.voronoi=Mt,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_dagre@0.8.5@dagre/index.js":function(E,T,e){E.exports={graphlib:e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js"),layout:e("./node_modules/_dagre@0.8.5@dagre/lib/layout.js"),debug:e("./node_modules/_dagre@0.8.5@dagre/lib/debug.js"),util:{time:e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").time,notime:e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").notime},version:e("./node_modules/_dagre@0.8.5@dagre/lib/version.js")}},"./node_modules/_dagre@0.8.5@dagre/lib/acyclic.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/greedy-fas.js");E.exports={run:s,undo:r};function s(h){var n=h.graph().acyclicer==="greedy"?u(h,i(h)):c(h);t.forEach(n,function(a){var o=h.edge(a);h.removeEdge(a),o.forwardName=a.name,o.reversed=!0,h.setEdge(a.w,a.v,o,t.uniqueId("rev"))});function i(a){return function(o){return a.edge(o).weight}}}function c(h){var n=[],i={},a={};function o(l){t.has(a,l)||(a[l]=!0,i[l]=!0,t.forEach(h.outEdges(l),function(f){t.has(i,f.w)?n.push(f):o(f.w)}),delete i[l])}return t.forEach(h.nodes(),o),n}function r(h){t.forEach(h.edges(),function(n){var i=h.edge(n);if(i.reversed){h.removeEdge(n);var a=i.forwardName;delete i.reversed,delete i.forwardName,h.setEdge(n.w,n.v,i,a)}})}},"./node_modules/_dagre@0.8.5@dagre/lib/add-border-segments.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports=s;function s(r){function h(n){var i=r.children(n),a=r.node(n);if(i.length&&t.forEach(i,h),t.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var o=a.minRank,l=a.maxRank+1;o<l;++o)c(r,"borderLeft","_bl",n,a,o),c(r,"borderRight","_br",n,a,o)}}t.forEach(r.children(),h)}function c(r,h,n,i,a,o){var l={width:0,height:0,rank:o,borderType:h},f=a[h][o-1],v=u.addDummyNode(r,"border",l,n);a[h][o]=v,r.setParent(v,i),f&&r.setEdge(f,v,{weight:1})}},"./node_modules/_dagre@0.8.5@dagre/lib/coordinate-system.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports={adjust:u,undo:s};function u(o){var l=o.graph().rankdir.toLowerCase();(l==="lr"||l==="rl")&&c(o)}function s(o){var l=o.graph().rankdir.toLowerCase();(l==="bt"||l==="rl")&&h(o),(l==="lr"||l==="rl")&&(i(o),c(o))}function c(o){t.forEach(o.nodes(),function(l){r(o.node(l))}),t.forEach(o.edges(),function(l){r(o.edge(l))})}function r(o){var l=o.width;o.width=o.height,o.height=l}function h(o){t.forEach(o.nodes(),function(l){n(o.node(l))}),t.forEach(o.edges(),function(l){var f=o.edge(l);t.forEach(f.points,n),t.has(f,"y")&&n(f)})}function n(o){o.y=-o.y}function i(o){t.forEach(o.nodes(),function(l){a(o.node(l))}),t.forEach(o.edges(),function(l){var f=o.edge(l);t.forEach(f.points,a),t.has(f,"x")&&a(f)})}function a(o){var l=o.x;o.x=o.y,o.y=l}},"./node_modules/_dagre@0.8.5@dagre/lib/data/list.js":function(E,T){E.exports=e;function e(){var s={};s._next=s._prev=s,this._sentinel=s}e.prototype.dequeue=function(){var s=this._sentinel,c=s._prev;if(c!==s)return t(c),c},e.prototype.enqueue=function(s){var c=this._sentinel;s._prev&&s._next&&t(s),s._next=c._next,c._next._prev=s,c._next=s,s._prev=c},e.prototype.toString=function(){for(var s=[],c=this._sentinel,r=c._prev;r!==c;)s.push(JSON.stringify(r,u)),r=r._prev;return"["+s.join(", ")+"]"};function t(s){s._prev._next=s._next,s._next._prev=s._prev,delete s._next,delete s._prev}function u(s,c){if(s!=="_next"&&s!=="_prev")return c}},"./node_modules/_dagre@0.8.5@dagre/lib/debug.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;E.exports={debugOrdering:c};function c(r){var h=u.buildLayerMatrix(r),n=new s({compound:!0,multigraph:!0}).setGraph({});return t.forEach(r.nodes(),function(i){n.setNode(i,{label:i}),n.setParent(i,"layer"+r.node(i).rank)}),t.forEach(r.edges(),function(i){n.setEdge(i.v,i.w,{},i.name)}),t.forEach(h,function(i,a){var o="layer"+a;n.setNode(o,{rank:"same"}),t.reduce(i,function(l,f){return n.setEdge(l,f,{style:"invis"}),f})}),n}},"./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js":function(E,T,e){var t;try{t=e("./node_modules/_graphlib@2.1.8@graphlib/index.js")}catch(u){}t||(t=window.graphlib),E.exports=t},"./node_modules/_dagre@0.8.5@dagre/lib/greedy-fas.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,s=e("./node_modules/_dagre@0.8.5@dagre/lib/data/list.js");E.exports=r;var c=t.constant(1);function r(o,l){if(o.nodeCount()<=1)return[];var f=i(o,l||c),v=h(f.graph,f.buckets,f.zeroIdx);return t.flatten(t.map(v,function(b){return o.outEdges(b.v,b.w)}),!0)}function h(o,l,f){for(var v=[],b=l[l.length-1],g=l[0],m;o.nodeCount();){for(;m=g.dequeue();)n(o,l,f,m);for(;m=b.dequeue();)n(o,l,f,m);if(o.nodeCount()){for(var _=l.length-2;_>0;--_)if(m=l[_].dequeue(),m){v=v.concat(n(o,l,f,m,!0));break}}}return v}function n(o,l,f,v,b){var g=b?[]:void 0;return t.forEach(o.inEdges(v.v),function(m){var _=o.edge(m),M=o.node(m.v);b&&g.push({v:m.v,w:m.w}),M.out-=_,a(l,f,M)}),t.forEach(o.outEdges(v.v),function(m){var _=o.edge(m),M=m.w,x=o.node(M);x.in-=_,a(l,f,x)}),o.removeNode(v.v),g}function i(o,l){var f=new u,v=0,b=0;t.forEach(o.nodes(),function(_){f.setNode(_,{v:_,in:0,out:0})}),t.forEach(o.edges(),function(_){var M=f.edge(_.v,_.w)||0,x=l(_),y=M+x;f.setEdge(_.v,_.w,y),b=Math.max(b,f.node(_.v).out+=x),v=Math.max(v,f.node(_.w).in+=x)});var g=t.range(b+v+3).map(function(){return new s}),m=v+1;return t.forEach(f.nodes(),function(_){a(g,m,f.node(_))}),{graph:f,buckets:g,zeroIdx:m}}function a(o,l,f){f.out?f.in?o[f.out-f.in+l].enqueue(f):o[o.length-1].enqueue(f):o[0].enqueue(f)}},"./node_modules/_dagre@0.8.5@dagre/lib/layout.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/acyclic.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/normalize.js"),c=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/index.js"),r=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").normalizeRanks,h=e("./node_modules/_dagre@0.8.5@dagre/lib/parent-dummy-chains.js"),n=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").removeEmptyRanks,i=e("./node_modules/_dagre@0.8.5@dagre/lib/nesting-graph.js"),a=e("./node_modules/_dagre@0.8.5@dagre/lib/add-border-segments.js"),o=e("./node_modules/_dagre@0.8.5@dagre/lib/coordinate-system.js"),l=e("./node_modules/_dagre@0.8.5@dagre/lib/order/index.js"),f=e("./node_modules/_dagre@0.8.5@dagre/lib/position/index.js"),v=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),b=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;E.exports=g;function g(xt,At){var nt=At&&At.debugTiming?v.time:v.notime;nt("layout",function(){var Mt=nt("  buildLayoutGraph",function(){return H(xt)});nt("  runLayout",function(){m(Mt,nt)}),nt("  updateInputGraph",function(){_(xt,Mt)})})}function m(xt,At){At("    makeSpaceForEdgeLabels",function(){F(xt)}),At("    removeSelfEdges",function(){ut(xt)}),At("    acyclic",function(){u.run(xt)}),At("    nestingGraph.run",function(){i.run(xt)}),At("    rank",function(){c(v.asNonCompoundGraph(xt))}),At("    injectEdgeLabelProxies",function(){Z(xt)}),At("    removeEmptyRanks",function(){n(xt)}),At("    nestingGraph.cleanup",function(){i.cleanup(xt)}),At("    normalizeRanks",function(){r(xt)}),At("    assignRankMinMax",function(){G(xt)}),At("    removeEdgeLabelProxies",function(){U(xt)}),At("    normalize.run",function(){s.run(xt)}),At("    parentDummyChains",function(){h(xt)}),At("    addBorderSegments",function(){a(xt)}),At("    order",function(){l(xt)}),At("    insertSelfEdges",function(){Lt(xt)}),At("    adjustCoordinateSystem",function(){o.adjust(xt)}),At("    position",function(){f(xt)}),At("    positionSelfEdges",function(){Ft(xt)}),At("    removeBorderNodes",function(){dt(xt)}),At("    normalize.undo",function(){s.undo(xt)}),At("    fixupEdgeLabelCoords",function(){rt(xt)}),At("    undoCoordinateSystem",function(){o.undo(xt)}),At("    translateGraph",function(){Y(xt)}),At("    assignNodeIntersects",function(){J(xt)}),At("    reversePoints",function(){ft(xt)}),At("    acyclic.undo",function(){u.undo(xt)})}function _(xt,At){t.forEach(xt.nodes(),function(nt){var Mt=xt.node(nt),z=At.node(nt);Mt&&(Mt.x=z.x,Mt.y=z.y,At.children(nt).length&&(Mt.width=z.width,Mt.height=z.height))}),t.forEach(xt.edges(),function(nt){var Mt=xt.edge(nt),z=At.edge(nt);Mt.points=z.points,t.has(z,"x")&&(Mt.x=z.x,Mt.y=z.y)}),xt.graph().width=At.graph().width,xt.graph().height=At.graph().height}var M=["nodesep","edgesep","ranksep","marginx","marginy"],x={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},y=["acyclicer","ranker","rankdir","align"],S=["width","height"],P={width:0,height:0},A=["minlen","weight","width","height","labeloffset"],O={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},L=["labelpos"];function H(xt){var At=new b({multigraph:!0,compound:!0}),nt=St(xt.graph());return At.setGraph(t.merge({},x,Ot(nt,M),t.pick(nt,y))),t.forEach(xt.nodes(),function(Mt){var z=St(xt.node(Mt));At.setNode(Mt,t.defaults(Ot(z,S),P)),At.setParent(Mt,xt.parent(Mt))}),t.forEach(xt.edges(),function(Mt){var z=St(xt.edge(Mt));At.setEdge(Mt,t.merge({},O,Ot(z,A),t.pick(z,L)))}),At}function F(xt){var At=xt.graph();At.ranksep/=2,t.forEach(xt.edges(),function(nt){var Mt=xt.edge(nt);Mt.minlen*=2,Mt.labelpos.toLowerCase()!=="c"&&(At.rankdir==="TB"||At.rankdir==="BT"?Mt.width+=Mt.labeloffset:Mt.height+=Mt.labeloffset)})}function Z(xt){t.forEach(xt.edges(),function(At){var nt=xt.edge(At);if(nt.width&&nt.height){var Mt=xt.node(At.v),z=xt.node(At.w),Q={rank:(z.rank-Mt.rank)/2+Mt.rank,e:At};v.addDummyNode(xt,"edge-proxy",Q,"_ep")}})}function G(xt){var At=0;t.forEach(xt.nodes(),function(nt){var Mt=xt.node(nt);Mt.borderTop&&(Mt.minRank=xt.node(Mt.borderTop).rank,Mt.maxRank=xt.node(Mt.borderBottom).rank,At=t.max(At,Mt.maxRank))}),xt.graph().maxRank=At}function U(xt){t.forEach(xt.nodes(),function(At){var nt=xt.node(At);nt.dummy==="edge-proxy"&&(xt.edge(nt.e).labelRank=nt.rank,xt.removeNode(At))})}function Y(xt){var At=Number.POSITIVE_INFINITY,nt=0,Mt=Number.POSITIVE_INFINITY,z=0,Q=xt.graph(),ht=Q.marginx||0,et=Q.marginy||0;function at(gt){var k=gt.x,ot=gt.y,it=gt.width,X=gt.height;At=Math.min(At,k-it/2),nt=Math.max(nt,k+it/2),Mt=Math.min(Mt,ot-X/2),z=Math.max(z,ot+X/2)}t.forEach(xt.nodes(),function(gt){at(xt.node(gt))}),t.forEach(xt.edges(),function(gt){var k=xt.edge(gt);t.has(k,"x")&&at(k)}),At-=ht,Mt-=et,t.forEach(xt.nodes(),function(gt){var k=xt.node(gt);k.x-=At,k.y-=Mt}),t.forEach(xt.edges(),function(gt){var k=xt.edge(gt);t.forEach(k.points,function(ot){ot.x-=At,ot.y-=Mt}),t.has(k,"x")&&(k.x-=At),t.has(k,"y")&&(k.y-=Mt)}),Q.width=nt-At+ht,Q.height=z-Mt+et}function J(xt){t.forEach(xt.edges(),function(At){var nt=xt.edge(At),Mt=xt.node(At.v),z=xt.node(At.w),Q,ht;nt.points?(Q=nt.points[0],ht=nt.points[nt.points.length-1]):(nt.points=[],Q=z,ht=Mt),nt.points.unshift(v.intersectRect(Mt,Q)),nt.points.push(v.intersectRect(z,ht))})}function rt(xt){t.forEach(xt.edges(),function(At){var nt=xt.edge(At);if(t.has(nt,"x"))switch((nt.labelpos==="l"||nt.labelpos==="r")&&(nt.width-=nt.labeloffset),nt.labelpos){case"l":nt.x-=nt.width/2+nt.labeloffset;break;case"r":nt.x+=nt.width/2+nt.labeloffset;break}})}function ft(xt){t.forEach(xt.edges(),function(At){var nt=xt.edge(At);nt.reversed&&nt.points.reverse()})}function dt(xt){t.forEach(xt.nodes(),function(At){if(xt.children(At).length){var nt=xt.node(At),Mt=xt.node(nt.borderTop),z=xt.node(nt.borderBottom),Q=xt.node(t.last(nt.borderLeft)),ht=xt.node(t.last(nt.borderRight));nt.width=Math.abs(ht.x-Q.x),nt.height=Math.abs(z.y-Mt.y),nt.x=Q.x+nt.width/2,nt.y=Mt.y+nt.height/2}}),t.forEach(xt.nodes(),function(At){xt.node(At).dummy==="border"&&xt.removeNode(At)})}function ut(xt){t.forEach(xt.edges(),function(At){if(At.v===At.w){var nt=xt.node(At.v);nt.selfEdges||(nt.selfEdges=[]),nt.selfEdges.push({e:At,label:xt.edge(At)}),xt.removeEdge(At)}})}function Lt(xt){var At=v.buildLayerMatrix(xt);t.forEach(At,function(nt){var Mt=0;t.forEach(nt,function(z,Q){var ht=xt.node(z);ht.order=Q+Mt,t.forEach(ht.selfEdges,function(et){v.addDummyNode(xt,"selfedge",{width:et.label.width,height:et.label.height,rank:ht.rank,order:Q+ ++Mt,e:et.e,label:et.label},"_se")}),delete ht.selfEdges})})}function Ft(xt){t.forEach(xt.nodes(),function(At){var nt=xt.node(At);if(nt.dummy==="selfedge"){var Mt=xt.node(nt.e.v),z=Mt.x+Mt.width/2,Q=Mt.y,ht=nt.x-z,et=Mt.height/2;xt.setEdge(nt.e,nt.label),xt.removeNode(At),nt.label.points=[{x:z+2*ht/3,y:Q-et},{x:z+5*ht/6,y:Q-et},{x:z+ht,y:Q},{x:z+5*ht/6,y:Q+et},{x:z+2*ht/3,y:Q+et}],nt.label.x=nt.x,nt.label.y=nt.y}})}function Ot(xt,At){return t.mapValues(t.pick(xt,At),Number)}function St(xt){var At={};return t.forEach(xt,function(nt,Mt){At[Mt.toLowerCase()]=nt}),At}},"./node_modules/_dagre@0.8.5@dagre/lib/lodash.js":function(E,T,e){var t;try{t={cloneDeep:e("./node_modules/_lodash@4.17.20@lodash/cloneDeep.js"),constant:e("./node_modules/_lodash@4.17.20@lodash/constant.js"),defaults:e("./node_modules/_lodash@4.17.20@lodash/defaults.js"),each:e("./node_modules/_lodash@4.17.20@lodash/each.js"),filter:e("./node_modules/_lodash@4.17.20@lodash/filter.js"),find:e("./node_modules/_lodash@4.17.20@lodash/find.js"),flatten:e("./node_modules/_lodash@4.17.20@lodash/flatten.js"),forEach:e("./node_modules/_lodash@4.17.20@lodash/forEach.js"),forIn:e("./node_modules/_lodash@4.17.20@lodash/forIn.js"),has:e("./node_modules/_lodash@4.17.20@lodash/has.js"),isUndefined:e("./node_modules/_lodash@4.17.20@lodash/isUndefined.js"),last:e("./node_modules/_lodash@4.17.20@lodash/last.js"),map:e("./node_modules/_lodash@4.17.20@lodash/map.js"),mapValues:e("./node_modules/_lodash@4.17.20@lodash/mapValues.js"),max:e("./node_modules/_lodash@4.17.20@lodash/max.js"),merge:e("./node_modules/_lodash@4.17.20@lodash/merge.js"),min:e("./node_modules/_lodash@4.17.20@lodash/min.js"),minBy:e("./node_modules/_lodash@4.17.20@lodash/minBy.js"),now:e("./node_modules/_lodash@4.17.20@lodash/now.js"),pick:e("./node_modules/_lodash@4.17.20@lodash/pick.js"),range:e("./node_modules/_lodash@4.17.20@lodash/range.js"),reduce:e("./node_modules/_lodash@4.17.20@lodash/reduce.js"),sortBy:e("./node_modules/_lodash@4.17.20@lodash/sortBy.js"),uniqueId:e("./node_modules/_lodash@4.17.20@lodash/uniqueId.js"),values:e("./node_modules/_lodash@4.17.20@lodash/values.js"),zipObject:e("./node_modules/_lodash@4.17.20@lodash/zipObject.js")}}catch(u){}t||(t=window._),E.exports=t},"./node_modules/_dagre@0.8.5@dagre/lib/nesting-graph.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports={run:s,cleanup:n};function s(i){var a=u.addDummyNode(i,"root",{},"_root"),o=r(i),l=t.max(t.values(o))-1,f=2*l+1;i.graph().nestingRoot=a,t.forEach(i.edges(),function(b){i.edge(b).minlen*=f});var v=h(i)+1;t.forEach(i.children(),function(b){c(i,a,f,v,l,o,b)}),i.graph().nodeRankFactor=f}function c(i,a,o,l,f,v,b){var g=i.children(b);if(!g.length){b!==a&&i.setEdge(a,b,{weight:0,minlen:o});return}var m=u.addBorderNode(i,"_bt"),_=u.addBorderNode(i,"_bb"),M=i.node(b);i.setParent(m,b),M.borderTop=m,i.setParent(_,b),M.borderBottom=_,t.forEach(g,function(x){c(i,a,o,l,f,v,x);var y=i.node(x),S=y.borderTop?y.borderTop:x,P=y.borderBottom?y.borderBottom:x,A=y.borderTop?l:2*l,O=S!==P?1:f-v[b]+1;i.setEdge(m,S,{weight:A,minlen:O,nestingEdge:!0}),i.setEdge(P,_,{weight:A,minlen:O,nestingEdge:!0})}),i.parent(b)||i.setEdge(a,m,{weight:0,minlen:f+v[b]})}function r(i){var a={};function o(l,f){var v=i.children(l);v&&v.length&&t.forEach(v,function(b){o(b,f+1)}),a[l]=f}return t.forEach(i.children(),function(l){o(l,1)}),a}function h(i){return t.reduce(i.edges(),function(a,o){return a+i.edge(o).weight},0)}function n(i){var a=i.graph();i.removeNode(a.nestingRoot),delete a.nestingRoot,t.forEach(i.edges(),function(o){var l=i.edge(o);l.nestingEdge&&i.removeEdge(o)})}},"./node_modules/_dagre@0.8.5@dagre/lib/normalize.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports={run:s,undo:r};function s(h){h.graph().dummyChains=[],t.forEach(h.edges(),function(n){c(h,n)})}function c(h,n){var i=n.v,a=h.node(i).rank,o=n.w,l=h.node(o).rank,f=n.name,v=h.edge(n),b=v.labelRank;if(l!==a+1){h.removeEdge(n);var g,m,_;for(_=0,++a;a<l;++_,++a)v.points=[],m={width:0,height:0,edgeLabel:v,edgeObj:n,rank:a},g=u.addDummyNode(h,"edge",m,"_d"),a===b&&(m.width=v.width,m.height=v.height,m.dummy="edge-label",m.labelpos=v.labelpos),h.setEdge(i,g,{weight:v.weight},f),_===0&&h.graph().dummyChains.push(g),i=g;h.setEdge(i,o,{weight:v.weight},f)}}function r(h){t.forEach(h.graph().dummyChains,function(n){var i=h.node(n),a=i.edgeLabel,o;for(h.setEdge(i.edgeObj,a);i.dummy;)o=h.successors(n)[0],h.removeNode(n),a.points.push({x:i.x,y:i.y}),i.dummy==="edge-label"&&(a.x=i.x,a.y=i.y,a.width=i.width,a.height=i.height),n=o,i=h.node(n)})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/add-subgraph-constraints.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=u;function u(s,c,r){var h={},n;t.forEach(r,function(i){for(var a=s.parent(i),o,l;a;){if(o=s.parent(a),o?(l=h[o],h[o]=a):(l=n,n=a),l&&l!==a){c.setEdge(l,a);return}a=o}})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/barycenter.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=u;function u(s,c){return t.map(c,function(r){var h=s.inEdges(r);if(h.length){var n=t.reduce(h,function(i,a){var o=s.edge(a),l=s.node(a.v);return{sum:i.sum+o.weight*l.order,weight:i.weight+o.weight}},{sum:0,weight:0});return{v:r,barycenter:n.sum/n.weight,weight:n.weight}}else return{v:r}})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/build-layer-graph.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;E.exports=s;function s(r,h,n){var i=c(r),a=new u({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(o){return r.node(o)});return t.forEach(r.nodes(),function(o){var l=r.node(o),f=r.parent(o);(l.rank===h||l.minRank<=h&&h<=l.maxRank)&&(a.setNode(o),a.setParent(o,f||i),t.forEach(r[n](o),function(v){var b=v.v===o?v.w:v.v,g=a.edge(b,o),m=t.isUndefined(g)?0:g.weight;a.setEdge(b,o,{weight:r.edge(v).weight+m})}),t.has(l,"minRank")&&a.setNode(o,{borderLeft:l.borderLeft[h],borderRight:l.borderRight[h]}))}),a}function c(r){for(var h;r.hasNode(h=t.uniqueId("_root")););return h}},"./node_modules/_dagre@0.8.5@dagre/lib/order/cross-count.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=u;function u(c,r){for(var h=0,n=1;n<r.length;++n)h+=s(c,r[n-1],r[n]);return h}function s(c,r,h){for(var n=t.zipObject(h,t.map(h,function(v,b){return b})),i=t.flatten(t.map(r,function(v){return t.sortBy(t.map(c.outEdges(v),function(b){return{pos:n[b.w],weight:c.edge(b).weight}}),"pos")}),!0),a=1;a<h.length;)a<<=1;var o=2*a-1;a-=1;var l=t.map(new Array(o),function(){return 0}),f=0;return t.forEach(i.forEach(function(v){var b=v.pos+a;l[b]+=v.weight;for(var g=0;b>0;)b%2&&(g+=l[b+1]),b=b-1>>1,l[b]+=v.weight;f+=v.weight*g})),f}},"./node_modules/_dagre@0.8.5@dagre/lib/order/index.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/order/init-order.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/order/cross-count.js"),c=e("./node_modules/_dagre@0.8.5@dagre/lib/order/sort-subgraph.js"),r=e("./node_modules/_dagre@0.8.5@dagre/lib/order/build-layer-graph.js"),h=e("./node_modules/_dagre@0.8.5@dagre/lib/order/add-subgraph-constraints.js"),n=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,i=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports=a;function a(v){var b=i.maxRank(v),g=o(v,t.range(1,b+1),"inEdges"),m=o(v,t.range(b-1,-1,-1),"outEdges"),_=u(v);f(v,_);for(var M=Number.POSITIVE_INFINITY,x,y=0,S=0;S<4;++y,++S){l(y%2?g:m,y%4>=2),_=i.buildLayerMatrix(v);var P=s(v,_);P<M&&(S=0,x=t.cloneDeep(_),M=P)}f(v,x)}function o(v,b,g){return t.map(b,function(m){return r(v,m,g)})}function l(v,b){var g=new n;t.forEach(v,function(m){var _=m.graph().root,M=c(m,_,g,b);t.forEach(M.vs,function(x,y){m.node(x).order=y}),h(m,g,M.vs)})}function f(v,b){t.forEach(b,function(g){t.forEach(g,function(m,_){v.node(m).order=_})})}},"./node_modules/_dagre@0.8.5@dagre/lib/order/init-order.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=u;function u(s){var c={},r=t.filter(s.nodes(),function(o){return!s.children(o).length}),h=t.max(t.map(r,function(o){return s.node(o).rank})),n=t.map(t.range(h+1),function(){return[]});function i(o){if(!t.has(c,o)){c[o]=!0;var l=s.node(o);n[l.rank].push(o),t.forEach(s.successors(o),i)}}var a=t.sortBy(r,function(o){return s.node(o).rank});return t.forEach(a,i),n}},"./node_modules/_dagre@0.8.5@dagre/lib/order/resolve-conflicts.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=u;function u(r,h){var n={};t.forEach(r,function(a,o){var l=n[a.v]={indegree:0,in:[],out:[],vs:[a.v],i:o};t.isUndefined(a.barycenter)||(l.barycenter=a.barycenter,l.weight=a.weight)}),t.forEach(h.edges(),function(a){var o=n[a.v],l=n[a.w];!t.isUndefined(o)&&!t.isUndefined(l)&&(l.indegree++,o.out.push(n[a.w]))});var i=t.filter(n,function(a){return!a.indegree});return s(i)}function s(r){var h=[];function n(o){return function(l){l.merged||(t.isUndefined(l.barycenter)||t.isUndefined(o.barycenter)||l.barycenter>=o.barycenter)&&c(o,l)}}function i(o){return function(l){l.in.push(o),--l.indegree==0&&r.push(l)}}for(;r.length;){var a=r.pop();h.push(a),t.forEach(a.in.reverse(),n(a)),t.forEach(a.out,i(a))}return t.map(t.filter(h,function(o){return!o.merged}),function(o){return t.pick(o,["vs","i","barycenter","weight"])})}function c(r,h){var n=0,i=0;r.weight&&(n+=r.barycenter*r.weight,i+=r.weight),h.weight&&(n+=h.barycenter*h.weight,i+=h.weight),r.vs=h.vs.concat(r.vs),r.barycenter=n/i,r.weight=i,r.i=Math.min(h.i,r.i),h.merged=!0}},"./node_modules/_dagre@0.8.5@dagre/lib/order/sort-subgraph.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/order/barycenter.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/order/resolve-conflicts.js"),c=e("./node_modules/_dagre@0.8.5@dagre/lib/order/sort.js");E.exports=r;function r(i,a,o,l){var f=i.children(a),v=i.node(a),b=v?v.borderLeft:void 0,g=v?v.borderRight:void 0,m={};b&&(f=t.filter(f,function(P){return P!==b&&P!==g}));var _=u(i,f);t.forEach(_,function(P){if(i.children(P.v).length){var A=r(i,P.v,o,l);m[P.v]=A,t.has(A,"barycenter")&&n(P,A)}});var M=s(_,o);h(M,m);var x=c(M,l);if(b&&(x.vs=t.flatten([b,x.vs,g],!0),i.predecessors(b).length)){var y=i.node(i.predecessors(b)[0]),S=i.node(i.predecessors(g)[0]);t.has(x,"barycenter")||(x.barycenter=0,x.weight=0),x.barycenter=(x.barycenter*x.weight+y.order+S.order)/(x.weight+2),x.weight+=2}return x}function h(i,a){t.forEach(i,function(o){o.vs=t.flatten(o.vs.map(function(l){return a[l]?a[l].vs:l}),!0)})}function n(i,a){t.isUndefined(i.barycenter)?(i.barycenter=a.barycenter,i.weight=a.weight):(i.barycenter=(i.barycenter*i.weight+a.barycenter*a.weight)/(i.weight+a.weight),i.weight+=a.weight)}},"./node_modules/_dagre@0.8.5@dagre/lib/order/sort.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports=s;function s(h,n){var i=u.partition(h,function(m){return t.has(m,"barycenter")}),a=i.lhs,o=t.sortBy(i.rhs,function(m){return-m.i}),l=[],f=0,v=0,b=0;a.sort(r(!!n)),b=c(l,o,b),t.forEach(a,function(m){b+=m.vs.length,l.push(m.vs),f+=m.barycenter*m.weight,v+=m.weight,b=c(l,o,b)});var g={vs:t.flatten(l,!0)};return v&&(g.barycenter=f/v,g.weight=v),g}function c(h,n,i){for(var a;n.length&&(a=t.last(n)).i<=i;)n.pop(),h.push(a.vs),i++;return i}function r(h){return function(n,i){return n.barycenter<i.barycenter?-1:n.barycenter>i.barycenter?1:h?i.i-n.i:n.i-i.i}}},"./node_modules/_dagre@0.8.5@dagre/lib/parent-dummy-chains.js":function(E,T,e){var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports=u;function u(r){var h=c(r);t.forEach(r.graph().dummyChains,function(n){for(var i=r.node(n),a=i.edgeObj,o=s(r,h,a.v,a.w),l=o.path,f=o.lca,v=0,b=l[v],g=!0;n!==a.w;){if(i=r.node(n),g){for(;(b=l[v])!==f&&r.node(b).maxRank<i.rank;)v++;b===f&&(g=!1)}if(!g){for(;v<l.length-1&&r.node(b=l[v+1]).minRank<=i.rank;)v++;b=l[v]}r.setParent(n,b),n=r.successors(n)[0]}})}function s(r,h,n,i){var a=[],o=[],l=Math.min(h[n].low,h[i].low),f=Math.max(h[n].lim,h[i].lim),v,b;v=n;do v=r.parent(v),a.push(v);while(v&&(h[v].low>l||f>h[v].lim));for(b=v,v=i;(v=r.parent(v))!==b;)o.push(v);return{path:a.concat(o.reverse()),lca:b}}function c(r){var h={},n=0;function i(a){var o=n;t.forEach(r.children(a),i),h[a]={low:o,lim:n++}}return t.forEach(r.children(),i),h}},"./node_modules/_dagre@0.8.5@dagre/lib/position/bk.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,s=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js");E.exports={positionX:g,findType1Conflicts:c,findType2Conflicts:r,addConflict:n,hasConflict:i,verticalAlignment:a,horizontalCompaction:o,alignCoordinates:v,findSmallestWidthAlignment:f,balance:b};function c(M,x){var y={};function S(P,A){var O=0,L=0,H=P.length,F=t.last(A);return t.forEach(A,function(Z,G){var U=h(M,Z),Y=U?M.node(U).order:H;(U||Z===F)&&(t.forEach(A.slice(L,G+1),function(J){t.forEach(M.predecessors(J),function(rt){var ft=M.node(rt),dt=ft.order;(dt<O||Y<dt)&&!(ft.dummy&&M.node(J).dummy)&&n(y,rt,J)})}),L=G+1,O=Y)}),A}return t.reduce(x,S),y}function r(M,x){var y={};function S(A,O,L,H,F){var Z;t.forEach(t.range(O,L),function(G){Z=A[G],M.node(Z).dummy&&t.forEach(M.predecessors(Z),function(U){var Y=M.node(U);Y.dummy&&(Y.order<H||Y.order>F)&&n(y,U,Z)})})}function P(A,O){var L=-1,H,F=0;return t.forEach(O,function(Z,G){if(M.node(Z).dummy==="border"){var U=M.predecessors(Z);U.length&&(H=M.node(U[0]).order,S(O,F,G,L,H),F=G,L=H)}S(O,F,O.length,H,A.length)}),O}return t.reduce(x,P),y}function h(M,x){if(M.node(x).dummy)return t.find(M.predecessors(x),function(y){return M.node(y).dummy})}function n(M,x,y){if(x>y){var S=x;x=y,y=S}var P=M[x];P||(M[x]=P={}),P[y]=!0}function i(M,x,y){if(x>y){var S=x;x=y,y=S}return t.has(M[x],y)}function a(M,x,y,S){var P={},A={},O={};return t.forEach(x,function(L){t.forEach(L,function(H,F){P[H]=H,A[H]=H,O[H]=F})}),t.forEach(x,function(L){var H=-1;t.forEach(L,function(F){var Z=S(F);if(Z.length){Z=t.sortBy(Z,function(rt){return O[rt]});for(var G=(Z.length-1)/2,U=Math.floor(G),Y=Math.ceil(G);U<=Y;++U){var J=Z[U];A[F]===F&&H<O[J]&&!i(y,F,J)&&(A[J]=F,A[F]=P[F]=P[J],H=O[J])}}})}),{root:P,align:A}}function o(M,x,y,S,P){var A={},O=l(M,x,y,P),L=P?"borderLeft":"borderRight";function H(G,U){for(var Y=O.nodes(),J=Y.pop(),rt={};J;)rt[J]?G(J):(rt[J]=!0,Y.push(J),Y=Y.concat(U(J))),J=Y.pop()}function F(G){A[G]=O.inEdges(G).reduce(function(U,Y){return Math.max(U,A[Y.v]+O.edge(Y))},0)}function Z(G){var U=O.outEdges(G).reduce(function(J,rt){return Math.min(J,A[rt.w]-O.edge(rt))},Number.POSITIVE_INFINITY),Y=M.node(G);U!==Number.POSITIVE_INFINITY&&Y.borderType!==L&&(A[G]=Math.max(A[G],U))}return H(F,O.predecessors.bind(O)),H(Z,O.successors.bind(O)),t.forEach(S,function(G){A[G]=A[y[G]]}),A}function l(M,x,y,S){var P=new u,A=M.graph(),O=m(A.nodesep,A.edgesep,S);return t.forEach(x,function(L){var H;t.forEach(L,function(F){var Z=y[F];if(P.setNode(Z),H){var G=y[H],U=P.edge(G,Z);P.setEdge(G,Z,Math.max(O(M,F,H),U||0))}H=F})}),P}function f(M,x){return t.minBy(t.values(x),function(y){var S=Number.NEGATIVE_INFINITY,P=Number.POSITIVE_INFINITY;return t.forIn(y,function(A,O){var L=_(M,O)/2;S=Math.max(A+L,S),P=Math.min(A-L,P)}),S-P})}function v(M,x){var y=t.values(x),S=t.min(y),P=t.max(y);t.forEach(["u","d"],function(A){t.forEach(["l","r"],function(O){var L=A+O,H=M[L],F;if(H!==x){var Z=t.values(H);F=O==="l"?S-t.min(Z):P-t.max(Z),F&&(M[L]=t.mapValues(H,function(G){return G+F}))}})})}function b(M,x){return t.mapValues(M.ul,function(y,S){if(x)return M[x.toLowerCase()][S];var P=t.sortBy(t.map(M,S));return(P[1]+P[2])/2})}function g(M){var x=s.buildLayerMatrix(M),y=t.merge(c(M,x),r(M,x)),S={},P;t.forEach(["u","d"],function(O){P=O==="u"?x:t.values(x).reverse(),t.forEach(["l","r"],function(L){L==="r"&&(P=t.map(P,function(G){return t.values(G).reverse()}));var H=(O==="u"?M.predecessors:M.successors).bind(M),F=a(M,P,y,H),Z=o(M,P,F.root,F.align,L==="r");L==="r"&&(Z=t.mapValues(Z,function(G){return-G})),S[O+L]=Z})});var A=f(M,S);return v(S,A),b(S,M.graph().align)}function m(M,x,y){return function(S,P,A){var O=S.node(P),L=S.node(A),H=0,F;if(H+=O.width/2,t.has(O,"labelpos"))switch(O.labelpos.toLowerCase()){case"l":F=-O.width/2;break;case"r":F=O.width/2;break}if(F&&(H+=y?F:-F),F=0,H+=(O.dummy?x:M)/2,H+=(L.dummy?x:M)/2,H+=L.width/2,t.has(L,"labelpos"))switch(L.labelpos.toLowerCase()){case"l":F=L.width/2;break;case"r":F=-L.width/2;break}return F&&(H+=y?F:-F),F=0,H}}function _(M,x){return M.node(x).width}},"./node_modules/_dagre@0.8.5@dagre/lib/position/index.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/position/bk.js").positionX;E.exports=c;function c(h){h=u.asNonCompoundGraph(h),r(h),t.forEach(s(h),function(n,i){h.node(i).x=n})}function r(h){var n=u.buildLayerMatrix(h),i=h.graph().ranksep,a=0;t.forEach(n,function(o){var l=t.max(t.map(o,function(f){return h.node(f).height}));t.forEach(o,function(f){h.node(f).y=a+l/2}),a+=l+i})}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph,s=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").slack;E.exports=c;function c(i){var a=new u({directed:!1}),o=i.nodes()[0],l=i.nodeCount();a.setNode(o,{});for(var f,v;r(a,i)<l;)f=h(a,i),v=a.hasNode(f.v)?s(i,f):-s(i,f),n(a,i,v);return a}function r(i,a){function o(l){t.forEach(a.nodeEdges(l),function(f){var v=f.v,b=l===v?f.w:v;!i.hasNode(b)&&!s(a,f)&&(i.setNode(b,{}),i.setEdge(l,b,{}),o(b))})}return t.forEach(i.nodes(),o),i.nodeCount()}function h(i,a){return t.minBy(a.edges(),function(o){if(i.hasNode(o.v)!==i.hasNode(o.w))return s(a,o)})}function n(i,a,o){t.forEach(i.nodes(),function(l){a.node(l).rank+=o})}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/index.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js"),u=t.longestPath,s=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js"),c=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/network-simplex.js");E.exports=r;function r(a){switch(a.graph().ranker){case"network-simplex":i(a);break;case"tight-tree":n(a);break;case"longest-path":h(a);break;default:i(a)}}var h=u;function n(a){u(a),s(a)}function i(a){c(a)}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/network-simplex.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/feasible-tree.js"),s=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").slack,c=e("./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js").longestPath,r=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").alg.preorder,h=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").alg.postorder,n=e("./node_modules/_dagre@0.8.5@dagre/lib/util.js").simplify;E.exports=i,i.initLowLimValues=f,i.initCutValues=a,i.calcCutValue=l,i.leaveEdge=b,i.enterEdge=g,i.exchangeEdges=m;function i(y){y=n(y),c(y);var S=u(y);f(S),a(S,y);for(var P,A;P=b(S);)A=g(S,y,P),m(S,y,P,A)}function a(y,S){var P=h(y,y.nodes());P=P.slice(0,P.length-1),t.forEach(P,function(A){o(y,S,A)})}function o(y,S,P){var A=y.node(P),O=A.parent;y.edge(P,O).cutvalue=l(y,S,P)}function l(y,S,P){var A=y.node(P),O=A.parent,L=!0,H=S.edge(P,O),F=0;return H||(L=!1,H=S.edge(O,P)),F=H.weight,t.forEach(S.nodeEdges(P),function(Z){var G=Z.v===P,U=G?Z.w:Z.v;if(U!==O){var Y=G===L,J=S.edge(Z).weight;if(F+=Y?J:-J,M(y,P,U)){var rt=y.edge(P,U).cutvalue;F+=Y?-rt:rt}}}),F}function f(y,S){arguments.length<2&&(S=y.nodes()[0]),v(y,{},1,S)}function v(y,S,P,A,O){var L=P,H=y.node(A);return S[A]=!0,t.forEach(y.neighbors(A),function(F){t.has(S,F)||(P=v(y,S,P,F,A))}),H.low=L,H.lim=P++,O?H.parent=O:delete H.parent,P}function b(y){return t.find(y.edges(),function(S){return y.edge(S).cutvalue<0})}function g(y,S,P){var A=P.v,O=P.w;S.hasEdge(A,O)||(A=P.w,O=P.v);var L=y.node(A),H=y.node(O),F=L,Z=!1;L.lim>H.lim&&(F=H,Z=!0);var G=t.filter(S.edges(),function(U){return Z===x(y,y.node(U.v),F)&&Z!==x(y,y.node(U.w),F)});return t.minBy(G,function(U){return s(S,U)})}function m(y,S,P,A){var O=P.v,L=P.w;y.removeEdge(O,L),y.setEdge(A.v,A.w,{}),f(y),a(y,S),_(y,S)}function _(y,S){var P=t.find(y.nodes(),function(O){return!S.node(O).parent}),A=r(y,P);A=A.slice(1),t.forEach(A,function(O){var L=y.node(O).parent,H=S.edge(O,L),F=!1;H||(H=S.edge(L,O),F=!0),S.node(O).rank=S.node(L).rank+(F?H.minlen:-H.minlen)})}function M(y,S,P){return y.hasEdge(S,P)}function x(y,S,P){return P.low<=S.lim&&S.lim<=P.lim}},"./node_modules/_dagre@0.8.5@dagre/lib/rank/util.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js");E.exports={longestPath:u,slack:s};function u(c){var r={};function h(n){var i=c.node(n);if(t.has(r,n))return i.rank;r[n]=!0;var a=t.min(t.map(c.outEdges(n),function(o){return h(o.w)-c.edge(o).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),i.rank=a}t.forEach(c.sources(),h)}function s(c,r){return c.node(r.w).rank-c.node(r.v).rank-c.edge(r).minlen}},"./node_modules/_dagre@0.8.5@dagre/lib/util.js":function(E,T,e){"use strict";var t=e("./node_modules/_dagre@0.8.5@dagre/lib/lodash.js"),u=e("./node_modules/_dagre@0.8.5@dagre/lib/graphlib.js").Graph;E.exports={addDummyNode:s,simplify:c,asNonCompoundGraph:r,successorWeights:h,predecessorWeights:n,intersectRect:i,buildLayerMatrix:a,normalizeRanks:o,removeEmptyRanks:l,addBorderNode:f,maxRank:v,partition:b,time:g,notime:m};function s(_,M,x,y){var S;do S=t.uniqueId(y);while(_.hasNode(S));return x.dummy=M,_.setNode(S,x),S}function c(_){var M=new u().setGraph(_.graph());return t.forEach(_.nodes(),function(x){M.setNode(x,_.node(x))}),t.forEach(_.edges(),function(x){var y=M.edge(x.v,x.w)||{weight:0,minlen:1},S=_.edge(x);M.setEdge(x.v,x.w,{weight:y.weight+S.weight,minlen:Math.max(y.minlen,S.minlen)})}),M}function r(_){var M=new u({multigraph:_.isMultigraph()}).setGraph(_.graph());return t.forEach(_.nodes(),function(x){_.children(x).length||M.setNode(x,_.node(x))}),t.forEach(_.edges(),function(x){M.setEdge(x,_.edge(x))}),M}function h(_){var M=t.map(_.nodes(),function(x){var y={};return t.forEach(_.outEdges(x),function(S){y[S.w]=(y[S.w]||0)+_.edge(S).weight}),y});return t.zipObject(_.nodes(),M)}function n(_){var M=t.map(_.nodes(),function(x){var y={};return t.forEach(_.inEdges(x),function(S){y[S.v]=(y[S.v]||0)+_.edge(S).weight}),y});return t.zipObject(_.nodes(),M)}function i(_,M){var x=_.x,y=_.y,S=M.x-x,P=M.y-y,A=_.width/2,O=_.height/2;if(!S&&!P)throw new Error("Not possible to find intersection inside of the rectangle");var L,H;return Math.abs(P)*A>Math.abs(S)*O?(P<0&&(O=-O),L=O*S/P,H=O):(S<0&&(A=-A),L=A,H=A*P/S),{x:x+L,y:y+H}}function a(_){var M=t.map(t.range(v(_)+1),function(){return[]});return t.forEach(_.nodes(),function(x){var y=_.node(x),S=y.rank;t.isUndefined(S)||(M[S][y.order]=x)}),M}function o(_){var M=t.min(t.map(_.nodes(),function(x){return _.node(x).rank}));t.forEach(_.nodes(),function(x){var y=_.node(x);t.has(y,"rank")&&(y.rank-=M)})}function l(_){var M=t.min(t.map(_.nodes(),function(P){return _.node(P).rank})),x=[];t.forEach(_.nodes(),function(P){var A=_.node(P).rank-M;x[A]||(x[A]=[]),x[A].push(P)});var y=0,S=_.graph().nodeRankFactor;t.forEach(x,function(P,A){t.isUndefined(P)&&A%S!=0?--y:y&&t.forEach(P,function(O){_.node(O).rank+=y})})}function f(_,M,x,y){var S={width:0,height:0};return arguments.length>=4&&(S.rank=x,S.order=y),s(_,"border",S,M)}function v(_){return t.max(t.map(_.nodes(),function(M){var x=_.node(M).rank;if(!t.isUndefined(x))return x}))}function b(_,M){var x={lhs:[],rhs:[]};return t.forEach(_,function(y){M(y)?x.lhs.push(y):x.rhs.push(y)}),x}function g(_,M){var x=t.now();try{return M()}finally{console.log(_+" time: "+(t.now()-x)+"ms")}}function m(_,M){return M()}},"./node_modules/_dagre@0.8.5@dagre/lib/version.js":function(E,T){E.exports="0.8.5"},"./node_modules/_graphlib@2.1.8@graphlib/index.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/index.js");E.exports={Graph:t.Graph,json:e("./node_modules/_graphlib@2.1.8@graphlib/lib/json.js"),alg:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/index.js"),version:t.version}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/components.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=u;function u(s){var c={},r=[],h;function n(i){t.has(c,i)||(c[i]=!0,h.push(i),t.each(s.successors(i),n),t.each(s.predecessors(i),n))}return t.each(s.nodes(),function(i){h=[],n(i),h.length&&r.push(h)}),r}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=u;function u(c,r,h){t.isArray(r)||(r=[r]);var n=(c.isDirected()?c.successors:c.neighbors).bind(c),i=[],a={};return t.each(r,function(o){if(!c.hasNode(o))throw new Error("Graph does not have node: "+o);s(c,o,h==="post",a,n,i)}),i}function s(c,r,h,n,i,a){t.has(n,r)||(n[r]=!0,h||a.push(r),t.each(i(r),function(o){s(c,o,h,n,i,a)}),h&&a.push(r))}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra-all.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js"),u=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=s;function s(c,r,h){return u.transform(c.nodes(),function(n,i){n[i]=t(c,i,r,h)},{})}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),u=e("./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js");E.exports=c;var s=t.constant(1);function c(h,n,i,a){return r(h,String(n),i||s,a||function(o){return h.outEdges(o)})}function r(h,n,i,a){var o={},l=new u,f,v,b=function(m){var _=m.v!==f?m.v:m.w,M=o[_],x=i(m),y=v.distance+x;if(x<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+m+" Weight: "+x);y<M.distance&&(M.distance=y,M.predecessor=f,l.decrease(_,y))};for(h.nodes().forEach(function(g){var m=g===n?0:Number.POSITIVE_INFINITY;o[g]={distance:m},l.add(g,m)});l.size()>0&&(f=l.removeMin(),v=o[f],v.distance!==Number.POSITIVE_INFINITY);)a(f).forEach(b);return o}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/find-cycles.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),u=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js");E.exports=s;function s(c){return t.filter(u(c),function(r){return r.length>1||r.length===1&&c.hasEdge(r[0],r[0])})}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/floyd-warshall.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=s;var u=t.constant(1);function s(r,h,n){return c(r,h||u,n||function(i){return r.outEdges(i)})}function c(r,h,n){var i={},a=r.nodes();return a.forEach(function(o){i[o]={},i[o][o]={distance:0},a.forEach(function(l){o!==l&&(i[o][l]={distance:Number.POSITIVE_INFINITY})}),n(o).forEach(function(l){var f=l.v===o?l.w:l.v,v=h(l);i[o][f]={distance:v,predecessor:o}})}),a.forEach(function(o){var l=i[o];a.forEach(function(f){var v=i[f];a.forEach(function(b){var g=v[o],m=l[b],_=v[b],M=g.distance+m.distance;M<_.distance&&(_.distance=M,_.predecessor=m.predecessor)})})}),i}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/index.js":function(E,T,e){E.exports={components:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/components.js"),dijkstra:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra.js"),dijkstraAll:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dijkstra-all.js"),findCycles:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/find-cycles.js"),floydWarshall:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/floyd-warshall.js"),isAcyclic:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/is-acyclic.js"),postorder:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/postorder.js"),preorder:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/preorder.js"),prim:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/prim.js"),tarjan:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js"),topsort:e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/is-acyclic.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js");E.exports=u;function u(s){try{t(s)}catch(c){if(c instanceof t.CycleException)return!1;throw c}return!0}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/postorder.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js");E.exports=u;function u(s,c){return t(s,c,"post")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/preorder.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/alg/dfs.js");E.exports=u;function u(s,c){return t(s,c,"pre")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/prim.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),u=e("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js"),s=e("./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js");E.exports=c;function c(r,h){var n=new u,i={},a=new s,o;function l(v){var b=v.v===o?v.w:v.v,g=a.priority(b);if(g!==void 0){var m=h(v);m<g&&(i[b]=o,a.decrease(b,m))}}if(r.nodeCount()===0)return n;t.each(r.nodes(),function(v){a.add(v,Number.POSITIVE_INFINITY),n.setNode(v)}),a.decrease(r.nodes()[0],0);for(var f=!1;a.size()>0;){if(o=a.removeMin(),t.has(i,o))n.setEdge(o,i[o]);else{if(f)throw new Error("Input graph is not connected: "+r);f=!0}r.nodeEdges(o).forEach(l)}return n}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/tarjan.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=u;function u(s){var c=0,r=[],h={},n=[];function i(a){var o=h[a]={onStack:!0,lowlink:c,index:c++};if(r.push(a),s.successors(a).forEach(function(v){t.has(h,v)?h[v].onStack&&(o.lowlink=Math.min(o.lowlink,h[v].index)):(i(v),o.lowlink=Math.min(o.lowlink,h[v].lowlink))}),o.lowlink===o.index){var l=[],f;do f=r.pop(),h[f].onStack=!1,l.push(f);while(a!==f);n.push(l)}}return s.nodes().forEach(function(a){t.has(h,a)||i(a)}),n}},"./node_modules/_graphlib@2.1.8@graphlib/lib/alg/topsort.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=u,u.CycleException=s;function u(c){var r={},h={},n=[];function i(a){if(t.has(h,a))throw new s;t.has(r,a)||(h[a]=!0,r[a]=!0,t.each(c.predecessors(a),i),delete h[a],n.push(a))}if(t.each(c.sinks(),i),t.size(r)!==c.nodeCount())throw new s;return n}function s(){}s.prototype=new Error},"./node_modules/_graphlib@2.1.8@graphlib/lib/data/priority-queue.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=u;function u(){this._arr=[],this._keyIndices={}}u.prototype.size=function(){return this._arr.length},u.prototype.keys=function(){return this._arr.map(function(s){return s.key})},u.prototype.has=function(s){return t.has(this._keyIndices,s)},u.prototype.priority=function(s){var c=this._keyIndices[s];if(c!==void 0)return this._arr[c].priority},u.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},u.prototype.add=function(s,c){var r=this._keyIndices;if(s=String(s),!t.has(r,s)){var h=this._arr,n=h.length;return r[s]=n,h.push({key:s,priority:c}),this._decrease(n),!0}return!1},u.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var s=this._arr.pop();return delete this._keyIndices[s.key],this._heapify(0),s.key},u.prototype.decrease=function(s,c){var r=this._keyIndices[s];if(c>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+s+" Old: "+this._arr[r].priority+" New: "+c);this._arr[r].priority=c,this._decrease(r)},u.prototype._heapify=function(s){var c=this._arr,r=2*s,h=r+1,n=s;r<c.length&&(n=c[r].priority<c[n].priority?r:n,h<c.length&&(n=c[h].priority<c[n].priority?h:n),n!==s&&(this._swap(s,n),this._heapify(n)))},u.prototype._decrease=function(s){for(var c=this._arr,r=c[s].priority,h;s!==0&&(h=s>>1,!(c[h].priority<r));)this._swap(s,h),s=h},u.prototype._swap=function(s,c){var r=this._arr,h=this._keyIndices,n=r[s],i=r[c];r[s]=i,r[c]=n,h[i.key]=s,h[n.key]=c}},"./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js":function(E,T,e){"use strict";var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js");E.exports=r;var u="\0",s="\0",c="";function r(l){this._isDirected=t.has(l,"directed")?l.directed:!0,this._isMultigraph=t.has(l,"multigraph")?l.multigraph:!1,this._isCompound=t.has(l,"compound")?l.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[s]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}r.prototype._nodeCount=0,r.prototype._edgeCount=0,r.prototype.isDirected=function(){return this._isDirected},r.prototype.isMultigraph=function(){return this._isMultigraph},r.prototype.isCompound=function(){return this._isCompound},r.prototype.setGraph=function(l){return this._label=l,this},r.prototype.graph=function(){return this._label},r.prototype.setDefaultNodeLabel=function(l){return t.isFunction(l)||(l=t.constant(l)),this._defaultNodeLabelFn=l,this},r.prototype.nodeCount=function(){return this._nodeCount},r.prototype.nodes=function(){return t.keys(this._nodes)},r.prototype.sources=function(){var l=this;return t.filter(this.nodes(),function(f){return t.isEmpty(l._in[f])})},r.prototype.sinks=function(){var l=this;return t.filter(this.nodes(),function(f){return t.isEmpty(l._out[f])})},r.prototype.setNodes=function(l,f){var v=arguments,b=this;return t.each(l,function(g){v.length>1?b.setNode(g,f):b.setNode(g)}),this},r.prototype.setNode=function(l,f){return t.has(this._nodes,l)?(arguments.length>1&&(this._nodes[l]=f),this):(this._nodes[l]=arguments.length>1?f:this._defaultNodeLabelFn(l),this._isCompound&&(this._parent[l]=s,this._children[l]={},this._children[s][l]=!0),this._in[l]={},this._preds[l]={},this._out[l]={},this._sucs[l]={},++this._nodeCount,this)},r.prototype.node=function(l){return this._nodes[l]},r.prototype.hasNode=function(l){return t.has(this._nodes,l)},r.prototype.removeNode=function(l){var f=this;if(t.has(this._nodes,l)){var v=function(g){f.removeEdge(f._edgeObjs[g])};delete this._nodes[l],this._isCompound&&(this._removeFromParentsChildList(l),delete this._parent[l],t.each(this.children(l),function(b){f.setParent(b)}),delete this._children[l]),t.each(t.keys(this._in[l]),v),delete this._in[l],delete this._preds[l],t.each(t.keys(this._out[l]),v),delete this._out[l],delete this._sucs[l],--this._nodeCount}return this},r.prototype.setParent=function(l,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(f))f=s;else{f+="";for(var v=f;!t.isUndefined(v);v=this.parent(v))if(v===l)throw new Error("Setting "+f+" as parent of "+l+" would create a cycle");this.setNode(f)}return this.setNode(l),this._removeFromParentsChildList(l),this._parent[l]=f,this._children[f][l]=!0,this},r.prototype._removeFromParentsChildList=function(l){delete this._children[this._parent[l]][l]},r.prototype.parent=function(l){if(this._isCompound){var f=this._parent[l];if(f!==s)return f}},r.prototype.children=function(l){if(t.isUndefined(l)&&(l=s),this._isCompound){var f=this._children[l];if(f)return t.keys(f)}else{if(l===s)return this.nodes();if(this.hasNode(l))return[]}},r.prototype.predecessors=function(l){var f=this._preds[l];if(f)return t.keys(f)},r.prototype.successors=function(l){var f=this._sucs[l];if(f)return t.keys(f)},r.prototype.neighbors=function(l){var f=this.predecessors(l);if(f)return t.union(f,this.successors(l))},r.prototype.isLeaf=function(l){var f;return this.isDirected()?f=this.successors(l):f=this.neighbors(l),f.length===0},r.prototype.filterNodes=function(l){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var v=this;t.each(this._nodes,function(m,_){l(_)&&f.setNode(_,m)}),t.each(this._edgeObjs,function(m){f.hasNode(m.v)&&f.hasNode(m.w)&&f.setEdge(m,v.edge(m))});var b={};function g(m){var _=v.parent(m);return _===void 0||f.hasNode(_)?(b[m]=_,_):_ in b?b[_]:g(_)}return this._isCompound&&t.each(f.nodes(),function(m){f.setParent(m,g(m))}),f},r.prototype.setDefaultEdgeLabel=function(l){return t.isFunction(l)||(l=t.constant(l)),this._defaultEdgeLabelFn=l,this},r.prototype.edgeCount=function(){return this._edgeCount},r.prototype.edges=function(){return t.values(this._edgeObjs)},r.prototype.setPath=function(l,f){var v=this,b=arguments;return t.reduce(l,function(g,m){return b.length>1?v.setEdge(g,m,f):v.setEdge(g,m),m}),this},r.prototype.setEdge=function(){var l,f,v,b,g=!1,m=arguments[0];typeof m=="object"&&m!==null&&"v"in m?(l=m.v,f=m.w,v=m.name,arguments.length===2&&(b=arguments[1],g=!0)):(l=m,f=arguments[1],v=arguments[3],arguments.length>2&&(b=arguments[2],g=!0)),l=""+l,f=""+f,t.isUndefined(v)||(v=""+v);var _=i(this._isDirected,l,f,v);if(t.has(this._edgeLabels,_))return g&&(this._edgeLabels[_]=b),this;if(!t.isUndefined(v)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(l),this.setNode(f),this._edgeLabels[_]=g?b:this._defaultEdgeLabelFn(l,f,v);var M=a(this._isDirected,l,f,v);return l=M.v,f=M.w,Object.freeze(M),this._edgeObjs[_]=M,h(this._preds[f],l),h(this._sucs[l],f),this._in[f][_]=M,this._out[l][_]=M,this._edgeCount++,this},r.prototype.edge=function(l,f,v){var b=arguments.length===1?o(this._isDirected,arguments[0]):i(this._isDirected,l,f,v);return this._edgeLabels[b]},r.prototype.hasEdge=function(l,f,v){var b=arguments.length===1?o(this._isDirected,arguments[0]):i(this._isDirected,l,f,v);return t.has(this._edgeLabels,b)},r.prototype.removeEdge=function(l,f,v){var b=arguments.length===1?o(this._isDirected,arguments[0]):i(this._isDirected,l,f,v),g=this._edgeObjs[b];return g&&(l=g.v,f=g.w,delete this._edgeLabels[b],delete this._edgeObjs[b],n(this._preds[f],l),n(this._sucs[l],f),delete this._in[f][b],delete this._out[l][b],this._edgeCount--),this},r.prototype.inEdges=function(l,f){var v=this._in[l];if(v){var b=t.values(v);return f?t.filter(b,function(g){return g.v===f}):b}},r.prototype.outEdges=function(l,f){var v=this._out[l];if(v){var b=t.values(v);return f?t.filter(b,function(g){return g.w===f}):b}},r.prototype.nodeEdges=function(l,f){var v=this.inEdges(l,f);if(v)return v.concat(this.outEdges(l,f))};function h(l,f){l[f]?l[f]++:l[f]=1}function n(l,f){--l[f]||delete l[f]}function i(l,f,v,b){var g=""+f,m=""+v;if(!l&&g>m){var _=g;g=m,m=_}return g+c+m+c+(t.isUndefined(b)?u:b)}function a(l,f,v,b){var g=""+f,m=""+v;if(!l&&g>m){var _=g;g=m,m=_}var M={v:g,w:m};return b&&(M.name=b),M}function o(l,f){return i(l,f.v,f.w,f.name)}},"./node_modules/_graphlib@2.1.8@graphlib/lib/index.js":function(E,T,e){E.exports={Graph:e("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js"),version:e("./node_modules/_graphlib@2.1.8@graphlib/lib/version.js")}},"./node_modules/_graphlib@2.1.8@graphlib/lib/json.js":function(E,T,e){var t=e("./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js"),u=e("./node_modules/_graphlib@2.1.8@graphlib/lib/graph.js");E.exports={write:s,read:h};function s(n){var i={options:{directed:n.isDirected(),multigraph:n.isMultigraph(),compound:n.isCompound()},nodes:c(n),edges:r(n)};return t.isUndefined(n.graph())||(i.value=t.clone(n.graph())),i}function c(n){return t.map(n.nodes(),function(i){var a=n.node(i),o=n.parent(i),l={v:i};return t.isUndefined(a)||(l.value=a),t.isUndefined(o)||(l.parent=o),l})}function r(n){return t.map(n.edges(),function(i){var a=n.edge(i),o={v:i.v,w:i.w};return t.isUndefined(i.name)||(o.name=i.name),t.isUndefined(a)||(o.value=a),o})}function h(n){var i=new u(n.options).setGraph(n.value);return t.each(n.nodes,function(a){i.setNode(a.v,a.value),a.parent&&i.setParent(a.v,a.parent)}),t.each(n.edges,function(a){i.setEdge({v:a.v,w:a.w,name:a.name},a.value)}),i}},"./node_modules/_graphlib@2.1.8@graphlib/lib/lodash.js":function(E,T,e){var t;try{t={clone:e("./node_modules/_lodash@4.17.20@lodash/clone.js"),constant:e("./node_modules/_lodash@4.17.20@lodash/constant.js"),each:e("./node_modules/_lodash@4.17.20@lodash/each.js"),filter:e("./node_modules/_lodash@4.17.20@lodash/filter.js"),has:e("./node_modules/_lodash@4.17.20@lodash/has.js"),isArray:e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),isEmpty:e("./node_modules/_lodash@4.17.20@lodash/isEmpty.js"),isFunction:e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),isUndefined:e("./node_modules/_lodash@4.17.20@lodash/isUndefined.js"),keys:e("./node_modules/_lodash@4.17.20@lodash/keys.js"),map:e("./node_modules/_lodash@4.17.20@lodash/map.js"),reduce:e("./node_modules/_lodash@4.17.20@lodash/reduce.js"),size:e("./node_modules/_lodash@4.17.20@lodash/size.js"),transform:e("./node_modules/_lodash@4.17.20@lodash/transform.js"),union:e("./node_modules/_lodash@4.17.20@lodash/union.js"),values:e("./node_modules/_lodash@4.17.20@lodash/values.js")}}catch(u){}t||(t=window._),E.exports=t},"./node_modules/_graphlib@2.1.8@graphlib/lib/version.js":function(E,T){E.exports="2.1.8"},"./node_modules/_isarray@0.0.1@isarray/index.js":function(E,T){E.exports=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"}},"./node_modules/_lodash@4.17.20@lodash/_DataView.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(u,"DataView");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_Hash.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_hashClear.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_hashDelete.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_hashGet.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_hashHas.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_hashSet.js");function h(n){var i=-1,a=n==null?0:n.length;for(this.clear();++i<a;){var o=n[i];this.set(o[0],o[1])}}h.prototype.clear=t,h.prototype.delete=u,h.prototype.get=s,h.prototype.has=c,h.prototype.set=r,E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_ListCache.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_listCacheClear.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_listCacheDelete.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_listCacheGet.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_listCacheHas.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_listCacheSet.js");function h(n){var i=-1,a=n==null?0:n.length;for(this.clear();++i<a;){var o=n[i];this.set(o[0],o[1])}}h.prototype.clear=t,h.prototype.delete=u,h.prototype.get=s,h.prototype.has=c,h.prototype.set=r,E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_Map.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(u,"Map");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_MapCache.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheClear.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheDelete.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheGet.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheHas.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_mapCacheSet.js");function h(n){var i=-1,a=n==null?0:n.length;for(this.clear();++i<a;){var o=n[i];this.set(o[0],o[1])}}h.prototype.clear=t,h.prototype.delete=u,h.prototype.get=s,h.prototype.has=c,h.prototype.set=r,E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_Promise.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(u,"Promise");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_Set.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(u,"Set");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_SetCache.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_MapCache.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_setCacheAdd.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_setCacheHas.js");function c(r){var h=-1,n=r==null?0:r.length;for(this.__data__=new t;++h<n;)this.add(r[h])}c.prototype.add=c.prototype.push=u,c.prototype.has=s,E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_Stack.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_ListCache.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_stackClear.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_stackDelete.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_stackGet.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_stackHas.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_stackSet.js");function n(i){var a=this.__data__=new t(i);this.size=a.size}n.prototype.clear=u,n.prototype.delete=s,n.prototype.get=c,n.prototype.has=r,n.prototype.set=h,E.exports=n},"./node_modules/_lodash@4.17.20@lodash/_Symbol.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),u=t.Symbol;E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_Uint8Array.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),u=t.Uint8Array;E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_WeakMap.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=t(u,"WeakMap");E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_apply.js":function(E,T){function e(t,u,s){switch(s.length){case 0:return t.call(u);case 1:return t.call(u,s[0]);case 2:return t.call(u,s[0],s[1]);case 3:return t.call(u,s[0],s[1],s[2])}return t.apply(u,s)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayEach.js":function(E,T){function e(t,u){for(var s=-1,c=t==null?0:t.length;++s<c&&u(t[s],s,t)!==!1;);return t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayFilter.js":function(E,T){function e(t,u){for(var s=-1,c=t==null?0:t.length,r=0,h=[];++s<c;){var n=t[s];u(n,s,t)&&(h[r++]=n)}return h}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayIncludes.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIndexOf.js");function u(s,c){var r=s==null?0:s.length;return!!r&&t(s,c,0)>-1}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_arrayIncludesWith.js":function(E,T){function e(t,u,s){for(var c=-1,r=t==null?0:t.length;++c<r;)if(s(u,t[c]))return!0;return!1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayLikeKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseTimes.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),n=Object.prototype,i=n.hasOwnProperty;function a(o,l){var f=s(o),v=!f&&u(o),b=!f&&!v&&c(o),g=!f&&!v&&!b&&h(o),m=f||v||b||g,_=m?t(o.length,String):[],M=_.length;for(var x in o)(l||i.call(o,x))&&!(m&&(x=="length"||b&&(x=="offset"||x=="parent")||g&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||r(x,M)))&&_.push(x);return _}E.exports=a},"./node_modules/_lodash@4.17.20@lodash/_arrayMap.js":function(E,T){function e(t,u){for(var s=-1,c=t==null?0:t.length,r=Array(c);++s<c;)r[s]=u(t[s],s,t);return r}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayPush.js":function(E,T){function e(t,u){for(var s=-1,c=u.length,r=t.length;++s<c;)t[r+s]=u[s];return t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arrayReduce.js":function(E,T){function e(t,u,s,c){var r=-1,h=t==null?0:t.length;for(c&&h&&(s=t[++r]);++r<h;)s=u(s,t[r],r,t);return s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_arraySome.js":function(E,T){function e(t,u){for(var s=-1,c=t==null?0:t.length;++s<c;)if(u(t[s],s,t))return!0;return!1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_asciiSize.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseProperty.js"),u=t("length");E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_assignMergeValue.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/eq.js");function s(c,r,h){(h!==void 0&&!u(c[r],h)||h===void 0&&!(r in c))&&t(c,r,h)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_assignValue.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/eq.js"),s=Object.prototype,c=s.hasOwnProperty;function r(h,n,i){var a=h[n];(!(c.call(h,n)&&u(a,i))||i===void 0&&!(n in h))&&t(h,n,i)}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/eq.js");function u(s,c){for(var r=s.length;r--;)if(t(s[r][0],c))return r;return-1}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseAssign.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function s(c,r){return c&&t(r,u(r),c)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseAssignIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function s(c,r){return c&&t(r,u(r),c)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_defineProperty.js");function u(s,c,r){c=="__proto__"&&t?t(s,c,{configurable:!0,enumerable:!0,value:r,writable:!0}):s[c]=r}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseClone.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_arrayEach.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseAssign.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignIn.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_cloneBuffer.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_copyArray.js"),i=e("./node_modules/_lodash@4.17.20@lodash/_copySymbols.js"),a=e("./node_modules/_lodash@4.17.20@lodash/_copySymbolsIn.js"),o=e("./node_modules/_lodash@4.17.20@lodash/_getAllKeys.js"),l=e("./node_modules/_lodash@4.17.20@lodash/_getAllKeysIn.js"),f=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),v=e("./node_modules/_lodash@4.17.20@lodash/_initCloneArray.js"),b=e("./node_modules/_lodash@4.17.20@lodash/_initCloneByTag.js"),g=e("./node_modules/_lodash@4.17.20@lodash/_initCloneObject.js"),m=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),_=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),M=e("./node_modules/_lodash@4.17.20@lodash/isMap.js"),x=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),y=e("./node_modules/_lodash@4.17.20@lodash/isSet.js"),S=e("./node_modules/_lodash@4.17.20@lodash/keys.js"),P=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js"),A=1,O=2,L=4,H="[object Arguments]",F="[object Array]",Z="[object Boolean]",G="[object Date]",U="[object Error]",Y="[object Function]",J="[object GeneratorFunction]",rt="[object Map]",ft="[object Number]",dt="[object Object]",ut="[object RegExp]",Lt="[object Set]",Ft="[object String]",Ot="[object Symbol]",St="[object WeakMap]",xt="[object ArrayBuffer]",At="[object DataView]",nt="[object Float32Array]",Mt="[object Float64Array]",z="[object Int8Array]",Q="[object Int16Array]",ht="[object Int32Array]",et="[object Uint8Array]",at="[object Uint8ClampedArray]",gt="[object Uint16Array]",k="[object Uint32Array]",ot={};ot[H]=ot[F]=ot[xt]=ot[At]=ot[Z]=ot[G]=ot[nt]=ot[Mt]=ot[z]=ot[Q]=ot[ht]=ot[rt]=ot[ft]=ot[dt]=ot[ut]=ot[Lt]=ot[Ft]=ot[Ot]=ot[et]=ot[at]=ot[gt]=ot[k]=!0,ot[U]=ot[Y]=ot[St]=!1;function it(X,Et,vt,Nt,$t,ee){var kt,Wt=Et&A,ae=Et&O,le=Et&L;if(vt&&(kt=$t?vt(X,Nt,$t,ee):vt(X)),kt!==void 0)return kt;if(!x(X))return X;var je=m(X);if(je){if(kt=v(X),!Wt)return n(X,kt)}else{var Oe=f(X),We=Oe==Y||Oe==J;if(_(X))return h(X,Wt);if(Oe==dt||Oe==H||We&&!$t){if(kt=ae||We?{}:g(X),!Wt)return ae?a(X,r(kt,X)):i(X,c(kt,X))}else{if(!ot[Oe])return $t?X:{};kt=b(X,Oe,Wt)}}ee||(ee=new t);var Ye=ee.get(X);if(Ye)return Ye;ee.set(X,kt),y(X)?X.forEach(function(wr){kt.add(it(wr,Et,vt,wr,X,ee))}):M(X)&&X.forEach(function(wr,on){kt.set(on,it(wr,Et,vt,on,X,ee))});var wn=le?ae?l:o:ae?P:S,er=je?void 0:wn(X);return u(er||X,function(wr,on){er&&(on=wr,wr=X[on]),s(kt,on,it(wr,Et,vt,on,X,ee))}),kt}E.exports=it},"./node_modules/_lodash@4.17.20@lodash/_baseCreate.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),u=Object.create,s=function(){function c(){}return function(r){if(!t(r))return{};if(u)return u(r);c.prototype=r;var h=new c;return c.prototype=void 0,h}}();E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseEach.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_createBaseEach.js"),s=u(t);E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js");function u(s,c,r){for(var h=-1,n=s.length;++h<n;){var i=s[h],a=c(i);if(a!=null&&(o===void 0?a===a&&!t(a):r(a,o)))var o=a,l=i}return l}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseFilter.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseEach.js");function u(s,c){var r=[];return t(s,function(h,n,i){c(h,n,i)&&r.push(h)}),r}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseFindIndex.js":function(E,T){function e(t,u,s,c){for(var r=t.length,h=s+(c?1:-1);c?h--:++h<r;)if(u(t[h],h,t))return h;return-1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayPush.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_isFlattenable.js");function s(c,r,h,n,i){var a=-1,o=c.length;for(h||(h=u),i||(i=[]);++a<o;){var l=c[a];r>0&&h(l)?r>1?s(l,r-1,h,n,i):t(i,l):n||(i[i.length]=l)}return i}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseFor.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_createBaseFor.js"),u=t();E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFor.js"),u=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function s(c,r){return c&&t(c,r,u)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseGet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_castPath.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function s(c,r){r=t(r,c);for(var h=0,n=r.length;c!=null&&h<n;)c=c[u(r[h++])];return h&&h==n?c:void 0}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseGetAllKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayPush.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function s(c,r,h){var n=r(c);return u(c)?n:t(n,h(c))}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getRawTag.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_objectToString.js"),c="[object Null]",r="[object Undefined]",h=t?t.toStringTag:void 0;function n(i){return i==null?i===void 0?r:c:h&&h in Object(i)?u(i):s(i)}E.exports=n},"./node_modules/_lodash@4.17.20@lodash/_baseGt.js":function(E,T){function e(t,u){return t>u}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseHas.js":function(E,T){var e=Object.prototype,t=e.hasOwnProperty;function u(s,c){return s!=null&&t.call(s,c)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseHasIn.js":function(E,T){function e(t,u){return t!=null&&u in Object(t)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseIndexOf.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFindIndex.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseIsNaN.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_strictIndexOf.js");function c(r,h,n){return h===h?s(r,h,n):t(r,u,n)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseIsArguments.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s="[object Arguments]";function c(r){return u(r)&&t(r)==s}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseIsEqual.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsEqualDeep.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js");function s(c,r,h,n,i){return c===r?!0:c==null||r==null||!u(c)&&!u(r)?c!==c&&r!==r:t(c,r,h,n,s,i)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseIsEqualDeep.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_equalArrays.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_equalByTag.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_equalObjects.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),n=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),i=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),a=1,o="[object Arguments]",l="[object Array]",f="[object Object]",v=Object.prototype,b=v.hasOwnProperty;function g(m,_,M,x,y,S){var P=h(m),A=h(_),O=P?l:r(m),L=A?l:r(_);O=O==o?f:O,L=L==o?f:L;var H=O==f,F=L==f,Z=O==L;if(Z&&n(m)){if(!n(_))return!1;P=!0,H=!1}if(Z&&!H)return S||(S=new t),P||i(m)?u(m,_,M,x,y,S):s(m,_,O,M,x,y,S);if(!(M&a)){var G=H&&b.call(m,"__wrapped__"),U=F&&b.call(_,"__wrapped__");if(G||U){var Y=G?m.value():m,J=U?_.value():_;return S||(S=new t),y(Y,J,M,x,S)}}return Z?(S||(S=new t),c(m,_,M,x,y,S)):!1}E.exports=g},"./node_modules/_lodash@4.17.20@lodash/_baseIsMap.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s="[object Map]";function c(r){return u(r)&&t(r)==s}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseIsMatch.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseIsEqual.js"),s=1,c=2;function r(h,n,i,a){var o=i.length,l=o,f=!a;if(h==null)return!l;for(h=Object(h);o--;){var v=i[o];if(f&&v[2]?v[1]!==h[v[0]]:!(v[0]in h))return!1}for(;++o<l;){v=i[o];var b=v[0],g=h[b],m=v[1];if(f&&v[2]){if(g===void 0&&!(b in h))return!1}else{var _=new t;if(a)var M=a(g,m,b,h,n,_);if(!(M===void 0?u(m,g,s|c,a,_):M))return!1}}return!0}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_baseIsNaN.js":function(E,T){function e(t){return t!==t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseIsNative.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_isMasked.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_toSource.js"),r=/[\\^$.*+?()[\]{}|]/g,h=/^\[object .+?Constructor\]$/,n=Function.prototype,i=Object.prototype,a=n.toString,o=i.hasOwnProperty,l=RegExp("^"+a.call(o).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(v){if(!s(v)||u(v))return!1;var b=t(v)?l:h;return b.test(c(v))}E.exports=f},"./node_modules/_lodash@4.17.20@lodash/_baseIsSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s="[object Set]";function c(r){return u(r)&&t(r)==s}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseIsTypedArray.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isLength.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),c="[object Arguments]",r="[object Array]",h="[object Boolean]",n="[object Date]",i="[object Error]",a="[object Function]",o="[object Map]",l="[object Number]",f="[object Object]",v="[object RegExp]",b="[object Set]",g="[object String]",m="[object WeakMap]",_="[object ArrayBuffer]",M="[object DataView]",x="[object Float32Array]",y="[object Float64Array]",S="[object Int8Array]",P="[object Int16Array]",A="[object Int32Array]",O="[object Uint8Array]",L="[object Uint8ClampedArray]",H="[object Uint16Array]",F="[object Uint32Array]",Z={};Z[x]=Z[y]=Z[S]=Z[P]=Z[A]=Z[O]=Z[L]=Z[H]=Z[F]=!0,Z[c]=Z[r]=Z[_]=Z[h]=Z[M]=Z[n]=Z[i]=Z[a]=Z[o]=Z[l]=Z[f]=Z[v]=Z[b]=Z[g]=Z[m]=!1;function G(U){return s(U)&&u(U.length)&&!!Z[t(U)]}E.exports=G},"./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseMatches.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseMatchesProperty.js"),s=e("./node_modules/_lodash@4.17.20@lodash/identity.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),r=e("./node_modules/_lodash@4.17.20@lodash/property.js");function h(n){return typeof n=="function"?n:n==null?s:typeof n=="object"?c(n)?u(n[0],n[1]):t(n):r(n)}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_nativeKeys.js"),s=Object.prototype,c=s.hasOwnProperty;function r(h){if(!t(h))return u(h);var n=[];for(var i in Object(h))c.call(h,i)&&i!="constructor"&&n.push(i);return n}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_baseKeysIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_nativeKeysIn.js"),c=Object.prototype,r=c.hasOwnProperty;function h(n){if(!t(n))return s(n);var i=u(n),a=[];for(var o in n)o=="constructor"&&(i||!r.call(n,o))||a.push(o);return a}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseLt.js":function(E,T){function e(t,u){return t<u}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseMap.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseEach.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function s(c,r){var h=-1,n=u(c)?Array(c.length):[];return t(c,function(i,a,o){n[++h]=r(i,a,o)}),n}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_baseMatches.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsMatch.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getMatchData.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_matchesStrictComparable.js");function c(r){var h=u(r);return h.length==1&&h[0][2]?s(h[0][0],h[0][1]):function(n){return n===r||t(n,r,h)}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseMatchesProperty.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsEqual.js"),u=e("./node_modules/_lodash@4.17.20@lodash/get.js"),s=e("./node_modules/_lodash@4.17.20@lodash/hasIn.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_isKey.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_isStrictComparable.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_matchesStrictComparable.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js"),i=1,a=2;function o(l,f){return c(l)&&r(f)?h(n(l),f):function(v){var b=u(v,l);return b===void 0&&b===f?s(v,l):t(f,b,i|a)}}E.exports=o},"./node_modules/_lodash@4.17.20@lodash/_baseMerge.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Stack.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_assignMergeValue.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseFor.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseMergeDeep.js"),r=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),h=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_safeGet.js");function i(a,o,l,f,v){a!==o&&s(o,function(b,g){if(v||(v=new t),r(b))c(a,o,g,l,i,f,v);else{var m=f?f(n(a,g),b,g+"",a,o,v):void 0;m===void 0&&(m=b),u(a,g,m)}},h)}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/_baseMergeDeep.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assignMergeValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_cloneBuffer.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_cloneTypedArray.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_copyArray.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_initCloneObject.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),n=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),i=e("./node_modules/_lodash@4.17.20@lodash/isArrayLikeObject.js"),a=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),o=e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),l=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),f=e("./node_modules/_lodash@4.17.20@lodash/isPlainObject.js"),v=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),b=e("./node_modules/_lodash@4.17.20@lodash/_safeGet.js"),g=e("./node_modules/_lodash@4.17.20@lodash/toPlainObject.js");function m(_,M,x,y,S,P,A){var O=b(_,x),L=b(M,x),H=A.get(L);if(H){t(_,x,H);return}var F=P?P(O,L,x+"",_,M,A):void 0,Z=F===void 0;if(Z){var G=n(L),U=!G&&a(L),Y=!G&&!U&&v(L);F=L,G||U||Y?n(O)?F=O:i(O)?F=c(O):U?(Z=!1,F=u(L,!0)):Y?(Z=!1,F=s(L,!0)):F=[]:f(L)||h(L)?(F=O,h(O)?F=g(O):(!l(O)||o(O))&&(F=r(L))):Z=!1}Z&&(A.set(L,F),S(F,L,y,P,A),A.delete(L)),t(_,x,F)}E.exports=m},"./node_modules/_lodash@4.17.20@lodash/_baseOrderBy.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseGet.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseMap.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_baseSortBy.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_compareMultiple.js"),i=e("./node_modules/_lodash@4.17.20@lodash/identity.js"),a=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function o(l,f,v){f.length?f=t(f,function(m){return a(m)?function(_){return u(_,m.length===1?m[0]:m)}:m}):f=[i];var b=-1;f=t(f,h(s));var g=c(l,function(m,_,M){var x=t(f,function(y){return y(m)});return{criteria:x,index:++b,value:m}});return r(g,function(m,_){return n(m,_,v)})}E.exports=o},"./node_modules/_lodash@4.17.20@lodash/_basePick.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_basePickBy.js"),u=e("./node_modules/_lodash@4.17.20@lodash/hasIn.js");function s(c,r){return t(c,r,function(h,n){return u(c,n)})}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_basePickBy.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGet.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseSet.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_castPath.js");function c(r,h,n){for(var i=-1,a=h.length,o={};++i<a;){var l=h[i],f=t(r,l);n(f,l)&&u(o,s(l,r),f)}return o}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseProperty.js":function(E,T){function e(t){return function(u){return u==null?void 0:u[t]}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_basePropertyDeep.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGet.js");function u(s){return function(c){return t(c,s)}}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseRange.js":function(E,T){var e=Math.ceil,t=Math.max;function u(s,c,r,h){for(var n=-1,i=t(e((c-s)/(r||1)),0),a=Array(i);i--;)a[h?i:++n]=s,s+=r;return a}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseReduce.js":function(E,T){function e(t,u,s,c,r){return r(t,function(h,n,i){s=c?(c=!1,h):u(s,h,n,i)}),s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseRest.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/identity.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_overRest.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_setToString.js");function c(r,h){return s(u(r,h,t),r+"")}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_castPath.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function h(n,i,a,o){if(!c(n))return n;i=u(i,n);for(var l=-1,f=i.length,v=f-1,b=n;b!=null&&++l<f;){var g=r(i[l]),m=a;if(g==="__proto__"||g==="constructor"||g==="prototype")return n;if(l!=v){var _=b[g];m=o?o(_,g,b):void 0,m===void 0&&(m=c(_)?_:s(i[l+1])?[]:{})}t(b,g,m),b=b[g]}return n}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_baseSetToString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/constant.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_defineProperty.js"),s=e("./node_modules/_lodash@4.17.20@lodash/identity.js"),c=u?function(r,h){return u(r,"toString",{configurable:!0,enumerable:!1,value:t(h),writable:!0})}:s;E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_baseSortBy.js":function(E,T){function e(t,u){var s=t.length;for(t.sort(u);s--;)t[s]=t[s].value;return t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseTimes.js":function(E,T){function e(t,u){for(var s=-1,c=Array(t);++s<t;)c[s]=u(s);return c}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseToString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),r=1/0,h=t?t.prototype:void 0,n=h?h.toString:void 0;function i(a){if(typeof a=="string")return a;if(s(a))return u(a,i)+"";if(c(a))return n?n.call(a):"";var o=a+"";return o=="0"&&1/a==-r?"-0":o}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/_baseUnary.js":function(E,T){function e(t){return function(u){return t(u)}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_baseUniq.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_SetCache.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_arrayIncludes.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_arrayIncludesWith.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_cacheHas.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_createSet.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_setToArray.js"),n=200;function i(a,o,l){var f=-1,v=u,b=a.length,g=!0,m=[],_=m;if(l)g=!1,v=s;else if(b>=n){var M=o?null:r(a);if(M)return h(M);g=!1,v=c,_=new t}else _=o?[]:m;t:for(;++f<b;){var x=a[f],y=o?o(x):x;if(x=l||x!==0?x:0,g&&y===y){for(var S=_.length;S--;)if(_[S]===y)continue t;o&&_.push(y),m.push(x)}else v(_,y,l)||(_!==m&&_.push(y),m.push(x))}return m}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/_baseValues.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js");function u(s,c){return t(c,function(r){return s[r]})}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_baseZipObject.js":function(E,T){function e(t,u,s){for(var c=-1,r=t.length,h=u.length,n={};++c<r;){var i=c<h?u[c]:void 0;s(n,t[c],i)}return n}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_cacheHas.js":function(E,T){function e(t,u){return t.has(u)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_castFunction.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/identity.js");function u(s){return typeof s=="function"?s:t}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_castPath.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_isKey.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_stringToPath.js"),c=e("./node_modules/_lodash@4.17.20@lodash/toString.js");function r(h,n){return t(h)?h:u(h,n)?[h]:s(c(h))}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Uint8Array.js");function u(s){var c=new s.constructor(s.byteLength);return new t(c).set(new t(s)),c}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_cloneBuffer.js":function(E,T,e){(function(t){var u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=T&&!T.nodeType&&T,c=s&&typeof t=="object"&&t&&!t.nodeType&&t,r=c&&c.exports===s,h=r?u.Buffer:void 0,n=h?h.allocUnsafe:void 0;function i(a,o){if(o)return a.slice();var l=a.length,f=n?n(l):new a.constructor(l);return a.copy(f),f}t.exports=i}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/module.js")(E))},"./node_modules/_lodash@4.17.20@lodash/_cloneDataView.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js");function u(s,c){var r=c?t(s.buffer):s.buffer;return new s.constructor(r,s.byteOffset,s.byteLength)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_cloneRegExp.js":function(E,T){var e=/\w*$/;function t(u){var s=new u.constructor(u.source,e.exec(u));return s.lastIndex=u.lastIndex,s}E.exports=t},"./node_modules/_lodash@4.17.20@lodash/_cloneSymbol.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),u=t?t.prototype:void 0,s=u?u.valueOf:void 0;function c(r){return s?Object(s.call(r)):{}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_cloneTypedArray.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js");function u(s,c){var r=c?t(s.buffer):s.buffer;return new s.constructor(r,s.byteOffset,s.length)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_compareAscending.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js");function u(s,c){if(s!==c){var r=s!==void 0,h=s===null,n=s===s,i=t(s),a=c!==void 0,o=c===null,l=c===c,f=t(c);if(!o&&!f&&!i&&s>c||i&&a&&l&&!o&&!f||h&&a&&l||!r&&l||!n)return 1;if(!h&&!i&&!f&&s<c||f&&r&&n&&!h&&!i||o&&r&&n||!a&&n||!l)return-1}return 0}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_compareMultiple.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_compareAscending.js");function u(s,c,r){for(var h=-1,n=s.criteria,i=c.criteria,a=n.length,o=r.length;++h<a;){var l=t(n[h],i[h]);if(l){if(h>=o)return l;var f=r[h];return l*(f=="desc"?-1:1)}}return s.index-c.index}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_copyArray.js":function(E,T){function e(t,u){var s=-1,c=t.length;for(u||(u=Array(c));++s<c;)u[s]=t[s];return u}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_copyObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js");function s(c,r,h,n){var i=!h;h||(h={});for(var a=-1,o=r.length;++a<o;){var l=r[a],f=n?n(h[l],c[l],l,h,c):void 0;f===void 0&&(f=c[l]),i?u(h,l,f):t(h,l,f)}return h}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_copySymbols.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getSymbols.js");function s(c,r){return t(c,u(c),r)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_copySymbolsIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getSymbolsIn.js");function s(c,r){return t(c,u(c),r)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_coreJsData.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),u=t["__core-js_shared__"];E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_createAssigner.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js");function s(c){return t(function(r,h){var n=-1,i=h.length,a=i>1?h[i-1]:void 0,o=i>2?h[2]:void 0;for(a=c.length>3&&typeof a=="function"?(i--,a):void 0,o&&u(h[0],h[1],o)&&(a=i<3?void 0:a,i=1),r=Object(r);++n<i;){var l=h[n];l&&c(r,l,n,a)}return r})}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_createBaseEach.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function u(s,c){return function(r,h){if(r==null)return r;if(!t(r))return s(r,h);for(var n=r.length,i=c?n:-1,a=Object(r);(c?i--:++i<n)&&h(a[i],i,a)!==!1;);return r}}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_createBaseFor.js":function(E,T){function e(t){return function(u,s,c){for(var r=-1,h=Object(u),n=c(u),i=n.length;i--;){var a=n[t?i:++r];if(s(h[a],a,h)===!1)break}return u}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_createFind.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),s=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function c(r){return function(h,n,i){var a=Object(h);if(!u(h)){var o=t(n,3);h=s(h),n=function(v){return o(a[v],v,a)}}var l=r(h,n,i);return l>-1?a[o?h[l]:l]:void 0}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_createRange.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseRange.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js"),s=e("./node_modules/_lodash@4.17.20@lodash/toFinite.js");function c(r){return function(h,n,i){return i&&typeof i!="number"&&u(h,n,i)&&(n=i=void 0),h=s(h),n===void 0?(n=h,h=0):n=s(n),i=i===void 0?h<n?1:-1:s(i),t(h,n,i,r)}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_createSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Set.js"),u=e("./node_modules/_lodash@4.17.20@lodash/noop.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_setToArray.js"),c=1/0,r=t&&1/s(new t([,-0]))[1]==c?function(h){return new t(h)}:u;E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_defineProperty.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=function(){try{var s=t(Object,"defineProperty");return s({},"",{}),s}catch(c){}}();E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_equalArrays.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_SetCache.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_arraySome.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_cacheHas.js"),c=1,r=2;function h(n,i,a,o,l,f){var v=a&c,b=n.length,g=i.length;if(b!=g&&!(v&&g>b))return!1;var m=f.get(n),_=f.get(i);if(m&&_)return m==i&&_==n;var M=-1,x=!0,y=a&r?new t:void 0;for(f.set(n,i),f.set(i,n);++M<b;){var S=n[M],P=i[M];if(o)var A=v?o(P,S,M,i,n,f):o(S,P,M,n,i,f);if(A!==void 0){if(A)continue;x=!1;break}if(y){if(!u(i,function(O,L){if(!s(y,L)&&(S===O||l(S,O,a,o,f)))return y.push(L)})){x=!1;break}}else if(!(S===P||l(S,P,a,o,f))){x=!1;break}}return f.delete(n),f.delete(i),x}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_equalByTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_Uint8Array.js"),s=e("./node_modules/_lodash@4.17.20@lodash/eq.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_equalArrays.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_mapToArray.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_setToArray.js"),n=1,i=2,a="[object Boolean]",o="[object Date]",l="[object Error]",f="[object Map]",v="[object Number]",b="[object RegExp]",g="[object Set]",m="[object String]",_="[object Symbol]",M="[object ArrayBuffer]",x="[object DataView]",y=t?t.prototype:void 0,S=y?y.valueOf:void 0;function P(A,O,L,H,F,Z,G){switch(L){case x:if(A.byteLength!=O.byteLength||A.byteOffset!=O.byteOffset)return!1;A=A.buffer,O=O.buffer;case M:return!(A.byteLength!=O.byteLength||!Z(new u(A),new u(O)));case a:case o:case v:return s(+A,+O);case l:return A.name==O.name&&A.message==O.message;case b:case m:return A==O+"";case f:var U=r;case g:var Y=H&n;if(U||(U=h),A.size!=O.size&&!Y)return!1;var J=G.get(A);if(J)return J==O;H|=i,G.set(A,O);var rt=c(U(A),U(O),H,F,Z,G);return G.delete(A),rt;case _:if(S)return S.call(A)==S.call(O)}return!1}E.exports=P},"./node_modules/_lodash@4.17.20@lodash/_equalObjects.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getAllKeys.js"),u=1,s=Object.prototype,c=s.hasOwnProperty;function r(h,n,i,a,o,l){var f=i&u,v=t(h),b=v.length,g=t(n),m=g.length;if(b!=m&&!f)return!1;for(var _=b;_--;){var M=v[_];if(!(f?M in n:c.call(n,M)))return!1}var x=l.get(h),y=l.get(n);if(x&&y)return x==n&&y==h;var S=!0;l.set(h,n),l.set(n,h);for(var P=f;++_<b;){M=v[_];var A=h[M],O=n[M];if(a)var L=f?a(O,A,M,n,h,l):a(A,O,M,h,n,l);if(!(L===void 0?A===O||o(A,O,i,a,l):L)){S=!1;break}P||(P=M=="constructor")}if(S&&!P){var H=h.constructor,F=n.constructor;H!=F&&"constructor"in h&&"constructor"in n&&!(typeof H=="function"&&H instanceof H&&typeof F=="function"&&F instanceof F)&&(S=!1)}return l.delete(h),l.delete(n),S}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_flatRest.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/flatten.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_overRest.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_setToString.js");function c(r){return s(u(r,void 0,t),r+"")}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_freeGlobal.js":function(E,T,e){(function(t){var u=typeof t=="object"&&t&&t.Object===Object&&t;E.exports=u}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/global.js"))},"./node_modules/_lodash@4.17.20@lodash/_getAllKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetAllKeys.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getSymbols.js"),s=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function c(r){return t(r,s,u)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_getAllKeysIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetAllKeys.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getSymbolsIn.js"),s=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function c(r){return t(r,s,u)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_getMapData.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_isKeyable.js");function u(s,c){var r=s.__data__;return t(c)?r[typeof c=="string"?"string":"hash"]:r.map}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_getMatchData.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_isStrictComparable.js"),u=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function s(c){for(var r=u(c),h=r.length;h--;){var n=r[h],i=c[n];r[h]=[n,i,t(i)]}return r}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_getNative.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsNative.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getValue.js");function s(c,r){var h=u(c,r);return t(h)?h:void 0}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_getPrototype.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_overArg.js"),u=t(Object.getPrototypeOf,Object);E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_getRawTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),u=Object.prototype,s=u.hasOwnProperty,c=u.toString,r=t?t.toStringTag:void 0;function h(n){var i=s.call(n,r),a=n[r];try{n[r]=void 0;var o=!0}catch(f){}var l=c.call(n);return o&&(i?n[r]=a:delete n[r]),l}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_getSymbols.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayFilter.js"),u=e("./node_modules/_lodash@4.17.20@lodash/stubArray.js"),s=Object.prototype,c=s.propertyIsEnumerable,r=Object.getOwnPropertySymbols,h=r?function(n){return n==null?[]:(n=Object(n),t(r(n),function(i){return c.call(n,i)}))}:u;E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_getSymbolsIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayPush.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_getSymbols.js"),c=e("./node_modules/_lodash@4.17.20@lodash/stubArray.js"),r=Object.getOwnPropertySymbols,h=r?function(n){for(var i=[];n;)t(i,s(n)),n=u(n);return i}:c;E.exports=h},"./node_modules/_lodash@4.17.20@lodash/_getTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_DataView.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_Map.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_Promise.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_Set.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_WeakMap.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_toSource.js"),i="[object Map]",a="[object Object]",o="[object Promise]",l="[object Set]",f="[object WeakMap]",v="[object DataView]",b=n(t),g=n(u),m=n(s),_=n(c),M=n(r),x=h;(t&&x(new t(new ArrayBuffer(1)))!=v||u&&x(new u)!=i||s&&x(s.resolve())!=o||c&&x(new c)!=l||r&&x(new r)!=f)&&(x=function(S){var P=h(S),A=P==a?S.constructor:void 0,O=A?n(A):"";if(O)switch(O){case b:return v;case g:return i;case m:return o;case _:return l;case M:return f}return P}),E.exports=x},"./node_modules/_lodash@4.17.20@lodash/_getValue.js":function(E,T){function e(t,u){return t==null?void 0:t[u]}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_hasPath.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_castPath.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),r=e("./node_modules/_lodash@4.17.20@lodash/isLength.js"),h=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function n(i,a,o){a=t(a,i);for(var l=-1,f=a.length,v=!1;++l<f;){var b=h(a[l]);if(!(v=i!=null&&o(i,b)))break;i=i[b]}return v||++l!=f?v:(f=i==null?0:i.length,!!f&&r(f)&&c(b,f)&&(s(i)||u(i)))}E.exports=n},"./node_modules/_lodash@4.17.20@lodash/_hasUnicode.js":function(E,T){var e="\\ud800-\\udfff",t="\\u0300-\\u036f",u="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",c=t+u+s,r="\\ufe0e\\ufe0f",h="\\u200d",n=RegExp("["+h+e+c+r+"]");function i(a){return n.test(a)}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/_hashClear.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js");function u(){this.__data__=t?t(null):{},this.size=0}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_hashDelete.js":function(E,T){function e(t){var u=this.has(t)&&delete this.__data__[t];return this.size-=u?1:0,u}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_hashGet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js"),u="__lodash_hash_undefined__",s=Object.prototype,c=s.hasOwnProperty;function r(h){var n=this.__data__;if(t){var i=n[h];return i===u?void 0:i}return c.call(n,h)?n[h]:void 0}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_hashHas.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js"),u=Object.prototype,s=u.hasOwnProperty;function c(r){var h=this.__data__;return t?h[r]!==void 0:s.call(h,r)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_hashSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js"),u="__lodash_hash_undefined__";function s(c,r){var h=this.__data__;return this.size+=this.has(c)?0:1,h[c]=t&&r===void 0?u:r,this}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_initCloneArray.js":function(E,T){var e=Object.prototype,t=e.hasOwnProperty;function u(s){var c=s.length,r=new s.constructor(c);return c&&typeof s[0]=="string"&&t.call(s,"index")&&(r.index=s.index,r.input=s.input),r}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_initCloneByTag.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_cloneArrayBuffer.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_cloneDataView.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_cloneRegExp.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_cloneSymbol.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_cloneTypedArray.js"),h="[object Boolean]",n="[object Date]",i="[object Map]",a="[object Number]",o="[object RegExp]",l="[object Set]",f="[object String]",v="[object Symbol]",b="[object ArrayBuffer]",g="[object DataView]",m="[object Float32Array]",_="[object Float64Array]",M="[object Int8Array]",x="[object Int16Array]",y="[object Int32Array]",S="[object Uint8Array]",P="[object Uint8ClampedArray]",A="[object Uint16Array]",O="[object Uint32Array]";function L(H,F,Z){var G=H.constructor;switch(F){case b:return t(H);case h:case n:return new G(+H);case g:return u(H,Z);case m:case _:case M:case x:case y:case S:case P:case A:case O:return r(H,Z);case i:return new G;case a:case f:return new G(H);case o:return s(H);case l:return new G;case v:return c(H)}}E.exports=L},"./node_modules/_lodash@4.17.20@lodash/_initCloneObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseCreate.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js");function c(r){return typeof r.constructor=="function"&&!s(r)?t(u(r)):{}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_isFlattenable.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Symbol.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),c=t?t.isConcatSpreadable:void 0;function r(h){return s(h)||u(h)||!!(c&&h&&h[c])}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_isIndex.js":function(E,T){var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function u(s,c){var r=typeof s;return c=c==null?e:c,!!c&&(r=="number"||r!="symbol"&&t.test(s))&&s>-1&&s%1==0&&s<c}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/eq.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isIndex.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isObject.js");function r(h,n,i){if(!c(i))return!1;var a=typeof n;return(a=="number"?u(i)&&s(n,i.length):a=="string"&&n in i)?t(i[n],h):!1}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_isKey.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/;function r(h,n){if(t(h))return!1;var i=typeof h;return i=="number"||i=="symbol"||i=="boolean"||h==null||u(h)?!0:c.test(h)||!s.test(h)||n!=null&&h in Object(n)}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_isKeyable.js":function(E,T){function e(t){var u=typeof t;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?t!=="__proto__":t===null}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_isMasked.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_coreJsData.js"),u=function(){var c=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}();function s(c){return!!u&&u in c}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_isPrototype.js":function(E,T){var e=Object.prototype;function t(u){var s=u&&u.constructor,c=typeof s=="function"&&s.prototype||e;return u===c}E.exports=t},"./node_modules/_lodash@4.17.20@lodash/_isStrictComparable.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isObject.js");function u(s){return s===s&&!t(s)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_listCacheClear.js":function(E,T){function e(){this.__data__=[],this.size=0}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_listCacheDelete.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js"),u=Array.prototype,s=u.splice;function c(r){var h=this.__data__,n=t(h,r);if(n<0)return!1;var i=h.length-1;return n==i?h.pop():s.call(h,n,1),--this.size,!0}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_listCacheGet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js");function u(s){var c=this.__data__,r=t(c,s);return r<0?void 0:c[r][1]}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_listCacheHas.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js");function u(s){return t(this.__data__,s)>-1}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_listCacheSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assocIndexOf.js");function u(s,c){var r=this.__data__,h=t(r,s);return h<0?(++this.size,r.push([s,c])):r[h][1]=c,this}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_mapCacheClear.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_Hash.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_ListCache.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_Map.js");function c(){this.size=0,this.__data__={hash:new t,map:new(s||u),string:new t}}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_mapCacheDelete.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function u(s){var c=t(this,s).delete(s);return this.size-=c?1:0,c}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_mapCacheGet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function u(s){return t(this,s).get(s)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_mapCacheHas.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function u(s){return t(this,s).has(s)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_mapCacheSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getMapData.js");function u(s,c){var r=t(this,s),h=r.size;return r.set(s,c),this.size+=r.size==h?0:1,this}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_mapToArray.js":function(E,T){function e(t){var u=-1,s=Array(t.size);return t.forEach(function(c,r){s[++u]=[r,c]}),s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_matchesStrictComparable.js":function(E,T){function e(t,u){return function(s){return s==null?!1:s[t]===u&&(u!==void 0||t in Object(s))}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_memoizeCapped.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/memoize.js"),u=500;function s(c){var r=t(c,function(n){return h.size===u&&h.clear(),n}),h=r.cache;return r}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_nativeCreate.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_getNative.js"),u=t(Object,"create");E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_nativeKeys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_overArg.js"),u=t(Object.keys,Object);E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_nativeKeysIn.js":function(E,T){function e(t){var u=[];if(t!=null)for(var s in Object(t))u.push(s);return u}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js":function(E,T,e){(function(t){var u=e("./node_modules/_lodash@4.17.20@lodash/_freeGlobal.js"),s=T&&!T.nodeType&&T,c=s&&typeof t=="object"&&t&&!t.nodeType&&t,r=c&&c.exports===s,h=r&&u.process,n=function(){try{var i=c&&c.require&&c.require("util").types;return i||h&&h.binding&&h.binding("util")}catch(a){}}();t.exports=n}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/module.js")(E))},"./node_modules/_lodash@4.17.20@lodash/_objectToString.js":function(E,T){var e=Object.prototype,t=e.toString;function u(s){return t.call(s)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_overArg.js":function(E,T){function e(t,u){return function(s){return t(u(s))}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_overRest.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_apply.js"),u=Math.max;function s(c,r,h){return r=u(r===void 0?c.length-1:r,0),function(){for(var n=arguments,i=-1,a=u(n.length-r,0),o=Array(a);++i<a;)o[i]=n[r+i];i=-1;for(var l=Array(r+1);++i<r;)l[i]=n[i];return l[r]=h(o),t(c,this,l)}}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_root.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_freeGlobal.js"),u=typeof self=="object"&&self&&self.Object===Object&&self,s=t||u||Function("return this")();E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_safeGet.js":function(E,T){function e(t,u){if(!(u==="constructor"&&typeof t[u]=="function")&&u!="__proto__")return t[u]}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_setCacheAdd.js":function(E,T){var e="__lodash_hash_undefined__";function t(u){return this.__data__.set(u,e),this}E.exports=t},"./node_modules/_lodash@4.17.20@lodash/_setCacheHas.js":function(E,T){function e(t){return this.__data__.has(t)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_setToArray.js":function(E,T){function e(t){var u=-1,s=Array(t.size);return t.forEach(function(c){s[++u]=c}),s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_setToString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseSetToString.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_shortOut.js"),s=u(t);E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_shortOut.js":function(E,T){var e=800,t=16,u=Date.now;function s(c){var r=0,h=0;return function(){var n=u(),i=t-(n-h);if(h=n,i>0){if(++r>=e)return arguments[0]}else r=0;return c.apply(void 0,arguments)}}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_stackClear.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_ListCache.js");function u(){this.__data__=new t,this.size=0}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_stackDelete.js":function(E,T){function e(t){var u=this.__data__,s=u.delete(t);return this.size=u.size,s}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_stackGet.js":function(E,T){function e(t){return this.__data__.get(t)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_stackHas.js":function(E,T){function e(t){return this.__data__.has(t)}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_stackSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_ListCache.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_Map.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_MapCache.js"),c=200;function r(h,n){var i=this.__data__;if(i instanceof t){var a=i.__data__;if(!u||a.length<c-1)return a.push([h,n]),this.size=++i.size,this;i=this.__data__=new s(a)}return i.set(h,n),this.size=i.size,this}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/_strictIndexOf.js":function(E,T){function e(t,u,s){for(var c=s-1,r=t.length;++c<r;)if(t[c]===u)return c;return-1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/_stringSize.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_asciiSize.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_hasUnicode.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_unicodeSize.js");function c(r){return u(r)?s(r):t(r)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_stringToPath.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_memoizeCapped.js"),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,c=t(function(r){var h=[];return r.charCodeAt(0)===46&&h.push(""),r.replace(u,function(n,i,a,o){h.push(a?o.replace(s,"$1"):i||n)}),h});E.exports=c},"./node_modules/_lodash@4.17.20@lodash/_toKey.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),u=1/0;function s(c){if(typeof c=="string"||t(c))return c;var r=c+"";return r=="0"&&1/c==-u?"-0":r}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/_toSource.js":function(E,T){var e=Function.prototype,t=e.toString;function u(s){if(s!=null){try{return t.call(s)}catch(c){}try{return s+""}catch(c){}}return""}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/_unicodeSize.js":function(E,T){var e="\\ud800-\\udfff",t="\\u0300-\\u036f",u="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",c=t+u+s,r="\\ufe0e\\ufe0f",h="["+e+"]",n="["+c+"]",i="\\ud83c[\\udffb-\\udfff]",a="(?:"+n+"|"+i+")",o="[^"+e+"]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",b=a+"?",g="["+r+"]?",m="(?:"+v+"(?:"+[o,l,f].join("|")+")"+g+b+")*",_=g+b+m,M="(?:"+[o+n+"?",n,l,f,h].join("|")+")",x=RegExp(i+"(?="+i+")|"+M+_,"g");function y(S){for(var P=x.lastIndex=0;x.test(S);)++P;return P}E.exports=y},"./node_modules/_lodash@4.17.20@lodash/clone.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseClone.js"),u=4;function s(c){return t(c,u)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/cloneDeep.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseClone.js"),u=1,s=4;function c(r){return t(r,u|s)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/constant.js":function(E,T){function e(t){return function(){return t}}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/defaults.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),u=e("./node_modules/_lodash@4.17.20@lodash/eq.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js"),c=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js"),r=Object.prototype,h=r.hasOwnProperty,n=t(function(i,a){i=Object(i);var o=-1,l=a.length,f=l>2?a[2]:void 0;for(f&&s(a[0],a[1],f)&&(l=1);++o<l;)for(var v=a[o],b=c(v),g=-1,m=b.length;++g<m;){var _=b[g],M=i[_];(M===void 0||u(M,r[_])&&!h.call(i,_))&&(i[_]=v[_])}return i});E.exports=n},"./node_modules/_lodash@4.17.20@lodash/each.js":function(E,T,e){E.exports=e("./node_modules/_lodash@4.17.20@lodash/forEach.js")},"./node_modules/_lodash@4.17.20@lodash/eq.js":function(E,T){function e(t,u){return t===u||t!==t&&u!==u}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/filter.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayFilter.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseFilter.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function r(h,n){var i=c(h)?t:u;return i(h,s(n,3))}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/find.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_createFind.js"),u=e("./node_modules/_lodash@4.17.20@lodash/findIndex.js"),s=t(u);E.exports=s},"./node_modules/_lodash@4.17.20@lodash/findIndex.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFindIndex.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),s=e("./node_modules/_lodash@4.17.20@lodash/toInteger.js"),c=Math.max;function r(h,n,i){var a=h==null?0:h.length;if(!a)return-1;var o=i==null?0:s(i);return o<0&&(o=c(a+o,0)),t(h,u(n,3),o)}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/flatten.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js");function u(s){var c=s==null?0:s.length;return c?t(s,1):[]}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/forEach.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayEach.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseEach.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_castFunction.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function r(h,n){var i=c(h)?t:u;return i(h,s(n))}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/forIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFor.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_castFunction.js"),s=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function c(r,h){return r==null?r:t(r,u(h),s)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/get.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGet.js");function u(s,c,r){var h=s==null?void 0:t(s,c);return h===void 0?r:h}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/has.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseHas.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_hasPath.js");function s(c,r){return c!=null&&u(c,r,t)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/hasIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseHasIn.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_hasPath.js");function s(c,r){return c!=null&&u(c,r,t)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/identity.js":function(E,T){function e(t){return t}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/isArguments.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsArguments.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s=Object.prototype,c=s.hasOwnProperty,r=s.propertyIsEnumerable,h=t(function(){return arguments}())?t:function(n){return u(n)&&c.call(n,"callee")&&!r.call(n,"callee")};E.exports=h},"./node_modules/_lodash@4.17.20@lodash/isArray.js":function(E,T){var e=Array.isArray;E.exports=e},"./node_modules/_lodash@4.17.20@lodash/isArrayLike.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isLength.js");function s(c){return c!=null&&u(c.length)&&!t(c)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/isArrayLikeObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js");function s(c){return u(c)&&t(c)}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/isBuffer.js":function(E,T,e){(function(t){var u=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),s=e("./node_modules/_lodash@4.17.20@lodash/stubFalse.js"),c=T&&!T.nodeType&&T,r=c&&typeof t=="object"&&t&&!t.nodeType&&t,h=r&&r.exports===c,n=h?u.Buffer:void 0,i=n?n.isBuffer:void 0,a=i||s;t.exports=a}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/module.js")(E))},"./node_modules/_lodash@4.17.20@lodash/isEmpty.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseKeys.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArguments.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),r=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),n=e("./node_modules/_lodash@4.17.20@lodash/_isPrototype.js"),i=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js"),a="[object Map]",o="[object Set]",l=Object.prototype,f=l.hasOwnProperty;function v(b){if(b==null)return!0;if(r(b)&&(c(b)||typeof b=="string"||typeof b.splice=="function"||h(b)||i(b)||s(b)))return!b.length;var g=u(b);if(g==a||g==o)return!b.size;if(n(b))return!t(b).length;for(var m in b)if(f.call(b,m))return!1;return!0}E.exports=v},"./node_modules/_lodash@4.17.20@lodash/isFunction.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),s="[object AsyncFunction]",c="[object Function]",r="[object GeneratorFunction]",h="[object Proxy]";function n(i){if(!u(i))return!1;var a=t(i);return a==c||a==r||a==s||a==h}E.exports=n},"./node_modules/_lodash@4.17.20@lodash/isLength.js":function(E,T){var e=9007199254740991;function t(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=e}E.exports=t},"./node_modules/_lodash@4.17.20@lodash/isMap.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsMap.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js"),c=s&&s.isMap,r=c?u(c):t;E.exports=r},"./node_modules/_lodash@4.17.20@lodash/isObject.js":function(E,T){function e(t){var u=typeof t;return t!=null&&(u=="object"||u=="function")}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/isObjectLike.js":function(E,T){function e(t){return t!=null&&typeof t=="object"}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/isPlainObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),c="[object Object]",r=Function.prototype,h=Object.prototype,n=r.toString,i=h.hasOwnProperty,a=n.call(Object);function o(l){if(!s(l)||t(l)!=c)return!1;var f=u(l);if(f===null)return!0;var v=i.call(f,"constructor")&&f.constructor;return typeof v=="function"&&v instanceof v&&n.call(v)==a}E.exports=o},"./node_modules/_lodash@4.17.20@lodash/isSet.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsSet.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js"),c=s&&s.isSet,r=c?u(c):t;E.exports=r},"./node_modules/_lodash@4.17.20@lodash/isString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),c="[object String]";function r(h){return typeof h=="string"||!u(h)&&s(h)&&t(h)==c}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/isSymbol.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseGetTag.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isObjectLike.js"),s="[object Symbol]";function c(r){return typeof r=="symbol"||u(r)&&t(r)==s}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/isTypedArray.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseIsTypedArray.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseUnary.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_nodeUtil.js"),c=s&&s.isTypedArray,r=c?u(c):t;E.exports=r},"./node_modules/_lodash@4.17.20@lodash/isUndefined.js":function(E,T){function e(t){return t===void 0}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/keys.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayLikeKeys.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseKeys.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function c(r){return s(r)?t(r):u(r)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/keysIn.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayLikeKeys.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseKeysIn.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js");function c(r){return s(r)?t(r,!0):u(r)}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/last.js":function(E,T){function e(t){var u=t==null?0:t.length;return u?t[u-1]:void 0}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/map.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayMap.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseMap.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function r(h,n){var i=c(h)?t:s;return i(h,u(n,3))}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/mapValues.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseAssignValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js");function c(r,h){var n={};return h=s(h,3),u(r,function(i,a,o){t(n,a,h(i,a,o))}),n}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/max.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseGt.js"),s=e("./node_modules/_lodash@4.17.20@lodash/identity.js");function c(r){return r&&r.length?t(r,s,u):void 0}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/memoize.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_MapCache.js"),u="Expected a function";function s(c,r){if(typeof c!="function"||r!=null&&typeof r!="function")throw new TypeError(u);var h=function n(){var i=arguments,a=r?r.apply(this,i):i[0],o=n.cache;if(o.has(a))return o.get(a);var l=c.apply(this,i);return n.cache=o.set(a,l)||o,l};return h.cache=new(s.Cache||t),h}s.Cache=t,E.exports=s},"./node_modules/_lodash@4.17.20@lodash/merge.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseMerge.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_createAssigner.js"),s=u(function(c,r,h){t(c,r,h)});E.exports=s},"./node_modules/_lodash@4.17.20@lodash/min.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseLt.js"),s=e("./node_modules/_lodash@4.17.20@lodash/identity.js");function c(r){return r&&r.length?t(r,s,u):void 0}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/minBy.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseExtremum.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseLt.js");function c(r,h){return r&&r.length?t(r,u(h,2),s):void 0}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/noop.js":function(E,T){function e(){}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/now.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_root.js"),u=function(){return t.Date.now()};E.exports=u},"./node_modules/_lodash@4.17.20@lodash/pick.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_basePick.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_flatRest.js"),s=u(function(c,r){return c==null?{}:t(c,r)});E.exports=s},"./node_modules/_lodash@4.17.20@lodash/property.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseProperty.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_basePropertyDeep.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_isKey.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_toKey.js");function r(h){return s(h)?t(c(h)):u(h)}E.exports=r},"./node_modules/_lodash@4.17.20@lodash/range.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_createRange.js"),u=t();E.exports=u},"./node_modules/_lodash@4.17.20@lodash/reduce.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayReduce.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseEach.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseReduce.js"),r=e("./node_modules/_lodash@4.17.20@lodash/isArray.js");function h(n,i,a){var o=r(n)?t:c,l=arguments.length<3;return o(n,s(i,4),a,l,u)}E.exports=h},"./node_modules/_lodash@4.17.20@lodash/size.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseKeys.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_getTag.js"),s=e("./node_modules/_lodash@4.17.20@lodash/isArrayLike.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isString.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_stringSize.js"),h="[object Map]",n="[object Set]";function i(a){if(a==null)return 0;if(s(a))return c(a)?r(a):a.length;var o=u(a);return o==h||o==n?a.size:t(a).length}E.exports=i},"./node_modules/_lodash@4.17.20@lodash/sortBy.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseOrderBy.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_isIterateeCall.js"),r=s(function(h,n){if(h==null)return[];var i=n.length;return i>1&&c(h,n[0],n[1])?n=[]:i>2&&c(n[0],n[1],n[2])&&(n=[n[0]]),u(h,t(n,1),[])});E.exports=r},"./node_modules/_lodash@4.17.20@lodash/stubArray.js":function(E,T){function e(){return[]}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/stubFalse.js":function(E,T){function e(){return!1}E.exports=e},"./node_modules/_lodash@4.17.20@lodash/toFinite.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/toNumber.js"),u=1/0,s=17976931348623157e292;function c(r){if(!r)return r===0?r:0;if(r=t(r),r===u||r===-u){var h=r<0?-1:1;return h*s}return r===r?r:0}E.exports=c},"./node_modules/_lodash@4.17.20@lodash/toInteger.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/toFinite.js");function u(s){var c=t(s),r=c%1;return c===c?r?c-r:c:0}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/toNumber.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/isSymbol.js"),s=0/0,c=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,n=/^0o[0-7]+$/i,i=parseInt;function a(o){if(typeof o=="number")return o;if(u(o))return s;if(t(o)){var l=typeof o.valueOf=="function"?o.valueOf():o;o=t(l)?l+"":l}if(typeof o!="string")return o===0?o:+o;o=o.replace(c,"");var f=h.test(o);return f||n.test(o)?i(o.slice(2),f?2:8):r.test(o)?s:+o}E.exports=a},"./node_modules/_lodash@4.17.20@lodash/toPlainObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_copyObject.js"),u=e("./node_modules/_lodash@4.17.20@lodash/keysIn.js");function s(c){return t(c,u(c))}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/toString.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseToString.js");function u(s){return s==null?"":t(s)}E.exports=u},"./node_modules/_lodash@4.17.20@lodash/transform.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_arrayEach.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseCreate.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseForOwn.js"),c=e("./node_modules/_lodash@4.17.20@lodash/_baseIteratee.js"),r=e("./node_modules/_lodash@4.17.20@lodash/_getPrototype.js"),h=e("./node_modules/_lodash@4.17.20@lodash/isArray.js"),n=e("./node_modules/_lodash@4.17.20@lodash/isBuffer.js"),i=e("./node_modules/_lodash@4.17.20@lodash/isFunction.js"),a=e("./node_modules/_lodash@4.17.20@lodash/isObject.js"),o=e("./node_modules/_lodash@4.17.20@lodash/isTypedArray.js");function l(f,v,b){var g=h(f),m=g||n(f)||o(f);if(v=c(v,4),b==null){var _=f&&f.constructor;m?b=g?new _:[]:a(f)?b=i(_)?u(r(f)):{}:b={}}return(m?t:s)(f,function(M,x,y){return v(b,M,x,y)}),b}E.exports=l},"./node_modules/_lodash@4.17.20@lodash/union.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseFlatten.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseRest.js"),s=e("./node_modules/_lodash@4.17.20@lodash/_baseUniq.js"),c=e("./node_modules/_lodash@4.17.20@lodash/isArrayLikeObject.js"),r=u(function(h){return s(t(h,1,c,!0))});E.exports=r},"./node_modules/_lodash@4.17.20@lodash/uniqueId.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/toString.js"),u=0;function s(c){var r=++u;return t(c)+r}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/values.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_baseValues.js"),u=e("./node_modules/_lodash@4.17.20@lodash/keys.js");function s(c){return c==null?[]:t(c,u(c))}E.exports=s},"./node_modules/_lodash@4.17.20@lodash/zipObject.js":function(E,T,e){var t=e("./node_modules/_lodash@4.17.20@lodash/_assignValue.js"),u=e("./node_modules/_lodash@4.17.20@lodash/_baseZipObject.js");function s(c,r){return u(c||[],r||[],t)}E.exports=s},"./node_modules/_parse-svg-path@0.1.2@parse-svg-path/index.js":function(E,T){E.exports=u;var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function u(r){var h=[];return r.replace(t,function(n,i,a){var o=i.toLowerCase();for(a=c(a),o=="m"&&a.length>2&&(h.push([i].concat(a.splice(0,2))),o="l",i=i=="m"?"l":"L");;){if(a.length==e[o])return a.unshift(i),h.push(a);if(a.length<e[o])throw new Error("malformed path data");h.push([i].concat(a.splice(0,e[o])))}}),h}var s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function c(r){var h=r.match(s);return h?h.map(Number):[]}},"./node_modules/_point-at-length@1.1.0@point-at-length/index.js":function(E,T,e){var t=e("./node_modules/_parse-svg-path@0.1.2@parse-svg-path/index.js"),u=e("./node_modules/_isarray@0.0.1@isarray/index.js"),s=e("./node_modules/_abs-svg-path@0.1.1@abs-svg-path/index.js");E.exports=c;function c(i){if(!(this instanceof c))return new c(i);this._path=u(i)?i:t(i),this._path=s(this._path),this._path=n(this._path),this._path=h(this._path)}c.prototype.at=function(i,a){return this._walk(i,a).pos},c.prototype.length=function(){return this._walk(null).length},c.prototype._walk=function(i,a){for(var o=[0,0],l=[0,0,0],f=[0,0],v=0,b=0;b<this._path.length;b++){var g=this._path[b];if(g[0]==="M"){if(o[0]=g[1],o[1]=g[2],i===0)return{length:v,pos:o}}else if(g[0]==="C"){l[0]=f[0]=o[0],l[1]=f[1]=o[1],l[2]=v;for(var m=100,_=0;_<=m;_++){var M=_/m,x=A(g,M),y=O(g,M);if(v+=r(o[0],o[1],x,y),o[0]=x,o[1]=y,typeof i=="number"&&v>=i){var S=(v-i)/(v-l[2]),P=[o[0]*(1-S)+l[0]*S,o[1]*(1-S)+l[1]*S];return{length:v,pos:P}}l[0]=o[0],l[1]=o[1],l[2]=v}}else if(g[0]==="Q"){l[0]=f[0]=o[0],l[1]=f[1]=o[1],l[2]=v;for(var m=100,_=0;_<=m;_++){var M=_/m,x=L(g,M),y=H(g,M);if(v+=r(o[0],o[1],x,y),o[0]=x,o[1]=y,typeof i=="number"&&v>=i){var S=(v-i)/(v-l[2]),P=[o[0]*(1-S)+l[0]*S,o[1]*(1-S)+l[1]*S];return{length:v,pos:P}}l[0]=o[0],l[1]=o[1],l[2]=v}}else if(g[0]==="L"){if(l[0]=o[0],l[1]=o[1],l[2]=v,v+=r(o[0],o[1],g[1],g[2]),o[0]=g[1],o[1]=g[2],typeof i=="number"&&v>=i){var S=(v-i)/(v-l[2]),P=[o[0]*(1-S)+l[0]*S,o[1]*(1-S)+l[1]*S];return{length:v,pos:P}}l[0]=o[0],l[1]=o[1],l[2]=v}}return{length:v,pos:o};function A(F,Z){return Math.pow(1-Z,3)*f[0]+3*Math.pow(1-Z,2)*Z*F[1]+3*(1-Z)*Math.pow(Z,2)*F[3]+Math.pow(Z,3)*F[5]}function O(F,Z){return Math.pow(1-Z,3)*f[1]+3*Math.pow(1-Z,2)*Z*F[2]+3*(1-Z)*Math.pow(Z,2)*F[4]+Math.pow(Z,3)*F[6]}function L(F,Z){return Math.pow(1-Z,2)*f[0]+2*(1-Z)*Z*F[1]+Math.pow(Z,2)*F[3]}function H(F,Z){return Math.pow(1-Z,2)*f[1]+2*(1-Z)*Z*F[2]+Math.pow(Z,2)*F[4]}};function r(i,a,o,l){var f=i-o,v=a-l;return Math.sqrt(f*f+v*v)}function h(i){for(var a,o=0,l=0,f={S:{to:"C",x:3},T:{to:"Q",x:1}},v=0,b=i.length;v<b;v++){var g=i[v],m=f[g[0]];m&&(g[0]=m.to,a&&(a[0]===m.to?(o=2*a[m.x+2]-a[m.x],l=2*a[m.x+3]-a[m.x+1]):(o=a[a.length-2],l=a[a.length-1])),g.splice(1,0,o,l)),a=g}return i}function n(i){for(var a=[],o=["L",0,0],l,f=0,v=i.length;f<v;f++){var b=i[f];switch(b[0]){case"M":o=["L",b[1],b[2]],a.push(b);break;case"Z":a.push(o);break;case"H":l=a[a.length-1]||["L",0,0],a.push(["L",b[1],l[l.length-1]]);break;case"V":l=a[a.length-1]||["L",0,0],a.push(["L",l[l.length-2],b[1]]);break;default:a.push(b)}}return a}},"./node_modules/_regression@2.0.1@regression/dist/regression.js":function(E,T,e){var t,u,s;(function(c,r){if(!0)u=[E],t=r,s=typeof t=="function"?t.apply(T,u):t,s!==void 0&&(E.exports=s);else var h})(this,function(c){"use strict";function r(b,g,m){return g in b?Object.defineProperty(b,g,{value:m,enumerable:!0,configurable:!0,writable:!0}):b[g]=m,b}var h=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var m=arguments[g];for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&(b[_]=m[_])}return b};function n(b){if(Array.isArray(b)){for(var g=0,m=Array(b.length);g<b.length;g++)m[g]=b[g];return m}else return Array.from(b)}var i={order:2,precision:2,period:null};function a(b,g){var m=[],_=[];b.forEach(function(P,A){P[1]!==null&&(_.push(P),m.push(g[A]))});var M=_.reduce(function(P,A){return P+A[1]},0),x=M/_.length,y=_.reduce(function(P,A){var O=A[1]-x;return P+O*O},0),S=_.reduce(function(P,A,O){var L=m[O],H=A[1]-L[1];return P+H*H},0);return 1-S/y}function o(b,g){for(var m=b,_=b.length-1,M=[g],x=0;x<_;x++){for(var y=x,S=x+1;S<_;S++)Math.abs(m[x][S])>Math.abs(m[x][y])&&(y=S);for(var P=x;P<_+1;P++){var A=m[P][x];m[P][x]=m[P][y],m[P][y]=A}for(var O=x+1;O<_;O++)for(var L=_;L>=x;L--)m[L][O]-=m[L][x]*m[x][O]/m[x][x]}for(var H=_-1;H>=0;H--){for(var F=0,Z=H+1;Z<_;Z++)F+=m[Z][H]*M[Z];M[H]=(m[_][H]-F)/m[H][H]}return M}function l(b,g){var m=Math.pow(10,g);return Math.round(b*m)/m}var f={linear:function(g,m){for(var _=[0,0,0,0,0],M=0,x=0;x<g.length;x++)g[x][1]!==null&&(M++,_[0]+=g[x][0],_[1]+=g[x][1],_[2]+=g[x][0]*g[x][0],_[3]+=g[x][0]*g[x][1],_[4]+=g[x][1]*g[x][1]);var y=M*_[2]-_[0]*_[0],S=M*_[3]-_[0]*_[1],P=y===0?0:l(S/y,m.precision),A=l(_[1]/M-P*_[0]/M,m.precision),O=function(F){return[l(F,m.precision),l(P*F+A,m.precision)]},L=g.map(function(H){return O(H[0])});return{points:L,predict:O,equation:[P,A],r2:l(a(g,L),m.precision),string:A===0?"y = "+P+"x":"y = "+P+"x + "+A}},exponential:function(g,m){for(var _=[0,0,0,0,0,0],M=0;M<g.length;M++)g[M][1]!==null&&(_[0]+=g[M][0],_[1]+=g[M][1],_[2]+=g[M][0]*g[M][0]*g[M][1],_[3]+=g[M][1]*Math.log(g[M][1]),_[4]+=g[M][0]*g[M][1]*Math.log(g[M][1]),_[5]+=g[M][0]*g[M][1]);var x=_[1]*_[2]-_[5]*_[5],y=Math.exp((_[2]*_[3]-_[5]*_[4])/x),S=(_[1]*_[4]-_[5]*_[3])/x,P=l(y,m.precision),A=l(S,m.precision),O=function(F){return[l(F,m.precision),l(P*Math.exp(A*F),m.precision)]},L=g.map(function(H){return O(H[0])});return{points:L,predict:O,equation:[P,A],string:"y = "+P+"e^("+A+"x)",r2:l(a(g,L),m.precision)}},logarithmic:function(g,m){for(var _=[0,0,0,0],M=g.length,x=0;x<M;x++)g[x][1]!==null&&(_[0]+=Math.log(g[x][0]),_[1]+=g[x][1]*Math.log(g[x][0]),_[2]+=g[x][1],_[3]+=Math.pow(Math.log(g[x][0]),2));var y=(M*_[1]-_[2]*_[0])/(M*_[3]-_[0]*_[0]),S=l(y,m.precision),P=l((_[2]-S*_[0])/M,m.precision),A=function(H){return[l(H,m.precision),l(l(P+S*Math.log(H),m.precision),m.precision)]},O=g.map(function(L){return A(L[0])});return{points:O,predict:A,equation:[P,S],string:"y = "+P+" + "+S+" ln(x)",r2:l(a(g,O),m.precision)}},power:function(g,m){for(var _=[0,0,0,0,0],M=g.length,x=0;x<M;x++)g[x][1]!==null&&(_[0]+=Math.log(g[x][0]),_[1]+=Math.log(g[x][1])*Math.log(g[x][0]),_[2]+=Math.log(g[x][1]),_[3]+=Math.pow(Math.log(g[x][0]),2));var y=(M*_[1]-_[0]*_[2])/(M*_[3]-Math.pow(_[0],2)),S=(_[2]-y*_[0])/M,P=l(Math.exp(S),m.precision),A=l(y,m.precision),O=function(F){return[l(F,m.precision),l(l(P*Math.pow(F,A),m.precision),m.precision)]},L=g.map(function(H){return O(H[0])});return{points:L,predict:O,equation:[P,A],string:"y = "+P+"x^"+A,r2:l(a(g,L),m.precision)}},polynomial:function(g,m){for(var _=[],M=[],x=0,y=0,S=g.length,P=m.order+1,A=0;A<P;A++){for(var O=0;O<S;O++)g[O][1]!==null&&(x+=Math.pow(g[O][0],A)*g[O][1]);_.push(x),x=0;for(var L=[],H=0;H<P;H++){for(var F=0;F<S;F++)g[F][1]!==null&&(y+=Math.pow(g[F][0],A+H));L.push(y),y=0}M.push(L)}M.push(_);for(var Z=o(M,P).map(function(rt){return l(rt,m.precision)}),G=function(ft){return[l(ft,m.precision),l(Z.reduce(function(dt,ut,Lt){return dt+ut*Math.pow(ft,Lt)},0),m.precision)]},U=g.map(function(rt){return G(rt[0])}),Y="y = ",J=Z.length-1;J>=0;J--)J>1?Y+=Z[J]+"x^"+J+" + ":J===1?Y+=Z[J]+"x + ":Y+=Z[J];return{string:Y,points:U,predict:G,equation:[].concat(n(Z)).reverse(),r2:l(a(g,U),m.precision)}}};function v(){var b=function(m,_){return h({_round:l},m,r({},_,function(M,x){return f[_](M,h({},i,x))}))};return Object.keys(f).reduce(b,{})}c.exports=v()})},"./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";function u(k){if(k.length===0)return 0;for(var ot,it=k[0],X=0,Et=1;Et<k.length;Et++)ot=it+k[Et],Math.abs(it)>=Math.abs(k[Et])?X+=it-ot+k[Et]:X+=k[Et]-ot+it,it=ot;return it+X}function s(k){if(k.length===0)throw new Error("mean requires at least one data point");return u(k)/k.length}function c(k,ot){var it,X,Et=s(k),vt=0;if(ot===2)for(X=0;X<k.length;X++)vt+=(it=k[X]-Et)*it;else for(X=0;X<k.length;X++)vt+=Math.pow(k[X]-Et,ot);return vt}function r(k){if(k.length===0)throw new Error("variance requires at least one data point");return c(k,2)/k.length}function h(k){if(k.length===1)return 0;var ot=r(k);return Math.sqrt(ot)}function n(k){if(k.length===0)throw new Error("mode requires at least one data point");if(k.length===1)return k[0];for(var ot=k[0],it=NaN,X=0,Et=1,vt=1;vt<k.length+1;vt++)k[vt]!==ot?(X<Et&&(X=Et,it=ot),Et=1,ot=k[vt]):Et++;return it}function i(k){return k.slice().sort(function(ot,it){return ot-it})}function a(k){if(k.length===0)throw new Error("min requires at least one data point");for(var ot=k[0],it=1;it<k.length;it++)k[it]<ot&&(ot=k[it]);return ot}function o(k){if(k.length===0)throw new Error("max requires at least one data point");for(var ot=k[0],it=1;it<k.length;it++)k[it]>ot&&(ot=k[it]);return ot}function l(k,ot){var it=k.length*ot;if(k.length===0)throw new Error("quantile requires at least one data point.");if(ot<0||1<ot)throw new Error("quantiles must be between 0 and 1");return ot===1?k[k.length-1]:ot===0?k[0]:it%1!=0?k[Math.ceil(it)-1]:k.length%2==0?(k[it-1]+k[it])/2:k[it]}function f(k,ot,it,X){for(it=it||0,X=X||k.length-1;it<X;){if(600<X-it){var Et=X-it+1,vt=ot-it+1,Nt=Math.log(Et),$t=.5*Math.exp(2*Nt/3),ee=.5*Math.sqrt(Nt*$t*(Et-$t)/Et);vt-Et/2<0&&(ee*=-1),f(k,ot,Math.max(it,Math.floor(ot-vt*$t/Et+ee)),Math.min(X,Math.floor(ot+(Et-vt)*$t/Et+ee)))}var kt=k[ot],Wt=it,ae=X;for(v(k,it,ot),k[X]>kt&&v(k,it,X);Wt<ae;){for(v(k,Wt,ae),Wt++,ae--;k[Wt]<kt;)Wt++;for(;k[ae]>kt;)ae--}k[it]===kt?v(k,it,ae):v(k,++ae,X),ae<=ot&&(it=ae+1),ot<=ae&&(X=ae-1)}}function v(k,ot,it){var X=k[ot];k[ot]=k[it],k[it]=X}function b(k,ot){var it=k.slice();if(Array.isArray(ot)){(function(vt,Nt){for(var $t=[0],ee=0;ee<Nt.length;ee++)$t.push(_(vt.length,Nt[ee]));$t.push(vt.length-1),$t.sort(m);for(var kt=[0,$t.length-1];kt.length;){var Wt=Math.ceil(kt.pop()),ae=Math.floor(kt.pop());if(!(Wt-ae<=1)){var le=Math.floor((ae+Wt)/2);g(vt,$t[le],$t[ae],$t[Wt]),kt.push(ae,le,le,Wt)}}})(it,ot);for(var X=[],Et=0;Et<ot.length;Et++)X[Et]=l(it,ot[Et]);return X}return g(it,_(it.length,ot),0,it.length-1),l(it,ot)}function g(k,ot,it,X){ot%1==0?f(k,ot,it,X):(f(k,ot=Math.floor(ot),it,X),f(k,ot+1,ot+1,X))}function m(k,ot){return k-ot}function _(k,ot){var it=k*ot;return ot===1?k-1:ot===0?0:it%1!=0?Math.ceil(it)-1:k%2==0?it-.5:it}function M(k,ot){if(ot<k[0])return 0;if(ot>k[k.length-1])return 1;var it=function(vt,Nt){for(var $t=0,ee=0,kt=vt.length;ee<kt;)Nt<=vt[$t=ee+kt>>>1]?kt=$t:ee=-~$t;return ee}(k,ot);if(k[it]!==ot)return it/k.length;it++;var X=function(vt,Nt){for(var $t=0,ee=0,kt=vt.length;ee<kt;)Nt>=vt[$t=ee+kt>>>1]?ee=-~$t:kt=$t;return ee}(k,ot);if(X===it)return it/k.length;var Et=X-it+1;return Et*(X+it)/2/Et/k.length}function x(k){var ot=b(k,.75),it=b(k,.25);if(typeof ot=="number"&&typeof it=="number")return ot-it}function y(k){return+b(k,.5)}function S(k){for(var ot=y(k),it=[],X=0;X<k.length;X++)it.push(Math.abs(k[X]-ot));return y(it)}function P(k,ot){ot=ot||Math.random;for(var it,X,Et=k.length;0<Et;)X=Math.floor(ot()*Et--),it=k[Et],k[Et]=k[X],k[X]=it;return k}function A(k,ot){return P(k.slice().slice(),ot)}function O(k){for(var ot,it=0,X=0;X<k.length;X++)X!==0&&k[X]===ot||(ot=k[X],it++);return it}function L(k,ot){for(var it=[],X=0;X<k;X++){for(var Et=[],vt=0;vt<ot;vt++)Et.push(0);it.push(Et)}return it}function H(k,ot,it,X){var Et;if(0<k){var vt=(it[ot]-it[k-1])/(ot-k+1);Et=X[ot]-X[k-1]-(ot-k+1)*vt*vt}else Et=X[ot]-it[ot]*it[ot]/(ot+1);return Et<0?0:Et}function F(k,ot,it,X,Et,vt,Nt){if(!(ot<k)){var $t=Math.floor((k+ot)/2);X[it][$t]=X[it-1][$t-1],Et[it][$t]=$t;var ee=it;it<k&&(ee=Math.max(ee,Et[it][k-1]||0)),ee=Math.max(ee,Et[it-1][$t]||0);var kt,Wt,ae,le=$t-1;ot<X.length-1&&(le=Math.min(le,Et[it][ot+1]||0));for(var je=le;ee<=je&&!((kt=H(je,$t,vt,Nt))+X[it-1][ee-1]>=X[it][$t]);--je)(Wt=H(ee,$t,vt,Nt)+X[it-1][ee-1])<X[it][$t]&&(X[it][$t]=Wt,Et[it][$t]=ee),ee++,(ae=kt+X[it-1][je-1])<X[it][$t]&&(X[it][$t]=ae,Et[it][$t]=je);F(k,$t-1,it,X,Et,vt,Nt),F($t+1,ot,it,X,Et,vt,Nt)}}function Z(k,ot){if(k.length!==ot.length)throw new Error("sampleCovariance requires samples with equal lengths");if(k.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var it=s(k),X=s(ot),Et=0,vt=0;vt<k.length;vt++)Et+=(k[vt]-it)*(ot[vt]-X);return Et/(k.length-1)}function G(k){if(k.length<2)throw new Error("sampleVariance requires at least two data points");return c(k,2)/(k.length-1)}function U(k){var ot=G(k);return Math.sqrt(ot)}function Y(k,ot,it,X){return(k*ot+it*X)/(ot+X)}function J(k){if(k.length===0)throw new Error("rootMeanSquare requires at least one data point");for(var ot=0,it=0;it<k.length;it++)ot+=Math.pow(k[it],2);return Math.sqrt(ot/k.length)}function rt(){this.totalCount=0,this.data={}}function ft(){this.weights=[],this.bias=0}rt.prototype.train=function(k,ot){for(var it in this.data[ot]||(this.data[ot]={}),k){var X=k[it];this.data[ot][it]===void 0&&(this.data[ot][it]={}),this.data[ot][it][X]===void 0&&(this.data[ot][it][X]=0),this.data[ot][it][X]++}this.totalCount++},rt.prototype.score=function(k){var ot,it={};for(var X in k){var Et=k[X];for(ot in this.data)it[ot]={},this.data[ot][X]?it[ot][X+"_"+Et]=(this.data[ot][X][Et]||0)/this.totalCount:it[ot][X+"_"+Et]=0}var vt={};for(ot in it)for(var Nt in vt[ot]=0,it[ot])vt[ot]+=it[ot][Nt];return vt},ft.prototype.predict=function(k){if(k.length!==this.weights.length)return null;for(var ot=0,it=0;it<this.weights.length;it++)ot+=this.weights[it]*k[it];return 0<(ot+=this.bias)?1:0},ft.prototype.train=function(k,ot){if(ot!==0&&ot!==1)return null;k.length!==this.weights.length&&(this.weights=k,this.bias=1);var it=this.predict(k);if(it!==ot){for(var X=ot-it,Et=0;Et<this.weights.length;Et++)this.weights[Et]+=X*k[Et];this.bias+=X}return this};var dt=1e-4;function ut(k){if(k<0)throw new Error("factorial requires a non-negative value");if(Math.floor(k)!==k)throw new Error("factorial requires an integer input");for(var ot=1,it=2;it<=k;it++)ot*=it;return ot}var Lt=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],Ft=Math.log(Math.sqrt(2*Math.PI)),Ot={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},St=Math.sqrt(2*Math.PI),xt={gaussian:function(ot){return Math.exp(-.5*ot*ot)/St}},At={nrd:function(ot){var it=U(ot),X=x(ot);return typeof X=="number"&&(it=Math.min(it,X/1.34)),1.06*it*Math.pow(ot.length,-.2)}};function nt(k,ot,it){var X,Et;if(ot===void 0)X=xt.gaussian;else if(typeof ot=="string"){if(!xt[ot])throw new Error('Unknown kernel "'+ot+'"');X=xt[ot]}else X=ot;if(it===void 0)Et=At.nrd(k);else if(typeof it=="string"){if(!At[it])throw new Error('Unknown bandwidth method "'+it+'"');Et=At[it](k)}else Et=it;return function(vt){var Nt=0,$t=0;for(Nt=0;Nt<k.length;Nt++)$t+=X((vt-k[Nt])/Et);return $t/Et/k.length}}var Mt=Math.sqrt(2*Math.PI);function z(k){for(var ot=k,it=k,X=1;X<15;X++)ot+=it*=k*k/(2*X+1);return Math.round(1e4*(.5+ot/Mt*Math.exp(-k*k/2)))/1e4}for(var Q=[],ht=0;ht<=3.09;ht+=.01)Q.push(z(ht));function et(k){var ot=1/(1+.5*Math.abs(k)),it=ot*Math.exp(-Math.pow(k,2)-1.26551223+1.00002368*ot+.37409196*Math.pow(ot,2)+.09678418*Math.pow(ot,3)-.18628806*Math.pow(ot,4)+.27886807*Math.pow(ot,5)-1.13520398*Math.pow(ot,6)+1.48851587*Math.pow(ot,7)-.82215223*Math.pow(ot,8)+.17087277*Math.pow(ot,9));return 0<=k?1-it:it-1}function at(k){var ot=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),it=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*ot)+Math.log(1-k*k)/2,2)-Math.log(1-k*k)/ot)-(2/(Math.PI*ot)+Math.log(1-k*k)/2));return 0<=k?it:-it}function gt(k){if(typeof k=="number")return k<0?-1:k===0?0:1;throw new TypeError("not a number")}t.linearRegression=function(k){var ot,it,X=k.length;if(X===1)it=k[ot=0][1];else{for(var Et,vt,Nt,$t=0,ee=0,kt=0,Wt=0,ae=0;ae<X;ae++)$t+=vt=(Et=k[ae])[0],ee+=Nt=Et[1],kt+=vt*vt,Wt+=vt*Nt;it=ee/X-(ot=(X*Wt-$t*ee)/(X*kt-$t*$t))*$t/X}return{m:ot,b:it}},t.linearRegressionLine=function(k){return function(ot){return k.b+k.m*ot}},t.standardDeviation=h,t.rSquared=function(k,ot){if(k.length<2)return 1;for(var it,X=0,Et=0;Et<k.length;Et++)X+=k[Et][1];it=X/k.length;for(var vt=0,Nt=0;Nt<k.length;Nt++)vt+=Math.pow(it-k[Nt][1],2);for(var $t=0,ee=0;ee<k.length;ee++)$t+=Math.pow(k[ee][1]-ot(k[ee][0]),2);return 1-$t/vt},t.mode=function(k){return n(i(k))},t.modeFast=function(k){for(var ot,it=new Map,X=0,Et=0;Et<k.length;Et++){var vt=it.get(k[Et]);vt===void 0?vt=1:vt++,X<vt&&(ot=k[Et],X=vt),it.set(k[Et],vt)}if(X===0)throw new Error("mode requires at last one data point");return ot},t.modeSorted=n,t.min=a,t.max=o,t.extent=function(k){if(k.length===0)throw new Error("extent requires at least one data point");for(var ot=k[0],it=k[0],X=1;X<k.length;X++)k[X]>it&&(it=k[X]),k[X]<ot&&(ot=k[X]);return[ot,it]},t.minSorted=function(k){return k[0]},t.maxSorted=function(k){return k[k.length-1]},t.extentSorted=function(k){return[k[0],k[k.length-1]]},t.sum=u,t.sumSimple=function(k){for(var ot=0,it=0;it<k.length;it++)ot+=k[it];return ot},t.product=function(k){for(var ot=1,it=0;it<k.length;it++)ot*=k[it];return ot},t.quantile=b,t.quantileSorted=l,t.quantileRank=function(k,ot){return M(i(k),ot)},t.quantileRankSorted=M,t.interquartileRange=x,t.iqr=x,t.medianAbsoluteDeviation=S,t.mad=S,t.chunk=function(k,ot){var it=[];if(ot<1)throw new Error("chunk size must be a positive number");if(Math.floor(ot)!==ot)throw new Error("chunk size must be an integer");for(var X=0;X<k.length;X+=ot)it.push(k.slice(X,X+ot));return it},t.sampleWithReplacement=function(k,ot,it){if(k.length===0)return[];it=it||Math.random;for(var X=k.length,Et=[],vt=0;vt<ot;vt++){var Nt=Math.floor(it()*X);Et.push(k[Nt])}return Et},t.shuffle=A,t.shuffleInPlace=P,t.sample=function(k,ot,it){return A(k,it).slice(0,ot)},t.ckmeans=function(k,ot){if(ot>k.length)throw new Error("cannot generate more classes than there are data values");var it=i(k);if(O(it)===1)return[it];var X=L(ot,it.length),Et=L(ot,it.length);(function(kt,Wt,ae){for(var le,je=Wt[0].length,Oe=kt[Math.floor(je/2)],We=[],Ye=[],wn=0;wn<je;++wn)le=kt[wn]-Oe,wn===0?(We.push(le),Ye.push(le*le)):(We.push(We[wn-1]+le),Ye.push(Ye[wn-1]+le*le)),Wt[0][wn]=H(0,wn,We,Ye),ae[0][wn]=0;for(var er=1;er<Wt.length;++er)F(er<Wt.length-1?er:je-1,je-1,er,Wt,ae,We,Ye)})(it,X,Et);for(var vt=[],Nt=Et[0].length-1,$t=Et.length-1;0<=$t;$t--){var ee=Et[$t][Nt];vt[$t]=it.slice(ee,Nt+1),0<$t&&(Nt=ee-1)}return vt},t.uniqueCountSorted=O,t.sumNthPowerDeviations=c,t.equalIntervalBreaks=function(k,ot){if(k.length<2)return k;for(var it=a(k),X=o(k),Et=[it],vt=(X-it)/ot,Nt=1;Nt<ot;Nt++)Et.push(Et[0]+vt*Nt);return Et.push(X),Et},t.sampleCovariance=Z,t.sampleCorrelation=function(k,ot){return Z(k,ot)/U(k)/U(ot)},t.sampleVariance=G,t.sampleStandardDeviation=U,t.sampleSkewness=function(k){if(k.length<3)throw new Error("sampleSkewness requires at least three data points");for(var ot,it=s(k),X=0,Et=0,vt=0;vt<k.length;vt++)X+=(ot=k[vt]-it)*ot,Et+=ot*ot*ot;var Nt=k.length-1,$t=Math.sqrt(X/Nt),ee=k.length;return ee*Et/((ee-1)*(ee-2)*Math.pow($t,3))},t.sampleKurtosis=function(k){var ot=k.length;if(ot<4)throw new Error("sampleKurtosis requires at least four data points");for(var it,X=s(k),Et=0,vt=0,Nt=0;Nt<ot;Nt++)Et+=(it=k[Nt]-X)*it,vt+=it*it*it*it;return(ot-1)/((ot-2)*(ot-3))*(ot*(ot+1)*vt/(Et*Et)-3*(ot-1))},t.permutationsHeap=function(k){for(var ot=new Array(k.length),it=[k.slice()],X=0;X<k.length;X++)ot[X]=0;for(X=0;X<k.length;)if(ot[X]<X){var Et=0;X%2!=0&&(Et=ot[X]);var vt=k[Et];k[Et]=k[X],k[X]=vt,it.push(k.slice()),ot[X]++,X=0}else ot[X]=0,X++;return it},t.combinations=function k(ot,it){var X,Et,vt,Nt,$t=[];for(X=0;X<ot.length;X++)if(it===1)$t.push([ot[X]]);else for(vt=k(ot.slice(X+1,ot.length),it-1),Et=0;Et<vt.length;Et++)(Nt=vt[Et]).unshift(ot[X]),$t.push(Nt);return $t},t.combinationsReplacement=function k(ot,it){for(var X=[],Et=0;Et<ot.length;Et++)if(it===1)X.push([ot[Et]]);else for(var vt=k(ot.slice(Et,ot.length),it-1),Nt=0;Nt<vt.length;Nt++)X.push([ot[Et]].concat(vt[Nt]));return X},t.addToMean=function(k,ot,it){return k+(it-k)/(ot+1)},t.combineMeans=Y,t.combineVariances=function(k,ot,it,X,Et,vt){var Nt=Y(ot,it,Et,vt);return(it*(k+Math.pow(ot-Nt,2))+vt*(X+Math.pow(Et-Nt,2)))/(it+vt)},t.geometricMean=function(k){if(k.length===0)throw new Error("geometricMean requires at least one data point");for(var ot=1,it=0;it<k.length;it++){if(k[it]<=0)throw new Error("geometricMean requires only positive numbers as input");ot*=k[it]}return Math.pow(ot,1/k.length)},t.harmonicMean=function(k){if(k.length===0)throw new Error("harmonicMean requires at least one data point");for(var ot=0,it=0;it<k.length;it++){if(k[it]<=0)throw new Error("harmonicMean requires only positive numbers as input");ot+=1/k[it]}return k.length/ot},t.average=s,t.mean=s,t.median=y,t.medianSorted=function(k){return l(k,.5)},t.subtractFromMean=function(k,ot,it){return(k*ot-it)/(ot-1)},t.rootMeanSquare=J,t.rms=J,t.variance=r,t.tTest=function(k,ot){return(s(k)-ot)/(h(k)/Math.sqrt(k.length))},t.tTestTwoSample=function(k,ot,it){var X=k.length,Et=ot.length;if(!X||!Et)return null;it||(it=0);var vt=s(k),Nt=s(ot),$t=G(k),ee=G(ot);if(typeof vt=="number"&&typeof Nt=="number"&&typeof $t=="number"&&typeof ee=="number"){var kt=((X-1)*$t+(Et-1)*ee)/(X+Et-2);return(vt-Nt-it)/Math.sqrt(kt*(1/X+1/Et))}},t.BayesianClassifier=rt,t.bayesian=rt,t.PerceptronModel=ft,t.perceptron=ft,t.epsilon=dt,t.factorial=ut,t.gamma=function k(ot){if(typeof(it=ot)=="number"&&isFinite(it)&&Math.floor(it)===it)return ot<=0?NaN:ut(ot-1);var it;if(--ot<0)return Math.PI/(Math.sin(Math.PI*-ot)*k(-ot));var X=ot+.25;return Math.pow(ot/Math.E,ot)*Math.sqrt(2*Math.PI*(ot+1/6))*(1+1/144/Math.pow(X,2)-1/12960/Math.pow(X,3)-257/207360/Math.pow(X,4)-52/2612736/Math.pow(X,5)+5741173/9405849600/Math.pow(X,6)+37529/18811699200/Math.pow(X,7))},t.gammaln=function(k){if(k<=0)return 1/0;k--;for(var ot=Lt[0],it=1;it<15;it++)ot+=Lt[it]/(k+it);var X=5.2421875+k;return Ft+Math.log(ot)-X+(k+.5)*Math.log(X)},t.bernoulliDistribution=function(k){if(k<0||1<k)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-k,k]},t.binomialDistribution=function(k,ot){if(!(ot<0||1<ot||k<=0||k%1!=0)){for(var it=0,X=0,Et=[],vt=1;Et[it]=vt*Math.pow(ot,it)*Math.pow(1-ot,k-it),X+=Et[it],vt=vt*(k-++it+1)/it,X<1-dt;);return Et}},t.poissonDistribution=function(k){if(!(k<=0)){for(var ot=0,it=0,X=[],Et=1;X[ot]=Math.exp(-k)*Math.pow(k,ot)/Et,it+=X[ot],Et*=++ot,it<1-dt;);return X}},t.chiSquaredDistributionTable=Ot,t.chiSquaredGoodnessOfFit=function(k,ot,it){for(var X,Et,vt=0,Nt=ot(s(k)),$t=[],ee=[],kt=0;kt<k.length;kt++)$t[k[kt]]===void 0&&($t[k[kt]]=0),$t[k[kt]]++;for(kt=0;kt<$t.length;kt++)$t[kt]===void 0&&($t[kt]=0);for(Et in Nt)Et in $t&&(ee[+Et]=Nt[Et]*k.length);for(Et=ee.length-1;0<=Et;Et--)ee[Et]<3&&(ee[Et-1]+=ee[Et],ee.pop(),$t[Et-1]+=$t[Et],$t.pop());for(Et=0;Et<$t.length;Et++)vt+=Math.pow($t[Et]-ee[Et],2)/ee[Et];return X=$t.length-1-1,Ot[X][it]<vt},t.kernelDensityEstimation=nt,t.kde=nt,t.zScore=function(k,ot,it){return(k-ot)/it},t.cumulativeStdNormalProbability=function(k){var ot=Math.abs(k),it=Math.min(Math.round(100*ot),Q.length-1);return 0<=k?Q[it]:+(1-Q[it]).toFixed(4)},t.standardNormalTable=Q,t.errorFunction=et,t.erf=et,t.inverseErrorFunction=at,t.probit=function(k){return k===0?k=dt:1<=k&&(k=1-dt),Math.sqrt(2)*at(2*k-1)},t.permutationTest=function(k,ot,it,X){if(X===void 0&&(X=1e4),it===void 0&&(it="two_side"),it!=="two_side"&&it!=="greater"&&it!=="less")throw new Error("`alternative` must be either 'two_side', 'greater', or 'less'");for(var Et=s(k)-s(ot),vt=new Array(X),Nt=k.concat(ot),$t=Math.floor(Nt.length/2),ee=0;ee<X;ee++){P(Nt);var kt=Nt.slice(0,$t),Wt=Nt.slice($t,Nt.length),ae=s(kt)-s(Wt);vt[ee]=ae}var le=0;if(it==="two_side")for(ee=0;ee<=X;ee++)Math.abs(vt[ee])>=Math.abs(Et)&&(le+=1);else if(it==="greater")for(ee=0;ee<=X;ee++)vt[ee]>=Et&&(le+=1);else for(ee=0;ee<=X;ee++)vt[ee]<=Et&&(le+=1);return le/X},t.bisect=function(k,ot,it,X,Et){if(typeof k!="function")throw new TypeError("func must be a function");for(var vt=0;vt<X;vt++){var Nt=(ot+it)/2;if(k(Nt)===0||Math.abs((it-ot)/2)<Et)return Nt;gt(k(Nt))===gt(k(ot))?ot=Nt:it=Nt}throw new Error("maximum number of iterations exceeded")},t.quickselect=f,t.sign=gt,t.numericSort=i,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_topojson-client@3.1.0@topojson-client/dist/topojson-client.js":function(E,T,e){(function(t,u){u(T)})(this,function(t){"use strict";function u(y){return y}function s(y){if(y==null)return u;var S,P,A=y.scale[0],O=y.scale[1],L=y.translate[0],H=y.translate[1];return function(F,Z){Z||(S=P=0);var G=2,U=F.length,Y=new Array(U);for(Y[0]=(S+=F[0])*A+L,Y[1]=(P+=F[1])*O+H;G<U;)Y[G]=F[G],++G;return Y}}function c(y){var S=s(y.transform),P,A=Infinity,O=A,L=-A,H=-A;function F(G){G=S(G),G[0]<A&&(A=G[0]),G[0]>L&&(L=G[0]),G[1]<O&&(O=G[1]),G[1]>H&&(H=G[1])}function Z(G){switch(G.type){case"GeometryCollection":G.geometries.forEach(Z);break;case"Point":F(G.coordinates);break;case"MultiPoint":G.coordinates.forEach(F);break}}y.arcs.forEach(function(G){for(var U=-1,Y=G.length,J;++U<Y;)J=S(G[U],U),J[0]<A&&(A=J[0]),J[0]>L&&(L=J[0]),J[1]<O&&(O=J[1]),J[1]>H&&(H=J[1])});for(P in y.objects)Z(y.objects[P]);return[A,O,L,H]}function r(y,S){for(var P,A=y.length,O=A-S;O<--A;)P=y[O],y[O++]=y[A],y[A]=P}function h(y,S){return typeof S=="string"&&(S=y.objects[S]),S.type==="GeometryCollection"?{type:"FeatureCollection",features:S.geometries.map(function(P){return n(y,P)})}:n(y,S)}function n(y,S){var P=S.id,A=S.bbox,O=S.properties==null?{}:S.properties,L=i(y,S);return P==null&&A==null?{type:"Feature",properties:O,geometry:L}:A==null?{type:"Feature",id:P,properties:O,geometry:L}:{type:"Feature",id:P,bbox:A,properties:O,geometry:L}}function i(y,S){var P=s(y.transform),A=y.arcs;function O(U,Y){Y.length&&Y.pop();for(var J=A[U<0?~U:U],rt=0,ft=J.length;rt<ft;++rt)Y.push(P(J[rt],rt));U<0&&r(Y,ft)}function L(U){return P(U)}function H(U){for(var Y=[],J=0,rt=U.length;J<rt;++J)O(U[J],Y);return Y.length<2&&Y.push(Y[0]),Y}function F(U){for(var Y=H(U);Y.length<4;)Y.push(Y[0]);return Y}function Z(U){return U.map(F)}function G(U){var Y=U.type,J;switch(Y){case"GeometryCollection":return{type:Y,geometries:U.geometries.map(G)};case"Point":J=L(U.coordinates);break;case"MultiPoint":J=U.coordinates.map(L);break;case"LineString":J=H(U.arcs);break;case"MultiLineString":J=U.arcs.map(H);break;case"Polygon":J=Z(U.arcs);break;case"MultiPolygon":J=U.arcs.map(Z);break;default:return null}return{type:Y,coordinates:J}}return G(S)}function a(y,S){var P={},A={},O={},L=[],H=-1;S.forEach(function(G,U){var Y=y.arcs[G<0?~G:G],J;Y.length<3&&!Y[1][0]&&!Y[1][1]&&(J=S[++H],S[H]=G,S[U]=J)}),S.forEach(function(G){var U=F(G),Y=U[0],J=U[1],rt,ft;if(rt=O[Y])if(delete O[rt.end],rt.push(G),rt.end=J,ft=A[J]){delete A[ft.start];var dt=ft===rt?rt:rt.concat(ft);A[dt.start=rt.start]=O[dt.end=ft.end]=dt}else A[rt.start]=O[rt.end]=rt;else if(rt=A[J])if(delete A[rt.start],rt.unshift(G),rt.start=Y,ft=O[Y]){delete O[ft.end];var ut=ft===rt?rt:ft.concat(rt);A[ut.start=ft.start]=O[ut.end=rt.end]=ut}else A[rt.start]=O[rt.end]=rt;else rt=[G],A[rt.start=Y]=O[rt.end=J]=rt});function F(G){var U=y.arcs[G<0?~G:G],Y=U[0],J;return y.transform?(J=[0,0],U.forEach(function(rt){J[0]+=rt[0],J[1]+=rt[1]})):J=U[U.length-1],G<0?[J,Y]:[Y,J]}function Z(G,U){for(var Y in G){var J=G[Y];delete U[J.start],delete J.start,delete J.end,J.forEach(function(rt){P[rt<0?~rt:rt]=1}),L.push(J)}}return Z(O,A),Z(A,O),S.forEach(function(G){P[G<0?~G:G]||L.push([G])}),L}function o(y){return i(y,l.apply(this,arguments))}function l(y,S,P){var A,O,L;if(arguments.length>1)A=f(y,S,P);else for(O=0,A=new Array(L=y.arcs.length);O<L;++O)A[O]=O;return{type:"MultiLineString",arcs:a(y,A)}}function f(y,S,P){var A=[],O=[],L;function H(Y){var J=Y<0?~Y:Y;(O[J]||(O[J]=[])).push({i:Y,g:L})}function F(Y){Y.forEach(H)}function Z(Y){Y.forEach(F)}function G(Y){Y.forEach(Z)}function U(Y){switch(L=Y,Y.type){case"GeometryCollection":Y.geometries.forEach(U);break;case"LineString":F(Y.arcs);break;case"MultiLineString":case"Polygon":Z(Y.arcs);break;case"MultiPolygon":G(Y.arcs);break}}return U(S),O.forEach(P==null?function(Y){A.push(Y[0].i)}:function(Y){P(Y[0].g,Y[Y.length-1].g)&&A.push(Y[0].i)}),A}function v(y){for(var S=-1,P=y.length,A,O=y[P-1],L=0;++S<P;)A=O,O=y[S],L+=A[0]*O[1]-A[1]*O[0];return Math.abs(L)}function b(y){return i(y,g.apply(this,arguments))}function g(y,S){var P={},A=[],O=[];S.forEach(L);function L(Z){switch(Z.type){case"GeometryCollection":Z.geometries.forEach(L);break;case"Polygon":H(Z.arcs);break;case"MultiPolygon":Z.arcs.forEach(H);break}}function H(Z){Z.forEach(function(G){G.forEach(function(U){(P[U=U<0?~U:U]||(P[U]=[])).push(Z)})}),A.push(Z)}function F(Z){return v(i(y,{type:"Polygon",arcs:[Z]}).coordinates[0])}return A.forEach(function(Z){if(!Z._){var G=[],U=[Z];for(Z._=1,O.push(G);Z=U.pop();)G.push(Z),Z.forEach(function(Y){Y.forEach(function(J){P[J<0?~J:J].forEach(function(rt){rt._||(rt._=1,U.push(rt))})})})}}),A.forEach(function(Z){delete Z._}),{type:"MultiPolygon",arcs:O.map(function(Z){var G=[],U;if(Z.forEach(function(dt){dt.forEach(function(ut){ut.forEach(function(Lt){P[Lt<0?~Lt:Lt].length<2&&G.push(Lt)})})}),G=a(y,G),(U=G.length)>1)for(var Y=1,J=F(G[0]),rt,ft;Y<U;++Y)(rt=F(G[Y]))>J&&(ft=G[0],G[0]=G[Y],G[Y]=ft,J=rt);return G}).filter(function(Z){return Z.length>0})}}function m(y,S){for(var P=0,A=y.length;P<A;){var O=P+A>>>1;y[O]<S?P=O+1:A=O}return P}function _(y){var S={},P=y.map(function(){return[]});function A(dt,ut){dt.forEach(function(Lt){Lt<0&&(Lt=~Lt);var Ft=S[Lt];Ft?Ft.push(ut):S[Lt]=[ut]})}function O(dt,ut){dt.forEach(function(Lt){A(Lt,ut)})}function L(dt,ut){dt.type==="GeometryCollection"?dt.geometries.forEach(function(Lt){L(Lt,ut)}):dt.type in H&&H[dt.type](dt.arcs,ut)}var H={LineString:A,MultiLineString:O,Polygon:O,MultiPolygon:function(ut,Lt){ut.forEach(function(Ft){O(Ft,Lt)})}};y.forEach(L);for(var F in S)for(var Z=S[F],G=Z.length,U=0;U<G;++U)for(var Y=U+1;Y<G;++Y){var J=Z[U],rt=Z[Y],ft;(ft=P[J])[F=m(ft,rt)]!==rt&&ft.splice(F,0,rt),(ft=P[rt])[F=m(ft,J)]!==J&&ft.splice(F,0,J)}return P}function M(y){if(y==null)return u;var S,P,A=y.scale[0],O=y.scale[1],L=y.translate[0],H=y.translate[1];return function(F,Z){Z||(S=P=0);var G=2,U=F.length,Y=new Array(U),J=Math.round((F[0]-L)/A),rt=Math.round((F[1]-H)/O);for(Y[0]=J-S,S=J,Y[1]=rt-P,P=rt;G<U;)Y[G]=F[G],++G;return Y}}function x(y,S){if(y.transform)throw new Error("already quantized");if(!S||!S.scale){if(!((H=Math.floor(S))>=2))throw new Error("n must be \u22652");Z=y.bbox||c(y);var P=Z[0],A=Z[1],O=Z[2],L=Z[3],H;S={scale:[O-P?(O-P)/(H-1):1,L-A?(L-A)/(H-1):1],translate:[P,A]}}else Z=y.bbox;var F=M(S),Z,G,U=y.objects,Y={};function J(dt){return F(dt)}function rt(dt){var ut;switch(dt.type){case"GeometryCollection":ut={type:"GeometryCollection",geometries:dt.geometries.map(rt)};break;case"Point":ut={type:"Point",coordinates:J(dt.coordinates)};break;case"MultiPoint":ut={type:"MultiPoint",coordinates:dt.coordinates.map(J)};break;default:return dt}return dt.id!=null&&(ut.id=dt.id),dt.bbox!=null&&(ut.bbox=dt.bbox),dt.properties!=null&&(ut.properties=dt.properties),ut}function ft(dt){var ut=0,Lt=1,Ft=dt.length,Ot,St=new Array(Ft);for(St[0]=F(dt[0],0);++ut<Ft;)((Ot=F(dt[ut],ut))[0]||Ot[1])&&(St[Lt++]=Ot);return Lt===1&&(St[Lt++]=[0,0]),St.length=Lt,St}for(G in U)Y[G]=rt(U[G]);return{type:"Topology",bbox:Z,transform:S,objects:Y,arcs:y.arcs.map(ft)}}t.bbox=c,t.feature=h,t.merge=b,t.mergeArcs=g,t.mesh=o,t.meshArcs=l,t.neighbors=_,t.quantize=x,t.transform=s,t.untransform=M,Object.defineProperty(t,"__esModule",{value:!0})})},"./node_modules/_tslib@2.1.0@tslib/tslib.js":function(E,T,e){(function(t){var u,s;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var c,r,h,n,i,a,o,l,f,v,b,g,m,_,M,x,y,S,P,A,O,L,H,F;(function(Z){var G=typeof t=="object"?t:typeof self=="object"?self:typeof this=="object"?this:{};u=[T],s=function(Y){Z(U(G,U(Y)))}.apply(T,u),s!==void 0&&(E.exports=s);function U(Y,J){return Y!==G&&(typeof Object.create=="function"?Object.defineProperty(Y,"__esModule",{value:!0}):Y.__esModule=!0),function(rt,ft){return Y[rt]=J?J(rt,ft):ft}}})(function(Z){var G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,J){Y.__proto__=J}||function(Y,J){for(var rt in J)Object.prototype.hasOwnProperty.call(J,rt)&&(Y[rt]=J[rt])};c=function(J,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Class extends value "+String(rt)+" is not a constructor or null");G(J,rt);function ft(){this.constructor=J}J.prototype=rt===null?Object.create(rt):(ft.prototype=rt.prototype,new ft)},r=Object.assign||function(Y){for(var J,rt=1,ft=arguments.length;rt<ft;rt++){J=arguments[rt];for(var dt in J)Object.prototype.hasOwnProperty.call(J,dt)&&(Y[dt]=J[dt])}return Y},h=function(J,rt){var ft={};for(var dt in J)Object.prototype.hasOwnProperty.call(J,dt)&&rt.indexOf(dt)<0&&(ft[dt]=J[dt]);if(J!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ut=0,dt=Object.getOwnPropertySymbols(J);ut<dt.length;ut++)rt.indexOf(dt[ut])<0&&Object.prototype.propertyIsEnumerable.call(J,dt[ut])&&(ft[dt[ut]]=J[dt[ut]]);return ft},n=function(J,rt,ft,dt){var ut=arguments.length,Lt=ut<3?rt:dt===null?dt=Object.getOwnPropertyDescriptor(rt,ft):dt,Ft;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Lt=Reflect.decorate(J,rt,ft,dt);else for(var Ot=J.length-1;Ot>=0;Ot--)(Ft=J[Ot])&&(Lt=(ut<3?Ft(Lt):ut>3?Ft(rt,ft,Lt):Ft(rt,ft))||Lt);return ut>3&&Lt&&Object.defineProperty(rt,ft,Lt),Lt},i=function(J,rt){return function(ft,dt){rt(ft,dt,J)}},a=function(J,rt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(J,rt)},o=function(J,rt,ft,dt){function ut(Lt){return Lt instanceof ft?Lt:new ft(function(Ft){Ft(Lt)})}return new(ft||(ft=Promise))(function(Lt,Ft){function Ot(At){try{xt(dt.next(At))}catch(nt){Ft(nt)}}function St(At){try{xt(dt.throw(At))}catch(nt){Ft(nt)}}function xt(At){At.done?Lt(At.value):ut(At.value).then(Ot,St)}xt((dt=dt.apply(J,rt||[])).next())})},l=function(J,rt){var ft={label:0,sent:function(){if(Lt[0]&1)throw Lt[1];return Lt[1]},trys:[],ops:[]},dt,ut,Lt,Ft;return Ft={next:Ot(0),throw:Ot(1),return:Ot(2)},typeof Symbol=="function"&&(Ft[Symbol.iterator]=function(){return this}),Ft;function Ot(xt){return function(At){return St([xt,At])}}function St(xt){if(dt)throw new TypeError("Generator is already executing.");for(;ft;)try{if(dt=1,ut&&(Lt=xt[0]&2?ut.return:xt[0]?ut.throw||((Lt=ut.return)&&Lt.call(ut),0):ut.next)&&!(Lt=Lt.call(ut,xt[1])).done)return Lt;switch(ut=0,Lt&&(xt=[xt[0]&2,Lt.value]),xt[0]){case 0:case 1:Lt=xt;break;case 4:return ft.label++,{value:xt[1],done:!1};case 5:ft.label++,ut=xt[1],xt=[0];continue;case 7:xt=ft.ops.pop(),ft.trys.pop();continue;default:if(Lt=ft.trys,!(Lt=Lt.length>0&&Lt[Lt.length-1])&&(xt[0]===6||xt[0]===2)){ft=0;continue}if(xt[0]===3&&(!Lt||xt[1]>Lt[0]&&xt[1]<Lt[3])){ft.label=xt[1];break}if(xt[0]===6&&ft.label<Lt[1]){ft.label=Lt[1],Lt=xt;break}if(Lt&&ft.label<Lt[2]){ft.label=Lt[2],ft.ops.push(xt);break}Lt[2]&&ft.ops.pop(),ft.trys.pop();continue}xt=rt.call(J,ft)}catch(At){xt=[6,At],ut=0}finally{dt=Lt=0}if(xt[0]&5)throw xt[1];return{value:xt[0]?xt[1]:void 0,done:!0}}},f=function(J,rt){for(var ft in J)ft!=="default"&&!Object.prototype.hasOwnProperty.call(rt,ft)&&F(rt,J,ft)},F=Object.create?function(Y,J,rt,ft){ft===void 0&&(ft=rt),Object.defineProperty(Y,ft,{enumerable:!0,get:function(){return J[rt]}})}:function(Y,J,rt,ft){ft===void 0&&(ft=rt),Y[ft]=J[rt]},v=function(J){var rt=typeof Symbol=="function"&&Symbol.iterator,ft=rt&&J[rt],dt=0;if(ft)return ft.call(J);if(J&&typeof J.length=="number")return{next:function(){return J&&dt>=J.length&&(J=void 0),{value:J&&J[dt++],done:!J}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")},b=function(J,rt){var ft=typeof Symbol=="function"&&J[Symbol.iterator];if(!ft)return J;var dt=ft.call(J),ut,Lt=[],Ft;try{for(;(rt===void 0||rt-- >0)&&!(ut=dt.next()).done;)Lt.push(ut.value)}catch(Ot){Ft={error:Ot}}finally{try{ut&&!ut.done&&(ft=dt.return)&&ft.call(dt)}finally{if(Ft)throw Ft.error}}return Lt},g=function(){for(var J=[],rt=0;rt<arguments.length;rt++)J=J.concat(b(arguments[rt]));return J},m=function(){for(var J=0,rt=0,ft=arguments.length;rt<ft;rt++)J+=arguments[rt].length;for(var dt=Array(J),ut=0,rt=0;rt<ft;rt++)for(var Lt=arguments[rt],Ft=0,Ot=Lt.length;Ft<Ot;Ft++,ut++)dt[ut]=Lt[Ft];return dt},_=function(J,rt){for(var ft=0,dt=rt.length,ut=J.length;ft<dt;ft++,ut++)J[ut]=rt[ft];return J},M=function(J){return this instanceof M?(this.v=J,this):new M(J)},x=function(J,rt,ft){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt=ft.apply(J,rt||[]),ut,Lt=[];return ut={},Ft("next"),Ft("throw"),Ft("return"),ut[Symbol.asyncIterator]=function(){return this},ut;function Ft(Mt){dt[Mt]&&(ut[Mt]=function(z){return new Promise(function(Q,ht){Lt.push([Mt,z,Q,ht])>1||Ot(Mt,z)})})}function Ot(Mt,z){try{St(dt[Mt](z))}catch(Q){nt(Lt[0][3],Q)}}function St(Mt){Mt.value instanceof M?Promise.resolve(Mt.value.v).then(xt,At):nt(Lt[0][2],Mt)}function xt(Mt){Ot("next",Mt)}function At(Mt){Ot("throw",Mt)}function nt(Mt,z){Mt(z),Lt.shift(),Lt.length&&Ot(Lt[0][0],Lt[0][1])}},y=function(J){var rt,ft;return rt={},dt("next"),dt("throw",function(ut){throw ut}),dt("return"),rt[Symbol.iterator]=function(){return this},rt;function dt(ut,Lt){rt[ut]=J[ut]?function(Ft){return(ft=!ft)?{value:M(J[ut](Ft)),done:ut==="return"}:Lt?Lt(Ft):Ft}:Lt}},S=function(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt=J[Symbol.asyncIterator],ft;return rt?rt.call(J):(J=typeof v=="function"?v(J):J[Symbol.iterator](),ft={},dt("next"),dt("throw"),dt("return"),ft[Symbol.asyncIterator]=function(){return this},ft);function dt(Lt){ft[Lt]=J[Lt]&&function(Ft){return new Promise(function(Ot,St){Ft=J[Lt](Ft),ut(Ot,St,Ft.done,Ft.value)})}}function ut(Lt,Ft,Ot,St){Promise.resolve(St).then(function(xt){Lt({value:xt,done:Ot})},Ft)}},P=function(J,rt){return Object.defineProperty?Object.defineProperty(J,"raw",{value:rt}):J.raw=rt,J};var U=Object.create?function(Y,J){Object.defineProperty(Y,"default",{enumerable:!0,value:J})}:function(Y,J){Y.default=J};A=function(J){if(J&&J.__esModule)return J;var rt={};if(J!=null)for(var ft in J)ft!=="default"&&Object.prototype.hasOwnProperty.call(J,ft)&&F(rt,J,ft);return U(rt,J),rt},O=function(J){return J&&J.__esModule?J:{default:J}},L=function(J,rt){if(!rt.has(J))throw new TypeError("attempted to get private field on non-instance");return rt.get(J)},H=function(J,rt,ft){if(!rt.has(J))throw new TypeError("attempted to set private field on non-instance");return rt.set(J,ft),ft},Z("__extends",c),Z("__assign",r),Z("__rest",h),Z("__decorate",n),Z("__param",i),Z("__metadata",a),Z("__awaiter",o),Z("__generator",l),Z("__exportStar",f),Z("__createBinding",F),Z("__values",v),Z("__read",b),Z("__spread",g),Z("__spreadArrays",m),Z("__spreadArray",_),Z("__await",M),Z("__asyncGenerator",x),Z("__asyncDelegator",y),Z("__asyncValues",S),Z("__makeTemplateObject",P),Z("__importStar",A),Z("__importDefault",O),Z("__classPrivateFieldGet",L),Z("__classPrivateFieldSet",H)})}).call(this,e("./node_modules/_webpack@4.46.0@webpack/buildin/global.js"))},"./node_modules/_webpack@4.46.0@webpack/buildin/global.js":function(E,T){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){typeof window=="object"&&(e=window)}E.exports=e},"./node_modules/_webpack@4.46.0@webpack/buildin/module.js":function(E,T){E.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js":function(E,T,e){var t;/*!
* EventEmitter v5.2.9 - git.io/ee
* Unlicense - http://unlicense.org/
* Oliver Caldwell - https://oli.me.uk/
* @preserve
*/(function(u){"use strict";function s(){}var c=s.prototype,r=u.EventEmitter;function h(a,o){for(var l=a.length;l--;)if(a[l].listener===o)return l;return-1}function n(a){return function(){return this[a].apply(this,arguments)}}c.getListeners=function(o){var l=this._getEvents(),f,v;if(o instanceof RegExp){f={};for(v in l)l.hasOwnProperty(v)&&o.test(v)&&(f[v]=l[v])}else f=l[o]||(l[o]=[]);return f},c.flattenListeners=function(o){var l=[],f;for(f=0;f<o.length;f+=1)l.push(o[f].listener);return l},c.getListenersAsObject=function(o){var l=this.getListeners(o),f;return l instanceof Array&&(f={},f[o]=l),f||l};function i(a){return typeof a=="function"||a instanceof RegExp?!0:a&&typeof a=="object"?i(a.listener):!1}c.addListener=function(o,l){if(!i(l))throw new TypeError("listener must be a function");var f=this.getListenersAsObject(o),v=typeof l=="object",b;for(b in f)f.hasOwnProperty(b)&&h(f[b],l)===-1&&f[b].push(v?l:{listener:l,once:!1});return this},c.on=n("addListener"),c.addOnceListener=function(o,l){return this.addListener(o,{listener:l,once:!0})},c.once=n("addOnceListener"),c.defineEvent=function(o){return this.getListeners(o),this},c.defineEvents=function(o){for(var l=0;l<o.length;l+=1)this.defineEvent(o[l]);return this},c.removeListener=function(o,l){var f=this.getListenersAsObject(o),v,b;for(b in f)f.hasOwnProperty(b)&&(v=h(f[b],l),v!==-1&&f[b].splice(v,1));return this},c.off=n("removeListener"),c.addListeners=function(o,l){return this.manipulateListeners(!1,o,l)},c.removeListeners=function(o,l){return this.manipulateListeners(!0,o,l)},c.manipulateListeners=function(o,l,f){var v,b,g=o?this.removeListener:this.addListener,m=o?this.removeListeners:this.addListeners;if(typeof l=="object"&&!(l instanceof RegExp))for(v in l)l.hasOwnProperty(v)&&(b=l[v])&&(typeof b=="function"?g.call(this,v,b):m.call(this,v,b));else for(v=f.length;v--;)g.call(this,l,f[v]);return this},c.removeEvent=function(o){var l=typeof o,f=this._getEvents(),v;if(l==="string")delete f[o];else if(o instanceof RegExp)for(v in f)f.hasOwnProperty(v)&&o.test(v)&&delete f[v];else delete this._events;return this},c.removeAllListeners=n("removeEvent"),c.emitEvent=function(o,l){var f=this.getListenersAsObject(o),v,b,g,m,_;for(m in f)if(f.hasOwnProperty(m))for(v=f[m].slice(0),g=0;g<v.length;g++)b=v[g],b.once===!0&&this.removeListener(o,b.listener),_=b.listener.apply(this,l||[]),_===this._getOnceReturnValue()&&this.removeListener(o,b.listener);return this},c.trigger=n("emitEvent"),c.emit=function(o){var l=Array.prototype.slice.call(arguments,1);return this.emitEvent(o,l)},c.setOnceReturnValue=function(o){return this._onceReturnValue=o,this},c._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},c._getEvents=function(){return this._events||(this._events={})},s.noConflict=function(){return u.EventEmitter=r,s},t=function(){return s}.call(u,e,u,E),t!==void 0&&(E.exports=t)})(typeof window!="undefined"?window:this||{})},"./src/api/geo.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),c=e("./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js"),r=e("./src/view.ts"),h=t.__importDefault(e("./src/util/get-geo-projection.ts")),n={geoArea:function(a){return s.geoArea(a)},geoAreaByName:function(a){return s.geoArea(this.geoFeatureByName(a))},geoCentroid:function(a){return s.geoCentroid(a)},geoCentroidByName:function(a){return s.geoCentroid(this.geoFeatureByName(a))},geoDistance:function(a,o){return s.geoDistance(a,o)},geoLength:function(a){return s.geoLength(a)},geoLengthByName:function(a){return s.geoLength(this.geoFeatureByName(a))},geoContains:function(a,o){return s.geoContains(a,o)},geoFeatureByName:function(a){var o=this.rows,l;return o.some(function(f){return f.name===a?(l=f,!0):!1}),l},geoFeatureByPosition:function(a){var o=this.rows,l;return o.some(function(f){return s.geoContains(f,a)?(l=f,!0):!1}),l},geoNameByPosition:function(a){var o=this.geoFeatureByPosition(a);if(o)return o.name},getGeoProjection:h.default,geoProject:function(a,o,l){return o=h.default(o,l),c.geoProject(a,o)},geoProjectByName:function(a,o,l){return o=h.default(o,l),c.geoProject(this.geoFeatureByName(a),o)},geoProjectPosition:function(a,o,l){var f=h.default(o,l);return f(a)},geoProjectInvert:function(a,o,l){var f=h.default(o,l);return f.invert(a)}};u.assign(r.View.prototype,n)},"./src/api/hierarchy.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/view.ts");t.assign(u.View.prototype,{getAllNodes:function(){var c=[],r=this.root;return r&&r.each?r.each(function(h){c.push(h)}):r&&r.eachNode&&r.eachNode(function(h){c.push(h)}),c},getAllLinks:function(){for(var c=[],r=[this.root],h;h=r.pop();){var n=h.children;n&&n.forEach(function(i){c.push({source:h,target:i}),r.push(i)})}return c}}),t.assign(u.View.prototype,{getAllEdges:u.View.prototype.getAllLinks})},"./src/api/partition.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),c=e("./src/view.ts");u.assign(c.View.prototype,{partition:function(h,n){return n===void 0&&(n=[]),s.default(this.rows,h,n)},group:function(h,n){n===void 0&&(n=[]);var i=this.partition(h,n);return u.values(i)},groups:function(h,n){return n===void 0&&(n=[]),this.group(h,n)}})},"./src/api/statistics.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importStar(e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/view.ts"),r=t.__importDefault(e("./src/util/p-by-fraction.ts")),h=t.__importDefault(e("./src/constants.ts")),n=h.default.STATISTICS_METHODS;function i(o,l){var f=o.getColumn(l);return s.isArray(f)&&s.isArray(f[0])&&(f=s.flattenDeep(f)),f}n.forEach(function(o){c.View.prototype[o]=function(l){return u[o](i(this,l))}});var a=u.quantile;s.assign(c.View.prototype,{average:c.View.prototype.mean,quantile:function(l,f){return a(i(this,l),f)},quantiles:function(l,f){var v=i(this,l);return f.map(function(b){return a(v,b)})},quantilesByFraction:function(l,f){return this.quantiles(l,r.default(f))},range:function(l){return[this.min(l),this.max(l)]},extent:function(l){return this.range(l)}})},"./src/connector/default.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts");u.DataSet.registerConnector("default",function(s,c){var r;if(t.isString(s)?r=c.getView(s):r=s,!r)throw new TypeError("Invalid dataView");return t.deepMix([],r.rows)})},"./src/connector/dsv.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./node_modules/_d3-dsv@1.2.0@d3-dsv/dist/d3-dsv.js"),s=e("./src/data-set.ts");s.DataSet.registerConnector("dsv",function(c,r){r===void 0&&(r={});var h=r.delimiter||",";if(!t.isString(h))throw new TypeError("Invalid delimiter: must be a string!");return u.dsvFormat(h).parse(c)}),s.DataSet.registerConnector("csv",function(c){return u.csvParse(c)}),s.DataSet.registerConnector("tsv",function(c){return u.tsvParse(c)})},"./src/connector/geo-graticule.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),u=e("./src/data-set.ts");function s(c,r){r.dataType="geo-graticule";var h=t.geoGraticule().lines();return h.map(function(n,i){return n.index=""+i,n}),r.rows=h,h}T.default=s,u.DataSet.registerConnector("geo-graticule",s)},"./src/connector/geojson.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importDefault(e("./node_modules/_point-at-length@1.1.0@point-at-length/index.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),r=e("./src/data-set.ts"),h=c.geoPath();function n(i,a,o){o.dataType=r.DataSet.CONSTANTS.GEO;var l=s.deepMix([],i.features);return l.forEach(function(f){f.name=f.properties.name,f.longitude=[],f.latitude=[];var v=f.pathData=h(f),b=u.default(v);b._path.forEach(function(m){f.longitude.push(m[1]),f.latitude.push(m[2])});var g=h.centroid(f);f.centroidX=g[0],f.centroidY=g[1]}),l}r.DataSet.registerConnector("geo",n),r.DataSet.registerConnector("geojson",n),r.DataSet.registerConnector("GeoJSON",n),T.default=n},"./src/connector/graph.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s={nodes:function(h){return h.nodes},edges:function(h){return h.edges}};function c(r,h,n){h=t.assign({},s,h),n.dataType=u.DataSet.CONSTANTS.GRAPH;var i=h.nodes,a=h.edges;if(i&&!t.isFunction(i))throw new TypeError("Invalid nodes: must be a function!");if(a&&!t.isFunction(a))throw new TypeError("Invalid edges: must be a function!");return n.rows=n.graph={nodes:i(r),edges:a(r)},t.assign(n,n.graph),n.rows}u.DataSet.registerConnector("graph",c),u.DataSet.registerConnector("diagram",c)},"./src/connector/hexjson.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./node_modules/_d3-hexjson@1.1.1@d3-hexjson/build/d3-hexjson.js"),s=e("./src/data-set.ts"),c={width:1,height:1};function r(n){return n.cx=n.x,n.cy=n.y,n.x=[],n.y=[],n.vertices.forEach(function(i){n.x.push(i.x+n.cx),n.y.push(i.y+n.cy)}),n}function h(n,i,a){a.dataType=s.DataSet.CONSTANTS.HEX,i=t.assign({},c,i);var o=i.width,l=i.height,f=t.deepMix([],n);a._HexJSON=f;var v=a._GridHexJSON=u.getGridForHexJSON(f),b=a.rows=u.renderHexJSON(f,o,l).map(r);return a._gridRows=u.renderHexJSON(v,o,l).map(r),b}s.DataSet.registerConnector("hex",h),s.DataSet.registerConnector("hexjson",h),s.DataSet.registerConnector("hex-json",h),s.DataSet.registerConnector("HexJSON",h),T.default=h},"./src/connector/hierarchy.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js"),s=e("./src/data-set.ts");function c(r,h,n){n.dataType=s.DataSet.CONSTANTS.HIERARCHY;var i=h&&h.children?h.children:null;if(i&&!t.isFunction(i))throw new TypeError("Invalid children: must be a function!");return h.pureData?n.rows=n.root=r:n.rows=n.root=u.hierarchy(r,i),r}s.DataSet.registerConnector("hierarchy",c),s.DataSet.registerConnector("tree",c)},"./src/connector/topojson.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_topojson-client@3.1.0@topojson-client/dist/topojson-client.js"),c=t.__importDefault(e("./src/connector/geojson.ts")),r=e("./src/data-set.ts");function h(n,i,a){var o=i.object;if(!u.isString(o))throw new TypeError("Invalid object: must be a string!");var l=s.feature(n,n.objects[o]);return c.default(l,void 0,a)}r.DataSet.registerConnector("topojson",h),r.DataSet.registerConnector("TopoJSON",h)},"./src/constants.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default={HIERARCHY:"hierarchy",GEO:"geo",HEX:"hex",GRAPH:"graph",TABLE:"table",GEO_GRATICULE:"geo-graticule",STATISTICS_METHODS:["max","mean","median","min","mode","product","standardDeviation","sum","sumSimple","variance"]}},"./src/data-set.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.DataSet=void 0;var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js")),c=e("./src/view.ts"),r=t.__importDefault(e("./src/constants.ts")),h=function(n){t.__extends(i,n);function i(a){a===void 0&&(a={state:{}});var o=n.call(this)||this;return o.isDataSet=!0,o._onChangeTimer=null,o.views={},o.state={},o.state=a.state,o}return i.registerConnector=function(a,o){i.connectors[a]=o},i.getConnector=function(a){return i.connectors[a]||i.connectors.default},i.registerTransform=function(a,o){i.transforms[a]=o},i.getTransform=function(a){return i.transforms[a]||i.transforms.default},i.prototype._getUniqueViewName=function(){for(var a=u.uniqueId("view_");this.views[a];)a=u.uniqueId("view_");return a},i.prototype.createView=function(a,o){if(u.isNil(a)&&(a=this._getUniqueViewName()),u.isObject(a)&&(o=a,a=this._getUniqueViewName()),this.views[a])throw new Error("data view exists: "+a);var l=new c.View(this,o);return this.views[a]=l,l},i.prototype.getView=function(a){return this.views[a]},i.prototype.setView=function(a,o){this.views[a]=o},i.prototype.setState=function(a,o){var l=this;this.state[a]=o,this._onChangeTimer&&(window.clearTimeout(this._onChangeTimer),this._onChangeTimer=null),this._onChangeTimer=window.setTimeout(function(){l.emit("statechange",a,o)},16)},i.CONSTANTS=r.default,i.connectors={},i.transforms={},i.DataSet=i,i.DataView=c.View,i.View=c.View,i.version="____DATASET_VERSION____",i}(s.default);T.DataSet=h,u.assign(h,r.default),u.assign(h.prototype,{view:h.prototype.createView}),c.View.DataSet=h},"./src/index.ts":function(E,T,e){"use strict";e("./src/api/geo.ts"),e("./src/api/hierarchy.ts"),e("./src/api/partition.ts"),e("./src/api/statistics.ts"),e("./src/connector/default.ts"),e("./src/connector/dsv.ts"),e("./src/connector/geo-graticule.ts"),e("./src/connector/geojson.ts"),e("./src/connector/graph.ts"),e("./src/connector/hexjson.ts"),e("./src/connector/hierarchy.ts"),e("./src/connector/topojson.ts"),e("./src/transform/default.ts"),e("./src/transform/filter.ts"),e("./src/transform/fold.ts"),e("./src/transform/map.ts"),e("./src/transform/partition.ts"),e("./src/transform/percent.ts"),e("./src/transform/pick.ts"),e("./src/transform/proportion.ts"),e("./src/transform/rename.ts"),e("./src/transform/reverse.ts"),e("./src/transform/sort.ts"),e("./src/transform/sort-by.ts"),e("./src/transform/subset.ts"),e("./src/transform/fill-rows.ts"),e("./src/transform/impute.ts"),e("./src/transform/aggregate.ts"),e("./src/transform/regression.ts"),e("./src/transform/kde.ts"),e("./src/transform/bin/hexagon.ts"),e("./src/transform/bin/histogram.ts"),e("./src/transform/bin/quantile.ts"),e("./src/transform/bin/rectangle.ts"),e("./src/transform/geo/centroid.ts"),e("./src/transform/geo/projection.ts"),e("./src/transform/geo/region.ts"),e("./src/transform/diagram/arc.ts"),e("./src/transform/diagram/dagre.ts"),e("./src/transform/diagram/sankey.ts"),e("./src/transform/diagram/voronoi.ts"),e("./src/transform/hierarchy/cluster.ts"),e("./src/transform/hierarchy/compact-box.ts"),e("./src/transform/hierarchy/dendrogram.ts"),e("./src/transform/hierarchy/indented.ts"),e("./src/transform/hierarchy/pack.ts"),e("./src/transform/hierarchy/partition.ts"),e("./src/transform/hierarchy/tree.ts"),e("./src/transform/hierarchy/treemap.ts"),e("./src/transform/tag-cloud.ts"),e("./src/transform/waffle.ts"),e("./src/transform/kernel-smooth/density.ts"),e("./src/transform/kernel-smooth/regression.ts");var t=e("./src/data-set.ts");E.exports=t.DataSet},"./src/transform/aggregate.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importStar(e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),c=t.__importDefault(e("./src/util/partition.ts")),r=e("./src/data-set.ts"),h=r.DataSet.registerTransform,n=e("./src/util/option-parser.ts"),i={as:[],fields:[],groupBy:[],operations:[]},a="count",o={count:function(v){return v.length},distinct:function(v,b){var g=u.uniq(v.map(function(m){return m[b]}));return g.length}};r.DataSet.CONSTANTS.STATISTICS_METHODS.forEach(function(f){o[f]=function(v,b){var g=v.map(function(m){return m[b]});return u.isArray(g)&&u.isArray(g[0])&&(g=u.flattenDeep(g)),s[f](g)}}),o.average=o.mean;function l(f,v){v=u.assign({},i,v);var b=n.getFields(v);if(!u.isArray(b))throw new TypeError("Invalid fields: it must be an array with one or more strings!");var g=v.as||[];u.isString(g)&&(g=[g]);var m=v.operations;u.isString(m)&&(m=[m]);var _=[a];if((!u.isArray(m)||!m.length)&&(console.warn('operations is not defined, will use [ "count" ] directly.'),m=_,g=m),!(m.length===1&&m[0]===a)){if(m.length!==b.length)throw new TypeError("Invalid operations: it's length must be the same as fields!");if(g.length!==b.length)throw new TypeError("Invalid as: it's length must be the same as fields!")}var M=c.default(f.rows,v.groupBy),x=[];u.forIn(M,function(y){var S=y[0];m.forEach(function(P,A){var O=g[A],L=b[A];S[O]=o[P](y,L)}),x.push(S)}),f.rows=x}h("aggregate",l),h("summary",l),T.default={VALID_AGGREGATES:u.keys(o)}},"./src/transform/bin/hexagon.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./src/data-set.ts"),c=e("./src/util/option-parser.ts"),r={as:["x","y","count"],bins:[30,30],offset:[0,0],sizeByCount:!1},h=Math.sqrt(3),n=Math.PI/3,i=[0,n,2*n,3*n,4*n,5*n];function a(v,b,g,m){return Math.sqrt((v-g)*(v-g)+(b-m)*(b-m))}function o(v,b,g){var m=v-g;b=b/2;var _=Math.floor(m/b),M=b*(_+(Math.abs(_%2)===1?1:0)),x=b*(_+(Math.abs(_%2)===1?0:1));return[M+g,x+g]}function l(v,b,g){b===void 0&&(b=[1,1]),g===void 0&&(g=[0,0]);var m={},_=t.__read(b,2),M=_[0],x=_[1],y=t.__read(g,2),S=y[0],P=y[1];return v.forEach(function(A){var O,L,H=t.__read(A,2),F=H[0],Z=H[1],G=t.__read(o(F,M,S),2),U=G[0],Y=G[1],J=t.__read(o(Z,x,P),2),rt=J[0],ft=J[1],dt=a(F,Z,U,rt),ut=a(F,Z,Y,ft),Lt,Ft,Ot;dt<ut?(Lt="x"+U+"y"+rt,O=t.__read([U,rt],2),Ft=O[0],Ot=O[1]):(Lt="x"+Y+"y"+ft,L=t.__read([Y,ft],2),Ft=L[0],Ot=L[1]),m[Lt]=m[Lt]||{x:Ft,y:Ot,count:0},m[Lt].count++}),m}function f(v,b){b=u.assign({},r,b);var g=c.getFields(b);if(!u.isArray(g)||g.length!==2)throw new TypeError("Invalid fields: it must be an array with 2 strings!");var m=t.__read(g,2),_=m[0],M=m[1],x=v.range(_),y=v.range(M),S=x[1]-x[0],P=y[1]-y[0],A=b.binWidth||[];if(A.length!==2){var O=t.__read(b.bins,2),L=O[0],H=O[1];if(L<=0||H<=0)throw new TypeError("Invalid bins: must be an array with two positive numbers (e.g. [ 30, 30 ])!");A=[S/L,P/H]}var F=t.__read(b.offset,2),Z=F[0],G=F[1],U=3*A[0]/(h*A[1]),Y=v.rows.map(function(xt){return[xt[_],U*xt[M]]}),J=l(Y,[A[0],U*A[1]],[Z,U*G]),rt=t.__read(b.as,3),ft=rt[0],dt=rt[1],ut=rt[2];if(!ft||!dt||!ut)throw new TypeError('Invalid as: it must be an array with three elements (e.g. [ "x", "y", "count" ])!');var Lt=A[0]/h,Ft=i.map(function(xt){return[Math.sin(xt)*Lt,-Math.cos(xt)*Lt]}),Ot=[],St=0;b.sizeByCount&&u.forIn(J,function(xt){xt.count>St&&(St=xt.count)}),u.forIn(J,function(xt){var At=xt.x,nt=xt.y,Mt=xt.count,z={};z[ut]=Mt,b.sizeByCount?(z[ft]=Ft.map(function(Q){return At+xt.count/St*Q[0]}),z[dt]=Ft.map(function(Q){return(nt+xt.count/St*Q[1])/U})):(z[ft]=Ft.map(function(Q){return At+Q[0]}),z[dt]=Ft.map(function(Q){return(nt+Q[1])/U})),Ot.push(z)}),v.rows=Ot}s.DataSet.registerTransform("bin.hexagon",f),s.DataSet.registerTransform("bin.hex",f),s.DataSet.registerTransform("hexbin",f)},"./src/transform/bin/histogram.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={as:["x","count"],bins:void 0,offset:0,groupBy:[]};function n(o,l,f){var v=o-f,b=Math.floor(v/l);return[b*l+f,(b+1)*l+f]}function i(o){return Math.ceil(Math.log(o)/Math.LN2)+1}function a(o,l){l=u.assign({},h,l);var f=r.getField(l);if(o.rows.length!==0){var v=o.range(f),b=v[1]-v[0],g=l.binWidth,m=l.bins;if(!g&&m){if(m<=0)throw new TypeError("Invalid bins: it must be a positive number!");g=b/m}if(!g&&!m){var _=i(o.rows.length);g=b/_}var M=l.offset%g,x=[],y=l.groupBy,S=s.default(o.rows,y);u.forIn(S,function(P){var A={},O=P.map(function(G){return G[f]});O.forEach(function(G){var U=t.__read(n(G,g,M),2),Y=U[0],J=U[1],rt=Y+"-"+J;A[rt]=A[rt]||{x0:Y,x1:J,count:0},A[rt].count++});var L=t.__read(l.as,2),H=L[0],F=L[1];if(!H||!F)throw new TypeError('Invalid as: it must be an array with 2 elements (e.g. [ "x", "count" ])!');var Z=u.pick(P[0],y);u.forIn(A,function(G){var U=u.assign({},Z);U[H]=[G.x0,G.x1],U[F]=G.count,x.push(U)})}),o.rows=x}}c.DataSet.registerTransform("bin.histogram",a),c.DataSet.registerTransform("bin.dot",a)},"./src/transform/bin/quantile.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),c=t.__importDefault(e("./src/util/partition.ts")),r=t.__importDefault(e("./src/util/p-by-fraction.ts")),h=e("./src/data-set.ts"),n=h.DataSet.registerTransform,i=e("./src/util/option-parser.ts"),a={as:"_bin",groupBy:[],fraction:4};function o(l,f){f=u.assign({},a,f);var v=i.getField(f),b=f.as;if(!u.isString(b))throw new TypeError('Invalid as: it must be a string (e.g. "_bin")!');var g=f.p,m=f.fraction;(!u.isArray(g)||g.length===0)&&(g=r.default(m));var _=l.rows,M=f.groupBy,x=c.default(_,M),y=[];u.forIn(x,function(S){var P=S[0],A=S.map(function(L){return L[v]}),O=g.map(function(L){return s.quantile(A,L)});P[b]=O,y.push(P)}),l.rows=y}n("bin.quantile",o)},"./src/transform/bin/rectangle.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./src/data-set.ts"),c=s.DataSet.registerTransform,r=e("./src/util/option-parser.ts"),h={as:["x","y","count"],bins:[30,30],offset:[0,0],sizeByCount:!1};function n(a,o,l){var f=a-l,v=Math.floor(f/o);return[v*o+l,(v+1)*o+l]}function i(a,o){o=u.assign({},h,o);var l=t.__read(r.getFields(o),2),f=l[0],v=l[1];if(!f||!v)throw new TypeError("Invalid fields: must be an array with 2 strings!");var b=a.range(f),g=a.range(v),m=b[1]-b[0],_=g[1]-g[0],M=o.binWidth||[];if(M.length!==2){var x=t.__read(o.bins,2),y=x[0],S=x[1];if(y<=0||S<=0)throw new TypeError("Invalid bins: must be an array with 2 positive numbers (e.g. [ 30, 30 ])!");M=[m/y,_/S]}var P=a.rows.map(function(rt){return[rt[f],rt[v]]}),A={},O=t.__read(o.offset,2),L=O[0],H=O[1];P.forEach(function(rt){var ft=t.__read(n(rt[0],M[0],L),2),dt=ft[0],ut=ft[1],Lt=t.__read(n(rt[1],M[1],H),2),Ft=Lt[0],Ot=Lt[1],St=dt+"-"+ut+"-"+Ft+"-"+Ot;A[St]=A[St]||{x0:dt,x1:ut,y0:Ft,y1:Ot,count:0},A[St].count++});var F=[],Z=t.__read(o.as,3),G=Z[0],U=Z[1],Y=Z[2];if(!G||!U||!Y)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "count" ])!');if(!o.sizeByCount)u.forIn(A,function(rt){var ft={};ft[G]=[rt.x0,rt.x1,rt.x1,rt.x0],ft[U]=[rt.y0,rt.y0,rt.y1,rt.y1],ft[Y]=rt.count,F.push(ft)});else{var J=0;u.forIn(A,function(rt){rt.count>J&&(J=rt.count)}),u.forIn(A,function(rt){var ft=rt.x0,dt=rt.x1,ut=rt.y0,Lt=rt.y1,Ft=rt.count,Ot=Ft/J,St=t.__read([(ft+dt)/2,(ut+Lt)/2],2),xt=St[0],At=St[1],nt=(dt-ft)*Ot/2,Mt=(Lt-ut)*Ot/2,z=xt-nt,Q=xt+nt,ht=At-Mt,et=At+Mt,at={};at[G]=[z,Q,Q,z],at[U]=[ht,ht,et,et],at[Y]=Ft,F.push(at)})}a.rows=F}c("bin.rectangle",i),c("bin.rect",i)},"./src/transform/default.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");t.DataSet.registerTransform("default",function(u){return u})},"./src/transform/diagram/arc.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s={y:0,thickness:.05,weight:!1,marginRatio:.1,id:function(l){return l.id},source:function(l){return l.source},target:function(l){return l.target},sourceWeight:function(l){return l.value||1},targetWeight:function(l){return l.value||1},sortBy:null};function c(o,l,f){return f===void 0&&(f={}),o.forEach(function(v){var b=l.edgeSource(v),g=l.edgeTarget(v);f[b]||(f[b]={id:b}),f[g]||(f[g]={id:g})}),t.values(f)}function r(o,l,f){t.forIn(o,function(v,b){v.inEdges=l.filter(function(g){return""+f.target(g)==""+b}),v.outEdges=l.filter(function(g){return""+f.source(g)==""+b}),v.edges=v.outEdges.concat(v.inEdges),v.frequency=v.edges.length,v.value=0,v.inEdges.forEach(function(g){v.value+=f.targetWeight(g)}),v.outEdges.forEach(function(g){v.value+=f.sourceWeight(g)})})}function h(o,l){var f={weight:function(g,m){return m.value-g.value},frequency:function(g,m){return m.frequency-g.frequency},id:function(g,m){return(""+l.id(g)).localeCompare(""+l.id(m))}},v=f[l.sortBy];!v&&t.isFunction(l.sortBy)&&(v=l.sortBy),v&&o.sort(v)}function n(o,l){var f=o.length;if(!f)throw new TypeError("Invalid nodes: it's empty!");if(l.weight){var v=l.marginRatio;if(v<0||v>=1)throw new TypeError("Invalid marginRatio: it must be in range [0, 1)!");var b=v/(2*f),g=l.thickness;if(g<=0||g>=1)throw new TypeError("Invalid thickness: it must be in range (0, 1)!");var m=0;o.forEach(function(M){m+=M.value}),o.forEach(function(M){M.weight=M.value/m,M.width=M.weight*(1-v),M.height=g}),o.forEach(function(M,x){for(var y=0,S=x-1;S>=0;S--)y+=o[S].width+2*b;var P=M.minX=b+y,A=M.maxX=M.minX+M.width,O=M.minY=l.y-g/2,L=M.maxY=O+g;M.x=[P,A,A,P],M.y=[O,O,L,L]})}else{var _=1/f;o.forEach(function(M,x){M.x=(x+.5)*_,M.y=l.y})}}function i(o,l,f){if(f.weight){var v={};t.forIn(o,function(b,g){v[g]=b.value}),l.forEach(function(b){var g=f.source(b),m=f.target(b),_=o[g],M=o[m];if(_&&M){var x=v[g],y=f.sourceWeight(b),S=_.minX+(_.value-x)/_.value*_.width,P=S+y/_.value*_.width;v[g]-=y;var A=v[m],O=f.targetWeight(b),L=M.minX+(M.value-A)/M.value*M.width,H=L+O/M.value*M.width;v[m]-=O;var F=f.y;b.x=[S,P,L,H],b.y=[F,F,F,F]}})}else l.forEach(function(b){var g=o[f.source(b)],m=o[f.target(b)];g&&m&&(b.x=[g.x,m.x],b.y=[g.y,m.y])})}function a(o,l){l=t.assign({},s,l);var f={},v=o.nodes,b=o.edges;(!t.isArray(v)||v.length===0)&&(v=c(b,l,f)),v.forEach(function(g){var m=l.id(g);f[m]=g}),r(f,b,l),h(v,l),n(v,l),i(f,b,l),o.nodes=v,o.edges=b}u.DataSet.registerTransform("diagram.arc",a),u.DataSet.registerTransform("arc",a)},"./src/transform/diagram/dagre.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./node_modules/_dagre@0.8.5@dagre/index.js")),c=e("./src/data-set.ts"),r={rankdir:"TB",align:"TB",nodesep:50,edgesep:10,ranksep:50,source:function(i){return i.source},target:function(i){return i.target}};function h(n,i){i=u.assign({},r,i);var a=new s.default.graphlib.Graph;a.setGraph({}),a.setDefaultEdgeLabel(function(){return{}}),n.nodes.forEach(function(f){var v=i.nodeId?i.nodeId(f):f.id;!f.height&&!f.width&&(f.height=f.width=i.edgesep),a.setNode(v,f)}),n.edges.forEach(function(f){a.setEdge(i.source(f),i.target(f))}),s.default.layout(a);var o=[],l=[];a.nodes().forEach(function(f){var v=a.node(f),b=v.x,g=v.y,m=v.height,_=v.width;v.x=[b-_/2,b+_/2,b+_/2,b-_/2],v.y=[g+m/2,g+m/2,g-m/2,g-m/2],o.push(v)}),a.edges().forEach(function(f){var v=a.edge(f).points,b={};b.x=v.map(function(g){return g.x}),b.y=v.map(function(g){return g.y}),l.push(b)}),n.nodes=o,n.edges=l}c.DataSet.registerTransform("diagram.dagre",h),c.DataSet.registerTransform("dagre",h)},"./src/transform/diagram/sankey.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./node_modules/_d3-sankey@0.9.1@d3-sankey/dist/d3-sankey.js"),s=e("./src/data-set.ts"),c={sankeyLeft:u.sankeyLeft,sankeyRight:u.sankeyRight,sankeyCenter:u.sankeyCenter,sankeyJustify:u.sankeyJustify},r={value:function(i){return i.value},source:function(i){return i.source},target:function(i){return i.target},nodeAlign:"sankeyJustify",nodeWidth:.02,nodePadding:.02,sort:void 0};function h(n,i){i=t.assign({},r,i);var a=null;t.isString(i.nodeAlign)?a=c[i.nodeAlign]:t.isFunction(i.nodeAlign)&&(a=i.nodeAlign);var o=u.sankey().nodeSort(i.sort).links(function(l){return l.edges}).nodeWidth(i.nodeWidth).nodePadding(i.nodePadding).extent([[0,0],[1,1]]);t.isFunction(i.nodeId)&&o.nodeId(i.nodeId),a&&o.nodeAlign(a),o(n),n.nodes.forEach(function(l){var f=l.x0,v=l.x1,b=l.y0,g=l.y1;l.x=[f,v,v,f],l.y=[b,b,g,g]}),n.edges.forEach(function(l){var f=l.source,v=l.target,b=f.x1,g=v.x0;l.x=[b,b,g,g];var m=l.width/2;l.y=[l.y0+m,l.y0-m,l.y1+m,l.y1-m]})}s.DataSet.registerTransform("diagram.sankey",h),s.DataSet.registerTransform("sankey",h)},"./src/transform/diagram/voronoi.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importStar(e("./node_modules/_d3-voronoi@1.1.4@d3-voronoi/dist/d3-voronoi.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/data-set.ts"),r=c.DataSet.registerTransform,h=e("./src/util/option-parser.ts"),n={as:["_x","_y"]};function i(a,o){o=s.assign({},n,o);var l=o.as;if(!s.isArray(l)||l.length!==2)throw new TypeError("Invalid as: must be an array with two strings!");var f=l[0],v=l[1],b=h.getFields(o);if(!s.isArray(b)||b.length!==2)throw new TypeError("Invalid fields: must be an array with two strings!");var g=b[0],m=b[1],_=a.rows,M=_.map(function(S){return[S[g],S[m]]}),x=u.voronoi();o.extend&&x.extent(o.extend),o.size&&x.size(o.size);var y=x(M).polygons();_.forEach(function(S,P){var A=y[P].filter(function(O){return!!O});S[f]=A.map(function(O){return O[0]}),S[v]=A.map(function(O){return O[1]})})}r("diagram.voronoi",i),r("voronoi",i)},"./src/transform/fill-rows.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),c=e("./src/data-set.ts"),r={fillBy:"group",groupBy:[],orderBy:[]};function h(i,a){var o=i.map(function(l){return l});return a.forEach(function(l){var f=o.indexOf(l);f>-1&&o.splice(f,1)}),o}function n(i,a){a=u.assign({},r,a);var o=i.rows,l=a.groupBy,f=a.orderBy,v=s.default(o,l,f),b=0,g=[];u.forIn(v,function(P){P.length>b&&(b=P.length,g=P)});var m=[],_={};if(g.forEach(function(P){var A=f.map(function(O){return P[O]}).join("-");m.push(A),_[A]=P}),a.fillBy==="order"){var M=g[0],x=[],y={};o.forEach(function(P){var A=f.map(function(O){return P[O]}).join("-");x.indexOf(A)===-1&&(x.push(A),y[A]=P)});var S=h(x,m);S.forEach(function(P){var A={};l.forEach(function(O){A[O]=M[O]}),f.forEach(function(O){A[O]=y[P][O]}),o.push(A),g.push(A),m.push(P),_[P]=A}),b=g.length}u.forIn(v,function(P){if(P!==g&&P.length<b){var A=P[0],O=[];P.forEach(function(H){O.push(f.map(function(F){return H[F]}).join("-"))});var L=h(m,O);L.some(function(H,F){if(F>=b-P.length)return!0;var Z=_[H],G={};return l.forEach(function(U){G[U]=A[U]}),f.forEach(function(U){G[U]=Z[U]}),o.push(G),!1})}})}c.DataSet.registerTransform("fill-rows",n),c.DataSet.registerTransform("fillRows",n)},"./src/transform/filter.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");function u(s){return!!s}t.DataSet.registerTransform("filter",function(s,c){s.rows=s.rows.filter(c.callback||u)})},"./src/transform/fold.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s=e("./src/util/option-parser.ts"),c={fields:[],key:"key",retains:[],value:"value"};u.DataSet.registerTransform("fold",function(r,h){var n=r.getColumnNames();h=t.assign({},c,h);var i=s.getFields(h);i.length===0&&(console.warn("warning: option fields is not specified, will fold all columns."),i=n);var a=h.key,o=h.value,l=h.retains;(!l||l.length===0)&&(l=t.difference(n,i));var f=[];r.rows.forEach(function(v){i.forEach(function(b){var g=t.pick(v,l);g[a]=b,g[o]=v[b],f.push(g)})}),r.rows=f})},"./src/transform/geo/centroid.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s=u.DataSet.registerTransform,c=e("./src/util/option-parser.ts"),r={as:["_centroid_x","_centroid_y"]};function h(n,i){i=t.assign({},r,i);var a=c.getField(i),o=i.geoView||i.geoDataView;if(t.isString(o)&&n.dataSet&&(o=n.dataSet.getView(o)),!o||o.dataType!=="geo")throw new TypeError("Invalid geoView: must be a DataView of GEO dataType!");var l=i.as;if(!t.isArray(l)||l.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "cX", "cY" ])!');var f=l[0],v=l[1];n.rows.forEach(function(b){var g=o.geoFeatureByName(b[a]);g&&(o._projectedAs?(b[f]=g[o._projectedAs[2]],b[v]=g[o._projectedAs[3]]):(b[f]=g.centroidX,b[v]=g.centroidY))})}s("geo.centroid",h)},"./src/transform/geo/projection.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js"),c=t.__importDefault(e("./node_modules/_point-at-length@1.1.0@point-at-length/index.js")),r=e("./src/data-set.ts"),h=r.DataSet.registerTransform,n=t.__importDefault(e("./src/util/get-geo-projection.ts")),i={as:["_x","_y","_centroid_x","_centroid_y"]};function a(o,l){if(o.dataType!=="geo"&&o.dataType!=="geo-graticule")throw new TypeError("Invalid dataView: this transform is for Geo data only!");l=u.assign({},i,l);var f=l.projection;if(!f)throw new TypeError("Invalid projection!");f=n.default(f);var v=s.geoPath(f),b=l.as;if(!u.isArray(b)||b.length!==4)throw new TypeError('Invalid as: it must be an array with 4 strings (e.g. [ "x", "y", "cX", "cY" ])!');o._projectedAs=b;var g=t.__read(b,4),m=g[0],_=g[1],M=g[2],x=g[3];o.rows.forEach(function(y){y[m]=[],y[_]=[];var S=v(y);if(S){var P=c.default(S);P._path.forEach(function(O){y[m].push(O[1]),y[_].push(O[2])});var A=v.centroid(y);y[M]=A[0],y[x]=A[1]}}),o.rows=o.rows.filter(function(y){return y[m].length!==0})}h("geo.projection",a)},"./src/transform/geo/region.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s=u.DataSet.registerTransform,c=e("./src/util/option-parser.ts"),r={as:["_x","_y"]};function h(n,i){i=t.assign({},r,i);var a=c.getField(i),o=i.geoView||i.geoDataView;if(t.isString(o)&&(o=n.dataSet.getView(o)),!o||o.dataType!=="geo")throw new TypeError("Invalid geoView: must be a DataView of GEO dataType!");var l=i.as;if(!t.isArray(l)||l.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f=l[0],v=l[1];n.rows.forEach(function(b){var g=o.geoFeatureByName(b[a]);g&&(o._projectedAs?(b[f]=g[o._projectedAs[0]],b[v]=g[o._projectedAs[1]]):(b[f]=g.longitude,b[v]=g.latitude))})}s("geo.region",h)},"./src/transform/hierarchy/cluster.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={field:"value",size:[1,1],nodeSize:null,separation:null,as:["x","y"]};function n(i,a){if(i.dataType!==c.DataSet.CONSTANTS.HIERARCHY||!i.root)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=s.assign({},h,a);var l=a.as;if(!s.isArray(l)||l.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f=void 0;try{f=r.getField(a)}catch(m){console.warn(m)}f&&o.sum(function(m){return m[f]});var v=u.cluster();v.size(a.size),a.nodeSize&&v.nodeSize(a.nodeSize),a.separation&&v.separation(a.separation),v(o);var b=l[0],g=l[1];o.each(function(m){m[b]=m.x,m[g]=m.y})}c.DataSet.registerTransform("hierarchy.cluster",n),c.DataSet.registerTransform("dendrogram",n)},"./src/transform/hierarchy/compact-box.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importDefault(e("./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js")),s=e("./src/data-set.ts"),c={};function r(h,n){var i=h.root;if(n=Object.assign({},c,n),h.dataType!==s.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");h.root=u.default.compactBox(i,n)}s.DataSet.registerTransform("hierarchy.compact-box",r),s.DataSet.registerTransform("compact-box-tree",r),s.DataSet.registerTransform("non-layered-tidy-tree",r),s.DataSet.registerTransform("mindmap-logical",r)},"./src/transform/hierarchy/dendrogram.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importDefault(e("./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js")),s=e("./src/data-set.ts"),c={};function r(h,n){var i=h.root;if(n=Object.assign({},c,n),h.dataType!==s.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");h.root=u.default.dendrogram(i,n)}s.DataSet.registerTransform("hierarchy.dendrogram",r),s.DataSet.registerTransform("dendrogram",r)},"./src/transform/hierarchy/indented.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importDefault(e("./node_modules/_@antv_hierarchy@0.6.6@@antv/hierarchy/build/hierarchy.js")),s=e("./src/data-set.ts"),c={};function r(h,n){var i=h.root;if(n=Object.assign({},c,n),h.dataType!==s.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");h.root=u.default.indented(i,n)}s.DataSet.registerTransform("hierarchy.indented",r),s.DataSet.registerTransform("indented-tree",r)},"./src/transform/hierarchy/pack.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={field:"value",size:[1,1],padding:0,as:["x","y","r"]};function n(i,a){if(i.dataType!==c.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=u.assign({},h,a);var l=a.as;if(!u.isArray(l)||l.length!==3)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var f;try{f=r.getField(a)}catch(_){console.warn(_)}f&&o.sum(function(_){return _[f]}).sort(function(_,M){return M[f]-_[f]});var v=s.pack();v.size(a.size),a.padding&&v.padding(a.padding),v(o);var b=l[0],g=l[1],m=l[2];o.each(function(_){_[b]=_.x,_[g]=_.y,_[m]=_.r})}c.DataSet.registerTransform("hierarchy.pack",n),c.DataSet.registerTransform("hierarchy.circle-packing",n),c.DataSet.registerTransform("circle-packing",n)},"./src/transform/hierarchy/partition.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={field:"value",size:[1,1],round:!1,padding:0,sort:!0,as:["x","y"]};function n(i,a){if(i.dataType!==c.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=s.assign({},h,a);var l=a.as;if(!s.isArray(l)||l.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f;try{f=r.getField(a)}catch(m){console.warn(m)}f&&o.sum(function(m){return m[f]});var v=u.partition();v.size(a.size).round(a.round).padding(a.padding),v(o);var b=l[0],g=l[1];o.each(function(m){m[b]=[m.x0,m.x1,m.x1,m.x0],m[g]=[m.y1,m.y1,m.y0,m.y0],["x0","x1","y0","y1"].forEach(function(_){l.indexOf(_)===-1&&delete m[_]})})}c.DataSet.registerTransform("hierarchy.partition",n),c.DataSet.registerTransform("adjacency",n)},"./src/transform/hierarchy/tree.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={field:"value",size:[1,1],nodeSize:null,separation:null,as:["x","y"]};function n(i,a){if(i.dataType!==c.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=s.assign({},h,a);var l=a.as;if(!s.isArray(l)||l.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f;try{f=r.getField(a)}catch(m){console.warn(m)}f&&o.sum(function(m){return m[f]});var v=u.tree();v.size(a.size),a.nodeSize&&v.nodeSize(a.nodeSize),a.separation&&v.separation(a.separation),v(o);var b=l[0],g=l[1];o.each(function(m){m[b]=m.x,m[g]=m.y})}c.DataSet.registerTransform("hierarchy.tree",n),c.DataSet.registerTransform("tree",n)},"./src/transform/hierarchy/treemap.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importStar(e("./node_modules/_d3-hierarchy@1.1.9@d3-hierarchy/dist/d3-hierarchy.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"]};function n(i,a){if(i.dataType!==c.DataSet.CONSTANTS.HIERARCHY)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var o=i.root;a=s.assign({},h,a);var l=a.as;if(!s.isArray(l)||l.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var f;try{f=r.getField(a)}catch(m){console.warn(m)}f&&o.sum(function(m){return m[f]});var v=u.treemap();v.tile(u[a.tile]).size(a.size).round(a.round).padding(a.padding).paddingInner(a.paddingInner).paddingOuter(a.paddingOuter).paddingTop(a.paddingTop).paddingRight(a.paddingRight).paddingBottom(a.paddingBottom).paddingLeft(a.paddingLeft),v(o);var b=l[0],g=l[1];o.each(function(m){m[b]=[m.x0,m.x1,m.x1,m.x0],m[g]=[m.y1,m.y1,m.y0,m.y0],["x0","x1","y0","y1"].forEach(function(_){l.indexOf(_)===-1&&delete m[_]})})}c.DataSet.registerTransform("hierarchy.treemap",n),c.DataSet.registerTransform("treemap",n)},"./src/transform/impute.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importStar(e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js")),c=t.__importDefault(e("./src/util/partition.ts")),r=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),n={groupBy:[]};function i(f){return f.filter(function(v){return!u.isUndefined(v)})}var a=["mean","median","max","min"],o={};a.forEach(function(f){o[f]=function(v,b){return s[f](b)}}),o.value=function(f,v,b){return b};function l(f,v){v=u.assign({},n,v);var b=h.getField(v),g=v.method;if(!g)throw new TypeError("Invalid method!");if(g==="value"&&!u.has(v,"value"))throw new TypeError("Invalid value: it is nil.");var m=i(f.getColumn(b)),_=c.default(f.rows,v.groupBy);u.forIn(_,function(M){var x=i(M.map(function(y){return y[b]}));x.length===0&&(x=m),M.forEach(function(y){if(u.isUndefined(y[b]))if(u.isFunction(g))y[b]=g(y,x,v.value,M);else if(u.isString(g))y[b]=o[g](y,x,v.value);else throw new TypeError("Invalid method: must be a function or one of "+a.join(", "))})})}r.DataSet.registerTransform("impute",l)},"./src/transform/kde.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/get-series-values.ts")),c=t.__importDefault(e("./src/util/kernel.ts")),r=t.__importStar(e("./src/util/bandwidth.ts")),h=t.__importDefault(e("./src/util/partition.ts")),n=e("./src/data-set.ts"),i=e("./src/util/option-parser.ts"),a=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),o={minSize:.01,as:["key","y","size"],extent:[],method:"gaussian",bandwidth:"nrd",step:0,groupBy:[]},l=u.keys(c.default),f=u.keys(r);function v(b,g){g=u.assign({},o,g);var m=i.getFields(g);if(!u.isArray(m)||m.length<1)throw new TypeError("invalid fields: must be an array of at least 1 strings!");var _=g.as;if(!u.isArray(_)||_.length!==3)throw new TypeError("invalid as: must be an array of 3 strings!");var M=g.method;if(u.isString(M)){if(l.indexOf(M)===-1)throw new TypeError("invalid method: "+M+". Must be one of "+l.join(", "));M=c.default[M]}if(!u.isFunction(M))throw new TypeError("invalid method: kernel method must be a function!");var x=g.extent;if(!u.isArray(x)||x.length===0){var y=[];u.each(m,function(H){var F=b.range(H);y=y.concat(F)}),x=[Math.min.apply(Math,t.__spread(y)),Math.max.apply(Math,t.__spread(y))]}var S=g.bandwidth;u.isString(S)&&r[S]?S=r[S](b.getColumn(m[0])):u.isFunction(S)?S=S(b.getColumn(m[0])):(!u.isNumber(S)||S<=0)&&(S=r.nrd(b.getColumn(m[0])));var P=s.default(x,g.step?g.step:S),A=[],O=g.groupBy,L=h.default(b.rows,O);u.forIn(L,function(H){var F={};u.each(m,function(Z){var G=u.pick(H[0],O);F[Z]=a.kernelDensityEstimation(H.map(function(ft){return ft[Z]}),M,S);var U=t.__read(_,3),Y=U[0],J=U[1],rt=U[2];G[Y]=Z,G[J]=[],G[rt]=[],u.each(P,function(ft){var dt=F[Z](ft);dt>=g.minSize&&(G[J].push(ft),G[rt].push(dt))}),A.push(G)})}),b.rows=A}n.DataSet.registerTransform("kernel-density-estimation",v),n.DataSet.registerTransform("kde",v),n.DataSet.registerTransform("KDE",v),T.default={KERNEL_METHODS:l,BANDWIDTH_METHODS:f}},"./src/transform/kernel-smooth/density.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/get-series-values.ts")),c=t.__importDefault(e("./src/util/kernel.ts")),r=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),n=e("./src/util/bandwidth.ts"),i={as:["x","y","z"],method:"gaussian"},a=u.keys(c.default);function o(l,f){var v,b;f=u.assign({},i,f);var g=h.getFields(f);if(!u.isArray(g)||g.length!==2)throw new TypeError("invalid fields: must be an array of 2 strings!");var m=t.__read(f.as,3),_=m[0],M=m[1],x=m[2];if(!u.isString(_)||!u.isString(M)||!u.isString(x))throw new TypeError("invalid as: must be an array of 3 strings!");var y;if(u.isString(f.method)){if(a.indexOf(f.method)===-1)throw new TypeError("invalid method: "+f.method+". Must be one of "+a.join(", "));y=c.default[f.method]}var S=t.__read(g,2),P=S[0],A=S[1],O=f.extent,L=f.bandwidth,H,F;O&&Array.isArray(O)&&Array.isArray(O[0])&&Array.isArray(O[1])?(v=t.__read(O,2),H=v[0],F=v[1]):(H=l.range(P),F=l.range(A));var Z,G;L&&Array.isArray(L)&&L.slice(0,2).every(u.isNumber)&&L.slice(0,2).every(function(At){return At>0})?(b=t.__read(L,2),Z=b[0],G=b[1]):(Z=n.silverman(l.getColumn(P)),G=n.silverman(l.getColumn(A)));for(var U=s.default(H,Z),Y=s.default(F,G),J=l.rows.length,rt=[],ft=0;ft<U.length;ft++)for(var dt=0;dt<Y.length;dt++){for(var ut=0,Lt=U[ft],Ft=Y[dt],Ot=0;Ot<J;Ot++)ut+=y((Lt-l.rows[Ot][P])/Z)*y((Ft-l.rows[Ot][A])/G);var St=1/(J*Z*G)*ut,xt={};xt[_]=Lt,xt[M]=Ft,xt[x]=St,rt.push(xt)}l.rows=rt}r.DataSet.registerTransform("kernel-smooth.density",o),r.DataSet.registerTransform("kernel.density",o),T.default={KERNEL_METHODS:a}},"./src/transform/kernel-smooth/regression.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/get-series-values.ts")),c=t.__importDefault(e("./src/util/kernel.ts")),r=e("./src/data-set.ts"),h=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),n=e("./src/util/option-parser.ts"),i=e("./src/util/bandwidth.ts"),a={as:["x","y"],method:"gaussian"},o=u.keys(c.default);function l(b,g,m,_){var M=(_-m)/g;return b(M)}function f(b){return function(g){return u.isArray(g)?g.map(function(m){return b(m)}):b(g)}}function v(b,g){g=u.assign({},a,g);var m=n.getFields(g);if(!u.isArray(m)||!(m.length===1||m.length===2))throw new TypeError("invalid fields: must be an array of 1 or 2 strings!");var _=t.__read(g.as,2),M=_[0],x=_[1];if(!u.isString(M)||!u.isString(x))throw new TypeError("invalid as: must be an array of 2 strings!");var y,S=g.method;if(u.isString(S)){if(o.indexOf(S)===-1)throw new TypeError("invalid method: "+S+". Must be one of "+o.join(", "));y=c.default[S]}var P=t.__read(m,2),A=P[0],O=P[1],L=b.getColumn(A),H=g.extent;(H||!u.isArray(H))&&(H=b.range(A));var F=g.bandwidth;(!F||!u.isNumber(F)||F<=0)&&(F=i.silverman(L));var Z=s.default(H,F),G=L.length,U=l.bind(null,y,F),Y;if(u.isNil(O))Y=f(function(ft){var dt=L.map(function(Ft){return U(ft,Ft)}),ut=h.sum(dt),Lt=G*F;return!ut||!Lt?0:ut/Lt});else{var J=b.getColumn(O);Y=f(function(ft){var dt=L.map(function(Ft){return U(ft,Ft)}),ut=h.sum(dt.map(function(Ft,Ot){return Ft*J[Ot]})),Lt=h.sum(dt);return!ut||!Lt?0:ut/Lt})}var rt=Z.map(function(ft){var dt={};return dt[M]=ft,dt[x]=Y(ft),dt});b.rows=rt}r.DataSet.registerTransform("kernel-smooth.regression",v),r.DataSet.registerTransform("kernel.regression",v),T.default={KERNEL_METHODS:o}},"./src/transform/map.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");function u(s){return s}t.DataSet.registerTransform("map",function(s,c){s.rows=s.rows.map(c.callback||u)})},"./src/transform/partition.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),c=e("./src/data-set.ts"),r={groupBy:[],orderBy:[]};c.DataSet.registerTransform("partition",function(n,i){i=u.assign({},r,i),n.rows=s.default(n.rows,i.groupBy,i.orderBy)});function h(n,i){i=u.assign({},r,i),n.rows=u.values(s.default(n.rows,i.groupBy,i.orderBy))}c.DataSet.registerTransform("group",h),c.DataSet.registerTransform("groups",h)},"./src/transform/percent.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),c=t.__importDefault(e("./src/util/partition.ts")),r=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),n={groupBy:[],as:"_percent"};function i(a,o){o=u.assign({},n,o);var l=h.getField(o),f=o.dimension,v=o.groupBy,b=o.as;if(!u.isString(f))throw new TypeError("Invalid dimension: must be a string!");if(u.isArray(b)&&(console.warn("Invalid as: must be a string, will use the first element of the array specified."),b=b[0]),!u.isString(b))throw new TypeError("Invalid as: must be a string!");var g=a.rows,m=[],_=c.default(g,v);u.forIn(_,function(M){var x=s.sum(M.map(function(S){return S[l]})),y=c.default(M,[f]);u.forIn(y,function(S){var P=s.sum(S.map(function(L){return L[l]})),A=S[0],O=A[f];A[l]=P,A[f]=O,x===0?A[b]=0:A[b]=P/x,m.push(A)})}),a.rows=m}r.DataSet.registerTransform("percent",i)},"./src/transform/pick.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s=e("./src/util/option-parser.ts");u.DataSet.registerTransform("pick",function(c,r){var h=s.getFields(r,c.getColumnNames());c.rows=c.rows.map(function(n){return t.pick(n,h)})})},"./src/transform/proportion.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/partition.ts")),c=e("./src/data-set.ts"),r=e("./src/util/option-parser.ts"),h={groupBy:[],as:"_proportion"};function n(i,a){a=u.assign({},h,a);var o=r.getField(a),l=a.dimension,f=a.groupBy,v=a.as;if(!u.isString(l))throw new TypeError("Invalid dimension: must be a string!");if(u.isArray(v)&&(console.warn("Invalid as: must be a string, will use the first element of the array specified."),v=v[0]),!u.isString(v))throw new TypeError("Invalid as: must be a string!");var b=i.rows,g=[],m=s.default(b,f);u.forIn(m,function(_){var M=_.length,x=s.default(_,[l]);u.forIn(x,function(y){var S=y.length,P=y[0],A=P[l];P[o]=S,P[l]=A,P[v]=S/M,g.push(P)})}),i.rows=g}c.DataSet.registerTransform("proportion",n)},"./src/transform/regression.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importDefault(e("./node_modules/_regression@2.0.1@regression/dist/regression.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),c=t.__importDefault(e("./src/util/get-series-values.ts")),r=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),n=e("./src/util/bandwidth.ts"),i={as:["x","y"],method:"linear",order:2,precision:2},a=["linear","exponential","logarithmic","power","polynomial"];function o(l,f){f=s.assign({},i,f);var v=h.getFields(f);if(!s.isArray(v)||v.length!==2)throw new TypeError("invalid fields: must be an array of 2 strings.");var b=t.__read(v,2),g=b[0],m=b[1],_=f.method;if(a.indexOf(_)===-1)throw new TypeError("invalid method: "+_+". Must be one of "+a.join(", "));var M=l.rows.map(function(F){return[F[g],F[m]]}),x=u.default[_](M,f),y=f.extent;(!s.isArray(y)||y.length!==2)&&(y=l.range(g));var S=f.bandwidth;(!s.isNumber(S)||S<=0)&&(S=n.silverman(l.getColumn(g)));var P=c.default(y,S),A=[],O=t.__read(f.as,2),L=O[0],H=O[1];P.forEach(function(F){var Z={},G=t.__read(x.predict(F),2),U=G[0],Y=G[1];Z[L]=U,Z[H]=Y,isFinite(Y)&&A.push(Z)}),l.rows=A}r.DataSet.registerTransform("regression",o),T.default={REGRESSION_METHODS:a}},"./src/transform/rename.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts");function s(c,r){var h=r.map||{},n={};t.isPlainObject(h)&&t.forIn(h,function(i,a){t.isString(i)&&t.isString(a)&&(n[a]=i)}),c.rows.forEach(function(i){t.forIn(n,function(a,o){var l=i[o];delete i[o],i[a]=l})})}u.DataSet.registerTransform("rename",s),u.DataSet.registerTransform("rename-fields",s)},"./src/transform/reverse.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");t.DataSet.registerTransform("reverse",function(u){u.rows.reverse()})},"./src/transform/sort-by.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u=e("./src/data-set.ts"),s=e("./src/util/option-parser.ts"),c=["ASC","DESC"];function r(h,n){var i=s.getFields(n,[h.getColumnName(0)]);if(!t.isArray(i))throw new TypeError("Invalid fields: must be an array with strings!");h.rows=t.sortBy(h.rows,i);var a=n.order;if(a&&c.indexOf(a)===-1)throw new TypeError("Invalid order: "+a+" must be one of "+c.join(", "));a==="DESC"&&h.rows.reverse()}u.DataSet.registerTransform("sort-by",r),u.DataSet.registerTransform("sortBy",r)},"./src/transform/sort.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts");t.DataSet.registerTransform("sort",function(u,s){var c=u.getColumnName(0);u.rows.sort(s.callback||function(r,h){return r[c]-h[c]})})},"./src/transform/subset.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./src/data-set.ts"),u=e("./src/util/option-parser.ts");t.DataSet.registerTransform("subset",function(s,c){var r=c.startRowIndex||0,h=c.endRowIndex||s.rows.length-1,n=u.getFields(c,s.getColumnNames());s.rows=s.getSubset(r,h,n)})},"./src/transform/tag-cloud.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./src/data-set.ts"),c=t.__importDefault(e("./src/util/tag-cloud.ts")),r=e("./src/util/option-parser.ts"),h={fields:["text","value"],font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:500};function n(i,a){a=u.assign({},h,a);var o=c.default();if(!a.size[0]||!a.size[1]){i.rows=[],i._tagCloud=o;return}["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval"].forEach(function(A){a[A]&&o[A](a[A])});var l=r.getFields(a),f=t.__read(l,2),v=f[0],b=f[1];if(!u.isString(v)||!u.isString(b))throw new TypeError('Invalid fields: must be an array with 2 strings (e.g. [ "text", "value" ])!');var g=i.rows.map(function(A){return A.text=A[v],A.value=A[b],A});o.words(g),a.imageMask&&o.createMask(a.imageMask);var m=o.start(),_=m._tags,M=m._bounds||[{x:0,y:0},{x:a.size[0],y:a.size[1]}];_.forEach(function(A){A.x+=a.size[0]/2,A.y+=a.size[1]/2});var x=t.__read(a.size,2),y=x[0],S=x[1],P=m.hasImage;_.push({text:"",value:0,x:P?0:M[0].x,y:P?0:M[0].y,opacity:0}),_.push({text:"",value:0,x:P?y:M[1].x,y:P?S:M[1].y,opacity:0}),i.rows=_,i._tagCloud=m}s.DataSet.registerTransform("tag-cloud",n),s.DataSet.registerTransform("word-cloud",n)},"./src/transform/waffle.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js"),c=t.__importDefault(e("./src/util/partition.ts")),r=e("./src/data-set.ts"),h=e("./src/util/option-parser.ts"),n={fields:["name","value"],rows:5,size:[1,1],scale:1,groupBy:[],maxCount:1e3,gapRatio:.1,as:["x","y"]};function i(a,o){o=u.assign({},n,o);var l=h.getFields(o),f=t.__read(l,2),v=f[0],b=f[1],g=t.__read(o.as,2),m=g[0],_=g[1],M=o.groupBy,x=c.default(a.rows,M),y=u.keys(x),S=t.__read(o.size,2),P=S[0],A=S[1],O=o.maxCount,L=y.length,H=A/L,F=o.rows,Z=o.gapRatio,G=[],U=o.scale,Y=0,J=0;u.forIn(x,function(rt){var ft=s.sum(u.map(rt,function(ut){return ut[b]})),dt=Math.ceil(ft*U/F);ft*U>O&&(U=O/ft,dt=Math.ceil(ft*U/F)),J=P/dt}),u.forIn(x,function(rt){var ft=[Y*H,(Y+1)*H],dt=ft[1]-ft[0],ut=dt*(1-Z)/F,Lt=0,Ft=0;u.each(rt,function(Ot){for(var St=Ot[b],xt=Math.round(St*U),At=0;At<xt;At++){Ft===F&&(Ft=0,Lt++);var nt=u.pick(Ot,[v,b].concat(M));nt[m]=Lt*J+J/2,nt[_]=Ft*ut+ut/2+ft[0],nt._wStep=J,nt._hStep=ut,Ft++,G.push(nt)}}),Y+=1}),a.rows=G}r.DataSet.registerTransform("waffle",i)},"./src/util/bandwidth.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.nrd=T.silverman=void 0;var t=e("./node_modules/_simple-statistics@6.1.1@simple-statistics/dist/simple-statistics.min.js");function u(c){var r=t.standardDeviation(c),h=4*Math.pow(r,5),n=3*c.length;return Math.pow(h/n,.2)}T.silverman=u;function s(c){var r=t.standardDeviation(c),h=t.interquartileRange(c);return typeof h=="number"&&(r=Math.min(r,h/1.34)),1.06*r*Math.pow(c.length,-.2)}T.nrd=s},"./src/util/get-geo-projection.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importStar(e("./node_modules/_d3-geo@1.6.4@d3-geo/build/d3-geo.js")),c=t.__importStar(e("./node_modules/_d3-geo-projection@2.1.2@d3-geo-projection/build/d3-geo-projection.js")),r=t.__importStar(e("./node_modules/_d3-composite-projections@1.4.0@d3-composite-projections/d3-composite-projections.js"));T.default=function(h,n){if(n===void 0&&(n=!1),u.isFunction(h))return n?h:h();if(u.isString(h)){if(s[h])return n?s[h]:s[h]();if(c[h])return n?c[h]:c[h]();if(r[h])return n?r[h]:r[h]()}return null}},"./src/util/get-series-values.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js");T.default=function(u,s){for(var c=s||1,r=t.__read(u,2),h=r[0],n=r[1],i=[],a=h;a<n;)i.push(a),a+=c;return i.push(n),i}},"./src/util/kernel.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(s){return Math.abs(s)<=1?.5:0}function u(s){var c=1-Math.pow(Math.abs(s),3);return Math.pow(c,3)}T.default={boxcar:t,cosine:function(c){return Math.abs(c)<=1?Math.PI/4*Math.cos(Math.PI/2*c):0},epanechnikov:function(c){return Math.abs(c)<1?.75*(1-c*c):0},gaussian:function(c){return .3989422804*Math.exp(-.5*c*c)},quartic:function(c){if(Math.abs(c)<1){var r=1-c*c;return 15/16*r*r}return 0},triangular:function(c){var r=Math.abs(c);return r<1?1-r:0},tricube:function(c){return Math.abs(c)<1?70/81*u(c):0},triweight:function(c){if(Math.abs(c)<1){var r=1-c*c;return 35/32*r*r*r}return 0},uniform:t}},"./src/util/option-parser.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.getFields=T.getField=void 0;var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),u="Invalid field: it must be a string!",s="Invalid fields: it must be an array!";function c(h,n){var i=h.field,a=h.fields;if(t.isString(i))return i;if(t.isArray(i))return console.warn(u),i[0];if(console.warn(u+" will try to get fields instead."),t.isString(a))return a;if(t.isArray(a)&&a.length)return a[0];if(n)return n;throw new TypeError(u)}T.getField=c;function r(h,n){var i=h.field,a=h.fields;if(t.isArray(a))return a;if(t.isString(a))return console.warn(s),[a];if(console.warn(s+" will try to get field instead."),t.isString(i))return console.warn(s),[i];if(t.isArray(i)&&i.length)return console.warn(s),i;if(n)return n;throw new TypeError(s)}T.getFields=r},"./src/util/p-by-fraction.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default=function(t){for(var u=1/t,s=[],c=0;c<=1;c=c+u)s.push(c);return s}},"./src/util/partition.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js"),s=t.__importDefault(e("./src/util/simple-sort-by.ts"));T.default=function(c,r,h){h===void 0&&(h=[]);var n=c;h&&h.length&&(n=s.default(c,h));var i;u.isFunction(r)?i=r:u.isArray(r)?i=function(l){return"_"+r.map(function(f){return l[f]}).join("-")}:u.isString(r)&&(i=function(l){return"_"+l[r]});var a=u.groupBy(n,i);return a}},"./src/util/simple-sort-by.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js");function u(s,c){c===void 0&&(c=[]);var r=void 0;return t.isFunction(c)?r=c:t.isArray(c)?r=function(n,i){for(var a=0;a<c.length;a++){var o=c[a];if(n[o]<i[o])return-1;if(n[o]>i[o])return 1}return 0}:t.isString(c)&&(r=function(n,i){return n[c]<i[c]?-1:n[c]>i[c]?1:0}),s.sort(r)}T.default=u},"./src/util/tag-cloud.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=Math.PI/180,s=1<<11>>5,c=1<<11;function r(P){return P.text}function h(){return"serif"}function n(){return"normal"}function i(P){return P.value}function a(){return~~(Math.random()*2)*90}function o(){return 1}function l(P,A,O,L){if(!A.sprite){var H=P.context,F=P.ratio;H.clearRect(0,0,(s<<5)/F,c/F);var Z=0,G=0,U=0,Y=O.length;for(--L;++L<Y;){A=O[L],H.save(),H.font=A.style+" "+A.weight+" "+~~((A.size+1)/F)+"px "+A.font;var J=H.measureText(A.text+"m").width*F,rt=A.size<<1;if(A.rotate){var ft=Math.sin(A.rotate*u),dt=Math.cos(A.rotate*u),ut=J*dt,Lt=J*ft,Ft=rt*dt,Ot=rt*ft;J=Math.max(Math.abs(ut+Ot),Math.abs(ut-Ot))+31>>5<<5,rt=~~Math.max(Math.abs(Lt+Ft),Math.abs(Lt-Ft))}else J=J+31>>5<<5;if(rt>U&&(U=rt),Z+J>=s<<5&&(Z=0,G+=U,U=0),G+rt>=c)break;H.translate((Z+(J>>1))/F,(G+(rt>>1))/F),A.rotate&&H.rotate(A.rotate*u),H.fillText(A.text,0,0),A.padding&&(H.lineWidth=2*A.padding,H.strokeText(A.text,0,0)),H.restore(),A.width=J,A.height=rt,A.xoff=Z,A.yoff=G,A.x1=J>>1,A.y1=rt>>1,A.x0=-A.x1,A.y0=-A.y1,A.hasText=!0,Z+=J}for(var St=H.getImageData(0,0,(s<<5)/F,c/F).data,xt=[];--L>=0;)if(A=O[L],!!A.hasText){for(var J=A.width,At=J>>5,rt=A.y1-A.y0,nt=0;nt<rt*At;nt++)xt[nt]=0;if(Z=A.xoff,Z==null)return;G=A.yoff;for(var Mt=0,z=-1,Q=0;Q<rt;Q++){for(var nt=0;nt<J;nt++){var ht=At*Q+(nt>>5),et=St[(G+Q)*(s<<5)+(Z+nt)<<2]?1<<31-nt%32:0;xt[ht]|=et,Mt|=et}Mt?z=Q:(A.y0++,rt--,Q--,G++)}A.y1=A.y0+z,A.sprite=xt.slice(0,(A.y1-A.y0)*At)}}}function f(P,A,O){O>>=5;for(var L=P.sprite,H=P.width>>5,F=P.x-(H<<4),Z=F&127,G=32-Z,U=P.y1-P.y0,Y=(P.y+P.y0)*O+(F>>5),J,rt=0;rt<U;rt++){J=0;for(var ft=0;ft<=H;ft++)if((J<<G|(ft<H?(J=L[rt*H+ft])>>>Z:0))&A[Y+ft])return!0;Y+=O}return!1}function v(P,A){var O=P[0],L=P[1];A.x+A.x0<O.x&&(O.x=A.x+A.x0),A.y+A.y0<O.y&&(O.y=A.y+A.y0),A.x+A.x1>L.x&&(L.x=A.x+A.x1),A.y+A.y1>L.y&&(L.y=A.y+A.y1)}function b(P,A){return P.x+P.x1>A[0].x&&P.x+P.x0<A[1].x&&P.y+P.y1>A[0].y&&P.y+P.y0<A[1].y}function g(P){var A=P[0]/P[1];return function(O){return[A*(O*=.1)*Math.cos(O),O*Math.sin(O)]}}function m(P){var A=4,O=A*P[0]/P[1],L=0,H=0;return function(F){var Z=F<0?-1:1;switch(Math.sqrt(1+4*Z*F)-Z&3){case 0:L+=O;break;case 1:H+=A;break;case 2:L-=O;break;default:H-=A;break}return[L,H]}}function _(P){for(var A=[],O=-1;++O<P;)A[O]=0;return A}function M(){return document.createElement("canvas")}function x(P){return typeof P=="function"?P:function(){return P}}var y={archimedean:g,rectangular:m};function S(){var P=[256,256],A=r,O=h,L=i,H=n,F=n,Z=a,G=o,U=g,Y=[],J=Infinity,rt=Math.random,ft=M,dt={};dt.canvas=function(Ft){return arguments.length?(ft=x(Ft),dt):ft},dt.start=function(){var Ft=t.__read(P,2),Ot=Ft[0],St=Ft[1],xt=ut(ft()),At=dt.board?dt.board:_((P[0]>>5)*P[1]),nt=Y.length,Mt=[],z=Y.map(function(at,gt){return at.text=A.call(this,at,gt),at.font=O.call(this,at,gt),at.style=H.call(this,at,gt),at.weight=F.call(this,at,gt),at.rotate=Z.call(this,at,gt),at.size=~~L.call(this,at,gt),at.padding=G.call(this,at,gt),at}).sort(function(at,gt){return gt.size-at.size}),Q=-1,ht=dt.board?[{x:0,y:0},{x:Ot,y:St}]:null;et();function et(){for(var at=Date.now();Date.now()-at<J&&++Q<nt;){var gt=z[Q];gt.x=Ot*(rt()+.5)>>1,gt.y=St*(rt()+.5)>>1,l(xt,gt,z,Q),gt.hasText&&Lt(At,gt,ht)&&(Mt.push(gt),ht?dt.hasImage||v(ht,gt):ht=[{x:gt.x+gt.x0,y:gt.y+gt.y0},{x:gt.x+gt.x1,y:gt.y+gt.y1}],gt.x-=P[0]>>1,gt.y-=P[1]>>1)}dt._tags=Mt,dt._bounds=ht}return dt};function ut(Ft){Ft.width=Ft.height=1;var Ot=Math.sqrt(Ft.getContext("2d").getImageData(0,0,1,1).data.length>>2);Ft.width=(s<<5)/Ot,Ft.height=c/Ot;var St=Ft.getContext("2d");return St.fillStyle=St.strokeStyle="red",St.textAlign="center",{context:St,ratio:Ot}}function Lt(Ft,Ot,St){for(var xt=Ot.x,At=Ot.y,nt=Math.sqrt(P[0]*P[0]+P[1]*P[1]),Mt=U(P),z=rt()<.5?1:-1,Q,ht=-z,et,at;(Q=Mt(ht+=z))&&(et=~~Q[0],at=~~Q[1],!(Math.min(Math.abs(et),Math.abs(at))>=nt));)if(Ot.x=xt+et,Ot.y=At+at,!(Ot.x+Ot.x0<0||Ot.y+Ot.y0<0||Ot.x+Ot.x1>P[0]||Ot.y+Ot.y1>P[1])&&(!St||!f(Ot,Ft,P[0]))&&(!St||b(Ot,St))){for(var gt=Ot.sprite,k=Ot.width>>5,ot=P[0]>>5,it=Ot.x-(k<<4),X=it&127,Et=32-X,vt=Ot.y1-Ot.y0,Nt=void 0,$t=(Ot.y+Ot.y0)*ot+(it>>5),ee=0;ee<vt;ee++){Nt=0;for(var kt=0;kt<=k;kt++)Ft[$t+kt]|=Nt<<Et|(kt<k?(Nt=gt[ee*k+kt])>>>X:0);$t+=ot}return delete Ot.sprite,!0}return!1}return dt.createMask=function(Ft){var Ot=document.createElement("canvas"),St=t.__read(P,2),xt=St[0],At=St[1];if(!(!xt||!At)){var nt=xt>>5,Mt=_((xt>>5)*At);Ot.width=xt,Ot.height=At;var z=Ot.getContext("2d");z.drawImage(Ft,0,0,Ft.width,Ft.height,0,0,xt,At);for(var Q=z.getImageData(0,0,xt,At).data,ht=0;ht<At;ht++)for(var et=0;et<xt;et++){var at=nt*ht+(et>>5),gt=ht*xt+et<<2,k=Q[gt]>=250&&Q[gt+1]>=250&&Q[gt+2]>=250,ot=k?1<<31-et%32:0;Mt[at]|=ot}dt.board=Mt,dt.hasImage=!0}},dt.timeInterval=function(Ft){return arguments.length?(J=Ft==null?Infinity:Ft,dt):J},dt.words=function(Ft){return arguments.length?(Y=Ft,dt):Y},dt.size=function(Ft){return arguments.length?(P=[+Ft[0],+Ft[1]],dt):P},dt.font=function(Ft){return arguments.length?(O=x(Ft),dt):O},dt.fontStyle=function(Ft){return arguments.length?(H=x(Ft),dt):H},dt.fontWeight=function(Ft){return arguments.length?(F=x(Ft),dt):F},dt.rotate=function(Ft){return arguments.length?(Z=x(Ft),dt):Z},dt.text=function(Ft){return arguments.length?(A=x(Ft),dt):A},dt.spiral=function(Ft){return arguments.length?(U=y[Ft]||Ft,dt):U},dt.fontSize=function(Ft){return arguments.length?(L=x(Ft),dt):L},dt.padding=function(Ft){return arguments.length?(G=x(Ft),dt):G},dt.random=function(Ft){return arguments.length?(rt=Ft,dt):rt},dt}T.default=S},"./src/view.ts":function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.View=void 0;var t=e("./node_modules/_tslib@2.1.0@tslib/tslib.js"),u=t.__importDefault(e("./node_modules/_wolfy87-eventemitter@5.2.9@wolfy87-eventemitter/EventEmitter.js")),s=e("./node_modules/_@antv_util@2.0.10@@antv/util/lib/index.js");function c(h){var n={};return s.forIn(h,function(i,a){s.isObject(i)&&i.isView?n[a]=i:s.isArray(i)?n[a]=i.concat([]):s.isPlainObject(i)?n[a]=s.clone(i):n[a]=i}),n}var r=function(h){t.__extends(n,h);function n(i,a){var o=h.call(this)||this;if(o.isView=!0,o.isDataView=!0,o.watchingStates=null,o.dataType="table",o.transforms=[],o.origin=[],o.rows=[],i&&i.isDataSet?o.dataSet=i:(o.dataSet=null,a=i),o.loose=!o.dataSet,a&&(o.watchingStates=a.watchingStates),!o.loose){var l=o.watchingStates;i.on("statechange",function(f){s.isArray(l)?l.indexOf(f)>-1&&o._reExecute():o._reExecute()})}return o}return n.prototype._parseStateExpression=function(i){var a=this.dataSet;if(a!==null){var o=/^\$state\.(\w+)/.exec(i);return o?a.state[o[1]]:i}},n.prototype._preparseOptions=function(i){var a=this,o=c(i);return this.loose||s.forIn(o,function(l,f){s.isString(l)&&/^\$state\./.test(l)&&(o[f]=a._parseStateExpression(l))}),o},n.prototype._prepareSource=function(i,a){if(this._source={source:i,options:a},a){var o=this._preparseOptions(a);this.origin=n.DataSet.getConnector(o.type)(i,o,this)}else if(i instanceof n||s.isString(i))this.origin=n.DataSet.getConnector("default")(i,this.dataSet);else if(s.isArray(i))this.origin=i;else if(s.isObject(i)&&i.type){var o=this._preparseOptions(i);this.origin=n.DataSet.getConnector(o.type)(o,this)}else throw new TypeError("Invalid source");return this.rows=s.deepMix([],this.origin),this},n.prototype.source=function(i,a){return this._prepareSource(i,a)._reExecuteTransforms(),this.trigger("change",[]),this},n.prototype.transform=function(i){return i&&i.type&&(this.transforms.push(i),this._executeTransform(i)),this},n.prototype._executeTransform=function(i){i=this._preparseOptions(i);var a=n.DataSet.getTransform(i.type);a(this,i)},n.prototype._reExecuteTransforms=function(){var i=this;this.transforms.forEach(function(a){i._executeTransform(a)})},n.prototype.addRow=function(i){this.rows.push(i)},n.prototype.removeRow=function(i){this.rows.splice(i,1)},n.prototype.updateRow=function(i,a){s.assign(this.rows[i],a)},n.prototype.findRows=function(i){return this.rows.filter(function(a){return s.isMatch(a,i)})},n.prototype.findRow=function(i){return s.find(this.rows,i)},n.prototype.getColumnNames=function(){var i=this.rows[0];return i?s.keys(i):[]},n.prototype.getColumnName=function(i){return this.getColumnNames()[i]},n.prototype.getColumnIndex=function(i){var a=this.getColumnNames();return a.indexOf(i)},n.prototype.getColumn=function(i){return this.rows.map(function(a){return a[i]})},n.prototype.getColumnData=function(i){return this.getColumn(i)},n.prototype.getSubset=function(i,a,o){for(var l=[],f=i;f<=a;f++)l.push(s.pick(this.rows[f],o));return l},n.prototype.toString=function(i){return i===void 0&&(i=!1),i?JSON.stringify(this.rows,null,2):JSON.stringify(this.rows)},n.prototype._reExecute=function(){var i=this._source,a=i.source,o=i.options;this._prepareSource(a,o),this._reExecuteTransforms(),this.trigger("change",[])},n}(u.default);T.View=r}})})},cSJO:function(Se,ct,R){"use strict";var V=this&&this.__spreadArray||function(r,h){for(var n=0,i=h.length,a=r.length;n<i;n++,a++)r[a]=h[n];return r};Object.defineProperty(ct,"__esModule",{value:!0}),ct.resolveInstance=void 0;var E=R("MON2"),T=R("FV85"),e=R("xfSm");function t(r,h,n){var i=h.filter(function(o){return o.target!==null&&o.target.type===T.TargetTypeEnum.ClassProperty}),a=i.map(n);return i.forEach(function(o,l){var f="";f=o.target.name.value();var v=a[l];r[f]=v}),r}function u(r,h){return new(r.bind.apply(r,V([void 0],h)))}function s(r,h){if(Reflect.hasMetadata(e.POST_CONSTRUCT,r)){var n=Reflect.getMetadata(e.POST_CONSTRUCT,r);try{h[n.value]()}catch(i){throw new Error(E.POST_CONSTRUCT_ERROR(r.name,i.message))}}}function c(r,h,n){var i=null;if(h.length>0){var a=h.filter(function(l){return l.target!==null&&l.target.type===T.TargetTypeEnum.ConstructorArgument}),o=a.map(n);i=u(r,o),i=t(i,h,n)}else i=new r;return s(r,i),i}ct.resolveInstance=c},cWXX:function(Se,ct,R){"use strict";var V=R("cIOH"),E=R.n(V),T=R("oIFs"),e=R.n(T)},cZ5Q:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.injectable=void 0;var V=R("MON2"),E=R("xfSm");function T(){return function(e){if(Reflect.hasOwnMetadata(E.PARAM_TYPES,e))throw new Error(V.DUPLICATED_INJECTABLE_DECORATOR);var t=Reflect.getMetadata(E.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(E.PARAM_TYPES,t,e),e}}ct.injectable=T},cZlC:function(Se,ct,R){"use strict";R.d(ct,"b",function(){return V}),R.d(ct,"c",function(){return E}),R.d(ct,"a",function(){return T});var V;(function(e){e.LINEAR="linear",e.POWER="power",e.LOG="log",e.IDENTITY="identity",e.TIME="time",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.CAT="cat"})(V||(V={}));var E;(function(e){e.CONSTANT="constant",e.VARIABLE="variable"})(E||(E={}));var T;(function(e){e[e.Attribute=0]="Attribute",e[e.InstancedAttribute=1]="InstancedAttribute",e[e.Uniform=2]="Uniform"})(T||(T={}))},"cq/+":function(Se,ct,R){var V=R("mc0g"),E=V();Se.exports=E},cvCv:function(Se,ct){function R(V){return function(){return V}}Se.exports=R},d9O0:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.id=void 0;var V=0;function E(){return V++}ct.id=E},dQpi:function(Se,ct,R){var V=R("yGk4"),E=R("vN+2"),T=R("rEGp"),e=1/0,t=V&&1/T(new V([,-0]))[1]==e?function(u){return new V(u)}:E;Se.exports=t},dTAl:function(Se,ct,R){var V=R("GoyQ"),E=Object.create,T=function(){function e(){}return function(t){if(!V(t))return{};if(E)return E(t);e.prototype=t;var u=new e;return e.prototype=void 0,u}}();Se.exports=T},dVn5:function(Se,ct){var R=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function V(E){return E.match(R)||[]}Se.exports=V},dX1H:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.Target=void 0;var V=R("xfSm"),E=R("d9O0"),T=R("GXnB"),e=R("zxMA"),t=function(){function u(s,c,r,h){this.id=E.id(),this.type=s,this.serviceIdentifier=r,this.name=new e.QueryableString(c||""),this.metadata=new Array;var n=null;typeof h=="string"?n=new T.Metadata(V.NAMED_TAG,h):h instanceof T.Metadata&&(n=h),n!==null&&this.metadata.push(n)}return u.prototype.hasTag=function(s){for(var c=0,r=this.metadata;c<r.length;c++){var h=r[c];if(h.key===s)return!0}return!1},u.prototype.isArray=function(){return this.hasTag(V.MULTI_INJECT_TAG)},u.prototype.matchesArray=function(s){return this.matchesTag(V.MULTI_INJECT_TAG)(s)},u.prototype.isNamed=function(){return this.hasTag(V.NAMED_TAG)},u.prototype.isTagged=function(){return this.metadata.some(function(s){return V.NON_CUSTOM_TAG_KEYS.every(function(c){return s.key!==c})})},u.prototype.isOptional=function(){return this.matchesTag(V.OPTIONAL_TAG)(!0)},u.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(s){return s.key===V.NAMED_TAG})[0]:null},u.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(s){return V.NON_CUSTOM_TAG_KEYS.every(function(c){return s.key!==c})}):null},u.prototype.matchesNamedTag=function(s){return this.matchesTag(V.NAMED_TAG)(s)},u.prototype.matchesTag=function(s){var c=this;return function(r){for(var h=0,n=c.metadata;h<n.length;h++){var i=n[h];if(i.key===s&&i.value===r)return!0}return!1}},u}();ct.Target=t},doU7:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.BindingCount=void 0;var V={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};ct.BindingCount=V},dt0z:function(Se,ct,R){var V=R("zoYe");function E(T){return T==null?"":V(T)}Se.exports=E},dxzI:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.AsyncContainerModule=ct.ContainerModule=void 0;var V=R("d9O0"),E=function(){function e(t){this.id=V.id(),this.registry=t}return e}();ct.ContainerModule=E;var T=function(){function e(t){this.id=V.id(),this.registry=t}return e}();ct.AsyncContainerModule=T},eUgh:function(Se,ct){function R(V,E){for(var T=-1,e=V==null?0:V.length,t=Array(e);++T<e;)t[T]=E(V[T],T,V);return t}Se.exports=R},"eg+a":function(Se,ct,R){"use strict";R.d(ct,"a",function(){return V});var V=["loaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"]},fX6N:function(Se,ct,R){"use strict";R.d(ct,"d",function(){return Kc}),R.d(ct,"b",function(){return Vf}),R.d(ct,"a",function(){return qf});var V=R("mNvP"),E=R("uhBA"),T=R.n(E),e=R("4cb6"),t=R("APxj"),u=R.n(t),s=R("bB6j"),c=R("lSNA"),r=R.n(c),h=R("lwsE"),n=R.n(h),i=R("W8MJ"),a=R.n(i),o=R("Hel2"),l=R("rxlC"),f=R.n(l);function v(ve,ye){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(ve);ye&&(Xt=Xt.filter(function(ke){return Object.getOwnPropertyDescriptor(ve,ke).enumerable})),Gt.push.apply(Gt,Xt)}return Gt}function b(ve){for(var ye=1;ye<arguments.length;ye++){var Gt=arguments[ye]!=null?arguments[ye]:{};ye%2?v(Object(Gt),!0).forEach(function(Xt){r()(ve,Xt,Gt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):v(Object(Gt)).forEach(function(Xt){Object.defineProperty(ve,Xt,Object.getOwnPropertyDescriptor(Gt,Xt))})}return ve}function g(ve,ye){var Gt=typeof Symbol!="undefined"&&ve[Symbol.iterator]||ve["@@iterator"];if(!Gt){if(Array.isArray(ve)||(Gt=m(ve))||ye&&ve&&typeof ve.length=="number"){Gt&&(ve=Gt);var Xt=0,ke=function(){};return{s:ke,n:function(){return Xt>=ve.length?{done:!0}:{done:!1,value:ve[Xt++]}},e:function(ti){throw ti},f:ke}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var un=!0,Wn=!1,ir;return{s:function(){Gt=Gt.call(ve)},n:function(){var ti=Gt.next();return un=ti.done,ti},e:function(ti){Wn=!0,ir=ti},f:function(){try{!un&&Gt.return!=null&&Gt.return()}finally{if(Wn)throw ir}}}}function m(ve,ye){if(!!ve){if(typeof ve=="string")return _(ve,ye);var Gt=Object.prototype.toString.call(ve).slice(8,-1);if(Gt==="Object"&&ve.constructor&&(Gt=ve.constructor.name),Gt==="Map"||Gt==="Set")return Array.from(ve);if(Gt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Gt))return _(ve,ye)}}function _(ve,ye){(ye==null||ye>ve.length)&&(ye=ve.length);for(var Gt=0,Xt=new Array(ye);Gt<ye;Gt++)Xt[Gt]=ve[Gt];return Xt}var M=30;function x(ve){var ye=ve.characterSet,Gt=ve.getFontWidth,Xt=ve.fontHeight,ke=ve.buffer,un=ve.maxCanvasWidth,Wn=ve.mapping,ir=Wn===void 0?{}:Wn,dr=ve.xOffset,ti=dr===void 0?0:dr,Ci=ve.yOffset,Ji=Ci===void 0?0:Ci,fa=0,na=ti;Array.from(ye).forEach(function($a,Vo){if(!ir[$a]){var To=Gt($a,Vo);na+M>un&&(na=0,fa++),ir[$a]={x:na,y:Ji+fa*M,width:M,height:M,advance:To},na+=M}});var no=Xt+ke*2;return{mapping:ir,xOffset:na,yOffset:Ji+fa*no,canvasHeight:P(Ji+(fa+1)*no)}}function y(ve,ye,Gt){var Xt=0,ke=0,un=0,Wn=[],ir={},dr=g(ve),ti;try{for(dr.s();!(ti=dr.n()).done;){var Ci=ti.value;if(!ir[Ci.id]){var Ji=Ci.size;Xt+Ji+ye>Gt&&(S(ir,Wn,ke),Xt=0,ke=un+ke+ye,un=0,Wn=[]),Wn.push({icon:Ci,xOffset:Xt}),Xt=Xt+Ji+ye,un=Math.max(un,Ji)}}}catch(na){dr.e(na)}finally{dr.f()}Wn.length>0&&S(ir,Wn,ke);var fa=P(un+ke+ye);return{mapping:ir,canvasHeight:fa}}function S(ve,ye,Gt){var Xt=g(ye),ke;try{for(Xt.s();!(ke=Xt.n()).done;){var un=ke.value,Wn=un.icon,ir=un.xOffset;ve[Wn.id]=b(b({},Wn),{},{x:ir,y:Gt,image:Wn.image,width:Wn.width,height:Wn.height})}}catch(dr){Xt.e(dr)}finally{Xt.f()}}function P(ve){return Math.pow(2,Math.ceil(Math.log2(ve)))}var A,O;function L(ve,ye){var Gt=typeof Symbol!="undefined"&&ve[Symbol.iterator]||ve["@@iterator"];if(!Gt){if(Array.isArray(ve)||(Gt=H(ve))||ye&&ve&&typeof ve.length=="number"){Gt&&(ve=Gt);var Xt=0,ke=function(){};return{s:ke,n:function(){return Xt>=ve.length?{done:!0}:{done:!1,value:ve[Xt++]}},e:function(ti){throw ti},f:ke}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var un=!0,Wn=!1,ir;return{s:function(){Gt=Gt.call(ve)},n:function(){var ti=Gt.next();return un=ti.done,ti},e:function(ti){Wn=!0,ir=ti},f:function(){try{!un&&Gt.return!=null&&Gt.return()}finally{if(Wn)throw ir}}}}function H(ve,ye){if(!!ve){if(typeof ve=="string")return F(ve,ye);var Gt=Object.prototype.toString.call(ve).slice(8,-1);if(Gt==="Object"&&ve.constructor&&(Gt=ve.constructor.name),Gt==="Map"||Gt==="Set")return Array.from(ve);if(Gt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Gt))return F(ve,ye)}}function F(ve,ye){(ye==null||ye>ve.length)&&(ye=ve.length);for(var Gt=0,Xt=new Array(ye);Gt<ye;Gt++)Xt[Gt]=ve[Gt];return Xt}function Z(ve,ye){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(ve);ye&&(Xt=Xt.filter(function(ke){return Object.getOwnPropertyDescriptor(ve,ke).enumerable})),Gt.push.apply(Gt,Xt)}return Gt}function G(ve){for(var ye=1;ye<arguments.length;ye++){var Gt=arguments[ye]!=null?arguments[ye]:{};ye%2?Z(Object(Gt),!0).forEach(function(Xt){r()(ve,Xt,Gt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):Z(Object(Gt)).forEach(function(Xt){Object.defineProperty(ve,Xt,Object.getOwnPropertyDescriptor(Gt,Xt))})}return ve}var U=At(),Y="sans-serif",J="normal",rt=24,ft=3,dt=.25,ut=8,Lt=1024,Ft=1,Ot=1,St=3,xt=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function At(){for(var ve=[],ye=32;ye<128;ye++)ve.push(String.fromCharCode(ye));return ve}function nt(ve,ye,Gt,Xt){ve.font="".concat(Xt," ").concat(Gt,"px ").concat(ye),ve.fillStyle="black",ve.textBaseline="middle"}function Mt(ve,ye){for(var Gt=0;Gt<ve.length;Gt++)ye.data[4*Gt+3]=ve[Gt]}var z=(A=Object(e.injectable)(),A(O=function(){function ve(){n()(this,ve),this.fontAtlas=void 0,this.iconFontGlyphs={},this.fontOptions=void 0,this.key=void 0,this.cache=new o.b(St)}return a()(ve,[{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:Y,fontWeight:J,characterSet:U,fontSize:rt,buffer:ft,sdf:!0,cutoff:dt,radius:ut},this.key=""}},{key:"addIconGlyphs",value:function(Gt){var Xt=this;Gt.forEach(function(ke){Xt.iconFontGlyphs[ke.name]=ke.unicode})}},{key:"getGlyph",value:function(Gt){return this.iconFontGlyphs[Gt]?String.fromCharCode(parseInt(this.iconFontGlyphs[Gt],16)):""}},{key:"scale",get:function(){return Ot}},{key:"canvas",get:function(){var Gt=this.cache.get(this.key);return Gt&&Gt.data}},{key:"mapping",get:function(){var Gt=this.cache.get(this.key);return Gt&&Gt.mapping}},{key:"setFontOptions",value:function(Gt){this.fontOptions=G(G({},this.fontOptions),Gt),this.key=this.getKey();var Xt=this.getNewChars(this.key,this.fontOptions.characterSet),ke=this.cache.get(this.key);if(!(ke&&Xt.length===0)){var un=this.generateFontAtlas(this.key,Xt,ke);this.fontAtlas=un,this.cache.set(this.key,un)}}},{key:"destroy",value:function(){this.cache.clear()}},{key:"generateFontAtlas",value:function(Gt,Xt,ke){var un=this.fontOptions,Wn=un.fontFamily,ir=un.fontWeight,dr=un.fontSize,ti=un.buffer,Ci=un.sdf,Ji=un.radius,fa=un.cutoff,na=ke&&ke.data;na||(na=document.createElement("canvas"),na.width=Lt);var no=na.getContext("2d");nt(no,Wn,dr,ir);var $a=x(G({getFontWidth:function(jc){return no.measureText(jc).width},fontHeight:dr*Ot,buffer:ti,characterSet:Xt,maxCanvasWidth:Lt},ke&&{mapping:ke.mapping,xOffset:ke.xOffset,yOffset:ke.yOffset})),Vo=$a.mapping,To=$a.canvasHeight,pu=$a.xOffset,lu=$a.yOffset,Vu=no.getImageData(0,0,na.width,na.height);if(na.height=To,no.putImageData(Vu,0,0),nt(no,Wn,dr,ir),Ci){var gu=new f.a(dr,ti,Ji,fa,Wn,ir),vl=no.getImageData(0,0,gu.size,gu.size),Qo=L(Xt),ms;try{for(Qo.s();!(ms=Qo.n()).done;){var Us=ms.value;Mt(gu.draw(Us),vl),no.putImageData(vl,Vo[Us].x,Vo[Us].y)}}catch(Lc){Qo.e(Lc)}finally{Qo.f()}}else{var Tu=L(Xt),pl;try{for(Tu.s();!(pl=Tu.n()).done;){var Gl=pl.value;no.fillText(Gl,Vo[Gl].x,Vo[Gl].y+dr*Ft)}}catch(Lc){Tu.e(Lc)}finally{Tu.f()}}return{xOffset:pu,yOffset:lu,mapping:Vo,data:na,width:na.width,height:na.height}}},{key:"getKey",value:function(){var Gt=this.fontOptions,Xt=Gt.fontFamily,ke=Gt.fontWeight,un=Gt.fontSize,Wn=Gt.buffer,ir=Gt.sdf,dr=Gt.radius,ti=Gt.cutoff;return ir?"".concat(Xt," ").concat(ke," ").concat(un," ").concat(Wn," ").concat(dr," ").concat(ti):"".concat(Xt," ").concat(ke," ").concat(un," ").concat(Wn)}},{key:"getNewChars",value:function(Gt,Xt){var ke=this.cache.get(Gt);if(!ke)return Xt;var un=[],Wn=ke.mapping,ir=new Set(Object.keys(Wn)),dr=new Set(Xt);return dr.forEach(function(ti){ir.has(ti)||un.push(ti)}),un}}]),ve}())||O),Q=R("7W2i"),ht=R.n(Q),et=R("a1gu"),at=R.n(et),gt=R("Nsbk"),k=R.n(gt),ot,it;function X(ve){var ye=Et();return function(){var Xt=k()(ve),ke;if(ye){var un=k()(this).constructor;ke=Reflect.construct(Xt,arguments,un)}else ke=Xt.apply(this,arguments);return at()(this,ke)}}function Et(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var vt=3,Nt=1024,$t=64,ee=(ot=Object(e.injectable)(),ot(it=function(ve){ht()(Gt,ve);var ye=X(Gt);function Gt(){var Xt;n()(this,Gt);for(var ke=arguments.length,un=new Array(ke),Wn=0;Wn<ke;Wn++)un[Wn]=arguments[Wn];return Xt=ye.call.apply(ye,[this].concat(un)),Xt.canvasHeight=128,Xt.texture=void 0,Xt.canvas=void 0,Xt.iconData=void 0,Xt.iconMap=void 0,Xt.ctx=void 0,Xt.loadingImageCount=0,Xt}return a()(Gt,[{key:"isLoading",value:function(){return this.loadingImageCount===0}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(ke,un){var Wn=this,ir=new Image;if(this.loadingImageCount++,this.hasImage(ke))throw new Error("Image Id already exists");this.iconData.push({id:ke,size:$t}),this.updateIconMap(),this.loadImage(un).then(function(dr){ir=dr;var ti=Wn.iconData.find(function(Ci){return Ci.id===ke});ti&&(ti.image=ir,ti.width=ir.width,ti.height=ir.height),Wn.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(ke){return this.iconMap.hasOwnProperty(ke)}},{key:"removeImage",value:function(ke){this.hasImage(ke)&&(this.iconData=this.iconData.filter(function(un){return un.id!==ke}),delete this.iconMap[ke],this.update())}},{key:"destroy",value:function(){this.iconData=[],this.iconMap={}}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var ke=this;this.canvas.width=Nt,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(un){var Wn=ke.iconMap[un],ir=Wn.x,dr=Wn.y,ti=Wn.image,Ci=Wn.width,Ji=Ci===void 0?64:Ci,fa=Wn.height,na=fa===void 0?64:fa,no=Math.max(Ji,na),$a=no/$t,Vo=na/$a,To=Ji/$a;ti&&ke.ctx.drawImage(ti,ir+($t-To)/2,dr+($t-Vo)/2,To,Vo)})}},{key:"updateIconMap",value:function(){var ke=y(this.iconData,vt,Nt),un=ke.mapping,Wn=ke.canvasHeight;this.iconMap=un,this.canvasHeight=Wn}},{key:"loadImage",value:function(ke){return new Promise(function(un,Wn){if(ke instanceof HTMLImageElement){un(ke);return}var ir=new Image;ir.crossOrigin="anonymous",ir.onload=function(){un(ir)},ir.onerror=function(){Wn(new Error("Could not load image at "+ke))},ir.src=ke instanceof File?URL.createObjectURL(ke):ke})}}]),Gt}(E.EventEmitter))||it),kt=R("J4zp"),Wt=R.n(kt),ae=R("IOcx"),le,je,Oe=(le=Object(e.injectable)(),le(je=function(){function ve(){n()(this,ve),this.viewport=void 0,this.overridedViewProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0,this.jitteredProjectionMatrix=void 0,this.viewMatrixInverse=void 0,this.cameraPosition=void 0}return a()(ve,[{key:"init",value:function(){}},{key:"update",value:function(Gt){this.viewport=Gt,this.viewMatrixInverse=ae.b.invert(ae.b.create(),this.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var Gt=this.viewport.getCenter(),Xt=Wt()(Gt,2),ke=Xt[0],un=Xt[1];return[ke,un]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(Gt,Xt){return this.viewport.projectFlat(Gt,Xt)}},{key:"setViewProjectionMatrix",value:function(Gt){this.overridedViewProjectionMatrix=Gt}},{key:"jitterProjectionMatrix",value:function(Gt,Xt){var ke=ae.b.fromTranslation(ae.b.create(),[Gt,Xt,0]);this.jitteredProjectionMatrix=ae.b.multiply(ae.b.create(),ke,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=ae.b.multiply(ae.b.create(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),ve}())||je),We,Ye;function wn(ve,ye){var Gt=typeof Symbol!="undefined"&&ve[Symbol.iterator]||ve["@@iterator"];if(!Gt){if(Array.isArray(ve)||(Gt=er(ve))||ye&&ve&&typeof ve.length=="number"){Gt&&(ve=Gt);var Xt=0,ke=function(){};return{s:ke,n:function(){return Xt>=ve.length?{done:!0}:{done:!1,value:ve[Xt++]}},e:function(ti){throw ti},f:ke}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var un=!0,Wn=!1,ir;return{s:function(){Gt=Gt.call(ve)},n:function(){var ti=Gt.next();return un=ti.done,ti},e:function(ti){Wn=!0,ir=ti},f:function(){try{!un&&Gt.return!=null&&Gt.return()}finally{if(Wn)throw ir}}}}function er(ve,ye){if(!!ve){if(typeof ve=="string")return wr(ve,ye);var Gt=Object.prototype.toString.call(ve).slice(8,-1);if(Gt==="Object"&&ve.constructor&&(Gt=ve.constructor.name),Gt==="Map"||Gt==="Set")return Array.from(ve);if(Gt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Gt))return wr(ve,ye)}}function wr(ve,ye){(ye==null||ye>ve.length)&&(ye=ve.length);for(var Gt=0,Xt=new Array(ye);Gt<ye;Gt++)Xt[Gt]=ve[Gt];return Xt}var on=(We=Object(e.injectable)(),We(Ye=function(){function ve(){n()(this,ve),this.container=void 0,this.controlCorners=void 0,this.controlContainer=void 0,this.scene=void 0,this.mapsService=void 0,this.controls=[],this.unAddControls=[]}return a()(ve,[{key:"init",value:function(Gt,Xt){this.container=Gt.container,this.scene=Xt,this.mapsService=Xt.get(s.a.IMapService),this.initControlPos()}},{key:"addControl",value:function(Gt,Xt){var ke=Xt.get(s.a.IMapService);ke.map?(Gt.addTo(this.scene),this.controls.push(Gt)):this.unAddControls.push(Gt)}},{key:"getControlByName",value:function(Gt){return this.controls.find(function(Xt){return Xt.controlOption.name===Gt})}},{key:"removeControl",value:function(Gt){var Xt=this.controls.indexOf(Gt);return Xt>-1&&this.controls.splice(Xt,1),Gt.remove(),this}},{key:"addControls",value:function(){var Gt=this;this.unAddControls.forEach(function(Xt){Xt.addTo(Gt.scene),Gt.controls.push(Xt)}),this.unAddControls=[]}},{key:"destroy",value:function(){var Gt=wn(this.controls),Xt;try{for(Gt.s();!(Xt=Gt.n()).done;){var ke=Xt.value;ke.remove()}}catch(un){Gt.e(un)}finally{Gt.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var Gt=this.controlCorners={},Xt="l7-",ke=this.controlContainer=o.a.create("div",Xt+"control-container",this.container);function un(Wn,ir){var dr=Xt+Wn+" "+Xt+ir;Gt[Wn+ir]=o.a.create("div",dr,ke)}un("top","left"),un("top","right"),un("bottom","left"),un("bottom","right")}},{key:"clearControlPos",value:function(){for(var Gt in this.controlCorners)this.controlCorners[Gt]&&o.a.remove(this.controlCorners[Gt]);this.controlContainer&&o.a.remove(this.controlContainer),delete this.controlCorners,delete this.controlContainer}}]),ve}())||Ye),en,An,jn=(en=Object(e.injectable)(),en(An=function(){function ve(){n()(this,ve),this.container=void 0,this.scene=void 0,this.mapsService=void 0,this.markers=[],this.markerLayers=[],this.unAddMarkers=[],this.unAddMarkerLayers=[]}return a()(ve,[{key:"addMarkerLayer",value:function(Gt){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(Gt),Gt.addTo(this.scene)):this.unAddMarkerLayers.push(Gt)}},{key:"removeMarkerLayer",value:function(Gt){Gt.destroy(),this.markerLayers.indexOf(Gt);var Xt=this.markerLayers.indexOf(Gt);Xt>-1&&this.markerLayers.splice(Xt,1)}},{key:"addMarker",value:function(Gt){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(Gt),Gt.addTo(this.scene)):this.unAddMarkers.push(Gt)}},{key:"addMarkers",value:function(){var Gt=this;this.unAddMarkers.forEach(function(Xt){Xt.addTo(Gt.scene),Gt.markers.push(Xt)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var Gt=this;this.unAddMarkerLayers.forEach(function(Xt){Gt.markerLayers.push(Xt),Xt.addTo(Gt.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(Gt){Gt.remove(),this.markers.indexOf(Gt);var Xt=this.markers.indexOf(Gt);Xt>-1&&this.markers.splice(Xt,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(Gt){this.scene=Gt,this.mapsService=Gt.get(s.a.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(Gt){Gt.remove()}),this.markers=[],this.markerLayers.forEach(function(Gt){Gt.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(Gt){Gt.destroy()}}]),ve}())||An),pr,di,Ce=(pr=Object(e.injectable)(),pr(di=function(){function ve(){n()(this,ve),this.scene=void 0,this.popup=void 0,this.mapsService=void 0,this.unAddPopup=void 0}return a()(ve,[{key:"removePopup",value:function(Gt){Gt.remove()}},{key:"destroy",value:function(){this.popup.remove()}},{key:"addPopup",value:function(Gt){this.popup&&this.popup.remove(),this.mapsService.map&&this.mapsService.getMarkerContainer()?(Gt.addTo(this.scene),this.popup=Gt):this.unAddPopup=Gt}},{key:"initPopup",value:function(){this.unAddPopup&&(this.addPopup(this.unAddPopup),this.unAddPopup=null)}},{key:"init",value:function(Gt){this.scene=Gt,this.mapsService=Gt.get(s.a.IMapService)}}]),ve}())||di),Me=R("QkVN"),Qt=R.n(Me),pe={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo\u6D4B\u8BD5\u5730\u56FEtoken\uFF0C\u5982\u679C\u751F\u4EA7\u73AF\u5883\u4E2D\u4F7F\u7528\u53BB\u5BF9\u5E94\u5730\u56FE\u8BF7\u6CE8\u518CToken",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},Vt=pe,re,Te;function ue(ve,ye){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(ve);ye&&(Xt=Xt.filter(function(ke){return Object.getOwnPropertyDescriptor(ve,ke).enumerable})),Gt.push.apply(Gt,Xt)}return Gt}function xe(ve){for(var ye=1;ye<arguments.length;ye++){var Gt=arguments[ye]!=null?arguments[ye]:{};ye%2?ue(Object(Gt),!0).forEach(function(Xt){r()(ve,Xt,Gt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):ue(Object(Gt)).forEach(function(Xt){Object.defineProperty(ve,Xt,Object.getOwnPropertyDescriptor(Gt,Xt))})}return ve}var Ke={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},Rn={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",selectColor:"blue",enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15}},tr=(re=Object(e.injectable)(),re(Te=function(){function ve(){n()(this,ve),this.sceneConfigCache={},this.layerConfigCache={}}return a()(ve,[{key:"getSceneConfig",value:function(Gt){return this.sceneConfigCache[Gt]}},{key:"getSceneWarninfo",value:function(Gt){return Vt[Gt]}},{key:"setSceneConfig",value:function(Gt,Xt){this.sceneConfigCache[Gt]=xe(xe({},Ke),Xt)}},{key:"getLayerConfig",value:function(Gt){return this.layerConfigCache[Gt]}},{key:"setLayerConfig",value:function(Gt,Xt,ke){this.layerConfigCache[Xt]=xe({},Qt()({},this.sceneConfigCache[Gt],Rn,ke))}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),ve}())||Te),Pn=R("yG8O"),dn=R.n(Pn),Ar=R("U+yc"),or=R.n(Ar),cn=R("1ABj"),Pr=Math.PI/180,Sr=512,Re=4003e4;function $e(ve){var ye=ve.latitude,Gt=ye===void 0?0:ye,Xt=ve.zoom,ke=Xt===void 0?0:Xt,un=ve.scale,Wn=ve.highPrecision,ir=Wn===void 0?!1:Wn,dr=ve.flipY,ti=dr===void 0?!1:dr;un=un!==void 0?un:Math.pow(2,ke);var Ci={},Ji=Sr*un,fa=Math.cos(Gt*Pr),na=Ji/360,no=na/fa,$a=Ji/Re/fa;if(Ci.pixelsPerMeter=[$a,-$a,$a],Ci.metersPerPixel=[1/$a,-1/$a,1/$a],Ci.pixelsPerDegree=[na,-no,$a],Ci.degreesPerPixel=[1/na,-1/no,1/$a],ir){var Vo=Pr*Math.tan(Gt*Pr)/fa,To=na*Vo/2,pu=Ji/Re*Vo,lu=pu/no*$a;Ci.pixelsPerDegree2=[0,-To,pu],Ci.pixelsPerMeter2=[lu,0,lu],ti&&(Ci.pixelsPerDegree2[1]=-Ci.pixelsPerDegree2[1],Ci.pixelsPerMeter2[1]=-Ci.pixelsPerMeter2[1])}return ti&&(Ci.pixelsPerMeter[1]=-Ci.pixelsPerMeter[1],Ci.metersPerPixel[1]=-Ci.metersPerPixel[1],Ci.pixelsPerDegree[1]=-Ci.pixelsPerDegree[1],Ci.degreesPerPixel[1]=-Ci.degreesPerPixel[1]),Ci}var Ve=R("HthE"),En,xn,Nn,mn,Dn,$n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Hn=(En=Object(e.injectable)(),xn=Object(e.inject)(s.a.ICameraService),En(Nn=(mn=function(){function ve(){n()(this,ve),this.needRefresh=!0,dn()(this,"cameraService",Dn,this),this.coordinateSystem=void 0,this.viewportCenter=void 0,this.viewportCenterProjection=void 0,this.pixelsPerDegree=void 0,this.pixelsPerDegree2=void 0,this.pixelsPerMeter=void 0}return a()(ve,[{key:"refresh",value:function(){var Gt=this.cameraService.getZoom(),Xt=this.cameraService.getZoomScale(),ke=this.cameraService.getCenter(),un=$e({latitude:ke[1],zoom:Gt}),Wn=un.pixelsPerMeter,ir=un.pixelsPerDegree;this.viewportCenter=ke,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=Wn,this.pixelsPerDegree=ir,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Ve.a.LNGLAT||this.coordinateSystem===Ve.a.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Ve.a.LNGLAT_OFFSET?this.calculateLnglatOffset(ke,Gt):this.coordinateSystem===Ve.a.P20_OFFSET&&this.calculateLnglatOffset(ke,Gt,Xt,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(Gt){this.coordinateSystem=Gt}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(Gt,Xt,ke,un){var Wn=$e({latitude:Gt[1],zoom:Xt,scale:ke,flipY:un,highPrecision:!0}),ir=Wn.pixelsPerMeter,dr=Wn.pixelsPerDegree,ti=Wn.pixelsPerDegree2,Ci=this.cameraService.getViewMatrix(),Ji=this.cameraService.getProjectionMatrix(),fa=ae.b.multiply([],Ji,Ci),na=this.cameraService.projectFlat([Math.fround(Gt[0]),Math.fround(Gt[1])],Math.pow(2,Xt));this.viewportCenterProjection=ae.e.transformMat4([],[na[0],na[1],0,1],fa),Ci=this.cameraService.getViewMatrixUncentered()||Ci,fa=ae.b.multiply([],Ji,Ci),fa=ae.b.multiply([],fa,$n),this.cameraService.setViewProjectionMatrix(fa),this.pixelsPerMeter=ir,this.pixelsPerDegree=dr,this.pixelsPerDegree2=ti}}]),ve}(),Dn=or()(mn.prototype,"cameraService",[xn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mn))||Nn),_n=R("PJYZ"),br=R.n(_n),yr=R("yLV6"),Fr=R.n(yr),Ei=R("V1cb"),Ta,Aa,eo,Ho,Do,io,ds;function Ko(ve){var ye=jo();return function(){var Xt=k()(ve),ke;if(ye){var un=k()(this).constructor;ke=Reflect.construct(Xt,arguments,un)}else ke=Xt.apply(this,arguments);return at()(this,ke)}}function jo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var bs={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancle"},Ra=(Ta=Object(e.injectable)(),Aa=Object(e.inject)(s.a.IMapService),eo=Object(e.inject)(s.a.ILogService),Ta(Ho=(Do=function(ve){ht()(Gt,ve);var ye=Ko(Gt);function Gt(){var Xt;n()(this,Gt);for(var ke=arguments.length,un=new Array(ke),Wn=0;Wn<ke;Wn++)un[Wn]=arguments[Wn];return Xt=ye.call.apply(ye,[this].concat(un)),dn()(Xt,"mapService",io,br()(Xt)),dn()(Xt,"logger",ds,br()(Xt)),Xt.hammertime=void 0,Xt.lastClickTime=0,Xt.lastClickXY=[-1,-1],Xt.clickTimer=void 0,Xt.$containter=void 0,Xt.onDrag=function(ir){var dr=Xt.interactionEvent(ir);dr.type=bs[dr.type],Xt.emit(Ei.a.Drag,dr)},Xt.onHammer=function(ir){ir.srcEvent.stopPropagation();var dr=Xt.interactionEvent(ir);Xt.emit(Ei.a.Hover,dr)},Xt.onTouch=function(ir){var dr=ir.touches[0];Xt.onHover({x:dr.pageX,y:dr.pageY,type:"touch"})},Xt.onHover=function(ir){var dr=ir.clientX,ti=ir.clientY,Ci=dr,Ji=ti,fa=ir.type,na=Xt.mapService.getMapContainer();if(na){var no=na.getBoundingClientRect(),$a=no.top,Vo=no.left;Ci=Ci-Vo-na.clientLeft,Ji=Ji-$a-na.clientTop}var To=Xt.mapService.containerToLngLat([Ci,Ji]);if(fa==="click"){if("ontouchstart"in document.documentElement)return;Xt.isDoubleTap(Ci,Ji,To);return}if(fa==="touch"){Xt.isDoubleTap(Ci,Ji,To);return}fa!=="click"&&fa!=="dblclick"&&Xt.emit(Ei.a.Hover,{x:Ci,y:Ji,lngLat:To,type:fa,target:ir})},Xt}return a()(Gt,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(Ei.a.Hover)}},{key:"triggerHover",value:function(ke){var un=ke.x,Wn=ke.y;this.emit(Ei.a.Hover,{x:un,y:Wn})}},{key:"triggerSelect",value:function(ke){this.emit(Ei.a.Select,{featureId:ke})}},{key:"triggerActive",value:function(ke){this.emit(Ei.a.Active,{featureId:ke})}},{key:"addEventListenerOnMap",value:function(){var ke=this.mapService.getMapContainer();if(ke){var un=new Fr.a.Manager(ke);un.add(new Fr.a.Tap({event:"dblclick",taps:2})),un.add(new Fr.a.Tap({event:"click"})),un.add(new Fr.a.Pan({threshold:0,pointers:0})),un.add(new Fr.a.Press({})),un.on("dblclick click",this.onHammer),un.on("panstart panmove panend pancancel",this.onDrag),ke.addEventListener("mousemove",this.onHover),ke.addEventListener("mousedown",this.onHover,!0),ke.addEventListener("mouseup",this.onHover),ke.addEventListener("contextmenu",this.onHover),this.hammertime=un,this.logger.debug("add event listeners on canvas")}}},{key:"removeEventListenerOnMap",value:function(){var ke=this.mapService.getMapContainer();ke&&(ke.removeEventListener("mousemove",this.onHover),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),ke.removeEventListener("mousedown",this.onHover),ke.removeEventListener("mouseup",this.onHover),ke.removeEventListener("contextmenu",this.onHover))}},{key:"interactionEvent",value:function(ke){var un=ke.type,Wn=ke.pointerType,ir,dr;Wn==="touch"?(dr=Math.floor(ke.pointers[0].clientY),ir=Math.floor(ke.pointers[0].clientX)):(dr=Math.floor(ke.srcEvent.y),ir=Math.floor(ke.srcEvent.x));var ti=this.mapService.getMapContainer();if(ti){var Ci=ti.getBoundingClientRect(),Ji=Ci.top,fa=Ci.left;ir-=fa,dr-=Ji}var na=this.mapService.containerToLngLat([ir,dr]);return{x:ir,y:dr,lngLat:na,type:un,target:ke.srcEvent}}},{key:"isDoubleTap",value:function(ke,un,Wn){var ir=this,dr=new Date().getTime(),ti="click";dr-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-ke)<10&&Math.abs(this.lastClickXY[1]-un)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),ti="dblclick",this.emit(Ei.a.Hover,{x:ke,y:un,lngLat:Wn,type:ti})):(this.lastClickTime=dr,this.lastClickXY=[ke,un],this.clickTimer=setTimeout(function(){ti="click",ir.emit(Ei.a.Hover,{x:ke,y:un,lngLat:Wn,type:ti})},400))}}]),Gt}(T.a),io=or()(Do.prototype,"mapService",[Aa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ds=or()(Do.prototype,"logger",[eo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Do))||Ho),Xo=R("yXPU"),Bo=R.n(Xo),qs=R("o0o1"),ao=R.n(qs),so=R("o+pz"),Hs,Ne,se,Yt,Ee,sn,Fn,rr,qn,Xr,Si;function Oi(ve,ye){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(ve);ye&&(Xt=Xt.filter(function(ke){return Object.getOwnPropertyDescriptor(ve,ke).enumerable})),Gt.push.apply(Gt,Xt)}return Gt}function Gi(ve){for(var ye=1;ye<arguments.length;ye++){var Gt=arguments[ye]!=null?arguments[ye]:{};ye%2?Oi(Object(Gt),!0).forEach(function(Xt){r()(ve,Xt,Gt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):Oi(Object(Gt)).forEach(function(Xt){Object.defineProperty(ve,Xt,Object.getOwnPropertyDescriptor(Gt,Xt))})}return ve}var sa=(Hs=Object(e.injectable)(),Ne=Object(e.inject)(s.a.IRendererService),se=Object(e.inject)(s.a.IGlobalConfigService),Yt=Object(e.inject)(s.a.IInteractionService),Ee=Object(e.inject)(s.a.ILayerService),Hs(sn=(Fn=function(){function ve(){var ye=this;n()(this,ve),dn()(this,"rendererService",rr,this),dn()(this,"configService",qn,this),dn()(this,"interactionService",Xr,this),dn()(this,"layerService",Si,this),this.pickingFBO=void 0,this.width=0,this.height=0,this.alreadyInPicking=!1,this.pickBufferScale=1,this.pickFromPickingFBO=function(Gt,Xt){var ke,un=Xt.x,Wn=Xt.y,ir=Xt.lngLat,dr=Xt.type,ti=Xt.target,Ci=!1,Ji=ye.rendererService,fa=Ji.getViewportSize,na=Ji.readPixels,no=Ji.getContainer,$a=no().getBoundingClientRect(),Vo=$a.width,To=$a.height;Vo*=o.a.DPR,To*=o.a.DPR;var pu=Gt.getLayerConfig(),lu=pu.enableHighlight,Vu=pu.enableSelect,gu=un*o.a.DPR,vl=Wn*o.a.DPR;if(gu>Vo-1*o.a.DPR||gu<0||vl>To-1*o.a.DPR||vl<0)return!1;var Qo;if(Qo=na({x:Math.floor(gu/ye.pickBufferScale),y:Math.floor((To-(Wn+1)*o.a.DPR)/ye.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:ye.pickingFBO}),Qo[0]!==0||Qo[1]!==0||Qo[2]!==0){var ms=Object(o.k)(Qo),Us=Gt.getSource().getFeatureById(ms);ms!==Gt.getCurrentPickId()&&dr==="mousemove"&&(dr="mouseenter");var Tu={x:un,y:Wn,type:dr,lngLat:ir,featureId:ms,feature:Us,target:ti};Us&&(Ci=!0,Gt.setCurrentPickId(ms),ye.triggerHoverOnLayer(Gt,Tu))}else{var pl={x:un,y:Wn,lngLat:ir,type:Gt.getCurrentPickId()!==null&&dr==="mousemove"?"mouseout":"un"+dr,featureId:null,target:ti,feature:null};ye.triggerHoverOnLayer(Gt,Gi(Gi({},pl),{},{type:"unpick"})),ye.triggerHoverOnLayer(Gt,pl),Gt.setCurrentPickId(null)}if(lu&&ye.highlightPickedFeature(Gt,Qo),Vu&&dr==="click"&&((ke=Qo)===null||ke===void 0?void 0:ke.toString())!==[0,0,0,0].toString()){var Gl=Object(o.k)(Qo);Gt.getCurrentSelectedId()===null||Gl!==Gt.getCurrentSelectedId()?(ye.selectFeature(Gt,Qo),Gt.setCurrentSelectedId(Gl)):(ye.selectFeature(Gt,new Uint8Array([0,0,0,0])),Gt.setCurrentSelectedId(null))}return Ci}}return a()(ve,[{key:"init",value:function(Gt){var Xt=this.rendererService,ke=Xt.createTexture2D,un=Xt.createFramebuffer,Wn=Xt.getViewportSize,ir=Xt.getContainer,dr=ir().getBoundingClientRect(),ti=dr.width,Ci=dr.height;ti*=o.a.DPR,Ci*=o.a.DPR,this.pickBufferScale=this.configService.getSceneConfig(Gt).pickBufferScale||1,this.pickingFBO=un({color:ke({width:Math.round(ti/this.pickBufferScale),height:Math.round(Ci/this.pickBufferScale),wrapS:so.a.CLAMP_TO_EDGE,wrapT:so.a.CLAMP_TO_EDGE})}),this.interactionService.on(Ei.a.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var ye=Bo()(ao.a.mark(function Xt(ke,un,Wn){var ir=this,dr,ti,Ci,Ji;return ao.a.wrap(function(na){for(;;)switch(na.prev=na.next){case 0:dr=this.rendererService,ti=dr.useFramebuffer,Ci=dr.clear,Ji=dr.getContainer,this.resizePickingFBO(),ti(this.pickingFBO,function(){Ci({framebuffer:ir.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),ke.hooks.beforePickingEncode.call(),ke.renderModels(),ke.hooks.afterPickingEncode.call();var no=ir.pickBox(ke,un);Wn(no)});case 3:case"end":return na.stop()}},Xt,this)}));function Gt(Xt,ke,un){return ye.apply(this,arguments)}return Gt}()},{key:"pickBox",value:function(Gt,Xt){var ke=this,un=Xt.map(function(pl){var Gl=pl<0?0:pl;return Math.floor(Gl*o.a.DPR/ke.pickBufferScale)}),Wn=Wt()(un,4),ir=Wn[0],dr=Wn[1],ti=Wn[2],Ci=Wn[3],Ji=this.rendererService,fa=Ji.getViewportSize,na=Ji.readPixels,no=Ji.getContainer,$a=no().getBoundingClientRect(),Vo=$a.width,To=$a.height;if(Vo*=o.a.DPR,To*=o.a.DPR,ir>(Vo-1)*o.a.DPR/this.pickBufferScale||ti<0||dr>(To-1)*o.a.DPR/this.pickBufferScale||Ci<0)return[];var pu,lu=Math.min(Vo/this.pickBufferScale,ti)-ir,Vu=Math.min(To/this.pickBufferScale,Ci)-dr;pu=na({x:ir,y:Math.floor(To/this.pickBufferScale-(Ci+1)),width:lu,height:Vu,data:new Uint8Array(lu*Vu*4),framebuffer:this.pickingFBO});for(var gu=[],vl={},Qo=0;Qo<pu.length/4;Qo=Qo+1){var ms=pu.slice(Qo*4,Qo*4+4),Us=Object(o.k)(ms);if(Us!==-1&&!vl[Us]){var Tu=Gt.getSource().getFeatureById(Us);gu.push(Tu),vl[Us]=!0}}return gu}},{key:"pickingAllLayer",value:function(){var ye=Bo()(ao.a.mark(function Xt(ke){return ao.a.wrap(function(Wn){for(;;)switch(Wn.prev=Wn.next){case 0:if(!(this.alreadyInPicking||this.layerService.alreadyInRendering)){Wn.next=2;break}return Wn.abrupt("return");case 2:return this.alreadyInPicking=!0,Wn.next=5,this.pickingLayers(ke);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return Wn.stop()}},Xt,this)}));function Gt(Xt){return ye.apply(this,arguments)}return Gt}()},{key:"resizePickingFBO",value:function(){var Gt=this.rendererService.getContainer,Xt=Gt().getBoundingClientRect(),ke=Xt.width,un=Xt.height;ke*=o.a.DPR,un*=o.a.DPR,(this.width!==ke||this.height!==un)&&(this.pickingFBO.resize({width:Math.round(ke/this.pickBufferScale),height:Math.round(un/this.pickBufferScale)}),this.width=ke,this.height=un)}},{key:"pickingLayers",value:function(){var ye=Bo()(ao.a.mark(function Xt(ke){var un=this,Wn,ir,dr,ti,Ci;return ao.a.wrap(function(fa){for(;;)switch(fa.prev=fa.next){case 0:Wn=this.rendererService,ir=Wn.getViewportSize,dr=Wn.useFramebuffer,ti=Wn.clear,Ci=Wn.getContainer,this.resizePickingFBO(),dr(this.pickingFBO,function(){var na=un.layerService.getLayers();na.filter(function(no){return no.needPick(ke.type)}).reverse().some(function(no){ti({framebuffer:un.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),no.hooks.beforePickingEncode.call(),no.renderModels(),no.hooks.afterPickingEncode.call();var $a=un.pickFromPickingFBO(no,ke);return $a&&!no.getLayerConfig().enablePropagation})});case 3:case"end":return fa.stop()}},Xt,this)}));function Gt(Xt){return ye.apply(this,arguments)}return Gt}()},{key:"triggerHoverOnLayer",value:function(Gt,Xt){Gt.emit(Xt.type,Xt)}},{key:"highlightPickedFeature",value:function(Gt,Xt){var ke=Wt()(Xt,3),un=ke[0],Wn=ke[1],ir=ke[2];Gt.hooks.beforeHighlight.call([un,Wn,ir])}},{key:"selectFeature",value:function(Gt,Xt){var ke=Wt()(Xt,3),un=ke[0],Wn=ke[1],ir=ke[2];Gt.hooks.beforeSelect.call([un,Wn,ir])}}]),ve}(),rr=or()(Fn.prototype,"rendererService",[Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qn=or()(Fn.prototype,"configService",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xr=or()(Fn.prototype,"interactionService",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Si=or()(Fn.prototype,"layerService",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fn))||sn),qa=function(){function ve(){var ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;n()(this,ve),this.autoStart=void 0,this.startTime=0,this.oldTime=0,this.running=!1,this.elapsedTime=0,this.autoStart=ye}return a()(ve,[{key:"start",value:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var Gt=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var Xt=(typeof performance=="undefined"?Date:performance).now();Gt=(Xt-this.oldTime)/1e3,this.oldTime=Xt,this.elapsedTime+=Gt}return Gt}}]),ve}(),Oa,Eo,Ba,uo,co,Ja,Po,ls=(Oa=Object(e.injectable)(),Eo=Object(e.inject)(s.a.IRendererService),Ba=Object(e.inject)(s.a.IGlobalConfigService),Oa(uo=(co=function(){function ve(){n()(this,ve),this.clock=new qa,this.alreadyInRendering=!1,this.layers=[],this.layerRenderID=void 0,this.sceneInited=!1,this.animateInstanceCount=0,dn()(this,"renderService",Ja,this),dn()(this,"configService",Po,this)}return a()(ve,[{key:"add",value:function(Gt){this.sceneInited&&Gt.init(),this.layers.push(Gt)}},{key:"initLayers",value:function(){this.sceneInited=!0,this.layers.forEach(function(Gt){Gt.inited||Gt.init()})}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(Gt){return this.layers.find(function(Xt){return Xt.id===Gt})}},{key:"getLayerByName",value:function(Gt){return this.layers.find(function(Xt){return Xt.name===Gt})}},{key:"remove",value:function(Gt){var Xt=this.layers.indexOf(Gt);Xt>-1&&this.layers.splice(Xt,1),Gt.emit("remove",null),Gt.destroy(),this.renderLayers()}},{key:"removeAllLayers",value:function(){this.destroy()}},{key:"renderLayers",value:function(){this.alreadyInRendering||(this.alreadyInRendering=!0,this.clear(),this.updateRenderOrder(),this.layers.filter(function(Gt){return Gt.inited}).filter(function(Gt){return Gt.isVisible()}).forEach(function(Gt){Gt.hooks.beforeRenderData.call(),Gt.hooks.beforeRender.call(),Gt.render(),Gt.hooks.afterRender.call()}),this.alreadyInRendering=!1)}},{key:"updateRenderOrder",value:function(){this.layers.sort(function(Gt,Xt){return Gt.zIndex-Xt.zIndex})}},{key:"destroy",value:function(){this.layers.forEach(function(Gt){return Gt.destroy()}),this.layers=[],this.renderLayers()}},{key:"startAnimate",value:function(){this.animateInstanceCount++==0&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){--this.animateInstanceCount==0&&(this.stopRender(),this.clock.stop())}},{key:"clear",value:function(){this.renderService.clear({color:[0,0,0,0],depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){cancelAnimationFrame(this.layerRenderID)}}]),ve}(),Ja=or()(co.prototype,"renderService",[Eo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Po=or()(co.prototype,"configService",[Ba],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),co))||uo),ko=R("QILm"),Es=R.n(ko),Co=R("RIqP"),Za=R.n(Co),Bs=R("J2iB"),ss=R.n(Bs),ja=function(){function ve(ye){var Gt=this;n()(this,ve),this.name=void 0,this.type=void 0,this.scale=void 0,this.descriptor=void 0,this.featureBufferLayout=[],this.needRescale=!1,this.needRemapping=!1,this.needRegenerateVertices=!1,this.featureRange={startIndex:0,endIndex:Infinity},this.vertexAttribute=void 0,this.defaultCallback=function(Xt){if(Xt.length===0){var ke;return((ke=Gt.scale)===null||ke===void 0?void 0:ke.defaultValues)||[]}return Xt.map(function(un,Wn){var ir,dr=(ir=Gt.scale)===null||ir===void 0?void 0:ir.scalers[Wn].func,ti=dr(un);return ti})},this.setProps(ye)}return a()(ve,[{key:"setProps",value:function(Gt){Object.assign(this,Gt)}},{key:"mapping",value:function(Gt){var Xt;if((Xt=this.scale)!==null&&Xt!==void 0&&Xt.callback){var ke,un=(ke=this.scale)===null||ke===void 0?void 0:ke.callback.apply(ke,Za()(Gt));if(!ss()(un))return[un]}return this.defaultCallback(Gt)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),ve}(),gn,cr,Gr,Ui,za,go;function fo(ve,ye){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(ve);ye&&(Xt=Xt.filter(function(ke){return Object.getOwnPropertyDescriptor(ve,ke).enumerable})),Gt.push.apply(Gt,Xt)}return Gt}function ea(ve){for(var ye=1;ye<arguments.length;ye++){var Gt=arguments[ye]!=null?arguments[ye]:{};ye%2?fo(Object(Gt),!0).forEach(function(Xt){r()(ve,Xt,Gt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):fo(Object(Gt)).forEach(function(Xt){Object.defineProperty(ve,Xt,Object.getOwnPropertyDescriptor(Gt,Xt))})}return ve}function to(ve){return new Promise(function(ye){return setTimeout(ye,ve)})}var Ns=(gn={},r()(gn,so.a.FLOAT,4),r()(gn,so.a.UNSIGNED_BYTE,1),r()(gn,so.a.UNSIGNED_SHORT,2),gn),Ss=(cr=Object(e.injectable)(),Gr=Object(e.inject)(s.a.IRendererService),cr(Ui=(za=function(){function ve(){n()(this,ve),this.attributesAndIndices=void 0,dn()(this,"rendererService",go,this),this.attributes=[],this.triangulation=void 0,this.featureLayout={sizePerElement:0,elements:[]}}return a()(ve,[{key:"registerStyleAttribute",value:function(Gt){var Xt=this.getLayerStyleAttribute(Gt.name||"");return Xt?Xt.setProps(Gt):(Xt=new ja(Gt),this.attributes.push(Xt)),Xt}},{key:"updateStyleAttribute",value:function(Gt,Xt,ke){var un=this.getLayerStyleAttribute(Gt);un||(un=this.registerStyleAttribute(ea(ea({},Xt),{},{name:Gt})));var Wn=Xt.scale;Wn&&un&&(un.scale=Wn,un.needRescale=!0,un.needRemapping=!0,un.needRegenerateVertices=!0,ke&&ke.featureRange&&(un.featureRange=ke.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(Gt){return this.attributes.find(function(Xt){return Xt.name===Gt})}},{key:"getLayerAttributeScale",value:function(Gt){var Xt,ke=this.getLayerStyleAttribute(Gt),un=ke==null||(Xt=ke.scale)===null||Xt===void 0?void 0:Xt.scalers;return un&&un[0]?un[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(Gt,Xt){var ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,un=arguments.length>3?arguments[3]:void 0,Wn=this.attributes.find(function(Vu){return Vu.name===Gt});if(Wn&&Wn.descriptor){var ir=Wn.descriptor,dr=ir.update,ti=ir.buffer,Ci=ir.size,Ji=Ci===void 0?0:Ci,fa=Ns[ti.type||so.a.FLOAT];if(dr){var na=this.featureLayout,no=na.elements,$a=na.sizePerElement,Vo=no.slice(ke,un);if(!Vo.length)return;var To=Vo[0].offset,pu=To*Ji*fa,lu=Vo.map(function(Vu,gu){for(var vl=Vu.featureIdx,Qo=Vu.vertices,ms=Vu.normals,Us=Qo.length/$a,Tu=[],pl=0;pl<Us;pl++){var Gl=ms?ms.slice(pl*3,pl*3+3):[];Tu.push.apply(Tu,Za()(dr(Xt[vl],vl,Qo.slice(pl*$a,pl*$a+$a),gu,Gl)))}return Tu}).reduce(function(Vu,gu){return Vu.push.apply(Vu,Za()(gu)),Vu},[]);Wn.vertexAttribute.updateBuffer({data:lu,offset:pu})}}}},{key:"createAttributesAndIndices",value:function(Gt,Xt){var ke=this;this.featureLayout={sizePerElement:0,elements:[]},Xt&&(this.triangulation=Xt);var un=this.attributes.map(function(To){return To.resetDescriptor(),To.descriptor}),Wn=0,ir=[],dr=[],ti=[],Ci=3;Gt.forEach(function(To,pu){var lu=ke.triangulation(To),Vu=lu.indices,gu=lu.vertices,vl=lu.normals,Qo=lu.size;Vu.forEach(function(pl){dr.push(pl+Wn)}),Ci=Qo;var ms=gu.length/Qo;ke.featureLayout.sizePerElement=Ci,ke.featureLayout.elements.push({featureIdx:pu,vertices:gu,normals:vl,offset:Wn}),Wn+=ms;for(var Us=function(Gl){var Lc=(vl==null?void 0:vl.slice(Gl*3,Gl*3+3))||[],jc=gu.slice(Gl*Qo,Gl*Qo+Qo);un.forEach(function(Bc,If){if(Bc&&Bc.update){var Lf;(Lf=Bc.buffer.data).push.apply(Lf,Za()(Bc.update(To,pu,jc,Gl,Lc)))}})},Tu=0;Tu<ms;Tu++)Us(Tu)});var Ji=this.rendererService,fa=Ji.createAttribute,na=Ji.createBuffer,no=Ji.createElements,$a={};un.forEach(function(To,pu){if(To){var lu=To.buffer,Vu=To.update,gu=To.name,vl=Es()(To,["buffer","update","name"]),Qo=fa(ea({buffer:na(lu)},vl));$a[To.name||""]=Qo,ke.attributes[pu].vertexAttribute=Qo}});var Vo=no({data:dr,type:so.a.UNSIGNED_INT,count:dr.length});return this.attributesAndIndices={attributes:$a,elements:Vo},this.attributesAndIndices}},{key:"clearAllAttributes",value:function(){var Gt;this.attributes.forEach(function(Xt){Xt.vertexAttribute&&Xt.vertexAttribute.destroy()}),(Gt=this.attributesAndIndices)===null||Gt===void 0||Gt.elements.destroy(),this.attributes=[]}}]),ve}(),go=or()(za.prototype,"rendererService",[Gr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),za))||Ui),Ka=R("U8pU"),ou=R("KQm4"),Jo=R("rePB"),Os=R("1OyB"),tu=R("vuIU"),_s=R("5ku3"),vs=typeof __VERSION__!="undefined"?__VERSION__:"untranspiled source",ts=Object(_s.a)();function ws(ve){try{var ye=window[ve],Gt="__storage_test__";return ye.setItem(Gt,Gt),ye.removeItem(Gt),ye}catch(Xt){return null}}var Ms=function(){function ve(ye,Gt){var Xt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";Object(Os.a)(this,ve),this.storage=ws(Xt),this.id=ye,this.config={},Object.assign(this.config,Gt),this._loadConfiguration()}return Object(tu.a)(ve,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(Gt){return this.config={},this.updateConfiguration(Gt)}},{key:"updateConfiguration",value:function(Gt){if(Object.assign(this.config,Gt),this.storage){var Xt=JSON.stringify(this.config);this.storage.setItem(this.id,Xt)}return this}},{key:"_loadConfiguration",value:function(){var Gt={};if(this.storage){var Xt=this.storage.getItem(this.id);Gt=Xt?JSON.parse(Xt):{}}return Object.assign(this.config,Gt),this}}]),ve}();function Ou(ve){var ye;return ve<10?ye="".concat(ve.toFixed(2),"ms"):ve<100?ye="".concat(ve.toFixed(1),"ms"):ve<1e3?ye="".concat(ve.toFixed(0),"ms"):ye="".concat((ve/1e3).toFixed(2),"s"),ye}function Bu(ve){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,Gt=Math.max(ye-ve.length,0);return"".concat(" ".repeat(Gt)).concat(ve)}function So(ve){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,Gt=Math.max(ye-ve.length,0);return"".concat(ve).concat(" ".repeat(Gt))}function eu(ve){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Gt=1e-16,Xt=ye.isInteger,ke=Xt===void 0?!1:Xt;if(Array.isArray(ve)||ArrayBuffer.isView(ve))return Nu(ve,ye);if(!Number.isFinite(ve))return String(ve);if(Math.abs(ve)<Gt)return ke?"0":"0.";if(ke||Math.abs(ve)>100&&Math.abs(ve)<1e4)return ve.toFixed(0);var un=ve.toPrecision(2),Wn=un.indexOf(".0");return Wn===un.length-2?un.slice(0,-1):un}function Nu(ve,ye){for(var Gt=ye.maxElts,Xt=Gt===void 0?16:Gt,ke=ye.size,un=ke===void 0?1:ke,Wn="[",ir=0;ir<ve.length&&ir<Xt;++ir)ir>0&&(Wn+=",".concat(ir%un==0?" ":"")),Wn+=eu(ve[ir],ye);var dr=ve.length>Xt?"...":"]";return"".concat(Wn).concat(dr)}function Yu(ve,ye,Gt){var Xt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600,ke=ve.src.replace(/\(/g,"%28").replace(/\)/g,"%29");ve.width>Xt&&(Gt=Math.min(Gt,Xt/ve.width));var un=ve.width*Gt,Wn=ve.height*Gt,ir=["font-size:1px;","padding:".concat(Math.floor(Wn/2),"px ").concat(Math.floor(un/2),"px;"),"line-height:".concat(Wn,"px;"),"background:url(".concat(ke,");"),"background-size:".concat(un,"px ").concat(Wn,"px;"),"color:transparent;"].join("");return["".concat(ye," %c+"),ir]}var al={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function Fu(ve){return typeof ve=="string"?al[ve.toUpperCase()]||al.WHITE:ve}function Oo(ve,ye,Gt){return!ts&&typeof ve=="string"&&(ye&&(ye=Fu(ye),ve="[".concat(ye,"m").concat(ve,"[39m")),Gt&&(ye=Fu(Gt),ve="[".concat(Gt+10,"m").concat(ve,"[49m"))),ve}function Ua(ve){if(typeof Symbol=="undefined"||ve[Symbol.iterator]==null){if(Array.isArray(ve)||(ve=ba(ve))){var ye=0,Gt=function(){};return{s:Gt,n:function(){return ye>=ve.length?{done:!0}:{done:!1,value:ve[ye++]}},e:function(dr){throw dr},f:Gt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Xt,ke=!0,un=!1,Wn;return{s:function(){Xt=ve[Symbol.iterator]()},n:function(){var dr=Xt.next();return ke=dr.done,dr},e:function(dr){un=!0,Wn=dr},f:function(){try{!ke&&Xt.return!=null&&Xt.return()}finally{if(un)throw Wn}}}}function ba(ve,ye){if(!!ve){if(typeof ve=="string")return No(ve,ye);var Gt=Object.prototype.toString.call(ve).slice(8,-1);if(Gt==="Object"&&ve.constructor&&(Gt=ve.constructor.name),Gt==="Map"||Gt==="Set")return Array.from(Gt);if(Gt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Gt))return No(ve,ye)}}function No(ve,ye){(ye==null||ye>ve.length)&&(ye=ve.length);for(var Gt=0,Xt=new Array(ye);Gt<ye;Gt++)Xt[Gt]=ve[Gt];return Xt}function hu(ve){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"],Gt=Object.getPrototypeOf(ve),Xt=Object.getOwnPropertyNames(Gt),ke=Ua(Xt),un;try{var Wn=function(){var dr=un.value;typeof ve[dr]=="function"&&(ye.find(function(ti){return dr===ti})||(ve[dr]=ve[dr].bind(ve)))};for(ke.s();!(un=ke.n()).done;)Wn()}catch(ir){ke.e(ir)}finally{ke.f()}}function Zu(ve,ye){if(!ve)throw new Error(ye||"Assertion failed")}var ps=R("K9nA");function $o(){var ve;if(ts&&ps.b.performance)ve=ps.b.performance.now();else if(ps.a.hrtime){var ye=ps.a.hrtime();ve=ye[0]*1e3+ye[1]/1e6}else ve=Date.now();return ve}var Is={debug:ts&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},su={enabled:!0,level:0};function Fo(){}var Ku={},Xs={once:!0};function Xa(ve){for(var ye in ve)for(var Gt in ve[ye])return Gt||"untitled";return"empty"}var yl=function(){function ve(){var ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Gt=ye.id;Object(Os.a)(this,ve),this.id=Gt,this.VERSION=vs,this._startTs=$o(),this._deltaTs=$o(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new Ms("__probe-".concat(this.id,"__"),su),this.userData={},this.timeStamp("".concat(this.id," started")),hu(this),Object.seal(this)}return Object(tu.a)(ve,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number(($o()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number(($o()-this._deltaTs).toPrecision(10))}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var Gt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:Gt}),this}},{key:"setLevel",value:function(Gt){return this._storage.updateConfiguration({level:Gt}),this}},{key:"assert",value:function(Gt,Xt){Zu(Gt,Xt)}},{key:"warn",value:function(Gt){return this._getLogFunction(0,Gt,Is.warn,arguments,Xs)}},{key:"error",value:function(Gt){return this._getLogFunction(0,Gt,Is.error,arguments)}},{key:"deprecated",value:function(Gt,Xt){return this.warn("`".concat(Gt,"` is deprecated and will be removed in a later version. Use `").concat(Xt,"` instead"))}},{key:"removed",value:function(Gt,Xt){return this.error("`".concat(Gt,"` has been removed. Use `").concat(Xt,"` instead"))}},{key:"probe",value:function(Gt,Xt){return this._getLogFunction(Gt,Xt,Is.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(Gt,Xt){return this._getLogFunction(Gt,Xt,Is.debug,arguments)}},{key:"info",value:function(Gt,Xt){return this._getLogFunction(Gt,Xt,console.info,arguments)}},{key:"once",value:function(Gt,Xt){return this._getLogFunction(Gt,Xt,Is.debug||Is.info,arguments,Xs)}},{key:"table",value:function(Gt,Xt,ke){return Xt?this._getLogFunction(Gt,Xt,console.table||Fo,ke&&[ke],{tag:Xa(Xt)}):Fo}},{key:"image",value:function(Gt){var Xt=Gt.logLevel,ke=Gt.priority,un=Gt.image,Wn=Gt.message,ir=Wn===void 0?"":Wn,dr=Gt.scale,ti=dr===void 0?1:dr;return this._shouldLog(Xt||ke)?ts?oo({image:un,message:ir,scale:ti}):Tl({image:un,message:ir,scale:ti}):Fo}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(Gt){return this._storage.config[Gt]}},{key:"set",value:function(Gt,Xt){this._storage.updateConfiguration(Object(Jo.a)({},Gt,Xt))}},{key:"time",value:function(Gt,Xt){return this._getLogFunction(Gt,Xt,console.time?console.time:console.info)}},{key:"timeEnd",value:function(Gt,Xt){return this._getLogFunction(Gt,Xt,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(Gt,Xt){return this._getLogFunction(Gt,Xt,console.timeStamp||Fo)}},{key:"group",value:function(Gt,Xt){var ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};ke=xl({logLevel:Gt,message:Xt,opts:ke});var un=ke,Wn=un.collapsed;return ke.method=(Wn?console.groupCollapsed:console.group)||console.info,this._getLogFunction(ke)}},{key:"groupCollapsed",value:function(Gt,Xt){var ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(Gt,Xt,Object.assign({},ke,{collapsed:!0}))}},{key:"groupEnd",value:function(Gt){return this._getLogFunction(Gt,"",console.groupEnd||Fo)}},{key:"withGroup",value:function(Gt,Xt,ke){this.group(Gt,Xt)();try{ke()}finally{this.groupEnd(Gt)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(Gt){return this.isEnabled()&&this.getLevel()>=Hl(Gt)}},{key:"_getLogFunction",value:function(Gt,Xt,ke){var un=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],Wn=arguments.length>4?arguments[4]:void 0;if(this._shouldLog(Gt)){var ir;Wn=xl({logLevel:Gt,message:Xt,args:un,opts:Wn}),ke=ke||Wn.method,Zu(ke),Wn.total=this.getTotal(),Wn.delta=this.getDelta(),this._deltaTs=$o();var dr=Wn.tag||Wn.message;if(Wn.once)if(!Ku[dr])Ku[dr]=$o();else return Fo;return Xt=yc(this.id,Wn.message,Wn),(ir=ke).bind.apply(ir,[console,Xt].concat(Object(ou.a)(Wn.args)))}return Fo}},{key:"level",set:function(Gt){this.setLevel(Gt)},get:function(){return this.getLevel()}},{key:"priority",set:function(Gt){this.level=Gt},get:function(){return this.level}}]),ve}();yl.VERSION=vs;function Hl(ve){if(!ve)return 0;var ye;switch(Object(Ka.a)(ve)){case"number":ye=ve;break;case"object":ye=ve.logLevel||ve.priority||0;break;default:return 0}return Zu(Number.isFinite(ye)&&ye>=0),ye}function xl(ve){var ye=ve.logLevel,Gt=ve.message;ve.logLevel=Hl(ye);for(var Xt=ve.args?Array.from(ve.args):[];Xt.length&&Xt.shift()!==Gt;);switch(ve.args=Xt,Object(Ka.a)(ye)){case"string":case"function":Gt!==void 0&&Xt.unshift(Gt),ve.message=ye;break;case"object":Object.assign(ve,ye);break;default:}typeof ve.message=="function"&&(ve.message=ve.message());var ke=Object(Ka.a)(ve.message);return Zu(ke==="string"||ke==="object"),Object.assign(ve,ve.opts)}function yc(ve,ye,Gt){if(typeof ye=="string"){var Xt=Gt.time?Bu(Ou(Gt.total)):"";ye=Gt.time?"".concat(ve,": ").concat(Xt,"  ").concat(ye):"".concat(ve,": ").concat(ye),ye=Oo(ye,Gt.color,Gt.background)}return ye}function Tl(ve){var ye=ve.image,Gt=ve.message,Xt=Gt===void 0?"":Gt,ke=ve.scale,un=ke===void 0?1:ke,Wn=null;try{Wn=R(3)}catch(ir){}return Wn?function(){return Wn(ye,{fit:"box",width:"".concat(Math.round(80*un),"%")}).then(function(ir){return console.log(ir)})}:Fo}function oo(ve){var ye=ve.image,Gt=ve.message,Xt=Gt===void 0?"":Gt,ke=ve.scale,un=ke===void 0?1:ke;if(typeof ye=="string"){var Wn=new Image;return Wn.onload=function(){var Ci,Ji=Yu(Wn,Xt,un);(Ci=console).log.apply(Ci,Object(ou.a)(Ji))},Wn.src=ye,Fo}var ir=ye.nodeName||"";if(ir.toLowerCase()==="img"){var dr;return(dr=console).log.apply(dr,Object(ou.a)(Yu(ye,Xt,un))),Fo}if(ir.toLowerCase()==="canvas"){var ti=new Image;return ti.onload=function(){var Ci;return(Ci=console).log.apply(Ci,Object(ou.a)(Yu(ti,Xt,un)))},ti.src=ye.toDataURL(),Fo}return Fo}var wu,bl,nu=new yl({id:"L7"}).enable(!1);nu.priority=5;var zu=(wu=Object(e.injectable)(),wu(bl=function(){function ve(){n()(this,ve)}return a()(ve,[{key:"error",value:function(Gt){nu.error(Gt)()}},{key:"warn",value:function(Gt){nu.probe(1,Gt)()}},{key:"info",value:function(Gt){nu.info(3,Gt)()}},{key:"debug",value:function(Gt){nu.probe(4,Gt)()}}]),ve}())||bl),xu=R("xp6e"),bu=R("iegG"),Js=R.n(bu),cs=window.document.documentElement.style,Ps=0;function ol(ve){var ye=ve;if(typeof ve=="string"&&(ye=document.getElementById(ve)),ye){var Gt=document.createElement("div");return Gt.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,Gt.id="l7-scene-".concat(Ps++),Gt.classList.add("l7-scene"),ye.appendChild(Gt),Gt}return null}var Al,Fl,Uu,Xu,sl,Eu,uu,Ju,Ls,El,sc,Cl,zl,Yl,dc,$u,Ol,Ul,wo,ho,Sl,ul,Ys,Da,mo,Gs,wl,ll,Qu,xc,Zl,qu,ru,Zs,es;function iu(ve){var ye=ku();return function(){var Xt=k()(ve),ke;if(ye){var un=k()(this).constructor;ke=Reflect.construct(Xt,arguments,un)}else ke=Xt.apply(this,arguments);return at()(this,ke)}}function ku(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var us=(Al=Object(e.injectable)(),Fl=Object(e.inject)(s.a.SceneID),Uu=Object(e.inject)(s.a.IIconService),Xu=Object(e.inject)(s.a.IFontService),sl=Object(e.inject)(s.a.IControlService),Eu=Object(e.inject)(s.a.ILogService),uu=Object(e.inject)(s.a.IGlobalConfigService),Ju=Object(e.inject)(s.a.IMapService),Ls=Object(e.inject)(s.a.ICoordinateSystemService),El=Object(e.inject)(s.a.IRendererService),sc=Object(e.inject)(s.a.ILayerService),Cl=Object(e.inject)(s.a.ICameraService),zl=Object(e.inject)(s.a.IInteractionService),Yl=Object(e.inject)(s.a.IPickingService),dc=Object(e.inject)(s.a.IShaderModuleService),$u=Object(e.inject)(s.a.IMarkerService),Ol=Object(e.inject)(s.a.IPopupService),Al(Ul=(wo=function(ve){ht()(Gt,ve);var ye=iu(Gt);function Gt(){var Xt;return n()(this,Gt),Xt=ye.call(this),Xt.destroyed=!1,Xt.loaded=!1,dn()(Xt,"id",ho,br()(Xt)),dn()(Xt,"iconService",Sl,br()(Xt)),dn()(Xt,"fontService",ul,br()(Xt)),dn()(Xt,"controlService",Ys,br()(Xt)),dn()(Xt,"logger",Da,br()(Xt)),dn()(Xt,"configService",mo,br()(Xt)),dn()(Xt,"map",Gs,br()(Xt)),dn()(Xt,"coordinateSystemService",wl,br()(Xt)),dn()(Xt,"rendererService",ll,br()(Xt)),dn()(Xt,"layerService",Qu,br()(Xt)),dn()(Xt,"cameraService",xc,br()(Xt)),dn()(Xt,"interactionService",Zl,br()(Xt)),dn()(Xt,"pickingService",qu,br()(Xt)),dn()(Xt,"shaderModuleService",ru,br()(Xt)),dn()(Xt,"markerService",Zs,br()(Xt)),dn()(Xt,"popupService",es,br()(Xt)),Xt.inited=!1,Xt.initPromise=void 0,Xt.rendering=!1,Xt.$container=void 0,Xt.canvas=void 0,Xt.markerContainer=void 0,Xt.hooks=void 0,Xt.handleWindowResized=function(){Xt.emit("resize"),Xt.$container&&(Xt.initContainer(),o.a.triggerResize(),Xt.coordinateSystemService.needRefresh=!0,Xt.render())},Xt.handleMapCameraChanged=function(ke){Xt.cameraService.update(ke),Xt.render()},Xt.hooks={init:new xu.a},Xt}return a()(Gt,[{key:"init",value:function(ke){var un=this;this.configService.setSceneConfig(this.id,ke),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.fontService.init(),this.hooks.init.tapPromise("initMap",Bo()(ao.a.mark(function Wn(){return ao.a.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return dr.next=2,new Promise(function(ti){un.map.onCameraChanged(function(Ci){un.cameraService.init(),un.cameraService.update(Ci),ti()}),un.map.init()});case 2:un.map.onCameraChanged(un.handleMapCameraChanged),un.map.addMarkerContainer(),un.markerService.addMarkers(),un.markerService.addMarkerLayers(),un.popupService.initPopup(),un.interactionService.init(),un.interactionService.on(Ei.a.Drag,un.addSceneEvent.bind(un)),un.logger.debug("map ".concat(un.id," loaded"));case 10:case"end":return dr.stop()}},Wn)}))),this.hooks.init.tapPromise("initRenderer",Bo()(ao.a.mark(function Wn(){var ir;return ao.a.wrap(function(ti){for(;;)switch(ti.prev=ti.next){case 0:if(ir=ol(un.configService.getSceneConfig(un.id).id||""),un.$container=ir,!ir){ti.next=11;break}return un.canvas=o.a.create("canvas","",ir),un.setCanvas(),ti.next=7,un.rendererService.init(un.canvas,un.configService.getSceneConfig(un.id));case 7:Js()(un.$container,un.handleWindowResized),window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)").addListener(un.handleWindowResized),ti.next=12;break;case 11:un.logger.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 12:un.pickingService.init(un.id),un.logger.debug("scene ".concat(un.id," renderer loaded"));case 14:case"end":return ti.stop()}},Wn)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(ke){this.logger.debug("add layer ".concat(ke.name," to scene ").concat(this.id)),this.layerService.add(ke),this.render()}},{key:"render",value:function(){var Xt=Bo()(ao.a.mark(function un(){return ao.a.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(!(this.rendering||this.destroyed)){ir.next=2;break}return ir.abrupt("return");case 2:if(this.rendering=!0,this.inited){ir.next=13;break}return ir.next=6,this.initPromise;case 6:this.destroyed&&this.destroy(),this.logger.info(" render inited"),this.layerService.initLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0;case 13:this.layerService.renderLayers(),this.logger.debug("scene ".concat(this.id," render")),this.rendering=!1;case 16:case"end":return ir.stop()}},un,this)}));function ke(){return Xt.apply(this,arguments)}return ke}()},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(ke){var un,Wn=(un=this.$container)===null||un===void 0?void 0:un.getElementsByTagName("canvas")[0];this.render();var ir=ke==="jpg"?Wn==null?void 0:Wn.toDataURL("image/jpeg"):Wn==null?void 0:Wn.toDataURL("image/png");return ir}},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"addMarkerContainer",value:function(){var ke=this.$container.parentElement;ke!==null&&(this.markerContainer=o.a.create("div","l7-marker-container",ke))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){if(!this.inited){this.destroyed=!0;return}this.emit("destroy"),this.layerService.destroy(),this.rendererService.destroy(),this.map.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.removeAllListeners(),this.inited=!1,Object(bu.unbind)(this.$container,this.handleWindowResized),window.matchMedia("screen and (min-resolution: 2dppx)").removeListener(this.handleWindowResized)}},{key:"initContainer",value:function(){var ke,un,Wn=o.a.DPR,ir=((ke=this.$container)===null||ke===void 0?void 0:ke.clientWidth)||400,dr=((un=this.$container)===null||un===void 0?void 0:un.clientHeight)||300,ti=this.canvas;ti&&(ti.width=ir*Wn,ti.height=dr*Wn,ti.style.width="".concat(ir,"px"),ti.style.height="".concat(dr,"px")),this.rendererService.viewport({x:0,y:0,width:Wn*ir,height:Wn*dr})}},{key:"setCanvas",value:function(){var ke,un,Wn=o.a.DPR,ir=((ke=this.$container)===null||ke===void 0?void 0:ke.clientWidth)||400,dr=((un=this.$container)===null||un===void 0?void 0:un.clientHeight)||300,ti=this.canvas;ti.width=ir*Wn,ti.height=dr*Wn,ti.style.width="".concat(ir,"px"),ti.style.height="".concat(dr,"px")}},{key:"addSceneEvent",value:function(ke){this.emit(ke.type,ke)}}]),Gt}(E.EventEmitter),ho=or()(wo.prototype,"id",[Fl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sl=or()(wo.prototype,"iconService",[Uu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ul=or()(wo.prototype,"fontService",[Xu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ys=or()(wo.prototype,"controlService",[sl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Da=or()(wo.prototype,"logger",[Eu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mo=or()(wo.prototype,"configService",[uu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gs=or()(wo.prototype,"map",[Ju],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wl=or()(wo.prototype,"coordinateSystemService",[Ls],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ll=or()(wo.prototype,"rendererService",[El],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qu=or()(wo.prototype,"layerService",[sc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xc=or()(wo.prototype,"cameraService",[Cl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zl=or()(wo.prototype,"interactionService",[zl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qu=or()(wo.prototype,"pickingService",[Yl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ru=or()(wo.prototype,"shaderModuleService",[dc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zs=or()(wo.prototype,"markerService",[$u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),es=or()(wo.prototype,"popupService",[Ol],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wo))||Ul),Yi=R("7tbW"),Fs=R.n(Yi);function tl(ve){var ye=0;switch(ve){case"vec2":case"ivec2":ye=2;break;case"vec3":case"ivec3":ye=3;break;case"vec4":case"ivec4":case"mat2":ye=4;break;case"mat3":ye=9;break;case"mat4":ye=16;break;default:}return ye}var Gu=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Go(ve){var ye={};return ve=ve.replace(Gu,function(Gt,Xt,ke){var un=ke.split(":"),Wn=un[0].trim(),ir="";switch(un.length>1&&(ir=un[1].trim()),Xt){case"bool":ir=ir==="true";break;case"float":case"int":ir=Number(ir);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":ir?ir=ir.replace("[","").replace("]","").split(",").reduce(function(dr,ti){return dr.push(Number(ti.trim())),dr},[]):ir=new Array(tl(Xt)).fill(0);break;default:}return ye[Wn]=ir,"uniform ".concat(Xt," ").concat(Wn,`;
`)}),{content:ve,uniforms:ye}}var Yo,Su;function Mi(ve,ye){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(ve);ye&&(Xt=Xt.filter(function(ke){return Object.getOwnPropertyDescriptor(ve,ke).enumerable})),Gt.push.apply(Gt,Xt)}return Gt}function _u(ve){for(var ye=1;ye<arguments.length;ye++){var Gt=arguments[ye]!=null?arguments[ye]:{};ye%2?Mi(Object(Gt),!0).forEach(function(Xt){r()(ve,Xt,Gt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):Mi(Object(Gt)).forEach(function(Xt){Object.defineProperty(ve,Xt,Object.getOwnPropertyDescriptor(Gt,Xt))})}return ve}var Iu="#define PI 3.14159265359",Lu=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,$s=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,we=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}

// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {
//   vec3 lightDir = normalize(light.position - fragPos);
//   // diffuse shading
//   float diff = max(dot(normal, lightDir), 0.0);
//   // specular shading
//   vec3 reflectDir = reflect(-lightDir, normal);
//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);
//   // attenuation
//   float distance = length(light.position - fragPos);
//   float attenuation = 1.0 / (light.constant + light.linear * distance +
//           light.quadratic * (distance * distance));

//   vec3 ambient = light.ambient * u_Ambient;
//   vec3 diffuse = light.diffuse * diff * u_Diffuse;
//   vec3 specular = light.specular * spec * u_Specular;

//   float spotEffect = dot(normalize(light.direction), -lightDir);
//   float spotCosCutoff = cos(light.angle / 180.0 * PI);
//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);
//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);
//   if (spotEffect > spotCosCutoff) {
//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);
//   } else {
//     spotEffect = 0.0;
//   }

//   return ambient + attenuation * (spotEffect * diffuse + specular);
// }

vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {
  //   if (i >= u_NumOfSpotLights) {
  //     break;
  //   }
  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);
  // }
  return weight;
}
`,Pe=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`,hn=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,tn=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}
`,On=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)

#define COORDINATE_SYSTEM_LNGLAT 1.0
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0
#define COORDINATE_SYSTEM_P20_OFFSET 6.0
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

uniform mat4 u_ViewMatrix;
uniform mat4 u_ProjectionMatrix;
uniform mat4 u_ViewProjectionMatrix;
uniform float u_Zoom : 1;
uniform float u_ZoomScale : 1;

uniform float u_CoordinateSystem;
uniform vec2 u_ViewportCenter;
uniform vec4 u_ViewportCenterProjection;
uniform vec3 u_PixelsPerDegree;
uniform vec3 u_PixelsPerDegree2;
uniform vec3 u_PixelsPerMeter;

uniform vec2 u_ViewportSize;
uniform float u_DevicePixelRatio;
uniform float u_FocalDistance;
uniform vec3 u_CameraPosition;

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }
  return vector;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  return pixel;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  return pixel * -1.;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }
  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}

`,fr=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,Ir=/precision\s+(high|low|medium)p\s+float/,Zr=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,ni=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,zr=(Yo=Object(e.injectable)(),Yo(Su=function(){function ve(){n()(this,ve),this.moduleCache={},this.rawContentCache={}}return a()(ve,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:Iu,fs:Iu}),this.registerModule("decode",{vs:Lu,fs:""}),this.registerModule("projection",{vs:On,fs:""}),this.registerModule("project",{vs:tn,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:fr}),this.registerModule("lighting",{vs:we,fs:""}),this.registerModule("light",{vs:$s,fs:""}),this.registerModule("picking",{vs:hn,fs:Pe})}},{key:"registerModule",value:function(Gt,Xt){if(!this.rawContentCache[Gt]){var ke=Xt.vs,un=Xt.fs,Wn=Xt.uniforms,ir=Go(ke),dr=ir.content,ti=ir.uniforms,Ci=Go(un),Ji=Ci.content,fa=Ci.uniforms;this.rawContentCache[Gt]={fs:Ji,uniforms:_u(_u(_u({},ti),fa),Wn),vs:dr}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(Gt){var Xt=this;if(this.moduleCache[Gt])return this.moduleCache[Gt];var ke=this.rawContentCache[Gt].vs,un=this.rawContentCache[Gt].fs,Wn=this.processModule(ke,[],"vs"),ir=Wn.content,dr=Wn.includeList,ti=this.processModule(un,[],"fs"),Ci=ti.content,Ji=ti.includeList,fa=Ci,na=Fs()(dr.concat(Ji).concat(Gt)).reduce(function(no,$a){return _u(_u({},no),Xt.rawContentCache[$a].uniforms)},{});return Ir.test(Ci)||(fa=Zr+Ci),this.moduleCache[Gt]={fs:fa.trim(),uniforms:na,vs:ir.trim()},this.moduleCache[Gt]}},{key:"processModule",value:function(Gt,Xt,ke){var un=this,Wn=Gt.replace(ni,function(ir,dr){var ti=dr.split(" "),Ci=ti[0].replace(/"/g,"");if(Xt.indexOf(Ci)>-1)return"";var Ji=un.rawContentCache[Ci][ke];Xt.push(Ci);var fa=un.processModule(Ji,Xt,ke),na=fa.content;return na});return{content:Wn,includeList:Xt}}}]),ve}())||Su),ci=R("iWIM"),xr=R.n(ci),Kt=R("bPkA"),te,Ie,_e,Dt,zt,oe=(te=Object(e.injectable)(),Ie=Object(e.inject)(s.a.IShaderModuleService),te(_e=(Dt=function(){function ve(){n()(this,ve),dn()(this,"shaderModuleService",zt,this),this.rendererService=void 0,this.cameraService=void 0,this.mapService=void 0,this.interactionService=void 0,this.layerService=void 0,this.config=void 0}return a()(ve,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return Kt.a.Normal}},{key:"init",value:function(Gt,Xt){this.config=Xt,this.rendererService=Gt.getContainer().get(s.a.IRendererService),this.cameraService=Gt.getContainer().get(s.a.ICameraService),this.mapService=Gt.getContainer().get(s.a.IMapService),this.interactionService=Gt.getContainer().get(s.a.IInteractionService),this.layerService=Gt.getContainer().get(s.a.ILayerService)}},{key:"render",value:function(Gt){}}]),ve}(),zt=or()(Dt.prototype,"shaderModuleService",[Ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dt))||_e),ne,fe;function Fe(ve){var ye=Ze();return function(){var Xt=k()(ve),ke;if(ye){var un=k()(this).constructor;ke=Reflect.construct(Xt,arguments,un)}else ke=Xt.apply(this,arguments);return at()(this,ke)}}function Ze(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var nn=(ne=Object(e.injectable)(),ne(fe=function(ve){ht()(Gt,ve);var ye=Fe(Gt);function Gt(){return n()(this,Gt),ye.apply(this,arguments)}return a()(Gt,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(ke,un){xr()(k()(Gt.prototype),"init",this).call(this,ke,un)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),Gt}(oe))||fe),Je,vn,fn,Yn,kn;function Vn(ve,ye){var Gt=typeof Symbol!="undefined"&&ve[Symbol.iterator]||ve["@@iterator"];if(!Gt){if(Array.isArray(ve)||(Gt=Gn(ve))||ye&&ve&&typeof ve.length=="number"){Gt&&(ve=Gt);var Xt=0,ke=function(){};return{s:ke,n:function(){return Xt>=ve.length?{done:!0}:{done:!1,value:ve[Xt++]}},e:function(ti){throw ti},f:ke}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var un=!0,Wn=!1,ir;return{s:function(){Gt=Gt.call(ve)},n:function(){var ti=Gt.next();return un=ti.done,ti},e:function(ti){Wn=!0,ir=ti},f:function(){try{!un&&Gt.return!=null&&Gt.return()}finally{if(Wn)throw ir}}}}function Gn(ve,ye){if(!!ve){if(typeof ve=="string")return hr(ve,ye);var Gt=Object.prototype.toString.call(ve).slice(8,-1);if(Gt==="Object"&&ve.constructor&&(Gt=ve.constructor.name),Gt==="Map"||Gt==="Set")return Array.from(ve);if(Gt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Gt))return hr(ve,ye)}}function hr(ve,ye){(ye==null||ye>ve.length)&&(ye=ve.length);for(var Gt=0,Xt=new Array(ye);Gt<ye;Gt++)Xt[Gt]=ve[Gt];return Xt}var mr=(Je=Object(e.injectable)(),vn=Object(e.inject)(s.a.IPostProcessor),Je(fn=(Yn=function(){function ve(){n()(this,ve),this.passes=[],dn()(this,"postProcessor",kn,this),this.layer=void 0,this.renderFlag=void 0,this.width=0,this.height=0}return a()(ve,[{key:"setLayer",value:function(Gt){this.layer=Gt}},{key:"setRenderFlag",value:function(Gt){this.renderFlag=Gt}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var ye=Bo()(ao.a.mark(function Xt(){var ke,un,Wn;return ao.a.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:ke=Vn(this.passes),dr.prev=1,ke.s();case 3:if((un=ke.n()).done){dr.next=9;break}return Wn=un.value,dr.next=7,Wn.render(this.layer);case 7:dr.next=3;break;case 9:dr.next=14;break;case 11:dr.prev=11,dr.t0=dr.catch(1),ke.e(dr.t0);case 14:return dr.prev=14,ke.f(),dr.finish(14);case 17:this.layer.renderModels();case 18:case"end":return dr.stop()}},Xt,this,[[1,11,14,17]])}));function Gt(){return ye.apply(this,arguments)}return Gt}()},{key:"resize",value:function(Gt,Xt){(this.width!==Gt||this.height!==Xt)&&(this.width=Gt,this.height=Xt)}},{key:"add",value:function(Gt,Xt){Gt.getType()===Kt.a.PostProcessing?this.postProcessor.add(Gt,this.layer,Xt):(Gt.init(this.layer,Xt),this.passes.push(Gt))}},{key:"insert",value:function(Gt,Xt,ke){Gt.init(this.layer,Xt),this.passes.splice(ke,0,Gt)}},{key:"destroy",value:function(){this.passes.length=0}}]),ve}(),kn=or()(Yn.prototype,"postProcessor",[vn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yn))||fn),Yr,gi,Br,ai,fi;function Zi(ve,ye){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(ve);ye&&(Xt=Xt.filter(function(ke){return Object.getOwnPropertyDescriptor(ve,ke).enumerable})),Gt.push.apply(Gt,Xt)}return Gt}function Ri(ve){for(var ye=1;ye<arguments.length;ye++){var Gt=arguments[ye]!=null?arguments[ye]:{};ye%2?Zi(Object(Gt),!0).forEach(function(Xt){r()(ve,Xt,Gt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):Zi(Object(Gt)).forEach(function(Xt){Object.defineProperty(ve,Xt,Object.getOwnPropertyDescriptor(Gt,Xt))})}return ve}function Sa(ve){var ye=ya();return function(){var Xt=k()(ve),ke;if(ye){var un=k()(this).constructor;ke=Reflect.construct(Xt,arguments,un)}else ke=Xt.apply(this,arguments);return at()(this,ke)}}function ya(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var _a=(Yr=Object(e.injectable)(),gi=Object(e.inject)(s.a.ILogService),Yr(Br=(ai=function(ve){ht()(Gt,ve);var ye=Sa(Gt);function Gt(){var Xt;n()(this,Gt);for(var ke=arguments.length,un=new Array(ke),Wn=0;Wn<ke;Wn++)un[Wn]=arguments[Wn];return Xt=ye.call.apply(ye,[this].concat(un)),dn()(Xt,"logger",fi,br()(Xt)),Xt.pickingFBO=void 0,Xt.layer=void 0,Xt.width=0,Xt.height=0,Xt.alreadyInRendering=!1,Xt.pickFromPickingFBO=function(ir){var dr=ir.x,ti=ir.y,Ci=ir.lngLat,Ji=ir.type;if(!(!Xt.layer.isVisible()||!Xt.layer.needPick(Ji))){var fa=Xt.rendererService,na=fa.getViewportSize,no=fa.readPixels,$a=fa.useFramebuffer,Vo=na(),To=Vo.width,pu=Vo.height,lu=Xt.layer.getLayerConfig(),Vu=lu.enableHighlight,gu=lu.enableSelect,vl=dr*o.a.DPR,Qo=ti*o.a.DPR;if(!(vl>To||vl<0||Qo>pu||Qo<0)){var ms;$a(Xt.pickingFBO,function(){var Us;if(ms=no({x:Math.round(vl),y:Math.round(pu-(ti+1)*o.a.DPR),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:Xt.pickingFBO}),ms[0]!==0||ms[1]!==0||ms[2]!==0){Xt.logger.debug("picked");var Tu=Object(o.k)(ms),pl=Xt.layer.getSource().getFeatureById(Tu),Gl={x:dr,y:ti,type:Ji,lngLat:Ci,featureId:Tu,feature:pl};pl&&(Xt.layer.setCurrentPickId(Tu),Xt.triggerHoverOnLayer(Gl))}else{var Lc={x:dr,y:ti,lngLat:Ci,type:Xt.layer.getCurrentPickId()===null?"un"+Ji:"mouseout",featureId:null,feature:null};Xt.triggerHoverOnLayer(Ri(Ri({},Lc),{},{type:"unpick"})),Xt.triggerHoverOnLayer(Lc),Xt.layer.setCurrentPickId(null)}Vu&&Xt.highlightPickedFeature(ms),gu&&Ji==="click"&&((Us=ms)===null||Us===void 0?void 0:Us.toString())!==[0,0,0,0].toString()&&Xt.selectFeature(ms)})}}},Xt}return a()(Gt,[{key:"getType",value:function(){return Kt.a.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(ke,un){xr()(k()(Gt.prototype),"init",this).call(this,ke,un),this.layer=ke;var Wn=this.rendererService,ir=Wn.createTexture2D,dr=Wn.createFramebuffer,ti=Wn.getViewportSize,Ci=ti(),Ji=Ci.width,fa=Ci.height;this.pickingFBO=dr({color:ir({width:Ji,height:fa,wrapS:so.a.CLAMP_TO_EDGE,wrapT:so.a.CLAMP_TO_EDGE})}),this.interactionService.on(Ei.a.Hover,this.pickFromPickingFBO),this.interactionService.on(Ei.a.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(Ei.a.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(ke){var un=this;if(!this.alreadyInRendering){var Wn=this.rendererService,ir=Wn.getViewportSize,dr=Wn.useFramebuffer,ti=Wn.clear,Ci=ir(),Ji=Ci.width,fa=Ci.height;this.alreadyInRendering=!0,(this.width!==Ji||this.height!==fa)&&(this.pickingFBO.resize({width:Ji,height:fa}),this.width=Ji,this.height=fa),dr(this.pickingFBO,function(){ti({framebuffer:un.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var na=un.layer.multiPassRenderer.getRenderFlag();un.layer.multiPassRenderer.setRenderFlag(!1),ke.hooks.beforePickingEncode.call(),ke.render(),ke.hooks.afterPickingEncode.call(),un.layer.multiPassRenderer.setRenderFlag(na),un.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(ke){this.layer.emit(ke.type,ke)}},{key:"highlightPickedFeature",value:function(ke){var un=Wt()(ke,3),Wn=un[0],ir=un[1],dr=un[2];this.layer.hooks.beforeHighlight.call([Wn,ir,dr]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(ke){var un=Wt()(ke,3),Wn=un[0],ir=un[1],dr=un[2];this.layer.hooks.beforeSelect.call([Wn,ir,dr]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(ke){var un=ke.featureId,Wn=Object(o.l)(un);this.selectFeature(new Uint8Array(Wn))}},{key:"highlightFeatureHandle",value:function(ke){var un=ke.featureId,Wn=Object(o.l)(un);this.highlightPickedFeature(new Uint8Array(Wn))}}]),Gt}(oe),fi=or()(ai.prototype,"logger",[gi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ai))||Br),ei=R("+em5"),Ea,ka;function Ga(ve,ye){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(ve);ye&&(Xt=Xt.filter(function(ke){return Object.getOwnPropertyDescriptor(ve,ke).enumerable})),Gt.push.apply(Gt,Xt)}return Gt}function Ii(ve){for(var ye=1;ye<arguments.length;ye++){var Gt=arguments[ye]!=null?arguments[ye]:{};ye%2?Ga(Object(Gt),!0).forEach(function(Xt){r()(ve,Xt,Gt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):Ga(Object(Gt)).forEach(function(Xt){Object.defineProperty(ve,Xt,Object.getOwnPropertyDescriptor(Gt,Xt))})}return ve}function Ia(ve){var ye=yo();return function(){var Xt=k()(ve),ke;if(ye){var un=k()(this).constructor;ke=Reflect.construct(Xt,arguments,un)}else ke=Xt.apply(this,arguments);return at()(this,ke)}}function yo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var zs=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Ts=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,el=(Ea=Object(e.injectable)(),Ea(ka=function(ve){ht()(Gt,ve);var ye=Ia(Gt);function Gt(){return n()(this,Gt),ye.apply(this,arguments)}return a()(Gt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Ts,fs:zs});var ke=this.shaderModuleService.getModule("blur-pass"),un=ke.vs,Wn=ke.fs,ir=ke.uniforms,dr=this.rendererService.getViewportSize(),ti=dr.width,Ci=dr.height;return{vs:un,fs:Wn,uniforms:Ii(Ii({},ir),{},{u_ViewportSize:[ti,Ci]})}}},{key:"convertOptionsToUniforms",value:function(ke){var un={};return ss()(ke.blurRadius)||(un.u_BlurDir=[ke.blurRadius,0]),un}}]),Gt}(ei.a))||ka),Mu,j;function I(ve,ye){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(ve);ye&&(Xt=Xt.filter(function(ke){return Object.getOwnPropertyDescriptor(ve,ke).enumerable})),Gt.push.apply(Gt,Xt)}return Gt}function w(ve){for(var ye=1;ye<arguments.length;ye++){var Gt=arguments[ye]!=null?arguments[ye]:{};ye%2?I(Object(Gt),!0).forEach(function(Xt){r()(ve,Xt,Gt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):I(Object(Gt)).forEach(function(Xt){Object.defineProperty(ve,Xt,Object.getOwnPropertyDescriptor(Gt,Xt))})}return ve}function B(ve){var ye=D();return function(){var Xt=k()(ve),ke;if(ye){var un=k()(this).constructor;ke=Reflect.construct(Xt,arguments,un)}else ke=Xt.apply(this,arguments);return at()(this,ke)}}function D(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var W=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,q=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,st=(Mu=Object(e.injectable)(),Mu(j=function(ve){ht()(Gt,ve);var ye=B(Gt);function Gt(){return n()(this,Gt),ye.apply(this,arguments)}return a()(Gt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:q,fs:W});var ke=this.shaderModuleService.getModule("blur-pass"),un=ke.vs,Wn=ke.fs,ir=ke.uniforms,dr=this.rendererService.getViewportSize(),ti=dr.width,Ci=dr.height;return{vs:un,fs:Wn,uniforms:w(w({},ir),{},{u_ViewportSize:[ti,Ci]})}}},{key:"convertOptionsToUniforms",value:function(ke){var un={};return ss()(ke.blurRadius)||(un.u_BlurDir=[0,ke.blurRadius]),un}}]),Gt}(ei.a))||j),Ct,wt;function Ut(ve,ye){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(ve);ye&&(Xt=Xt.filter(function(ke){return Object.getOwnPropertyDescriptor(ve,ke).enumerable})),Gt.push.apply(Gt,Xt)}return Gt}function Zt(ve){for(var ye=1;ye<arguments.length;ye++){var Gt=arguments[ye]!=null?arguments[ye]:{};ye%2?Ut(Object(Gt),!0).forEach(function(Xt){r()(ve,Xt,Gt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):Ut(Object(Gt)).forEach(function(Xt){Object.defineProperty(ve,Xt,Object.getOwnPropertyDescriptor(Gt,Xt))})}return ve}function qt(ve){var ye=he();return function(){var Xt=k()(ve),ke;if(ye){var un=k()(this).constructor;ke=Reflect.construct(Xt,arguments,un)}else ke=Xt.apply(this,arguments);return at()(this,ke)}}function he(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var me=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,De=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Ae=(Ct=Object(e.injectable)(),Ct(wt=function(ve){ht()(Gt,ve);var ye=qt(Gt);function Gt(){return n()(this,Gt),ye.apply(this,arguments)}return a()(Gt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:De,fs:me});var ke=this.shaderModuleService.getModule("colorhalftone-pass"),un=ke.vs,Wn=ke.fs,ir=ke.uniforms,dr=this.rendererService.getViewportSize(),ti=dr.width,Ci=dr.height;return{vs:un,fs:Wn,uniforms:Zt(Zt({},ir),{},{u_ViewportSize:[ti,Ci]})}}}]),Gt}(ei.a))||wt),Ue,qe;function rn(ve){var ye=Xn();return function(){var Xt=k()(ve),ke;if(ye){var un=k()(this).constructor;ke=Reflect.construct(Xt,arguments,un)}else ke=Xt.apply(this,arguments);return at()(this,ke)}}function Xn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var Un=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,gr=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Mr=(Ue=Object(e.injectable)(),Ue(qe=function(ve){ht()(Gt,ve);var ye=rn(Gt);function Gt(){return n()(this,Gt),ye.apply(this,arguments)}return a()(Gt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:gr,fs:Un}),this.shaderModuleService.getModule("copy-pass")}}]),Gt}(ei.a))||qe),Qr,Vr;function _i(ve,ye){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(ve);ye&&(Xt=Xt.filter(function(ke){return Object.getOwnPropertyDescriptor(ve,ke).enumerable})),Gt.push.apply(Gt,Xt)}return Gt}function Di(ve){for(var ye=1;ye<arguments.length;ye++){var Gt=arguments[ye]!=null?arguments[ye]:{};ye%2?_i(Object(Gt),!0).forEach(function(Xt){r()(ve,Xt,Gt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):_i(Object(Gt)).forEach(function(Xt){Object.defineProperty(ve,Xt,Object.getOwnPropertyDescriptor(Gt,Xt))})}return ve}function Wi(ve){var ye=Xi();return function(){var Xt=k()(ve),ke;if(ye){var un=k()(this).constructor;ke=Reflect.construct(Xt,arguments,un)}else ke=Xt.apply(this,arguments);return at()(this,ke)}}function Xi(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var La=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Na=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Vi=(Qr=Object(e.injectable)(),Qr(Vr=function(ve){ht()(Gt,ve);var ye=Wi(Gt);function Gt(){return n()(this,Gt),ye.apply(this,arguments)}return a()(Gt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:Na,fs:La});var ke=this.shaderModuleService.getModule("hexagonalpixelate-pass"),un=ke.vs,Wn=ke.fs,ir=ke.uniforms,dr=this.rendererService.getViewportSize(),ti=dr.width,Ci=dr.height;return{vs:un,fs:Wn,uniforms:Di(Di({},ir),{},{u_ViewportSize:[ti,Ci]})}}}]),Gt}(ei.a))||Vr),Ma,xa;function Hi(ve,ye){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(ve);ye&&(Xt=Xt.filter(function(ke){return Object.getOwnPropertyDescriptor(ve,ke).enumerable})),Gt.push.apply(Gt,Xt)}return Gt}function ha(ve){for(var ye=1;ye<arguments.length;ye++){var Gt=arguments[ye]!=null?arguments[ye]:{};ye%2?Hi(Object(Gt),!0).forEach(function(Xt){r()(ve,Xt,Gt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):Hi(Object(Gt)).forEach(function(Xt){Object.defineProperty(ve,Xt,Object.getOwnPropertyDescriptor(Gt,Xt))})}return ve}function aa(ve){var ye=Ca();return function(){var Xt=k()(ve),ke;if(ye){var un=k()(this).constructor;ke=Reflect.construct(Xt,arguments,un)}else ke=Xt.apply(this,arguments);return at()(this,ke)}}function Ca(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var Va=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,As=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Rs=(Ma=Object(e.injectable)(),Ma(xa=function(ve){ht()(Gt,ve);var ye=aa(Gt);function Gt(){return n()(this,Gt),ye.apply(this,arguments)}return a()(Gt,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:As,fs:Va});var ke=this.shaderModuleService.getModule("ink-pass"),un=ke.vs,Wn=ke.fs,ir=ke.uniforms,dr=this.rendererService.getViewportSize(),ti=dr.width,Ci=dr.height;return{vs:un,fs:Wn,uniforms:ha(ha({},ir),{},{u_ViewportSize:[ti,Ci]})}}}]),Gt}(ei.a))||xa),gs,fs;function Qs(ve){var ye=_l();return function(){var Xt=k()(ve),ke;if(ye){var un=k()(this).constructor;ke=Reflect.construct(Xt,arguments,un)}else ke=Xt.apply(this,arguments);return at()(this,ke)}}function _l(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var du=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,uc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Mc=(gs=Object(e.injectable)(),gs(fs=function(ve){ht()(Gt,ve);var ye=Qs(Gt);function Gt(){return n()(this,Gt),ye.apply(this,arguments)}return a()(Gt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:uc,fs:du}),this.shaderModuleService.getModule("noise-pass")}}]),Gt}(ei.a))||fs),Il,ql;function Ic(ve){var ye=qc();return function(){var Xt=k()(ve),ke;if(ye){var un=k()(this).constructor;ke=Reflect.construct(Xt,arguments,un)}else ke=Xt.apply(this,arguments);return at()(this,ke)}}function qc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var Pc=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Zc=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`,of=(Il=Object(e.injectable)(),Il(ql=function(ve){ht()(Gt,ve);var ye=Ic(Gt);function Gt(){return n()(this,Gt),ye.apply(this,arguments)}return a()(Gt,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:Pc,fs:Zc}),this.shaderModuleService.getModule("sepia-pass")}}]),Gt}(ei.a))||ql),vc,kc,bc,au,tc,Tc,ec=(vc=Object(e.injectable)(),kc=Object(e.inject)(s.a.IRendererService),bc=Object(e.postConstruct)(),vc(au=(tc=function(){function ve(){n()(this,ve),dn()(this,"rendererService",Tc,this),this.passes=[],this.readFBO=void 0,this.writeFBO=void 0}return a()(ve,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"render",value:function(){var ye=Bo()(ao.a.mark(function Xt(ke){var un,Wn;return ao.a.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:un=0;case 1:if(!(un<this.passes.length)){dr.next=10;break}return Wn=this.passes[un],Wn.setRenderToScreen(this.isLastEnabledPass(un)),dr.next=6,Wn.render(ke);case 6:un!==this.passes.length-1&&this.swap();case 7:un++,dr.next=1;break;case 10:case"end":return dr.stop()}},Xt,this)}));function Gt(Xt){return ye.apply(this,arguments)}return Gt}()},{key:"resize",value:function(Gt,Xt){this.readFBO.resize({width:Gt,height:Xt}),this.writeFBO.resize({width:Gt,height:Xt})}},{key:"add",value:function(Gt,Xt,ke){Gt.init(Xt,ke),this.passes.push(Gt)}},{key:"insert",value:function(Gt,Xt,ke,un){Gt.init(ke,un),this.passes.splice(Xt,0,Gt)}},{key:"getPostProcessingPassByName",value:function(Gt){return this.passes.find(function(Xt){return Xt.getName()===Gt})}},{key:"init",value:function(){}},{key:"isLastEnabledPass",value:function(Gt){for(var Xt=Gt+1;Xt<this.passes.length;Xt++)if(this.passes[Xt].isEnabled())return!1;return!0}},{key:"swap",value:function(){var Gt=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=Gt}}]),ve}(),Tc=or()(tc.prototype,"rendererService",[kc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),or()(tc.prototype,"init",[bc],Object.getOwnPropertyDescriptor(tc.prototype,"init"),tc.prototype),tc))||au),Pu,vu;function cl(ve){var ye=Ll();return function(){var Xt=k()(ve),ke;if(ye){var un=k()(this).constructor;ke=Reflect.construct(Xt,arguments,un)}else ke=Xt.apply(this,arguments);return at()(this,ke)}}function Ll(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var fl=(Pu=Object(e.injectable)(),Pu(vu=function(ve){ht()(Gt,ve);var ye=cl(Gt);function Gt(){return n()(this,Gt),ye.apply(this,arguments)}return a()(Gt,[{key:"getType",value:function(){return Kt.a.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(ke,un){xr()(k()(Gt.prototype),"init",this).call(this,ke,un)}},{key:"render",value:function(ke){var un=this.rendererService,Wn=un.useFramebuffer,ir=un.clear;Wn(null,function(){ir({color:[0,0,0,0],depth:1,stencil:0}),ke.multiPassRenderer.setRenderFlag(!1),ke.render(),ke.multiPassRenderer.setRenderFlag(!0)})}}]),Gt}(oe))||vu),kl,Gc,tf,Vc,lc,hl,Ec;function Kl(ve,ye){var Gt=Object.keys(ve);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(ve);ye&&(Xt=Xt.filter(function(ke){return Object.getOwnPropertyDescriptor(ve,ke).enumerable})),Gt.push.apply(Gt,Xt)}return Gt}function dl(ve){for(var ye=1;ye<arguments.length;ye++){var Gt=arguments[ye]!=null?arguments[ye]:{};ye%2?Kl(Object(Gt),!0).forEach(function(Xt){r()(ve,Xt,Gt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ve,Object.getOwnPropertyDescriptors(Gt)):Kl(Object(Gt)).forEach(function(Xt){Object.defineProperty(ve,Xt,Object.getOwnPropertyDescriptor(Gt,Xt))})}return ve}function Jf(ve){var ye=cf();return function(){var Xt=k()(ve),ke;if(ye){var un=k()(this).constructor;ke=Reflect.construct(Xt,arguments,un)}else ke=Xt.apply(this,arguments);return at()(this,ke)}}function cf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ve){return!1}}var pf=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,_f=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Gf=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function gf(ve,ye){for(var Gt=0,Xt=1/ye,ke=ve;ke>0;)Gt=Gt+Xt*(ke%ye),ke=Math.floor(ke/ye),Xt=Xt/ye;return Gt}var Wc=1,$f=(kl=Object(e.injectable)(),Gc=Object(e.inject)(s.a.IShaderModuleService),tf=Object(e.inject)(s.a.ILogService),kl(Vc=(lc=function(ve){ht()(Gt,ve);var ye=Jf(Gt);function Gt(){var Xt;n()(this,Gt);for(var ke=arguments.length,un=new Array(ke),Wn=0;Wn<ke;Wn++)un[Wn]=arguments[Wn];return Xt=ye.call.apply(ye,[this].concat(un)),dn()(Xt,"shaderModuleService",hl,br()(Xt)),dn()(Xt,"logger",Ec,br()(Xt)),Xt.haltonSequence=[],Xt.accumulatingId=0,Xt.frame=0,Xt.timer=void 0,Xt.sampleRenderTarget=void 0,Xt.prevRenderTarget=void 0,Xt.outputRenderTarget=void 0,Xt.copyRenderTarget=void 0,Xt.blendModel=void 0,Xt.outputModel=void 0,Xt.copyModel=void 0,Xt}return a()(Gt,[{key:"getType",value:function(){return Kt.a.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(ke,un){xr()(k()(Gt.prototype),"init",this).call(this,ke,un);var Wn=this.rendererService,ir=Wn.createFramebuffer,dr=Wn.createTexture2D;this.sampleRenderTarget=ir({color:dr({width:1,height:1,wrapS:so.a.CLAMP_TO_EDGE,wrapT:so.a.CLAMP_TO_EDGE})}),this.prevRenderTarget=ir({color:dr({width:1,height:1,wrapS:so.a.CLAMP_TO_EDGE,wrapT:so.a.CLAMP_TO_EDGE})}),this.outputRenderTarget=ir({color:dr({width:1,height:1,wrapS:so.a.CLAMP_TO_EDGE,wrapT:so.a.CLAMP_TO_EDGE})}),this.copyRenderTarget=ir({color:dr({width:1,height:1,wrapS:so.a.CLAMP_TO_EDGE,wrapT:so.a.CLAMP_TO_EDGE})});for(var ti=0;ti<30;ti++)this.haltonSequence.push([gf(ti,2),gf(ti,3)]);this.blendModel=this.createTriangleModel("blend-pass",pf),this.outputModel=this.createTriangleModel("copy-pass",_f,{blend:{enable:!0,func:{srcRGB:so.a.ONE,dstRGB:so.a.ONE_MINUS_SRC_ALPHA,srcAlpha:so.a.ONE,dstAlpha:so.a.ONE_MINUS_SRC_ALPHA},equation:{rgb:so.a.FUNC_ADD,alpha:so.a.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",_f)}},{key:"render",value:function(ke){var un=this,Wn=this.rendererService,ir=Wn.clear,dr=Wn.getViewportSize,ti=Wn.useFramebuffer,Ci=dr(),Ji=Ci.width,fa=Ci.height;this.sampleRenderTarget.resize({width:Ji,height:fa}),this.prevRenderTarget.resize({width:Ji,height:fa}),this.outputRenderTarget.resize({width:Ji,height:fa}),this.copyRenderTarget.resize({width:Ji,height:fa}),this.resetFrame(),this.stopAccumulating();var na=ke.multiPassRenderer.getPostProcessor().getReadFBO();ti(na,function(){ir({color:[0,0,0,0],depth:1,stencil:0,framebuffer:na}),ke.multiPassRenderer.setRenderFlag(!1),ke.render(),ke.multiPassRenderer.setRenderFlag(!0)});var no=function $a(Vo){!un.accumulatingId||Vo!==un.accumulatingId||un.isFinished()||(un.doRender(ke),requestAnimationFrame(function(){$a(Vo)}))};this.accumulatingId=Wc++,this.timer=window.setTimeout(function(){no(un.accumulatingId)},50)}},{key:"doRender",value:function(ke){var un=this;this.logger.debug("accumulatingId: ".concat(this.accumulatingId));var Wn=this.rendererService,ir=Wn.clear,dr=Wn.getViewportSize,ti=Wn.useFramebuffer,Ci=dr(),Ji=Ci.width,fa=Ci.height,na=ke.getLayerConfig(),no=na.jitterScale,$a=no===void 0?1:no,Vo=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((Vo[0]*2-1)/Ji*$a,(Vo[1]*2-1)/fa*$a),ke.multiPassRenderer.setRenderFlag(!1),ke.hooks.beforeRender.call(),ti(this.sampleRenderTarget,function(){ir({color:[0,0,0,0],depth:1,stencil:0,framebuffer:un.sampleRenderTarget}),ke.render()}),ke.hooks.afterRender.call(),ke.multiPassRenderer.setRenderFlag(!0);var To=ke.getLayerConfig();ti(this.outputRenderTarget,function(){un.blendModel.draw({uniforms:{u_opacity:To.opacity||1,u_MixRatio:un.frame===0?1:.9,u_Diffuse1:un.sampleRenderTarget,u_Diffuse2:un.frame===0?ke.multiPassRenderer.getPostProcessor().getReadFBO():un.prevRenderTarget}})}),this.frame===0&&ir({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(ti(this.copyRenderTarget,function(){un.outputModel.draw({uniforms:{u_Texture:un.outputRenderTarget}})}),ti(ke.multiPassRenderer.getPostProcessor().getReadFBO(),function(){un.copyModel.draw({uniforms:{u_Texture:un.copyRenderTarget}})}),ke.multiPassRenderer.getPostProcessor().render(ke));var pu=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=pu,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,window.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(ke,un,Wn){this.shaderModuleService.registerModule(ke,{vs:Gf,fs:un});var ir=this.shaderModuleService.getModule(ke),dr=ir.vs,ti=ir.fs,Ci=ir.uniforms,Ji=this.rendererService,fa=Ji.createAttribute,na=Ji.createBuffer,no=Ji.createModel;return no(dl({vs:dr,fs:ti,attributes:{a_Position:fa({buffer:na({data:[-4,-4,4,-4,0,4],type:so.a.FLOAT}),size:2})},uniforms:dl({},Ci),depth:{enable:!1},count:3},Wn))}}]),Gt}(oe),hl=or()(lc.prototype,"shaderModuleService",[Gc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ec=or()(lc.prototype,"logger",[tf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lc))||Vc),Ac=new e.Container;Ac.bind(s.a.IGlobalConfigService).to(tr).inSingletonScope(),Ac.bind(s.a.IShaderModuleService).to(zr).inSingletonScope(),Ac.bind(s.a.ILogService).to(zu).inSingletonScope(),Object(e.decorate)(Object(e.injectable)(),E.EventEmitter),Ac.bind(s.a.IEventEmitter).to(E.EventEmitter);var ef=u()(Ac,!1),Kc=function(ye){var Gt=ef.lazyInject(ye);return function(Xt,ke,un){Gt.call(this,Xt,ke),un&&(un.initializer=function(){return Xt[ke]})}},Mf=function(ye){var Gt=ef.lazyMultiInject(ye);return function(Xt,ke,un){Gt.call(this,Xt,ke),un&&(un.initializer=function(){return Xt[ke]})}},hh=ct.c=Ac,Qf=0;function Vf(){var ve=new e.Container;return ve.parent=Ac,ve.bind(s.a.SceneID).toConstantValue("".concat(Qf++)),ve.bind(s.a.ILayerService).to(ls).inSingletonScope(),ve.bind(s.a.ISceneService).to(us).inSingletonScope(),ve.bind(s.a.ICameraService).to(Oe).inSingletonScope(),ve.bind(s.a.ICoordinateSystemService).to(Hn).inSingletonScope(),ve.bind(s.a.IInteractionService).to(Ra).inSingletonScope(),ve.bind(s.a.IPickingService).to(sa).inSingletonScope(),ve.bind(s.a.IControlService).to(on).inSingletonScope(),ve.bind(s.a.IMarkerService).to(jn).inSingletonScope(),ve.bind(s.a.IIconService).to(ee).inSingletonScope(),ve.bind(s.a.IFontService).to(z).inSingletonScope(),ve.bind(s.a.IPopupService).to(Ce).inSingletonScope(),ve.bind(s.a.INormalPass).to(nn).whenTargetNamed("clear"),ve.bind(s.a.INormalPass).to(_a).whenTargetNamed("pixelPicking"),ve.bind(s.a.INormalPass).to(fl).whenTargetNamed("render"),ve.bind(s.a.INormalPass).to($f).whenTargetNamed("taa"),ve.bind(s.a.IFactoryNormalPass).toFactory(function(ye){return function(Gt){return ye.container.getNamed(s.a.INormalPass,Gt)}}),ve.bind(s.a.IPostProcessingPass).to(Mr).whenTargetNamed("copy"),ve.bind(s.a.IPostProcessingPass).to(el).whenTargetNamed("blurH"),ve.bind(s.a.IPostProcessingPass).to(st).whenTargetNamed("blurV"),ve.bind(s.a.IPostProcessingPass).to(Mc).whenTargetNamed("noise"),ve.bind(s.a.IPostProcessingPass).to(of).whenTargetNamed("sepia"),ve.bind(s.a.IPostProcessingPass).to(Ae).whenTargetNamed("colorHalftone"),ve.bind(s.a.IPostProcessingPass).to(Vi).whenTargetNamed("hexagonalPixelate"),ve.bind(s.a.IPostProcessingPass).to(Rs).whenTargetNamed("ink"),ve.bind(s.a.IFactoryPostProcessingPass).toFactory(function(ye){return function(Gt){var Xt=ye.container.getNamed(s.a.IPostProcessingPass,Gt);return Xt.setName(Gt),Xt}}),ve}function qf(ve){var ye=new e.Container;return ye.parent=ve,ye.bind(s.a.IStyleAttributeService).to(Ss).inSingletonScope(),ye.bind(s.a.IMultiPassRenderer).to(mr).inSingletonScope(),ye.bind(s.a.IPostProcessor).to(ec).inSingletonScope(),ye}},fbrv:function(Se,ct,R){"use strict";var V=this&&this.__spreadArray||function(l,f){for(var v=0,b=f.length,g=l.length;v<b;v++,g++)l[g]=f[v];return l};Object.defineProperty(ct,"__esModule",{value:!0}),ct.getFunctionName=ct.getBaseClassDependencyCount=ct.getDependencies=void 0;var E=R("Yk9n"),T=R("MON2"),e=R("FV85"),t=R("xfSm"),u=R("ujMp");Object.defineProperty(ct,"getFunctionName",{enumerable:!0,get:function(){return u.getFunctionName}});var s=R("dX1H");function c(l,f){var v=u.getFunctionName(f),b=r(l,v,f,!1);return b}ct.getDependencies=c;function r(l,f,v,b){var g=l.getConstructorMetadata(v),m=g.compilerGeneratedMetadata;if(m===void 0){var _=T.MISSING_INJECTABLE_ANNOTATION+" "+f+".";throw new Error(_)}var M=g.userGeneratedMetadata,x=Object.keys(M),y=v.length===0&&x.length>0,S=x.length>v.length,P=y||S?x.length:v.length,A=n(b,f,m,M,P),O=i(l,v),L=V(V([],A),O);return L}function h(l,f,v,b,g){var m=g[l.toString()]||[],_=o(m),M=_.unmanaged!==!0,x=b[l],y=_.inject||_.multiInject;if(x=y||x,x instanceof E.LazyServiceIdentifer&&(x=x.unwrap()),M){var S=x===Object,P=x===Function,A=x===void 0,O=S||P||A;if(!f&&O){var L=T.MISSING_INJECT_ANNOTATION+" argument "+l+" in class "+v+".";throw new Error(L)}var H=new s.Target(e.TargetTypeEnum.ConstructorArgument,_.targetName,x);return H.metadata=m,H}return null}function n(l,f,v,b,g){for(var m=[],_=0;_<g;_++){var M=_,x=h(M,l,f,v,b);x!==null&&m.push(x)}return m}function i(l,f){for(var v=l.getPropertiesMetadata(f),b=[],g=Object.keys(v),m=0,_=g;m<_.length;m++){var M=_[m],x=v[M],y=o(v[M]),S=y.targetName||M,P=y.inject||y.multiInject,A=new s.Target(e.TargetTypeEnum.ClassProperty,S,P);A.metadata=x,b.push(A)}var O=Object.getPrototypeOf(f.prototype).constructor;if(O!==Object){var L=i(l,O);b=V(V([],b),L)}return b}function a(l,f){var v=Object.getPrototypeOf(f.prototype).constructor;if(v!==Object){var b=u.getFunctionName(v),g=r(l,b,v,!0),m=g.map(function(x){return x.metadata.filter(function(y){return y.key===t.UNMANAGED_TAG})}),_=[].concat.apply([],m).length,M=g.length-_;return M>0?M:a(l,v)}else return 0}ct.getBaseClassDependencyCount=a;function o(l){var f={};return l.forEach(function(v){f[v.key.toString()]=v.value}),{inject:f[t.INJECT_TAG],multiInject:f[t.MULTI_INJECT_TAG],targetName:f[t.NAME_TAG],unmanaged:f[t.UNMANAGED_TAG]}}},fbvF:function(Se,ct,R){(function(V,E){Se.exports=E()})(this,function(){"use strict";var V=function(be){return be instanceof Uint8Array||be instanceof Uint16Array||be instanceof Uint32Array||be instanceof Int8Array||be instanceof Int16Array||be instanceof Int32Array||be instanceof Float32Array||be instanceof Float64Array||be instanceof Uint8ClampedArray},E=function(be,Xe){for(var zn=Object.keys(Xe),lr=0;lr<zn.length;++lr)be[zn[lr]]=Xe[zn[lr]];return be},T=`
`;function e(ce){return typeof atob!="undefined"?atob(ce):"base64:"+ce}function t(ce){var be=new Error("(regl) "+ce);throw console.error(be),be}function u(ce,be){ce||t(be)}function s(ce){return ce?": "+ce:""}function c(ce,be,Xe){ce in be||t("unknown parameter ("+ce+")"+s(Xe)+". possible values: "+Object.keys(be).join())}function r(ce,be){V(ce)||t("invalid parameter type"+s(be)+". must be a typed array")}function h(ce,be){switch(be){case"number":return typeof ce=="number";case"object":return typeof ce=="object";case"string":return typeof ce=="string";case"boolean":return typeof ce=="boolean";case"function":return typeof ce=="function";case"undefined":return typeof ce=="undefined";case"symbol":return typeof ce=="symbol"}}function n(ce,be,Xe){h(ce,be)||t("invalid parameter type"+s(Xe)+". expected "+be+", got "+typeof ce)}function i(ce,be){ce>=0&&(ce|0)===ce||t("invalid parameter type, ("+ce+")"+s(be)+". must be a nonnegative integer")}function a(ce,be,Xe){be.indexOf(ce)<0&&t("invalid value"+s(Xe)+". must be one of: "+be)}var o=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function l(ce){Object.keys(ce).forEach(function(be){o.indexOf(be)<0&&t('invalid regl constructor argument "'+be+'". must be one of '+o)})}function f(ce,be){for(ce=ce+"";ce.length<be;)ce=" "+ce;return ce}function v(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function b(ce,be){this.number=ce,this.line=be,this.errors=[]}function g(ce,be,Xe){this.file=ce,this.line=be,this.message=Xe}function m(){var ce=new Error,be=(ce.stack||ce).toString(),Xe=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(be);if(Xe)return Xe[1];var zn=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(be);return zn?zn[1]:"unknown"}function _(){var ce=new Error,be=(ce.stack||ce).toString(),Xe=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(be);if(Xe)return Xe[1];var zn=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(be);return zn?zn[1]:"unknown"}function M(ce,be){var Xe=ce.split(`
`),zn=1,lr=0,vr={unknown:new v,0:new v};vr.unknown.name=vr[0].name=be||m(),vr.unknown.lines.push(new b(0,""));for(var Qn=0;Qn<Xe.length;++Qn){var Jr=Xe[Qn],$r=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Jr);if($r)switch($r[1]){case"line":var ri=/(\d+)(\s+\d+)?/.exec($r[2]);ri&&(zn=ri[1]|0,ri[2]&&(lr=ri[2]|0,lr in vr||(vr[lr]=new v)));break;case"define":var ui=/SHADER_NAME(_B64)?\s+(.*)$/.exec($r[2]);ui&&(vr[lr].name=ui[1]?e(ui[2]):ui[2]);break}vr[lr].lines.push(new b(zn++,Jr))}return Object.keys(vr).forEach(function(xi){var Ti=vr[xi];Ti.lines.forEach(function(pi){Ti.index[pi.number]=pi})}),vr}function x(ce){var be=[];return ce.split(`
`).forEach(function(Xe){if(!(Xe.length<5)){var zn=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Xe);zn?be.push(new g(zn[1]|0,zn[2]|0,zn[3].trim())):Xe.length>0&&be.push(new g("unknown",0,Xe))}}),be}function y(ce,be){be.forEach(function(Xe){var zn=ce[Xe.file];if(zn){var lr=zn.index[Xe.line];if(lr){lr.errors.push(Xe),zn.hasErrors=!0;return}}ce.unknown.hasErrors=!0,ce.unknown.lines[0].errors.push(Xe)})}function S(ce,be,Xe,zn,lr){if(!ce.getShaderParameter(be,ce.COMPILE_STATUS)){var vr=ce.getShaderInfoLog(be),Qn=zn===ce.FRAGMENT_SHADER?"fragment":"vertex";Z(Xe,"string",Qn+" shader source must be a string",lr);var Jr=M(Xe,lr),$r=x(vr);y(Jr,$r),Object.keys(Jr).forEach(function(ri){var ui=Jr[ri];if(!ui.hasErrors)return;var xi=[""],Ti=[""];function pi(hi,Cr){xi.push(hi),Ti.push(Cr||"")}pi("file number "+ri+": "+ui.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ui.lines.forEach(function(hi){if(hi.errors.length>0){pi(f(hi.number,4)+"|  ","background-color:yellow; font-weight:bold"),pi(hi.line+T,"color:red; background-color:yellow; font-weight:bold");var Cr=0;hi.errors.forEach(function(Lr){var bi=Lr.message,ki=/^\s*'(.*)'\s*:\s*(.*)$/.exec(bi);if(ki){var qr=ki[1];switch(bi=ki[2],qr){case"assign":qr="=";break}Cr=Math.max(hi.line.indexOf(qr,Cr),0)}else Cr=0;pi(f("| ",6)),pi(f("^^^",Cr+3)+T,"font-weight:bold"),pi(f("| ",6)),pi(bi+T,"font-weight:bold")}),pi(f("| ",6)+T)}else pi(f(hi.number,4)+"|  "),pi(hi.line+T,"color:red")}),typeof document!="undefined"&&!window.chrome?(Ti[0]=xi.join("%c"),console.log.apply(console,Ti)):console.log(xi.join(""))}),u.raise("Error compiling "+Qn+" shader, "+Jr[0].name)}}function P(ce,be,Xe,zn,lr){if(!ce.getProgramParameter(be,ce.LINK_STATUS)){var vr=ce.getProgramInfoLog(be),Qn=M(Xe,lr),Jr=M(zn,lr),$r='Error linking program with vertex shader, "'+Jr[0].name+'", and fragment shader "'+Qn[0].name+'"';typeof document!="undefined"?console.log("%c"+$r+T+"%c"+vr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log($r+T+vr),u.raise($r)}}function A(ce){ce._commandRef=m()}function O(ce,be,Xe,zn){A(ce);function lr($r){return $r?zn.id($r):0}ce._fragId=lr(ce.static.frag),ce._vertId=lr(ce.static.vert);function vr($r,ri){Object.keys(ri).forEach(function(ui){$r[zn.id(ui)]=!0})}var Qn=ce._uniformSet={};vr(Qn,be.static),vr(Qn,be.dynamic);var Jr=ce._attributeSet={};vr(Jr,Xe.static),vr(Jr,Xe.dynamic),ce._hasCount="count"in ce.static||"count"in ce.dynamic||"elements"in ce.static||"elements"in ce.dynamic}function L(ce,be){var Xe=_();t(ce+" in command "+(be||m())+(Xe==="unknown"?"":" called from "+Xe))}function H(ce,be,Xe){ce||L(be,Xe||m())}function F(ce,be,Xe,zn){ce in be||L("unknown parameter ("+ce+")"+s(Xe)+". possible values: "+Object.keys(be).join(),zn||m())}function Z(ce,be,Xe,zn){h(ce,be)||L("invalid parameter type"+s(Xe)+". expected "+be+", got "+typeof ce,zn||m())}function G(ce){ce()}function U(ce,be,Xe){ce.texture?a(ce.texture._texture.internalformat,be,"unsupported texture format for attachment"):a(ce.renderbuffer._renderbuffer.format,Xe,"unsupported renderbuffer format for attachment")}var Y=33071,J=9728,rt=9984,ft=9985,dt=9986,ut=9987,Lt=5120,Ft=5121,Ot=5122,St=5123,xt=5124,At=5125,nt=5126,Mt=32819,z=32820,Q=33635,ht=34042,et=36193,at={};at[Lt]=at[Ft]=1,at[Ot]=at[St]=at[et]=at[Q]=at[Mt]=at[z]=2,at[xt]=at[At]=at[nt]=at[ht]=4;function gt(ce,be){return ce===z||ce===Mt||ce===Q?2:ce===ht?4:at[ce]*be}function k(ce){return!(ce&ce-1)&&!!ce}function ot(ce,be,Xe){var zn,lr=be.width,vr=be.height,Qn=be.channels;u(lr>0&&lr<=Xe.maxTextureSize&&vr>0&&vr<=Xe.maxTextureSize,"invalid texture shape"),(ce.wrapS!==Y||ce.wrapT!==Y)&&u(k(lr)&&k(vr),"incompatible wrap mode for texture, both width and height must be power of 2"),be.mipmask===1?lr!==1&&vr!==1&&u(ce.minFilter!==rt&&ce.minFilter!==dt&&ce.minFilter!==ft&&ce.minFilter!==ut,"min filter requires mipmap"):(u(k(lr)&&k(vr),"texture must be a square power of 2 to support mipmapping"),u(be.mipmask===(lr<<1)-1,"missing or incomplete mipmap data")),be.type===nt&&(Xe.extensions.indexOf("oes_texture_float_linear")<0&&u(ce.minFilter===J&&ce.magFilter===J,"filter not supported, must enable oes_texture_float_linear"),u(!ce.genMipmaps,"mipmap generation not supported with float textures"));var Jr=be.images;for(zn=0;zn<16;++zn)if(Jr[zn]){var $r=lr>>zn,ri=vr>>zn;u(be.mipmask&1<<zn,"missing mipmap data");var ui=Jr[zn];if(u(ui.width===$r&&ui.height===ri,"invalid shape for mip images"),u(ui.format===be.format&&ui.internalformat===be.internalformat&&ui.type===be.type,"incompatible type for mip image"),!ui.compressed)if(ui.data){var xi=Math.ceil(gt(ui.type,Qn)*$r/ui.unpackAlignment)*ui.unpackAlignment;u(ui.data.byteLength===xi*ri,"invalid data for image, buffer size is inconsistent with image format")}else ui.element||ui.copy}else ce.genMipmaps||u((be.mipmask&1<<zn)==0,"extra mipmap data");be.compressed&&u(!ce.genMipmaps,"mipmap generation for compressed images not supported")}function it(ce,be,Xe,zn){var lr=ce.width,vr=ce.height,Qn=ce.channels;u(lr>0&&lr<=zn.maxTextureSize&&vr>0&&vr<=zn.maxTextureSize,"invalid texture shape"),u(lr===vr,"cube map must be square"),u(be.wrapS===Y&&be.wrapT===Y,"wrap mode not supported by cube map");for(var Jr=0;Jr<Xe.length;++Jr){var $r=Xe[Jr];u($r.width===lr&&$r.height===vr,"inconsistent cube map face shape"),be.genMipmaps&&(u(!$r.compressed,"can not generate mipmap for compressed textures"),u($r.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var ri=$r.images,ui=0;ui<16;++ui){var xi=ri[ui];if(xi){var Ti=lr>>ui,pi=vr>>ui;u($r.mipmask&1<<ui,"missing mipmap data"),u(xi.width===Ti&&xi.height===pi,"invalid shape for mip images"),u(xi.format===ce.format&&xi.internalformat===ce.internalformat&&xi.type===ce.type,"incompatible type for mip image"),xi.compressed||(xi.data?u(xi.data.byteLength===Ti*pi*Math.max(gt(xi.type,Qn),xi.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):xi.element||xi.copy)}}}}var X=E(u,{optional:G,raise:t,commandRaise:L,command:H,parameter:c,commandParameter:F,constructor:l,type:n,commandType:Z,isTypedArray:r,nni:i,oneOf:a,shaderError:S,linkError:P,callSite:_,saveCommandRef:A,saveDrawInfo:O,framebufferFormat:U,guessCommand:m,texture2D:ot,textureCube:it}),Et=0,vt=0,Nt=5,$t=6;function ee(ce,be){this.id=Et++,this.type=ce,this.data=be}function kt(ce){return ce.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Wt(ce){if(ce.length===0)return[];var be=ce.charAt(0),Xe=ce.charAt(ce.length-1);if(ce.length>1&&be===Xe&&(be==='"'||be==="'"))return['"'+kt(ce.substr(1,ce.length-2))+'"'];var zn=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(ce);if(zn)return Wt(ce.substr(0,zn.index)).concat(Wt(zn[1])).concat(Wt(ce.substr(zn.index+zn[0].length)));var lr=ce.split(".");if(lr.length===1)return['"'+kt(ce)+'"'];for(var vr=[],Qn=0;Qn<lr.length;++Qn)vr=vr.concat(Wt(lr[Qn]));return vr}function ae(ce){return"["+Wt(ce).join("][")+"]"}function le(ce,be){return new ee(ce,ae(be+""))}function je(ce){return typeof ce=="function"&&!ce._reglType||ce instanceof ee}function Oe(ce,be){if(typeof ce=="function")return new ee(vt,ce);if(typeof ce=="number"||typeof ce=="boolean")return new ee(Nt,ce);if(Array.isArray(ce))return new ee($t,ce.map(function(Xe,zn){return Oe(Xe,be+"["+zn+"]")}));if(ce instanceof ee)return ce;X(!1,"invalid option type in uniform "+be)}var We={DynamicVariable:ee,define:le,isDynamic:je,unbox:Oe,accessor:ae},Ye={next:typeof requestAnimationFrame=="function"?function(ce){return requestAnimationFrame(ce)}:function(ce){return setTimeout(ce,16)},cancel:typeof cancelAnimationFrame=="function"?function(ce){return cancelAnimationFrame(ce)}:clearTimeout},wn=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function er(){var ce={"":0},be=[""];return{id:function(zn){var lr=ce[zn];return lr||(lr=ce[zn]=be.length,be.push(zn),lr)},str:function(zn){return be[zn]}}}function wr(ce,be,Xe){var zn=document.createElement("canvas");E(zn.style,{border:0,margin:0,padding:0,top:0,left:0}),ce.appendChild(zn),ce===document.body&&(zn.style.position="absolute",E(ce.style,{margin:0,padding:0}));function lr(){var Jr=window.innerWidth,$r=window.innerHeight;if(ce!==document.body){var ri=ce.getBoundingClientRect();Jr=ri.right-ri.left,$r=ri.bottom-ri.top}zn.width=Xe*Jr,zn.height=Xe*$r,E(zn.style,{width:Jr+"px",height:$r+"px"})}var vr;ce!==document.body&&typeof ResizeObserver=="function"?(vr=new ResizeObserver(function(){setTimeout(lr)}),vr.observe(ce)):window.addEventListener("resize",lr,!1);function Qn(){vr?vr.disconnect():window.removeEventListener("resize",lr),ce.removeChild(zn)}return lr(),{canvas:zn,onDestroy:Qn}}function on(ce,be){function Xe(zn){try{return ce.getContext(zn,be)}catch(lr){return null}}return Xe("webgl")||Xe("experimental-webgl")||Xe("webgl-experimental")}function en(ce){return typeof ce.nodeName=="string"&&typeof ce.appendChild=="function"&&typeof ce.getBoundingClientRect=="function"}function An(ce){return typeof ce.drawArrays=="function"||typeof ce.drawElements=="function"}function jn(ce){return typeof ce=="string"?ce.split():(X(Array.isArray(ce),"invalid extension array"),ce)}function pr(ce){return typeof ce=="string"?(X(typeof document!="undefined","not supported outside of DOM"),document.querySelector(ce)):ce}function di(ce){var be=ce||{},Xe,zn,lr,vr,Qn={},Jr=[],$r=[],ri=typeof window=="undefined"?1:window.devicePixelRatio,ui=!1,xi=function(Cr){Cr&&X.raise(Cr)},Ti=function(){};if(typeof be=="string"?(X(typeof document!="undefined","selector queries only supported in DOM enviroments"),Xe=document.querySelector(be),X(Xe,"invalid query string for element")):typeof be=="object"?en(be)?Xe=be:An(be)?(vr=be,lr=vr.canvas):(X.constructor(be),"gl"in be?vr=be.gl:"canvas"in be?lr=pr(be.canvas):"container"in be&&(zn=pr(be.container)),"attributes"in be&&(Qn=be.attributes,X.type(Qn,"object","invalid context attributes")),"extensions"in be&&(Jr=jn(be.extensions)),"optionalExtensions"in be&&($r=jn(be.optionalExtensions)),"onDone"in be&&(X.type(be.onDone,"function","invalid or missing onDone callback"),xi=be.onDone),"profile"in be&&(ui=!!be.profile),"pixelRatio"in be&&(ri=+be.pixelRatio,X(ri>0,"invalid pixel ratio"))):X.raise("invalid arguments to regl"),Xe&&(Xe.nodeName.toLowerCase()==="canvas"?lr=Xe:zn=Xe),!vr){if(!lr){X(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var pi=wr(zn||document.body,xi,ri);if(!pi)return null;lr=pi.canvas,Ti=pi.onDestroy}Qn.premultipliedAlpha===void 0&&(Qn.premultipliedAlpha=!0),vr=on(lr,Qn)}return vr?{gl:vr,canvas:lr,container:zn,extensions:Jr,optionalExtensions:$r,pixelRatio:ri,profile:ui,onDone:xi,onDestroy:Ti}:(Ti(),xi("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Ce(ce,be){var Xe={};function zn(Qn){X.type(Qn,"string","extension name must be string");var Jr=Qn.toLowerCase(),$r;try{$r=Xe[Jr]=ce.getExtension(Jr)}catch(ri){}return!!$r}for(var lr=0;lr<be.extensions.length;++lr){var vr=be.extensions[lr];if(!zn(vr))return be.onDestroy(),be.onDone('"'+vr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return be.optionalExtensions.forEach(zn),{extensions:Xe,restore:function(){Object.keys(Xe).forEach(function(Jr){if(Xe[Jr]&&!zn(Jr))throw new Error("(regl): error restoring extension "+Jr)})}}}function Me(ce,be){for(var Xe=Array(ce),zn=0;zn<ce;++zn)Xe[zn]=be(zn);return Xe}var Qt=5120,pe=5121,Vt=5122,re=5123,Te=5124,ue=5125,xe=5126;function Ke(ce){for(var be=16;be<=1<<28;be*=16)if(ce<=be)return be;return 0}function Rn(ce){var be,Xe;return be=(ce>65535)<<4,ce>>>=be,Xe=(ce>255)<<3,ce>>>=Xe,be|=Xe,Xe=(ce>15)<<2,ce>>>=Xe,be|=Xe,Xe=(ce>3)<<1,ce>>>=Xe,be|=Xe,be|ce>>1}function tr(){var ce=Me(8,function(){return[]});function be(vr){var Qn=Ke(vr),Jr=ce[Rn(Qn)>>2];return Jr.length>0?Jr.pop():new ArrayBuffer(Qn)}function Xe(vr){ce[Rn(vr.byteLength)>>2].push(vr)}function zn(vr,Qn){var Jr=null;switch(vr){case Qt:Jr=new Int8Array(be(Qn),0,Qn);break;case pe:Jr=new Uint8Array(be(Qn),0,Qn);break;case Vt:Jr=new Int16Array(be(2*Qn),0,Qn);break;case re:Jr=new Uint16Array(be(2*Qn),0,Qn);break;case Te:Jr=new Int32Array(be(4*Qn),0,Qn);break;case ue:Jr=new Uint32Array(be(4*Qn),0,Qn);break;case xe:Jr=new Float32Array(be(4*Qn),0,Qn);break;default:return null}return Jr.length!==Qn?Jr.subarray(0,Qn):Jr}function lr(vr){Xe(vr.buffer)}return{alloc:be,free:Xe,allocType:zn,freeType:lr}}var Pn=tr();Pn.zero=tr();var dn=3408,Ar=3410,or=3411,cn=3412,Pr=3413,Sr=3414,Re=3415,$e=33901,Ve=33902,En=3379,xn=3386,Nn=34921,mn=36347,Dn=36348,$n=35661,Hn=35660,_n=34930,br=36349,yr=34076,Fr=34024,Ei=7936,Ta=7937,Aa=7938,eo=35724,Ho=34047,Do=36063,io=34852,ds=3553,Ko=34067,jo=34069,bs=33984,Ra=6408,Xo=5126,Bo=5121,qs=36160,ao=36053,so=36064,Hs=16384,Ne=function(be,Xe){var zn=1;Xe.ext_texture_filter_anisotropic&&(zn=be.getParameter(Ho));var lr=1,vr=1;Xe.webgl_draw_buffers&&(lr=be.getParameter(io),vr=be.getParameter(Do));var Qn=!!Xe.oes_texture_float;if(Qn){var Jr=be.createTexture();be.bindTexture(ds,Jr),be.texImage2D(ds,0,Ra,1,1,0,Ra,Xo,null);var $r=be.createFramebuffer();if(be.bindFramebuffer(qs,$r),be.framebufferTexture2D(qs,so,ds,Jr,0),be.bindTexture(ds,null),be.checkFramebufferStatus(qs)!==ao)Qn=!1;else{be.viewport(0,0,1,1),be.clearColor(1,0,0,1),be.clear(Hs);var ri=Pn.allocType(Xo,4);be.readPixels(0,0,1,1,Ra,Xo,ri),be.getError()?Qn=!1:(be.deleteFramebuffer($r),be.deleteTexture(Jr),Qn=ri[0]===1),Pn.freeType(ri)}}var ui=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),xi=!0;if(!ui){var Ti=be.createTexture(),pi=Pn.allocType(Bo,36);be.activeTexture(bs),be.bindTexture(Ko,Ti),be.texImage2D(jo,0,Ra,3,3,0,Ra,Bo,pi),Pn.freeType(pi),be.bindTexture(Ko,null),be.deleteTexture(Ti),xi=!be.getError()}return{colorBits:[be.getParameter(Ar),be.getParameter(or),be.getParameter(cn),be.getParameter(Pr)],depthBits:be.getParameter(Sr),stencilBits:be.getParameter(Re),subpixelBits:be.getParameter(dn),extensions:Object.keys(Xe).filter(function(hi){return!!Xe[hi]}),maxAnisotropic:zn,maxDrawbuffers:lr,maxColorAttachments:vr,pointSizeDims:be.getParameter($e),lineWidthDims:be.getParameter(Ve),maxViewportDims:be.getParameter(xn),maxCombinedTextureUnits:be.getParameter($n),maxCubeMapSize:be.getParameter(yr),maxRenderbufferSize:be.getParameter(Fr),maxTextureUnits:be.getParameter(_n),maxTextureSize:be.getParameter(En),maxAttributes:be.getParameter(Nn),maxVertexUniforms:be.getParameter(mn),maxVertexTextureUnits:be.getParameter(Hn),maxVaryingVectors:be.getParameter(Dn),maxFragmentUniforms:be.getParameter(br),glsl:be.getParameter(eo),renderer:be.getParameter(Ta),vendor:be.getParameter(Ei),version:be.getParameter(Aa),readFloat:Qn,npotTextureCube:xi}};function se(ce){return!!ce&&typeof ce=="object"&&Array.isArray(ce.shape)&&Array.isArray(ce.stride)&&typeof ce.offset=="number"&&ce.shape.length===ce.stride.length&&(Array.isArray(ce.data)||V(ce.data))}var Yt=function(be){return Object.keys(be).map(function(Xe){return be[Xe]})},Ee={shape:Si,flatten:Xr};function sn(ce,be,Xe){for(var zn=0;zn<be;++zn)Xe[zn]=ce[zn]}function Fn(ce,be,Xe,zn){for(var lr=0,vr=0;vr<be;++vr)for(var Qn=ce[vr],Jr=0;Jr<Xe;++Jr)zn[lr++]=Qn[Jr]}function rr(ce,be,Xe,zn,lr,vr){for(var Qn=vr,Jr=0;Jr<be;++Jr)for(var $r=ce[Jr],ri=0;ri<Xe;++ri)for(var ui=$r[ri],xi=0;xi<zn;++xi)lr[Qn++]=ui[xi]}function qn(ce,be,Xe,zn,lr){for(var vr=1,Qn=Xe+1;Qn<be.length;++Qn)vr*=be[Qn];var Jr=be[Xe];if(be.length-Xe==4){var $r=be[Xe+1],ri=be[Xe+2],ui=be[Xe+3];for(Qn=0;Qn<Jr;++Qn)rr(ce[Qn],$r,ri,ui,zn,lr),lr+=vr}else for(Qn=0;Qn<Jr;++Qn)qn(ce[Qn],be,Xe+1,zn,lr),lr+=vr}function Xr(ce,be,Xe,zn){var lr=1;if(be.length)for(var vr=0;vr<be.length;++vr)lr*=be[vr];else lr=0;var Qn=zn||Pn.allocType(Xe,lr);switch(be.length){case 0:break;case 1:sn(ce,be[0],Qn);break;case 2:Fn(ce,be[0],be[1],Qn);break;case 3:rr(ce,be[0],be[1],be[2],Qn,0);break;default:qn(ce,be,0,Qn,0)}return Qn}function Si(ce){for(var be=[],Xe=ce;Xe.length;Xe=Xe[0])be.push(Xe.length);return be}var Oi={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Gi=5120,sa=5122,qa=5124,Oa=5121,Eo=5123,Ba=5125,uo=5126,co=5126,Ja={int8:Gi,int16:sa,int32:qa,uint8:Oa,uint16:Eo,uint32:Ba,float:uo,float32:co},Po=35048,ls=35040,ko={dynamic:Po,stream:ls,static:35044},Es=Ee.flatten,Co=Ee.shape,Za=35044,Bs=35040,ss=5121,ja=5126,gn=[];gn[5120]=1,gn[5122]=2,gn[5124]=4,gn[5121]=1,gn[5123]=2,gn[5125]=4,gn[5126]=4;function cr(ce){return Oi[Object.prototype.toString.call(ce)]|0}function Gr(ce,be){for(var Xe=0;Xe<be.length;++Xe)ce[Xe]=be[Xe]}function Ui(ce,be,Xe,zn,lr,vr,Qn){for(var Jr=0,$r=0;$r<Xe;++$r)for(var ri=0;ri<zn;++ri)ce[Jr++]=be[lr*$r+vr*ri+Qn]}function za(ce,be,Xe,zn){var lr=0,vr={};function Qn(Cr){this.id=lr++,this.buffer=ce.createBuffer(),this.type=Cr,this.usage=Za,this.byteLength=0,this.dimension=1,this.dtype=ss,this.persistentData=null,Xe.profile&&(this.stats={size:0})}Qn.prototype.bind=function(){ce.bindBuffer(this.type,this.buffer)},Qn.prototype.destroy=function(){Ti(this)};var Jr=[];function $r(Cr,Lr){var bi=Jr.pop();return bi||(bi=new Qn(Cr)),bi.bind(),xi(bi,Lr,Bs,0,1,!1),bi}function ri(Cr){Jr.push(Cr)}function ui(Cr,Lr,bi){Cr.byteLength=Lr.byteLength,ce.bufferData(Cr.type,Lr,bi)}function xi(Cr,Lr,bi,ki,qr,da){var Li;if(Cr.usage=bi,Array.isArray(Lr)){if(Cr.dtype=ki||ja,Lr.length>0){var mi;if(Array.isArray(Lr[0])){Li=Co(Lr);for(var Pi=1,wi=1;wi<Li.length;++wi)Pi*=Li[wi];Cr.dimension=Pi,mi=Es(Lr,Li,Cr.dtype),ui(Cr,mi,bi),da?Cr.persistentData=mi:Pn.freeType(mi)}else if(typeof Lr[0]=="number"){Cr.dimension=qr;var ca=Pn.allocType(Cr.dtype,Lr.length);Gr(ca,Lr),ui(Cr,ca,bi),da?Cr.persistentData=ca:Pn.freeType(ca)}else V(Lr[0])?(Cr.dimension=Lr[0].length,Cr.dtype=ki||cr(Lr[0])||ja,mi=Es(Lr,[Lr.length,Lr[0].length],Cr.dtype),ui(Cr,mi,bi),da?Cr.persistentData=mi:Pn.freeType(mi)):X.raise("invalid buffer data")}}else if(V(Lr))Cr.dtype=ki||cr(Lr),Cr.dimension=qr,ui(Cr,Lr,bi),da&&(Cr.persistentData=new Uint8Array(new Uint8Array(Lr.buffer)));else if(se(Lr)){Li=Lr.shape;var Pa=Lr.stride,Bi=Lr.offset,Ai=0,yi=0,ia=0,pa=0;Li.length===1?(Ai=Li[0],yi=1,ia=Pa[0],pa=0):Li.length===2?(Ai=Li[0],yi=Li[1],ia=Pa[0],pa=Pa[1]):X.raise("invalid shape"),Cr.dtype=ki||cr(Lr.data)||ja,Cr.dimension=yi;var qi=Pn.allocType(Cr.dtype,Ai*yi);Ui(qi,Lr.data,Ai,yi,ia,pa,Bi),ui(Cr,qi,bi),da?Cr.persistentData=qi:Pn.freeType(qi)}else Lr instanceof ArrayBuffer?(Cr.dtype=ss,Cr.dimension=qr,ui(Cr,Lr,bi),da&&(Cr.persistentData=new Uint8Array(new Uint8Array(Lr)))):X.raise("invalid buffer data")}function Ti(Cr){be.bufferCount--,zn(Cr);var Lr=Cr.buffer;X(Lr,"buffer must not be deleted already"),ce.deleteBuffer(Lr),Cr.buffer=null,delete vr[Cr.id]}function pi(Cr,Lr,bi,ki){be.bufferCount++;var qr=new Qn(Lr);vr[qr.id]=qr;function da(Pi){var wi=Za,ca=null,Pa=0,Bi=0,Ai=1;return Array.isArray(Pi)||V(Pi)||se(Pi)||Pi instanceof ArrayBuffer?ca=Pi:typeof Pi=="number"?Pa=Pi|0:Pi&&(X.type(Pi,"object","buffer arguments must be an object, a number or an array"),"data"in Pi&&(X(ca===null||Array.isArray(ca)||V(ca)||se(ca),"invalid data for buffer"),ca=Pi.data),"usage"in Pi&&(X.parameter(Pi.usage,ko,"invalid buffer usage"),wi=ko[Pi.usage]),"type"in Pi&&(X.parameter(Pi.type,Ja,"invalid buffer type"),Bi=Ja[Pi.type]),"dimension"in Pi&&(X.type(Pi.dimension,"number","invalid dimension"),Ai=Pi.dimension|0),"length"in Pi&&(X.nni(Pa,"buffer length must be a nonnegative integer"),Pa=Pi.length|0)),qr.bind(),ca?xi(qr,ca,wi,Bi,Ai,ki):(Pa&&ce.bufferData(qr.type,Pa,wi),qr.dtype=Bi||ss,qr.usage=wi,qr.dimension=Ai,qr.byteLength=Pa),Xe.profile&&(qr.stats.size=qr.byteLength*gn[qr.dtype]),da}function Li(Pi,wi){X(wi+Pi.byteLength<=qr.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Pi.byteLength+" starting from offset "+wi+" to a buffer of size "+qr.byteLength),ce.bufferSubData(qr.type,wi,Pi)}function mi(Pi,wi){var ca=(wi||0)|0,Pa;if(qr.bind(),V(Pi)||Pi instanceof ArrayBuffer)Li(Pi,ca);else if(Array.isArray(Pi)){if(Pi.length>0)if(typeof Pi[0]=="number"){var Bi=Pn.allocType(qr.dtype,Pi.length);Gr(Bi,Pi),Li(Bi,ca),Pn.freeType(Bi)}else if(Array.isArray(Pi[0])||V(Pi[0])){Pa=Co(Pi);var Ai=Es(Pi,Pa,qr.dtype);Li(Ai,ca),Pn.freeType(Ai)}else X.raise("invalid buffer data")}else if(se(Pi)){Pa=Pi.shape;var yi=Pi.stride,ia=0,pa=0,qi=0,vo=0;Pa.length===1?(ia=Pa[0],pa=1,qi=yi[0],vo=0):Pa.length===2?(ia=Pa[0],pa=Pa[1],qi=yi[0],vo=yi[1]):X.raise("invalid shape");var xo=Array.isArray(Pi.data)?qr.dtype:cr(Pi.data),Ao=Pn.allocType(xo,ia*pa);Ui(Ao,Pi.data,ia,pa,qi,vo,Pi.offset),Li(Ao,ca),Pn.freeType(Ao)}else X.raise("invalid data for buffer subdata");return da}return bi||da(Cr),da._reglType="buffer",da._buffer=qr,da.subdata=mi,Xe.profile&&(da.stats=qr.stats),da.destroy=function(){Ti(qr)},da}function hi(){Yt(vr).forEach(function(Cr){Cr.buffer=ce.createBuffer(),ce.bindBuffer(Cr.type,Cr.buffer),ce.bufferData(Cr.type,Cr.persistentData||Cr.byteLength,Cr.usage)})}return Xe.profile&&(be.getTotalBufferSize=function(){var Cr=0;return Object.keys(vr).forEach(function(Lr){Cr+=vr[Lr].stats.size}),Cr}),{create:pi,createStream:$r,destroyStream:ri,clear:function(){Yt(vr).forEach(Ti),Jr.forEach(Ti)},getBuffer:function(Lr){return Lr&&Lr._buffer instanceof Qn?Lr._buffer:null},restore:hi,_initBuffer:xi}}var go=0,fo=0,ea=1,to=1,Ns=4,Ss=4,Ka={points:go,point:fo,lines:ea,line:to,triangles:Ns,triangle:Ss,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ou=0,Jo=1,Os=4,tu=5120,_s=5121,vs=5122,ts=5123,ws=5124,Ms=5125,Ou=34963,Bu=35040,So=35044;function eu(ce,be,Xe,zn){var lr={},vr=0,Qn={uint8:_s,uint16:ts};be.oes_element_index_uint&&(Qn.uint32=Ms);function Jr(hi){this.id=vr++,lr[this.id]=this,this.buffer=hi,this.primType=Os,this.vertCount=0,this.type=0}Jr.prototype.bind=function(){this.buffer.bind()};var $r=[];function ri(hi){var Cr=$r.pop();return Cr||(Cr=new Jr(Xe.create(null,Ou,!0,!1)._buffer)),xi(Cr,hi,Bu,-1,-1,0,0),Cr}function ui(hi){$r.push(hi)}function xi(hi,Cr,Lr,bi,ki,qr,da){hi.buffer.bind();var Li;if(Cr){var mi=da;!da&&(!V(Cr)||se(Cr)&&!V(Cr.data))&&(mi=be.oes_element_index_uint?Ms:ts),Xe._initBuffer(hi.buffer,Cr,Lr,mi,3)}else ce.bufferData(Ou,qr,Lr),hi.buffer.dtype=Li||_s,hi.buffer.usage=Lr,hi.buffer.dimension=3,hi.buffer.byteLength=qr;if(Li=da,!da){switch(hi.buffer.dtype){case _s:case tu:Li=_s;break;case ts:case vs:Li=ts;break;case Ms:case ws:Li=Ms;break;default:X.raise("unsupported type for element array")}hi.buffer.dtype=Li}hi.type=Li,X(Li!==Ms||!!be.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Pi=ki;Pi<0&&(Pi=hi.buffer.byteLength,Li===ts?Pi>>=1:Li===Ms&&(Pi>>=2)),hi.vertCount=Pi;var wi=bi;if(bi<0){wi=Os;var ca=hi.buffer.dimension;ca===1&&(wi=ou),ca===2&&(wi=Jo),ca===3&&(wi=Os)}hi.primType=wi}function Ti(hi){zn.elementsCount--,X(hi.buffer!==null,"must not double destroy elements"),delete lr[hi.id],hi.buffer.destroy(),hi.buffer=null}function pi(hi,Cr){var Lr=Xe.create(null,Ou,!0),bi=new Jr(Lr._buffer);zn.elementsCount++;function ki(qr){if(!qr)Lr(),bi.primType=Os,bi.vertCount=0,bi.type=_s;else if(typeof qr=="number")Lr(qr),bi.primType=Os,bi.vertCount=qr|0,bi.type=_s;else{var da=null,Li=So,mi=-1,Pi=-1,wi=0,ca=0;Array.isArray(qr)||V(qr)||se(qr)?da=qr:(X.type(qr,"object","invalid arguments for elements"),"data"in qr&&(da=qr.data,X(Array.isArray(da)||V(da)||se(da),"invalid data for element buffer")),"usage"in qr&&(X.parameter(qr.usage,ko,"invalid element buffer usage"),Li=ko[qr.usage]),"primitive"in qr&&(X.parameter(qr.primitive,Ka,"invalid element buffer primitive"),mi=Ka[qr.primitive]),"count"in qr&&(X(typeof qr.count=="number"&&qr.count>=0,"invalid vertex count for elements"),Pi=qr.count|0),"type"in qr&&(X.parameter(qr.type,Qn,"invalid buffer type"),ca=Qn[qr.type]),"length"in qr?wi=qr.length|0:(wi=Pi,ca===ts||ca===vs?wi*=2:(ca===Ms||ca===ws)&&(wi*=4))),xi(bi,da,Li,mi,Pi,wi,ca)}return ki}return ki(hi),ki._reglType="elements",ki._elements=bi,ki.subdata=function(qr,da){return Lr.subdata(qr,da),ki},ki.destroy=function(){Ti(bi)},ki}return{create:pi,createStream:ri,destroyStream:ui,getElements:function(Cr){return typeof Cr=="function"&&Cr._elements instanceof Jr?Cr._elements:null},clear:function(){Yt(lr).forEach(Ti)}}}var Nu=new Float32Array(1),Yu=new Uint32Array(Nu.buffer),al=5123;function Fu(ce){for(var be=Pn.allocType(al,ce.length),Xe=0;Xe<ce.length;++Xe)if(isNaN(ce[Xe]))be[Xe]=65535;else if(ce[Xe]===Infinity)be[Xe]=31744;else if(ce[Xe]===-Infinity)be[Xe]=64512;else{Nu[0]=ce[Xe];var zn=Yu[0],lr=zn>>>31<<15,vr=(zn<<1>>>24)-127,Qn=zn>>13&(1<<10)-1;if(vr<-24)be[Xe]=lr;else if(vr<-14){var Jr=-14-vr;be[Xe]=lr+(Qn+(1<<10)>>Jr)}else vr>15?be[Xe]=lr+31744:be[Xe]=lr+(vr+15<<10)+Qn}return be}function Oo(ce){return Array.isArray(ce)||V(ce)}var Ua=function(be){return!(be&be-1)&&!!be},ba=34467,No=3553,hu=34067,Zu=34069,ps=6408,$o=6406,Is=6407,su=6409,Fo=6410,Ku=32854,Xs=32855,Xa=36194,yl=32819,Hl=32820,xl=33635,yc=34042,Tl=6402,oo=34041,wu=35904,bl=35906,nu=36193,zu=33776,xu=33777,bu=33778,Js=33779,cs=35986,Ps=35987,ol=34798,Al=35840,Fl=35841,Uu=35842,Xu=35843,sl=36196,Eu=5121,uu=5123,Ju=5125,Ls=5126,El=10242,sc=10243,Cl=10497,zl=33071,Yl=33648,dc=10240,$u=10241,Ol=9728,Ul=9729,wo=9984,ho=9985,Sl=9986,ul=9987,Ys=33170,Da=4352,mo=4353,Gs=4354,wl=34046,ll=3317,Qu=37440,xc=37441,Zl=37443,qu=37444,ru=33984,Zs=[wo,Sl,ho,ul],es=[0,su,Fo,Is,ps],iu={};iu[su]=iu[$o]=iu[Tl]=1,iu[oo]=iu[Fo]=2,iu[Is]=iu[wu]=3,iu[ps]=iu[bl]=4;function ku(ce){return"[object "+ce+"]"}var us=ku("HTMLCanvasElement"),Yi=ku("OffscreenCanvas"),Fs=ku("CanvasRenderingContext2D"),tl=ku("ImageBitmap"),Gu=ku("HTMLImageElement"),Go=ku("HTMLVideoElement"),Yo=Object.keys(Oi).concat([us,Yi,Fs,tl,Gu,Go]),Su=[];Su[Eu]=1,Su[Ls]=4,Su[nu]=2,Su[uu]=2,Su[Ju]=4;var Mi=[];Mi[Ku]=2,Mi[Xs]=2,Mi[Xa]=2,Mi[oo]=4,Mi[zu]=.5,Mi[xu]=.5,Mi[bu]=1,Mi[Js]=1,Mi[cs]=.5,Mi[Ps]=1,Mi[ol]=1,Mi[Al]=.5,Mi[Fl]=.25,Mi[Uu]=.5,Mi[Xu]=.25,Mi[sl]=.5;function _u(ce){return Array.isArray(ce)&&(ce.length===0||typeof ce[0]=="number")}function Iu(ce){if(!Array.isArray(ce))return!1;var be=ce.length;return!(be===0||!Oo(ce[0]))}function Lu(ce){return Object.prototype.toString.call(ce)}function $s(ce){return Lu(ce)===us}function we(ce){return Lu(ce)===Yi}function Pe(ce){return Lu(ce)===Fs}function hn(ce){return Lu(ce)===tl}function tn(ce){return Lu(ce)===Gu}function On(ce){return Lu(ce)===Go}function fr(ce){if(!ce)return!1;var be=Lu(ce);return Yo.indexOf(be)>=0?!0:_u(ce)||Iu(ce)||se(ce)}function Ir(ce){return Oi[Object.prototype.toString.call(ce)]|0}function Zr(ce,be){var Xe=be.length;switch(ce.type){case Eu:case uu:case Ju:case Ls:var zn=Pn.allocType(ce.type,Xe);zn.set(be),ce.data=zn;break;case nu:ce.data=Fu(be);break;default:X.raise("unsupported texture type, must specify a typed array")}}function ni(ce,be){return Pn.allocType(ce.type===nu?Ls:ce.type,be)}function zr(ce,be){ce.type===nu?(ce.data=Fu(be),Pn.freeType(be)):ce.data=be}function ci(ce,be,Xe,zn,lr,vr){for(var Qn=ce.width,Jr=ce.height,$r=ce.channels,ri=Qn*Jr*$r,ui=ni(ce,ri),xi=0,Ti=0;Ti<Jr;++Ti)for(var pi=0;pi<Qn;++pi)for(var hi=0;hi<$r;++hi)ui[xi++]=be[Xe*pi+zn*Ti+lr*hi+vr];zr(ce,ui)}function xr(ce,be,Xe,zn,lr,vr){var Qn;if(typeof Mi[ce]!="undefined"?Qn=Mi[ce]:Qn=iu[ce]*Su[be],vr&&(Qn*=6),lr){for(var Jr=0,$r=Xe;$r>=1;)Jr+=Qn*$r*$r,$r/=2;return Jr}else return Qn*Xe*zn}function Kt(ce,be,Xe,zn,lr,vr,Qn){var Jr={"don't care":Da,"dont care":Da,nice:Gs,fast:mo},$r={repeat:Cl,clamp:zl,mirror:Yl},ri={nearest:Ol,linear:Ul},ui=E({mipmap:ul,"nearest mipmap nearest":wo,"linear mipmap nearest":ho,"nearest mipmap linear":Sl,"linear mipmap linear":ul},ri),xi={none:0,browser:qu},Ti={uint8:Eu,rgba4:yl,rgb565:xl,"rgb5 a1":Hl},pi={alpha:$o,luminance:su,"luminance alpha":Fo,rgb:Is,rgba:ps,rgba4:Ku,"rgb5 a1":Xs,rgb565:Xa},hi={};be.ext_srgb&&(pi.srgb=wu,pi.srgba=bl),be.oes_texture_float&&(Ti.float32=Ti.float=Ls),be.oes_texture_half_float&&(Ti.float16=Ti["half float"]=nu),be.webgl_depth_texture&&(E(pi,{depth:Tl,"depth stencil":oo}),E(Ti,{uint16:uu,uint32:Ju,"depth stencil":yc})),be.webgl_compressed_texture_s3tc&&E(hi,{"rgb s3tc dxt1":zu,"rgba s3tc dxt1":xu,"rgba s3tc dxt3":bu,"rgba s3tc dxt5":Js}),be.webgl_compressed_texture_atc&&E(hi,{"rgb atc":cs,"rgba atc explicit alpha":Ps,"rgba atc interpolated alpha":ol}),be.webgl_compressed_texture_pvrtc&&E(hi,{"rgb pvrtc 4bppv1":Al,"rgb pvrtc 2bppv1":Fl,"rgba pvrtc 4bppv1":Uu,"rgba pvrtc 2bppv1":Xu}),be.webgl_compressed_texture_etc1&&(hi["rgb etc1"]=sl);var Cr=Array.prototype.slice.call(ce.getParameter(ba));Object.keys(hi).forEach(function(Ln){var Hr=hi[Ln];Cr.indexOf(Hr)>=0&&(pi[Ln]=Hr)});var Lr=Object.keys(pi);Xe.textureFormats=Lr;var bi=[];Object.keys(pi).forEach(function(Ln){var Hr=pi[Ln];bi[Hr]=Ln});var ki=[];Object.keys(Ti).forEach(function(Ln){var Hr=Ti[Ln];ki[Hr]=Ln});var qr=[];Object.keys(ri).forEach(function(Ln){var Hr=ri[Ln];qr[Hr]=Ln});var da=[];Object.keys(ui).forEach(function(Ln){var Hr=ui[Ln];da[Hr]=Ln});var Li=[];Object.keys($r).forEach(function(Ln){var Hr=$r[Ln];Li[Hr]=Ln});var mi=Lr.reduce(function(Ln,Hr){var Ur=pi[Hr];return Ur===su||Ur===$o||Ur===su||Ur===Fo||Ur===Tl||Ur===oo||be.ext_srgb&&(Ur===wu||Ur===bl)?Ln[Ur]=Ur:Ur===Xs||Hr.indexOf("rgba")>=0?Ln[Ur]=ps:Ln[Ur]=Is,Ln},{});function Pi(){this.internalformat=ps,this.format=ps,this.type=Eu,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=qu,this.width=0,this.height=0,this.channels=0}function wi(Ln,Hr){Ln.internalformat=Hr.internalformat,Ln.format=Hr.format,Ln.type=Hr.type,Ln.compressed=Hr.compressed,Ln.premultiplyAlpha=Hr.premultiplyAlpha,Ln.flipY=Hr.flipY,Ln.unpackAlignment=Hr.unpackAlignment,Ln.colorSpace=Hr.colorSpace,Ln.width=Hr.width,Ln.height=Hr.height,Ln.channels=Hr.channels}function ca(Ln,Hr){if(!(typeof Hr!="object"||!Hr)){if("premultiplyAlpha"in Hr&&(X.type(Hr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Ln.premultiplyAlpha=Hr.premultiplyAlpha),"flipY"in Hr&&(X.type(Hr.flipY,"boolean","invalid texture flip"),Ln.flipY=Hr.flipY),"alignment"in Hr&&(X.oneOf(Hr.alignment,[1,2,4,8],"invalid texture unpack alignment"),Ln.unpackAlignment=Hr.alignment),"colorSpace"in Hr&&(X.parameter(Hr.colorSpace,xi,"invalid colorSpace"),Ln.colorSpace=xi[Hr.colorSpace]),"type"in Hr){var Ur=Hr.type;X(be.oes_texture_float||!(Ur==="float"||Ur==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),X(be.oes_texture_half_float||!(Ur==="half float"||Ur==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),X(be.webgl_depth_texture||!(Ur==="uint16"||Ur==="uint32"||Ur==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),X.parameter(Ur,Ti,"invalid texture type"),Ln.type=Ti[Ur]}var Qi=Ln.width,Lo=Ln.height,Sn=Ln.channels,an=!1;"shape"in Hr?(X(Array.isArray(Hr.shape)&&Hr.shape.length>=2,"shape must be an array"),Qi=Hr.shape[0],Lo=Hr.shape[1],Hr.shape.length===3&&(Sn=Hr.shape[2],X(Sn>0&&Sn<=4,"invalid number of channels"),an=!0),X(Qi>=0&&Qi<=Xe.maxTextureSize,"invalid width"),X(Lo>=0&&Lo<=Xe.maxTextureSize,"invalid height")):("radius"in Hr&&(Qi=Lo=Hr.radius,X(Qi>=0&&Qi<=Xe.maxTextureSize,"invalid radius")),"width"in Hr&&(Qi=Hr.width,X(Qi>=0&&Qi<=Xe.maxTextureSize,"invalid width")),"height"in Hr&&(Lo=Hr.height,X(Lo>=0&&Lo<=Xe.maxTextureSize,"invalid height")),"channels"in Hr&&(Sn=Hr.channels,X(Sn>0&&Sn<=4,"invalid number of channels"),an=!0)),Ln.width=Qi|0,Ln.height=Lo|0,Ln.channels=Sn|0;var nr=!1;if("format"in Hr){var Or=Hr.format;X(be.webgl_depth_texture||!(Or==="depth"||Or==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),X.parameter(Or,pi,"invalid texture format");var Rr=Ln.internalformat=pi[Or];Ln.format=mi[Rr],Or in Ti&&("type"in Hr||(Ln.type=Ti[Or])),Or in hi&&(Ln.compressed=!0),nr=!0}!an&&nr?Ln.channels=iu[Ln.format]:an&&!nr?Ln.channels!==es[Ln.format]&&(Ln.format=Ln.internalformat=es[Ln.channels]):nr&&an&&X(Ln.channels===iu[Ln.format],"number of channels inconsistent with specified format")}}function Pa(Ln){ce.pixelStorei(Qu,Ln.flipY),ce.pixelStorei(xc,Ln.premultiplyAlpha),ce.pixelStorei(Zl,Ln.colorSpace),ce.pixelStorei(ll,Ln.unpackAlignment)}function Bi(){Pi.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ai(Ln,Hr){var Ur=null;if(fr(Hr)?Ur=Hr:Hr&&(X.type(Hr,"object","invalid pixel data type"),ca(Ln,Hr),"x"in Hr&&(Ln.xOffset=Hr.x|0),"y"in Hr&&(Ln.yOffset=Hr.y|0),fr(Hr.data)&&(Ur=Hr.data)),X(!Ln.compressed||Ur instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Hr.copy){X(!Ur,"can not specify copy and data field for the same texture");var Qi=lr.viewportWidth,Lo=lr.viewportHeight;Ln.width=Ln.width||Qi-Ln.xOffset,Ln.height=Ln.height||Lo-Ln.yOffset,Ln.needsCopy=!0,X(Ln.xOffset>=0&&Ln.xOffset<Qi&&Ln.yOffset>=0&&Ln.yOffset<Lo&&Ln.width>0&&Ln.width<=Qi&&Ln.height>0&&Ln.height<=Lo,"copy texture read out of bounds")}else if(!Ur)Ln.width=Ln.width||1,Ln.height=Ln.height||1,Ln.channels=Ln.channels||4;else if(V(Ur))Ln.channels=Ln.channels||4,Ln.data=Ur,!("type"in Hr)&&Ln.type===Eu&&(Ln.type=Ir(Ur));else if(_u(Ur))Ln.channels=Ln.channels||4,Zr(Ln,Ur),Ln.alignment=1,Ln.needsFree=!0;else if(se(Ur)){var Sn=Ur.data;!Array.isArray(Sn)&&Ln.type===Eu&&(Ln.type=Ir(Sn));var an=Ur.shape,nr=Ur.stride,Or,Rr,sr,ar,Er,Mn;an.length===3?(sr=an[2],Mn=nr[2]):(X(an.length===2,"invalid ndarray pixel data, must be 2 or 3D"),sr=1,Mn=1),Or=an[0],Rr=an[1],ar=nr[0],Er=nr[1],Ln.alignment=1,Ln.width=Or,Ln.height=Rr,Ln.channels=sr,Ln.format=Ln.internalformat=es[sr],Ln.needsFree=!0,ci(Ln,Sn,ar,Er,Mn,Ur.offset)}else if($s(Ur)||we(Ur)||Pe(Ur))$s(Ur)||we(Ur)?Ln.element=Ur:Ln.element=Ur.canvas,Ln.width=Ln.element.width,Ln.height=Ln.element.height,Ln.channels=4;else if(hn(Ur))Ln.element=Ur,Ln.width=Ur.width,Ln.height=Ur.height,Ln.channels=4;else if(tn(Ur))Ln.element=Ur,Ln.width=Ur.naturalWidth,Ln.height=Ur.naturalHeight,Ln.channels=4;else if(On(Ur))Ln.element=Ur,Ln.width=Ur.videoWidth,Ln.height=Ur.videoHeight,Ln.channels=4;else if(Iu(Ur)){var Jn=Ln.width||Ur[0].length,bn=Ln.height||Ur.length,Tr=Ln.channels;Oo(Ur[0][0])?Tr=Tr||Ur[0][0].length:Tr=Tr||1;for(var Dr=Ee.shape(Ur),li=1,Wr=0;Wr<Dr.length;++Wr)li*=Dr[Wr];var ii=ni(Ln,li);Ee.flatten(Ur,Dr,"",ii),zr(Ln,ii),Ln.alignment=1,Ln.width=Jn,Ln.height=bn,Ln.channels=Tr,Ln.format=Ln.internalformat=es[Tr],Ln.needsFree=!0}Ln.type===Ls?X(Xe.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Ln.type===nu&&X(Xe.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function yi(Ln,Hr,Ur){var Qi=Ln.element,Lo=Ln.data,Sn=Ln.internalformat,an=Ln.format,nr=Ln.type,Or=Ln.width,Rr=Ln.height;Pa(Ln),Qi?ce.texImage2D(Hr,Ur,an,an,nr,Qi):Ln.compressed?ce.compressedTexImage2D(Hr,Ur,Sn,Or,Rr,0,Lo):Ln.needsCopy?(zn(),ce.copyTexImage2D(Hr,Ur,an,Ln.xOffset,Ln.yOffset,Or,Rr,0)):ce.texImage2D(Hr,Ur,an,Or,Rr,0,an,nr,Lo||null)}function ia(Ln,Hr,Ur,Qi,Lo){var Sn=Ln.element,an=Ln.data,nr=Ln.internalformat,Or=Ln.format,Rr=Ln.type,sr=Ln.width,ar=Ln.height;Pa(Ln),Sn?ce.texSubImage2D(Hr,Lo,Ur,Qi,Or,Rr,Sn):Ln.compressed?ce.compressedTexSubImage2D(Hr,Lo,Ur,Qi,nr,sr,ar,an):Ln.needsCopy?(zn(),ce.copyTexSubImage2D(Hr,Lo,Ur,Qi,Ln.xOffset,Ln.yOffset,sr,ar)):ce.texSubImage2D(Hr,Lo,Ur,Qi,sr,ar,Or,Rr,an)}var pa=[];function qi(){return pa.pop()||new Bi}function vo(Ln){Ln.needsFree&&Pn.freeType(Ln.data),Bi.call(Ln),pa.push(Ln)}function xo(){Pi.call(this),this.genMipmaps=!1,this.mipmapHint=Da,this.mipmask=0,this.images=Array(16)}function Ao(Ln,Hr,Ur){var Qi=Ln.images[0]=qi();Ln.mipmask=1,Qi.width=Ln.width=Hr,Qi.height=Ln.height=Ur,Qi.channels=Ln.channels=4}function Zo(Ln,Hr){var Ur=null;if(fr(Hr))Ur=Ln.images[0]=qi(),wi(Ur,Ln),Ai(Ur,Hr),Ln.mipmask=1;else if(ca(Ln,Hr),Array.isArray(Hr.mipmap))for(var Qi=Hr.mipmap,Lo=0;Lo<Qi.length;++Lo)Ur=Ln.images[Lo]=qi(),wi(Ur,Ln),Ur.width>>=Lo,Ur.height>>=Lo,Ai(Ur,Qi[Lo]),Ln.mipmask|=1<<Lo;else Ur=Ln.images[0]=qi(),wi(Ur,Ln),Ai(Ur,Hr),Ln.mipmask=1;wi(Ln,Ln.images[0]),Ln.compressed&&(Ln.internalformat===zu||Ln.internalformat===xu||Ln.internalformat===bu||Ln.internalformat===Js)&&X(Ln.width%4==0&&Ln.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Vl(Ln,Hr){for(var Ur=Ln.images,Qi=0;Qi<Ur.length;++Qi){if(!Ur[Qi])return;yi(Ur[Qi],Hr,Qi)}}var Xl=[];function Wo(){var Ln=Xl.pop()||new xo;Pi.call(Ln),Ln.mipmask=0;for(var Hr=0;Hr<16;++Hr)Ln.images[Hr]=null;return Ln}function Au(Ln){for(var Hr=Ln.images,Ur=0;Ur<Hr.length;++Ur)Hr[Ur]&&vo(Hr[Ur]),Hr[Ur]=null;Xl.push(Ln)}function Cu(){this.minFilter=Ol,this.magFilter=Ol,this.wrapS=zl,this.wrapT=zl,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Da}function Rl(Ln,Hr){if("min"in Hr){var Ur=Hr.min;X.parameter(Ur,ui),Ln.minFilter=ui[Ur],Zs.indexOf(Ln.minFilter)>=0&&!("faces"in Hr)&&(Ln.genMipmaps=!0)}if("mag"in Hr){var Qi=Hr.mag;X.parameter(Qi,ri),Ln.magFilter=ri[Qi]}var Lo=Ln.wrapS,Sn=Ln.wrapT;if("wrap"in Hr){var an=Hr.wrap;typeof an=="string"?(X.parameter(an,$r),Lo=Sn=$r[an]):Array.isArray(an)&&(X.parameter(an[0],$r),X.parameter(an[1],$r),Lo=$r[an[0]],Sn=$r[an[1]])}else{if("wrapS"in Hr){var nr=Hr.wrapS;X.parameter(nr,$r),Lo=$r[nr]}if("wrapT"in Hr){var Or=Hr.wrapT;X.parameter(Or,$r),Sn=$r[Or]}}if(Ln.wrapS=Lo,Ln.wrapT=Sn,"anisotropic"in Hr){var Rr=Hr.anisotropic;X(typeof Rr=="number"&&Rr>=1&&Rr<=Xe.maxAnisotropic,"aniso samples must be between 1 and "),Ln.anisotropic=Hr.anisotropic}if("mipmap"in Hr){var sr=!1;switch(typeof Hr.mipmap){case"string":X.parameter(Hr.mipmap,Jr,"invalid mipmap hint"),Ln.mipmapHint=Jr[Hr.mipmap],Ln.genMipmaps=!0,sr=!0;break;case"boolean":sr=Ln.genMipmaps=Hr.mipmap;break;case"object":X(Array.isArray(Hr.mipmap),"invalid mipmap type"),Ln.genMipmaps=!1,sr=!0;break;default:X.raise("invalid mipmap type")}sr&&!("min"in Hr)&&(Ln.minFilter=wo)}}function Cs(Ln,Hr){ce.texParameteri(Hr,$u,Ln.minFilter),ce.texParameteri(Hr,dc,Ln.magFilter),ce.texParameteri(Hr,El,Ln.wrapS),ce.texParameteri(Hr,sc,Ln.wrapT),be.ext_texture_filter_anisotropic&&ce.texParameteri(Hr,wl,Ln.anisotropic),Ln.genMipmaps&&(ce.hint(Ys,Ln.mipmapHint),ce.generateMipmap(Hr))}var nc=0,cc={},Io=Xe.maxTextureUnits,Dl=Array(Io).map(function(){return null});function lo(Ln){Pi.call(this),this.mipmask=0,this.internalformat=ps,this.id=nc++,this.refCount=1,this.target=Ln,this.texture=ce.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Cu,Qn.profile&&(this.stats={size:0})}function Jl(Ln){ce.activeTexture(ru),ce.bindTexture(Ln.target,Ln.texture)}function Vs(){var Ln=Dl[0];Ln?ce.bindTexture(Ln.target,Ln.texture):ce.bindTexture(No,null)}function Wa(Ln){var Hr=Ln.texture;X(Hr,"must not double destroy texture");var Ur=Ln.unit,Qi=Ln.target;Ur>=0&&(ce.activeTexture(ru+Ur),ce.bindTexture(Qi,null),Dl[Ur]=null),ce.deleteTexture(Hr),Ln.texture=null,Ln.params=null,Ln.pixels=null,Ln.refCount=0,delete cc[Ln.id],vr.textureCount--}E(lo.prototype,{bind:function(){var Hr=this;Hr.bindCount+=1;var Ur=Hr.unit;if(Ur<0){for(var Qi=0;Qi<Io;++Qi){var Lo=Dl[Qi];if(Lo){if(Lo.bindCount>0)continue;Lo.unit=-1}Dl[Qi]=Hr,Ur=Qi;break}Ur>=Io&&X.raise("insufficient number of texture units"),Qn.profile&&vr.maxTextureUnits<Ur+1&&(vr.maxTextureUnits=Ur+1),Hr.unit=Ur,ce.activeTexture(ru+Ur),ce.bindTexture(Hr.target,Hr.texture)}return Ur},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Wa(this)}});function _o(Ln,Hr){var Ur=new lo(No);cc[Ur.id]=Ur,vr.textureCount++;function Qi(an,nr){var Or=Ur.texInfo;Cu.call(Or);var Rr=Wo();return typeof an=="number"?typeof nr=="number"?Ao(Rr,an|0,nr|0):Ao(Rr,an|0,an|0):an?(X.type(an,"object","invalid arguments to regl.texture"),Rl(Or,an),Zo(Rr,an)):Ao(Rr,1,1),Or.genMipmaps&&(Rr.mipmask=(Rr.width<<1)-1),Ur.mipmask=Rr.mipmask,wi(Ur,Rr),X.texture2D(Or,Rr,Xe),Ur.internalformat=Rr.internalformat,Qi.width=Rr.width,Qi.height=Rr.height,Jl(Ur),Vl(Rr,No),Cs(Or,No),Vs(),Au(Rr),Qn.profile&&(Ur.stats.size=xr(Ur.internalformat,Ur.type,Rr.width,Rr.height,Or.genMipmaps,!1)),Qi.format=bi[Ur.internalformat],Qi.type=ki[Ur.type],Qi.mag=qr[Or.magFilter],Qi.min=da[Or.minFilter],Qi.wrapS=Li[Or.wrapS],Qi.wrapT=Li[Or.wrapT],Qi}function Lo(an,nr,Or,Rr){X(!!an,"must specify image data");var sr=nr|0,ar=Or|0,Er=Rr|0,Mn=qi();return wi(Mn,Ur),Mn.width=0,Mn.height=0,Ai(Mn,an),Mn.width=Mn.width||(Ur.width>>Er)-sr,Mn.height=Mn.height||(Ur.height>>Er)-ar,X(Ur.type===Mn.type&&Ur.format===Mn.format&&Ur.internalformat===Mn.internalformat,"incompatible format for texture.subimage"),X(sr>=0&&ar>=0&&sr+Mn.width<=Ur.width&&ar+Mn.height<=Ur.height,"texture.subimage write out of bounds"),X(Ur.mipmask&1<<Er,"missing mipmap data"),X(Mn.data||Mn.element||Mn.needsCopy,"missing image data"),Jl(Ur),ia(Mn,No,sr,ar,Er),Vs(),vo(Mn),Qi}function Sn(an,nr){var Or=an|0,Rr=nr|0||Or;if(Or===Ur.width&&Rr===Ur.height)return Qi;Qi.width=Ur.width=Or,Qi.height=Ur.height=Rr,Jl(Ur);for(var sr=0;Ur.mipmask>>sr;++sr){var ar=Or>>sr,Er=Rr>>sr;if(!ar||!Er)break;ce.texImage2D(No,sr,Ur.format,ar,Er,0,Ur.format,Ur.type,null)}return Vs(),Qn.profile&&(Ur.stats.size=xr(Ur.internalformat,Ur.type,Or,Rr,!1,!1)),Qi}return Qi(Ln,Hr),Qi.subimage=Lo,Qi.resize=Sn,Qi._reglType="texture2d",Qi._texture=Ur,Qn.profile&&(Qi.stats=Ur.stats),Qi.destroy=function(){Ur.decRef()},Qi}function ns(Ln,Hr,Ur,Qi,Lo,Sn){var an=new lo(hu);cc[an.id]=an,vr.cubeCount++;var nr=new Array(6);function Or(ar,Er,Mn,Jn,bn,Tr){var Dr,li=an.texInfo;for(Cu.call(li),Dr=0;Dr<6;++Dr)nr[Dr]=Wo();if(typeof ar=="number"||!ar){var Wr=ar|0||1;for(Dr=0;Dr<6;++Dr)Ao(nr[Dr],Wr,Wr)}else if(typeof ar=="object")if(Er)Zo(nr[0],ar),Zo(nr[1],Er),Zo(nr[2],Mn),Zo(nr[3],Jn),Zo(nr[4],bn),Zo(nr[5],Tr);else if(Rl(li,ar),ca(an,ar),"faces"in ar){var ii=ar.faces;for(X(Array.isArray(ii)&&ii.length===6,"cube faces must be a length 6 array"),Dr=0;Dr<6;++Dr)X(typeof ii[Dr]=="object"&&!!ii[Dr],"invalid input for cube map face"),wi(nr[Dr],an),Zo(nr[Dr],ii[Dr])}else for(Dr=0;Dr<6;++Dr)Zo(nr[Dr],ar);else X.raise("invalid arguments to cube map");for(wi(an,nr[0]),Xe.npotTextureCube||X(Ua(an.width)&&Ua(an.height),"your browser does not support non power or two texture dimensions"),li.genMipmaps?an.mipmask=(nr[0].width<<1)-1:an.mipmask=nr[0].mipmask,X.textureCube(an,li,nr,Xe),an.internalformat=nr[0].internalformat,Or.width=nr[0].width,Or.height=nr[0].height,Jl(an),Dr=0;Dr<6;++Dr)Vl(nr[Dr],Zu+Dr);for(Cs(li,hu),Vs(),Qn.profile&&(an.stats.size=xr(an.internalformat,an.type,Or.width,Or.height,li.genMipmaps,!0)),Or.format=bi[an.internalformat],Or.type=ki[an.type],Or.mag=qr[li.magFilter],Or.min=da[li.minFilter],Or.wrapS=Li[li.wrapS],Or.wrapT=Li[li.wrapT],Dr=0;Dr<6;++Dr)Au(nr[Dr]);return Or}function Rr(ar,Er,Mn,Jn,bn){X(!!Er,"must specify image data"),X(typeof ar=="number"&&ar===(ar|0)&&ar>=0&&ar<6,"invalid face");var Tr=Mn|0,Dr=Jn|0,li=bn|0,Wr=qi();return wi(Wr,an),Wr.width=0,Wr.height=0,Ai(Wr,Er),Wr.width=Wr.width||(an.width>>li)-Tr,Wr.height=Wr.height||(an.height>>li)-Dr,X(an.type===Wr.type&&an.format===Wr.format&&an.internalformat===Wr.internalformat,"incompatible format for texture.subimage"),X(Tr>=0&&Dr>=0&&Tr+Wr.width<=an.width&&Dr+Wr.height<=an.height,"texture.subimage write out of bounds"),X(an.mipmask&1<<li,"missing mipmap data"),X(Wr.data||Wr.element||Wr.needsCopy,"missing image data"),Jl(an),ia(Wr,Zu+ar,Tr,Dr,li),Vs(),vo(Wr),Or}function sr(ar){var Er=ar|0;if(Er!==an.width){Or.width=an.width=Er,Or.height=an.height=Er,Jl(an);for(var Mn=0;Mn<6;++Mn)for(var Jn=0;an.mipmask>>Jn;++Jn)ce.texImage2D(Zu+Mn,Jn,an.format,Er>>Jn,Er>>Jn,0,an.format,an.type,null);return Vs(),Qn.profile&&(an.stats.size=xr(an.internalformat,an.type,Or.width,Or.height,!1,!0)),Or}}return Or(Ln,Hr,Ur,Qi,Lo,Sn),Or.subimage=Rr,Or.resize=sr,Or._reglType="textureCube",Or._texture=an,Qn.profile&&(Or.stats=an.stats),Or.destroy=function(){an.decRef()},Or}function fc(){for(var Ln=0;Ln<Io;++Ln)ce.activeTexture(ru+Ln),ce.bindTexture(No,null),Dl[Ln]=null;Yt(cc).forEach(Wa),vr.cubeCount=0,vr.textureCount=0}Qn.profile&&(vr.getTotalTextureSize=function(){var Ln=0;return Object.keys(cc).forEach(function(Hr){Ln+=cc[Hr].stats.size}),Ln});function gc(){for(var Ln=0;Ln<Io;++Ln){var Hr=Dl[Ln];Hr&&(Hr.bindCount=0,Hr.unit=-1,Dl[Ln]=null)}Yt(cc).forEach(function(Ur){Ur.texture=ce.createTexture(),ce.bindTexture(Ur.target,Ur.texture);for(var Qi=0;Qi<32;++Qi)if((Ur.mipmask&1<<Qi)!=0)if(Ur.target===No)ce.texImage2D(No,Qi,Ur.internalformat,Ur.width>>Qi,Ur.height>>Qi,0,Ur.internalformat,Ur.type,null);else for(var Lo=0;Lo<6;++Lo)ce.texImage2D(Zu+Lo,Qi,Ur.internalformat,Ur.width>>Qi,Ur.height>>Qi,0,Ur.internalformat,Ur.type,null);Cs(Ur.texInfo,Ur.target)})}function lf(){for(var Ln=0;Ln<Io;++Ln){var Hr=Dl[Ln];Hr&&(Hr.bindCount=0,Hr.unit=-1,Dl[Ln]=null),ce.activeTexture(ru+Ln),ce.bindTexture(No,null),ce.bindTexture(hu,null)}}return{create2D:_o,createCube:ns,clear:fc,getTexture:function(Hr){return null},restore:gc,refresh:lf}}var te=36161,Ie=32854,_e=32855,Dt=36194,zt=33189,oe=36168,ne=34041,fe=35907,Fe=34836,Ze=34842,nn=34843,Je=[];Je[Ie]=2,Je[_e]=2,Je[Dt]=2,Je[zt]=2,Je[oe]=1,Je[ne]=4,Je[fe]=4,Je[Fe]=16,Je[Ze]=8,Je[nn]=6;function vn(ce,be,Xe){return Je[ce]*be*Xe}var fn=function(be,Xe,zn,lr,vr){var Qn={rgba4:Ie,rgb565:Dt,"rgb5 a1":_e,depth:zt,stencil:oe,"depth stencil":ne};Xe.ext_srgb&&(Qn.srgba=fe),Xe.ext_color_buffer_half_float&&(Qn.rgba16f=Ze,Qn.rgb16f=nn),Xe.webgl_color_buffer_float&&(Qn.rgba32f=Fe);var Jr=[];Object.keys(Qn).forEach(function(hi){var Cr=Qn[hi];Jr[Cr]=hi});var $r=0,ri={};function ui(hi){this.id=$r++,this.refCount=1,this.renderbuffer=hi,this.format=Ie,this.width=0,this.height=0,vr.profile&&(this.stats={size:0})}ui.prototype.decRef=function(){--this.refCount<=0&&xi(this)};function xi(hi){var Cr=hi.renderbuffer;X(Cr,"must not double destroy renderbuffer"),be.bindRenderbuffer(te,null),be.deleteRenderbuffer(Cr),hi.renderbuffer=null,hi.refCount=0,delete ri[hi.id],lr.renderbufferCount--}function Ti(hi,Cr){var Lr=new ui(be.createRenderbuffer());ri[Lr.id]=Lr,lr.renderbufferCount++;function bi(qr,da){var Li=0,mi=0,Pi=Ie;if(typeof qr=="object"&&qr){var wi=qr;if("shape"in wi){var ca=wi.shape;X(Array.isArray(ca)&&ca.length>=2,"invalid renderbuffer shape"),Li=ca[0]|0,mi=ca[1]|0}else"radius"in wi&&(Li=mi=wi.radius|0),"width"in wi&&(Li=wi.width|0),"height"in wi&&(mi=wi.height|0);"format"in wi&&(X.parameter(wi.format,Qn,"invalid renderbuffer format"),Pi=Qn[wi.format])}else typeof qr=="number"?(Li=qr|0,typeof da=="number"?mi=da|0:mi=Li):qr?X.raise("invalid arguments to renderbuffer constructor"):Li=mi=1;if(X(Li>0&&mi>0&&Li<=zn.maxRenderbufferSize&&mi<=zn.maxRenderbufferSize,"invalid renderbuffer size"),!(Li===Lr.width&&mi===Lr.height&&Pi===Lr.format))return bi.width=Lr.width=Li,bi.height=Lr.height=mi,Lr.format=Pi,be.bindRenderbuffer(te,Lr.renderbuffer),be.renderbufferStorage(te,Pi,Li,mi),X(be.getError()===0,"invalid render buffer format"),vr.profile&&(Lr.stats.size=vn(Lr.format,Lr.width,Lr.height)),bi.format=Jr[Lr.format],bi}function ki(qr,da){var Li=qr|0,mi=da|0||Li;return Li===Lr.width&&mi===Lr.height||(X(Li>0&&mi>0&&Li<=zn.maxRenderbufferSize&&mi<=zn.maxRenderbufferSize,"invalid renderbuffer size"),bi.width=Lr.width=Li,bi.height=Lr.height=mi,be.bindRenderbuffer(te,Lr.renderbuffer),be.renderbufferStorage(te,Lr.format,Li,mi),X(be.getError()===0,"invalid render buffer format"),vr.profile&&(Lr.stats.size=vn(Lr.format,Lr.width,Lr.height))),bi}return bi(hi,Cr),bi.resize=ki,bi._reglType="renderbuffer",bi._renderbuffer=Lr,vr.profile&&(bi.stats=Lr.stats),bi.destroy=function(){Lr.decRef()},bi}vr.profile&&(lr.getTotalRenderbufferSize=function(){var hi=0;return Object.keys(ri).forEach(function(Cr){hi+=ri[Cr].stats.size}),hi});function pi(){Yt(ri).forEach(function(hi){hi.renderbuffer=be.createRenderbuffer(),be.bindRenderbuffer(te,hi.renderbuffer),be.renderbufferStorage(te,hi.format,hi.width,hi.height)}),be.bindRenderbuffer(te,null)}return{create:Ti,clear:function(){Yt(ri).forEach(xi)},restore:pi}},Yn=36160,kn=36161,Vn=3553,Gn=34069,hr=36064,mr=36096,Yr=36128,gi=33306,Br=36053,ai=36054,fi=36055,Zi=36057,Ri=36061,Sa=36193,ya=5121,_a=5126,ei=6407,Ea=6408,ka=6402,Ga=[ei,Ea],Ii=[];Ii[Ea]=4,Ii[ei]=3;var Ia=[];Ia[ya]=1,Ia[_a]=4,Ia[Sa]=2;var yo=32854,zs=32855,Ts=36194,el=33189,Mu=36168,j=34041,I=35907,w=34836,B=34842,D=34843,W=[yo,zs,Ts,I,B,D,w],q={};q[Br]="complete",q[ai]="incomplete attachment",q[Zi]="incomplete dimensions",q[fi]="incomplete, missing attachment",q[Ri]="unsupported";function st(ce,be,Xe,zn,lr,vr){var Qn={cur:null,next:null,dirty:!1,setFBO:null},Jr=["rgba"],$r=["rgba4","rgb565","rgb5 a1"];be.ext_srgb&&$r.push("srgba"),be.ext_color_buffer_half_float&&$r.push("rgba16f","rgb16f"),be.webgl_color_buffer_float&&$r.push("rgba32f");var ri=["uint8"];be.oes_texture_half_float&&ri.push("half float","float16"),be.oes_texture_float&&ri.push("float","float32");function ui(Bi,Ai,yi){this.target=Bi,this.texture=Ai,this.renderbuffer=yi;var ia=0,pa=0;Ai?(ia=Ai.width,pa=Ai.height):yi&&(ia=yi.width,pa=yi.height),this.width=ia,this.height=pa}function xi(Bi){Bi&&(Bi.texture&&Bi.texture._texture.decRef(),Bi.renderbuffer&&Bi.renderbuffer._renderbuffer.decRef())}function Ti(Bi,Ai,yi){if(!!Bi)if(Bi.texture){var ia=Bi.texture._texture,pa=Math.max(1,ia.width),qi=Math.max(1,ia.height);X(pa===Ai&&qi===yi,"inconsistent width/height for supplied texture"),ia.refCount+=1}else{var vo=Bi.renderbuffer._renderbuffer;X(vo.width===Ai&&vo.height===yi,"inconsistent width/height for renderbuffer"),vo.refCount+=1}}function pi(Bi,Ai){Ai&&(Ai.texture?ce.framebufferTexture2D(Yn,Bi,Ai.target,Ai.texture._texture.texture,0):ce.framebufferRenderbuffer(Yn,Bi,kn,Ai.renderbuffer._renderbuffer.renderbuffer))}function hi(Bi){var Ai=Vn,yi=null,ia=null,pa=Bi;typeof Bi=="object"&&(pa=Bi.data,"target"in Bi&&(Ai=Bi.target|0)),X.type(pa,"function","invalid attachment data");var qi=pa._reglType;return qi==="texture2d"?(yi=pa,X(Ai===Vn)):qi==="textureCube"?(yi=pa,X(Ai>=Gn&&Ai<Gn+6,"invalid cube map target")):qi==="renderbuffer"?(ia=pa,Ai=kn):X.raise("invalid regl object for attachment"),new ui(Ai,yi,ia)}function Cr(Bi,Ai,yi,ia,pa){if(yi){var qi=zn.create2D({width:Bi,height:Ai,format:ia,type:pa});return qi._texture.refCount=0,new ui(Vn,qi,null)}else{var vo=lr.create({width:Bi,height:Ai,format:ia});return vo._renderbuffer.refCount=0,new ui(kn,null,vo)}}function Lr(Bi){return Bi&&(Bi.texture||Bi.renderbuffer)}function bi(Bi,Ai,yi){Bi&&(Bi.texture?Bi.texture.resize(Ai,yi):Bi.renderbuffer&&Bi.renderbuffer.resize(Ai,yi),Bi.width=Ai,Bi.height=yi)}var ki=0,qr={};function da(){this.id=ki++,qr[this.id]=this,this.framebuffer=ce.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Li(Bi){Bi.colorAttachments.forEach(xi),xi(Bi.depthAttachment),xi(Bi.stencilAttachment),xi(Bi.depthStencilAttachment)}function mi(Bi){var Ai=Bi.framebuffer;X(Ai,"must not double destroy framebuffer"),ce.deleteFramebuffer(Ai),Bi.framebuffer=null,vr.framebufferCount--,delete qr[Bi.id]}function Pi(Bi){var Ai;ce.bindFramebuffer(Yn,Bi.framebuffer);var yi=Bi.colorAttachments;for(Ai=0;Ai<yi.length;++Ai)pi(hr+Ai,yi[Ai]);for(Ai=yi.length;Ai<Xe.maxColorAttachments;++Ai)ce.framebufferTexture2D(Yn,hr+Ai,Vn,null,0);ce.framebufferTexture2D(Yn,gi,Vn,null,0),ce.framebufferTexture2D(Yn,mr,Vn,null,0),ce.framebufferTexture2D(Yn,Yr,Vn,null,0),pi(mr,Bi.depthAttachment),pi(Yr,Bi.stencilAttachment),pi(gi,Bi.depthStencilAttachment);var ia=ce.checkFramebufferStatus(Yn);!ce.isContextLost()&&ia!==Br&&X.raise("framebuffer configuration not supported, status = "+q[ia]),ce.bindFramebuffer(Yn,Qn.next?Qn.next.framebuffer:null),Qn.cur=Qn.next,ce.getError()}function wi(Bi,Ai){var yi=new da;vr.framebufferCount++;function ia(qi,vo){var xo;X(Qn.next!==yi,"can not update framebuffer which is currently in use");var Ao=0,Zo=0,Vl=!0,Xl=!0,Wo=null,Au=!0,Cu="rgba",Rl="uint8",Cs=1,nc=null,cc=null,Io=null,Dl=!1;if(typeof qi=="number")Ao=qi|0,Zo=vo|0||Ao;else if(!qi)Ao=Zo=1;else{X.type(qi,"object","invalid arguments for framebuffer");var lo=qi;if("shape"in lo){var Jl=lo.shape;X(Array.isArray(Jl)&&Jl.length>=2,"invalid shape for framebuffer"),Ao=Jl[0],Zo=Jl[1]}else"radius"in lo&&(Ao=Zo=lo.radius),"width"in lo&&(Ao=lo.width),"height"in lo&&(Zo=lo.height);("color"in lo||"colors"in lo)&&(Wo=lo.color||lo.colors,Array.isArray(Wo)&&X(Wo.length===1||be.webgl_draw_buffers,"multiple render targets not supported")),Wo||("colorCount"in lo&&(Cs=lo.colorCount|0,X(Cs>0,"invalid color buffer count")),"colorTexture"in lo&&(Au=!!lo.colorTexture,Cu="rgba4"),"colorType"in lo&&(Rl=lo.colorType,Au?(X(be.oes_texture_float||!(Rl==="float"||Rl==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),X(be.oes_texture_half_float||!(Rl==="half float"||Rl==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Rl==="half float"||Rl==="float16"?(X(be.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Cu="rgba16f"):(Rl==="float"||Rl==="float32")&&(X(be.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Cu="rgba32f"),X.oneOf(Rl,ri,"invalid color type")),"colorFormat"in lo&&(Cu=lo.colorFormat,Jr.indexOf(Cu)>=0?Au=!0:$r.indexOf(Cu)>=0?Au=!1:Au?X.oneOf(lo.colorFormat,Jr,"invalid color format for texture"):X.oneOf(lo.colorFormat,$r,"invalid color format for renderbuffer"))),("depthTexture"in lo||"depthStencilTexture"in lo)&&(Dl=!!(lo.depthTexture||lo.depthStencilTexture),X(!Dl||be.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in lo&&(typeof lo.depth=="boolean"?Vl=lo.depth:(nc=lo.depth,Xl=!1)),"stencil"in lo&&(typeof lo.stencil=="boolean"?Xl=lo.stencil:(cc=lo.stencil,Vl=!1)),"depthStencil"in lo&&(typeof lo.depthStencil=="boolean"?Vl=Xl=lo.depthStencil:(Io=lo.depthStencil,Vl=!1,Xl=!1))}var Vs=null,Wa=null,_o=null,ns=null;if(Array.isArray(Wo))Vs=Wo.map(hi);else if(Wo)Vs=[hi(Wo)];else for(Vs=new Array(Cs),xo=0;xo<Cs;++xo)Vs[xo]=Cr(Ao,Zo,Au,Cu,Rl);X(be.webgl_draw_buffers||Vs.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),X(Vs.length<=Xe.maxColorAttachments,"too many color attachments, not supported"),Ao=Ao||Vs[0].width,Zo=Zo||Vs[0].height,nc?Wa=hi(nc):Vl&&!Xl&&(Wa=Cr(Ao,Zo,Dl,"depth","uint32")),cc?_o=hi(cc):Xl&&!Vl&&(_o=Cr(Ao,Zo,!1,"stencil","uint8")),Io?ns=hi(Io):!nc&&!cc&&Xl&&Vl&&(ns=Cr(Ao,Zo,Dl,"depth stencil","depth stencil")),X(!!nc+!!cc+!!Io<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var fc=null;for(xo=0;xo<Vs.length;++xo)if(Ti(Vs[xo],Ao,Zo),X(!Vs[xo]||Vs[xo].texture&&Ga.indexOf(Vs[xo].texture._texture.format)>=0||Vs[xo].renderbuffer&&W.indexOf(Vs[xo].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+xo+" is invalid"),Vs[xo]&&Vs[xo].texture){var gc=Ii[Vs[xo].texture._texture.format]*Ia[Vs[xo].texture._texture.type];fc===null?fc=gc:X(fc===gc,"all color attachments much have the same number of bits per pixel.")}return Ti(Wa,Ao,Zo),X(!Wa||Wa.texture&&Wa.texture._texture.format===ka||Wa.renderbuffer&&Wa.renderbuffer._renderbuffer.format===el,"invalid depth attachment for framebuffer object"),Ti(_o,Ao,Zo),X(!_o||_o.renderbuffer&&_o.renderbuffer._renderbuffer.format===Mu,"invalid stencil attachment for framebuffer object"),Ti(ns,Ao,Zo),X(!ns||ns.texture&&ns.texture._texture.format===j||ns.renderbuffer&&ns.renderbuffer._renderbuffer.format===j,"invalid depth-stencil attachment for framebuffer object"),Li(yi),yi.width=Ao,yi.height=Zo,yi.colorAttachments=Vs,yi.depthAttachment=Wa,yi.stencilAttachment=_o,yi.depthStencilAttachment=ns,ia.color=Vs.map(Lr),ia.depth=Lr(Wa),ia.stencil=Lr(_o),ia.depthStencil=Lr(ns),ia.width=yi.width,ia.height=yi.height,Pi(yi),ia}function pa(qi,vo){X(Qn.next!==yi,"can not resize a framebuffer which is currently in use");var xo=Math.max(qi|0,1),Ao=Math.max(vo|0||xo,1);if(xo===yi.width&&Ao===yi.height)return ia;for(var Zo=yi.colorAttachments,Vl=0;Vl<Zo.length;++Vl)bi(Zo[Vl],xo,Ao);return bi(yi.depthAttachment,xo,Ao),bi(yi.stencilAttachment,xo,Ao),bi(yi.depthStencilAttachment,xo,Ao),yi.width=ia.width=xo,yi.height=ia.height=Ao,Pi(yi),ia}return ia(Bi,Ai),E(ia,{resize:pa,_reglType:"framebuffer",_framebuffer:yi,destroy:function(){mi(yi),Li(yi)},use:function(vo){Qn.setFBO({framebuffer:ia},vo)}})}function ca(Bi){var Ai=Array(6);function yi(pa){var qi;X(Ai.indexOf(Qn.next)<0,"can not update framebuffer which is currently in use");var vo={color:null},xo=0,Ao=null,Zo="rgba",Vl="uint8",Xl=1;if(typeof pa=="number")xo=pa|0;else if(!pa)xo=1;else{X.type(pa,"object","invalid arguments for framebuffer");var Wo=pa;if("shape"in Wo){var Au=Wo.shape;X(Array.isArray(Au)&&Au.length>=2,"invalid shape for framebuffer"),X(Au[0]===Au[1],"cube framebuffer must be square"),xo=Au[0]}else"radius"in Wo&&(xo=Wo.radius|0),"width"in Wo?(xo=Wo.width|0,"height"in Wo&&X(Wo.height===xo,"must be square")):"height"in Wo&&(xo=Wo.height|0);("color"in Wo||"colors"in Wo)&&(Ao=Wo.color||Wo.colors,Array.isArray(Ao)&&X(Ao.length===1||be.webgl_draw_buffers,"multiple render targets not supported")),Ao||("colorCount"in Wo&&(Xl=Wo.colorCount|0,X(Xl>0,"invalid color buffer count")),"colorType"in Wo&&(X.oneOf(Wo.colorType,ri,"invalid color type"),Vl=Wo.colorType),"colorFormat"in Wo&&(Zo=Wo.colorFormat,X.oneOf(Wo.colorFormat,Jr,"invalid color format for texture"))),"depth"in Wo&&(vo.depth=Wo.depth),"stencil"in Wo&&(vo.stencil=Wo.stencil),"depthStencil"in Wo&&(vo.depthStencil=Wo.depthStencil)}var Cu;if(Ao)if(Array.isArray(Ao))for(Cu=[],qi=0;qi<Ao.length;++qi)Cu[qi]=Ao[qi];else Cu=[Ao];else{Cu=Array(Xl);var Rl={radius:xo,format:Zo,type:Vl};for(qi=0;qi<Xl;++qi)Cu[qi]=zn.createCube(Rl)}for(vo.color=Array(Cu.length),qi=0;qi<Cu.length;++qi){var Cs=Cu[qi];X(typeof Cs=="function"&&Cs._reglType==="textureCube","invalid cube map"),xo=xo||Cs.width,X(Cs.width===xo&&Cs.height===xo,"invalid cube map shape"),vo.color[qi]={target:Gn,data:Cu[qi]}}for(qi=0;qi<6;++qi){for(var nc=0;nc<Cu.length;++nc)vo.color[nc].target=Gn+qi;qi>0&&(vo.depth=Ai[0].depth,vo.stencil=Ai[0].stencil,vo.depthStencil=Ai[0].depthStencil),Ai[qi]?Ai[qi](vo):Ai[qi]=wi(vo)}return E(yi,{width:xo,height:xo,color:Cu})}function ia(pa){var qi,vo=pa|0;if(X(vo>0&&vo<=Xe.maxCubeMapSize,"invalid radius for cube fbo"),vo===yi.width)return yi;var xo=yi.color;for(qi=0;qi<xo.length;++qi)xo[qi].resize(vo);for(qi=0;qi<6;++qi)Ai[qi].resize(vo);return yi.width=yi.height=vo,yi}return yi(Bi),E(yi,{faces:Ai,resize:ia,_reglType:"framebufferCube",destroy:function(){Ai.forEach(function(qi){qi.destroy()})}})}function Pa(){Qn.cur=null,Qn.next=null,Qn.dirty=!0,Yt(qr).forEach(function(Bi){Bi.framebuffer=ce.createFramebuffer(),Pi(Bi)})}return E(Qn,{getFramebuffer:function(Ai){if(typeof Ai=="function"&&Ai._reglType==="framebuffer"){var yi=Ai._framebuffer;if(yi instanceof da)return yi}return null},create:wi,createCube:ca,clear:function(){Yt(qr).forEach(mi)},restore:Pa})}var Ct=5126,wt=34962;function Ut(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Ct,this.offset=0,this.stride=0,this.divisor=0}function Zt(ce,be,Xe,zn,lr){for(var vr=Xe.maxAttributes,Qn=new Array(vr),Jr=0;Jr<vr;++Jr)Qn[Jr]=new Ut;var $r=0,ri={},ui={Record:Ut,scope:{},state:Qn,currentVAO:null,targetVAO:null,restore:Ti()?qr:function(){},createVAO:da,getVAO:hi,destroyBuffer:xi,setVAO:Ti()?Cr:Lr,clear:Ti()?bi:function(){}};function xi(Li){for(var mi=0;mi<Qn.length;++mi){var Pi=Qn[mi];Pi.buffer===Li&&(ce.disableVertexAttribArray(mi),Pi.buffer=null)}}function Ti(){return be.oes_vertex_array_object}function pi(){return be.angle_instanced_arrays}function hi(Li){return typeof Li=="function"&&Li._vao?Li._vao:null}function Cr(Li){if(Li!==ui.currentVAO){var mi=Ti();Li?mi.bindVertexArrayOES(Li.vao):mi.bindVertexArrayOES(null),ui.currentVAO=Li}}function Lr(Li){if(Li!==ui.currentVAO){if(Li)Li.bindAttrs();else for(var mi=pi(),Pi=0;Pi<Qn.length;++Pi){var wi=Qn[Pi];wi.buffer?(ce.enableVertexAttribArray(Pi),ce.vertexAttribPointer(Pi,wi.size,wi.type,wi.normalized,wi.stride,wi.offfset),mi&&wi.divisor&&mi.vertexAttribDivisorANGLE(Pi,wi.divisor)):(ce.disableVertexAttribArray(Pi),ce.vertexAttrib4f(Pi,wi.x,wi.y,wi.z,wi.w))}ui.currentVAO=Li}}function bi(){Yt(ri).forEach(function(Li){Li.destroy()})}function ki(){this.id=++$r,this.attributes=[];var Li=Ti();Li?this.vao=Li.createVertexArrayOES():this.vao=null,ri[this.id]=this,this.buffers=[]}ki.prototype.bindAttrs=function(){for(var Li=pi(),mi=this.attributes,Pi=0;Pi<mi.length;++Pi){var wi=mi[Pi];wi.buffer?(ce.enableVertexAttribArray(Pi),ce.bindBuffer(wt,wi.buffer.buffer),ce.vertexAttribPointer(Pi,wi.size,wi.type,wi.normalized,wi.stride,wi.offset),Li&&wi.divisor&&Li.vertexAttribDivisorANGLE(Pi,wi.divisor)):(ce.disableVertexAttribArray(Pi),ce.vertexAttrib4f(Pi,wi.x,wi.y,wi.z,wi.w))}for(var ca=mi.length;ca<vr;++ca)ce.disableVertexAttribArray(ca)},ki.prototype.refresh=function(){var Li=Ti();Li&&(Li.bindVertexArrayOES(this.vao),this.bindAttrs(),ui.currentVAO=this)},ki.prototype.destroy=function(){if(this.vao){var Li=Ti();this===ui.currentVAO&&(ui.currentVAO=null,Li.bindVertexArrayOES(null)),Li.deleteVertexArrayOES(this.vao),this.vao=null}ri[this.id]&&(delete ri[this.id],zn.vaoCount-=1)};function qr(){var Li=Ti();Li&&Yt(ri).forEach(function(mi){mi.refresh()})}function da(Li){var mi=new ki;zn.vaoCount+=1;function Pi(wi){X(Array.isArray(wi),"arguments to vertex array constructor must be an array"),X(wi.length<vr,"too many attributes"),X(wi.length>0,"must specify at least one attribute");var ca={},Pa=mi.attributes;Pa.length=wi.length;for(var Bi=0;Bi<wi.length;++Bi){var Ai=wi[Bi],yi=Pa[Bi]=new Ut,ia=Ai.data||Ai;if(Array.isArray(ia)||V(ia)||se(ia)){var pa;mi.buffers[Bi]&&(pa=mi.buffers[Bi],V(ia)&&pa._buffer.byteLength>=ia.byteLength?pa.subdata(ia):(pa.destroy(),mi.buffers[Bi]=null)),mi.buffers[Bi]||(pa=mi.buffers[Bi]=lr.create(Ai,wt,!1,!0)),yi.buffer=lr.getBuffer(pa),yi.size=yi.buffer.dimension|0,yi.normalized=!1,yi.type=yi.buffer.dtype,yi.offset=0,yi.stride=0,yi.divisor=0,yi.state=1,ca[Bi]=1}else lr.getBuffer(Ai)?(yi.buffer=lr.getBuffer(Ai),yi.size=yi.buffer.dimension|0,yi.normalized=!1,yi.type=yi.buffer.dtype,yi.offset=0,yi.stride=0,yi.divisor=0,yi.state=1):lr.getBuffer(Ai.buffer)?(yi.buffer=lr.getBuffer(Ai.buffer),yi.size=(+Ai.size||yi.buffer.dimension)|0,yi.normalized=!!Ai.normalized||!1,"type"in Ai?(X.parameter(Ai.type,Ja,"invalid buffer type"),yi.type=Ja[Ai.type]):yi.type=yi.buffer.dtype,yi.offset=(Ai.offset||0)|0,yi.stride=(Ai.stride||0)|0,yi.divisor=(Ai.divisor||0)|0,yi.state=1,X(yi.size>=1&&yi.size<=4,"size must be between 1 and 4"),X(yi.offset>=0,"invalid offset"),X(yi.stride>=0&&yi.stride<=255,"stride must be between 0 and 255"),X(yi.divisor>=0,"divisor must be positive"),X(!yi.divisor||!!be.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Ai?(X(Bi>0,"first attribute must not be a constant"),yi.x=+Ai.x||0,yi.y=+Ai.y||0,yi.z=+Ai.z||0,yi.w=+Ai.w||0,yi.state=2):X(!1,"invalid attribute spec for location "+Bi)}for(var qi=0;qi<mi.buffers.length;++qi)!ca[qi]&&mi.buffers[qi]&&(mi.buffers[qi].destroy(),mi.buffers[qi]=null);return mi.refresh(),Pi}return Pi.destroy=function(){for(var wi=0;wi<mi.buffers.length;++wi)mi.buffers[wi]&&mi.buffers[wi].destroy();mi.buffers.length=0,mi.destroy()},Pi._vao=mi,Pi._reglType="vao",Pi(Li)}return ui}var qt=35632,he=35633,me=35718,De=35721;function Ae(ce,be,Xe,zn){var lr={},vr={};function Qn(Cr,Lr,bi,ki){this.name=Cr,this.id=Lr,this.location=bi,this.info=ki}function Jr(Cr,Lr){for(var bi=0;bi<Cr.length;++bi)if(Cr[bi].id===Lr.id){Cr[bi].location=Lr.location;return}Cr.push(Lr)}function $r(Cr,Lr,bi){var ki=Cr===qt?lr:vr,qr=ki[Lr];if(!qr){var da=be.str(Lr);qr=ce.createShader(Cr),ce.shaderSource(qr,da),ce.compileShader(qr),X.shaderError(ce,qr,da,Cr,bi),ki[Lr]=qr}return qr}var ri={},ui=[],xi=0;function Ti(Cr,Lr){this.id=xi++,this.fragId=Cr,this.vertId=Lr,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,zn.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function pi(Cr,Lr,bi){var ki,qr,da=$r(qt,Cr.fragId),Li=$r(he,Cr.vertId),mi=Cr.program=ce.createProgram();if(ce.attachShader(mi,da),ce.attachShader(mi,Li),bi)for(ki=0;ki<bi.length;++ki){var Pi=bi[ki];ce.bindAttribLocation(mi,Pi[0],Pi[1])}ce.linkProgram(mi),X.linkError(ce,mi,be.str(Cr.fragId),be.str(Cr.vertId),Lr);var wi=ce.getProgramParameter(mi,me);zn.profile&&(Cr.stats.uniformsCount=wi);var ca=Cr.uniforms;for(ki=0;ki<wi;++ki)if(qr=ce.getActiveUniform(mi,ki),qr)if(qr.size>1)for(var Pa=0;Pa<qr.size;++Pa){var Bi=qr.name.replace("[0]","["+Pa+"]");Jr(ca,new Qn(Bi,be.id(Bi),ce.getUniformLocation(mi,Bi),qr))}else Jr(ca,new Qn(qr.name,be.id(qr.name),ce.getUniformLocation(mi,qr.name),qr));var Ai=ce.getProgramParameter(mi,De);zn.profile&&(Cr.stats.attributesCount=Ai);var yi=Cr.attributes;for(ki=0;ki<Ai;++ki)qr=ce.getActiveAttrib(mi,ki),qr&&Jr(yi,new Qn(qr.name,be.id(qr.name),ce.getAttribLocation(mi,qr.name),qr))}zn.profile&&(Xe.getMaxUniformsCount=function(){var Cr=0;return ui.forEach(function(Lr){Lr.stats.uniformsCount>Cr&&(Cr=Lr.stats.uniformsCount)}),Cr},Xe.getMaxAttributesCount=function(){var Cr=0;return ui.forEach(function(Lr){Lr.stats.attributesCount>Cr&&(Cr=Lr.stats.attributesCount)}),Cr});function hi(){lr={},vr={};for(var Cr=0;Cr<ui.length;++Cr)pi(ui[Cr],null,ui[Cr].attributes.map(function(Lr){return[Lr.location,Lr.name]}))}return{clear:function(){var Lr=ce.deleteShader.bind(ce);Yt(lr).forEach(Lr),lr={},Yt(vr).forEach(Lr),vr={},ui.forEach(function(bi){ce.deleteProgram(bi.program)}),ui.length=0,ri={},Xe.shaderCount=0},program:function(Lr,bi,ki,qr){X.command(Lr>=0,"missing vertex shader",ki),X.command(bi>=0,"missing fragment shader",ki);var da=ri[bi];da||(da=ri[bi]={});var Li=da[Lr];if(Li&&(Li.refCount++,!qr))return Li;var mi=new Ti(bi,Lr);return Xe.shaderCount++,pi(mi,ki,qr),Li||(da[Lr]=mi),ui.push(mi),E(mi,{destroy:function(){if(mi.refCount--,mi.refCount<=0){ce.deleteProgram(mi.program);var wi=ui.indexOf(mi);ui.splice(wi,1),Xe.shaderCount--}da[mi.vertId].refCount<=0&&(ce.deleteShader(vr[mi.vertId]),delete vr[mi.vertId],delete ri[mi.fragId][mi.vertId]),Object.keys(ri[mi.fragId]).length||(ce.deleteShader(lr[mi.fragId]),delete lr[mi.fragId],delete ri[mi.fragId])}})},restore:hi,shader:$r,frag:-1,vert:-1}}var Ue=6408,qe=5121,rn=3333,Xn=5126;function Un(ce,be,Xe,zn,lr,vr,Qn){function Jr(ui){var xi;be.next===null?(X(lr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),xi=qe):(X(be.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),xi=be.next.colorAttachments[0].texture._texture.type,vr.oes_texture_float?(X(xi===qe||xi===Xn,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),xi===Xn&&X(Qn.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):X(xi===qe,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Ti=0,pi=0,hi=zn.framebufferWidth,Cr=zn.framebufferHeight,Lr=null;V(ui)?Lr=ui:ui&&(X.type(ui,"object","invalid arguments to regl.read()"),Ti=ui.x|0,pi=ui.y|0,X(Ti>=0&&Ti<zn.framebufferWidth,"invalid x offset for regl.read"),X(pi>=0&&pi<zn.framebufferHeight,"invalid y offset for regl.read"),hi=(ui.width||zn.framebufferWidth-Ti)|0,Cr=(ui.height||zn.framebufferHeight-pi)|0,Lr=ui.data||null),Lr&&(xi===qe?X(Lr instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):xi===Xn&&X(Lr instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),X(hi>0&&hi+Ti<=zn.framebufferWidth,"invalid width for read pixels"),X(Cr>0&&Cr+pi<=zn.framebufferHeight,"invalid height for read pixels"),Xe();var bi=hi*Cr*4;return Lr||(xi===qe?Lr=new Uint8Array(bi):xi===Xn&&(Lr=Lr||new Float32Array(bi))),X.isTypedArray(Lr,"data buffer for regl.read() must be a typedarray"),X(Lr.byteLength>=bi,"data buffer for regl.read() too small"),ce.pixelStorei(rn,4),ce.readPixels(Ti,pi,hi,Cr,Ue,xi,Lr),Lr}function $r(ui){var xi;return be.setFBO({framebuffer:ui.framebuffer},function(){xi=Jr(ui)}),xi}function ri(ui){return!ui||!("framebuffer"in ui)?Jr(ui):$r(ui)}return ri}function gr(ce){return Array.prototype.slice.call(ce)}function Mr(ce){return gr(ce).join("")}function Qr(){var ce=0,be=[],Xe=[];function zn(xi){for(var Ti=0;Ti<Xe.length;++Ti)if(Xe[Ti]===xi)return be[Ti];var pi="g"+ce++;return be.push(pi),Xe.push(xi),pi}function lr(){var xi=[];function Ti(){xi.push.apply(xi,gr(arguments))}var pi=[];function hi(){var Cr="v"+ce++;return pi.push(Cr),arguments.length>0&&(xi.push(Cr,"="),xi.push.apply(xi,gr(arguments)),xi.push(";")),Cr}return E(Ti,{def:hi,toString:function(){return Mr([pi.length>0?"var "+pi.join(",")+";":"",Mr(xi)])}})}function vr(){var xi=lr(),Ti=lr(),pi=xi.toString,hi=Ti.toString;function Cr(Lr,bi){Ti(Lr,bi,"=",xi.def(Lr,bi),";")}return E(function(){xi.apply(xi,gr(arguments))},{def:xi.def,entry:xi,exit:Ti,save:Cr,set:function(bi,ki,qr){Cr(bi,ki),xi(bi,ki,"=",qr,";")},toString:function(){return pi()+hi()}})}function Qn(){var xi=Mr(arguments),Ti=vr(),pi=vr(),hi=Ti.toString,Cr=pi.toString;return E(Ti,{then:function(){return Ti.apply(Ti,gr(arguments)),this},else:function(){return pi.apply(pi,gr(arguments)),this},toString:function(){var bi=Cr();return bi&&(bi="else{"+bi+"}"),Mr(["if(",xi,"){",hi(),"}",bi])}})}var Jr=lr(),$r={};function ri(xi,Ti){var pi=[];function hi(){var qr="a"+pi.length;return pi.push(qr),qr}Ti=Ti||0;for(var Cr=0;Cr<Ti;++Cr)hi();var Lr=vr(),bi=Lr.toString,ki=$r[xi]=E(Lr,{arg:hi,toString:function(){return Mr(["function(",pi.join(),"){",bi(),"}"])}});return ki}function ui(){var xi=['"use strict";',Jr,"return {"];Object.keys($r).forEach(function(hi){xi.push('"',hi,'":',$r[hi].toString(),",")}),xi.push("}");var Ti=Mr(xi).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),pi=Function.apply(null,be.concat(Ti));return pi.apply(null,Xe)}return{global:Jr,link:zn,block:lr,proc:ri,scope:vr,cond:Qn,compile:ui}}var Vr="xyzw".split(""),_i=5121,Di=1,Wi=2,Xi=0,La=1,Na=2,Vi=3,Ma=4,xa=5,Hi=6,ha="dither",aa="blend.enable",Ca="blend.color",Va="blend.equation",As="blend.func",Rs="depth.enable",gs="depth.func",fs="depth.range",Qs="depth.mask",_l="colorMask",du="cull.enable",uc="cull.face",Mc="frontFace",Il="lineWidth",ql="polygonOffset.enable",Ic="polygonOffset.offset",qc="sample.alpha",Pc="sample.enable",Zc="sample.coverage",of="stencil.enable",vc="stencil.mask",kc="stencil.func",bc="stencil.opFront",au="stencil.opBack",tc="scissor.enable",Tc="scissor.box",ec="viewport",Pu="profile",vu="framebuffer",cl="vert",Ll="frag",fl="elements",kl="primitive",Gc="count",tf="offset",Vc="instances",lc="vao",hl="Width",Ec="Height",Kl=vu+hl,dl=vu+Ec,Jf=ec+hl,cf=ec+Ec,pf="drawingBuffer",_f=pf+hl,Gf=pf+Ec,gf=[As,Va,kc,bc,au,Zc,ec,Tc,Ic],Wc=34962,$f=34963,Ac=35632,ef=35633,Kc=3553,Mf=34067,hh=2884,Qf=3042,Vf=3024,qf=2960,ve=2929,ye=3089,Gt=32823,Xt=32926,ke=32928,un=5126,Wn=35664,ir=35665,dr=35666,ti=5124,Ci=35667,Ji=35668,fa=35669,na=35670,no=35671,$a=35672,Vo=35673,To=35674,pu=35675,lu=35676,Vu=35678,gu=35680,vl=4,Qo=1028,ms=1029,Us=2304,Tu=2305,pl=32775,Gl=32776,Lc=519,jc=7680,Bc=0,If=1,Lf=32774,Wf=513,Rf=36160,Fh=36064,Rc={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},mf=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],nf={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Hc={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},sf={frag:Ac,vert:ef},cu={cw:Us,ccw:Tu};function Pf(ce){return Array.isArray(ce)||V(ce)||se(ce)}function uf(ce){return ce.sort(function(be,Xe){return be===ec?-1:Xe===ec?1:be<Xe?-1:1})}function Dc(ce,be,Xe,zn){this.thisDep=ce,this.contextDep=be,this.propDep=Xe,this.append=zn}function Nc(ce){return ce&&!(ce.thisDep||ce.contextDep||ce.propDep)}function Ml(ce){return new Dc(!1,!1,!1,ce)}function Fc(ce,be){var Xe=ce.type;if(Xe===Xi){var zn=ce.data.length;return new Dc(!0,zn>=1,zn>=2,be)}else if(Xe===Ma){var lr=ce.data;return new Dc(lr.thisDep,lr.contextDep,lr.propDep,be)}else{if(Xe===xa)return new Dc(!1,!1,!1,be);if(Xe===Hi){for(var vr=!1,Qn=!1,Jr=!1,$r=0;$r<ce.data.length;++$r){var ri=ce.data[$r];if(ri.type===La)Jr=!0;else if(ri.type===Na)Qn=!0;else if(ri.type===Vi)vr=!0;else if(ri.type===Xi){vr=!0;var ui=ri.data;ui>=1&&(Qn=!0),ui>=2&&(Jr=!0)}else ri.type===Ma&&(vr=vr||ri.data.thisDep,Qn=Qn||ri.data.contextDep,Jr=Jr||ri.data.propDep)}return new Dc(vr,Qn,Jr,be)}else return new Dc(Xe===Vi,Xe===Na,Xe===La,be)}}var ff=new Dc(!1,!1,!1,function(){});function Tf(ce,be,Xe,zn,lr,vr,Qn,Jr,$r,ri,ui,xi,Ti,pi,hi){var Cr=ri.Record,Lr={add:32774,subtract:32778,"reverse subtract":32779};Xe.ext_blend_minmax&&(Lr.min=pl,Lr.max=Gl);var bi=Xe.angle_instanced_arrays,ki=Xe.webgl_draw_buffers,qr={dirty:!0,profile:hi.profile},da={},Li=[],mi={},Pi={};function wi(Sn){return Sn.replace(".","_")}function ca(Sn,an,nr){var Or=wi(Sn);Li.push(Sn),da[Or]=qr[Or]=!!nr,mi[Or]=an}function Pa(Sn,an,nr){var Or=wi(Sn);Li.push(Sn),Array.isArray(nr)?(qr[Or]=nr.slice(),da[Or]=nr.slice()):qr[Or]=da[Or]=nr,Pi[Or]=an}ca(ha,Vf),ca(aa,Qf),Pa(Ca,"blendColor",[0,0,0,0]),Pa(Va,"blendEquationSeparate",[Lf,Lf]),Pa(As,"blendFuncSeparate",[If,Bc,If,Bc]),ca(Rs,ve,!0),Pa(gs,"depthFunc",Wf),Pa(fs,"depthRange",[0,1]),Pa(Qs,"depthMask",!0),Pa(_l,_l,[!0,!0,!0,!0]),ca(du,hh),Pa(uc,"cullFace",ms),Pa(Mc,Mc,Tu),Pa(Il,Il,1),ca(ql,Gt),Pa(Ic,"polygonOffset",[0,0]),ca(qc,Xt),ca(Pc,ke),Pa(Zc,"sampleCoverage",[1,!1]),ca(of,qf),Pa(vc,"stencilMask",-1),Pa(kc,"stencilFunc",[Lc,0,-1]),Pa(bc,"stencilOpSeparate",[Qo,jc,jc,jc]),Pa(au,"stencilOpSeparate",[ms,jc,jc,jc]),ca(tc,ye),Pa(Tc,"scissor",[0,0,ce.drawingBufferWidth,ce.drawingBufferHeight]),Pa(ec,ec,[0,0,ce.drawingBufferWidth,ce.drawingBufferHeight]);var Bi={gl:ce,context:Ti,strings:be,next:da,current:qr,draw:xi,elements:vr,buffer:lr,shader:ui,attributes:ri.state,vao:ri,uniforms:$r,framebuffer:Jr,extensions:Xe,timer:pi,isBufferArgs:Pf},Ai={primTypes:Ka,compareFuncs:nf,blendFuncs:Rc,blendEquations:Lr,stencilOps:Hc,glTypes:Ja,orientationType:cu};X.optional(function(){Bi.isArrayLike=Oo}),ki&&(Ai.backBuffer=[ms],Ai.drawBuffer=Me(zn.maxDrawbuffers,function(Sn){return Sn===0?[0]:Me(Sn,function(an){return Fh+an})}));var yi=0;function ia(){var Sn=Qr(),an=Sn.link,nr=Sn.global;Sn.id=yi++,Sn.batchId="0";var Or=an(Bi),Rr=Sn.shared={props:"a0"};Object.keys(Bi).forEach(function(Jn){Rr[Jn]=nr.def(Or,".",Jn)}),X.optional(function(){Sn.CHECK=an(X),Sn.commandStr=X.guessCommand(),Sn.command=an(Sn.commandStr),Sn.assert=function(Jn,bn,Tr){Jn("if(!(",bn,"))",this.CHECK,".commandRaise(",an(Tr),",",this.command,");")},Ai.invalidBlendCombinations=mf});var sr=Sn.next={},ar=Sn.current={};Object.keys(Pi).forEach(function(Jn){Array.isArray(qr[Jn])&&(sr[Jn]=nr.def(Rr.next,".",Jn),ar[Jn]=nr.def(Rr.current,".",Jn))});var Er=Sn.constants={};Object.keys(Ai).forEach(function(Jn){Er[Jn]=nr.def(JSON.stringify(Ai[Jn]))}),Sn.invoke=function(Jn,bn){switch(bn.type){case Xi:var Tr=["this",Rr.context,Rr.props,Sn.batchId];return Jn.def(an(bn.data),".call(",Tr.slice(0,Math.max(bn.data.length+1,4)),")");case La:return Jn.def(Rr.props,bn.data);case Na:return Jn.def(Rr.context,bn.data);case Vi:return Jn.def("this",bn.data);case Ma:return bn.data.append(Sn,Jn),bn.data.ref;case xa:return bn.data.toString();case Hi:return bn.data.map(function(Dr){return Sn.invoke(Jn,Dr)})}},Sn.attribCache={};var Mn={};return Sn.scopeAttrib=function(Jn){var bn=be.id(Jn);if(bn in Mn)return Mn[bn];var Tr=ri.scope[bn];Tr||(Tr=ri.scope[bn]=new Cr);var Dr=Mn[bn]=an(Tr);return Dr},Sn}function pa(Sn){var an=Sn.static,nr=Sn.dynamic,Or;if(Pu in an){var Rr=!!an[Pu];Or=Ml(function(ar,Er){return Rr}),Or.enable=Rr}else if(Pu in nr){var sr=nr[Pu];Or=Fc(sr,function(ar,Er){return ar.invoke(Er,sr)})}return Or}function qi(Sn,an){var nr=Sn.static,Or=Sn.dynamic;if(vu in nr){var Rr=nr[vu];return Rr?(Rr=Jr.getFramebuffer(Rr),X.command(Rr,"invalid framebuffer object"),Ml(function(ar,Er){var Mn=ar.link(Rr),Jn=ar.shared;Er.set(Jn.framebuffer,".next",Mn);var bn=Jn.context;return Er.set(bn,"."+Kl,Mn+".width"),Er.set(bn,"."+dl,Mn+".height"),Mn})):Ml(function(ar,Er){var Mn=ar.shared;Er.set(Mn.framebuffer,".next","null");var Jn=Mn.context;return Er.set(Jn,"."+Kl,Jn+"."+_f),Er.set(Jn,"."+dl,Jn+"."+Gf),"null"})}else if(vu in Or){var sr=Or[vu];return Fc(sr,function(ar,Er){var Mn=ar.invoke(Er,sr),Jn=ar.shared,bn=Jn.framebuffer,Tr=Er.def(bn,".getFramebuffer(",Mn,")");X.optional(function(){ar.assert(Er,"!"+Mn+"||"+Tr,"invalid framebuffer object")}),Er.set(bn,".next",Tr);var Dr=Jn.context;return Er.set(Dr,"."+Kl,Tr+"?"+Tr+".width:"+Dr+"."+_f),Er.set(Dr,"."+dl,Tr+"?"+Tr+".height:"+Dr+"."+Gf),Tr})}else return null}function vo(Sn,an,nr){var Or=Sn.static,Rr=Sn.dynamic;function sr(Mn){if(Mn in Or){var Jn=Or[Mn];X.commandType(Jn,"object","invalid "+Mn,nr.commandStr);var bn=!0,Tr=Jn.x|0,Dr=Jn.y|0,li,Wr;return"width"in Jn?(li=Jn.width|0,X.command(li>=0,"invalid "+Mn,nr.commandStr)):bn=!1,"height"in Jn?(Wr=Jn.height|0,X.command(Wr>=0,"invalid "+Mn,nr.commandStr)):bn=!1,new Dc(!bn&&an&&an.thisDep,!bn&&an&&an.contextDep,!bn&&an&&an.propDep,function(va,Ro){var la=va.shared.context,Ha=li;"width"in Jn||(Ha=Ro.def(la,".",Kl,"-",Tr));var bo=Wr;return"height"in Jn||(bo=Ro.def(la,".",dl,"-",Dr)),[Tr,Dr,Ha,bo]})}else if(Mn in Rr){var ii=Rr[Mn],ji=Fc(ii,function(va,Ro){var la=va.invoke(Ro,ii);X.optional(function(){va.assert(Ro,la+"&&typeof "+la+'==="object"',"invalid "+Mn)});var Ha=va.shared.context,bo=Ro.def(la,".x|0"),Ds=Ro.def(la,".y|0"),jl=Ro.def('"width" in ',la,"?",la,".width|0:","(",Ha,".",Kl,"-",bo,")"),zc=Ro.def('"height" in ',la,"?",la,".height|0:","(",Ha,".",dl,"-",Ds,")");return X.optional(function(){va.assert(Ro,jl+">=0&&"+zc+">=0","invalid "+Mn)}),[bo,Ds,jl,zc]});return an&&(ji.thisDep=ji.thisDep||an.thisDep,ji.contextDep=ji.contextDep||an.contextDep,ji.propDep=ji.propDep||an.propDep),ji}else return an?new Dc(an.thisDep,an.contextDep,an.propDep,function(va,Ro){var la=va.shared.context;return[0,0,Ro.def(la,".",Kl),Ro.def(la,".",dl)]}):null}var ar=sr(ec);if(ar){var Er=ar;ar=new Dc(ar.thisDep,ar.contextDep,ar.propDep,function(Mn,Jn){var bn=Er.append(Mn,Jn),Tr=Mn.shared.context;return Jn.set(Tr,"."+Jf,bn[2]),Jn.set(Tr,"."+cf,bn[3]),bn})}return{viewport:ar,scissor_box:sr(Tc)}}function xo(Sn,an){var nr=Sn.static,Or=typeof nr[Ll]=="string"&&typeof nr[cl]=="string";if(Or){if(Object.keys(an.dynamic).length>0)return null;var Rr=an.static,sr=Object.keys(Rr);if(sr.length>0&&typeof Rr[sr[0]]=="number"){for(var ar=[],Er=0;Er<sr.length;++Er)X(typeof Rr[sr[Er]]=="number","must specify all vertex attribute locations when using vaos"),ar.push([Rr[sr[Er]]|0,sr[Er]]);return ar}}return null}function Ao(Sn,an,nr){var Or=Sn.static,Rr=Sn.dynamic;function sr(bn){if(bn in Or){var Tr=be.id(Or[bn]);X.optional(function(){ui.shader(sf[bn],Tr,X.guessCommand())});var Dr=Ml(function(){return Tr});return Dr.id=Tr,Dr}else if(bn in Rr){var li=Rr[bn];return Fc(li,function(Wr,ii){var ji=Wr.invoke(ii,li),va=ii.def(Wr.shared.strings,".id(",ji,")");return X.optional(function(){ii(Wr.shared.shader,".shader(",sf[bn],",",va,",",Wr.command,");")}),va})}return null}var ar=sr(Ll),Er=sr(cl),Mn=null,Jn;return Nc(ar)&&Nc(Er)?(Mn=ui.program(Er.id,ar.id,null,nr),Jn=Ml(function(bn,Tr){return bn.link(Mn)})):Jn=new Dc(ar&&ar.thisDep||Er&&Er.thisDep,ar&&ar.contextDep||Er&&Er.contextDep,ar&&ar.propDep||Er&&Er.propDep,function(bn,Tr){var Dr=bn.shared.shader,li;ar?li=ar.append(bn,Tr):li=Tr.def(Dr,".",Ll);var Wr;Er?Wr=Er.append(bn,Tr):Wr=Tr.def(Dr,".",cl);var ii=Dr+".program("+Wr+","+li;return X.optional(function(){ii+=","+bn.command}),Tr.def(ii+")")}),{frag:ar,vert:Er,progVar:Jn,program:Mn}}function Zo(Sn,an){var nr=Sn.static,Or=Sn.dynamic;function Rr(){if(fl in nr){var bn=nr[fl];Pf(bn)?bn=vr.getElements(vr.create(bn,!0)):bn&&(bn=vr.getElements(bn),X.command(bn,"invalid elements",an.commandStr));var Tr=Ml(function(li,Wr){if(bn){var ii=li.link(bn);return li.ELEMENTS=ii,ii}return li.ELEMENTS=null,null});return Tr.value=bn,Tr}else if(fl in Or){var Dr=Or[fl];return Fc(Dr,function(li,Wr){var ii=li.shared,ji=ii.isBufferArgs,va=ii.elements,Ro=li.invoke(Wr,Dr),la=Wr.def("null"),Ha=Wr.def(ji,"(",Ro,")"),bo=li.cond(Ha).then(la,"=",va,".createStream(",Ro,");").else(la,"=",va,".getElements(",Ro,");");return X.optional(function(){li.assert(bo.else,"!"+Ro+"||"+la,"invalid elements")}),Wr.entry(bo),Wr.exit(li.cond(Ha).then(va,".destroyStream(",la,");")),li.ELEMENTS=la,la})}return null}var sr=Rr();function ar(){if(kl in nr){var bn=nr[kl];return X.commandParameter(bn,Ka,"invalid primitve",an.commandStr),Ml(function(Dr,li){return Ka[bn]})}else if(kl in Or){var Tr=Or[kl];return Fc(Tr,function(Dr,li){var Wr=Dr.constants.primTypes,ii=Dr.invoke(li,Tr);return X.optional(function(){Dr.assert(li,ii+" in "+Wr,"invalid primitive, must be one of "+Object.keys(Ka))}),li.def(Wr,"[",ii,"]")})}else if(sr)return Nc(sr)?sr.value?Ml(function(Dr,li){return li.def(Dr.ELEMENTS,".primType")}):Ml(function(){return vl}):new Dc(sr.thisDep,sr.contextDep,sr.propDep,function(Dr,li){var Wr=Dr.ELEMENTS;return li.def(Wr,"?",Wr,".primType:",vl)});return null}function Er(bn,Tr){if(bn in nr){var Dr=nr[bn]|0;return X.command(!Tr||Dr>=0,"invalid "+bn,an.commandStr),Ml(function(Wr,ii){return Tr&&(Wr.OFFSET=Dr),Dr})}else if(bn in Or){var li=Or[bn];return Fc(li,function(Wr,ii){var ji=Wr.invoke(ii,li);return Tr&&(Wr.OFFSET=ji,X.optional(function(){Wr.assert(ii,ji+">=0","invalid "+bn)})),ji})}else if(Tr&&sr)return Ml(function(Wr,ii){return Wr.OFFSET="0",0});return null}var Mn=Er(tf,!0);function Jn(){if(Gc in nr){var bn=nr[Gc]|0;return X.command(typeof bn=="number"&&bn>=0,"invalid vertex count",an.commandStr),Ml(function(){return bn})}else if(Gc in Or){var Tr=Or[Gc];return Fc(Tr,function(Wr,ii){var ji=Wr.invoke(ii,Tr);return X.optional(function(){Wr.assert(ii,"typeof "+ji+'==="number"&&'+ji+">=0&&"+ji+"===("+ji+"|0)","invalid vertex count")}),ji})}else if(sr)if(Nc(sr)){if(sr)return Mn?new Dc(Mn.thisDep,Mn.contextDep,Mn.propDep,function(Wr,ii){var ji=ii.def(Wr.ELEMENTS,".vertCount-",Wr.OFFSET);return X.optional(function(){Wr.assert(ii,ji+">=0","invalid vertex offset/element buffer too small")}),ji}):Ml(function(Wr,ii){return ii.def(Wr.ELEMENTS,".vertCount")});var Dr=Ml(function(){return-1});return X.optional(function(){Dr.MISSING=!0}),Dr}else{var li=new Dc(sr.thisDep||Mn.thisDep,sr.contextDep||Mn.contextDep,sr.propDep||Mn.propDep,function(Wr,ii){var ji=Wr.ELEMENTS;return Wr.OFFSET?ii.def(ji,"?",ji,".vertCount-",Wr.OFFSET,":-1"):ii.def(ji,"?",ji,".vertCount:-1")});return X.optional(function(){li.DYNAMIC=!0}),li}return null}return{elements:sr,primitive:ar(),count:Jn(),instances:Er(Vc,!1),offset:Mn}}function Vl(Sn,an){var nr=Sn.static,Or=Sn.dynamic,Rr={};return Li.forEach(function(sr){var ar=wi(sr);function Er(Mn,Jn){if(sr in nr){var bn=Mn(nr[sr]);Rr[ar]=Ml(function(){return bn})}else if(sr in Or){var Tr=Or[sr];Rr[ar]=Fc(Tr,function(Dr,li){return Jn(Dr,li,Dr.invoke(li,Tr))})}}switch(sr){case du:case aa:case ha:case of:case Rs:case tc:case ql:case qc:case Pc:case Qs:return Er(function(Mn){return X.commandType(Mn,"boolean",sr,an.commandStr),Mn},function(Mn,Jn,bn){return X.optional(function(){Mn.assert(Jn,"typeof "+bn+'==="boolean"',"invalid flag "+sr,Mn.commandStr)}),bn});case gs:return Er(function(Mn){return X.commandParameter(Mn,nf,"invalid "+sr,an.commandStr),nf[Mn]},function(Mn,Jn,bn){var Tr=Mn.constants.compareFuncs;return X.optional(function(){Mn.assert(Jn,bn+" in "+Tr,"invalid "+sr+", must be one of "+Object.keys(nf))}),Jn.def(Tr,"[",bn,"]")});case fs:return Er(function(Mn){return X.command(Oo(Mn)&&Mn.length===2&&typeof Mn[0]=="number"&&typeof Mn[1]=="number"&&Mn[0]<=Mn[1],"depth range is 2d array",an.commandStr),Mn},function(Mn,Jn,bn){X.optional(function(){Mn.assert(Jn,Mn.shared.isArrayLike+"("+bn+")&&"+bn+".length===2&&typeof "+bn+'[0]==="number"&&typeof '+bn+'[1]==="number"&&'+bn+"[0]<="+bn+"[1]","depth range must be a 2d array")});var Tr=Jn.def("+",bn,"[0]"),Dr=Jn.def("+",bn,"[1]");return[Tr,Dr]});case As:return Er(function(Mn){X.commandType(Mn,"object","blend.func",an.commandStr);var Jn="srcRGB"in Mn?Mn.srcRGB:Mn.src,bn="srcAlpha"in Mn?Mn.srcAlpha:Mn.src,Tr="dstRGB"in Mn?Mn.dstRGB:Mn.dst,Dr="dstAlpha"in Mn?Mn.dstAlpha:Mn.dst;return X.commandParameter(Jn,Rc,ar+".srcRGB",an.commandStr),X.commandParameter(bn,Rc,ar+".srcAlpha",an.commandStr),X.commandParameter(Tr,Rc,ar+".dstRGB",an.commandStr),X.commandParameter(Dr,Rc,ar+".dstAlpha",an.commandStr),X.command(mf.indexOf(Jn+", "+Tr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Jn+", "+Tr+")",an.commandStr),[Rc[Jn],Rc[Tr],Rc[bn],Rc[Dr]]},function(Mn,Jn,bn){var Tr=Mn.constants.blendFuncs;X.optional(function(){Mn.assert(Jn,bn+"&&typeof "+bn+'==="object"',"invalid blend func, must be an object")});function Dr(la,Ha){var bo=Jn.def('"',la,Ha,'" in ',bn,"?",bn,".",la,Ha,":",bn,".",la);return X.optional(function(){Mn.assert(Jn,bo+" in "+Tr,"invalid "+sr+"."+la+Ha+", must be one of "+Object.keys(Rc))}),bo}var li=Dr("src","RGB"),Wr=Dr("dst","RGB");X.optional(function(){var la=Mn.constants.invalidBlendCombinations;Mn.assert(Jn,la+".indexOf("+li+'+", "+'+Wr+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var ii=Jn.def(Tr,"[",li,"]"),ji=Jn.def(Tr,"[",Dr("src","Alpha"),"]"),va=Jn.def(Tr,"[",Wr,"]"),Ro=Jn.def(Tr,"[",Dr("dst","Alpha"),"]");return[ii,va,ji,Ro]});case Va:return Er(function(Mn){if(typeof Mn=="string")return X.commandParameter(Mn,Lr,"invalid "+sr,an.commandStr),[Lr[Mn],Lr[Mn]];if(typeof Mn=="object")return X.commandParameter(Mn.rgb,Lr,sr+".rgb",an.commandStr),X.commandParameter(Mn.alpha,Lr,sr+".alpha",an.commandStr),[Lr[Mn.rgb],Lr[Mn.alpha]];X.commandRaise("invalid blend.equation",an.commandStr)},function(Mn,Jn,bn){var Tr=Mn.constants.blendEquations,Dr=Jn.def(),li=Jn.def(),Wr=Mn.cond("typeof ",bn,'==="string"');return X.optional(function(){function ii(ji,va,Ro){Mn.assert(ji,Ro+" in "+Tr,"invalid "+va+", must be one of "+Object.keys(Lr))}ii(Wr.then,sr,bn),Mn.assert(Wr.else,bn+"&&typeof "+bn+'==="object"',"invalid "+sr),ii(Wr.else,sr+".rgb",bn+".rgb"),ii(Wr.else,sr+".alpha",bn+".alpha")}),Wr.then(Dr,"=",li,"=",Tr,"[",bn,"];"),Wr.else(Dr,"=",Tr,"[",bn,".rgb];",li,"=",Tr,"[",bn,".alpha];"),Jn(Wr),[Dr,li]});case Ca:return Er(function(Mn){return X.command(Oo(Mn)&&Mn.length===4,"blend.color must be a 4d array",an.commandStr),Me(4,function(Jn){return+Mn[Jn]})},function(Mn,Jn,bn){return X.optional(function(){Mn.assert(Jn,Mn.shared.isArrayLike+"("+bn+")&&"+bn+".length===4","blend.color must be a 4d array")}),Me(4,function(Tr){return Jn.def("+",bn,"[",Tr,"]")})});case vc:return Er(function(Mn){return X.commandType(Mn,"number",ar,an.commandStr),Mn|0},function(Mn,Jn,bn){return X.optional(function(){Mn.assert(Jn,"typeof "+bn+'==="number"',"invalid stencil.mask")}),Jn.def(bn,"|0")});case kc:return Er(function(Mn){X.commandType(Mn,"object",ar,an.commandStr);var Jn=Mn.cmp||"keep",bn=Mn.ref||0,Tr="mask"in Mn?Mn.mask:-1;return X.commandParameter(Jn,nf,sr+".cmp",an.commandStr),X.commandType(bn,"number",sr+".ref",an.commandStr),X.commandType(Tr,"number",sr+".mask",an.commandStr),[nf[Jn],bn,Tr]},function(Mn,Jn,bn){var Tr=Mn.constants.compareFuncs;X.optional(function(){function ii(){Mn.assert(Jn,Array.prototype.join.call(arguments,""),"invalid stencil.func")}ii(bn+"&&typeof ",bn,'==="object"'),ii('!("cmp" in ',bn,")||(",bn,".cmp in ",Tr,")")});var Dr=Jn.def('"cmp" in ',bn,"?",Tr,"[",bn,".cmp]",":",jc),li=Jn.def(bn,".ref|0"),Wr=Jn.def('"mask" in ',bn,"?",bn,".mask|0:-1");return[Dr,li,Wr]});case bc:case au:return Er(function(Mn){X.commandType(Mn,"object",ar,an.commandStr);var Jn=Mn.fail||"keep",bn=Mn.zfail||"keep",Tr=Mn.zpass||"keep";return X.commandParameter(Jn,Hc,sr+".fail",an.commandStr),X.commandParameter(bn,Hc,sr+".zfail",an.commandStr),X.commandParameter(Tr,Hc,sr+".zpass",an.commandStr),[sr===au?ms:Qo,Hc[Jn],Hc[bn],Hc[Tr]]},function(Mn,Jn,bn){var Tr=Mn.constants.stencilOps;X.optional(function(){Mn.assert(Jn,bn+"&&typeof "+bn+'==="object"',"invalid "+sr)});function Dr(li){return X.optional(function(){Mn.assert(Jn,'!("'+li+'" in '+bn+")||("+bn+"."+li+" in "+Tr+")","invalid "+sr+"."+li+", must be one of "+Object.keys(Hc))}),Jn.def('"',li,'" in ',bn,"?",Tr,"[",bn,".",li,"]:",jc)}return[sr===au?ms:Qo,Dr("fail"),Dr("zfail"),Dr("zpass")]});case Ic:return Er(function(Mn){X.commandType(Mn,"object",ar,an.commandStr);var Jn=Mn.factor|0,bn=Mn.units|0;return X.commandType(Jn,"number",ar+".factor",an.commandStr),X.commandType(bn,"number",ar+".units",an.commandStr),[Jn,bn]},function(Mn,Jn,bn){X.optional(function(){Mn.assert(Jn,bn+"&&typeof "+bn+'==="object"',"invalid "+sr)});var Tr=Jn.def(bn,".factor|0"),Dr=Jn.def(bn,".units|0");return[Tr,Dr]});case uc:return Er(function(Mn){var Jn=0;return Mn==="front"?Jn=Qo:Mn==="back"&&(Jn=ms),X.command(!!Jn,ar,an.commandStr),Jn},function(Mn,Jn,bn){return X.optional(function(){Mn.assert(Jn,bn+'==="front"||'+bn+'==="back"',"invalid cull.face")}),Jn.def(bn,'==="front"?',Qo,":",ms)});case Il:return Er(function(Mn){return X.command(typeof Mn=="number"&&Mn>=zn.lineWidthDims[0]&&Mn<=zn.lineWidthDims[1],"invalid line width, must be a positive number between "+zn.lineWidthDims[0]+" and "+zn.lineWidthDims[1],an.commandStr),Mn},function(Mn,Jn,bn){return X.optional(function(){Mn.assert(Jn,"typeof "+bn+'==="number"&&'+bn+">="+zn.lineWidthDims[0]+"&&"+bn+"<="+zn.lineWidthDims[1],"invalid line width")}),bn});case Mc:return Er(function(Mn){return X.commandParameter(Mn,cu,ar,an.commandStr),cu[Mn]},function(Mn,Jn,bn){return X.optional(function(){Mn.assert(Jn,bn+'==="cw"||'+bn+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Jn.def(bn+'==="cw"?'+Us+":"+Tu)});case _l:return Er(function(Mn){return X.command(Oo(Mn)&&Mn.length===4,"color.mask must be length 4 array",an.commandStr),Mn.map(function(Jn){return!!Jn})},function(Mn,Jn,bn){return X.optional(function(){Mn.assert(Jn,Mn.shared.isArrayLike+"("+bn+")&&"+bn+".length===4","invalid color.mask")}),Me(4,function(Tr){return"!!"+bn+"["+Tr+"]"})});case Zc:return Er(function(Mn){X.command(typeof Mn=="object"&&Mn,ar,an.commandStr);var Jn="value"in Mn?Mn.value:1,bn=!!Mn.invert;return X.command(typeof Jn=="number"&&Jn>=0&&Jn<=1,"sample.coverage.value must be a number between 0 and 1",an.commandStr),[Jn,bn]},function(Mn,Jn,bn){X.optional(function(){Mn.assert(Jn,bn+"&&typeof "+bn+'==="object"',"invalid sample.coverage")});var Tr=Jn.def('"value" in ',bn,"?+",bn,".value:1"),Dr=Jn.def("!!",bn,".invert");return[Tr,Dr]})}}),Rr}function Xl(Sn,an){var nr=Sn.static,Or=Sn.dynamic,Rr={};return Object.keys(nr).forEach(function(sr){var ar=nr[sr],Er;if(typeof ar=="number"||typeof ar=="boolean")Er=Ml(function(){return ar});else if(typeof ar=="function"){var Mn=ar._reglType;Mn==="texture2d"||Mn==="textureCube"?Er=Ml(function(Jn){return Jn.link(ar)}):Mn==="framebuffer"||Mn==="framebufferCube"?(X.command(ar.color.length>0,'missing color attachment for framebuffer sent to uniform "'+sr+'"',an.commandStr),Er=Ml(function(Jn){return Jn.link(ar.color[0])})):X.commandRaise('invalid data for uniform "'+sr+'"',an.commandStr)}else Oo(ar)?Er=Ml(function(Jn){var bn=Jn.global.def("[",Me(ar.length,function(Tr){return X.command(typeof ar[Tr]=="number"||typeof ar[Tr]=="boolean","invalid uniform "+sr,Jn.commandStr),ar[Tr]}),"]");return bn}):X.commandRaise('invalid or missing data for uniform "'+sr+'"',an.commandStr);Er.value=ar,Rr[sr]=Er}),Object.keys(Or).forEach(function(sr){var ar=Or[sr];Rr[sr]=Fc(ar,function(Er,Mn){return Er.invoke(Mn,ar)})}),Rr}function Wo(Sn,an){var nr=Sn.static,Or=Sn.dynamic,Rr={};return Object.keys(nr).forEach(function(sr){var ar=nr[sr],Er=be.id(sr),Mn=new Cr;if(Pf(ar))Mn.state=Di,Mn.buffer=lr.getBuffer(lr.create(ar,Wc,!1,!0)),Mn.type=0;else{var Jn=lr.getBuffer(ar);if(Jn)Mn.state=Di,Mn.buffer=Jn,Mn.type=0;else if(X.command(typeof ar=="object"&&ar,"invalid data for attribute "+sr,an.commandStr),"constant"in ar){var bn=ar.constant;Mn.buffer="null",Mn.state=Wi,typeof bn=="number"?Mn.x=bn:(X.command(Oo(bn)&&bn.length>0&&bn.length<=4,"invalid constant for attribute "+sr,an.commandStr),Vr.forEach(function(va,Ro){Ro<bn.length&&(Mn[va]=bn[Ro])}))}else{Pf(ar.buffer)?Jn=lr.getBuffer(lr.create(ar.buffer,Wc,!1,!0)):Jn=lr.getBuffer(ar.buffer),X.command(!!Jn,'missing buffer for attribute "'+sr+'"',an.commandStr);var Tr=ar.offset|0;X.command(Tr>=0,'invalid offset for attribute "'+sr+'"',an.commandStr);var Dr=ar.stride|0;X.command(Dr>=0&&Dr<256,'invalid stride for attribute "'+sr+'", must be integer betweeen [0, 255]',an.commandStr);var li=ar.size|0;X.command(!("size"in ar)||li>0&&li<=4,'invalid size for attribute "'+sr+'", must be 1,2,3,4',an.commandStr);var Wr=!!ar.normalized,ii=0;"type"in ar&&(X.commandParameter(ar.type,Ja,"invalid type for attribute "+sr,an.commandStr),ii=Ja[ar.type]);var ji=ar.divisor|0;"divisor"in ar&&(X.command(ji===0||bi,'cannot specify divisor for attribute "'+sr+'", instancing not supported',an.commandStr),X.command(ji>=0,'invalid divisor for attribute "'+sr+'"',an.commandStr)),X.optional(function(){var va=an.commandStr,Ro=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(ar).forEach(function(la){X.command(Ro.indexOf(la)>=0,'unknown parameter "'+la+'" for attribute pointer "'+sr+'" (valid parameters are '+Ro+")",va)})}),Mn.buffer=Jn,Mn.state=Di,Mn.size=li,Mn.normalized=Wr,Mn.type=ii||Jn.dtype,Mn.offset=Tr,Mn.stride=Dr,Mn.divisor=ji}}Rr[sr]=Ml(function(va,Ro){var la=va.attribCache;if(Er in la)return la[Er];var Ha={isStream:!1};return Object.keys(Mn).forEach(function(bo){Ha[bo]=Mn[bo]}),Mn.buffer&&(Ha.buffer=va.link(Mn.buffer),Ha.type=Ha.type||Ha.buffer+".dtype"),la[Er]=Ha,Ha})}),Object.keys(Or).forEach(function(sr){var ar=Or[sr];function Er(Mn,Jn){var bn=Mn.invoke(Jn,ar),Tr=Mn.shared,Dr=Mn.constants,li=Tr.isBufferArgs,Wr=Tr.buffer;X.optional(function(){Mn.assert(Jn,bn+"&&(typeof "+bn+'==="object"||typeof '+bn+'==="function")&&('+li+"("+bn+")||"+Wr+".getBuffer("+bn+")||"+Wr+".getBuffer("+bn+".buffer)||"+li+"("+bn+'.buffer)||("constant" in '+bn+"&&(typeof "+bn+'.constant==="number"||'+Tr.isArrayLike+"("+bn+".constant))))",'invalid dynamic attribute "'+sr+'"')});var ii={isStream:Jn.def(!1)},ji=new Cr;ji.state=Di,Object.keys(ji).forEach(function(Ha){ii[Ha]=Jn.def(""+ji[Ha])});var va=ii.buffer,Ro=ii.type;Jn("if(",li,"(",bn,")){",ii.isStream,"=true;",va,"=",Wr,".createStream(",Wc,",",bn,");",Ro,"=",va,".dtype;","}else{",va,"=",Wr,".getBuffer(",bn,");","if(",va,"){",Ro,"=",va,".dtype;",'}else if("constant" in ',bn,"){",ii.state,"=",Wi,";","if(typeof "+bn+'.constant === "number"){',ii[Vr[0]],"=",bn,".constant;",Vr.slice(1).map(function(Ha){return ii[Ha]}).join("="),"=0;","}else{",Vr.map(function(Ha,bo){return ii[Ha]+"="+bn+".constant.length>"+bo+"?"+bn+".constant["+bo+"]:0;"}).join(""),"}}else{","if(",li,"(",bn,".buffer)){",va,"=",Wr,".createStream(",Wc,",",bn,".buffer);","}else{",va,"=",Wr,".getBuffer(",bn,".buffer);","}",Ro,'="type" in ',bn,"?",Dr.glTypes,"[",bn,".type]:",va,".dtype;",ii.normalized,"=!!",bn,".normalized;");function la(Ha){Jn(ii[Ha],"=",bn,".",Ha,"|0;")}return la("size"),la("offset"),la("stride"),la("divisor"),Jn("}}"),Jn.exit("if(",ii.isStream,"){",Wr,".destroyStream(",va,");","}"),ii}Rr[sr]=Fc(ar,Er)}),Rr}function Au(Sn,an){var nr=Sn.static,Or=Sn.dynamic;if(lc in nr){var Rr=nr[lc];return Rr!==null&&ri.getVAO(Rr)===null&&(Rr=ri.createVAO(Rr)),Ml(function(ar){return ar.link(ri.getVAO(Rr))})}else if(lc in Or){var sr=Or[lc];return Fc(sr,function(ar,Er){var Mn=ar.invoke(Er,sr);return Er.def(ar.shared.vao+".getVAO("+Mn+")")})}return null}function Cu(Sn){var an=Sn.static,nr=Sn.dynamic,Or={};return Object.keys(an).forEach(function(Rr){var sr=an[Rr];Or[Rr]=Ml(function(ar,Er){return typeof sr=="number"||typeof sr=="boolean"?""+sr:ar.link(sr)})}),Object.keys(nr).forEach(function(Rr){var sr=nr[Rr];Or[Rr]=Fc(sr,function(ar,Er){return ar.invoke(Er,sr)})}),Or}function Rl(Sn,an,nr,Or,Rr){var sr=Sn.static,ar=Sn.dynamic;X.optional(function(){var la=[vu,cl,Ll,fl,kl,tf,Gc,Vc,Pu,lc].concat(Li);function Ha(bo){Object.keys(bo).forEach(function(Ds){X.command(la.indexOf(Ds)>=0,'unknown parameter "'+Ds+'"',Rr.commandStr)})}Ha(sr),Ha(ar)});var Er=xo(Sn,an),Mn=qi(Sn,Rr),Jn=vo(Sn,Mn,Rr),bn=Zo(Sn,Rr),Tr=Vl(Sn,Rr),Dr=Ao(Sn,Rr,Er);function li(la){var Ha=Jn[la];Ha&&(Tr[la]=Ha)}li(ec),li(wi(Tc));var Wr=Object.keys(Tr).length>0,ii={framebuffer:Mn,draw:bn,shader:Dr,state:Tr,dirty:Wr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(ii.profile=pa(Sn,Rr),ii.uniforms=Xl(nr,Rr),ii.drawVAO=ii.scopeVAO=Au(Sn,Rr),!ii.drawVAO&&Dr.program&&!Er&&Xe.angle_instanced_arrays){var ji=!0,va=Dr.program.attributes.map(function(la){var Ha=an.static[la];return ji=ji&&!!Ha,Ha});if(ji&&va.length>0){var Ro=ri.getVAO(ri.createVAO(va));ii.drawVAO=new Dc(null,null,null,function(la,Ha){return la.link(Ro)}),ii.useVAO=!0}}return Er?ii.useVAO=!0:ii.attributes=Wo(an,Rr),ii.context=Cu(Or,Rr),ii}function Cs(Sn,an,nr){var Or=Sn.shared,Rr=Or.context,sr=Sn.scope();Object.keys(nr).forEach(function(ar){an.save(Rr,"."+ar);var Er=nr[ar],Mn=Er.append(Sn,an);Array.isArray(Mn)?sr(Rr,".",ar,"=[",Mn.join(),"];"):sr(Rr,".",ar,"=",Mn,";")}),an(sr)}function nc(Sn,an,nr,Or){var Rr=Sn.shared,sr=Rr.gl,ar=Rr.framebuffer,Er;ki&&(Er=an.def(Rr.extensions,".webgl_draw_buffers"));var Mn=Sn.constants,Jn=Mn.drawBuffer,bn=Mn.backBuffer,Tr;nr?Tr=nr.append(Sn,an):Tr=an.def(ar,".next"),Or||an("if(",Tr,"!==",ar,".cur){"),an("if(",Tr,"){",sr,".bindFramebuffer(",Rf,",",Tr,".framebuffer);"),ki&&an(Er,".drawBuffersWEBGL(",Jn,"[",Tr,".colorAttachments.length]);"),an("}else{",sr,".bindFramebuffer(",Rf,",null);"),ki&&an(Er,".drawBuffersWEBGL(",bn,");"),an("}",ar,".cur=",Tr,";"),Or||an("}")}function cc(Sn,an,nr){var Or=Sn.shared,Rr=Or.gl,sr=Sn.current,ar=Sn.next,Er=Or.current,Mn=Or.next,Jn=Sn.cond(Er,".dirty");Li.forEach(function(bn){var Tr=wi(bn);if(!(Tr in nr.state)){var Dr,li;if(Tr in ar){Dr=ar[Tr],li=sr[Tr];var Wr=Me(qr[Tr].length,function(ji){return Jn.def(Dr,"[",ji,"]")});Jn(Sn.cond(Wr.map(function(ji,va){return ji+"!=="+li+"["+va+"]"}).join("||")).then(Rr,".",Pi[Tr],"(",Wr,");",Wr.map(function(ji,va){return li+"["+va+"]="+ji}).join(";"),";"))}else{Dr=Jn.def(Mn,".",Tr);var ii=Sn.cond(Dr,"!==",Er,".",Tr);Jn(ii),Tr in mi?ii(Sn.cond(Dr).then(Rr,".enable(",mi[Tr],");").else(Rr,".disable(",mi[Tr],");"),Er,".",Tr,"=",Dr,";"):ii(Rr,".",Pi[Tr],"(",Dr,");",Er,".",Tr,"=",Dr,";")}}}),Object.keys(nr.state).length===0&&Jn(Er,".dirty=false;"),an(Jn)}function Io(Sn,an,nr,Or){var Rr=Sn.shared,sr=Sn.current,ar=Rr.current,Er=Rr.gl;uf(Object.keys(nr)).forEach(function(Mn){var Jn=nr[Mn];if(!(Or&&!Or(Jn))){var bn=Jn.append(Sn,an);if(mi[Mn]){var Tr=mi[Mn];Nc(Jn)?bn?an(Er,".enable(",Tr,");"):an(Er,".disable(",Tr,");"):an(Sn.cond(bn).then(Er,".enable(",Tr,");").else(Er,".disable(",Tr,");")),an(ar,".",Mn,"=",bn,";")}else if(Oo(bn)){var Dr=sr[Mn];an(Er,".",Pi[Mn],"(",bn,");",bn.map(function(li,Wr){return Dr+"["+Wr+"]="+li}).join(";"),";")}else an(Er,".",Pi[Mn],"(",bn,");",ar,".",Mn,"=",bn,";")}})}function Dl(Sn,an){bi&&(Sn.instancing=an.def(Sn.shared.extensions,".angle_instanced_arrays"))}function lo(Sn,an,nr,Or,Rr){var sr=Sn.shared,ar=Sn.stats,Er=sr.current,Mn=sr.timer,Jn=nr.profile;function bn(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Tr,Dr;function li(la){Tr=an.def(),la(Tr,"=",bn(),";"),typeof Rr=="string"?la(ar,".count+=",Rr,";"):la(ar,".count++;"),pi&&(Or?(Dr=an.def(),la(Dr,"=",Mn,".getNumPendingQueries();")):la(Mn,".beginQuery(",ar,");"))}function Wr(la){la(ar,".cpuTime+=",bn(),"-",Tr,";"),pi&&(Or?la(Mn,".pushScopeStats(",Dr,",",Mn,".getNumPendingQueries(),",ar,");"):la(Mn,".endQuery();"))}function ii(la){var Ha=an.def(Er,".profile");an(Er,".profile=",la,";"),an.exit(Er,".profile=",Ha,";")}var ji;if(Jn){if(Nc(Jn)){Jn.enable?(li(an),Wr(an.exit),ii("true")):ii("false");return}ji=Jn.append(Sn,an),ii(ji)}else ji=an.def(Er,".profile");var va=Sn.block();li(va),an("if(",ji,"){",va,"}");var Ro=Sn.block();Wr(Ro),an.exit("if(",ji,"){",Ro,"}")}function Jl(Sn,an,nr,Or,Rr){var sr=Sn.shared;function ar(Mn){switch(Mn){case Wn:case Ci:case no:return 2;case ir:case Ji:case $a:return 3;case dr:case fa:case Vo:return 4;default:return 1}}function Er(Mn,Jn,bn){var Tr=sr.gl,Dr=an.def(Mn,".location"),li=an.def(sr.attributes,"[",Dr,"]"),Wr=bn.state,ii=bn.buffer,ji=[bn.x,bn.y,bn.z,bn.w],va=["buffer","normalized","offset","stride"];function Ro(){an("if(!",li,".buffer){",Tr,".enableVertexAttribArray(",Dr,");}");var Ha=bn.type,bo;if(bn.size?bo=an.def(bn.size,"||",Jn):bo=Jn,an("if(",li,".type!==",Ha,"||",li,".size!==",bo,"||",va.map(function(jl){return li+"."+jl+"!=="+bn[jl]}).join("||"),"){",Tr,".bindBuffer(",Wc,",",ii,".buffer);",Tr,".vertexAttribPointer(",[Dr,bo,Ha,bn.normalized,bn.stride,bn.offset],");",li,".type=",Ha,";",li,".size=",bo,";",va.map(function(jl){return li+"."+jl+"="+bn[jl]+";"}).join(""),"}"),bi){var Ds=bn.divisor;an("if(",li,".divisor!==",Ds,"){",Sn.instancing,".vertexAttribDivisorANGLE(",[Dr,Ds],");",li,".divisor=",Ds,";}")}}function la(){an("if(",li,".buffer){",Tr,".disableVertexAttribArray(",Dr,");",li,".buffer=null;","}if(",Vr.map(function(Ha,bo){return li+"."+Ha+"!=="+ji[bo]}).join("||"),"){",Tr,".vertexAttrib4f(",Dr,",",ji,");",Vr.map(function(Ha,bo){return li+"."+Ha+"="+ji[bo]+";"}).join(""),"}")}Wr===Di?Ro():Wr===Wi?la():(an("if(",Wr,"===",Di,"){"),Ro(),an("}else{"),la(),an("}"))}Or.forEach(function(Mn){var Jn=Mn.name,bn=nr.attributes[Jn],Tr;if(bn){if(!Rr(bn))return;Tr=bn.append(Sn,an)}else{if(!Rr(ff))return;var Dr=Sn.scopeAttrib(Jn);X.optional(function(){Sn.assert(an,Dr+".state","missing attribute "+Jn)}),Tr={},Object.keys(new Cr).forEach(function(li){Tr[li]=an.def(Dr,".",li)})}Er(Sn.link(Mn),ar(Mn.info.type),Tr)})}function Vs(Sn,an,nr,Or,Rr){for(var sr=Sn.shared,ar=sr.gl,Er,Mn=0;Mn<Or.length;++Mn){var Jn=Or[Mn],bn=Jn.name,Tr=Jn.info.type,Dr=nr.uniforms[bn],li=Sn.link(Jn),Wr=li+".location",ii;if(Dr){if(!Rr(Dr))continue;if(Nc(Dr)){var ji=Dr.value;if(X.command(ji!==null&&typeof ji!="undefined",'missing uniform "'+bn+'"',Sn.commandStr),Tr===Vu||Tr===gu){X.command(typeof ji=="function"&&(Tr===Vu&&(ji._reglType==="texture2d"||ji._reglType==="framebuffer")||Tr===gu&&(ji._reglType==="textureCube"||ji._reglType==="framebufferCube")),"invalid texture for uniform "+bn,Sn.commandStr);var va=Sn.link(ji._texture||ji.color[0]._texture);an(ar,".uniform1i(",Wr,",",va+".bind());"),an.exit(va,".unbind();")}else if(Tr===To||Tr===pu||Tr===lu){X.optional(function(){X.command(Oo(ji),"invalid matrix for uniform "+bn,Sn.commandStr),X.command(Tr===To&&ji.length===4||Tr===pu&&ji.length===9||Tr===lu&&ji.length===16,"invalid length for matrix uniform "+bn,Sn.commandStr)});var Ro=Sn.global.def("new Float32Array(["+Array.prototype.slice.call(ji)+"])"),la=2;Tr===pu?la=3:Tr===lu&&(la=4),an(ar,".uniformMatrix",la,"fv(",Wr,",false,",Ro,");")}else{switch(Tr){case un:X.commandType(ji,"number","uniform "+bn,Sn.commandStr),Er="1f";break;case Wn:X.command(Oo(ji)&&ji.length===2,"uniform "+bn,Sn.commandStr),Er="2f";break;case ir:X.command(Oo(ji)&&ji.length===3,"uniform "+bn,Sn.commandStr),Er="3f";break;case dr:X.command(Oo(ji)&&ji.length===4,"uniform "+bn,Sn.commandStr),Er="4f";break;case na:X.commandType(ji,"boolean","uniform "+bn,Sn.commandStr),Er="1i";break;case ti:X.commandType(ji,"number","uniform "+bn,Sn.commandStr),Er="1i";break;case no:X.command(Oo(ji)&&ji.length===2,"uniform "+bn,Sn.commandStr),Er="2i";break;case Ci:X.command(Oo(ji)&&ji.length===2,"uniform "+bn,Sn.commandStr),Er="2i";break;case $a:X.command(Oo(ji)&&ji.length===3,"uniform "+bn,Sn.commandStr),Er="3i";break;case Ji:X.command(Oo(ji)&&ji.length===3,"uniform "+bn,Sn.commandStr),Er="3i";break;case Vo:X.command(Oo(ji)&&ji.length===4,"uniform "+bn,Sn.commandStr),Er="4i";break;case fa:X.command(Oo(ji)&&ji.length===4,"uniform "+bn,Sn.commandStr),Er="4i";break}an(ar,".uniform",Er,"(",Wr,",",Oo(ji)?Array.prototype.slice.call(ji):ji,");")}continue}else ii=Dr.append(Sn,an)}else{if(!Rr(ff))continue;ii=an.def(sr.uniforms,"[",be.id(bn),"]")}Tr===Vu?(X(!Array.isArray(ii),"must specify a scalar prop for textures"),an("if(",ii,"&&",ii,'._reglType==="framebuffer"){',ii,"=",ii,".color[0];","}")):Tr===gu&&(X(!Array.isArray(ii),"must specify a scalar prop for cube maps"),an("if(",ii,"&&",ii,'._reglType==="framebufferCube"){',ii,"=",ii,".color[0];","}")),X.optional(function(){function zc(Jc,nh){Sn.assert(an,Jc,'bad data or missing for uniform "'+bn+'".  '+nh)}function dh(Jc){X(!Array.isArray(ii),"must not specify an array type for uniform"),zc("typeof "+ii+'==="'+Jc+'"',"invalid type, expected "+Jc)}function Xc(Jc,nh){Array.isArray(ii)?X(ii.length===Jc,"must have length "+Jc):zc(sr.isArrayLike+"("+ii+")&&"+ii+".length==="+Jc,"invalid vector, should have length "+Jc,Sn.commandStr)}function bh(Jc){X(!Array.isArray(ii),"must not specify a value type"),zc("typeof "+ii+'==="function"&&'+ii+'._reglType==="texture'+(Jc===Kc?"2d":"Cube")+'"',"invalid texture type",Sn.commandStr)}switch(Tr){case ti:dh("number");break;case Ci:Xc(2,"number");break;case Ji:Xc(3,"number");break;case fa:Xc(4,"number");break;case un:dh("number");break;case Wn:Xc(2,"number");break;case ir:Xc(3,"number");break;case dr:Xc(4,"number");break;case na:dh("boolean");break;case no:Xc(2,"boolean");break;case $a:Xc(3,"boolean");break;case Vo:Xc(4,"boolean");break;case To:Xc(4,"number");break;case pu:Xc(9,"number");break;case lu:Xc(16,"number");break;case Vu:bh(Kc);break;case gu:bh(Mf);break}});var Ha=1;switch(Tr){case Vu:case gu:var bo=an.def(ii,"._texture");an(ar,".uniform1i(",Wr,",",bo,".bind());"),an.exit(bo,".unbind();");continue;case ti:case na:Er="1i";break;case Ci:case no:Er="2i",Ha=2;break;case Ji:case $a:Er="3i",Ha=3;break;case fa:case Vo:Er="4i",Ha=4;break;case un:Er="1f";break;case Wn:Er="2f",Ha=2;break;case ir:Er="3f",Ha=3;break;case dr:Er="4f",Ha=4;break;case To:Er="Matrix2fv";break;case pu:Er="Matrix3fv";break;case lu:Er="Matrix4fv";break}if(an(ar,".uniform",Er,"(",Wr,","),Er.charAt(0)==="M"){var Ds=Math.pow(Tr-To+2,2),jl=Sn.global.def("new Float32Array(",Ds,")");Array.isArray(ii)?an("false,(",Me(Ds,function(zc){return jl+"["+zc+"]="+ii[zc]}),",",jl,")"):an("false,(Array.isArray(",ii,")||",ii," instanceof Float32Array)?",ii,":(",Me(Ds,function(zc){return jl+"["+zc+"]="+ii+"["+zc+"]"}),",",jl,")")}else Ha>1?an(Me(Ha,function(zc){return Array.isArray(ii)?ii[zc]:ii+"["+zc+"]"})):(X(!Array.isArray(ii),"uniform value must not be an array"),an(ii));an(");")}}function Wa(Sn,an,nr,Or){var Rr=Sn.shared,sr=Rr.gl,ar=Rr.draw,Er=Or.draw;function Mn(){var bo=Er.elements,Ds,jl=an;return bo?((bo.contextDep&&Or.contextDynamic||bo.propDep)&&(jl=nr),Ds=bo.append(Sn,jl)):Ds=jl.def(ar,".",fl),Ds&&jl("if("+Ds+")"+sr+".bindBuffer("+$f+","+Ds+".buffer.buffer);"),Ds}function Jn(){var bo=Er.count,Ds,jl=an;return bo?((bo.contextDep&&Or.contextDynamic||bo.propDep)&&(jl=nr),Ds=bo.append(Sn,jl),X.optional(function(){bo.MISSING&&Sn.assert(an,"false","missing vertex count"),bo.DYNAMIC&&Sn.assert(jl,Ds+">=0","missing vertex count")})):(Ds=jl.def(ar,".",Gc),X.optional(function(){Sn.assert(jl,Ds+">=0","missing vertex count")})),Ds}var bn=Mn();function Tr(bo){var Ds=Er[bo];return Ds?Ds.contextDep&&Or.contextDynamic||Ds.propDep?Ds.append(Sn,nr):Ds.append(Sn,an):an.def(ar,".",bo)}var Dr=Tr(kl),li=Tr(tf),Wr=Jn();if(typeof Wr=="number"){if(Wr===0)return}else nr("if(",Wr,"){"),nr.exit("}");var ii,ji;bi&&(ii=Tr(Vc),ji=Sn.instancing);var va=bn+".type",Ro=Er.elements&&Nc(Er.elements);function la(){function bo(){nr(ji,".drawElementsInstancedANGLE(",[Dr,Wr,va,li+"<<(("+va+"-"+_i+")>>1)",ii],");")}function Ds(){nr(ji,".drawArraysInstancedANGLE(",[Dr,li,Wr,ii],");")}bn?Ro?bo():(nr("if(",bn,"){"),bo(),nr("}else{"),Ds(),nr("}")):Ds()}function Ha(){function bo(){nr(sr+".drawElements("+[Dr,Wr,va,li+"<<(("+va+"-"+_i+")>>1)"]+");")}function Ds(){nr(sr+".drawArrays("+[Dr,li,Wr]+");")}bn?Ro?bo():(nr("if(",bn,"){"),bo(),nr("}else{"),Ds(),nr("}")):Ds()}bi&&(typeof ii!="number"||ii>=0)?typeof ii=="string"?(nr("if(",ii,">0){"),la(),nr("}else if(",ii,"<0){"),Ha(),nr("}")):la():Ha()}function _o(Sn,an,nr,Or,Rr){var sr=ia(),ar=sr.proc("body",Rr);return X.optional(function(){sr.commandStr=an.commandStr,sr.command=sr.link(an.commandStr)}),bi&&(sr.instancing=ar.def(sr.shared.extensions,".angle_instanced_arrays")),Sn(sr,ar,nr,Or),sr.compile().body}function ns(Sn,an,nr,Or){Dl(Sn,an),nr.useVAO?nr.drawVAO?an(Sn.shared.vao,".setVAO(",nr.drawVAO.append(Sn,an),");"):an(Sn.shared.vao,".setVAO(",Sn.shared.vao,".targetVAO);"):(an(Sn.shared.vao,".setVAO(null);"),Jl(Sn,an,nr,Or.attributes,function(){return!0})),Vs(Sn,an,nr,Or.uniforms,function(){return!0}),Wa(Sn,an,an,nr)}function fc(Sn,an){var nr=Sn.proc("draw",1);Dl(Sn,nr),Cs(Sn,nr,an.context),nc(Sn,nr,an.framebuffer),cc(Sn,nr,an),Io(Sn,nr,an.state),lo(Sn,nr,an,!1,!0);var Or=an.shader.progVar.append(Sn,nr);if(nr(Sn.shared.gl,".useProgram(",Or,".program);"),an.shader.program)ns(Sn,nr,an,an.shader.program);else{nr(Sn.shared.vao,".setVAO(null);");var Rr=Sn.global.def("{}"),sr=nr.def(Or,".id"),ar=nr.def(Rr,"[",sr,"]");nr(Sn.cond(ar).then(ar,".call(this,a0);").else(ar,"=",Rr,"[",sr,"]=",Sn.link(function(Er){return _o(ns,Sn,an,Er,1)}),"(",Or,");",ar,".call(this,a0);"))}Object.keys(an.state).length>0&&nr(Sn.shared.current,".dirty=true;")}function gc(Sn,an,nr,Or){Sn.batchId="a1",Dl(Sn,an);function Rr(){return!0}Jl(Sn,an,nr,Or.attributes,Rr),Vs(Sn,an,nr,Or.uniforms,Rr),Wa(Sn,an,an,nr)}function lf(Sn,an,nr,Or){Dl(Sn,an);var Rr=nr.contextDep,sr=an.def(),ar="a0",Er="a1",Mn=an.def();Sn.shared.props=Mn,Sn.batchId=sr;var Jn=Sn.scope(),bn=Sn.scope();an(Jn.entry,"for(",sr,"=0;",sr,"<",Er,";++",sr,"){",Mn,"=",ar,"[",sr,"];",bn,"}",Jn.exit);function Tr(va){return va.contextDep&&Rr||va.propDep}function Dr(va){return!Tr(va)}if(nr.needsContext&&Cs(Sn,bn,nr.context),nr.needsFramebuffer&&nc(Sn,bn,nr.framebuffer),Io(Sn,bn,nr.state,Tr),nr.profile&&Tr(nr.profile)&&lo(Sn,bn,nr,!1,!0),Or)nr.useVAO?nr.drawVAO?Tr(nr.drawVAO)?bn(Sn.shared.vao,".setVAO(",nr.drawVAO.append(Sn,bn),");"):Jn(Sn.shared.vao,".setVAO(",nr.drawVAO.append(Sn,Jn),");"):Jn(Sn.shared.vao,".setVAO(",Sn.shared.vao,".targetVAO);"):(Jn(Sn.shared.vao,".setVAO(null);"),Jl(Sn,Jn,nr,Or.attributes,Dr),Jl(Sn,bn,nr,Or.attributes,Tr)),Vs(Sn,Jn,nr,Or.uniforms,Dr),Vs(Sn,bn,nr,Or.uniforms,Tr),Wa(Sn,Jn,bn,nr);else{var li=Sn.global.def("{}"),Wr=nr.shader.progVar.append(Sn,bn),ii=bn.def(Wr,".id"),ji=bn.def(li,"[",ii,"]");bn(Sn.shared.gl,".useProgram(",Wr,".program);","if(!",ji,"){",ji,"=",li,"[",ii,"]=",Sn.link(function(va){return _o(gc,Sn,nr,va,2)}),"(",Wr,");}",ji,".call(this,a0[",sr,"],",sr,");")}}function Ln(Sn,an){var nr=Sn.proc("batch",2);Sn.batchId="0",Dl(Sn,nr);var Or=!1,Rr=!0;Object.keys(an.context).forEach(function(li){Or=Or||an.context[li].propDep}),Or||(Cs(Sn,nr,an.context),Rr=!1);var sr=an.framebuffer,ar=!1;sr?(sr.propDep?Or=ar=!0:sr.contextDep&&Or&&(ar=!0),ar||nc(Sn,nr,sr)):nc(Sn,nr,null),an.state.viewport&&an.state.viewport.propDep&&(Or=!0);function Er(li){return li.contextDep&&Or||li.propDep}cc(Sn,nr,an),Io(Sn,nr,an.state,function(li){return!Er(li)}),(!an.profile||!Er(an.profile))&&lo(Sn,nr,an,!1,"a1"),an.contextDep=Or,an.needsContext=Rr,an.needsFramebuffer=ar;var Mn=an.shader.progVar;if(Mn.contextDep&&Or||Mn.propDep)lf(Sn,nr,an,null);else{var Jn=Mn.append(Sn,nr);if(nr(Sn.shared.gl,".useProgram(",Jn,".program);"),an.shader.program)lf(Sn,nr,an,an.shader.program);else{nr(Sn.shared.vao,".setVAO(null);");var bn=Sn.global.def("{}"),Tr=nr.def(Jn,".id"),Dr=nr.def(bn,"[",Tr,"]");nr(Sn.cond(Dr).then(Dr,".call(this,a0,a1);").else(Dr,"=",bn,"[",Tr,"]=",Sn.link(function(li){return _o(lf,Sn,an,li,2)}),"(",Jn,");",Dr,".call(this,a0,a1);"))}}Object.keys(an.state).length>0&&nr(Sn.shared.current,".dirty=true;")}function Hr(Sn,an){var nr=Sn.proc("scope",3);Sn.batchId="a2";var Or=Sn.shared,Rr=Or.current;Cs(Sn,nr,an.context),an.framebuffer&&an.framebuffer.append(Sn,nr),uf(Object.keys(an.state)).forEach(function(ar){var Er=an.state[ar],Mn=Er.append(Sn,nr);Oo(Mn)?Mn.forEach(function(Jn,bn){nr.set(Sn.next[ar],"["+bn+"]",Jn)}):nr.set(Or.next,"."+ar,Mn)}),lo(Sn,nr,an,!0,!0),[fl,tf,Gc,Vc,kl].forEach(function(ar){var Er=an.draw[ar];!Er||nr.set(Or.draw,"."+ar,""+Er.append(Sn,nr))}),Object.keys(an.uniforms).forEach(function(ar){var Er=an.uniforms[ar].append(Sn,nr);Array.isArray(Er)&&(Er="["+Er.join()+"]"),nr.set(Or.uniforms,"["+be.id(ar)+"]",Er)}),Object.keys(an.attributes).forEach(function(ar){var Er=an.attributes[ar].append(Sn,nr),Mn=Sn.scopeAttrib(ar);Object.keys(new Cr).forEach(function(Jn){nr.set(Mn,"."+Jn,Er[Jn])})}),an.scopeVAO&&nr.set(Or.vao,".targetVAO",an.scopeVAO.append(Sn,nr));function sr(ar){var Er=an.shader[ar];Er&&nr.set(Or.shader,"."+ar,Er.append(Sn,nr))}sr(cl),sr(Ll),Object.keys(an.state).length>0&&(nr(Rr,".dirty=true;"),nr.exit(Rr,".dirty=true;")),nr("a1(",Sn.shared.context,",a0,",Sn.batchId,");")}function Ur(Sn){if(!(typeof Sn!="object"||Oo(Sn))){for(var an=Object.keys(Sn),nr=0;nr<an.length;++nr)if(We.isDynamic(Sn[an[nr]]))return!0;return!1}}function Qi(Sn,an,nr){var Or=an.static[nr];if(!Or||!Ur(Or))return;var Rr=Sn.global,sr=Object.keys(Or),ar=!1,Er=!1,Mn=!1,Jn=Sn.global.def("{}");sr.forEach(function(Tr){var Dr=Or[Tr];if(We.isDynamic(Dr)){typeof Dr=="function"&&(Dr=Or[Tr]=We.unbox(Dr));var li=Fc(Dr,null);ar=ar||li.thisDep,Mn=Mn||li.propDep,Er=Er||li.contextDep}else{switch(Rr(Jn,".",Tr,"="),typeof Dr){case"number":Rr(Dr);break;case"string":Rr('"',Dr,'"');break;case"object":Array.isArray(Dr)&&Rr("[",Dr.join(),"]");break;default:Rr(Sn.link(Dr));break}Rr(";")}});function bn(Tr,Dr){sr.forEach(function(li){var Wr=Or[li];if(!!We.isDynamic(Wr)){var ii=Tr.invoke(Dr,Wr);Dr(Jn,".",li,"=",ii,";")}})}an.dynamic[nr]=new We.DynamicVariable(Ma,{thisDep:ar,contextDep:Er,propDep:Mn,ref:Jn,append:bn}),delete an.static[nr]}function Lo(Sn,an,nr,Or,Rr){var sr=ia();sr.stats=sr.link(Rr),Object.keys(an.static).forEach(function(Er){Qi(sr,an,Er)}),gf.forEach(function(Er){Qi(sr,Sn,Er)});var ar=Rl(Sn,an,nr,Or,sr);return fc(sr,ar),Hr(sr,ar),Ln(sr,ar),E(sr.compile(),{destroy:function(){ar.shader.program.destroy()}})}return{next:da,current:qr,procs:function(){var Sn=ia(),an=Sn.proc("poll"),nr=Sn.proc("refresh"),Or=Sn.block();an(Or),nr(Or);var Rr=Sn.shared,sr=Rr.gl,ar=Rr.next,Er=Rr.current;Or(Er,".dirty=false;"),nc(Sn,an),nc(Sn,nr,null,!0);var Mn;bi&&(Mn=Sn.link(bi)),Xe.oes_vertex_array_object&&nr(Sn.link(Xe.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Jn=0;Jn<zn.maxAttributes;++Jn){var bn=nr.def(Rr.attributes,"[",Jn,"]"),Tr=Sn.cond(bn,".buffer");Tr.then(sr,".enableVertexAttribArray(",Jn,");",sr,".bindBuffer(",Wc,",",bn,".buffer.buffer);",sr,".vertexAttribPointer(",Jn,",",bn,".size,",bn,".type,",bn,".normalized,",bn,".stride,",bn,".offset);").else(sr,".disableVertexAttribArray(",Jn,");",sr,".vertexAttrib4f(",Jn,",",bn,".x,",bn,".y,",bn,".z,",bn,".w);",bn,".buffer=null;"),nr(Tr),bi&&nr(Mn,".vertexAttribDivisorANGLE(",Jn,",",bn,".divisor);")}return nr(Sn.shared.vao,".currentVAO=null;",Sn.shared.vao,".setVAO(",Sn.shared.vao,".targetVAO);"),Object.keys(mi).forEach(function(Dr){var li=mi[Dr],Wr=Or.def(ar,".",Dr),ii=Sn.block();ii("if(",Wr,"){",sr,".enable(",li,")}else{",sr,".disable(",li,")}",Er,".",Dr,"=",Wr,";"),nr(ii),an("if(",Wr,"!==",Er,".",Dr,"){",ii,"}")}),Object.keys(Pi).forEach(function(Dr){var li=Pi[Dr],Wr=qr[Dr],ii,ji,va=Sn.block();if(va(sr,".",li,"("),Oo(Wr)){var Ro=Wr.length;ii=Sn.global.def(ar,".",Dr),ji=Sn.global.def(Er,".",Dr),va(Me(Ro,function(la){return ii+"["+la+"]"}),");",Me(Ro,function(la){return ji+"["+la+"]="+ii+"["+la+"];"}).join("")),an("if(",Me(Ro,function(la){return ii+"["+la+"]!=="+ji+"["+la+"]"}).join("||"),"){",va,"}")}else ii=Or.def(ar,".",Dr),ji=Or.def(Er,".",Dr),va(ii,");",Er,".",Dr,"=",ii,";"),an("if(",ii,"!==",ji,"){",va,"}");nr(va)}),Sn.compile()}(),compile:Lo}}function Hf(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var th=34918,pc=34919,hf=35007,eh=function(be,Xe){if(!Xe.ext_disjoint_timer_query)return null;var zn=[];function lr(){return zn.pop()||Xe.ext_disjoint_timer_query.createQueryEXT()}function vr(ki){zn.push(ki)}var Qn=[];function Jr(ki){var qr=lr();Xe.ext_disjoint_timer_query.beginQueryEXT(hf,qr),Qn.push(qr),hi(Qn.length-1,Qn.length,ki)}function $r(){Xe.ext_disjoint_timer_query.endQueryEXT(hf)}function ri(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var ui=[];function xi(){return ui.pop()||new ri}function Ti(ki){ui.push(ki)}var pi=[];function hi(ki,qr,da){var Li=xi();Li.startQueryIndex=ki,Li.endQueryIndex=qr,Li.sum=0,Li.stats=da,pi.push(Li)}var Cr=[],Lr=[];function bi(){var ki,qr,da=Qn.length;if(da!==0){Lr.length=Math.max(Lr.length,da+1),Cr.length=Math.max(Cr.length,da+1),Cr[0]=0,Lr[0]=0;var Li=0;for(ki=0,qr=0;qr<Qn.length;++qr){var mi=Qn[qr];Xe.ext_disjoint_timer_query.getQueryObjectEXT(mi,pc)?(Li+=Xe.ext_disjoint_timer_query.getQueryObjectEXT(mi,th),vr(mi)):Qn[ki++]=mi,Cr[qr+1]=Li,Lr[qr+1]=ki}for(Qn.length=ki,ki=0,qr=0;qr<pi.length;++qr){var Pi=pi[qr],wi=Pi.startQueryIndex,ca=Pi.endQueryIndex;Pi.sum+=Cr[ca]-Cr[wi];var Pa=Lr[wi],Bi=Lr[ca];Bi===Pa?(Pi.stats.gpuTime+=Pi.sum/1e6,Ti(Pi)):(Pi.startQueryIndex=Pa,Pi.endQueryIndex=Bi,pi[ki++]=Pi)}pi.length=ki}}return{beginQuery:Jr,endQuery:$r,pushScopeStats:hi,update:bi,getNumPendingQueries:function(){return Qn.length},clear:function(){zn.push.apply(zn,Qn);for(var qr=0;qr<zn.length;qr++)Xe.ext_disjoint_timer_query.deleteQueryEXT(zn[qr]);Qn.length=0,zn.length=0},restore:function(){Qn.length=0,zn.length=0}}},jt=16384,yt=256,K=1024,pt=34962,It="webglcontextlost",ie="webglcontextrestored",ze=1,yn=2,pn=3;function Tn(ce,be){for(var Xe=0;Xe<ce.length;++Xe)if(ce[Xe]===be)return Xe;return-1}function Nr(ce){var be=di(ce);if(!be)return null;var Xe=be.gl,zn=Xe.getContextAttributes(),lr=Xe.isContextLost(),vr=Ce(Xe,be);if(!vr)return null;var Qn=er(),Jr=Hf(),$r=vr.extensions,ri=eh(Xe,$r),ui=wn(),xi=Xe.drawingBufferWidth,Ti=Xe.drawingBufferHeight,pi={tick:0,time:0,viewportWidth:xi,viewportHeight:Ti,framebufferWidth:xi,framebufferHeight:Ti,drawingBufferWidth:xi,drawingBufferHeight:Ti,pixelRatio:be.pixelRatio},hi={},Cr={elements:null,primitive:4,count:-1,offset:0,instances:-1},Lr=Ne(Xe,$r),bi=za(Xe,Jr,be,qr),ki=Zt(Xe,$r,Lr,Jr,bi);function qr(Wa){return ki.destroyBuffer(Wa)}var da=eu(Xe,$r,bi,Jr),Li=Ae(Xe,Qn,Jr,be),mi=Kt(Xe,$r,Lr,function(){ca.procs.poll()},pi,Jr,be),Pi=fn(Xe,$r,Lr,Jr,be),wi=st(Xe,$r,Lr,mi,Pi,Jr),ca=Tf(Xe,Qn,$r,Lr,bi,da,mi,wi,hi,ki,Li,Cr,pi,ri,be),Pa=Un(Xe,wi,ca.procs.poll,pi,zn,$r,Lr),Bi=ca.next,Ai=Xe.canvas,yi=[],ia=[],pa=[],qi=[be.onDestroy],vo=null;function xo(){if(yi.length===0){ri&&ri.update(),vo=null;return}vo=Ye.next(xo),Io();for(var Wa=yi.length-1;Wa>=0;--Wa){var _o=yi[Wa];_o&&_o(pi,null,0)}Xe.flush(),ri&&ri.update()}function Ao(){!vo&&yi.length>0&&(vo=Ye.next(xo))}function Zo(){vo&&(Ye.cancel(xo),vo=null)}function Vl(Wa){Wa.preventDefault(),lr=!0,Zo(),ia.forEach(function(_o){_o()})}function Xl(Wa){Xe.getError(),lr=!1,vr.restore(),Li.restore(),bi.restore(),mi.restore(),Pi.restore(),wi.restore(),ki.restore(),ri&&ri.restore(),ca.procs.refresh(),Ao(),pa.forEach(function(_o){_o()})}Ai&&(Ai.addEventListener(It,Vl,!1),Ai.addEventListener(ie,Xl,!1));function Wo(){yi.length=0,Zo(),Ai&&(Ai.removeEventListener(It,Vl),Ai.removeEventListener(ie,Xl)),Li.clear(),wi.clear(),Pi.clear(),mi.clear(),da.clear(),bi.clear(),ki.clear(),ri&&ri.clear(),qi.forEach(function(Wa){Wa()})}function Au(Wa){X(!!Wa,"invalid args to regl({...})"),X.type(Wa,"object","invalid args to regl({...})");function _o(Rr){var sr=E({},Rr);delete sr.uniforms,delete sr.attributes,delete sr.context,delete sr.vao,"stencil"in sr&&sr.stencil.op&&(sr.stencil.opBack=sr.stencil.opFront=sr.stencil.op,delete sr.stencil.op);function ar(Er){if(Er in sr){var Mn=sr[Er];delete sr[Er],Object.keys(Mn).forEach(function(Jn){sr[Er+"."+Jn]=Mn[Jn]})}}return ar("blend"),ar("depth"),ar("cull"),ar("stencil"),ar("polygonOffset"),ar("scissor"),ar("sample"),"vao"in Rr&&(sr.vao=Rr.vao),sr}function ns(Rr,sr){var ar={},Er={};return Object.keys(Rr).forEach(function(Mn){var Jn=Rr[Mn];if(We.isDynamic(Jn)){Er[Mn]=We.unbox(Jn,Mn);return}else if(sr&&Array.isArray(Jn)){for(var bn=0;bn<Jn.length;++bn)if(We.isDynamic(Jn[bn])){Er[Mn]=We.unbox(Jn,Mn);return}}ar[Mn]=Jn}),{dynamic:Er,static:ar}}var fc=ns(Wa.context||{},!0),gc=ns(Wa.uniforms||{},!0),lf=ns(Wa.attributes||{},!1),Ln=ns(_o(Wa),!1),Hr={gpuTime:0,cpuTime:0,count:0},Ur=ca.compile(Ln,lf,gc,fc,Hr),Qi=Ur.draw,Lo=Ur.batch,Sn=Ur.scope,an=[];function nr(Rr){for(;an.length<Rr;)an.push(null);return an}function Or(Rr,sr){var ar;if(lr&&X.raise("context lost"),typeof Rr=="function")return Sn.call(this,null,Rr,0);if(typeof sr=="function")if(typeof Rr=="number")for(ar=0;ar<Rr;++ar)Sn.call(this,null,sr,ar);else if(Array.isArray(Rr))for(ar=0;ar<Rr.length;++ar)Sn.call(this,Rr[ar],sr,ar);else return Sn.call(this,Rr,sr,0);else if(typeof Rr=="number"){if(Rr>0)return Lo.call(this,nr(Rr|0),Rr|0)}else if(Array.isArray(Rr)){if(Rr.length)return Lo.call(this,Rr,Rr.length)}else return Qi.call(this,Rr)}return E(Or,{stats:Hr,destroy:function(){Ur.destroy()}})}var Cu=wi.setFBO=Au({framebuffer:We.define.call(null,ze,"framebuffer")});function Rl(Wa,_o){var ns=0;ca.procs.poll();var fc=_o.color;fc&&(Xe.clearColor(+fc[0]||0,+fc[1]||0,+fc[2]||0,+fc[3]||0),ns|=jt),"depth"in _o&&(Xe.clearDepth(+_o.depth),ns|=yt),"stencil"in _o&&(Xe.clearStencil(_o.stencil|0),ns|=K),X(!!ns,"called regl.clear with no buffer specified"),Xe.clear(ns)}function Cs(Wa){if(X(typeof Wa=="object"&&Wa,"regl.clear() takes an object as input"),"framebuffer"in Wa)if(Wa.framebuffer&&Wa.framebuffer_reglType==="framebufferCube")for(var _o=0;_o<6;++_o)Cu(E({framebuffer:Wa.framebuffer.faces[_o]},Wa),Rl);else Cu(Wa,Rl);else Rl(null,Wa)}function nc(Wa){X.type(Wa,"function","regl.frame() callback must be a function"),yi.push(Wa);function _o(){var ns=Tn(yi,Wa);X(ns>=0,"cannot cancel a frame twice");function fc(){var gc=Tn(yi,fc);yi[gc]=yi[yi.length-1],yi.length-=1,yi.length<=0&&Zo()}yi[ns]=fc}return Ao(),{cancel:_o}}function cc(){var Wa=Bi.viewport,_o=Bi.scissor_box;Wa[0]=Wa[1]=_o[0]=_o[1]=0,pi.viewportWidth=pi.framebufferWidth=pi.drawingBufferWidth=Wa[2]=_o[2]=Xe.drawingBufferWidth,pi.viewportHeight=pi.framebufferHeight=pi.drawingBufferHeight=Wa[3]=_o[3]=Xe.drawingBufferHeight}function Io(){pi.tick+=1,pi.time=lo(),cc(),ca.procs.poll()}function Dl(){mi.refresh(),cc(),ca.procs.refresh(),ri&&ri.update()}function lo(){return(wn()-ui)/1e3}Dl();function Jl(Wa,_o){X.type(_o,"function","listener callback must be a function");var ns;switch(Wa){case"frame":return nc(_o);case"lost":ns=ia;break;case"restore":ns=pa;break;case"destroy":ns=qi;break;default:X.raise("invalid event, must be one of frame,lost,restore,destroy")}return ns.push(_o),{cancel:function(){for(var gc=0;gc<ns.length;++gc)if(ns[gc]===_o){ns[gc]=ns[ns.length-1],ns.pop();return}}}}var Vs=E(Au,{clear:Cs,prop:We.define.bind(null,ze),context:We.define.bind(null,yn),this:We.define.bind(null,pn),draw:Au({}),buffer:function(_o){return bi.create(_o,pt,!1,!1)},elements:function(_o){return da.create(_o,!1)},texture:mi.create2D,cube:mi.createCube,renderbuffer:Pi.create,framebuffer:wi.create,framebufferCube:wi.createCube,vao:ki.createVAO,attributes:zn,frame:nc,on:Jl,limits:Lr,hasExtension:function(_o){return Lr.extensions.indexOf(_o.toLowerCase())>=0},read:Pa,destroy:Wo,_gl:Xe,_refresh:Dl,poll:function(){Io(),ri&&ri.update()},now:lo,stats:Jr});return be.onDone(null,Vs),Vs}return Nr})},fdMe:function(Se,ct,R){"use strict";R.d(ct,"a",function(){return V});function V(E,T){var e=T.callback;return e&&(E.dataArray=E.dataArray.map(e)),E}},fhzG:function(Se,ct,R){"use strict";var V=R("q1tI"),E=R("lT4e");if(typeof V=="undefined")throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var T=new V.Component().updater;Se.exports=E(V.Component,V.isValidElement,T)},fo6e:function(Se,ct){var R=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function V(E){return R.test(E)}Se.exports=V},g4R6:function(Se,ct){function R(V,E,T){return V===V&&(T!==void 0&&(V=V<=T?V:T),E!==void 0&&(V=V>=E?V:E)),V}Se.exports=R},gFfm:function(Se,ct){function R(V,E){for(var T=-1,e=V==null?0:V.length;++T<e&&E(V[T],T,V)!==!1;);return V}Se.exports=R},gMG2:function(Se,ct,R){"use strict";R.d(ct,"a",function(){return M});var V={},E={},T=34,e=10,t=13;function u(x){return new Function("d","return {"+x.map(function(y,S){return JSON.stringify(y)+": d["+S+'] || ""'}).join(",")+"}")}function s(x,y){var S=u(x);return function(P,A){return y(S(P),A,x)}}function c(x){var y=Object.create(null),S=[];return x.forEach(function(P){for(var A in P)A in y||S.push(y[A]=A)}),S}function r(x,y){var S=x+"",P=S.length;return P<y?new Array(y-P+1).join(0)+S:S}function h(x){return x<0?"-"+r(-x,6):x>9999?"+"+r(x,6):r(x,4)}function n(x){var y=x.getUTCHours(),S=x.getUTCMinutes(),P=x.getUTCSeconds(),A=x.getUTCMilliseconds();return isNaN(x)?"Invalid Date":h(x.getUTCFullYear(),4)+"-"+r(x.getUTCMonth()+1,2)+"-"+r(x.getUTCDate(),2)+(A?"T"+r(y,2)+":"+r(S,2)+":"+r(P,2)+"."+r(A,3)+"Z":P?"T"+r(y,2)+":"+r(S,2)+":"+r(P,2)+"Z":S||y?"T"+r(y,2)+":"+r(S,2)+"Z":"")}var i=function(x){var y=new RegExp('["'+x+`
\r]`),S=x.charCodeAt(0);function P(U,Y){var J,rt,ft=A(U,function(dt,ut){if(J)return J(dt,ut-1);rt=dt,J=Y?s(dt,Y):u(dt)});return ft.columns=rt||[],ft}function A(U,Y){var J=[],rt=U.length,ft=0,dt=0,ut,Lt=rt<=0,Ft=!1;U.charCodeAt(rt-1)===e&&--rt,U.charCodeAt(rt-1)===t&&--rt;function Ot(){if(Lt)return E;if(Ft)return Ft=!1,V;var xt,At=ft,nt;if(U.charCodeAt(At)===T){for(;ft++<rt&&U.charCodeAt(ft)!==T||U.charCodeAt(++ft)===T;);return(xt=ft)>=rt?Lt=!0:(nt=U.charCodeAt(ft++))===e?Ft=!0:nt===t&&(Ft=!0,U.charCodeAt(ft)===e&&++ft),U.slice(At+1,xt-1).replace(/""/g,'"')}for(;ft<rt;){if((nt=U.charCodeAt(xt=ft++))===e)Ft=!0;else if(nt===t)Ft=!0,U.charCodeAt(ft)===e&&++ft;else if(nt!==S)continue;return U.slice(At,xt)}return Lt=!0,U.slice(At,rt)}for(;(ut=Ot())!==E;){for(var St=[];ut!==V&&ut!==E;)St.push(ut),ut=Ot();Y&&(St=Y(St,dt++))==null||J.push(St)}return J}function O(U,Y){return U.map(function(J){return Y.map(function(rt){return G(J[rt])}).join(x)})}function L(U,Y){return Y==null&&(Y=c(U)),[Y.map(G).join(x)].concat(O(U,Y)).join(`
`)}function H(U,Y){return Y==null&&(Y=c(U)),O(U,Y).join(`
`)}function F(U){return U.map(Z).join(`
`)}function Z(U){return U.map(G).join(x)}function G(U){return U==null?"":U instanceof Date?n(U):y.test(U+="")?'"'+U.replace(/"/g,'""')+'"':U}return{parse:P,parseRows:A,format:L,formatBody:H,formatRows:F,formatRow:Z,formatValue:G}},a=i(","),o=a.parse,l=a.parseRows,f=a.format,v=a.formatBody,b=a.formatRows,g=a.formatRow,m=a.formatValue,_=R("5zYK");function M(x,y){var S=o(x);return Object(_.a)(S,y)}},gQMU:function(Se,ct,R){var V=R("0ZTe"),E=V("toUpperCase");Se.exports=E},gzZq:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.BindingToSyntax=void 0;var V=R("MON2"),E=R("FV85"),T=R("D9lx"),e=R("LKzl"),t=function(){function u(s){this._binding=s}return u.prototype.to=function(s){return this._binding.type=E.BindingTypeEnum.Instance,this._binding.implementationType=s,new T.BindingInWhenOnSyntax(this._binding)},u.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+V.INVALID_TO_SELF_VALUE);var s=this._binding.serviceIdentifier;return this.to(s)},u.prototype.toConstantValue=function(s){return this._binding.type=E.BindingTypeEnum.ConstantValue,this._binding.cache=s,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=E.BindingScopeEnum.Singleton,new e.BindingWhenOnSyntax(this._binding)},u.prototype.toDynamicValue=function(s){return this._binding.type=E.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=s,this._binding.implementationType=null,new T.BindingInWhenOnSyntax(this._binding)},u.prototype.toConstructor=function(s){return this._binding.type=E.BindingTypeEnum.Constructor,this._binding.implementationType=s,this._binding.scope=E.BindingScopeEnum.Singleton,new e.BindingWhenOnSyntax(this._binding)},u.prototype.toFactory=function(s){return this._binding.type=E.BindingTypeEnum.Factory,this._binding.factory=s,this._binding.scope=E.BindingScopeEnum.Singleton,new e.BindingWhenOnSyntax(this._binding)},u.prototype.toFunction=function(s){if(typeof s!="function")throw new Error(V.INVALID_FUNCTION_BINDING);var c=this.toConstantValue(s);return this._binding.type=E.BindingTypeEnum.Function,this._binding.scope=E.BindingScopeEnum.Singleton,c},u.prototype.toAutoFactory=function(s){return this._binding.type=E.BindingTypeEnum.Factory,this._binding.factory=function(c){var r=function(){return c.container.get(s)};return r},this._binding.scope=E.BindingScopeEnum.Singleton,new e.BindingWhenOnSyntax(this._binding)},u.prototype.toProvider=function(s){return this._binding.type=E.BindingTypeEnum.Provider,this._binding.provider=s,this._binding.scope=E.BindingScopeEnum.Singleton,new e.BindingWhenOnSyntax(this._binding)},u.prototype.toService=function(s){this.toDynamicValue(function(c){return c.container.get(s)})},u}();ct.BindingToSyntax=t},h1nZ:function(Se,ct,R){"use strict";var V=R("fX6N");R.d(ct,"container",function(){return V.c}),R.d(ct,"createSceneContainer",function(){return V.b}),R.d(ct,"createLayerContainer",function(){return V.a}),R.d(ct,"lazyInject",function(){return V.d});var E=R("+em5"),T=R("bB6j");R.d(ct,"TYPES",function(){return T.a});var e=R("8/Fi"),t=R("PUg6");R.d(ct,"BlendType",function(){return t.a});var u=R("cZlC");R.d(ct,"AttributeType",function(){return u.a}),R.d(ct,"ScaleTypes",function(){return u.b}),R.d(ct,"StyleScaleType",function(){return u.c});var s=R("O1je"),c=R.n(s);R.o(s,"CameraUniform")&&R.d(ct,"CameraUniform",function(){return s.CameraUniform}),R.o(s,"CityBuildingLayer")&&R.d(ct,"CityBuildingLayer",function(){return s.CityBuildingLayer}),R.o(s,"Control")&&R.d(ct,"Control",function(){return s.Control}),R.o(s,"CoordinateSystem")&&R.d(ct,"CoordinateSystem",function(){return s.CoordinateSystem}),R.o(s,"CoordinateUniform")&&R.d(ct,"CoordinateUniform",function(){return s.CoordinateUniform}),R.o(s,"HeatmapLayer")&&R.d(ct,"HeatmapLayer",function(){return s.HeatmapLayer}),R.o(s,"ImageLayer")&&R.d(ct,"ImageLayer",function(){return s.ImageLayer}),R.o(s,"LineLayer")&&R.d(ct,"LineLayer",function(){return s.LineLayer}),R.o(s,"Logo")&&R.d(ct,"Logo",function(){return s.Logo}),R.o(s,"MapServiceEvent")&&R.d(ct,"MapServiceEvent",function(){return s.MapServiceEvent}),R.o(s,"Marker")&&R.d(ct,"Marker",function(){return s.Marker}),R.o(s,"PointLayer")&&R.d(ct,"PointLayer",function(){return s.PointLayer}),R.o(s,"PolygonLayer")&&R.d(ct,"PolygonLayer",function(){return s.PolygonLayer}),R.o(s,"Popup")&&R.d(ct,"Popup",function(){return s.Popup}),R.o(s,"PositionType")&&R.d(ct,"PositionType",function(){return s.PositionType}),R.o(s,"RasterLayer")&&R.d(ct,"RasterLayer",function(){return s.RasterLayer}),R.o(s,"Scale")&&R.d(ct,"Scale",function(){return s.Scale}),R.o(s,"Scene")&&R.d(ct,"Scene",function(){return s.Scene}),R.o(s,"SceneEventList")&&R.d(ct,"SceneEventList",function(){return s.SceneEventList}),R.o(s,"Zoom")&&R.d(ct,"Zoom",function(){return s.Zoom}),R.o(s,"gl")&&R.d(ct,"gl",function(){return s.gl});var r=R("L56e");R.d(ct,"MapServiceEvent",function(){return r.a});var h=R("HthE");R.d(ct,"CoordinateSystem",function(){return h.a}),R.d(ct,"CoordinateUniform",function(){return h.b});var n=R("/33/"),i=R.n(n);R.o(n,"CameraUniform")&&R.d(ct,"CameraUniform",function(){return n.CameraUniform}),R.o(n,"CityBuildingLayer")&&R.d(ct,"CityBuildingLayer",function(){return n.CityBuildingLayer}),R.o(n,"Control")&&R.d(ct,"Control",function(){return n.Control}),R.o(n,"HeatmapLayer")&&R.d(ct,"HeatmapLayer",function(){return n.HeatmapLayer}),R.o(n,"ImageLayer")&&R.d(ct,"ImageLayer",function(){return n.ImageLayer}),R.o(n,"LineLayer")&&R.d(ct,"LineLayer",function(){return n.LineLayer}),R.o(n,"Logo")&&R.d(ct,"Logo",function(){return n.Logo}),R.o(n,"Marker")&&R.d(ct,"Marker",function(){return n.Marker}),R.o(n,"PointLayer")&&R.d(ct,"PointLayer",function(){return n.PointLayer}),R.o(n,"PolygonLayer")&&R.d(ct,"PolygonLayer",function(){return n.PolygonLayer}),R.o(n,"Popup")&&R.d(ct,"Popup",function(){return n.Popup}),R.o(n,"PositionType")&&R.d(ct,"PositionType",function(){return n.PositionType}),R.o(n,"RasterLayer")&&R.d(ct,"RasterLayer",function(){return n.RasterLayer}),R.o(n,"Scale")&&R.d(ct,"Scale",function(){return n.Scale}),R.o(n,"Scene")&&R.d(ct,"Scene",function(){return n.Scene}),R.o(n,"SceneEventList")&&R.d(ct,"SceneEventList",function(){return n.SceneEventList}),R.o(n,"Zoom")&&R.d(ct,"Zoom",function(){return n.Zoom}),R.o(n,"gl")&&R.d(ct,"gl",function(){return n.gl});var a=R("EfZ0");R.d(ct,"CameraUniform",function(){return a.a});var o=R("riiI"),l=R.n(o);R.o(o,"CityBuildingLayer")&&R.d(ct,"CityBuildingLayer",function(){return o.CityBuildingLayer}),R.o(o,"Control")&&R.d(ct,"Control",function(){return o.Control}),R.o(o,"HeatmapLayer")&&R.d(ct,"HeatmapLayer",function(){return o.HeatmapLayer}),R.o(o,"ImageLayer")&&R.d(ct,"ImageLayer",function(){return o.ImageLayer}),R.o(o,"LineLayer")&&R.d(ct,"LineLayer",function(){return o.LineLayer}),R.o(o,"Logo")&&R.d(ct,"Logo",function(){return o.Logo}),R.o(o,"Marker")&&R.d(ct,"Marker",function(){return o.Marker}),R.o(o,"PointLayer")&&R.d(ct,"PointLayer",function(){return o.PointLayer}),R.o(o,"PolygonLayer")&&R.d(ct,"PolygonLayer",function(){return o.PolygonLayer}),R.o(o,"Popup")&&R.d(ct,"Popup",function(){return o.Popup}),R.o(o,"PositionType")&&R.d(ct,"PositionType",function(){return o.PositionType}),R.o(o,"RasterLayer")&&R.d(ct,"RasterLayer",function(){return o.RasterLayer}),R.o(o,"Scale")&&R.d(ct,"Scale",function(){return o.Scale}),R.o(o,"Scene")&&R.d(ct,"Scene",function(){return o.Scene}),R.o(o,"SceneEventList")&&R.d(ct,"SceneEventList",function(){return o.SceneEventList}),R.o(o,"Zoom")&&R.d(ct,"Zoom",function(){return o.Zoom}),R.o(o,"gl")&&R.d(ct,"gl",function(){return o.gl});var f=R("eg+a");R.d(ct,"SceneEventList",function(){return f.a});var v=R("bYl4"),b=R.n(v);R.o(v,"CityBuildingLayer")&&R.d(ct,"CityBuildingLayer",function(){return v.CityBuildingLayer}),R.o(v,"Control")&&R.d(ct,"Control",function(){return v.Control}),R.o(v,"HeatmapLayer")&&R.d(ct,"HeatmapLayer",function(){return v.HeatmapLayer}),R.o(v,"ImageLayer")&&R.d(ct,"ImageLayer",function(){return v.ImageLayer}),R.o(v,"LineLayer")&&R.d(ct,"LineLayer",function(){return v.LineLayer}),R.o(v,"Logo")&&R.d(ct,"Logo",function(){return v.Logo}),R.o(v,"Marker")&&R.d(ct,"Marker",function(){return v.Marker}),R.o(v,"PointLayer")&&R.d(ct,"PointLayer",function(){return v.PointLayer}),R.o(v,"PolygonLayer")&&R.d(ct,"PolygonLayer",function(){return v.PolygonLayer}),R.o(v,"Popup")&&R.d(ct,"Popup",function(){return v.Popup}),R.o(v,"PositionType")&&R.d(ct,"PositionType",function(){return v.PositionType}),R.o(v,"RasterLayer")&&R.d(ct,"RasterLayer",function(){return v.RasterLayer}),R.o(v,"Scale")&&R.d(ct,"Scale",function(){return v.Scale}),R.o(v,"Scene")&&R.d(ct,"Scene",function(){return v.Scene}),R.o(v,"Zoom")&&R.d(ct,"Zoom",function(){return v.Zoom}),R.o(v,"gl")&&R.d(ct,"gl",function(){return v.gl});var g=R("FI6e"),m=R.n(g);R.o(g,"CityBuildingLayer")&&R.d(ct,"CityBuildingLayer",function(){return g.CityBuildingLayer}),R.o(g,"Control")&&R.d(ct,"Control",function(){return g.Control}),R.o(g,"HeatmapLayer")&&R.d(ct,"HeatmapLayer",function(){return g.HeatmapLayer}),R.o(g,"ImageLayer")&&R.d(ct,"ImageLayer",function(){return g.ImageLayer}),R.o(g,"LineLayer")&&R.d(ct,"LineLayer",function(){return g.LineLayer}),R.o(g,"Logo")&&R.d(ct,"Logo",function(){return g.Logo}),R.o(g,"Marker")&&R.d(ct,"Marker",function(){return g.Marker}),R.o(g,"PointLayer")&&R.d(ct,"PointLayer",function(){return g.PointLayer}),R.o(g,"PolygonLayer")&&R.d(ct,"PolygonLayer",function(){return g.PolygonLayer}),R.o(g,"Popup")&&R.d(ct,"Popup",function(){return g.Popup}),R.o(g,"PositionType")&&R.d(ct,"PositionType",function(){return g.PositionType}),R.o(g,"RasterLayer")&&R.d(ct,"RasterLayer",function(){return g.RasterLayer}),R.o(g,"Scale")&&R.d(ct,"Scale",function(){return g.Scale}),R.o(g,"Scene")&&R.d(ct,"Scene",function(){return g.Scene}),R.o(g,"Zoom")&&R.d(ct,"Zoom",function(){return g.Zoom}),R.o(g,"gl")&&R.d(ct,"gl",function(){return g.gl});var _=R("D+ow"),M=R.n(_);R.o(_,"CityBuildingLayer")&&R.d(ct,"CityBuildingLayer",function(){return _.CityBuildingLayer}),R.o(_,"Control")&&R.d(ct,"Control",function(){return _.Control}),R.o(_,"HeatmapLayer")&&R.d(ct,"HeatmapLayer",function(){return _.HeatmapLayer}),R.o(_,"ImageLayer")&&R.d(ct,"ImageLayer",function(){return _.ImageLayer}),R.o(_,"LineLayer")&&R.d(ct,"LineLayer",function(){return _.LineLayer}),R.o(_,"Logo")&&R.d(ct,"Logo",function(){return _.Logo}),R.o(_,"Marker")&&R.d(ct,"Marker",function(){return _.Marker}),R.o(_,"PointLayer")&&R.d(ct,"PointLayer",function(){return _.PointLayer}),R.o(_,"PolygonLayer")&&R.d(ct,"PolygonLayer",function(){return _.PolygonLayer}),R.o(_,"Popup")&&R.d(ct,"Popup",function(){return _.Popup}),R.o(_,"PositionType")&&R.d(ct,"PositionType",function(){return _.PositionType}),R.o(_,"RasterLayer")&&R.d(ct,"RasterLayer",function(){return _.RasterLayer}),R.o(_,"Scale")&&R.d(ct,"Scale",function(){return _.Scale}),R.o(_,"Scene")&&R.d(ct,"Scene",function(){return _.Scene}),R.o(_,"Zoom")&&R.d(ct,"Zoom",function(){return _.Zoom}),R.o(_,"gl")&&R.d(ct,"gl",function(){return _.gl});var x=R("AFH1");R.d(ct,"PositionType",function(){return x.a});var y=R("8uyu"),S=R.n(y);R.o(y,"CityBuildingLayer")&&R.d(ct,"CityBuildingLayer",function(){return y.CityBuildingLayer}),R.o(y,"Control")&&R.d(ct,"Control",function(){return y.Control}),R.o(y,"HeatmapLayer")&&R.d(ct,"HeatmapLayer",function(){return y.HeatmapLayer}),R.o(y,"ImageLayer")&&R.d(ct,"ImageLayer",function(){return y.ImageLayer}),R.o(y,"LineLayer")&&R.d(ct,"LineLayer",function(){return y.LineLayer}),R.o(y,"Logo")&&R.d(ct,"Logo",function(){return y.Logo}),R.o(y,"Marker")&&R.d(ct,"Marker",function(){return y.Marker}),R.o(y,"PointLayer")&&R.d(ct,"PointLayer",function(){return y.PointLayer}),R.o(y,"PolygonLayer")&&R.d(ct,"PolygonLayer",function(){return y.PolygonLayer}),R.o(y,"Popup")&&R.d(ct,"Popup",function(){return y.Popup}),R.o(y,"RasterLayer")&&R.d(ct,"RasterLayer",function(){return y.RasterLayer}),R.o(y,"Scale")&&R.d(ct,"Scale",function(){return y.Scale}),R.o(y,"Scene")&&R.d(ct,"Scene",function(){return y.Scene}),R.o(y,"Zoom")&&R.d(ct,"Zoom",function(){return y.Zoom}),R.o(y,"gl")&&R.d(ct,"gl",function(){return y.gl});var P=R("J7lC"),A=R.n(P);R.o(P,"CityBuildingLayer")&&R.d(ct,"CityBuildingLayer",function(){return P.CityBuildingLayer}),R.o(P,"Control")&&R.d(ct,"Control",function(){return P.Control}),R.o(P,"HeatmapLayer")&&R.d(ct,"HeatmapLayer",function(){return P.HeatmapLayer}),R.o(P,"ImageLayer")&&R.d(ct,"ImageLayer",function(){return P.ImageLayer}),R.o(P,"LineLayer")&&R.d(ct,"LineLayer",function(){return P.LineLayer}),R.o(P,"Logo")&&R.d(ct,"Logo",function(){return P.Logo}),R.o(P,"Marker")&&R.d(ct,"Marker",function(){return P.Marker}),R.o(P,"PointLayer")&&R.d(ct,"PointLayer",function(){return P.PointLayer}),R.o(P,"PolygonLayer")&&R.d(ct,"PolygonLayer",function(){return P.PolygonLayer}),R.o(P,"Popup")&&R.d(ct,"Popup",function(){return P.Popup}),R.o(P,"RasterLayer")&&R.d(ct,"RasterLayer",function(){return P.RasterLayer}),R.o(P,"Scale")&&R.d(ct,"Scale",function(){return P.Scale}),R.o(P,"Scene")&&R.d(ct,"Scene",function(){return P.Scene}),R.o(P,"Zoom")&&R.d(ct,"Zoom",function(){return P.Zoom}),R.o(P,"gl")&&R.d(ct,"gl",function(){return P.gl});var O=R("QGbF"),L=R.n(O);R.o(O,"CityBuildingLayer")&&R.d(ct,"CityBuildingLayer",function(){return O.CityBuildingLayer}),R.o(O,"Control")&&R.d(ct,"Control",function(){return O.Control}),R.o(O,"HeatmapLayer")&&R.d(ct,"HeatmapLayer",function(){return O.HeatmapLayer}),R.o(O,"ImageLayer")&&R.d(ct,"ImageLayer",function(){return O.ImageLayer}),R.o(O,"LineLayer")&&R.d(ct,"LineLayer",function(){return O.LineLayer}),R.o(O,"Logo")&&R.d(ct,"Logo",function(){return O.Logo}),R.o(O,"Marker")&&R.d(ct,"Marker",function(){return O.Marker}),R.o(O,"PointLayer")&&R.d(ct,"PointLayer",function(){return O.PointLayer}),R.o(O,"PolygonLayer")&&R.d(ct,"PolygonLayer",function(){return O.PolygonLayer}),R.o(O,"Popup")&&R.d(ct,"Popup",function(){return O.Popup}),R.o(O,"RasterLayer")&&R.d(ct,"RasterLayer",function(){return O.RasterLayer}),R.o(O,"Scale")&&R.d(ct,"Scale",function(){return O.Scale}),R.o(O,"Scene")&&R.d(ct,"Scene",function(){return O.Scene}),R.o(O,"Zoom")&&R.d(ct,"Zoom",function(){return O.Zoom}),R.o(O,"gl")&&R.d(ct,"gl",function(){return O.gl});var H=R("V1cb"),F=R("4kj+"),Z=R.n(F);R.o(F,"CityBuildingLayer")&&R.d(ct,"CityBuildingLayer",function(){return F.CityBuildingLayer}),R.o(F,"Control")&&R.d(ct,"Control",function(){return F.Control}),R.o(F,"HeatmapLayer")&&R.d(ct,"HeatmapLayer",function(){return F.HeatmapLayer}),R.o(F,"ImageLayer")&&R.d(ct,"ImageLayer",function(){return F.ImageLayer}),R.o(F,"LineLayer")&&R.d(ct,"LineLayer",function(){return F.LineLayer}),R.o(F,"Logo")&&R.d(ct,"Logo",function(){return F.Logo}),R.o(F,"Marker")&&R.d(ct,"Marker",function(){return F.Marker}),R.o(F,"PointLayer")&&R.d(ct,"PointLayer",function(){return F.PointLayer}),R.o(F,"PolygonLayer")&&R.d(ct,"PolygonLayer",function(){return F.PolygonLayer}),R.o(F,"Popup")&&R.d(ct,"Popup",function(){return F.Popup}),R.o(F,"RasterLayer")&&R.d(ct,"RasterLayer",function(){return F.RasterLayer}),R.o(F,"Scale")&&R.d(ct,"Scale",function(){return F.Scale}),R.o(F,"Scene")&&R.d(ct,"Scene",function(){return F.Scene}),R.o(F,"Zoom")&&R.d(ct,"Zoom",function(){return F.Zoom}),R.o(F,"gl")&&R.d(ct,"gl",function(){return F.gl});var G=R("bzyH"),U=R.n(G);R.o(G,"CityBuildingLayer")&&R.d(ct,"CityBuildingLayer",function(){return G.CityBuildingLayer}),R.o(G,"Control")&&R.d(ct,"Control",function(){return G.Control}),R.o(G,"HeatmapLayer")&&R.d(ct,"HeatmapLayer",function(){return G.HeatmapLayer}),R.o(G,"ImageLayer")&&R.d(ct,"ImageLayer",function(){return G.ImageLayer}),R.o(G,"LineLayer")&&R.d(ct,"LineLayer",function(){return G.LineLayer}),R.o(G,"Logo")&&R.d(ct,"Logo",function(){return G.Logo}),R.o(G,"Marker")&&R.d(ct,"Marker",function(){return G.Marker}),R.o(G,"PointLayer")&&R.d(ct,"PointLayer",function(){return G.PointLayer}),R.o(G,"PolygonLayer")&&R.d(ct,"PolygonLayer",function(){return G.PolygonLayer}),R.o(G,"Popup")&&R.d(ct,"Popup",function(){return G.Popup}),R.o(G,"RasterLayer")&&R.d(ct,"RasterLayer",function(){return G.RasterLayer}),R.o(G,"Scale")&&R.d(ct,"Scale",function(){return G.Scale}),R.o(G,"Scene")&&R.d(ct,"Scene",function(){return G.Scene}),R.o(G,"Zoom")&&R.d(ct,"Zoom",function(){return G.Zoom}),R.o(G,"gl")&&R.d(ct,"gl",function(){return G.gl});var Y=R("0eqD"),J=R.n(Y);R.o(Y,"CityBuildingLayer")&&R.d(ct,"CityBuildingLayer",function(){return Y.CityBuildingLayer}),R.o(Y,"Control")&&R.d(ct,"Control",function(){return Y.Control}),R.o(Y,"HeatmapLayer")&&R.d(ct,"HeatmapLayer",function(){return Y.HeatmapLayer}),R.o(Y,"ImageLayer")&&R.d(ct,"ImageLayer",function(){return Y.ImageLayer}),R.o(Y,"LineLayer")&&R.d(ct,"LineLayer",function(){return Y.LineLayer}),R.o(Y,"Logo")&&R.d(ct,"Logo",function(){return Y.Logo}),R.o(Y,"Marker")&&R.d(ct,"Marker",function(){return Y.Marker}),R.o(Y,"PointLayer")&&R.d(ct,"PointLayer",function(){return Y.PointLayer}),R.o(Y,"PolygonLayer")&&R.d(ct,"PolygonLayer",function(){return Y.PolygonLayer}),R.o(Y,"Popup")&&R.d(ct,"Popup",function(){return Y.Popup}),R.o(Y,"RasterLayer")&&R.d(ct,"RasterLayer",function(){return Y.RasterLayer}),R.o(Y,"Scale")&&R.d(ct,"Scale",function(){return Y.Scale}),R.o(Y,"Scene")&&R.d(ct,"Scene",function(){return Y.Scene}),R.o(Y,"Zoom")&&R.d(ct,"Zoom",function(){return Y.Zoom}),R.o(Y,"gl")&&R.d(ct,"gl",function(){return Y.gl});var rt=R("/Uc5"),ft=R.n(rt);R.o(rt,"CityBuildingLayer")&&R.d(ct,"CityBuildingLayer",function(){return rt.CityBuildingLayer}),R.o(rt,"Control")&&R.d(ct,"Control",function(){return rt.Control}),R.o(rt,"HeatmapLayer")&&R.d(ct,"HeatmapLayer",function(){return rt.HeatmapLayer}),R.o(rt,"ImageLayer")&&R.d(ct,"ImageLayer",function(){return rt.ImageLayer}),R.o(rt,"LineLayer")&&R.d(ct,"LineLayer",function(){return rt.LineLayer}),R.o(rt,"Logo")&&R.d(ct,"Logo",function(){return rt.Logo}),R.o(rt,"Marker")&&R.d(ct,"Marker",function(){return rt.Marker}),R.o(rt,"PointLayer")&&R.d(ct,"PointLayer",function(){return rt.PointLayer}),R.o(rt,"PolygonLayer")&&R.d(ct,"PolygonLayer",function(){return rt.PolygonLayer}),R.o(rt,"Popup")&&R.d(ct,"Popup",function(){return rt.Popup}),R.o(rt,"RasterLayer")&&R.d(ct,"RasterLayer",function(){return rt.RasterLayer}),R.o(rt,"Scale")&&R.d(ct,"Scale",function(){return rt.Scale}),R.o(rt,"Scene")&&R.d(ct,"Scene",function(){return rt.Scene}),R.o(rt,"Zoom")&&R.d(ct,"Zoom",function(){return rt.Zoom}),R.o(rt,"gl")&&R.d(ct,"gl",function(){return rt.gl});var dt=R("RMtq"),ut=R.n(dt);R.o(dt,"CityBuildingLayer")&&R.d(ct,"CityBuildingLayer",function(){return dt.CityBuildingLayer}),R.o(dt,"Control")&&R.d(ct,"Control",function(){return dt.Control}),R.o(dt,"HeatmapLayer")&&R.d(ct,"HeatmapLayer",function(){return dt.HeatmapLayer}),R.o(dt,"ImageLayer")&&R.d(ct,"ImageLayer",function(){return dt.ImageLayer}),R.o(dt,"LineLayer")&&R.d(ct,"LineLayer",function(){return dt.LineLayer}),R.o(dt,"Logo")&&R.d(ct,"Logo",function(){return dt.Logo}),R.o(dt,"Marker")&&R.d(ct,"Marker",function(){return dt.Marker}),R.o(dt,"PointLayer")&&R.d(ct,"PointLayer",function(){return dt.PointLayer}),R.o(dt,"PolygonLayer")&&R.d(ct,"PolygonLayer",function(){return dt.PolygonLayer}),R.o(dt,"Popup")&&R.d(ct,"Popup",function(){return dt.Popup}),R.o(dt,"RasterLayer")&&R.d(ct,"RasterLayer",function(){return dt.RasterLayer}),R.o(dt,"Scale")&&R.d(ct,"Scale",function(){return dt.Scale}),R.o(dt,"Scene")&&R.d(ct,"Scene",function(){return dt.Scene}),R.o(dt,"Zoom")&&R.d(ct,"Zoom",function(){return dt.Zoom}),R.o(dt,"gl")&&R.d(ct,"gl",function(){return dt.gl});var Lt=R("1jvM"),Ft=R.n(Lt);R.o(Lt,"CityBuildingLayer")&&R.d(ct,"CityBuildingLayer",function(){return Lt.CityBuildingLayer}),R.o(Lt,"Control")&&R.d(ct,"Control",function(){return Lt.Control}),R.o(Lt,"HeatmapLayer")&&R.d(ct,"HeatmapLayer",function(){return Lt.HeatmapLayer}),R.o(Lt,"ImageLayer")&&R.d(ct,"ImageLayer",function(){return Lt.ImageLayer}),R.o(Lt,"LineLayer")&&R.d(ct,"LineLayer",function(){return Lt.LineLayer}),R.o(Lt,"Logo")&&R.d(ct,"Logo",function(){return Lt.Logo}),R.o(Lt,"Marker")&&R.d(ct,"Marker",function(){return Lt.Marker}),R.o(Lt,"PointLayer")&&R.d(ct,"PointLayer",function(){return Lt.PointLayer}),R.o(Lt,"PolygonLayer")&&R.d(ct,"PolygonLayer",function(){return Lt.PolygonLayer}),R.o(Lt,"Popup")&&R.d(ct,"Popup",function(){return Lt.Popup}),R.o(Lt,"RasterLayer")&&R.d(ct,"RasterLayer",function(){return Lt.RasterLayer}),R.o(Lt,"Scale")&&R.d(ct,"Scale",function(){return Lt.Scale}),R.o(Lt,"Scene")&&R.d(ct,"Scene",function(){return Lt.Scene}),R.o(Lt,"Zoom")&&R.d(ct,"Zoom",function(){return Lt.Zoom}),R.o(Lt,"gl")&&R.d(ct,"gl",function(){return Lt.gl});var Ot=R("bPkA"),St=R("PSsN"),xt=R.n(St);R.o(St,"CityBuildingLayer")&&R.d(ct,"CityBuildingLayer",function(){return St.CityBuildingLayer}),R.o(St,"Control")&&R.d(ct,"Control",function(){return St.Control}),R.o(St,"HeatmapLayer")&&R.d(ct,"HeatmapLayer",function(){return St.HeatmapLayer}),R.o(St,"ImageLayer")&&R.d(ct,"ImageLayer",function(){return St.ImageLayer}),R.o(St,"LineLayer")&&R.d(ct,"LineLayer",function(){return St.LineLayer}),R.o(St,"Logo")&&R.d(ct,"Logo",function(){return St.Logo}),R.o(St,"Marker")&&R.d(ct,"Marker",function(){return St.Marker}),R.o(St,"PointLayer")&&R.d(ct,"PointLayer",function(){return St.PointLayer}),R.o(St,"PolygonLayer")&&R.d(ct,"PolygonLayer",function(){return St.PolygonLayer}),R.o(St,"Popup")&&R.d(ct,"Popup",function(){return St.Popup}),R.o(St,"RasterLayer")&&R.d(ct,"RasterLayer",function(){return St.RasterLayer}),R.o(St,"Scale")&&R.d(ct,"Scale",function(){return St.Scale}),R.o(St,"Scene")&&R.d(ct,"Scene",function(){return St.Scene}),R.o(St,"Zoom")&&R.d(ct,"Zoom",function(){return St.Zoom}),R.o(St,"gl")&&R.d(ct,"gl",function(){return St.gl});var At=R("6NqC"),nt=R.n(At);R.o(At,"CityBuildingLayer")&&R.d(ct,"CityBuildingLayer",function(){return At.CityBuildingLayer}),R.o(At,"Control")&&R.d(ct,"Control",function(){return At.Control}),R.o(At,"HeatmapLayer")&&R.d(ct,"HeatmapLayer",function(){return At.HeatmapLayer}),R.o(At,"ImageLayer")&&R.d(ct,"ImageLayer",function(){return At.ImageLayer}),R.o(At,"LineLayer")&&R.d(ct,"LineLayer",function(){return At.LineLayer}),R.o(At,"Logo")&&R.d(ct,"Logo",function(){return At.Logo}),R.o(At,"Marker")&&R.d(ct,"Marker",function(){return At.Marker}),R.o(At,"PointLayer")&&R.d(ct,"PointLayer",function(){return At.PointLayer}),R.o(At,"PolygonLayer")&&R.d(ct,"PolygonLayer",function(){return At.PolygonLayer}),R.o(At,"Popup")&&R.d(ct,"Popup",function(){return At.Popup}),R.o(At,"RasterLayer")&&R.d(ct,"RasterLayer",function(){return At.RasterLayer}),R.o(At,"Scale")&&R.d(ct,"Scale",function(){return At.Scale}),R.o(At,"Scene")&&R.d(ct,"Scene",function(){return At.Scene}),R.o(At,"Zoom")&&R.d(ct,"Zoom",function(){return At.Zoom}),R.o(At,"gl")&&R.d(ct,"gl",function(){return At.gl});var Mt=R("bTtR"),z=R.n(Mt);R.o(Mt,"CityBuildingLayer")&&R.d(ct,"CityBuildingLayer",function(){return Mt.CityBuildingLayer}),R.o(Mt,"Control")&&R.d(ct,"Control",function(){return Mt.Control}),R.o(Mt,"HeatmapLayer")&&R.d(ct,"HeatmapLayer",function(){return Mt.HeatmapLayer}),R.o(Mt,"ImageLayer")&&R.d(ct,"ImageLayer",function(){return Mt.ImageLayer}),R.o(Mt,"LineLayer")&&R.d(ct,"LineLayer",function(){return Mt.LineLayer}),R.o(Mt,"Logo")&&R.d(ct,"Logo",function(){return Mt.Logo}),R.o(Mt,"Marker")&&R.d(ct,"Marker",function(){return Mt.Marker}),R.o(Mt,"PointLayer")&&R.d(ct,"PointLayer",function(){return Mt.PointLayer}),R.o(Mt,"PolygonLayer")&&R.d(ct,"PolygonLayer",function(){return Mt.PolygonLayer}),R.o(Mt,"Popup")&&R.d(ct,"Popup",function(){return Mt.Popup}),R.o(Mt,"RasterLayer")&&R.d(ct,"RasterLayer",function(){return Mt.RasterLayer}),R.o(Mt,"Scale")&&R.d(ct,"Scale",function(){return Mt.Scale}),R.o(Mt,"Scene")&&R.d(ct,"Scene",function(){return Mt.Scene}),R.o(Mt,"Zoom")&&R.d(ct,"Zoom",function(){return Mt.Zoom}),R.o(Mt,"gl")&&R.d(ct,"gl",function(){return Mt.gl});var Q=R("o+pz");R.d(ct,"gl",function(){return Q.a})},h7MG:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.getBindingDictionary=ct.createMockRequest=ct.plan=void 0;var V=R("doU7"),E=R("MON2"),T=R("FV85"),e=R("xfSm"),t=R("qK8v"),u=R("ujMp"),s=R("oy+k"),c=R("GXnB"),r=R("yMAV"),h=R("fbrv"),n=R("xiII"),i=R("dX1H");function a(_){return _._bindingDictionary}ct.getBindingDictionary=a;function o(_,M,x,y,S,P){var A=_?e.MULTI_INJECT_TAG:e.INJECT_TAG,O=new c.Metadata(A,x),L=new i.Target(M,y,x,O);if(S!==void 0){var H=new c.Metadata(S,P);L.metadata.push(H)}return L}function l(_,M,x,y,S){var P=b(x.container,S.serviceIdentifier),A=[];return P.length===V.BindingCount.NoBindingsAvailable&&x.container.options.autoBindInjectable&&typeof S.serviceIdentifier=="function"&&_.getConstructorMetadata(S.serviceIdentifier).compilerGeneratedMetadata&&(x.container.bind(S.serviceIdentifier).toSelf(),P=b(x.container,S.serviceIdentifier)),M?A=P:A=P.filter(function(O){var L=new n.Request(O.serviceIdentifier,x,y,O,S);return O.constraint(L)}),f(S.serviceIdentifier,A,S,x.container),A}function f(_,M,x,y){switch(M.length){case V.BindingCount.NoBindingsAvailable:if(x.isOptional())return M;var S=u.getServiceIdentifierAsString(_),P=E.NOT_REGISTERED;throw P+=u.listMetadataForTarget(S,x),P+=u.listRegisteredBindingsForServiceIdentifier(y,S,b),new Error(P);case V.BindingCount.OnlyOneBindingAvailable:if(!x.isArray())return M;case V.BindingCount.MultipleBindingsAvailable:default:if(x.isArray())return M;var S=u.getServiceIdentifierAsString(_),P=E.AMBIGUOUS_MATCH+" "+S;throw P+=u.listRegisteredBindingsForServiceIdentifier(y,S,b),new Error(P)}}function v(_,M,x,y,S,P){var A,O;if(S===null){A=l(_,M,y,null,P),O=new n.Request(x,y,null,A,P);var L=new r.Plan(y,O);y.addPlan(L)}else A=l(_,M,y,S,P),O=S.addChildRequest(P.serviceIdentifier,A,P);A.forEach(function(H){var F=null;if(P.isArray())F=O.addChildRequest(H.serviceIdentifier,H,P);else{if(H.cache)return;F=O}if(H.type===T.BindingTypeEnum.Instance&&H.implementationType!==null){var Z=h.getDependencies(_,H.implementationType);if(!y.container.options.skipBaseClassChecks){var G=h.getBaseClassDependencyCount(_,H.implementationType);if(Z.length<G){var U=E.ARGUMENTS_LENGTH_MISMATCH(h.getFunctionName(H.implementationType));throw new Error(U)}}Z.forEach(function(Y){v(_,!1,Y.serviceIdentifier,y,F,Y)})}})}function b(_,M){var x=[],y=a(_);return y.hasKey(M)?x=y.get(M):_.parent!==null&&(x=b(_.parent,M)),x}function g(_,M,x,y,S,P,A,O){O===void 0&&(O=!1);var L=new s.Context(M),H=o(x,y,S,"",P,A);try{return v(_,O,S,L,null,H),L}catch(F){throw t.isStackOverflowExeption(F)&&L.plan&&u.circularDependencyToException(L.plan.rootRequest),F}}ct.plan=g;function m(_,M,x,y){var S=new i.Target(T.TargetTypeEnum.Variable,"",M,new c.Metadata(x,y)),P=new s.Context(_),A=new n.Request(M,P,null,[],S);return A}ct.createMockRequest=m},heNW:function(Se,ct){function R(V,E,T){switch(T.length){case 0:return V.call(E);case 1:return V.call(E,T[0]);case 2:return V.call(E,T[0],T[1]);case 3:return V.call(E,T[0],T[1],T[2])}return V.apply(E,T)}Se.exports=R},hi0z:function(Se,ct,R){"use strict";(function(V,E){Se.exports=E()})(this,function(){function V(h){var n=[];return h.AMapUI&&n.push(E(h.AMapUI)),h.Loca&&n.push(T(h.Loca)),Promise.all(n)}function E(h){return new Promise(function(n,i){var a=[];if(h.plugins)for(var o=0;o<h.plugins.length;o+=1)t.AMapUI.plugins.indexOf(h.plugins[o])==-1&&a.push(h.plugins[o]);if(u.AMapUI===e.failed)i("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(u.AMapUI===e.notload){u.AMapUI=e.loading,t.AMapUI.version=h.version||t.AMapUI.version,o=t.AMapUI.version;var l=document.body||document.head,f=document.createElement("script");f.type="text/javascript",f.src="https://webapi.amap.com/ui/"+o+"/main.js",f.onerror=function(v){u.AMapUI=e.failed,i("\u8BF7\u6C42 AMapUI \u5931\u8D25")},f.onload=function(){if(u.AMapUI=e.loaded,a.length)window.AMapUI.loadUI(a,function(){for(var v=0,b=a.length;v<b;v++){var g=a[v].split("/").slice(-1)[0];window.AMapUI[g]=arguments[v]}for(n();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()});else for(n();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()},l.appendChild(f)}else u.AMapUI===e.loaded?h.version&&h.version!==t.AMapUI.version?i("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):a.length?window.AMapUI.loadUI(a,function(){for(var v=0,b=a.length;v<b;v++){var g=a[v].split("/").slice(-1)[0];window.AMapUI[g]=arguments[v]}n()}):n():h.version&&h.version!==t.AMapUI.version?i("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):s.AMapUI.push(function(v){v?i(v):a.length?window.AMapUI.loadUI(a,function(){for(var b=0,g=a.length;b<g;b++){var m=a[b].split("/").slice(-1)[0];window.AMapUI[m]=arguments[b]}n()}):n()})})}function T(h){return new Promise(function(n,i){if(t.AMap.version.startsWith("2.0"))i("Loca \u6682\u4E0D\u9002\u914D JSAPI 2.0,\u8BF7\u4F7F\u7528 1.4.15");else if(u.Loca===e.failed)i("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(u.Loca===e.notload){u.Loca=e.loading,t.Loca.version=h.version||t.Loca.version;var a=t.Loca.version,o=t.key,l=document.body||document.head,f=document.createElement("script");f.type="text/javascript",f.src="https://webapi.amap.com/loca?v="+a+"&key="+o,f.onerror=function(v){u.Loca=e.failed,i("\u8BF7\u6C42 AMapUI \u5931\u8D25")},f.onload=function(){for(u.Loca=e.loaded,n();s.Loca.length;)s.Loca.splice(0,1)[0]()},l.appendChild(f)}else u.Loca===e.loaded?h.version&&h.version!==t.Loca.version?i("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):n():h.version&&h.version!==t.Loca.version?i("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):s.Loca.push(function(v){v?i(v):i()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var e;(function(h){h.notload="notload",h.loading="loading",h.loaded="loaded",h.failed="failed"})(e||(e={}));var t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},u={AMap:e.notload,AMapUI:e.notload,Loca:e.notload},s={AMap:[],AMapUI:[],Loca:[]},c=[],r=function(n){typeof n=="function"&&(u.AMap===e.loaded?n(window.AMap):c.push(n))};return{load:function(n){return new Promise(function(i,a){if(u.AMap==e.failed)a("");else if(u.AMap==e.notload){var o=n.key,l=n.version,f=n.plugins;o?(window.AMap&&location.host!=="lbs.amap.com"&&a("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),t.key=o,t.AMap.version=l||t.AMap.version,t.AMap.plugins=f||t.AMap.plugins,u.AMap=e.loading,l=document.body||document.head,window.___onAPILoaded=function(b){if(delete window.___onAPILoaded,b)u.AMap=e.failed,a(b);else for(u.AMap=e.loaded,V(n).then(function(){i(window.AMap)}).catch(a);c.length;)c.splice(0,1)[0]()},f=document.createElement("script"),f.type="text/javascript",f.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+t.AMap.version+"&key="+o+"&plugin="+t.AMap.plugins.join(","),f.onerror=function(b){u.AMap=e.failed,a(b)},l.appendChild(f)):a("\u8BF7\u586B\u5199key")}else if(u.AMap==e.loaded)if(n.key&&n.key!==t.key)a("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(n.version&&n.version!==t.AMap.version)a("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(o=[],n.plugins)for(l=0;l<n.plugins.length;l+=1)t.AMap.plugins.indexOf(n.plugins[l])==-1&&o.push(n.plugins[l]);o.length?window.AMap.plugin(o,function(){V(n).then(function(){i(window.AMap)}).catch(a)}):V(n).then(function(){i(window.AMap)}).catch(a)}else if(n.key&&n.key!==t.key)a("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(n.version&&n.version!==t.AMap.version)a("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var v=[];if(n.plugins)for(l=0;l<n.plugins.length;l+=1)t.AMap.plugins.indexOf(n.plugins[l])==-1&&v.push(n.plugins[l]);r(function(){v.length?window.AMap.plugin(v,function(){V(n).then(function(){i(window.AMap)}).catch(a)}):V(n).then(function(){i(window.AMap)}).catch(a)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},u={AMap:e.notload,AMapUI:e.notload,Loca:e.notload},s={AMap:[],AMapUI:[],Loca:[]}}}})},hypo:function(Se,ct,R){var V=R("O0oS");function E(T,e,t){e=="__proto__"&&V?V(T,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):T[e]=t}Se.exports=E},iWIM:function(Se,ct,R){var V=R("n3AX");function E(T,e,t){return typeof Reflect!="undefined"&&Reflect.get?(Se.exports=E=Reflect.get,Se.exports.default=Se.exports,Se.exports.__esModule=!0):(Se.exports=E=function(s,c,r){var h=V(s,c);if(!!h){var n=Object.getOwnPropertyDescriptor(h,c);return n.get?n.get.call(r):n.value}},Se.exports.default=Se.exports,Se.exports.__esModule=!0),E(T,e,t||T)}Se.exports=E,Se.exports.default=Se.exports,Se.exports.__esModule=!0},iegG:function(Se,ct){function R(V){var E=V.target||V.srcElement;E.__resizeRAF__&&cancelAnimationFrame(E.__resizeRAF__),E.__resizeRAF__=requestAnimationFrame(function(){var T=E.__resizeTrigger__,e=T&&T.__resizeListeners__;e&&e.forEach(function(t){t.call(T,V)})})}var ct=function(E,T){var e=this,t=e.document,u,s=t.attachEvent;typeof navigator!="undefined"&&(u=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/));function c(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",R)}if(!E.__resizeListeners__)if(E.__resizeListeners__=[],s)E.__resizeTrigger__=E,E.attachEvent("onresize",R);else{getComputedStyle(E).position==="static"&&(E.style.position="relative");var r=E.__resizeTrigger__=t.createElement("object");r.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),r.setAttribute("class","resize-sensor"),r.setAttribute("tabindex","-1"),r.__resizeElement__=E,r.onload=c,r.type="text/html",u&&E.appendChild(r),r.data="about:blank",u||E.appendChild(r)}E.__resizeListeners__.push(T)};Se.exports=typeof window=="undefined"?ct:ct.bind(window),Se.exports.unbind=function(V,E){var T=document.attachEvent,e=V.__resizeListeners__||[];if(E){var t=e.indexOf(E);t!==-1&&e.splice(t,1)}else e=V.__resizeListeners__=[];if(!e.length){if(T)V.detachEvent("onresize",R);else if(V.__resizeTrigger__){var u=V.__resizeTrigger__.contentDocument,s=u&&u.defaultView;s&&(s.removeEventListener("resize",R),delete s.__resizeTrigger__),V.__resizeTrigger__=!V.removeChild(V.__resizeTrigger__)}delete V.__resizeListeners__}}},itsj:function(Se,ct){function R(V,E){if(!(E==="constructor"&&typeof V[E]=="function")&&E!="__proto__")return V[E]}Se.exports=R},jCWc:function(Se,ct,R){"use strict";var V=R("cIOH"),E=R.n(V),T=R("1GLa")},"jIg/":function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.multiInject=void 0;var V=R("xfSm"),E=R("GXnB"),T=R("Ztfv");function e(t){return function(u,s,c){var r=new E.Metadata(V.MULTI_INJECT_TAG,t);typeof c=="number"?T.tagParameter(u,s,c,r):T.tagProperty(u,s,r)}}ct.multiInject=e},jYQm:function(Se,ct,R){"use strict";var V=R("q1tI"),E=R.n(V),T=Object(V.createContext)({});ct.a=T},jYx5:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.optional=void 0;var V=R("xfSm"),E=R("GXnB"),T=R("Ztfv");function e(){return function(t,u,s){var c=new E.Metadata(V.OPTIONAL_TAG,!0);typeof s=="number"?T.tagParameter(t,u,s,c):T.tagProperty(t,u,c)}}ct.optional=e},"jbM+":function(Se,ct,R){var V=R("R/W3");function E(T,e){var t=T==null?0:T.length;return!!t&&V(T,e,0)>-1}Se.exports=E},jeLo:function(Se,ct,R){var V=R("juv8"),E=R("mTTR");function T(e){return V(e,E(e))}Se.exports=T},juv8:function(Se,ct,R){var V=R("MrPd"),E=R("hypo");function T(e,t,u,s){var c=!u;u||(u={});for(var r=-1,h=t.length;++r<h;){var n=t[r],i=s?s(u[n],e[n],n,u,e):void 0;i===void 0&&(i=e[n]),c?E(u,n,i):V(u,n,i)}return u}Se.exports=T},"k5/I":function(Se,ct,R){"use strict";R.d(ct,"a",function(){return M}),R.d(ct,"b",function(){return H}),R.d(ct,"e",function(){return G}),R.d(ct,"f",function(){return J}),R.d(ct,"c",function(){return Lt}),R.d(ct,"d",function(){return k});var V=R("lSNA"),E=R.n(V),T=R("lwsE"),e=R.n(T),t=R("W8MJ"),u=R.n(t),s=R("7W2i"),c=R.n(s),r=R("a1gu"),h=R.n(r),n=R("Nsbk"),i=R.n(n),a=R("h1nZ"),o=R("Hel2"),l=R("uhBA");function f(ot,it){var X=Object.keys(ot);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(ot);it&&(Et=Et.filter(function(vt){return Object.getOwnPropertyDescriptor(ot,vt).enumerable})),X.push.apply(X,Et)}return X}function v(ot){for(var it=1;it<arguments.length;it++){var X=arguments[it]!=null?arguments[it]:{};it%2?f(Object(X),!0).forEach(function(Et){E()(ot,Et,X[Et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ot,Object.getOwnPropertyDescriptors(X)):f(Object(X)).forEach(function(Et){Object.defineProperty(ot,Et,Object.getOwnPropertyDescriptor(X,Et))})}return ot}function b(ot){var it=g();return function(){var Et=i()(ot),vt;if(it){var Nt=i()(this).constructor;vt=Reflect.construct(Et,arguments,Nt)}else vt=Et.apply(this,arguments);return h()(this,vt)}}function g(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ot){return!1}}var m;(function(ot){ot.TOPRIGHT="topright",ot.TOPLEFT="topleft",ot.BOTTOMRIGHT="bottomright",ot.BOTTOMLEFT="bottomleft"})(m||(m={}));var _=0,M=function(ot){c()(X,ot);var it=b(X);function X(Et){var vt;return e()(this,X),vt=it.call(this),vt.controlOption=void 0,vt.container=void 0,vt.sceneContainer=void 0,vt.mapsService=void 0,vt.renderService=void 0,vt.layerService=void 0,vt.controlService=void 0,vt.isShow=void 0,vt.controlOption=v(v({},vt.getDefault()),Et||{}),vt}return u()(X,[{key:"getDefault",value:function(){return{position:m.TOPRIGHT,name:"".concat(_++)}}},{key:"setPosition",value:function(vt){var Nt=this.controlService;return Nt&&Nt.removeControl(this),this.controlOption.position=vt,Nt&&Nt.addControl(this,this.sceneContainer),this}},{key:"addTo",value:function(vt){this.mapsService=vt.get(a.TYPES.IMapService),this.renderService=vt.get(a.TYPES.IRendererService),this.layerService=vt.get(a.TYPES.ILayerService),this.controlService=vt.get(a.TYPES.IControlService),this.sceneContainer=vt,this.isShow=!0,this.container=this.onAdd();var Nt=this.container,$t=this.controlOption.position,ee=this.controlService.controlCorners[$t];return o.a.addClass(Nt,"l7-control"),$t.indexOf("bottom")!==-1?ee.insertBefore(Nt,ee.firstChild):ee.appendChild(Nt),this}},{key:"onAdd",value:function(){throw new Error("Method not implemented.")}},{key:"onRemove",value:function(){throw new Error("Method not implemented.")}},{key:"hide",value:function(){var vt=this.container;o.a.addClass(vt,"l7-control-hide"),this.isShow=!1}},{key:"show",value:function(){var vt=this.container;o.a.removeClass(vt,"l7-control-hide"),this.isShow=!0}},{key:"remove",value:function(){if(!this.mapsService)return this;o.a.remove(this.container),this.onRemove()}},{key:"_refocusOnMap",value:function(vt){if(this.mapsService&&vt&&vt.screenX>0&&vt.screenY>0){var Nt=this.mapsService.getContainer();Nt!==null&&Nt.focus()}}}]),X}(l.EventEmitter),x=R("PJYZ"),y=R.n(x);function S(ot){var it=P();return function(){var Et=i()(ot),vt;if(it){var Nt=i()(this).constructor;vt=Reflect.construct(Et,arguments,Nt)}else vt=Et.apply(this,arguments);return h()(this,vt)}}function P(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ot){return!1}}var A=function(ot){c()(X,ot);var it=S(X);function X(Et){var vt;return e()(this,X),vt=it.call(this,Et),vt.layerControlInputs=void 0,vt.layers=void 0,vt.lastZIndex=void 0,vt.handlingClick=void 0,vt.layersLink=void 0,vt.baseLayersList=void 0,vt.separator=void 0,vt.overlaysList=void 0,vt.form=void 0,vt.layerControlInputs=[],vt.layers=[],vt.lastZIndex=0,vt.handlingClick=!1,vt.initLayers(),Object(o.i)(["checkDisabledLayers","onLayerChange","collapse","extend","expand","onInputClick"],y()(vt)),vt}return u()(X,[{key:"getDefault",value:function(){return{collapsed:!0,position:a.PositionType.TOPRIGHT,autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,name:"layers"}}},{key:"onAdd",value:function(){var vt=this;return this.initLayout(),this.update(),this.mapsService.on("zoomend",this.checkDisabledLayers),this.layers.forEach(function(Nt){Nt.layer.on("remove",vt.onLayerChange),Nt.layer.on("add",vt.onLayerChange)}),this.container}},{key:"addVisualLayer",value:function(vt,Nt){return this.addLayer(vt,Nt,!0),this.mapsService?this.update():this}},{key:"expand",value:function(){var vt=this.renderService.getViewportSize(),Nt=vt.height;o.a.addClass(this.container,"l7-control-layers-expanded"),this.form.style.height="null";var $t=Nt-(this.container.offsetTop+50);return $t<this.form.clientHeight?(o.a.addClass(this.form,"l7-control-layers-scrollbar"),this.form.style.height=$t+"px"):o.a.removeClass(this.form,"l7-control-layers-scrollbar"),this.checkDisabledLayers(),this}},{key:"collapse",value:function(){return o.a.removeClass(this.container,"l7-control-layers-expanded"),this}},{key:"onRemove",value:function(){var vt=this;!this.mapsService||(this.mapsService.off("click",this.collapse),this.layers.forEach(function(Nt){Nt.layer.off("remove",vt.onLayerChange),Nt.layer.off("add",vt.onLayerChange)}))}},{key:"initLayout",value:function(){var vt="l7-control-layers",Nt=this.container=o.a.create("div",vt),$t=this.controlOption.collapsed;Nt.setAttribute("aria-haspopup","true");var ee=this.form=o.a.create("form",vt+"-list");$t&&(this.mapsService.on("click",this.collapse),Nt.addEventListener("mouseenter",this.expand),Nt.addEventListener("mouseleave",this.collapse)),this.layersLink=o.a.create("a",vt+"-toggle",Nt);var kt=this.layersLink;kt.title="Layers",$t||this.expand(),this.baseLayersList=o.a.create("div",vt+"-base",ee),this.separator=o.a.create("div",vt+"-separator",ee),this.overlaysList=o.a.create("div",vt+"-overlays",ee),Nt.appendChild(ee)}},{key:"initLayers",value:function(){var vt=this,Nt=this.controlOption,$t=Nt.baseLayers,ee=$t===void 0?{}:$t,kt=Nt.overlayers,Wt=kt===void 0?{}:kt;Object.keys(ee).forEach(function(ae,le){vt.addLayer(ee[ae],ae,!1)}),Object.keys(Wt).forEach(function(ae,le){vt.addLayer(Wt[ae],ae,!0)})}},{key:"update",value:function(){if(!this.container)return this;o.a.empty(this.baseLayersList),o.a.empty(this.overlaysList),this.layerControlInputs=[];var vt,Nt,$t,ee,kt=0;for($t=0;$t<this.layers.length;$t++)ee=this.layers[$t],this.addItem(ee),Nt=Nt||ee.overlay,vt=vt||!ee.overlay,kt+=ee.overlay?0:1;return this.controlOption.hideSingleBase&&(vt=vt&&kt>1,this.baseLayersList.style.display=vt?"":"none"),this.separator.style.display=Nt&&vt?"":"none",this}},{key:"checkDisabledLayers",value:function(){for(var vt=this.layerControlInputs,Nt,$t,ee=this.mapsService.getZoom(),kt=vt.length-1;kt>=0;kt--)if(Nt=vt[kt],$t=this.layerService.getLayer(Nt.layerId),$t&&$t.inited){var Wt=$t.getMinZoom(),ae=$t.getMaxZoom();Nt.disabled=ee<Wt||ee>ae}}},{key:"addLayer",value:function(vt,Nt,$t){this.mapsService&&(vt.on("add",this.onLayerChange),vt.on("remove",this.onLayerChange)),this.layers.push({layer:vt,name:Nt,overlay:$t});var ee=this.controlOption,kt=ee.sortLayers,Wt=ee.sortFunction,ae=ee.autoZIndex;kt&&this.layers.sort(function(le,je){return Wt(le.layer,je.layer,le.name,je.name)}),ae&&vt.setZIndex&&(this.lastZIndex++,vt.setZIndex(this.lastZIndex)),this.expandIfNotCollapsed()}},{key:"expandIfNotCollapsed",value:function(){return this.mapsService&&!this.controlOption.collapsed&&this.expand(),this}},{key:"onLayerChange",value:function(vt){this.handlingClick||this.update();var Nt=this.layerService.getLayer(vt.target.layerId),$t=Nt!=null&&Nt.overlay?vt.type==="add"?"overlayadd":"overlayremove":vt.type==="add"?"baselayerchange":null;$t&&this.emit($t,Nt)}},{key:"createRadioElement",value:function(vt,Nt){var $t='<input type="radio" class="l7-control-layers-selector" name="'+vt+'"'+(Nt?' checked="checked"':"")+"/>",ee=document.createElement("div");return ee.innerHTML=$t,ee.firstChild}},{key:"addItem",value:function(vt){var Nt=document.createElement("label"),$t=this.layerService.getLayer(vt.layer.id),ee=$t&&$t.inited&&vt.layer.isVisible(),kt;vt.overlay?(kt=document.createElement("input"),kt.type="checkbox",kt.className="l7-control-layers-selector",kt.defaultChecked=ee):kt=this.createRadioElement("l7-base-layers",ee),this.layerControlInputs.push(kt),kt.layerId=vt.layer.id,kt.addEventListener("click",this.onInputClick);var Wt=document.createElement("span");Wt.innerHTML=" "+vt.name;var ae=document.createElement("div");Nt.appendChild(ae),ae.appendChild(kt),ae.appendChild(Wt);var le=vt.overlay?this.overlaysList:this.baseLayersList;return le.appendChild(Nt),this.checkDisabledLayers(),Nt}},{key:"onInputClick",value:function(){var vt=this.layerControlInputs,Nt,$t,ee=[],kt=[];this.handlingClick=!0;for(var Wt=vt.length-1;Wt>=0;Wt--)Nt=vt[Wt],$t=this.layerService.getLayer(Nt.layerId),Nt.checked?ee.push($t):Nt.checked||kt.push($t);kt.forEach(function(ae){ae.hide()}),ee.forEach(function(ae){ae.show()}),this.handlingClick=!1}}]),X}(M);function O(ot){var it=L();return function(){var Et=i()(ot),vt;if(it){var Nt=i()(this).constructor;vt=Reflect.construct(Et,arguments,Nt)}else vt=Et.apply(this,arguments);return h()(this,vt)}}function L(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ot){return!1}}var H=function(ot){c()(X,ot);var it=O(X);function X(){return e()(this,X),it.apply(this,arguments)}return u()(X,[{key:"getDefault",value:function(){return{position:m.BOTTOMLEFT,name:"logo"}}},{key:"onAdd",value:function(){var vt="l7-control-logo",Nt=o.a.create("div",vt),$t=o.a.create("a","l7-ctrl-logo");return $t.target="_blank",$t.rel="noopener nofollow",$t.href="https://antv.alipay.com/l7",$t.setAttribute("aria-label","AntV logo"),$t.setAttribute("rel","noopener nofollow"),Nt.appendChild($t),Nt}},{key:"onRemove",value:function(){return null}}]),X}(M);function F(ot){var it=Z();return function(){var Et=i()(ot),vt;if(it){var Nt=i()(this).constructor;vt=Reflect.construct(Et,arguments,Nt)}else vt=Et.apply(this,arguments);return h()(this,vt)}}function Z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ot){return!1}}var G=function(ot){c()(X,ot);var it=F(X);function X(Et){var vt;return e()(this,X),vt=it.call(this,Et),vt.mScale=void 0,vt.iScale=void 0,Object(o.i)(["update"],y()(vt)),vt}return u()(X,[{key:"getDefault",value:function(){return{position:m.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,name:"scale"}}},{key:"onAdd",value:function(){var vt="l7-control-scale",Nt=o.a.create("div",vt);this.addScales(vt+"-line",Nt);var $t=this.controlOption.updateWhenIdle;return this.mapsService.on($t?"moveend":"mapmove",this.update),this.mapsService.on($t?"zoomend":"zoomchange",this.update),this.update(),Nt}},{key:"onRemove",value:function(){var vt=this.controlOption.updateWhenIdle;this.mapsService.off(vt?"zoomend":"zoomchange",this.update),this.mapsService.off(vt?"moveend":"mapmove",this.update)}},{key:"update",value:function(){var vt=this.mapsService,Nt=this.controlOption.maxWidth,$t=vt.getSize()[1]/2,ee=vt.containerToLngLat([0,$t]),kt=vt.containerToLngLat([Nt,$t]),Wt=Object(o.q)([ee.lng,ee.lat],[kt.lng,kt.lat]);this.updateScales(Wt)}},{key:"updateScales",value:function(vt){var Nt=this.controlOption,$t=Nt.metric,ee=Nt.imperial;$t&&vt&&this.updateMetric(vt),ee&&vt&&this.updateImperial(vt)}},{key:"updateMetric",value:function(vt){var Nt=this.getRoundNum(vt),$t=Nt<1e3?Nt+" m":Nt/1e3+" km";this.updateScale(this.mScale,$t,Nt/vt)}},{key:"updateImperial",value:function(vt){var Nt=vt*3.2808399,$t,ee,kt;Nt>5280?($t=Nt/5280,ee=this.getRoundNum($t),this.updateScale(this.iScale,ee+" mi",ee/$t)):(kt=this.getRoundNum(Nt),this.updateScale(this.iScale,kt+" ft",kt/Nt))}},{key:"updateScale",value:function(vt,Nt,$t){var ee=this.controlOption.maxWidth;vt.style.width=Math.round(ee*$t)+"px",vt.innerHTML=Nt}},{key:"getRoundNum",value:function(vt){var Nt=Math.pow(10,(Math.floor(vt)+"").length-1),$t=vt/Nt;return $t=$t>=10?10:$t>=5?5:$t>=3?3:$t>=2?2:1,Nt*$t}},{key:"addScales",value:function(vt,Nt){var $t=this.controlOption,ee=$t.metric,kt=$t.imperial;ee&&(this.mScale=o.a.create("div",vt,Nt)),kt&&(this.iScale=o.a.create("div",vt,Nt))}}]),X}(M);function U(ot){var it=Y();return function(){var Et=i()(ot),vt;if(it){var Nt=i()(this).constructor;vt=Reflect.construct(Et,arguments,Nt)}else vt=Et.apply(this,arguments);return h()(this,vt)}}function Y(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ot){return!1}}var J=function(ot){c()(X,ot);var it=U(X);function X(Et){var vt;return e()(this,X),vt=it.call(this,Et),vt.disabled=void 0,vt.zoomInButton=void 0,vt.zoomOutButton=void 0,Object(o.i)(["updateDisabled","zoomIn","zoomOut"],y()(vt)),vt}return u()(X,[{key:"getDefault",value:function(){return{position:m.TOPLEFT,zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out",name:"zoom"}}},{key:"onAdd",value:function(){var vt="l7-control-zoom",Nt=o.a.create("div",vt+" l7-bar");return this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,vt+"-in",Nt,this.zoomIn),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,vt+"-out",Nt,this.zoomOut),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),this.updateDisabled(),Nt}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"zoomIn",value:function(){!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}},{key:"zoomOut",value:function(){!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}},{key:"createButton",value:function(vt,Nt,$t,ee,kt){var Wt=o.a.create("a",$t,ee);return Wt.innerHTML=vt,Wt.title=Nt,Wt.href="javascript:void(0)",Wt.addEventListener("click",kt),Wt}},{key:"updateDisabled",value:function(){var vt=this.mapsService,Nt="l7-disabled";o.a.removeClass(this.zoomInButton,Nt),o.a.removeClass(this.zoomOutButton,Nt),(this.disabled||vt.getZoom()<=vt.getMinZoom())&&o.a.addClass(this.zoomOutButton,Nt),(this.disabled||vt.getZoom()>=vt.getMaxZoom())&&o.a.addClass(this.zoomInButton,Nt)}}]),X}(M);function rt(ot,it){var X=Object.keys(ot);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(ot);it&&(Et=Et.filter(function(vt){return Object.getOwnPropertyDescriptor(ot,vt).enumerable})),X.push.apply(X,Et)}return X}function ft(ot){for(var it=1;it<arguments.length;it++){var X=arguments[it]!=null?arguments[it]:{};it%2?rt(Object(X),!0).forEach(function(Et){E()(ot,Et,X[Et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ot,Object.getOwnPropertyDescriptors(X)):rt(Object(X)).forEach(function(Et){Object.defineProperty(ot,Et,Object.getOwnPropertyDescriptor(X,Et))})}return ot}function dt(ot){var it=ut();return function(){var Et=i()(ot),vt;if(it){var Nt=i()(this).constructor;vt=Reflect.construct(Et,arguments,Nt)}else vt=Et.apply(this,arguments);return h()(this,vt)}}function ut(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ot){return!1}}var Lt=function(ot){c()(X,ot);var it=dt(X);function X(Et){var vt;return e()(this,X),vt=it.call(this),vt.markerOption=void 0,vt.defaultMarker=void 0,vt.popup=void 0,vt.mapsService=void 0,vt.sceneSerive=void 0,vt.lngLat=void 0,vt.scene=void 0,vt.added=!1,vt.eventHandle=function(Nt){vt.emit(Nt.type,{target:Nt,data:vt.markerOption.extData,lngLat:vt.lngLat})},vt.markerOption=ft(ft({},vt.getDefault()),Et),Object(o.i)(["update","onMove","onUp","addDragHandler","onMapClick"],y()(vt)),vt.init(),vt}return u()(X,[{key:"getDefault",value:function(){return{element:void 0,anchor:o.f.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(vt){this.scene=vt,this.mapsService=vt.get(a.TYPES.IMapService),this.sceneSerive=vt.get(a.TYPES.ISceneService);var Nt=this.markerOption,$t=Nt.element,ee=Nt.draggable;return this.mapsService.getMarkerContainer().appendChild($t),this.registerMarkerEvent($t),this.mapsService.on("camerachange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("mousedown",this.addDragHandler),this.mapsService.off("touchstart",this.addDragHandler),this.mapsService.off("mouseup",this.onUp),this.mapsService.off("touchend",this.onUp)),this.unRegisterMarkerEvent(),this.removeAllListeners();var vt=this.markerOption.element;return vt&&o.a.remove(vt),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(vt){return this.lngLat=vt,Array.isArray(vt)&&(this.lngLat={lng:vt[0],lat:vt[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(vt){var Nt=this;if(!this.added)return this.once("added",function(){Nt.setElement(vt)}),this;var $t=this.markerOption.element;return $t&&o.a.remove($t),this.markerOption.element=vt,this.init(),this.mapsService.getMarkerContainer().appendChild(vt),this.registerMarkerEvent(vt),this.update(),this}},{key:"openPopup",value:function(){var vt=this;if(!this.added)return this.once("added",function(){vt.openPopup()}),this;var Nt=this.popup;return Nt?(Nt.isOpen()||Nt.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var vt=this;this.added||this.once("added",function(){vt.closePopup()});var Nt=this.popup;return Nt&&Nt.remove(),this}},{key:"setPopup",value:function(vt){return this.popup=vt,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var vt=this.popup;if(vt)vt.isOpen()?vt.remove():vt.addTo(this.scene);else return this;return this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(vt){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(vt){this.markerOption.extData=vt}},{key:"update",value:function(){if(!!this.mapsService){var vt=this.markerOption,Nt=vt.element,$t=vt.anchor;this.updatePosition(),o.a.setTransform(Nt,"".concat(o.e[$t]))}}},{key:"onMapClick",value:function(vt){var Nt=this.markerOption.element;this.popup&&Nt&&this.togglePopup()}},{key:"updatePosition",value:function(){if(!!this.mapsService){var vt=this.markerOption,Nt=vt.element,$t=vt.offsets,ee=this.lngLat,kt=ee.lng,Wt=ee.lat,ae=this.mapsService.getBounds(),le=this.mapsService.lngLatToContainer([kt,Wt]);if(Nt){Nt.style.display="block";var je=this.mapsService.getContainer(),Oe=0,We=0;if(je&&(Oe=je.scrollWidth,We=je.scrollHeight),Math.abs(ae[0][0])>180||Math.abs(ae[1][0])>180){if(le.x>Oe){var Ye=this.mapsService.lngLatToContainer([kt-360,Wt]);le.x=Ye.x}if(le.x<0){var wn=this.mapsService.lngLatToContainer([kt+360,Wt]);le.x=wn.x}}(le.x>Oe||le.x<0||le.y>We||le.y<0)&&(Nt.style.display="none"),Nt.style.left=le.x+$t[0]+"px",Nt.style.top=le.y-$t[1]+"px"}}}},{key:"init",value:function(){var vt=this,Nt=this.markerOption.element,$t=this.markerOption,ee=$t.color,kt=$t.anchor;if(!Nt){this.defaultMarker=!0,Nt=o.a.create("div"),this.markerOption.element=Nt;var Wt=document.createElementNS("http://www.w3.org/2000/svg","svg");Wt.setAttributeNS(null,"display","block"),Wt.setAttributeNS(null,"height","48px"),Wt.setAttributeNS(null,"width","48px"),Wt.setAttributeNS(null,"viewBox","0 0 1024 1024");var ae=document.createElementNS("http://www.w3.org/2000/svg","path");ae.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),ae.setAttributeNS(null,"fill",ee),Wt.appendChild(ae),Nt.appendChild(Wt)}o.a.addClass(Nt,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(function(le){var je,Oe,We=((je=vt.markerOption)===null||je===void 0?void 0:je.style)&&((Oe=vt.markerOption)===null||Oe===void 0?void 0:Oe.style[le]);Nt&&(Nt.style[le]=We)}),Nt.addEventListener("click",function(le){vt.onMapClick(le)}),Nt.addEventListener("click",this.eventHandle),Object(o.g)(Nt,kt,"marker")}},{key:"registerMarkerEvent",value:function(vt){vt.addEventListener("mousemove",this.eventHandle),vt.addEventListener("click",this.eventHandle),vt.addEventListener("mousedown",this.eventHandle),vt.addEventListener("mouseup",this.eventHandle),vt.addEventListener("dblclick",this.eventHandle),vt.addEventListener("contextmenu",this.eventHandle),vt.addEventListener("mouseover",this.eventHandle),vt.addEventListener("mouseout",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var vt=this.getElement();vt.removeEventListener("mousemove",this.eventHandle),vt.removeEventListener("click",this.eventHandle),vt.removeEventListener("mousedown",this.eventHandle),vt.removeEventListener("mouseup",this.eventHandle),vt.removeEventListener("dblclick",this.eventHandle),vt.removeEventListener("contextmenu",this.eventHandle),vt.removeEventListener("mouseover",this.eventHandle),vt.removeEventListener("mouseout",this.eventHandle)}},{key:"addDragHandler",value:function(vt){throw new Error("Method not implemented.")}},{key:"onUp",value:function(vt){throw new Error("Method not implemented.")}}]),X}(l.EventEmitter),Ft=R("QkVN"),Ot=R.n(Ft),St=R("mpbz"),xt=R.n(St);function At(ot,it){var X=Object.keys(ot);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(ot);it&&(Et=Et.filter(function(vt){return Object.getOwnPropertyDescriptor(ot,vt).enumerable})),X.push.apply(X,Et)}return X}function nt(ot){for(var it=1;it<arguments.length;it++){var X=arguments[it]!=null?arguments[it]:{};it%2?At(Object(X),!0).forEach(function(Et){E()(ot,Et,X[Et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ot,Object.getOwnPropertyDescriptors(X)):At(Object(X)).forEach(function(Et){Object.defineProperty(ot,Et,Object.getOwnPropertyDescriptor(X,Et))})}return ot}function Mt(ot){var it=z();return function(){var Et=i()(ot),vt;if(it){var Nt=i()(this).constructor;vt=Reflect.construct(Et,arguments,Nt)}else vt=Et.apply(this,arguments);return h()(this,vt)}}function z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ot){return!1}}var Q=function(ot){c()(X,ot);var it=Mt(X);function X(Et){var vt,Nt;return e()(this,X),Nt=it.call(this),Nt.markers=[],Nt.markerLayerOption=void 0,Nt.clusterIndex=void 0,Nt.points=[],Nt.clusterMarkers=[],Nt.mapsService=void 0,Nt.scene=void 0,Nt.zoom=void 0,Nt.bbox=void 0,Nt.markerLayerOption=Ot()(Nt.getDefault(),Et),Object(o.i)(["update"],y()(Nt)),Nt.zoom=((vt=Nt.markerLayerOption.clusterOption)===null||vt===void 0?void 0:vt.zoom)||-99,Nt}return u()(X,[{key:"getDefault",value:function(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}},{key:"addTo",value:function(vt){return this.scene=vt,this.mapsService=vt.get(a.TYPES.IMapService),this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update)),this.addMarkers(),this}},{key:"addMarker",value:function(vt){var Nt=this.markerLayerOption.cluster;Nt&&this.addPoint(vt,this.markers.length),this.markers.push(vt)}},{key:"removeMarker",value:function(vt){this.markers.indexOf(vt);var Nt=this.markers.indexOf(vt);Nt>-1&&this.markers.splice(Nt,1)}},{key:"getMarkers",value:function(){var vt=this.markerLayerOption.cluster;return vt?this.clusterMarkers:this.markers}},{key:"addMarkers",value:function(){var vt=this;this.getMarkers().forEach(function(Nt){Nt.addTo(vt.scene)})}},{key:"clear",value:function(){this.markers.forEach(function(vt){vt.remove()}),this.clusterMarkers.forEach(function(vt){vt.remove()}),this.mapsService.off("camerachange",this.update),this.markers=[],this.clusterMarkers=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"addPoint",value:function(vt,Nt){var $t=vt.getLnglat(),ee=$t.lng,kt=$t.lat,Wt={geometry:{type:"Point",coordinates:[ee,kt]},properties:nt(nt({},vt.getExtData()),{},{marker_id:Nt})};this.points.push(Wt)}},{key:"initCluster",value:function(){if(!!this.markerLayerOption.cluster){var vt=this.markerLayerOption.clusterOption,Nt=vt.radius,$t=vt.minZoom,ee=$t===void 0?0:$t,kt=vt.maxZoom;this.clusterIndex=new xt.a({radius:Nt,minZoom:ee,maxZoom:kt}),this.clusterIndex.load(this.points)}}},{key:"getClusterMarker",value:function(vt,Nt){var $t=this,ee=vt[0].concat(vt[1]),kt=this.clusterIndex.getClusters(ee,Nt);this.clusterMarkers.forEach(function(Wt){Wt.remove()}),this.clusterMarkers=[],kt.forEach(function(Wt){var ae,le=$t.markerLayerOption.clusterOption,je=le.field,Oe=le.method;if(Wt.properties&&(ae=Wt.properties)!==null&&ae!==void 0&&ae.cluster_id){var We,Ye=$t.getLeaves((We=Wt.properties)===null||We===void 0?void 0:We.cluster_id);if(Wt.properties.clusterData=Ye,je&&Oe){var wn=Ye==null?void 0:Ye.map(function(An){var jn=E()({},je,An.properties[je]);return jn}),er=o.c.getColumn(wn,je),wr=o.c.getSatByColumn(Oe,er),on="point_"+Oe;Wt.properties[on]=wr.toFixed(2)}}var en=$t.clusterMarker(Wt);$t.clusterMarkers.push(en),en.addTo($t.scene)})}},{key:"getLeaves",value:function(vt){var Nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Infinity,$t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return vt?this.clusterIndex.getLeaves(vt,Nt,$t):null}},{key:"clusterMarker",value:function(vt){var Nt=this.markerLayerOption.clusterOption,$t=Nt,ee=$t.element,kt=ee===void 0?this.generateElement.bind(this):ee,Wt=new Lt({element:kt(vt)}).setLnglat({lng:vt.geometry.coordinates[0],lat:vt.geometry.coordinates[1]});return Wt}},{key:"normalMarker",value:function(vt){var Nt=vt.properties.marker_id;return this.markers[Nt]}},{key:"update",value:function(){var vt=this.mapsService.getZoom(),Nt=this.mapsService.getBounds();(!this.bbox||Math.abs(vt-this.zoom)>=1||!Object(o.j)(this.bbox,Nt))&&(this.bbox=Object(o.r)(Nt,.5),this.zoom=Math.floor(vt),this.getClusterMarker(this.bbox,this.zoom))}},{key:"generateElement",value:function(vt){var Nt=o.a.create("div","l7-marker-cluster"),$t=o.a.create("div","",Nt),ee=o.a.create("span","",$t),kt=this.markerLayerOption.clusterOption,Wt=kt.field,ae=kt.method;vt.properties.point_count=vt.properties.point_count||1;var le=Wt&&ae?vt.properties["point_"+ae]||vt.properties[Wt]:vt.properties.point_count;return ee.textContent=le,Nt}}]),X}(l.EventEmitter);function ht(ot,it){var X=Object.keys(ot);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(ot);it&&(Et=Et.filter(function(vt){return Object.getOwnPropertyDescriptor(ot,vt).enumerable})),X.push.apply(X,Et)}return X}function et(ot){for(var it=1;it<arguments.length;it++){var X=arguments[it]!=null?arguments[it]:{};it%2?ht(Object(X),!0).forEach(function(Et){E()(ot,Et,X[Et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ot,Object.getOwnPropertyDescriptors(X)):ht(Object(X)).forEach(function(Et){Object.defineProperty(ot,Et,Object.getOwnPropertyDescriptor(X,Et))})}return ot}function at(ot){var it=gt();return function(){var Et=i()(ot),vt;if(it){var Nt=i()(this).constructor;vt=Reflect.construct(Et,arguments,Nt)}else vt=Et.apply(this,arguments);return h()(this,vt)}}function gt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ot){return!1}}var k=function(ot){c()(X,ot);var it=at(X);function X(Et){var vt;return e()(this,X),vt=it.call(this),vt.popupOption=void 0,vt.mapsService=void 0,vt.sceneSerive=void 0,vt.lngLat=void 0,vt.content=void 0,vt.closeButton=void 0,vt.timeoutInstance=void 0,vt.container=void 0,vt.tip=void 0,vt.scene=void 0,vt.popupOption=et(et({},vt.getdefault()),Et),Object(o.i)(["update","onClickClose","remove"],y()(vt)),vt}return u()(X,[{key:"addTo",value:function(vt){var Nt=this;return this.mapsService=vt.get(a.TYPES.IMapService),this.sceneSerive=vt.get(a.TYPES.ISceneService),this.mapsService.on("camerachange",this.update),this.scene=vt,this.update(),this.popupOption.closeOnClick&&(this.timeoutInstance=setTimeout(function(){Nt.mapsService.on("click",Nt.onClickClose)},30)),this.emit("open"),this}},{key:"close",value:function(){this.remove()}},{key:"open",value:function(){this.addTo(this.scene)}},{key:"setHTML",value:function(vt){var Nt=window.document.createDocumentFragment(),$t=window.document.createElement("body"),ee;for($t.innerHTML=vt;ee=$t.firstChild,!!ee;)Nt.appendChild(ee);return this.setDOMContent(Nt)}},{key:"setLnglat",value:function(vt){return this.lngLat=vt,Array.isArray(vt)&&(this.lngLat={lng:vt[0],lat:vt[1]}),this.mapsService&&this.mapsService.on("camerachange",this.update),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setText",value:function(vt){return this.setDOMContent(window.document.createTextNode(vt))}},{key:"setMaxWidth",value:function(vt){return this.popupOption.maxWidth=vt,this.update(),this}},{key:"setDOMContent",value:function(vt){return this.createContent(),this.content.appendChild(vt),this.update(),this}},{key:"remove",value:function(){return this.content&&this.removeDom(this.content),this.container&&(this.removeDom(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("click",this.onClickClose),delete this.mapsService),clearTimeout(this.timeoutInstance),this.emit("close"),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"createContent",value:function(){this.content&&o.a.remove(this.content),this.content=o.a.create("div","l7-popup-content",this.container),this.popupOption.closeButton&&(this.closeButton=o.a.create("button","l7-popup-close-button",this.content),this.closeButton.setAttribute("aria-label","Close popup"),this.closeButton.innerHTML="&#215;",this.closeButton.addEventListener("click",this.onClickClose))}},{key:"creatDom",value:function(vt,Nt,$t){var ee=window.document.createElement(vt);return Nt!==void 0&&(ee.className=Nt),$t&&$t.appendChild(ee),ee}},{key:"removeDom",value:function(vt){vt.parentNode&&vt.parentNode.removeChild(vt)}},{key:"getdefault",value:function(){return{closeButton:!0,closeOnClick:!0,maxWidth:"240px",offsets:[0,0],anchor:o.f.BOTTOM,className:"",stopPropagation:!0}}},{key:"onClickClose",value:function(vt){vt.stopPropagation&&vt.stopPropagation(),this.remove()}},{key:"update",value:function(){var vt=this,Nt=this.lngLat,$t=this.popupOption,ee=$t.className,kt=$t.maxWidth,Wt=$t.anchor;if(!(!this.mapsService||!Nt||!this.content)){var ae=this.mapsService.getMarkerContainer();if(!this.container&&ae){this.container=this.creatDom("div","l7-popup",ae),this.tip=this.creatDom("div","l7-popup-tip",this.container),this.container.appendChild(this.content),ee&&ee.split(" ").forEach(function(je){return vt.container.classList.add(je)});var le=this.popupOption.stopPropagation;le&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(function(je){vt.container.addEventListener(je,function(Oe){Oe.stopPropagation()})})}kt&&this.container.style.maxWidth!==kt&&(this.container.style.maxWidth=kt),this.updatePosition(),o.a.setTransform(this.container,"".concat(o.e[Wt])),Object(o.g)(this.container,Wt,"popup")}}},{key:"updatePosition",value:function(){if(!!this.mapsService){var vt=this.lngLat,Nt=vt.lng,$t=vt.lat,ee=this.popupOption.offsets,kt=this.mapsService.lngLatToContainer([Nt,$t]);this.container.style.left=kt.x+ee[0]+"px",this.container.style.top=kt.y-ee[1]+"px"}}}]),X}(l.EventEmitter);R("BGjm")(`/* @antv/l7-component */
.l7-marker-container {
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: absolute;
 }

.l7-marker {
	position: absolute !important;
	top: 0;
	left: 0;
  z-index: 5;
  cursor: pointer;
}

.l7-marker-cluster {
  background-clip: padding-box;
  border-radius: 20px;
  background-color: rgba(181, 226, 140, 0.6);
  width: 40px;
  height: 40px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-left: 5px;
  margin-top: 5px;
  text-align: center;
  border-radius: 15px;
  font: 12px "Helvetica Neue", Arial, Helvetica, sans-serif;
  background-color: rgba(110, 204, 57, 0.6);
}
.l7-marker-cluster span {
  line-height: 30px;
}

.l7-popup-anchor-bottom,
.l7-popup-anchor-bottom-left,
.l7-popup-anchor-bottom-right {
    -webkit-flex-direction: column-reverse;
    -webkit-box-orient: vertical;
    -webkit-box-direction: reverse;
        -ms-flex-direction: column-reverse;
            flex-direction: column-reverse;
}

.l7-popup-close-button {
  position: absolute;
  right: 0;
  top: 0;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
  background-color: transparent;
}

.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

	/* layers control */

.l7-control-layers {
	-webkit-box-shadow: 0 1px 5px rgba(0,0,0,0.4);
	        box-shadow: 0 1px 5px rgba(0,0,0,0.4);
	background: #fff;
	border-radius: 5px;
	}
.l7-popup-anchor-top,
.l7-popup-anchor-top-left,
.l7-popup-anchor-top-right {
    -webkit-flex-direction: column;
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
        -ms-flex-direction: column;
            flex-direction: column;
}


.l7-popup-anchor-left {
    -webkit-flex-direction: row;
    -webkit-box-orient: horizontal;
    -webkit-box-direction: normal;
        -ms-flex-direction: row;
            flex-direction: row;
}

.l7-popup-anchor-right {
    -webkit-flex-direction: row-reverse;
    -webkit-box-orient: horizontal;
    -webkit-box-direction: reverse;
        -ms-flex-direction: row-reverse;
            flex-direction: row-reverse;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  display: -webkit-flex;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  will-change: transform;
  pointer-events: none;
  z-index: 5;
}
.l7-popup-tip {
  width: 0;
  height: 0;
  border: 10px solid transparent;
  z-index: 1;
}
.l7-popup-anchor-top .l7-popup-tip {
	-webkit-align-self: center;
	-ms-flex-item-align: center;
	    align-self: center;
	border-top: none;
	border-bottom-color: #fff;
}

.l7-popup-anchor-top-left .l7-popup-tip {
	-webkit-align-self: flex-start;
	-ms-flex-item-align: start;
	    align-self: flex-start;
	border-top: none;
	border-left: none;
	border-bottom-color: #fff;
}

.l7-popup-anchor-top-right .l7-popup-tip {
	-webkit-align-self: flex-end;
	-ms-flex-item-align: end;
	    align-self: flex-end;
	border-top: none;
	border-right: none;
	border-bottom-color: #fff;
}

.l7-popup-anchor-bottom .l7-popup-tip {
	-webkit-align-self: center;
	-ms-flex-item-align: center;
	    align-self: center;
	border-bottom: none;
	border-top-color: #fff;
}

.l7-popup-anchor-bottom-left .l7-popup-tip {
	-webkit-align-self: flex-start;
	-ms-flex-item-align: start;
	    align-self: flex-start;
	border-bottom: none;
	border-left: none;
	border-top-color: #fff;
}

.l7-popup-anchor-bottom-right .l7-popup-tip {
	-webkit-align-self: flex-end;
	-ms-flex-item-align: end;
	    align-self: flex-end;
	border-bottom: none;
	border-right: none;
	border-top-color: #fff;
}

.l7-popup-anchor-left .l7-popup-tip {
	-webkit-align-self: center;
	-ms-flex-item-align: center;
	    align-self: center;
	border-left: none;
	border-right-color: #fff;
}

.l7-popup-anchor-right .l7-popup-tip {
	-webkit-align-self: center;
	-ms-flex-item-align: center;
	    align-self: center;
	border-right: none;
	border-left-color: #fff;
}

.l7-popup-close-button {
	position: absolute;
	right: 0;
	top: 0;
	border: 0;
	padding: 0;
	font-size: 25px;
	line-height: 20px;
	border-radius: 0 3px 0 0;
	cursor: pointer;
	background-color: transparent;
}

.l7-popup-close-button:hover {
	background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
	position: relative;
	background: #fff;
	border-radius: 3px;
	-webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
	        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
	padding: 10px 10px 15px;
	pointer-events: auto;
}

.l7-popup-anchor-top-left .l7-popup-content {
	border-top-left-radius: 0;
}

.l7-popup-anchor-top-right .l7-popup-content {
	border-top-right-radius: 0;
}

.l7-popup-anchor-bottom-left .l7-popup-content {
	border-bottom-left-radius: 0;
}

.l7-popup-anchor-bottom-right .l7-popup-content {
	border-bottom-right-radius: 0;
}

.l7-popup-track-pointer {
	display: none;
}

.l7-popup-track-pointer * {
	pointer-events: none;
	-webkit-user-select: none;
	   -moz-user-select: none;
	    -ms-user-select: none;
	        user-select: none;
}

.l7-map:hover .l7-popup-track-pointer {
	display: -webkit-box;
	display: -webkit-flex;
	display: -ms-flexbox;
	display: flex;
}

.l7-map:active .l7-popup-track-pointer {
	display: none;
}


.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

/* general toolbar styles */

.l7-bar {
	-webkit-box-shadow: 0 1px 5px rgba(0,0,0,0.65);
	        box-shadow: 0 1px 5px rgba(0,0,0,0.65);
	border-radius: 4px;
	}
.l7-bar a,
.l7-bar a:hover {
	background-color: #fff;
	width: 30px;
	height: 30px;
  font-size: 20px;
	display: block;
	text-align: center;
	text-decoration: none;
	color: #8E9DAB;
	}
.l7-bar a,
.l7-control-layers-toggle {
	background-position: 50% 50%;
	background-repeat: no-repeat;
	display: block;
	}
.l7-bar a:hover {
	background-color: #f4f4f4;
	}
.l7-bar a:first-child {
	border-top-left-radius: 2px;
	border-top-right-radius: 2px;
	}
.l7-bar a:last-child {
	border-bottom-left-radius: 2px;
	border-bottom-right-radius: 2px;
	border-bottom: none;
	}
.l7-bar a.l7-disabled {
	cursor: default;
	background-color: #f4f4f4;
	color: #bbb;
	}


/* control positioning */

.l7-control-container {
	font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;
}
.l7-control-hide {
	display: none;
}
.l7-control {
	position: relative;
	z-index: 800;
	pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */
	pointer-events: auto;
	}
.l7-control {
	float: left;
	clear: both;
	}.l7-top,
  .l7-bottom {
    position: absolute;
    z-index: 1000;
    pointer-events: none;
    }
  .l7-top {
    top: 0;
    }
  .l7-right {
    right: 0;
    }
  .l7-bottom {
    bottom: 0;
    }
  .l7-left {
    left: 0;
    }

  .l7-control {
    float: left;
    clear: both;
    }
  .l7-right .l7-control {
    float: right;
    }
  .l7-top .l7-control {
    margin-top: 10px;
    }
  .l7-bottom .l7-control {
    margin-bottom: 10px;
    }
  .l7-left .l7-control {
    margin-left: 10px;
    }
  .l7-right .l7-control {
    margin-right: 10px;
    }

  /* attribution and scale controls */

.l7-control-container .l7-control-attribution {
	background: #fff;
	background: rgba(255, 255, 255, 0.7);
	margin: 0;
	}
.l7-control-attribution,
.l7-control-scale-line {
	padding: 0 5px;
  color: #333;
	}
.l7-control-attribution a {
	text-decoration: none;
	}
.l7-control-attribution a:hover {
	text-decoration: underline;
	}
.l7-container .l7-control-attribution,
.l7-container .l7-control-scale {
  font-size: 11px;
  padding: 5px 5px 2px 5px;
  background: rgba(255, 255, 255, 0.7);
	}
.l7-left .l7-control-scale {
	margin-left: 5px;
	}
.l7-bottom .l7-control-scale {
	margin-bottom: 5px;
	}
.l7-control-scale-line {
	border: 2px solid #000;
  border-top: none;
  color: #000;
	line-height: 1.1;
	padding: 2px 5px 1px;
	font-size: 11px;
	white-space: nowrap;
	overflow: hidden;
	-webkit-box-sizing: border-box;
	        box-sizing: border-box;

	background: #fff;
	}
.l7-control-scale-line:not(:first-child) {
	border-top: 2px solid #777;
	border-bottom: none;
	margin-top: -2px;
	}
.l7-control-scale-line:not(:first-child):not(:last-child) {
	border-bottom: 2px solid #777;
	}

.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
	-webkit-box-shadow: none;
	        box-shadow: none;
	}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
	border: 2px solid rgba(0,0,0,0.2);
	background-clip: padding-box;
  }
  /*logo */

  .l7-ctrl-logo {
    background-size: 100% 100%;
    width: 89px;
    height: 16px;
    margin: 0 0 -3px -3px;
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    background-repeat: no-repeat;
    cursor: pointer;
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALIAAAAgCAYAAAHBIxK2AAAABGdBTUEAALGPC/xhBQAAIJZJREFUeAHtfAl8Tkf3/9z7PNmDRFbZSawhQcRSaqva1xCqpataqrT2UkuUUiqlaKtafe1VS1pUiypB0dIgIkpKRPZIELI/2/zO98akN48nltL3838//84nNzNzzpkzc+eee+bMOXMfxijNaMJ7LOrGO/HdYfZ8fb12gD2JJINJdR8WNHVQnRtSn7hilpz0u2DMKaEcFhZmhdzLNbiPyNVlwPxcm4Qh93Fr0gO4Ol5hfqiz6Q14G+QzGpYzQ9nXrUl7X/fgbrXdG3skX7m26+bNW2fQqJ5XmCs6RQKd6EQwB0zgtKgsvCidGF+N8wV/SBLqSKnXzx2WKIHw1xNxq2xtrKsBXqgrbePt1rivJFmloa5OoD129NcVQwa9Phxwaflw3ifvHCus1YIVjW7fwEF66dIhdYO/XV7Qk+9HY/5F7RA+w0G5TdRxq7gw10FBPWwA+3r9jpkYGcoJ5/7YiFxMiYCjLspsekOeCiJ1AhJJNER+8rfTX/j4BNcUMNCLMmhF+wC3cE9RZmMd/0IQjeTtGdwJjURD5EajsRQN1EwEHjAkUVce2LLhnKf8xGId3ZhkX4uxmj7MMKqJz0ZmMr3MJNZBmphV8WDBOCCgo+2QiE7DF3005wvU75e8vMLs4+P3HwwN7do5MzOu2NcjpPHRX/csCqjt2wvtxEAy8xJ3o+7j3jjkcurpn2xtrT0EPiS0oQPKSOfi/ygqL9H/qNbls8EXuer4+65xUa149QnBvGYFgapAN21EZ+pnuH3rrrnKdNA/zCRmjoqGzu36RoL21q38BLAAjRgo6iir63g1QAOcOoU27DAgwKtpPzVMKU+qBWIuve3Jx0zw4j/eQ0CASeNnjUi5mrYH72ZxUfFV0emJ479/BvrM9KxDAgZZEjziTp1d8+pL415sEdJloIAhF7QCZmnQoCkuLkkXNPfkozU8b4wVb30P4i4ADNQ41P08mtSBogHc27Vx70CPEHeUgRNwgUOuTqBR8wwODraGSIkrKipKxqVuI300mntri1jz9OOs0IHeHUdvms2t0iG+vn5nxmnan5QeUff6GGWttpidSjvGbCSZJdAAGTMwtjWSH2G5XrOp3oEv9wuWxqdeUPchZkW8OGqcedmcdujgUcMOH/zltmgL2YW2Fu22fbMz6q2xM+IEvmvHiCGyRq7AK3QLe959+T6v46co0uVBisLk0/9SqIIhcnQiVBPqULJ4dPVd2ypLg6Dx8wxuhAGDHrCOHTtqUfZ2b6KsYYIOuUiXL1/dKW4SMJRxkbbpG9nv5ecVutlt+PSoNvw7VPg8V4X5wqf4YQVp9g+NDQZDITr2cm/8lNIGlbvp+edGD/946eqJqOKmoBJRhjyjrclk0qlZAqeumw8YOEwE6ILdgh0raN9pcHeWx9n3mViPh9IKnlmBVBWI4bfoePDAEcOGPz9WWUDBzMe1cUdft5CnUfb2DvFR8rsz2avrkOdmT18wJisz5zDaqthVWjwAtzRgtBF9VbSdVofXIPWmB2CCouYqUBUFH59QbwwEqg0XykAi96/VuCEetRrm59msEfA+nqEtAUeqNEt324JGJEsDxpMi26gnaCpUxqJk6bahkGFp3akrZO8IBurcVGponpGW+VOdQP++uIAznzE1/cBBvRRZTc+OP0miUBJ78OiyxNxE6uX+KSP3vDIZuEE/z9BgWZZtHHj1oxZbkS6uJFNqIn+SWSy1AubjFtLd171xoHrQooyFQJRB7+0eHBrk2cxNtBW5mgYwoYNFXg5r7CvoFXWxajQ3mjiTc84wVkB2kTWt5NYk3lZ02SCvzphDDVrNZOY2p3mdA0wrhQoGSm5ig6SRyTsqwSxUaMKk+t4tXJIy4/IsoP82yNu7pYusKwk2WdslZmScvGHOyNs1tJ5GNrjVaeT2W2xsLCnuv5J6woQq/QtbXoLCMJqYtbWj208pKbGK4aamgWJR19XlCvpFEdxn6SDOl0byAjXB/cp8rlM/PteZ83k1T92PTuAw0Ly8GychmosWLB/v7xFSW+AeJQ/0auyLiYFEBgQ0dYKdDRsJfFOvpe0V76fgCVrgkNQTao63hAONr2vjFtAFltoTTFLzB415Al7RFdNipHRviWlLbzCHhZ05HxfEy9e7T/zX8FV+XLk+96e8Tl0xOJZfOpjdKp4kzboZXgGrouDj1rTunHnTQl1caoZ/unLNlKnTx32sNxobR0ZGakQTDCY8tEtEkG+LfihDg+NC2ccjpBXoyMTqVaLjTaFLduxe219XqH+67HYGKU5D0pbN30X5+vl0a9m6mZOPTxvFUIayPRAbM1RpS1uztp0a/SD6e9hcYlKVqgi7QEg/DAyRsAUsKSlNLyvT56Bs8e2Ias4LZzfnfEowJyOOVocZDs9jt8YnMDvUZzblZ+jis1rwtqg/KMHgwEThCUOCUS64U/An6iiL9oIGcFjwqMOQQB0JdTyEXd/tfR/1rMzsWCrPBxwPCxJMfJMELVYq0KO+fNkXk6CHRV/qXPSLXA0XZejpqiRZ0IgcY7hzu+AS2TB3quInaNnU2vzSlNqcT/fhHSqAVJgawAunEXxCPU4W9MMlcRN0ryZMAl2XcOHm6YlnYgMAToIOuxks+YBBErGrAa0YtKDDDkeYAaBFErjSUl2uKOfm5v1GE9y1nOLe/4IO+b3YchfKw0wy3lZ6m2arxyr4KV4RURH54qtS/fGufEMZZ7Hja/Ko0ptsgYML0+kKGM+4wbTbmGQUtPfLMfBrWWc3gIZenX4aJmUp9OQdqunk4nv2QmzMus0rO730wtj0qu2DqnuQjCYbrOjYrINq5JuRe/CKQp3QtRMweivm0yur+FBQf9xk6WFQX99Tvw2GDO0390jssWXW1vKf6n4q7Dc1EOXledJwQxF7RV/EomQbptMXssJlNyT5YSe4dq1m/s907eik1WprNKjdur9sW/1AWt7535Ur6/zvN2/lpcds/37eM892mEgTXGHuHD1y4qLRYK0YvrJsMly5knKu0tg0csmObbvfC2/ZbETK9bOnW4TU7xtGEw0a2geZbKysz/Xu9txQvV6fX6VOrMTw/hVsdF8b/tbGgX1feqF1m7Bq5hda+/o+pVgXm9Ztmzk0ctTBlMyEi/fnaoZ9g3HH1xmv5GgwI/m3+oAZUOzkj4fx7rQBt7qdxnhJDiuj/YlBe9dG1pLNbF9D8c2dem2xVMA3NQhjBk6WMyVaelmZVaL0+vmcB/Tz/zVa+8lIPlWW2SLMQh559ZSNCE2sbCq/FBuLyrrbLJVHsYZMr/sdfpiKJOv1pOxtyISp0tQRtHXqhNWQZffSy5d/LBOwJ5H71mrcAnzSSA2Z84ObJPlCbiujSZubkRefZI5X61hL5pavbzMvY4kuTCuzm6nXE4+Ztwf/lBRmcW1zcSkwxsXF6bWmEnbQSPJsoqWMZumwUqYC7QCVi3Y6tMmnCZdYDItiJezj0v3MaLJmRmXX58w0zKJ3w3ww2IwE+fk7JSUll9b2Crl4NfPcJXOav1OH7fyfdSs6cS7zl18Y65GRd36Pmk/S+dwex0/tHTN54pxNJ0/I2tTsM5WccqDFQgn9rW4nyphg4J95ut9gZis7p6Ym3BI4L9eQ+sS/ntrbLXDIE8/fLKaHVP7goyN5whKyKKMHcsWboSasqsznORfSRYEaz3v29uZt4JiDxMC8QVJLjzntg+ow+dBe7BhRJ1MwQ/AVkRbwQbBj7OtTXgVu49qt79LDrW/OX4yrqjEJ/OIPVrwlfM2CB/rW6XQ3wd9SgjsM41SsC9pLt+H0AptK2fdRjFdYHHwdhY0QOsL1VZDimkIHfLLD8xThcmCF+p3SjOxc0WlV+Zervm2x68dN/QQ+MLC2DVSHqOOVw6ZFXDRgCXjUBQ1y7Py+3bO+HyQLO0bArGV2auRrkxRv1orPPgjXF6XVARxJz0vCPvz4vbkoT50899yTenvAD0ljLx0L8Gr2Et4C9XXnTkEiecNKv/xiU/q1nHNXlQmN2iYVlpWwL0qLmSR3ZNFgQCpCogXuLDMa45WrTH8AcCVpTL8Q7ChbVDhAgO6XmwwGj7AWoa9lZ+UcBt3ufZvn6Ar0bUSbP/+42cJQ7NhbNjj3ybpW2p0G3LtP966DUIYk0TbZDr4Kk9Ho7lXLw1+0g6qo6Wtz8+f9sfmARQzqPZNWiCCBJ/NLtrOz9SkoKPxDlmT1SiJIHiuH6oAeF5e1o9XRGjWqa6pXrxbcqlm3YY7Wtifu6WDeU1xHF59an1cDki9wm8nnU7h3AV0fergDNrsln0+BtKUoP0yizYJr/57DhuJ1wnY5/mziepTVr6e3R0hrsbPLyck7BrxIZO/eAi2uuwE4I3Aok5rIAtzPPbjtxQuXtgCOOtQTwkqrPvlqMmBd2vcfDGeSpfGCXrS7H96SujCnBy+oj6LComSoEoGvUA0A6EvZ8DLaO9nYsUOoSzNy57Oi4mJyBu2SpuRcj2rGvZievUsRgleBf5gk6cpabd62egFoaYtr6NFl8DaUoz96LzTAq0kDlNWppLhE2UTg9Tuf8MdG2sw4DRjQU9H7e3b/FE2vomLoU3nJjm92rYSEwoXZuX3EJvDZsWtdz/+sjGlqMJqCXx/90jzALlz4syQl5awi7aj/EwnxPfC1srJy7ti232Sb6jZHRT+VJvm909I3pjKWayxjYdODeLkO1hnC2OLC/mhQWsJO6UvInCtjHQWDB+XKK2tvF3Dq5JkvVR4t/tzwiHk6namuefunwruvEq9ft86RW4Ef9sqQcK2WXRkzYtKBgtsFGYCNHjHpt3enzd+cnpvwo8pHbKQd2Wg9M3qDhjz9tqd+O7tao2XZqP+TKf8Ga3vyzP630EdGRpY+OTnutuiv0iQDqDOxVgaaSDLpjqMuResukoXHpwTw7jT5XnQlfHBBOgPcgxIiEqu+jG4NuoYN63a4mHzio0vJvy7Blhcwa2srWW0NAFZVgh0uaTSKj0LQYFERZVmy+WP1Z2uno25vZyd/tX5FO5T79x72faoF+xm4J5m4geLOPl7PHPvl1CeyLF1T875nkpdckq7qdOwIqY4aEz35i+XEXCYJ30MXs7dnSghSzaSqMunN2n36dZsBfG7uzYt3r0vpaVm/AHbkxJ4xJYWpD80PbapK6bmnL8+dvURRJXsPbXu5W49OU6n/ItA/zEapKr4PA8fC7OVVS1EXgwe8sq9Nh4aJ6nYWdyrFmayLvQsrIwleF8n4Jk9ntlCvo00gZ6ujE6UHBujQAZw2ZY52Cv8fvj/wwahXJu6VGFdu2sh4rdTs+M6+fl7dSAI+kTS0yfkbCWEndbhJIzPdjRu3TgcGBijqbcHc6Km21iz+b7C22KTEaGxFi1slHDyLsrGgKHr5kvYCsW3btkpeynskGYSrmaQnvTufLubhyL6WDGwK0zH9ypvSKMHoQXmuoaztz0diJoHu9VfePp6el3BYeOGstVYJ0Ys/VSR81OjhPmQqKAvbg3hqZNOd9PTsZNAt/3Rhi+5dW/cmy6SzaGfv7HS817NDlUUWsFWfrU9LzkxMFfjHyadMe3MZ7HPzCwJjMnK/8JbNI6rib1GSQfxpoTT7TRs+mYzLSJJoWkTYsKqYWIIbTNzWuaZTA0iWOT4l+2zKxx99fpXCUKxXv+5hn6/akP7n5eRztbw9O5rToi7cnx5+0rWIvi/uSU4/M2BgZJ/ZAwb2KiO9HynaXLp0rIAkTZeff/tc7MFju2Qm0T7r8RPcnJa43MjL1+PtocUif8SrE2ZkpWWX0Tmbex4q5q/KNFLLO8mcHSTXRc7nRsmzSkILCOzWsJkAypLjBXE4U+mdtmSCGclC+AEbC8US0Wh+u5Jz7jraIWREYfRGuJG064n7AAvxCHHIMxorpLcac4q9lHesYjLRb06qrgtZMoVpuecqzCi0tZRg2wq4pXEiKCDwlnIRMMD9WFvrjGqrwhK9RRj5kp+bwLgS37NI8C/wgTOgSPLyV7ibxoa9Rp7kV8nrVo1E3qSjJSr/CuNlBUxHTswSZmLFkhWTtLSGUqSEjO7yXEN1DZW1FBuQrQllxzK5FVuTc5HtnnOIwlRf1X6Waa1GM24KoNGQT69SkpiGFtIyYwwrMK1jb1+9/U9bApV6/7fyxGYAwewzZ1IdiosNBvF2PzHmD8FIWfcoKPIV7ZZ7Q8rImmJGPWPpR0jqdMxEAs5IgEkWCUm6mf6YRITIOXIFUC6heCvIyguhPIR5s1PE9TYrMixlWkM9ZqRwC2jLkywKSm4tPc005KKeOxe+qb+oKhE9fAUOvLLi0ubYH6AVNpoaLU++lnWezs8/OLbw8D09GUp8HkB7wHCEEwVHjBkOxqvX7x906kgOzMvn89qZWLm7SbSXmXwnqLHLMdVmWKAq5eolSY2wtDyp8aIcFNSqekl+Uftjhy5IbduGV0tKulrCdMEGrcRupeYm/iLoLOXkMpJqe4fUN+hZHRM3keQ9Wip3IGiSEIupmLjooXwByeoUA2daCrSw4nx2Kucye86qhJUq7MUKSznt+SqSHcq0KAqY1okZxqySrlcQUIEvJ7e+RDocW2JdmR3T8K0UT2lOwk1viKQnh2oUuaIqrFt120ct4ySGwaALHDPuVb8ZM9+OxjlFOh95oGXzrsvpxk2e/jb7ERB6VL6PQw9hS79427lUqzOOGBGZj5i64IcPYUp1paHDXxzs+UH07NUCvnrVumlzZ334h0ajuZqWc+68gKtz+Bq//CSmq4kbrRL/PDbPyalGKPDJySm7n27V+wtJywozshMPqduYl4Ugw/oHDm455A8ryDjEhp3CkV+/HxEYGKC0/XDRyreXLVmVbKeyE8HTPOE0DNmONhS3Gu0f4NPTHP+gOj7JGRwx4icYzRU7kUlfSzMW9+PJJMTLS03MztqahXs1YuuK8tmAqFgp70FM74eXxpeHTvhkR3eKY2wic6K5YmRoWBE51UdI825tuV/7h8Uh1qQzFAf26vusy8zZE1eKdt6+Xl1ooovbt+795fVUXRuC03rzzyecisZBYwoCsvETRgbcupFfunrl1mwSHtIW7EpqduKF5My4VBIG9w3rt7L+g3qtggsRI3t91IvzNq7d/sKVK1drk8bOtaSZ16zc3pw0sdV332/sLYSYzofd7tdj+H/Aw1O2/S0DhX8wlWvFv7eI0jpJqs1gs33brv09ej6TT7wqFKulIbt7utalw5RKxJwO4+yCEGMDFdjILbFCkNFw6k7py0XP8qu0Fm8nl4UTcW1nY81ORHXjPaL2SZcFcxq2xNbUXsSstB0oiCbA5TkWCCMvYQbda9KotCuVkCbTQGYyNCFb3ESh72wmayOlRbePV6L5m5UAOh+sK8wNh4tzxaeLF99lY6KjunGuri7h0BZf/GfZBfhQfDyaNEnPSUgw70o5bm8yuZrDUcdSTXftYL4EaiT5tobZJqXknsq+p52e+wB28vT+cfQyPYtyxOA+nw/oPXwPyiKl5ibE+Xs06UJb9x/OJB4OdXd3aUMmkPX2XWsnNAvu8EGZJDWhZfi62izyouPDRh2v9cabr/iGt2o6UvCa9c7CqfQFo0Gy0ZyJyyg/uiZw/0SuNocelX9qbvwv8F5+suxzv6VLPo211J6EvRZWnCXL5jUb+sKAoaDBh5SYKzyT1JxzRzAvlQQZRNN+kn6Oepq3JXn8gar+JKZBRPQbffnSJ+qEpAgdCTjnt/UbGCt7jkq+lbZwVmQqGPlcaVJWhRBHPcXd6ciG29xDbOecNtIGCm3VkKJLnqiy0JfcbIvxxx7fOc7Gxkpx6G3ZEDNn1rsLEy5cOb6GIkIuPXt3eef5FwaO3LxpByNteTM9Pb7yGO7az7+fPTBR+Km2bIyZPWPa/Pi1m1b0b0FONnt7Oz/0g0Su6oLLSVd+GP/G9G9154uLtZL2lsnGPo6XFjyDB0wx33JCC/8NBoavKQKBogB8noskH89jxs5dOw78MC7h5/VkUjiSQD+1fvPKDi8+/+ZhX0/lawzl5bv70jZ1dHTQTJ0xfr5gv+/HQ4vXr/smC/GC9Ixz6QL+T+aPo5ExrvT0E/BwX7I0RoR9TSajFebgmWc7TgINjk6OG/POKVnLctKzE06SECtNK2+67nKLOipdIEEOp7jI73QKg+lKWE3aDB56N5wPuUvCpInpCazEEM7yS86wQloh7tBVXFLEbpa8REL8fjkdl2Y158NItDOp/XnZimXM/ZW3lJY+WSH2dwttRt5o+6+3r+6C4A/6Tkq6EjNp4uz44pIS05wZi94V4164ZNYSN1cXKyz54hyowFnK+0X0GJGccXpneKuwQRcvJB3YvXPfAgSX6CPVeBK2avUb1huy79COLecuHp1Dx5fgU+wCId70zapnhNdZaGPwb9mq2SgBRx45uK87p1Xgjh3NjrV0FmHm92YtnirGggfYp09XV5PRFIBNIeDGohstke/9edtrCNmifC0l/YdXXxz3Cxy76dfPVz4DC4L/sYQvkhFh+HT1h62EEP+45+dFEGJ8xp6enXhSfUsWBRkEM45KubIDe5qE+DsE9XSlNM2lbMv0YP4OxaJIzsm+ePd6DivMb8vu6GKYviyJFRq7Se/d+hq4KMa104PZLBLgDXRiRkPhbU5h7s03PNgx4J9UCvBsGqDnBh/YoO07PDUefEtLyzK7tI9Yh80dQtTr1m7JPHL4+HLg6GxB9f2Hy0M1CNtg5wx4VUnWaO1bNn12YJBfizf69hr+5Zujpqx5PnLUp43rtZvVtFHHCBFAdHFxDlu28v1w8JEljf6FIaN/FseJ8DGe4I9wvYAj37Z113XZVnsaZxUyM8+nkYJJw5Gjn386/JFos3Tl+3NQ1nMpDB/aGbmpxkfL329Wu46fcqiD7je7U9u+n0M72jr5nhDt/ldzH7fgIJOJ+0+aNjaw34AeihI6ezph7YiX3zpGk3sjI/fsWfN7q1KQQUibvNIF51kECfMysmuNlFPUjy2sHchWvhzAyXNM9aWshDTsQOmD0vrShwWKkI704vZFddkXRDuXhJgsELKYS9n7CxKkF1b8KNFr8WQS3Gw6g74JztRNeefNDwXXyeNnzSIBI88gl40GpkRyhg4aeeD69RvKQ8aSHbNrfS+Exvy8yn9OQ7Q1z2kCd+D8BDZnGdcTTqTmJCTjRKgky3nQntezc0+JNl7etRT7WqM1XcOuX9ZoKnlvBB1yrdb6CmhwqU2cjNzEs/A2vPj82Nj0tMz9oLWzt/Pfd3DbYNjntJmr06x5Ywf6ZEIRbuBHvz5lWplOp7jrnvRxZPD/byZ8IE0u3IZ16wbaTpw8Zgn6pjBiQq9uQ2Po6/SyjJwEiy/qfQW5/AYkvviyNIEEcgIFqstweou07GgXA4sZ6cxrlNP89X9MDe7sILM9JK4v60CrYyUlejZy0Z/SrL+oHr8EB7w4q7hr78ZZcLMJritXL16jXr5FGZsoQdOqTfNRM2ZNrGvU81pVfXUGWnoZlN2seqOl8PgH/dFWtm4noF07te33KX0GmIv+GjdpOIzs4SCUN2xZ9Q5lyrPbuuW7uT/tPXjLykq6bMmzAfr/pVQs3WmG8W785rMRlCkr//w50eWrKWPx9zyHuzenvZs/MItOl1a85cGvajjbpJNYdYpd97C3YkfH2fGeK0qkdDCg3x4JoI3fXknH6hMNRnFLx9igZTnSwQd28IgExw9fpO9PTVbQVOR6CkFzslvP0pI/+36scLwRp+9A88a4Vxbt2bV3WHz8hUb0uzm3yn9i4H6tVbgHmCQqykcuptBX2/6uYXFk37d4+413pn62Jvo/YPLm+Nfmt+/QZouzs5PiL066dHnrhHEz4xB8QLDnkTv6hxuQtyWAPESKXV9VV5JReyM193QWBNTXlT4Y4boaeGF9fL26og3cbF9vjsmRtdqcq9nxVX6R9NCCDKYf50jfv+3EO5gYHYbjzItATZg1OzVG5t3IFrWmjeGPpL9cCQ8HXYpGw3rQB38XUX2SCd8ilOmMrouXzAmBpgJvsnUNg/u/shBlnMC2dD7Wzy24HTaAzVuFxtSrFxhBk6fd+u1X8+rXaT2Jlcmt6ZzVHQMYPKEk0SecYEVnd/WCpZNzjZoKjII28FrgvK9tDftjly//dkfQIL+WF5dF9nDyrl37WLeYZ+b3j+g5kzaX9s2aN3kV+OLC4iud2vXfiMMqdYJdfk2NBfT/jfTc0P49unXrVKXQiVEWFhUXvT12xgHaK+jpxf3doNH7IUjWf0DPZwXNvh8OHkFZMsiKshRw8/yRBBmNl+VLZ0fb8ZayzH4krdyEnpQnudbiKRxMAbry9Y5gJwnfOzpfUpZF804fp46dOwlxvY5dnnZ64aVIRbOC39ovN8/GAW9ZsrpoSYhBU82dnczPkbpiI5iUcrK1ra2Nl2M1x7oHf/lueOd2/TeYmEnxAID2iSSDdQbZVp6ff7J214IPZ3YnnnLdunUiyNSJuMvfSC/fi8eOnepAp6EOnss5Rydc/kp0EDORfuXOZeyoqSeDmzSIQVtg8Q3K4IGvzkSZW9vd87sdgP+3Ejw05n3hFxroMgffU6f7KBs4uM8fy5euTjFKRkf6ks4FRJ61PJojL7hTePH99z5Kwsuael3R2gBbTPcMwiKVBeBkxh0KtGw7mQ/dhbeUynihvrU2sKEr2JPb1Km7h238a+ylp4zc6IRNXsdObV3JTswqKCw0kUeCNmLxiWp68zLOBpTeLm5LGydt377dXJycnazhewUd/K/YLZPmk8aOf80/LSW96Ntvf8jFRGodXA5iyRf88Es5xQZda0GbkZZVtGP77ntocaKXlRW3wQOv5ugot+vUyqluUGB18CGT5hZ+jwuOfRx0FbzVOcLQaz7Z0Q6eCsDRHzayiodCI58URwXVbR6l/Lghavw6hYGZsDr/rYSNLSKQcfS7AwiOSGWF4eJewRAmRVAD59MPOjPytwUZncAN5yyzhVacDSFlbDJIbO1qkzQXuP9Gql+/bTXj7WLbUq1t4V3H+kN3q5zWOnq5Jn05Jdm6GvMTExPJnC9PCDgYC2/X1Mp6o38j1xv3m0Q1LT5wu985DghlzGcxdqUaKzvSRpLJXtaFhdUpND8mLsZhKQcPuhSTxRL+UWFCkM3bPexZC/N2/9b/nYF/Z+AxZuD/AA8zEhkTLyOGAAAAAElFTkSuQmCC');
}


	/* layers control */

.l7-control-layers {
	-webkit-box-shadow: 0 1px 8px rgba(0,0,0,0.4);
	        box-shadow: 0 1px 8px rgba(0,0,0,0.4);
	background: #fff;
	border-radius: 2px;
	}
.l7-control-layers-toggle {
	background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAAGf7Ah0AAAABGdBTUEAALGPC/xhBQAABzdJREFUWAnVV3lslEUUn/l2F0tpwdAih1HEqCReDcphNCo1EkgFkXa5PNpuC0Fo2e7Wgko8KiaKWrvbK5672xYFpNtiRRuNiY0aURA14BGviBcVlaKltVa6+42/N9v5Mrtt05rwj/PHzjt+8743b+a9N8vYwKgMNlUQyemnMtAkaJajvb3dToQSGp8e6boopkr4VYgEMYwO0vhCTfMVzBcMf8bx086YyODcuM80zTqp9IWat+7evW8sMdIxIqqCLa6oiAaJpuEtcBqcc2HEWMZ0JclgZR/Nchf++ubrzKjJSguXS4tVjXvPjfb3/UAAacGTn/MOMb7QnjNpNqP/bKZ50Ai0tqYmCi0n4zbM+W+lBc7JBOa+QPhDwcTsxJXE2+32edKCL9h8hRDmRzpIOWydAylhrcMfDN+ugBRKSdP3KwPhsFJIPth02FISIYQwYsDYcVfWhy/Bon4JgumffMGmiGTwQ0B/sHml4q2ZFAD3WQIQVhx0IdFw8B189lolN+w8w5PnjPmlhJgtA8/vfn3iye7u3yGzDljDxZEG4097Cp3rSSjBtMHunp6vFR+HHoIxmbgTe1xHKssDHecLNFUjMzbqMs5ZlHF7ute17M84+TMHDzr+OvR9JwKdCms9yRkzJq6bPTsWXh05QOPUN+PUHyPWMPhm6UHd7vaUohWZPSRE8OqxpTyibQa/qcTlbEP0vwF7AWUAT3JM9dy69FfSNza+MU4awNE8iQtXSkJuGLleV852ov2h5jkwVof0mUs8aO4LhTuYYFOAjExId0wcFIPahpaLTkWiX9ECfHG/sLNi1i8+HODfgLFFRI96+INNi0cNTgTS1obKQh03aAuk9DeELzcj4pACYivvwvXrFK/PcQZiQWo+hmidpYMUjQC7EOB6xdNsGfAHwk/RDdOVw9Dm+NTUSWtWLDohDVQ37JkbiUT2DwMeVswZP+gtdM4x3HnLDhjcGM2XLWOISaenIGee9MCSgqgMht/H/q/SZYk0qviV3oKcj5XcioESyOoqIseFYDYloxnAGm/hcrcuk3JV2XBMl+pKqn6mENux11+w12m6jpqMMFn7rPPTHdwfCm8yTfG4tMaNu+GepPUFiqbM7T105ARSPQU+dY/LOC/N2gI65WEkyWUEtjmSppfkLvlRLaQ5VnZFDtGGzbheNRROKZmbu/AvUvh3tE4Wff2/0IUC+y2q+4VVoXBW1BSvkR7Rb8BW84lWJQBdlGozcs7GLy3Nd35OSqTxBqtfgkc1+sPjcqbDgEl6xK0dH5lv545LOCVL1/F+3CoY4eyY1+WcBiC2KYEHQBd5XDkyndE17xCm2Ug6BLcSwb3LigE1AlOYu6TS4HUwVEw0Df1osfBnLDwnpiFDCQPuvQ73Fkqxg8/hEVYLXt66MXbbzOK8bKre1hhkgDT0RDja3fEHytwZxCMLH0YWPkD0fxqjqUZDejDSV3z1LbexqPkEPJxKWLqtKOGbvPnZL460NlE/KgfkIZiRrfjShsQcG2QQDUwwXjcuZcID61Ys6ErUJ/LDOiCfLUzUjVQdEg0O4jn/ABEq0iuIjrEcwE0x/KGWNbjPj4BO00Gni0ZOoIPzLR5X9vMqqaQDqDzzENra4V5zp8sBZQcROYjsLvYUOPdbEVBKeiZ193QjCmwtZCM+ldS6EWYTH3wuNSV1i+pFCj/IAaWgGUfBq0N78qPM3DZcp9TxcTQeyzZm3ON2LatXpSlOP8BIB6qDLddHmHnFrBlpNZmZmdZbNXEB9XsRlZXFennqGHzoXW5DaId4iSoc/Q365EjnRjszPnYXZL9NDWUtGsqzCjAw7xprTypbn7fkaILcYqkInzzeX06C8emO8sKlS7stZQLxVMPes/+O9FVAvEpXob+utY6gZmfrtMjf/RUI+2odhF7wJbq+Gzf3zTj5CAwyaoEwozVoCzN1KKK00z7WUbZx9dIOklsO6CAZpu87i5gpHoJ8gtLh9vZixSO2KckV7qysf5Sc5uq2tjOix3rL0FW3IJuSNV0XM/iDs85LqxvqeKUD8n3LxUobt5WVuLJlS9IM4O9i09VRwWtxLWfpcix+hXjs8mZdjn19YuOiuKRgufzXqOuqQi2r8O+yAk/tl2Q/RMW7ETe8UdX1GJhHDM5qjDHJ5e7bs07qBp7ZsTe9t6/vUXykkLKEdLFbLgLJSUn3rrt1yXEdX/1C23jzVG+5Keg/B5r2wJD9g/NcaUAJq4MvXxxl/TWoATcoGc0Av4eUKnIXZlsvXpLHO0CS2KgOtGQgdeuwqWuUjGbUgrdszLHRXXDLF0oe54AS0kyPnc5Iz/2CmV7EeIzSwcjvsHQPXkUhld/kCP6Xu+DRNjg/SWHh+SnODF+aPeVh9XCydAPEsA4kAqsCzcuiTPiw7+maTj6SwGsVk/9gY9xbUpizR8MNS47aAd0C7s35CG8VdrxYyjl/FcdUgo73nY77X9D/Au9RDMh+aBoVAAAAAElFTkSuQmCC');
	width: 30px;
  height: 30px;
  background-size: 20px 20px;
	}

.l7-touch .l7-control-layers-toggle {
	width: 44px;
	height: 44px;
	}
.l7-control-layers .l7-control-layers-list,
.l7-control-layers-expanded .l7-control-layers-toggle {
	display: none;
	}
.l7-control-layers-expanded .l7-control-layers-list {
	display: block;
	position: relative;
	}
.l7-control-layers-expanded {
	padding: 6px 10px 6px 6px;
	color: #59626B;
	background: #fff;
	}
.l7-control-layers-scrollbar {
	overflow-y: scroll;
	overflow-x: hidden;
	padding-right: 5px;
	}
.l7-control-layers-selector {
	margin-top: 2px;
	position: relative;
	top: 1px;
	}
.l7-control-layers label {
  display: block;
  padding: 8px;
  }
  .l7-control-layers label input[type="radio"],
  .l7-control-layers label input[type="checkbox"] {
  width: 14px;
  height: 14px;
  margin: 0;
}
.l7-control-layers-separator {
	height: 0;
	border-top: 1px solid #D8D8D8;
	margin: 5px -10px 5px -6px;
}
.mapboxgl-ctrl-logo {
  display: none !important;
 }
 .amap-logo{
  display: none !important;
 }


`)},kPKH:function(Se,ct,R){"use strict";var V=R("/kpp");ct.a=V.a},"kQ+U":function(Se,ct,R){"use strict";R.d(ct,"a",function(){return kt});var V=R("lSNA"),E=R.n(V),T=R("lwsE"),e=R.n(T),t=R("W8MJ"),u=R.n(t),s=R("k5/I"),c=R("h1nZ"),r=R("yXPU"),h=R.n(r),n=R("o0o1"),i=R.n(n),a=R("4cb6"),o=R("fbvF"),l=R.n(o),f=function(){function Wt(ae,le){e()(this,Wt),this.attribute=void 0,this.buffer=void 0;var je=le.buffer,Oe=le.offset,We=le.stride,Ye=le.normalized,wn=le.size,er=le.divisor;this.buffer=je,this.attribute={buffer:je.get(),offset:Oe||0,stride:We||0,normalized:Ye||!1,divisor:er||0},wn&&(this.attribute.size=wn)}return u()(Wt,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(le){this.buffer.subData(le)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),Wt}(),v,b,g,m,_,M,x,y,S,P,A,O,L,H,F=(v={},E()(v,c.gl.POINTS,"points"),E()(v,c.gl.LINES,"lines"),E()(v,c.gl.LINE_LOOP,"line loop"),E()(v,c.gl.LINE_STRIP,"line strip"),E()(v,c.gl.TRIANGLES,"triangles"),E()(v,c.gl.TRIANGLE_FAN,"triangle fan"),E()(v,c.gl.TRIANGLE_STRIP,"triangle strip"),v),Z=(b={},E()(b,c.gl.STATIC_DRAW,"static"),E()(b,c.gl.DYNAMIC_DRAW,"dynamic"),E()(b,c.gl.STREAM_DRAW,"stream"),b),G=(g={},E()(g,c.gl.BYTE,"int8"),E()(g,c.gl.UNSIGNED_INT,"int16"),E()(g,c.gl.INT,"int32"),E()(g,c.gl.UNSIGNED_BYTE,"uint8"),E()(g,c.gl.UNSIGNED_SHORT,"uint16"),E()(g,c.gl.UNSIGNED_INT,"uint32"),E()(g,c.gl.FLOAT,"float"),g),U=(m={},E()(m,c.gl.ALPHA,"alpha"),E()(m,c.gl.LUMINANCE,"luminance"),E()(m,c.gl.LUMINANCE_ALPHA,"luminance alpha"),E()(m,c.gl.RGB,"rgb"),E()(m,c.gl.RGBA,"rgba"),E()(m,c.gl.RGBA4,"rgba4"),E()(m,c.gl.RGB5_A1,"rgb5 a1"),E()(m,c.gl.RGB565,"rgb565"),E()(m,c.gl.DEPTH_COMPONENT,"depth"),E()(m,c.gl.DEPTH_STENCIL,"depth stencil"),m),Y=(_={},E()(_,c.gl.DONT_CARE,"dont care"),E()(_,c.gl.NICEST,"nice"),E()(_,c.gl.FASTEST,"fast"),_),J=(M={},E()(M,c.gl.NEAREST,"nearest"),E()(M,c.gl.LINEAR,"linear"),E()(M,c.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),E()(M,c.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),E()(M,c.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),E()(M,c.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),M),rt=(x={},E()(x,c.gl.REPEAT,"repeat"),E()(x,c.gl.CLAMP_TO_EDGE,"clamp"),E()(x,c.gl.MIRRORED_REPEAT,"mirror"),x),ft=(y={},E()(y,c.gl.NONE,"none"),E()(y,c.gl.BROWSER_DEFAULT_WEBGL,"browser"),y),dt=(S={},E()(S,c.gl.NEVER,"never"),E()(S,c.gl.ALWAYS,"always"),E()(S,c.gl.LESS,"less"),E()(S,c.gl.LEQUAL,"lequal"),E()(S,c.gl.GREATER,"greater"),E()(S,c.gl.GEQUAL,"gequal"),E()(S,c.gl.EQUAL,"equal"),E()(S,c.gl.NOTEQUAL,"notequal"),S),ut=(P={},E()(P,c.gl.FUNC_ADD,"add"),E()(P,c.gl.MIN_EXT,"min"),E()(P,c.gl.MAX_EXT,"max"),E()(P,c.gl.FUNC_SUBTRACT,"subtract"),E()(P,c.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),P),Lt=(A={},E()(A,c.gl.ZERO,"zero"),E()(A,c.gl.ONE,"one"),E()(A,c.gl.SRC_COLOR,"src color"),E()(A,c.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),E()(A,c.gl.SRC_ALPHA,"src alpha"),E()(A,c.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),E()(A,c.gl.DST_COLOR,"dst color"),E()(A,c.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),E()(A,c.gl.DST_ALPHA,"dst alpha"),E()(A,c.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),E()(A,c.gl.CONSTANT_COLOR,"constant color"),E()(A,c.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),E()(A,c.gl.CONSTANT_ALPHA,"constant alpha"),E()(A,c.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),E()(A,c.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),A),Ft=(O={},E()(O,c.gl.NEVER,"never"),E()(O,c.gl.ALWAYS,"always"),E()(O,c.gl.LESS,"less"),E()(O,c.gl.LEQUAL,"lequal"),E()(O,c.gl.GREATER,"greater"),E()(O,c.gl.GEQUAL,"gequal"),E()(O,c.gl.EQUAL,"equal"),E()(O,c.gl.NOTEQUAL,"notequal"),O),Ot=(L={},E()(L,c.gl.ZERO,"zero"),E()(L,c.gl.KEEP,"keep"),E()(L,c.gl.REPLACE,"replace"),E()(L,c.gl.INVERT,"invert"),E()(L,c.gl.INCR,"increment"),E()(L,c.gl.DECR,"decrement"),E()(L,c.gl.INCR_WRAP,"increment wrap"),E()(L,c.gl.DECR_WRAP,"decrement wrap"),L),St=(H={},E()(H,c.gl.FRONT,"front"),E()(H,c.gl.BACK,"back"),H),xt=function(){function Wt(ae,le){e()(this,Wt),this.buffer=void 0;var je=le.data,Oe=le.usage,We=le.type;this.buffer=ae.buffer({data:je,usage:Z[Oe||c.gl.STATIC_DRAW],type:G[We||c.gl.UNSIGNED_BYTE]})}return u()(Wt,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(le){var je=le.data,Oe=le.offset;this.buffer.subdata(je,Oe)}}]),Wt}(),At=function(){function Wt(ae,le){e()(this,Wt),this.elements=void 0;var je=le.data,Oe=le.usage,We=le.type,Ye=le.count;this.elements=ae.elements({data:je,usage:Z[Oe||c.gl.STATIC_DRAW],type:G[We||c.gl.UNSIGNED_BYTE],count:Ye})}return u()(Wt,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(le){var je=le.data;this.elements.subdata(je)}},{key:"destroy",value:function(){}}]),Wt}(),nt=function(){function Wt(ae,le){e()(this,Wt),this.framebuffer=void 0;var je=le.width,Oe=le.height,We=le.color,Ye=le.colors,wn=le.depth,er=le.stencil,wr={width:je,height:Oe};Array.isArray(Ye)&&(wr.colors=Ye.map(function(on){return on.get()})),We&&typeof We!="boolean"&&(wr.color=We.get()),this.framebuffer=ae.framebuffer(wr)}return u()(Wt,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(le){var je=le.width,Oe=le.height;this.framebuffer.resize(je,Oe)}}]),Wt}(),Mt=R("cDf5"),z=R.n(Mt),Q=R("c6wG"),ht=R.n(Q),et=R("YO3V"),at=R.n(et);function gt(Wt,ae){var le=Object.keys(Wt);if(Object.getOwnPropertySymbols){var je=Object.getOwnPropertySymbols(Wt);ae&&(je=je.filter(function(Oe){return Object.getOwnPropertyDescriptor(Wt,Oe).enumerable})),le.push.apply(le,je)}return le}function k(Wt){for(var ae=1;ae<arguments.length;ae++){var le=arguments[ae]!=null?arguments[ae]:{};ae%2?gt(Object(le),!0).forEach(function(je){E()(Wt,je,le[je])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Wt,Object.getOwnPropertyDescriptors(le)):gt(Object(le)).forEach(function(je){Object.defineProperty(Wt,je,Object.getOwnPropertyDescriptor(le,je))})}return Wt}var ot=function(){function Wt(ae,le){e()(this,Wt),this.reGl=void 0,this.destroyed=!1,this.drawCommand=void 0,this.drawParams=void 0,this.options=void 0,this.uniforms={},this.reGl=ae;var je=le.vs,Oe=le.fs,We=le.attributes,Ye=le.uniforms,wn=le.primitive,er=le.count,wr=le.elements,on=le.depth,en=le.blend,An=le.stencil,jn=le.cull,pr=le.instances,di={};this.options=le,Ye&&(this.uniforms=this.extractUniforms(Ye),Object.keys(Ye).forEach(function(Qt){di[Qt]=ae.prop(Qt)}));var Ce={};Object.keys(We).forEach(function(Qt){Ce[Qt]=We[Qt].get()});var Me={attributes:Ce,frag:Oe,uniforms:di,vert:je,primitive:F[wn===void 0?c.gl.TRIANGLES:wn]};pr&&(Me.instances=pr),er&&(Me.count=er),wr&&(Me.elements=wr.get()),this.initDepthDrawParams({depth:on},Me),this.initBlendDrawParams({blend:en},Me),this.initStencilDrawParams({stencil:An},Me),this.initCullDrawParams({cull:jn},Me),this.drawCommand=ae(Me),this.drawParams=Me}return u()(Wt,[{key:"addUniforms",value:function(le){this.uniforms=k(k({},this.uniforms),this.extractUniforms(le))}},{key:"draw",value:function(le){if(!(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)){var je=k(k({},this.uniforms),this.extractUniforms(le.uniforms||{})),Oe={};Object.keys(je).forEach(function(We){var Ye=z()(je[We]);Ye==="boolean"||Ye==="number"||Array.isArray(je[We])||je[We].BYTES_PER_ELEMENT?Oe[We]=je[We]:Oe[We]=je[We].get()}),this.drawCommand(Oe)}}},{key:"destroy",value:function(){this.drawParams.elements.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(function(le){le.destroy()}),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(le,je){var Oe=le.depth;Oe&&(je.depth={enable:Oe.enable===void 0?!0:!!Oe.enable,mask:Oe.mask===void 0?!0:!!Oe.mask,func:dt[Oe.func||c.gl.LESS],range:Oe.range||[0,1]})}},{key:"initBlendDrawParams",value:function(le,je){var Oe=le.blend;if(Oe){var We=Oe.enable,Ye=Oe.func,wn=Oe.equation,er=Oe.color,wr=er===void 0?[0,0,0,0]:er;je.blend={enable:!!We,func:{srcRGB:Lt[Ye&&Ye.srcRGB||c.gl.SRC_ALPHA],srcAlpha:Lt[Ye&&Ye.srcAlpha||c.gl.SRC_ALPHA],dstRGB:Lt[Ye&&Ye.dstRGB||c.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:Lt[Ye&&Ye.dstAlpha||c.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:ut[wn&&wn.rgb||c.gl.FUNC_ADD],alpha:ut[wn&&wn.alpha||c.gl.FUNC_ADD]},color:wr}}}},{key:"initStencilDrawParams",value:function(le,je){var Oe=le.stencil;if(Oe){var We=Oe.enable,Ye=Oe.mask,wn=Ye===void 0?-1:Ye,er=Oe.func,wr=er===void 0?{cmp:c.gl.ALWAYS,ref:0,mask:-1}:er,on=Oe.opFront,en=on===void 0?{fail:c.gl.KEEP,zfail:c.gl.KEEP,zpass:c.gl.KEEP}:on,An=Oe.opBack,jn=An===void 0?{fail:c.gl.KEEP,zfail:c.gl.KEEP,zpass:c.gl.KEEP}:An;je.stencil={enable:!!We,mask:wn,func:k(k({},wr),{},{cmp:Ft[wr.cmp]}),opFront:{fail:Ot[en.fail],zfail:Ot[en.zfail],zpass:Ot[en.zpass]},opBack:{fail:Ot[jn.fail],zfail:Ot[jn.zfail],zpass:Ot[jn.zpass]}}}}},{key:"initCullDrawParams",value:function(le,je){var Oe=le.cull;if(Oe){var We=Oe.enable,Ye=Oe.face,wn=Ye===void 0?c.gl.BACK:Ye;je.cull={enable:!!We,face:St[wn]}}}},{key:"extractUniforms",value:function(le){var je=this,Oe={};return Object.keys(le).forEach(function(We){je.extractUniformsRecursively(We,le[We],Oe,"")}),Oe}},{key:"extractUniformsRecursively",value:function(le,je,Oe,We){var Ye=this;if(je===null||typeof je=="number"||typeof je=="boolean"||Array.isArray(je)&&typeof je[0]=="number"||ht()(je)||je===""||"resize"in je){Oe["".concat(We&&We+".").concat(le)]=je;return}at()(je)&&Object.keys(je).forEach(function(wn){Ye.extractUniformsRecursively(wn,je[wn],Oe,"".concat(We&&We+".").concat(le))}),Array.isArray(je)&&je.forEach(function(wn,er){Object.keys(wn).forEach(function(wr){Ye.extractUniformsRecursively(wr,wn[wr],Oe,"".concat(We&&We+".").concat(le,"[").concat(er,"]"))})})}}]),Wt}(),it=function(){function Wt(ae,le){e()(this,Wt),this.texture=void 0,this.width=void 0,this.height=void 0;var je=le.data,Oe=le.type,We=Oe===void 0?c.gl.UNSIGNED_BYTE:Oe,Ye=le.width,wn=le.height,er=le.flipY,wr=er===void 0?!1:er,on=le.format,en=on===void 0?c.gl.RGBA:on,An=le.mipmap,jn=An===void 0?!1:An,pr=le.wrapS,di=pr===void 0?c.gl.CLAMP_TO_EDGE:pr,Ce=le.wrapT,Me=Ce===void 0?c.gl.CLAMP_TO_EDGE:Ce,Qt=le.aniso,pe=Qt===void 0?0:Qt,Vt=le.alignment,re=Vt===void 0?1:Vt,Te=le.premultiplyAlpha,ue=Te===void 0?!1:Te,xe=le.mag,Ke=xe===void 0?c.gl.NEAREST:xe,Rn=le.min,tr=Rn===void 0?c.gl.NEAREST:Rn,Pn=le.colorSpace,dn=Pn===void 0?c.gl.BROWSER_DEFAULT_WEBGL:Pn;this.width=Ye,this.height=wn;var Ar={width:Ye,height:wn,type:G[We],format:U[en],wrapS:rt[di],wrapT:rt[Me],mag:J[Ke],min:J[tr],alignment:re,flipY:wr,colorSpace:ft[dn],premultiplyAlpha:ue,aniso:pe};je&&(Ar.data=je),typeof jn=="number"?Ar.mipmap=Y[jn]:typeof jn=="boolean"&&(Ar.mipmap=jn),this.texture=ae.texture(Ar)}return u()(Wt,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.texture(le)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(le){var je=le.width,Oe=le.height;this.texture.resize(je,Oe),this.width=je,this.height=Oe}},{key:"destroy",value:function(){this.texture.destroy()}}]),Wt}(),X,Et,vt=(X=Object(a.injectable)(),X(Et=function(){function Wt(){var ae=this;e()(this,Wt),this.gl=void 0,this.$container=void 0,this.canvas=void 0,this.width=void 0,this.height=void 0,this.isDirty=void 0,this.createModel=function(le){return new ot(ae.gl,le)},this.createAttribute=function(le){return new f(ae.gl,le)},this.createBuffer=function(le){return new xt(ae.gl,le)},this.createElements=function(le){return new At(ae.gl,le)},this.createTexture2D=function(le){return new it(ae.gl,le)},this.createFramebuffer=function(le){return new nt(ae.gl,le)},this.useFramebuffer=function(le,je){ae.gl({framebuffer:le?le.get():null})(je)},this.clear=function(le){var je=le.color,Oe=le.depth,We=le.stencil,Ye=le.framebuffer,wn=Ye===void 0?null:Ye,er={color:je,depth:Oe,stencil:We};er.framebuffer=wn===null?wn:wn.get(),ae.gl.clear(er)},this.viewport=function(le){var je=le.x,Oe=le.y,We=le.width,Ye=le.height;ae.gl._gl.viewport(je,Oe,We,Ye),ae.width=We,ae.height=Ye,ae.gl._refresh()},this.readPixels=function(le){var je=le.framebuffer,Oe=le.x,We=le.y,Ye=le.width,wn=le.height,er={x:Oe,y:We,width:Ye,height:wn};return je&&(er.framebuffer=je.get()),ae.gl.read(er)},this.getViewportSize=function(){return{width:ae.gl._gl.drawingBufferWidth,height:ae.gl._gl.drawingBufferHeight}},this.getContainer=function(){var le;return(le=ae.canvas)===null||le===void 0?void 0:le.parentElement},this.getCanvas=function(){return ae.canvas},this.getGLContext=function(){return ae.gl._gl},this.destroy=function(){ae.gl.destroy()}}return u()(Wt,[{key:"init",value:function(){var ae=h()(i.a.mark(function je(Oe,We){var Ye=this;return i.a.wrap(function(er){for(;;)switch(er.prev=er.next){case 0:return this.canvas=Oe,er.next=3,new Promise(function(wr,on){l()({canvas:Ye.canvas,attributes:{alpha:!0,antialias:We.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:We.preserveDrawingBuffer},extensions:["OES_element_index_uint","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(An,jn){(An||!jn)&&on(An),wr(jn)}})});case 3:this.gl=er.sent;case 4:case"end":return er.stop()}},je,this)}));function le(je,Oe){return ae.apply(this,arguments)}return le}()},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var le=this.getGLContext();le.disable(le.CULL_FACE)}},{key:"setDirty",value:function(le){this.isDirty=le}},{key:"getDirty",value:function(){return this.isDirty}}]),Wt}())||Et),Nt=R("Hel2");function $t(Wt,ae){var le=Object.keys(Wt);if(Object.getOwnPropertySymbols){var je=Object.getOwnPropertySymbols(Wt);ae&&(je=je.filter(function(Oe){return Object.getOwnPropertyDescriptor(Wt,Oe).enumerable})),le.push.apply(le,je)}return le}function ee(Wt){for(var ae=1;ae<arguments.length;ae++){var le=arguments[ae]!=null?arguments[ae]:{};ae%2?$t(Object(le),!0).forEach(function(je){E()(Wt,je,le[je])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Wt,Object.getOwnPropertyDescriptors(le)):$t(Object(le)).forEach(function(je){Object.defineProperty(Wt,je,Object.getOwnPropertyDescriptor(le,je))})}return Wt}var kt=function(){function Wt(ae){e()(this,Wt),this.sceneService=void 0,this.mapService=void 0,this.controlService=void 0,this.layerService=void 0,this.iconService=void 0,this.markerService=void 0,this.popupService=void 0,this.fontService=void 0,this.interactionService=void 0,this.container=void 0;var le=ae.id,je=ae.map,Oe=Object(c.createSceneContainer)();this.container=Oe,je.setContainer(Oe,le),Oe.bind(c.TYPES.IRendererService).to(vt).inSingletonScope(),this.sceneService=Oe.get(c.TYPES.ISceneService),this.mapService=Oe.get(c.TYPES.IMapService),this.iconService=Oe.get(c.TYPES.IIconService),this.fontService=Oe.get(c.TYPES.IFontService),this.controlService=Oe.get(c.TYPES.IControlService),this.layerService=Oe.get(c.TYPES.ILayerService),this.markerService=Oe.get(c.TYPES.IMarkerService),this.interactionService=Oe.get(c.TYPES.IInteractionService),this.popupService=Oe.get(c.TYPES.IPopupService),this.initComponent(le),this.sceneService.init(ae),this.initControl()}return u()(Wt,[{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"exportPng",value:function(le){return this.sceneService.exportPng(le)}},{key:"exportMap",value:function(le){return this.sceneService.exportPng(le)}},{key:"registerRenderService",value:function(le){var je=this;if(this.sceneService.loaded){var Oe=new le(this);Oe.init()}else this.on("loaded",function(){var We=new le(je);We.init()})}},{key:"map",get:function(){return this.mapService.map}},{key:"addLayer",value:function(le){var je=Object(c.createLayerContainer)(this.container);le.setContainer(je),this.sceneService.addLayer(le)}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(le){return this.layerService.getLayer(le)}},{key:"getLayerByName",value:function(le){return this.layerService.getLayerByName(le)}},{key:"removeLayer",value:function(le){this.layerService.remove(le)}},{key:"removeAllLayer",value:function(){this.layerService.removeAllLayers()}},{key:"render",value:function(){this.sceneService.render()}},{key:"addImage",value:function(le,je){this.iconService.addImage(le,je)}},{key:"hasImage",value:function(le){return this.iconService.hasImage(le)}},{key:"removeImage",value:function(le){this.iconService.removeImage(le)}},{key:"addIconFontGlyphs",value:function(le,je){this.fontService.addIconGlyphs(je)}},{key:"addControl",value:function(le){this.controlService.addControl(le,this.container)}},{key:"removeControl",value:function(le){this.controlService.removeControl(le)}},{key:"getControlByName",value:function(le){return this.controlService.getControlByName(le)}},{key:"addMarker",value:function(le){this.markerService.addMarker(le)}},{key:"addMarkerLayer",value:function(le){this.markerService.addMarkerLayer(le)}},{key:"removeMarkerLayer",value:function(le){this.markerService.removeMarkerLayer(le)}},{key:"removeAllMakers",value:function(){this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(le){this.popupService.addPopup(le)}},{key:"on",value:function(le,je){c.SceneEventList.indexOf(le)===-1?this.mapService.on(le,je):this.sceneService.on(le,je)}},{key:"off",value:function(le,je){c.SceneEventList.indexOf(le)===-1?this.mapService.off(le,je):this.sceneService.off(le,je)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(le){return this.mapService.getCenter(le)}},{key:"setCenter",value:function(le,je){return this.mapService.setCenter(le,je)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(le){return this.mapService.setPitch(le)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(le){this.mapService.setRotation(le)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(le){this.mapService.panTo(le)}},{key:"panBy",value:function(le){this.mapService.panBy(le)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(le){this.mapService.setZoom(le)}},{key:"fitBounds",value:function(le,je){var Oe=this.sceneService.getSceneConfig(),We=Oe.fitBoundsOptions,Ye=Oe.animate;this.mapService.fitBounds(le,je||ee(ee({},We),{},{animate:Ye}))}},{key:"setZoomAndCenter",value:function(le,je){this.mapService.setZoomAndCenter(le,je)}},{key:"setMapStyle",value:function(le){this.mapService.setMapStyle(le)}},{key:"setMapStatus",value:function(le){this.mapService.setMapStatus(le)}},{key:"pixelToLngLat",value:function(le){return this.mapService.pixelToLngLat(le)}},{key:"lngLatToPixel",value:function(le){return this.mapService.lngLatToPixel(le)}},{key:"containerToLngLat",value:function(le){return this.mapService.containerToLngLat(le)}},{key:"lngLatToContainer",value:function(le){return this.mapService.lngLatToContainer(le)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(le,je){this.container.bind(c.TYPES.IPostProcessingPass).to(le).whenTargetNamed(je)}},{key:"initComponent",value:function(le){this.controlService.init({container:Nt.a.getContainer(le)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var le=this.sceneService.getSceneConfig(),je=le.logoVisible,Oe=le.logoPosition;je&&this.addControl(new s.b({position:Oe}))}}]),Wt}()},l94r:function(Se,ct,R){"use strict";R.d(ct,"a",function(){return rt});var V=R("lSNA"),E=R.n(V),T=R("lwsE"),e=R.n(T),t=R("W8MJ"),u=R.n(t),s=R("7W2i"),c=R.n(s),r=R("a1gu"),h=R.n(r),n=R("Nsbk"),i=R.n(n),a=R("JBE3"),o=R.n(a),l=R("4qC0"),f=R.n(l),v=R("lSCD"),b=R.n(v),g=R("BkRI"),m=R.n(g),_=R("xp6e"),M=R("Hel2"),x=R("uhBA"),y=R("rlAn"),S=R("qxNg");function P(ft){if(ft.length===0)throw new Error("max requires at least one data point");for(var dt=ft[0],ut=1;ut<ft.length;ut++)ft[ut]>dt&&(dt=ft[ut]);return dt}function A(ft){if(ft.length===0)throw new Error("min requires at least one data point");for(var dt=ft[0],ut=1;ut<ft.length;ut++)ft[ut]<dt&&(dt=ft[ut]);return dt}function O(ft){if(ft.length===0)return 0;for(var dt=ft[0],ut=0,Lt,Ft=1;Ft<ft.length;Ft++)Lt=dt+ft[Ft]*1,Math.abs(dt)>=Math.abs(ft[Ft])?ut+=dt-Lt+ft[Ft]:ut+=ft[Ft]-Lt+dt,dt=Lt;return dt+ut*1}function L(ft){if(ft.length===0)throw new Error("mean requires at least one data point");return O(ft)/ft.length}var H={min:A,max:P,mean:L,sum:O};function F(ft,dt){return ft.map(function(ut){return ut[dt]*1})}function Z(ft,dt){var ut=Object.keys(ft);if(Object.getOwnPropertySymbols){var Lt=Object.getOwnPropertySymbols(ft);dt&&(Lt=Lt.filter(function(Ft){return Object.getOwnPropertyDescriptor(ft,Ft).enumerable})),ut.push.apply(ut,Lt)}return ut}function G(ft){for(var dt=1;dt<arguments.length;dt++){var ut=arguments[dt]!=null?arguments[dt]:{};dt%2?Z(Object(ut),!0).forEach(function(Lt){E()(ft,Lt,ut[Lt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(ut)):Z(Object(ut)).forEach(function(Lt){Object.defineProperty(ft,Lt,Object.getOwnPropertyDescriptor(ut,Lt))})}return ft}function U(ft){var dt=Y();return function(){var Lt=i()(ft),Ft;if(dt){var Ot=i()(this).constructor;Ft=Reflect.construct(Lt,arguments,Ot)}else Ft=Lt.apply(this,arguments);return h()(this,Ft)}}function Y(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ft){return!1}}function J(ft,dt){if(Array.isArray(dt))return dt}var rt=function(ft){c()(ut,ft);var dt=U(ut);function ut(Lt,Ft){var Ot;return e()(this,ut),Ot=dt.call(this),Ot.data=void 0,Ot.extent=void 0,Ot.hooks={init:new _.c},Ot.parser={type:"geojson"},Ot.transforms=[],Ot.cluster=!1,Ot.clusterOptions={enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"},Ot.invalidExtent=!1,Ot.originData=void 0,Ot.rawData=void 0,Ot.cfg={},Ot.clusterIndex=void 0,Ot.originData=Lt,Ot.initCfg(Ft),Ot.hooks.init.tap("parser",function(){Ot.excuteParser()}),Ot.hooks.init.tap("cluster",function(){Ot.initCluster()}),Ot.hooks.init.tap("transform",function(){Ot.executeTrans()}),Ot.init(),Ot}return u()(ut,[{key:"setData",value:function(Ft,Ot){this.rawData=Ft,this.originData=Ft,this.initCfg(Ot),this.init(),this.emit("update")}},{key:"getClusters",value:function(Ft){return this.clusterIndex.getClusters(this.caculClusterExtent(2),Ft)}},{key:"getClustersLeaves",value:function(Ft){return this.clusterIndex.getLeaves(Ft,Infinity)}},{key:"updateClusterData",value:function(Ft){var Ot=this,St=this.clusterOptions,xt=St.method,At=xt===void 0?"sum":xt,nt=St.field,Mt=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(Ft));this.clusterOptions.zoom=Ft,Mt.forEach(function(z){z.id||(z.properties.point_count=1)}),(nt||b()(At))&&(Mt=Mt.map(function(z){var Q=z.id;if(Q){var ht=Ot.clusterIndex.getLeaves(Q,Infinity),et=ht.map(function(k){return k.properties}),at;if(f()(At)&&nt){var gt=F(et,nt);at=H[At](gt)}b()(At)&&(at=At(et)),z.properties.stat=at}else z.properties.point_count=1;return z})),this.data=Object(y.getParser)("geojson")({type:"FeatureCollection",features:Mt}),this.executeTrans()}},{key:"getFeatureById",value:function(Ft){var Ot=this.parser.type,St=Ot===void 0?"geojson":Ot;if(St==="geojson"&&!this.cluster){var xt=Ft<this.originData.features.length?this.originData.features[Ft]:"null",At=m()(xt);if(this.transforms.length!==0){var nt=this.data.dataArray.find(function(Mt){return Mt._id===Ft});At.properties=nt}return At}else return Ft<this.data.dataArray.length?this.data.dataArray[Ft]:"null"}},{key:"getFeatureId",value:function(Ft,Ot){var St=this.data.dataArray.find(function(xt){return xt[Ft]===name});return St==null?void 0:St._id}},{key:"destroy",value:function(){this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null}},{key:"caculClusterExtent",value:function(Ft){var Ot=[[-Infinity,-Infinity],[Infinity,Infinity]];return this.invalidExtent||(Ot=Object(M.r)(Object(M.h)(this.extent),Ft)),Ot[0].concat(Ot[1])}},{key:"initCfg",value:function(Ft){this.cfg=o()(this.cfg,Ft,J);var Ot=this.cfg;Ot&&(Ot.parser&&(this.parser=Ot.parser),Ot.transforms&&(this.transforms=Ot.transforms),this.cluster=Ot.cluster||!1,Ot.clusterOptions&&(this.cluster=!0,this.clusterOptions=G(G({},this.clusterOptions),Ot.clusterOptions)))}},{key:"excuteParser",value:function(){var Ft=this.parser,Ot=Ft.type||"geojson",St=Object(y.getParser)(Ot);this.data=St(this.originData,Ft),this.extent=Object(M.m)(this.data.dataArray),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3]}},{key:"executeTrans",value:function(){var Ft=this,Ot=this.transforms;Ot.forEach(function(St){var xt=St.type,At=Object(y.getTransform)(xt)(Ft.data,St);Object.assign(Ft.data,At)})}},{key:"initCluster",value:function(){if(!!this.cluster){var Ft=this.clusterOptions||{};this.clusterIndex=Object(S.a)(this.data,Ft)}}},{key:"init",value:function(){this.hooks.init.call(this)}}]),ut}(x.EventEmitter)},lJbI:function(Se,ct,R){"use strict";R.d(ct,"a",function(){return V});function V(E,T){var e=T.extent,t=T.width,u=T.height,s=T.min,c=T.max,r={_id:1,dataArray:[{_id:1,data:Array.from(E),width:t,height:u,min:s,max:c,coordinates:[[e[0],e[1]],[e[2],e[3]]]}]};return r}},lT4e:function(Se,ct,R){"use strict";var V=R("MgzW"),E={},T=function(i){};function e(n,i,a,o,l,f,v,b){if(T(i),!n){var g;if(i===void 0)g=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var m=[a,o,l,f,v,b],_=0;g=new Error(i.replace(/%s/g,function(){return m[_++]})),g.name="Invariant Violation"}throw g.framesToPop=1,g}}var t=function(){};if(!1)var u;var s="mixins";function c(n){return n}var r;r={};function h(n,i,a){var o=[],l={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},f={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},v={displayName:function(G,U){G.displayName=U},mixins:function(G,U){if(U)for(var Y=0;Y<U.length;Y++)m(G,U[Y])},childContextTypes:function(G,U){G.childContextTypes=V({},G.childContextTypes,U)},contextTypes:function(G,U){G.contextTypes=V({},G.contextTypes,U)},getDefaultProps:function(G,U){G.getDefaultProps?G.getDefaultProps=x(G.getDefaultProps,U):G.getDefaultProps=U},propTypes:function(G,U){G.propTypes=V({},G.propTypes,U)},statics:function(G,U){_(G,U)},autobind:function(){}};function b(Z,G,U){for(var Y in G)G.hasOwnProperty(Y)}function g(Z,G){var U=l.hasOwnProperty(G)?l[G]:null;L.hasOwnProperty(G)&&e(U==="OVERRIDE_BASE","ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",G),Z&&e(U==="DEFINE_MANY"||U==="DEFINE_MANY_MERGED","ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",G)}function m(Z,G){if(!G){if(!1)var U,Y;return}e(typeof G!="function","ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),e(!i(G),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var J=Z.prototype,rt=J.__reactAutoBindPairs;G.hasOwnProperty(s)&&v.mixins(Z,G.mixins);for(var ft in G)if(!!G.hasOwnProperty(ft)&&ft!==s){var dt=G[ft],ut=J.hasOwnProperty(ft);if(g(ut,ft),v.hasOwnProperty(ft))v[ft](Z,dt);else{var Lt=l.hasOwnProperty(ft),Ft=typeof dt=="function",Ot=Ft&&!Lt&&!ut&&G.autobind!==!1;if(Ot)rt.push(ft,dt),J[ft]=dt;else if(ut){var St=l[ft];e(Lt&&(St==="DEFINE_MANY_MERGED"||St==="DEFINE_MANY"),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",St,ft),St==="DEFINE_MANY_MERGED"?J[ft]=x(J[ft],dt):St==="DEFINE_MANY"&&(J[ft]=y(J[ft],dt))}else J[ft]=dt}}}function _(Z,G){if(!!G)for(var U in G){var Y=G[U];if(!!G.hasOwnProperty(U)){var J=U in v;e(!J,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',U);var rt=U in Z;if(rt){var ft=f.hasOwnProperty(U)?f[U]:null;e(ft==="DEFINE_MANY_MERGED","ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",U),Z[U]=x(Z[U],Y);return}Z[U]=Y}}}function M(Z,G){e(Z&&G&&typeof Z=="object"&&typeof G=="object","mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var U in G)G.hasOwnProperty(U)&&(e(Z[U]===void 0,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",U),Z[U]=G[U]);return Z}function x(Z,G){return function(){var Y=Z.apply(this,arguments),J=G.apply(this,arguments);if(Y==null)return J;if(J==null)return Y;var rt={};return M(rt,Y),M(rt,J),rt}}function y(Z,G){return function(){Z.apply(this,arguments),G.apply(this,arguments)}}function S(Z,G){var U=G.bind(Z);if(!1)var Y,J;return U}function P(Z){for(var G=Z.__reactAutoBindPairs,U=0;U<G.length;U+=2){var Y=G[U],J=G[U+1];Z[Y]=S(Z,J)}}var A={componentDidMount:function(){this.__isMounted=!0}},O={componentWillUnmount:function(){this.__isMounted=!1}},L={replaceState:function(G,U){this.updater.enqueueReplaceState(this,G,U)},isMounted:function(){return!!this.__isMounted}},H=function(){};V(H.prototype,n.prototype,L);function F(Z){var G=c(function(Y,J,rt){this.__reactAutoBindPairs.length&&P(this),this.props=Y,this.context=J,this.refs=E,this.updater=rt||a,this.state=null;var ft=this.getInitialState?this.getInitialState():null;e(typeof ft=="object"&&!Array.isArray(ft),"%s.getInitialState(): must return an object or null",G.displayName||"ReactCompositeComponent"),this.state=ft});G.prototype=new H,G.prototype.constructor=G,G.prototype.__reactAutoBindPairs=[],o.forEach(m.bind(null,G)),m(G,A),m(G,Z),m(G,O),G.getDefaultProps&&(G.defaultProps=G.getDefaultProps()),e(G.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var U in l)G.prototype[U]||(G.prototype[U]=null);return G}return F}Se.exports=h},lnY3:function(Se,ct,R){Se.exports={"ant-card":"ant-card","ant-card-rtl":"ant-card-rtl","ant-card-hoverable":"ant-card-hoverable","ant-card-bordered":"ant-card-bordered","ant-card-head":"ant-card-head","ant-card-head-wrapper":"ant-card-head-wrapper","ant-card-head-title":"ant-card-head-title","ant-typography":"ant-typography","ant-typography-edit-content":"ant-typography-edit-content","ant-tabs":"ant-tabs","ant-tabs-bar":"ant-tabs-bar","ant-card-extra":"ant-card-extra","ant-card-body":"ant-card-body","ant-card-contain-grid":"ant-card-contain-grid","ant-card-loading":"ant-card-loading","ant-card-grid":"ant-card-grid","ant-card-grid-hoverable":"ant-card-grid-hoverable","ant-card-contain-tabs":"ant-card-contain-tabs","ant-card-cover":"ant-card-cover","ant-card-actions":"ant-card-actions","ant-btn":"ant-btn",anticon:"anticon","ant-card-type-inner":"ant-card-type-inner","ant-card-meta":"ant-card-meta","ant-card-meta-avatar":"ant-card-meta-avatar","ant-card-meta-detail":"ant-card-meta-detail","ant-card-meta-title":"ant-card-meta-title","ant-card-meta-description":"ant-card-meta-description","ant-card-loading-content":"ant-card-loading-content","ant-card-loading-block":"ant-card-loading-block","card-loading":"card-loading","ant-card-small":"ant-card-small"}},lwsE:function(Se,ct){function R(V,E){if(!(V instanceof E))throw new TypeError("Cannot call a class as a function")}Se.exports=R,Se.exports.default=Se.exports,Se.exports.__esModule=!0},mNvP:function(Se,ct,R){(function(V,E){/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var T;(function(e){(function(t){var u=typeof E=="object"?E:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),s=c(e);typeof u.Reflect=="undefined"?u.Reflect=e:s=c(u.Reflect,s),t(s);function c(r,h){return function(n,i){typeof r[n]!="function"&&Object.defineProperty(r,n,{configurable:!0,writable:!0,value:i}),h&&h(n,i)}}})(function(t){var u=Object.prototype.hasOwnProperty,s=typeof Symbol=="function",c=s&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",r=s&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",h=typeof Object.create=="function",n={__proto__:[]}instanceof Array,i=!h&&!n,a={create:h?function(){return ee(Object.create(null))}:n?function(){return ee({__proto__:null})}:function(){return ee({})},has:i?function(kt,Wt){return u.call(kt,Wt)}:function(kt,Wt){return Wt in kt},get:i?function(kt,Wt){return u.call(kt,Wt)?kt[Wt]:void 0}:function(kt,Wt){return kt[Wt]}},o=Object.getPrototypeOf(Function),l=typeof V=="object"&&Object({NODE_ENV:"production"})&&Object({NODE_ENV:"production"}).REFLECT_METADATA_USE_MAP_POLYFILL==="true",f=!l&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:vt(),v=!l&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Nt(),b=!l&&typeof WeakMap=="function"?WeakMap:$t(),g=new b;function m(kt,Wt,ae,le){if(Lt(ae)){if(!Q(kt))throw new TypeError;if(!et(Wt))throw new TypeError;return H(kt,Wt)}else{if(!Q(kt))throw new TypeError;if(!St(Wt))throw new TypeError;if(!St(le)&&!Lt(le)&&!Ft(le))throw new TypeError;return Ft(le)&&(le=void 0),ae=z(ae),F(kt,Wt,ae,le)}}t("decorate",m);function _(kt,Wt){function ae(le,je){if(!St(le))throw new TypeError;if(!Lt(je)&&!at(je))throw new TypeError;rt(kt,Wt,le,je)}return ae}t("metadata",_);function M(kt,Wt,ae,le){if(!St(ae))throw new TypeError;return Lt(le)||(le=z(le)),rt(kt,Wt,ae,le)}t("defineMetadata",M);function x(kt,Wt,ae){if(!St(Wt))throw new TypeError;return Lt(ae)||(ae=z(ae)),G(kt,Wt,ae)}t("hasMetadata",x);function y(kt,Wt,ae){if(!St(Wt))throw new TypeError;return Lt(ae)||(ae=z(ae)),U(kt,Wt,ae)}t("hasOwnMetadata",y);function S(kt,Wt,ae){if(!St(Wt))throw new TypeError;return Lt(ae)||(ae=z(ae)),Y(kt,Wt,ae)}t("getMetadata",S);function P(kt,Wt,ae){if(!St(Wt))throw new TypeError;return Lt(ae)||(ae=z(ae)),J(kt,Wt,ae)}t("getOwnMetadata",P);function A(kt,Wt){if(!St(kt))throw new TypeError;return Lt(Wt)||(Wt=z(Wt)),ft(kt,Wt)}t("getMetadataKeys",A);function O(kt,Wt){if(!St(kt))throw new TypeError;return Lt(Wt)||(Wt=z(Wt)),dt(kt,Wt)}t("getOwnMetadataKeys",O);function L(kt,Wt,ae){if(!St(Wt))throw new TypeError;Lt(ae)||(ae=z(ae));var le=Z(Wt,ae,!1);if(Lt(le)||!le.delete(kt))return!1;if(le.size>0)return!0;var je=g.get(Wt);return je.delete(ae),je.size>0||g.delete(Wt),!0}t("deleteMetadata",L);function H(kt,Wt){for(var ae=kt.length-1;ae>=0;--ae){var le=kt[ae],je=le(Wt);if(!Lt(je)&&!Ft(je)){if(!et(je))throw new TypeError;Wt=je}}return Wt}function F(kt,Wt,ae,le){for(var je=kt.length-1;je>=0;--je){var Oe=kt[je],We=Oe(Wt,ae,le);if(!Lt(We)&&!Ft(We)){if(!St(We))throw new TypeError;le=We}}return le}function Z(kt,Wt,ae){var le=g.get(kt);if(Lt(le)){if(!ae)return;le=new f,g.set(kt,le)}var je=le.get(Wt);if(Lt(je)){if(!ae)return;je=new f,le.set(Wt,je)}return je}function G(kt,Wt,ae){var le=U(kt,Wt,ae);if(le)return!0;var je=Et(Wt);return Ft(je)?!1:G(kt,je,ae)}function U(kt,Wt,ae){var le=Z(Wt,ae,!1);return Lt(le)?!1:nt(le.has(kt))}function Y(kt,Wt,ae){var le=U(kt,Wt,ae);if(le)return J(kt,Wt,ae);var je=Et(Wt);if(!Ft(je))return Y(kt,je,ae)}function J(kt,Wt,ae){var le=Z(Wt,ae,!1);if(!Lt(le))return le.get(kt)}function rt(kt,Wt,ae,le){var je=Z(ae,le,!0);je.set(kt,Wt)}function ft(kt,Wt){var ae=dt(kt,Wt),le=Et(kt);if(le===null)return ae;var je=ft(le,Wt);if(je.length<=0)return ae;if(ae.length<=0)return je;for(var Oe=new v,We=[],Ye=0,wn=ae;Ye<wn.length;Ye++){var er=wn[Ye],wr=Oe.has(er);wr||(Oe.add(er),We.push(er))}for(var on=0,en=je;on<en.length;on++){var er=en[on],wr=Oe.has(er);wr||(Oe.add(er),We.push(er))}return We}function dt(kt,Wt){var ae=[],le=Z(kt,Wt,!1);if(Lt(le))return ae;for(var je=le.keys(),Oe=k(je),We=0;;){var Ye=it(Oe);if(!Ye)return ae.length=We,ae;var wn=ot(Ye);try{ae[We]=wn}catch(er){try{X(Oe)}finally{throw er}}We++}}function ut(kt){if(kt===null)return 1;switch(typeof kt){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return kt===null?1:6;default:return 6}}function Lt(kt){return kt===void 0}function Ft(kt){return kt===null}function Ot(kt){return typeof kt=="symbol"}function St(kt){return typeof kt=="object"?kt!==null:typeof kt=="function"}function xt(kt,Wt){switch(ut(kt)){case 0:return kt;case 1:return kt;case 2:return kt;case 3:return kt;case 4:return kt;case 5:return kt}var ae=Wt===3?"string":Wt===5?"number":"default",le=gt(kt,c);if(le!==void 0){var je=le.call(kt,ae);if(St(je))throw new TypeError;return je}return At(kt,ae==="default"?"number":ae)}function At(kt,Wt){if(Wt==="string"){var ae=kt.toString;if(ht(ae)){var le=ae.call(kt);if(!St(le))return le}var je=kt.valueOf;if(ht(je)){var le=je.call(kt);if(!St(le))return le}}else{var je=kt.valueOf;if(ht(je)){var le=je.call(kt);if(!St(le))return le}var Oe=kt.toString;if(ht(Oe)){var le=Oe.call(kt);if(!St(le))return le}}throw new TypeError}function nt(kt){return!!kt}function Mt(kt){return""+kt}function z(kt){var Wt=xt(kt,3);return Ot(Wt)?Wt:Mt(Wt)}function Q(kt){return Array.isArray?Array.isArray(kt):kt instanceof Object?kt instanceof Array:Object.prototype.toString.call(kt)==="[object Array]"}function ht(kt){return typeof kt=="function"}function et(kt){return typeof kt=="function"}function at(kt){switch(ut(kt)){case 3:return!0;case 4:return!0;default:return!1}}function gt(kt,Wt){var ae=kt[Wt];if(ae!=null){if(!ht(ae))throw new TypeError;return ae}}function k(kt){var Wt=gt(kt,r);if(!ht(Wt))throw new TypeError;var ae=Wt.call(kt);if(!St(ae))throw new TypeError;return ae}function ot(kt){return kt.value}function it(kt){var Wt=kt.next();return Wt.done?!1:Wt}function X(kt){var Wt=kt.return;Wt&&Wt.call(kt)}function Et(kt){var Wt=Object.getPrototypeOf(kt);if(typeof kt!="function"||kt===o||Wt!==o)return Wt;var ae=kt.prototype,le=ae&&Object.getPrototypeOf(ae);if(le==null||le===Object.prototype)return Wt;var je=le.constructor;return typeof je!="function"||je===kt?Wt:je}function vt(){var kt={},Wt=[],ae=function(){function We(Ye,wn,er){this._index=0,this._keys=Ye,this._values=wn,this._selector=er}return We.prototype["@@iterator"]=function(){return this},We.prototype[r]=function(){return this},We.prototype.next=function(){var Ye=this._index;if(Ye>=0&&Ye<this._keys.length){var wn=this._selector(this._keys[Ye],this._values[Ye]);return Ye+1>=this._keys.length?(this._index=-1,this._keys=Wt,this._values=Wt):this._index++,{value:wn,done:!1}}return{value:void 0,done:!0}},We.prototype.throw=function(Ye){throw this._index>=0&&(this._index=-1,this._keys=Wt,this._values=Wt),Ye},We.prototype.return=function(Ye){return this._index>=0&&(this._index=-1,this._keys=Wt,this._values=Wt),{value:Ye,done:!0}},We}();return function(){function We(){this._keys=[],this._values=[],this._cacheKey=kt,this._cacheIndex=-2}return Object.defineProperty(We.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),We.prototype.has=function(Ye){return this._find(Ye,!1)>=0},We.prototype.get=function(Ye){var wn=this._find(Ye,!1);return wn>=0?this._values[wn]:void 0},We.prototype.set=function(Ye,wn){var er=this._find(Ye,!0);return this._values[er]=wn,this},We.prototype.delete=function(Ye){var wn=this._find(Ye,!1);if(wn>=0){for(var er=this._keys.length,wr=wn+1;wr<er;wr++)this._keys[wr-1]=this._keys[wr],this._values[wr-1]=this._values[wr];return this._keys.length--,this._values.length--,Ye===this._cacheKey&&(this._cacheKey=kt,this._cacheIndex=-2),!0}return!1},We.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=kt,this._cacheIndex=-2},We.prototype.keys=function(){return new ae(this._keys,this._values,le)},We.prototype.values=function(){return new ae(this._keys,this._values,je)},We.prototype.entries=function(){return new ae(this._keys,this._values,Oe)},We.prototype["@@iterator"]=function(){return this.entries()},We.prototype[r]=function(){return this.entries()},We.prototype._find=function(Ye,wn){return this._cacheKey!==Ye&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Ye)),this._cacheIndex<0&&wn&&(this._cacheIndex=this._keys.length,this._keys.push(Ye),this._values.push(void 0)),this._cacheIndex},We}();function le(We,Ye){return We}function je(We,Ye){return Ye}function Oe(We,Ye){return[We,Ye]}}function Nt(){return function(){function kt(){this._map=new f}return Object.defineProperty(kt.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),kt.prototype.has=function(Wt){return this._map.has(Wt)},kt.prototype.add=function(Wt){return this._map.set(Wt,Wt),this},kt.prototype.delete=function(Wt){return this._map.delete(Wt)},kt.prototype.clear=function(){this._map.clear()},kt.prototype.keys=function(){return this._map.keys()},kt.prototype.values=function(){return this._map.values()},kt.prototype.entries=function(){return this._map.entries()},kt.prototype["@@iterator"]=function(){return this.keys()},kt.prototype[r]=function(){return this.keys()},kt}()}function $t(){var kt=16,Wt=a.create(),ae=le();return function(){function wn(){this._key=le()}return wn.prototype.has=function(er){var wr=je(er,!1);return wr!==void 0?a.has(wr,this._key):!1},wn.prototype.get=function(er){var wr=je(er,!1);return wr!==void 0?a.get(wr,this._key):void 0},wn.prototype.set=function(er,wr){var on=je(er,!0);return on[this._key]=wr,this},wn.prototype.delete=function(er){var wr=je(er,!1);return wr!==void 0?delete wr[this._key]:!1},wn.prototype.clear=function(){this._key=le()},wn}();function le(){var wn;do wn="@@WeakMap@@"+Ye();while(a.has(Wt,wn));return Wt[wn]=!0,wn}function je(wn,er){if(!u.call(wn,ae)){if(!er)return;Object.defineProperty(wn,ae,{value:a.create()})}return wn[ae]}function Oe(wn,er){for(var wr=0;wr<er;++wr)wn[wr]=Math.random()*255|0;return wn}function We(wn){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(wn)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(wn)):Oe(new Uint8Array(wn),wn):Oe(new Array(wn),wn)}function Ye(){var wn=We(kt);wn[6]=wn[6]&79|64,wn[8]=wn[8]&191|128;for(var er="",wr=0;wr<kt;++wr){var on=wn[wr];(wr===4||wr===6||wr===8)&&(er+="-"),on<16&&(er+="0"),er+=on.toString(16).toLowerCase()}return er}}function ee(kt){return kt.__=void 0,delete kt.__,kt}})})(T||(T={}))}).call(this,R("Q2Ig"),R("IyRk"))},mTTR:function(Se,ct,R){var V=R("b80T"),E=R("QcOe"),T=R("MMmD");function e(t){return T(t)?V(t,!0):E(t)}Se.exports=e},mc0g:function(Se,ct){function R(V){return function(E,T,e){for(var t=-1,u=Object(E),s=e(E),c=s.length;c--;){var r=s[V?c:++t];if(T(u[r],r,u)===!1)break}return E}}Se.exports=R},mhV4:function(Se,ct,R){var V=R("ZK94");Se.exports.geometry=E,Se.exports.ring=e;function E(u){var s=0,c;switch(u.type){case"Polygon":return T(u.coordinates);case"MultiPolygon":for(c=0;c<u.coordinates.length;c++)s+=T(u.coordinates[c]);return s;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(c=0;c<u.geometries.length;c++)s+=E(u.geometries[c]);return s}}function T(u){var s=0;if(u&&u.length>0){s+=Math.abs(e(u[0]));for(var c=1;c<u.length;c++)s-=Math.abs(e(u[c]))}return s}function e(u){var s,c,r,h,n,i,a,o=0,l=u.length;if(l>2){for(a=0;a<l;a++)a===l-2?(h=l-2,n=l-1,i=0):a===l-1?(h=l-1,n=0,i=1):(h=a,n=a+1,i=a+2),s=u[h],c=u[n],r=u[i],o+=(t(r[0])-t(s[0]))*Math.sin(t(c[1]));o=o*V.RADIUS*V.RADIUS/2}return o}function t(u){return u*Math.PI/180}},mpbz:function(Se,ct,R){(function(V,E){Se.exports=E()})(this,function(){"use strict";function V(S,P,A,O,L,H){if(!(L-O<=A)){var F=O+L>>1;E(S,P,F,O,L,H%2),V(S,P,A,O,F-1,H+1),V(S,P,A,F+1,L,H+1)}}function E(S,P,A,O,L,H){for(;L>O;){if(L-O>600){var F=L-O+1,Z=A-O+1,G=Math.log(F),U=.5*Math.exp(2*G/3),Y=.5*Math.sqrt(G*U*(F-U)/F)*(Z-F/2<0?-1:1),J=Math.max(O,Math.floor(A-Z*U/F+Y)),rt=Math.min(L,Math.floor(A+(F-Z)*U/F+Y));E(S,P,A,J,rt,H)}var ft=P[2*A+H],dt=O,ut=L;for(T(S,P,O,A),P[2*L+H]>ft&&T(S,P,O,L);dt<ut;){for(T(S,P,dt,ut),dt++,ut--;P[2*dt+H]<ft;)dt++;for(;P[2*ut+H]>ft;)ut--}P[2*O+H]===ft?T(S,P,O,ut):(ut++,T(S,P,ut,L)),ut<=A&&(O=ut+1),A<=ut&&(L=ut-1)}}function T(S,P,A,O){e(S,A,O),e(P,2*A,2*O),e(P,2*A+1,2*O+1)}function e(S,P,A){var O=S[P];S[P]=S[A],S[A]=O}function t(S,P,A,O,L,H,F){for(var Z=[0,S.length-1,0],G=[],U,Y;Z.length;){var J=Z.pop(),rt=Z.pop(),ft=Z.pop();if(rt-ft<=F){for(var dt=ft;dt<=rt;dt++)U=P[2*dt],Y=P[2*dt+1],U>=A&&U<=L&&Y>=O&&Y<=H&&G.push(S[dt]);continue}var ut=Math.floor((ft+rt)/2);U=P[2*ut],Y=P[2*ut+1],U>=A&&U<=L&&Y>=O&&Y<=H&&G.push(S[ut]);var Lt=(J+1)%2;(J===0?A<=U:O<=Y)&&(Z.push(ft),Z.push(ut-1),Z.push(Lt)),(J===0?L>=U:H>=Y)&&(Z.push(ut+1),Z.push(rt),Z.push(Lt))}return G}function u(S,P,A,O,L,H){for(var F=[0,S.length-1,0],Z=[],G=L*L;F.length;){var U=F.pop(),Y=F.pop(),J=F.pop();if(Y-J<=H){for(var rt=J;rt<=Y;rt++)s(P[2*rt],P[2*rt+1],A,O)<=G&&Z.push(S[rt]);continue}var ft=Math.floor((J+Y)/2),dt=P[2*ft],ut=P[2*ft+1];s(dt,ut,A,O)<=G&&Z.push(S[ft]);var Lt=(U+1)%2;(U===0?A-L<=dt:O-L<=ut)&&(F.push(J),F.push(ft-1),F.push(Lt)),(U===0?A+L>=dt:O+L>=ut)&&(F.push(ft+1),F.push(Y),F.push(Lt))}return Z}function s(S,P,A,O){var L=S-A,H=P-O;return L*L+H*H}var c=function(P){return P[0]},r=function(P){return P[1]},h=function(P,A,O,L,H){A===void 0&&(A=c),O===void 0&&(O=r),L===void 0&&(L=64),H===void 0&&(H=Float64Array),this.nodeSize=L,this.points=P;for(var F=P.length<65536?Uint16Array:Uint32Array,Z=this.ids=new F(P.length),G=this.coords=new H(P.length*2),U=0;U<P.length;U++)Z[U]=U,G[2*U]=A(P[U]),G[2*U+1]=O(P[U]);V(Z,G,L,0,Z.length-1,0)};h.prototype.range=function(P,A,O,L){return t(this.ids,this.coords,P,A,O,L,this.nodeSize)},h.prototype.within=function(P,A,O){return u(this.ids,this.coords,P,A,O,this.nodeSize)};var n={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(P){return P}},i=Math.fround||function(S){return function(P){return S[0]=+P,S[0]}}(new Float32Array(1)),a=function(P){this.options=M(Object.create(n),P),this.trees=new Array(this.options.maxZoom+1)};a.prototype.load=function(P){var A=this.options,O=A.log,L=A.minZoom,H=A.maxZoom,F=A.nodeSize;O&&console.time("total time");var Z="prepare "+P.length+" points";O&&console.time(Z),this.points=P;for(var G=[],U=0;U<P.length;U++)!P[U].geometry||G.push(l(P[U],U));this.trees[H+1]=new h(G,x,y,F,Float32Array),O&&console.timeEnd(Z);for(var Y=H;Y>=L;Y--){var J=+Date.now();G=this._cluster(G,Y),this.trees[Y]=new h(G,x,y,F,Float32Array),O&&console.log("z%d: %d clusters in %dms",Y,G.length,+Date.now()-J)}return O&&console.timeEnd("total time"),this},a.prototype.getClusters=function(P,A){var O=((P[0]+180)%360+360)%360-180,L=Math.max(-90,Math.min(90,P[1])),H=P[2]===180?180:((P[2]+180)%360+360)%360-180,F=Math.max(-90,Math.min(90,P[3]));if(P[2]-P[0]>=360)O=-180,H=180;else if(O>H){var Z=this.getClusters([O,L,180,F],A),G=this.getClusters([-180,L,H,F],A);return Z.concat(G)}for(var U=this.trees[this._limitZoom(A)],Y=U.range(b(O),g(F),b(H),g(L)),J=[],rt=0,ft=Y;rt<ft.length;rt+=1){var dt=ft[rt],ut=U.points[dt];J.push(ut.numPoints?f(ut):this.points[ut.index])}return J},a.prototype.getChildren=function(P){var A=this._getOriginId(P),O=this._getOriginZoom(P),L="No cluster with the specified id.",H=this.trees[O];if(!H)throw new Error(L);var F=H.points[A];if(!F)throw new Error(L);for(var Z=this.options.radius/(this.options.extent*Math.pow(2,O-1)),G=H.within(F.x,F.y,Z),U=[],Y=0,J=G;Y<J.length;Y+=1){var rt=J[Y],ft=H.points[rt];ft.parentId===P&&U.push(ft.numPoints?f(ft):this.points[ft.index])}if(U.length===0)throw new Error(L);return U},a.prototype.getLeaves=function(P,A,O){A=A||10,O=O||0;var L=[];return this._appendLeaves(L,P,A,O,0),L},a.prototype.getTile=function(P,A,O){var L=this.trees[this._limitZoom(P)],H=Math.pow(2,P),F=this.options,Z=F.extent,G=F.radius,U=G/Z,Y=(O-U)/H,J=(O+1+U)/H,rt={features:[]};return this._addTileFeatures(L.range((A-U)/H,Y,(A+1+U)/H,J),L.points,A,O,H,rt),A===0&&this._addTileFeatures(L.range(1-U/H,Y,1,J),L.points,H,O,H,rt),A===H-1&&this._addTileFeatures(L.range(0,Y,U/H,J),L.points,-1,O,H,rt),rt.features.length?rt:null},a.prototype.getClusterExpansionZoom=function(P){for(var A=this._getOriginZoom(P)-1;A<=this.options.maxZoom;){var O=this.getChildren(P);if(A++,O.length!==1)break;P=O[0].properties.cluster_id}return A},a.prototype._appendLeaves=function(P,A,O,L,H){for(var F=this.getChildren(A),Z=0,G=F;Z<G.length;Z+=1){var U=G[Z],Y=U.properties;if(Y&&Y.cluster?H+Y.point_count<=L?H+=Y.point_count:H=this._appendLeaves(P,Y.cluster_id,O,L,H):H<L?H++:P.push(U),P.length===O)break}return H},a.prototype._addTileFeatures=function(P,A,O,L,H,F){for(var Z=0,G=P;Z<G.length;Z+=1){var U=G[Z],Y=A[U],J=Y.numPoints,rt=void 0,ft=void 0,dt=void 0;if(J)rt=v(Y),ft=Y.x,dt=Y.y;else{var ut=this.points[Y.index];rt=ut.properties,ft=b(ut.geometry.coordinates[0]),dt=g(ut.geometry.coordinates[1])}var Lt={type:1,geometry:[[Math.round(this.options.extent*(ft*H-O)),Math.round(this.options.extent*(dt*H-L))]],tags:rt},Ft=void 0;J?Ft=Y.id:this.options.generateId?Ft=Y.index:this.points[Y.index].id&&(Ft=this.points[Y.index].id),Ft!==void 0&&(Lt.id=Ft),F.features.push(Lt)}},a.prototype._limitZoom=function(P){return Math.max(this.options.minZoom,Math.min(+P,this.options.maxZoom+1))},a.prototype._cluster=function(P,A){for(var O=[],L=this.options,H=L.radius,F=L.extent,Z=L.reduce,G=L.minPoints,U=H/(F*Math.pow(2,A)),Y=0;Y<P.length;Y++){var J=P[Y];if(!(J.zoom<=A)){J.zoom=A;for(var rt=this.trees[A+1],ft=rt.within(J.x,J.y,U),dt=J.numPoints||1,ut=dt,Lt=0,Ft=ft;Lt<Ft.length;Lt+=1){var Ot=Ft[Lt],St=rt.points[Ot];St.zoom>A&&(ut+=St.numPoints||1)}if(ut>=G){for(var xt=J.x*dt,At=J.y*dt,nt=Z&&dt>1?this._map(J,!0):null,Mt=(Y<<5)+(A+1)+this.points.length,z=0,Q=ft;z<Q.length;z+=1){var ht=Q[z],et=rt.points[ht];if(!(et.zoom<=A)){et.zoom=A;var at=et.numPoints||1;xt+=et.x*at,At+=et.y*at,et.parentId=Mt,Z&&(nt||(nt=this._map(J,!0)),Z(nt,this._map(et)))}}J.parentId=Mt,O.push(o(xt/ut,At/ut,Mt,ut,nt))}else if(O.push(J),ut>1)for(var gt=0,k=ft;gt<k.length;gt+=1){var ot=k[gt],it=rt.points[ot];it.zoom<=A||(it.zoom=A,O.push(it))}}}return O},a.prototype._getOriginId=function(P){return P-this.points.length>>5},a.prototype._getOriginZoom=function(P){return(P-this.points.length)%32},a.prototype._map=function(P,A){if(P.numPoints)return A?M({},P.properties):P.properties;var O=this.points[P.index].properties,L=this.options.map(O);return A&&L===O?M({},L):L};function o(S,P,A,O,L){return{x:i(S),y:i(P),zoom:Infinity,id:A,parentId:-1,numPoints:O,properties:L}}function l(S,P){var A=S.geometry.coordinates,O=A[0],L=A[1];return{x:i(b(O)),y:i(g(L)),zoom:Infinity,index:P,parentId:-1}}function f(S){return{type:"Feature",id:S.id,properties:v(S),geometry:{type:"Point",coordinates:[m(S.x),_(S.y)]}}}function v(S){var P=S.numPoints,A=P>=1e4?Math.round(P/1e3)+"k":P>=1e3?Math.round(P/100)/10+"k":P;return M(M({},S.properties),{cluster:!0,cluster_id:S.id,point_count:P,point_count_abbreviated:A})}function b(S){return S/360+.5}function g(S){var P=Math.sin(S*Math.PI/180),A=.5-.25*Math.log((1+P)/(1-P))/Math.PI;return A<0?0:A>1?1:A}function m(S){return(S-.5)*360}function _(S){var P=(180-S*360)*Math.PI/180;return 360*Math.atan(Math.exp(P))/Math.PI-90}function M(S,P){for(var A in P)S[A]=P[A];return S}function x(S){return S.x}function y(S){return S.y}return a})},"mv/X":function(Se,ct,R){var V=R("ljhN"),E=R("MMmD"),T=R("wJg7"),e=R("GoyQ");function t(u,s,c){if(!e(c))return!1;var r=typeof s;return(r=="number"?E(c)&&T(s,c.length):r=="string"&&s in c)?V(c[s],u):!1}Se.exports=t},"n+fv":function(Se,ct,R){"use strict";R.r(ct),R.d(ct,"create",function(){return E}),R.d(ct,"clone",function(){return T}),R.d(ct,"length",function(){return e}),R.d(ct,"fromValues",function(){return t}),R.d(ct,"copy",function(){return u}),R.d(ct,"set",function(){return s}),R.d(ct,"add",function(){return c}),R.d(ct,"subtract",function(){return r}),R.d(ct,"multiply",function(){return h}),R.d(ct,"divide",function(){return n}),R.d(ct,"ceil",function(){return i}),R.d(ct,"floor",function(){return a}),R.d(ct,"min",function(){return o}),R.d(ct,"max",function(){return l}),R.d(ct,"round",function(){return f}),R.d(ct,"scale",function(){return v}),R.d(ct,"scaleAndAdd",function(){return b}),R.d(ct,"distance",function(){return g}),R.d(ct,"squaredDistance",function(){return m}),R.d(ct,"squaredLength",function(){return _}),R.d(ct,"negate",function(){return M}),R.d(ct,"inverse",function(){return x}),R.d(ct,"normalize",function(){return y}),R.d(ct,"dot",function(){return S}),R.d(ct,"cross",function(){return P}),R.d(ct,"lerp",function(){return A}),R.d(ct,"hermite",function(){return O}),R.d(ct,"bezier",function(){return L}),R.d(ct,"random",function(){return H}),R.d(ct,"transformMat4",function(){return F}),R.d(ct,"transformMat3",function(){return Z}),R.d(ct,"transformQuat",function(){return G}),R.d(ct,"rotateX",function(){return U}),R.d(ct,"rotateY",function(){return Y}),R.d(ct,"rotateZ",function(){return J}),R.d(ct,"angle",function(){return rt}),R.d(ct,"zero",function(){return ft}),R.d(ct,"str",function(){return dt}),R.d(ct,"exactEquals",function(){return ut}),R.d(ct,"equals",function(){return Lt}),R.d(ct,"sub",function(){return Ft}),R.d(ct,"mul",function(){return Ot}),R.d(ct,"div",function(){return St}),R.d(ct,"dist",function(){return xt}),R.d(ct,"sqrDist",function(){return At}),R.d(ct,"len",function(){return nt}),R.d(ct,"sqrLen",function(){return Mt}),R.d(ct,"forEach",function(){return z});var V=R("yU0y");function E(){var Q=new V.a(3);return V.a!=Float32Array&&(Q[0]=0,Q[1]=0,Q[2]=0),Q}function T(Q){var ht=new V.a(3);return ht[0]=Q[0],ht[1]=Q[1],ht[2]=Q[2],ht}function e(Q){var ht=Q[0],et=Q[1],at=Q[2];return Math.hypot(ht,et,at)}function t(Q,ht,et){var at=new V.a(3);return at[0]=Q,at[1]=ht,at[2]=et,at}function u(Q,ht){return Q[0]=ht[0],Q[1]=ht[1],Q[2]=ht[2],Q}function s(Q,ht,et,at){return Q[0]=ht,Q[1]=et,Q[2]=at,Q}function c(Q,ht,et){return Q[0]=ht[0]+et[0],Q[1]=ht[1]+et[1],Q[2]=ht[2]+et[2],Q}function r(Q,ht,et){return Q[0]=ht[0]-et[0],Q[1]=ht[1]-et[1],Q[2]=ht[2]-et[2],Q}function h(Q,ht,et){return Q[0]=ht[0]*et[0],Q[1]=ht[1]*et[1],Q[2]=ht[2]*et[2],Q}function n(Q,ht,et){return Q[0]=ht[0]/et[0],Q[1]=ht[1]/et[1],Q[2]=ht[2]/et[2],Q}function i(Q,ht){return Q[0]=Math.ceil(ht[0]),Q[1]=Math.ceil(ht[1]),Q[2]=Math.ceil(ht[2]),Q}function a(Q,ht){return Q[0]=Math.floor(ht[0]),Q[1]=Math.floor(ht[1]),Q[2]=Math.floor(ht[2]),Q}function o(Q,ht,et){return Q[0]=Math.min(ht[0],et[0]),Q[1]=Math.min(ht[1],et[1]),Q[2]=Math.min(ht[2],et[2]),Q}function l(Q,ht,et){return Q[0]=Math.max(ht[0],et[0]),Q[1]=Math.max(ht[1],et[1]),Q[2]=Math.max(ht[2],et[2]),Q}function f(Q,ht){return Q[0]=Math.round(ht[0]),Q[1]=Math.round(ht[1]),Q[2]=Math.round(ht[2]),Q}function v(Q,ht,et){return Q[0]=ht[0]*et,Q[1]=ht[1]*et,Q[2]=ht[2]*et,Q}function b(Q,ht,et,at){return Q[0]=ht[0]+et[0]*at,Q[1]=ht[1]+et[1]*at,Q[2]=ht[2]+et[2]*at,Q}function g(Q,ht){var et=ht[0]-Q[0],at=ht[1]-Q[1],gt=ht[2]-Q[2];return Math.hypot(et,at,gt)}function m(Q,ht){var et=ht[0]-Q[0],at=ht[1]-Q[1],gt=ht[2]-Q[2];return et*et+at*at+gt*gt}function _(Q){var ht=Q[0],et=Q[1],at=Q[2];return ht*ht+et*et+at*at}function M(Q,ht){return Q[0]=-ht[0],Q[1]=-ht[1],Q[2]=-ht[2],Q}function x(Q,ht){return Q[0]=1/ht[0],Q[1]=1/ht[1],Q[2]=1/ht[2],Q}function y(Q,ht){var et=ht[0],at=ht[1],gt=ht[2],k=et*et+at*at+gt*gt;return k>0&&(k=1/Math.sqrt(k)),Q[0]=ht[0]*k,Q[1]=ht[1]*k,Q[2]=ht[2]*k,Q}function S(Q,ht){return Q[0]*ht[0]+Q[1]*ht[1]+Q[2]*ht[2]}function P(Q,ht,et){var at=ht[0],gt=ht[1],k=ht[2],ot=et[0],it=et[1],X=et[2];return Q[0]=gt*X-k*it,Q[1]=k*ot-at*X,Q[2]=at*it-gt*ot,Q}function A(Q,ht,et,at){var gt=ht[0],k=ht[1],ot=ht[2];return Q[0]=gt+at*(et[0]-gt),Q[1]=k+at*(et[1]-k),Q[2]=ot+at*(et[2]-ot),Q}function O(Q,ht,et,at,gt,k){var ot=k*k,it=ot*(2*k-3)+1,X=ot*(k-2)+k,Et=ot*(k-1),vt=ot*(3-2*k);return Q[0]=ht[0]*it+et[0]*X+at[0]*Et+gt[0]*vt,Q[1]=ht[1]*it+et[1]*X+at[1]*Et+gt[1]*vt,Q[2]=ht[2]*it+et[2]*X+at[2]*Et+gt[2]*vt,Q}function L(Q,ht,et,at,gt,k){var ot=1-k,it=ot*ot,X=k*k,Et=it*ot,vt=3*k*it,Nt=3*X*ot,$t=X*k;return Q[0]=ht[0]*Et+et[0]*vt+at[0]*Nt+gt[0]*$t,Q[1]=ht[1]*Et+et[1]*vt+at[1]*Nt+gt[1]*$t,Q[2]=ht[2]*Et+et[2]*vt+at[2]*Nt+gt[2]*$t,Q}function H(Q,ht){ht=ht||1;var et=V.c()*2*Math.PI,at=V.c()*2-1,gt=Math.sqrt(1-at*at)*ht;return Q[0]=Math.cos(et)*gt,Q[1]=Math.sin(et)*gt,Q[2]=at*ht,Q}function F(Q,ht,et){var at=ht[0],gt=ht[1],k=ht[2],ot=et[3]*at+et[7]*gt+et[11]*k+et[15];return ot=ot||1,Q[0]=(et[0]*at+et[4]*gt+et[8]*k+et[12])/ot,Q[1]=(et[1]*at+et[5]*gt+et[9]*k+et[13])/ot,Q[2]=(et[2]*at+et[6]*gt+et[10]*k+et[14])/ot,Q}function Z(Q,ht,et){var at=ht[0],gt=ht[1],k=ht[2];return Q[0]=at*et[0]+gt*et[3]+k*et[6],Q[1]=at*et[1]+gt*et[4]+k*et[7],Q[2]=at*et[2]+gt*et[5]+k*et[8],Q}function G(Q,ht,et){var at=et[0],gt=et[1],k=et[2],ot=et[3],it=ht[0],X=ht[1],Et=ht[2],vt=gt*Et-k*X,Nt=k*it-at*Et,$t=at*X-gt*it,ee=gt*$t-k*Nt,kt=k*vt-at*$t,Wt=at*Nt-gt*vt,ae=ot*2;return vt*=ae,Nt*=ae,$t*=ae,ee*=2,kt*=2,Wt*=2,Q[0]=it+vt+ee,Q[1]=X+Nt+kt,Q[2]=Et+$t+Wt,Q}function U(Q,ht,et,at){var gt=[],k=[];return gt[0]=ht[0]-et[0],gt[1]=ht[1]-et[1],gt[2]=ht[2]-et[2],k[0]=gt[0],k[1]=gt[1]*Math.cos(at)-gt[2]*Math.sin(at),k[2]=gt[1]*Math.sin(at)+gt[2]*Math.cos(at),Q[0]=k[0]+et[0],Q[1]=k[1]+et[1],Q[2]=k[2]+et[2],Q}function Y(Q,ht,et,at){var gt=[],k=[];return gt[0]=ht[0]-et[0],gt[1]=ht[1]-et[1],gt[2]=ht[2]-et[2],k[0]=gt[2]*Math.sin(at)+gt[0]*Math.cos(at),k[1]=gt[1],k[2]=gt[2]*Math.cos(at)-gt[0]*Math.sin(at),Q[0]=k[0]+et[0],Q[1]=k[1]+et[1],Q[2]=k[2]+et[2],Q}function J(Q,ht,et,at){var gt=[],k=[];return gt[0]=ht[0]-et[0],gt[1]=ht[1]-et[1],gt[2]=ht[2]-et[2],k[0]=gt[0]*Math.cos(at)-gt[1]*Math.sin(at),k[1]=gt[0]*Math.sin(at)+gt[1]*Math.cos(at),k[2]=gt[2],Q[0]=k[0]+et[0],Q[1]=k[1]+et[1],Q[2]=k[2]+et[2],Q}function rt(Q,ht){var et=Q[0],at=Q[1],gt=Q[2],k=ht[0],ot=ht[1],it=ht[2],X=Math.sqrt(et*et+at*at+gt*gt),Et=Math.sqrt(k*k+ot*ot+it*it),vt=X*Et,Nt=vt&&S(Q,ht)/vt;return Math.acos(Math.min(Math.max(Nt,-1),1))}function ft(Q){return Q[0]=0,Q[1]=0,Q[2]=0,Q}function dt(Q){return"vec3("+Q[0]+", "+Q[1]+", "+Q[2]+")"}function ut(Q,ht){return Q[0]===ht[0]&&Q[1]===ht[1]&&Q[2]===ht[2]}function Lt(Q,ht){var et=Q[0],at=Q[1],gt=Q[2],k=ht[0],ot=ht[1],it=ht[2];return Math.abs(et-k)<=V.b*Math.max(1,Math.abs(et),Math.abs(k))&&Math.abs(at-ot)<=V.b*Math.max(1,Math.abs(at),Math.abs(ot))&&Math.abs(gt-it)<=V.b*Math.max(1,Math.abs(gt),Math.abs(it))}var Ft=r,Ot=h,St=n,xt=g,At=m,nt=e,Mt=_,z=function(){var Q=E();return function(ht,et,at,gt,k,ot){var it,X;for(et||(et=3),at||(at=0),gt?X=Math.min(gt*et+at,ht.length):X=ht.length,it=at;it<X;it+=et)Q[0]=ht[it],Q[1]=ht[it+1],Q[2]=ht[it+2],k(Q,Q,ot),ht[it]=Q[0],ht[it+1]=Q[1],ht[it+2]=Q[2];return ht}}()},n2J3:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.unmanaged=void 0;var V=R("xfSm"),E=R("GXnB"),T=R("Ztfv");function e(){return function(t,u,s){var c=new E.Metadata(V.UNMANAGED_TAG,!0);T.tagParameter(t,u,s,c)}}ct.unmanaged=e},n3AX:function(Se,ct,R){var V=R("Nsbk");function E(T,e){for(;!Object.prototype.hasOwnProperty.call(T,e)&&(T=V(T),T!==null););return T}Se.exports=E,Se.exports.default=Se.exports,Se.exports.__esModule=!0},"o+pz":function(Se,ct,R){"use strict";R.d(ct,"a",function(){return V});var V;(function(E){E[E.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",E[E.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",E[E.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",E[E.POINTS=0]="POINTS",E[E.LINES=1]="LINES",E[E.LINE_LOOP=2]="LINE_LOOP",E[E.LINE_STRIP=3]="LINE_STRIP",E[E.TRIANGLES=4]="TRIANGLES",E[E.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",E[E.TRIANGLE_FAN=6]="TRIANGLE_FAN",E[E.ZERO=0]="ZERO",E[E.ONE=1]="ONE",E[E.SRC_COLOR=768]="SRC_COLOR",E[E.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",E[E.SRC_ALPHA=770]="SRC_ALPHA",E[E.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",E[E.DST_ALPHA=772]="DST_ALPHA",E[E.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",E[E.DST_COLOR=774]="DST_COLOR",E[E.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",E[E.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",E[E.FUNC_ADD=32774]="FUNC_ADD",E[E.BLEND_EQUATION=32777]="BLEND_EQUATION",E[E.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",E[E.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",E[E.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",E[E.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",E[E.MAX_EXT=32776]="MAX_EXT",E[E.MIN_EXT=32775]="MIN_EXT",E[E.BLEND_DST_RGB=32968]="BLEND_DST_RGB",E[E.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",E[E.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",E[E.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",E[E.CONSTANT_COLOR=32769]="CONSTANT_COLOR",E[E.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",E[E.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",E[E.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",E[E.BLEND_COLOR=32773]="BLEND_COLOR",E[E.ARRAY_BUFFER=34962]="ARRAY_BUFFER",E[E.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",E[E.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",E[E.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",E[E.STREAM_DRAW=35040]="STREAM_DRAW",E[E.STATIC_DRAW=35044]="STATIC_DRAW",E[E.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",E[E.BUFFER_SIZE=34660]="BUFFER_SIZE",E[E.BUFFER_USAGE=34661]="BUFFER_USAGE",E[E.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",E[E.FRONT=1028]="FRONT",E[E.BACK=1029]="BACK",E[E.FRONT_AND_BACK=1032]="FRONT_AND_BACK",E[E.CULL_FACE=2884]="CULL_FACE",E[E.BLEND=3042]="BLEND",E[E.DITHER=3024]="DITHER",E[E.STENCIL_TEST=2960]="STENCIL_TEST",E[E.DEPTH_TEST=2929]="DEPTH_TEST",E[E.SCISSOR_TEST=3089]="SCISSOR_TEST",E[E.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",E[E.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",E[E.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",E[E.NO_ERROR=0]="NO_ERROR",E[E.INVALID_ENUM=1280]="INVALID_ENUM",E[E.INVALID_VALUE=1281]="INVALID_VALUE",E[E.INVALID_OPERATION=1282]="INVALID_OPERATION",E[E.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",E[E.CW=2304]="CW",E[E.CCW=2305]="CCW",E[E.LINE_WIDTH=2849]="LINE_WIDTH",E[E.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",E[E.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",E[E.CULL_FACE_MODE=2885]="CULL_FACE_MODE",E[E.FRONT_FACE=2886]="FRONT_FACE",E[E.DEPTH_RANGE=2928]="DEPTH_RANGE",E[E.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",E[E.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",E[E.DEPTH_FUNC=2932]="DEPTH_FUNC",E[E.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",E[E.STENCIL_FUNC=2962]="STENCIL_FUNC",E[E.STENCIL_FAIL=2964]="STENCIL_FAIL",E[E.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",E[E.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",E[E.STENCIL_REF=2967]="STENCIL_REF",E[E.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",E[E.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",E[E.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",E[E.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",E[E.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",E[E.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",E[E.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",E[E.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",E[E.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",E[E.VIEWPORT=2978]="VIEWPORT",E[E.SCISSOR_BOX=3088]="SCISSOR_BOX",E[E.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",E[E.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",E[E.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",E[E.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",E[E.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",E[E.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",E[E.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",E[E.RED_BITS=3410]="RED_BITS",E[E.GREEN_BITS=3411]="GREEN_BITS",E[E.BLUE_BITS=3412]="BLUE_BITS",E[E.ALPHA_BITS=3413]="ALPHA_BITS",E[E.DEPTH_BITS=3414]="DEPTH_BITS",E[E.STENCIL_BITS=3415]="STENCIL_BITS",E[E.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",E[E.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",E[E.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",E[E.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",E[E.SAMPLES=32937]="SAMPLES",E[E.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",E[E.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",E[E.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",E[E.DONT_CARE=4352]="DONT_CARE",E[E.FASTEST=4353]="FASTEST",E[E.NICEST=4354]="NICEST",E[E.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",E[E.BYTE=5120]="BYTE",E[E.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",E[E.SHORT=5122]="SHORT",E[E.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",E[E.INT=5124]="INT",E[E.UNSIGNED_INT=5125]="UNSIGNED_INT",E[E.FLOAT=5126]="FLOAT",E[E.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",E[E.ALPHA=6406]="ALPHA",E[E.RGB=6407]="RGB",E[E.RGBA=6408]="RGBA",E[E.LUMINANCE=6409]="LUMINANCE",E[E.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",E[E.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",E[E.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",E[E.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",E[E.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",E[E.VERTEX_SHADER=35633]="VERTEX_SHADER",E[E.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",E[E.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",E[E.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",E[E.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",E[E.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",E[E.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",E[E.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",E[E.SHADER_TYPE=35663]="SHADER_TYPE",E[E.DELETE_STATUS=35712]="DELETE_STATUS",E[E.LINK_STATUS=35714]="LINK_STATUS",E[E.VALIDATE_STATUS=35715]="VALIDATE_STATUS",E[E.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",E[E.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",E[E.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",E[E.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",E[E.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",E[E.NEVER=512]="NEVER",E[E.LESS=513]="LESS",E[E.EQUAL=514]="EQUAL",E[E.LEQUAL=515]="LEQUAL",E[E.GREATER=516]="GREATER",E[E.NOTEQUAL=517]="NOTEQUAL",E[E.GEQUAL=518]="GEQUAL",E[E.ALWAYS=519]="ALWAYS",E[E.KEEP=7680]="KEEP",E[E.REPLACE=7681]="REPLACE",E[E.INCR=7682]="INCR",E[E.DECR=7683]="DECR",E[E.INVERT=5386]="INVERT",E[E.INCR_WRAP=34055]="INCR_WRAP",E[E.DECR_WRAP=34056]="DECR_WRAP",E[E.VENDOR=7936]="VENDOR",E[E.RENDERER=7937]="RENDERER",E[E.VERSION=7938]="VERSION",E[E.NEAREST=9728]="NEAREST",E[E.LINEAR=9729]="LINEAR",E[E.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",E[E.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",E[E.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",E[E.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",E[E.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",E[E.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",E[E.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",E[E.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",E[E.TEXTURE_2D=3553]="TEXTURE_2D",E[E.TEXTURE=5890]="TEXTURE",E[E.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",E[E.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",E[E.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",E[E.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",E[E.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",E[E.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",E[E.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",E[E.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",E[E.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",E[E.TEXTURE0=33984]="TEXTURE0",E[E.TEXTURE1=33985]="TEXTURE1",E[E.TEXTURE2=33986]="TEXTURE2",E[E.TEXTURE3=33987]="TEXTURE3",E[E.TEXTURE4=33988]="TEXTURE4",E[E.TEXTURE5=33989]="TEXTURE5",E[E.TEXTURE6=33990]="TEXTURE6",E[E.TEXTURE7=33991]="TEXTURE7",E[E.TEXTURE8=33992]="TEXTURE8",E[E.TEXTURE9=33993]="TEXTURE9",E[E.TEXTURE10=33994]="TEXTURE10",E[E.TEXTURE11=33995]="TEXTURE11",E[E.TEXTURE12=33996]="TEXTURE12",E[E.TEXTURE13=33997]="TEXTURE13",E[E.TEXTURE14=33998]="TEXTURE14",E[E.TEXTURE15=33999]="TEXTURE15",E[E.TEXTURE16=34e3]="TEXTURE16",E[E.TEXTURE17=34001]="TEXTURE17",E[E.TEXTURE18=34002]="TEXTURE18",E[E.TEXTURE19=34003]="TEXTURE19",E[E.TEXTURE20=34004]="TEXTURE20",E[E.TEXTURE21=34005]="TEXTURE21",E[E.TEXTURE22=34006]="TEXTURE22",E[E.TEXTURE23=34007]="TEXTURE23",E[E.TEXTURE24=34008]="TEXTURE24",E[E.TEXTURE25=34009]="TEXTURE25",E[E.TEXTURE26=34010]="TEXTURE26",E[E.TEXTURE27=34011]="TEXTURE27",E[E.TEXTURE28=34012]="TEXTURE28",E[E.TEXTURE29=34013]="TEXTURE29",E[E.TEXTURE30=34014]="TEXTURE30",E[E.TEXTURE31=34015]="TEXTURE31",E[E.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",E[E.REPEAT=10497]="REPEAT",E[E.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",E[E.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",E[E.FLOAT_VEC2=35664]="FLOAT_VEC2",E[E.FLOAT_VEC3=35665]="FLOAT_VEC3",E[E.FLOAT_VEC4=35666]="FLOAT_VEC4",E[E.INT_VEC2=35667]="INT_VEC2",E[E.INT_VEC3=35668]="INT_VEC3",E[E.INT_VEC4=35669]="INT_VEC4",E[E.BOOL=35670]="BOOL",E[E.BOOL_VEC2=35671]="BOOL_VEC2",E[E.BOOL_VEC3=35672]="BOOL_VEC3",E[E.BOOL_VEC4=35673]="BOOL_VEC4",E[E.FLOAT_MAT2=35674]="FLOAT_MAT2",E[E.FLOAT_MAT3=35675]="FLOAT_MAT3",E[E.FLOAT_MAT4=35676]="FLOAT_MAT4",E[E.SAMPLER_2D=35678]="SAMPLER_2D",E[E.SAMPLER_CUBE=35680]="SAMPLER_CUBE",E[E.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",E[E.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",E[E.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",E[E.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",E[E.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",E[E.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",E[E.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",E[E.COMPILE_STATUS=35713]="COMPILE_STATUS",E[E.LOW_FLOAT=36336]="LOW_FLOAT",E[E.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",E[E.HIGH_FLOAT=36338]="HIGH_FLOAT",E[E.LOW_INT=36339]="LOW_INT",E[E.MEDIUM_INT=36340]="MEDIUM_INT",E[E.HIGH_INT=36341]="HIGH_INT",E[E.FRAMEBUFFER=36160]="FRAMEBUFFER",E[E.RENDERBUFFER=36161]="RENDERBUFFER",E[E.RGBA4=32854]="RGBA4",E[E.RGB5_A1=32855]="RGB5_A1",E[E.RGB565=36194]="RGB565",E[E.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",E[E.STENCIL_INDEX=6401]="STENCIL_INDEX",E[E.STENCIL_INDEX8=36168]="STENCIL_INDEX8",E[E.DEPTH_STENCIL=34041]="DEPTH_STENCIL",E[E.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",E[E.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",E[E.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",E[E.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",E[E.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",E[E.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",E[E.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",E[E.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",E[E.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",E[E.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",E[E.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",E[E.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",E[E.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",E[E.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",E[E.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",E[E.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",E[E.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",E[E.NONE=0]="NONE",E[E.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",E[E.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",E[E.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",E[E.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",E[E.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",E[E.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",E[E.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",E[E.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",E[E.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",E[E.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",E[E.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",E[E.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",E[E.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",E[E.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL"})(V||(V={}))},"oCl/":function(Se,ct,R){var V=R("CH3K"),E=R("LcsW"),T=R("MvSz"),e=R("0ycA"),t=Object.getOwnPropertySymbols,u=t?function(s){for(var c=[];s;)V(c,T(s)),s=E(s);return c}:e;Se.exports=u},oIFs:function(Se,ct,R){Se.exports={"ant-skeleton":"ant-skeleton","ant-skeleton-header":"ant-skeleton-header","ant-skeleton-avatar":"ant-skeleton-avatar","ant-skeleton-avatar-circle":"ant-skeleton-avatar-circle","ant-skeleton-avatar-lg":"ant-skeleton-avatar-lg","ant-skeleton-avatar-sm":"ant-skeleton-avatar-sm","ant-skeleton-content":"ant-skeleton-content","ant-skeleton-title":"ant-skeleton-title","ant-skeleton-paragraph":"ant-skeleton-paragraph","ant-skeleton-with-avatar":"ant-skeleton-with-avatar","ant-skeleton-round":"ant-skeleton-round","ant-skeleton-active":"ant-skeleton-active","ant-skeleton-loading":"ant-skeleton-loading","ant-skeleton-button":"ant-skeleton-button","ant-skeleton-input":"ant-skeleton-input","ant-skeleton-image":"ant-skeleton-image","ant-skeleton-element":"ant-skeleton-element","ant-skeleton-button-circle":"ant-skeleton-button-circle","ant-skeleton-button-round":"ant-skeleton-button-round","ant-skeleton-button-lg":"ant-skeleton-button-lg","ant-skeleton-button-sm":"ant-skeleton-button-sm","ant-skeleton-input-lg":"ant-skeleton-input-lg","ant-skeleton-input-sm":"ant-skeleton-input-sm","ant-skeleton-image-circle":"ant-skeleton-image-circle","ant-skeleton-image-path":"ant-skeleton-image-path","ant-skeleton-image-svg":"ant-skeleton-image-svg","ant-skeleton-rtl":"ant-skeleton-rtl","ant-skeleton-loading-rtl":"ant-skeleton-loading-rtl"}},oShl:function(Se,ct,R){var V=R("Nsbk"),E=R("SksO"),T=R("xfeJ"),e=R("sXyB");function t(u){var s=typeof Map=="function"?new Map:void 0;return Se.exports=t=function(r){if(r===null||!T(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof s!="undefined"){if(s.has(r))return s.get(r);s.set(r,h)}function h(){return e(r,arguments,V(this).constructor)}return h.prototype=Object.create(r.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),E(h,r)},Se.exports.default=Se.exports,Se.exports.__esModule=!0,t(u)}Se.exports=t,Se.exports.default=Se.exports,Se.exports.__esModule=!0},oaX6:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.targetName=void 0;var V=R("xfSm"),E=R("GXnB"),T=R("Ztfv");function e(t){return function(u,s,c){var r=new E.Metadata(V.NAME_TAG,t);T.tagParameter(u,s,c,r)}}ct.targetName=e},"otv/":function(Se,ct,R){var V=R("nmnc"),E=V?V.prototype:void 0,T=E?E.valueOf:void 0;function e(t){return T?Object(T.call(t)):{}}Se.exports=e},"oy+k":function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.Context=void 0;var V=R("d9O0"),E=function(){function T(e){this.id=V.id(),this.container=e}return T.prototype.addPlan=function(e){this.plan=e},T.prototype.setCurrentRequest=function(e){this.currentRequest=e},T}();ct.Context=E},pFRH:function(Se,ct,R){var V=R("cvCv"),E=R("O0oS"),T=R("zZ0H"),e=E?function(t,u){return E(t,"toString",{configurable:!0,enumerable:!1,value:V(u),writable:!0})}:T;Se.exports=e},q4HE:function(Se,ct){var R="\\ud800-\\udfff",V="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",e=V+E+T,t="\\ufe0e\\ufe0f",u="["+R+"]",s="["+e+"]",c="\\ud83c[\\udffb-\\udfff]",r="(?:"+s+"|"+c+")",h="[^"+R+"]",n="(?:\\ud83c[\\udde6-\\uddff]){2}",i="[\\ud800-\\udbff][\\udc00-\\udfff]",a="\\u200d",o=r+"?",l="["+t+"]?",f="(?:"+a+"(?:"+[h,n,i].join("|")+")"+l+o+")*",v=l+o+f,b="(?:"+[h+s+"?",s,n,i,u].join("|")+")",g=RegExp(c+"(?="+c+")|"+b+v,"g");function m(_){for(var M=g.lastIndex=0;g.test(_);)++M;return M}Se.exports=m},qK8v:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.isStackOverflowExeption=void 0;var V=R("MON2");function E(T){return T instanceof RangeError||T.message===V.STACK_OVERFLOW}ct.isStackOverflowExeption=E},qRkn:function(Se,ct,R){var V=R("3cYt"),E={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},T=V(E);Se.exports=T},qd8s:function(Se,ct,R){(function(V,E){var T=200,e="__lodash_hash_undefined__",t=800,u=16,s=9007199254740991,c="[object Arguments]",r="[object Array]",h="[object AsyncFunction]",n="[object Boolean]",i="[object Date]",a="[object Error]",o="[object Function]",l="[object GeneratorFunction]",f="[object Map]",v="[object Number]",b="[object Null]",g="[object Object]",m="[object Proxy]",_="[object RegExp]",M="[object Set]",x="[object String]",y="[object Undefined]",S="[object WeakMap]",P="[object ArrayBuffer]",A="[object DataView]",O="[object Float32Array]",L="[object Float64Array]",H="[object Int8Array]",F="[object Int16Array]",Z="[object Int32Array]",G="[object Uint8Array]",U="[object Uint8ClampedArray]",Y="[object Uint16Array]",J="[object Uint32Array]",rt=/[\\^$.*+?()[\]{}|]/g,ft=/^\[object .+?Constructor\]$/,dt=/^(?:0|[1-9]\d*)$/,ut={};ut[O]=ut[L]=ut[H]=ut[F]=ut[Z]=ut[G]=ut[U]=ut[Y]=ut[J]=!0,ut[c]=ut[r]=ut[P]=ut[n]=ut[A]=ut[i]=ut[a]=ut[o]=ut[f]=ut[v]=ut[g]=ut[_]=ut[M]=ut[x]=ut[S]=!1;var Lt=typeof V=="object"&&V&&V.Object===Object&&V,Ft=typeof self=="object"&&self&&self.Object===Object&&self,Ot=Lt||Ft||Function("return this")(),St=ct&&!ct.nodeType&&ct,xt=St&&typeof E=="object"&&E&&!E.nodeType&&E,At=xt&&xt.exports===St,nt=At&&Lt.process,Mt=function(){try{var gn=xt&&xt.require&&xt.require("util").types;return gn||nt&&nt.binding&&nt.binding("util")}catch(cr){}}(),z=Mt&&Mt.isTypedArray;function Q(gn,cr,Gr){switch(Gr.length){case 0:return gn.call(cr);case 1:return gn.call(cr,Gr[0]);case 2:return gn.call(cr,Gr[0],Gr[1]);case 3:return gn.call(cr,Gr[0],Gr[1],Gr[2])}return gn.apply(cr,Gr)}function ht(gn,cr){for(var Gr=-1,Ui=Array(gn);++Gr<gn;)Ui[Gr]=cr(Gr);return Ui}function et(gn){return function(cr){return gn(cr)}}function at(gn,cr){return gn==null?void 0:gn[cr]}function gt(gn,cr){return function(Gr){return gn(cr(Gr))}}var k=Array.prototype,ot=Function.prototype,it=Object.prototype,X=Ot["__core-js_shared__"],Et=ot.toString,vt=it.hasOwnProperty,Nt=function(){var gn=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||"");return gn?"Symbol(src)_1."+gn:""}(),$t=it.toString,ee=Et.call(Object),kt=RegExp("^"+Et.call(vt).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wt=At?Ot.Buffer:void 0,ae=Ot.Symbol,le=Ot.Uint8Array,je=Wt?Wt.allocUnsafe:void 0,Oe=gt(Object.getPrototypeOf,Object),We=Object.create,Ye=it.propertyIsEnumerable,wn=k.splice,er=ae?ae.toStringTag:void 0,wr=function(){try{var gn=qs(Object,"defineProperty");return gn({},"",{}),gn}catch(cr){}}(),on=Wt?Wt.isBuffer:void 0,en=Math.max,An=Date.now,jn=qs(Ot,"Map"),pr=qs(Object,"create"),di=function(){function gn(){}return function(cr){if(!Ja(cr))return{};if(We)return We(cr);gn.prototype=cr;var Gr=new gn;return gn.prototype=void 0,Gr}}();function Ce(gn){var cr=-1,Gr=gn==null?0:gn.length;for(this.clear();++cr<Gr;){var Ui=gn[cr];this.set(Ui[0],Ui[1])}}function Me(){this.__data__=pr?pr(null):{},this.size=0}function Qt(gn){var cr=this.has(gn)&&delete this.__data__[gn];return this.size-=cr?1:0,cr}function pe(gn){var cr=this.__data__;if(pr){var Gr=cr[gn];return Gr===e?void 0:Gr}return vt.call(cr,gn)?cr[gn]:void 0}function Vt(gn){var cr=this.__data__;return pr?cr[gn]!==void 0:vt.call(cr,gn)}function re(gn,cr){var Gr=this.__data__;return this.size+=this.has(gn)?0:1,Gr[gn]=pr&&cr===void 0?e:cr,this}Ce.prototype.clear=Me,Ce.prototype.delete=Qt,Ce.prototype.get=pe,Ce.prototype.has=Vt,Ce.prototype.set=re;function Te(gn){var cr=-1,Gr=gn==null?0:gn.length;for(this.clear();++cr<Gr;){var Ui=gn[cr];this.set(Ui[0],Ui[1])}}function ue(){this.__data__=[],this.size=0}function xe(gn){var cr=this.__data__,Gr=$n(cr,gn);if(Gr<0)return!1;var Ui=cr.length-1;return Gr==Ui?cr.pop():wn.call(cr,Gr,1),--this.size,!0}function Ke(gn){var cr=this.__data__,Gr=$n(cr,gn);return Gr<0?void 0:cr[Gr][1]}function Rn(gn){return $n(this.__data__,gn)>-1}function tr(gn,cr){var Gr=this.__data__,Ui=$n(Gr,gn);return Ui<0?(++this.size,Gr.push([gn,cr])):Gr[Ui][1]=cr,this}Te.prototype.clear=ue,Te.prototype.delete=xe,Te.prototype.get=Ke,Te.prototype.has=Rn,Te.prototype.set=tr;function Pn(gn){var cr=-1,Gr=gn==null?0:gn.length;for(this.clear();++cr<Gr;){var Ui=gn[cr];this.set(Ui[0],Ui[1])}}function dn(){this.size=0,this.__data__={hash:new Ce,map:new(jn||Te),string:new Ce}}function Ar(gn){var cr=Bo(this,gn).delete(gn);return this.size-=cr?1:0,cr}function or(gn){return Bo(this,gn).get(gn)}function cn(gn){return Bo(this,gn).has(gn)}function Pr(gn,cr){var Gr=Bo(this,gn),Ui=Gr.size;return Gr.set(gn,cr),this.size+=Gr.size==Ui?0:1,this}Pn.prototype.clear=dn,Pn.prototype.delete=Ar,Pn.prototype.get=or,Pn.prototype.has=cn,Pn.prototype.set=Pr;function Sr(gn){var cr=this.__data__=new Te(gn);this.size=cr.size}function Re(){this.__data__=new Te,this.size=0}function $e(gn){var cr=this.__data__,Gr=cr.delete(gn);return this.size=cr.size,Gr}function Ve(gn){return this.__data__.get(gn)}function En(gn){return this.__data__.has(gn)}function xn(gn,cr){var Gr=this.__data__;if(Gr instanceof Te){var Ui=Gr.__data__;if(!jn||Ui.length<T-1)return Ui.push([gn,cr]),this.size=++Gr.size,this;Gr=this.__data__=new Pn(Ui)}return Gr.set(gn,cr),this.size=Gr.size,this}Sr.prototype.clear=Re,Sr.prototype.delete=$e,Sr.prototype.get=Ve,Sr.prototype.has=En,Sr.prototype.set=xn;function Nn(gn,cr){var Gr=qa(gn),Ui=!Gr&&sa(gn),za=!Gr&&!Ui&&Ba(gn),go=!Gr&&!Ui&&!za&&ko(gn),fo=Gr||Ui||za||go,ea=fo?ht(gn.length,String):[],to=ea.length;for(var Ns in gn)(cr||vt.call(gn,Ns))&&!(fo&&(Ns=="length"||za&&(Ns=="offset"||Ns=="parent")||go&&(Ns=="buffer"||Ns=="byteLength"||Ns=="byteOffset")||Hs(Ns,to)))&&ea.push(Ns);return ea}function mn(gn,cr,Gr){(Gr!==void 0&&!Gi(gn[cr],Gr)||Gr===void 0&&!(cr in gn))&&Hn(gn,cr,Gr)}function Dn(gn,cr,Gr){var Ui=gn[cr];(!(vt.call(gn,cr)&&Gi(Ui,Gr))||Gr===void 0&&!(cr in gn))&&Hn(gn,cr,Gr)}function $n(gn,cr){for(var Gr=gn.length;Gr--;)if(Gi(gn[Gr][0],cr))return Gr;return-1}function Hn(gn,cr,Gr){cr=="__proto__"&&wr?wr(gn,cr,{configurable:!0,enumerable:!0,value:Gr,writable:!0}):gn[cr]=Gr}var _n=Xo();function br(gn){return gn==null?gn===void 0?y:b:er&&er in Object(gn)?ao(gn):Fn(gn)}function yr(gn){return Po(gn)&&br(gn)==c}function Fr(gn){if(!Ja(gn)||Yt(gn))return!1;var cr=uo(gn)?kt:ft;return cr.test(Oi(gn))}function Ei(gn){return Po(gn)&&co(gn.length)&&!!ut[br(gn)]}function Ta(gn){if(!Ja(gn))return sn(gn);var cr=Ee(gn),Gr=[];for(var Ui in gn)Ui=="constructor"&&(cr||!vt.call(gn,Ui))||Gr.push(Ui);return Gr}function Aa(gn,cr,Gr,Ui,za){gn!==cr&&_n(cr,function(go,fo){if(za||(za=new Sr),Ja(go))eo(gn,cr,fo,Gr,Aa,Ui,za);else{var ea=Ui?Ui(qn(gn,fo),go,fo+"",gn,cr,za):void 0;ea===void 0&&(ea=go),mn(gn,fo,ea)}},Co)}function eo(gn,cr,Gr,Ui,za,go,fo){var ea=qn(gn,Gr),to=qn(cr,Gr),Ns=fo.get(to);if(Ns){mn(gn,Gr,Ns);return}var Ss=go?go(ea,to,Gr+"",gn,cr,fo):void 0,Ka=Ss===void 0;if(Ka){var ou=qa(to),Jo=!ou&&Ba(to),Os=!ou&&!Jo&&ko(to);Ss=to,ou||Jo||Os?qa(ea)?Ss=ea:Eo(ea)?Ss=jo(ea):Jo?(Ka=!1,Ss=io(to,!0)):Os?(Ka=!1,Ss=Ko(to,!0)):Ss=[]:ls(to)||sa(to)?(Ss=ea,sa(ea)?Ss=Es(ea):(!Ja(ea)||uo(ea))&&(Ss=so(to))):Ka=!1}Ka&&(fo.set(to,Ss),za(Ss,to,Ui,go,fo),fo.delete(to)),mn(gn,Gr,Ss)}function Ho(gn,cr){return Xr(rr(gn,cr,ss),gn+"")}var Do=wr?function(gn,cr){return wr(gn,"toString",{configurable:!0,enumerable:!1,value:Bs(cr),writable:!0})}:ss;function io(gn,cr){if(cr)return gn.slice();var Gr=gn.length,Ui=je?je(Gr):new gn.constructor(Gr);return gn.copy(Ui),Ui}function ds(gn){var cr=new gn.constructor(gn.byteLength);return new le(cr).set(new le(gn)),cr}function Ko(gn,cr){var Gr=cr?ds(gn.buffer):gn.buffer;return new gn.constructor(Gr,gn.byteOffset,gn.length)}function jo(gn,cr){var Gr=-1,Ui=gn.length;for(cr||(cr=Array(Ui));++Gr<Ui;)cr[Gr]=gn[Gr];return cr}function bs(gn,cr,Gr,Ui){var za=!Gr;Gr||(Gr={});for(var go=-1,fo=cr.length;++go<fo;){var ea=cr[go],to=Ui?Ui(Gr[ea],gn[ea],ea,Gr,gn):void 0;to===void 0&&(to=gn[ea]),za?Hn(Gr,ea,to):Dn(Gr,ea,to)}return Gr}function Ra(gn){return Ho(function(cr,Gr){var Ui=-1,za=Gr.length,go=za>1?Gr[za-1]:void 0,fo=za>2?Gr[2]:void 0;for(go=gn.length>3&&typeof go=="function"?(za--,go):void 0,fo&&Ne(Gr[0],Gr[1],fo)&&(go=za<3?void 0:go,za=1),cr=Object(cr);++Ui<za;){var ea=Gr[Ui];ea&&gn(cr,ea,Ui,go)}return cr})}function Xo(gn){return function(cr,Gr,Ui){for(var za=-1,go=Object(cr),fo=Ui(cr),ea=fo.length;ea--;){var to=fo[gn?ea:++za];if(Gr(go[to],to,go)===!1)break}return cr}}function Bo(gn,cr){var Gr=gn.__data__;return se(cr)?Gr[typeof cr=="string"?"string":"hash"]:Gr.map}function qs(gn,cr){var Gr=at(gn,cr);return Fr(Gr)?Gr:void 0}function ao(gn){var cr=vt.call(gn,er),Gr=gn[er];try{gn[er]=void 0;var Ui=!0}catch(go){}var za=$t.call(gn);return Ui&&(cr?gn[er]=Gr:delete gn[er]),za}function so(gn){return typeof gn.constructor=="function"&&!Ee(gn)?di(Oe(gn)):{}}function Hs(gn,cr){var Gr=typeof gn;return cr=cr==null?s:cr,!!cr&&(Gr=="number"||Gr!="symbol"&&dt.test(gn))&&gn>-1&&gn%1==0&&gn<cr}function Ne(gn,cr,Gr){if(!Ja(Gr))return!1;var Ui=typeof cr;return(Ui=="number"?Oa(Gr)&&Hs(cr,Gr.length):Ui=="string"&&cr in Gr)?Gi(Gr[cr],gn):!1}function se(gn){var cr=typeof gn;return cr=="string"||cr=="number"||cr=="symbol"||cr=="boolean"?gn!=="__proto__":gn===null}function Yt(gn){return!!Nt&&Nt in gn}function Ee(gn){var cr=gn&&gn.constructor,Gr=typeof cr=="function"&&cr.prototype||it;return gn===Gr}function sn(gn){var cr=[];if(gn!=null)for(var Gr in Object(gn))cr.push(Gr);return cr}function Fn(gn){return $t.call(gn)}function rr(gn,cr,Gr){return cr=en(cr===void 0?gn.length-1:cr,0),function(){for(var Ui=arguments,za=-1,go=en(Ui.length-cr,0),fo=Array(go);++za<go;)fo[za]=Ui[cr+za];za=-1;for(var ea=Array(cr+1);++za<cr;)ea[za]=Ui[za];return ea[cr]=Gr(fo),Q(gn,this,ea)}}function qn(gn,cr){if(!(cr==="constructor"&&typeof gn[cr]=="function")&&cr!="__proto__")return gn[cr]}var Xr=Si(Do);function Si(gn){var cr=0,Gr=0;return function(){var Ui=An(),za=u-(Ui-Gr);if(Gr=Ui,za>0){if(++cr>=t)return arguments[0]}else cr=0;return gn.apply(void 0,arguments)}}function Oi(gn){if(gn!=null){try{return Et.call(gn)}catch(cr){}try{return gn+""}catch(cr){}}return""}function Gi(gn,cr){return gn===cr||gn!==gn&&cr!==cr}var sa=yr(function(){return arguments}())?yr:function(gn){return Po(gn)&&vt.call(gn,"callee")&&!Ye.call(gn,"callee")},qa=Array.isArray;function Oa(gn){return gn!=null&&co(gn.length)&&!uo(gn)}function Eo(gn){return Po(gn)&&Oa(gn)}var Ba=on||ja;function uo(gn){if(!Ja(gn))return!1;var cr=br(gn);return cr==o||cr==l||cr==h||cr==m}function co(gn){return typeof gn=="number"&&gn>-1&&gn%1==0&&gn<=s}function Ja(gn){var cr=typeof gn;return gn!=null&&(cr=="object"||cr=="function")}function Po(gn){return gn!=null&&typeof gn=="object"}function ls(gn){if(!Po(gn)||br(gn)!=g)return!1;var cr=Oe(gn);if(cr===null)return!0;var Gr=vt.call(cr,"constructor")&&cr.constructor;return typeof Gr=="function"&&Gr instanceof Gr&&Et.call(Gr)==ee}var ko=z?et(z):Ei;function Es(gn){return bs(gn,Co(gn))}function Co(gn){return Oa(gn)?Nn(gn,!0):Ta(gn)}var Za=Ra(function(gn,cr,Gr,Ui){Aa(gn,cr,Gr,Ui)});function Bs(gn){return function(){return gn}}function ss(gn){return gn}function ja(){return!1}E.exports=Za}).call(this,R("IyRk"),R("hOG+")(Se))},quyA:function(Se,ct){var R="\\ud800-\\udfff",V="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",T="\\u20d0-\\u20ff",e=V+E+T,t="\\ufe0e\\ufe0f",u="\\u200d",s=RegExp("["+u+R+e+t+"]");function c(r){return s.test(r)}Se.exports=c},qxNg:function(Se,ct,R){"use strict";R.d(ct,"a",function(){return s});var V=R("lSNA"),E=R.n(V),T=R("mpbz"),e=R.n(T);function t(r,h){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);h&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),n.push.apply(n,i)}return n}function u(r){for(var h=1;h<arguments.length;h++){var n=arguments[h]!=null?arguments[h]:{};h%2?t(Object(n),!0).forEach(function(i){E()(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}function s(r,h){var n=h.radius,i=n===void 0?40:n,a=h.maxZoom,o=a===void 0?18:a,l=h.minZoom,f=l===void 0?0:l,v=h.zoom,b=v===void 0?2:v;if(r.pointIndex){var g=r.pointIndex.getClusters(r.extent,Math.floor(b));return r.dataArray=c(g),r}var m=new e.a({radius:i,minZoom:f,maxZoom:o}),_={type:"FeatureCollection",features:[]};return _.features=r.dataArray.map(function(M){return{type:"Feature",geometry:{type:"Point",coordinates:M.coordinates},properties:u({},M)}}),m.load(_.features),m}function c(r){return r.map(function(h,n){return u({coordinates:h.geometry.coordinates,_id:n+1},h.properties)})}},riiI:function(Se,ct){},rlAn:function(Se,ct,R){"use strict";var V=R("ISu3"),E=R("gMG2"),T=R("5gLl"),e=R("BpBL"),t=R("5zYK"),u=R("lJbI"),s=R("l94r"),c=R("qxNg"),r=R("Y8BV"),h=R("VIsB"),n=R("+VLl"),i=R("aF1E"),a=R("fdMe");R.d(ct,"getTransform",function(){return V.b}),R.d(ct,"getParser",function(){return V.a});var o=R("U1ZX"),l=R.n(o);ct.default=s.a,Object(V.c)("geojson",T.a),Object(V.c)("image",e.a),Object(V.c)("csv",E.a),Object(V.c)("json",t.a),Object(V.c)("raster",u.a),Object(V.d)("cluster",c.a),Object(V.d)("filter",r.a),Object(V.d)("join",i.a),Object(V.d)("map",a.a),Object(V.d)("grid",h.a),Object(V.d)("hexagon",n.a)},rxlC:function(Se,ct,R){"use strict";Se.exports=E,Se.exports.default=E;var V=1e20;function E(s,c,r,h,n,i){this.fontSize=s||24,this.buffer=c===void 0?3:c,this.cutoff=h||.25,this.fontFamily=n||"sans-serif",this.fontWeight=i||"normal",this.radius=r||8;var a=this.size=this.fontSize+this.buffer*2,o=a+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Uint16Array(o),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function T(s,c,r,h,n,i,a){i.fill(V,0,c*r),a.fill(0,0,c*r);for(var o=(c-h)/2,l=0;l<n;l++)for(var f=0;f<h;f++){var v=(l+o)*c+f+o,b=s.data[4*(l*h+f)+3]/255;if(b===1)i[v]=0,a[v]=V;else if(b===0)i[v]=V,a[v]=0;else{var g=Math.max(0,.5-b),m=Math.max(0,b-.5);i[v]=g*g,a[v]=m*m}}}function e(s,c,r,h,n,i,a){for(var o=0;o<c*r;o++){var l=Math.sqrt(h[o])-Math.sqrt(n[o]);s[o]=Math.round(255-255*(l/i+a))}}E.prototype._draw=function(s,c){var r=this.ctx.measureText(s),h=r.width,n=2*this.buffer,i,a,o,l,f,v,b,g;c&&this.useMetrics?(f=Math.floor(r.actualBoundingBoxAscent),g=this.buffer+Math.ceil(r.actualBoundingBoxAscent),v=this.buffer,b=this.buffer,a=Math.min(this.size,Math.ceil(r.actualBoundingBoxRight-r.actualBoundingBoxLeft)),l=Math.min(this.size-v,Math.ceil(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)),i=a+n,o=l+n,this.ctx.textBaseline="alphabetic"):(i=a=this.size,o=l=this.size,f=19*this.fontSize/24,v=b=0,g=this.middle,this.ctx.textBaseline="middle");var m;a&&l&&(this.ctx.clearRect(b,v,a,l),this.ctx.fillText(s,this.buffer,g),m=this.ctx.getImageData(b,v,a,l));var _=new Uint8ClampedArray(i*o);return T(m,i,o,a,l,this.gridOuter,this.gridInner),t(this.gridOuter,i,o,this.f,this.v,this.z),t(this.gridInner,i,o,this.f,this.v,this.z),e(_,i,o,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:_,metrics:{width:a,height:l,sdfWidth:i,sdfHeight:o,top:f,left:0,advance:h}}},E.prototype.draw=function(s){return this._draw(s,!1).data},E.prototype.drawWithMetrics=function(s){return this._draw(s,!0)};function t(s,c,r,h,n,i){for(var a=0;a<c;a++)u(s,a,c,r,h,n,i);for(var o=0;o<r;o++)u(s,o*c,1,c,h,n,i)}function u(s,c,r,h,n,i,a){var o,l,f,v;for(i[0]=0,a[0]=-V,a[1]=V,o=0;o<h;o++)n[o]=s[c+o*r];for(o=1,l=0,f=0;o<h;o++){do v=i[l],f=(n[o]-n[v]+o*o-v*v)/(o-v)/2;while(f<=a[l]&&--l>-1);l++,i[l]=o,a[l]=f,a[l+1]=V}for(o=0,l=0;o<h;o++){for(;a[l+1]<o;)l++;v=i[l],s[c+o*r]=n[v]+(o-v)*(o-v)}}},sGsY:function(Se,ct,R){"use strict";var V=R("rePB"),E=R("wx14"),T=R("q1tI"),e=R("TSYQ"),t=R.n(e),u=R("H84U"),s=R("/ezw"),c=R("B6l+"),r=R.n(c),h=function(Z){var G=Z.value,U=Z.formatter,Y=Z.precision,J=Z.decimalSeparator,rt=Z.groupSeparator,ft=rt===void 0?"":rt,dt=Z.prefixCls,ut;if(typeof U=="function")ut=U(G);else{var Lt=String(G),Ft=Lt.match(/^(-?)(\d*)(\.(\d+))?$/);if(!Ft||Lt==="-")ut=Lt;else{var Ot=Ft[1],St=Ft[2]||"0",xt=Ft[4]||"";St=St.replace(/\B(?=(\d{3})+(?!\d))/g,ft),typeof Y=="number"&&(xt=r()(xt,Y,"0").slice(0,Y)),xt&&(xt="".concat(J).concat(xt)),ut=[T.createElement("span",{key:"int",className:"".concat(dt,"-content-value-int")},Ot,St),xt&&T.createElement("span",{key:"decimal",className:"".concat(dt,"-content-value-decimal")},xt)]}}return T.createElement("span",{className:"".concat(dt,"-content-value")},ut)},n=h,i=function(Z){var G=Z.prefixCls,U=Z.className,Y=Z.style,J=Z.valueStyle,rt=Z.value,ft=rt===void 0?0:rt,dt=Z.title,ut=Z.valueRender,Lt=Z.prefix,Ft=Z.suffix,Ot=Z.loading,St=Z.direction,xt=Z.onMouseEnter,At=Z.onMouseLeave,nt=T.createElement(n,Object(E.a)({},Z,{value:ft})),Mt=t()(G,Object(V.a)({},"".concat(G,"-rtl"),St==="rtl"),U);return T.createElement("div",{className:Mt,style:Y,onMouseEnter:xt,onMouseLeave:At},dt&&T.createElement("div",{className:"".concat(G,"-title")},dt),T.createElement(s.a,{paragraph:!1,loading:Ot},T.createElement("div",{style:J,className:"".concat(G,"-content")},Lt&&T.createElement("span",{className:"".concat(G,"-content-prefix")},Lt),ut?ut(nt):nt,Ft&&T.createElement("span",{className:"".concat(G,"-content-suffix")},Ft))))};i.defaultProps={decimalSeparator:".",groupSeparator:",",loading:!1};var a=Object(u.c)({prefixCls:"statistic"})(i),o=a,l=R("1OyB"),f=R("vuIU"),v=R("Ji7U"),b=R("LK+K"),g=R("ODXe"),m=R("QQZ/"),_=R.n(m),M=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function x(F,Z){var G=F,U=/\[[^\]]*]/g,Y=(Z.match(U)||[]).map(function(dt){return dt.slice(1,-1)}),J=Z.replace(U,"[]"),rt=M.reduce(function(dt,ut){var Lt=Object(g.a)(ut,2),Ft=Lt[0],Ot=Lt[1];if(dt.indexOf(Ft)!==-1){var St=Math.floor(G/Ot);return G-=St*Ot,dt.replace(new RegExp("".concat(Ft,"+"),"g"),function(xt){var At=xt.length;return _()(St.toString(),At,"0")})}return dt},J),ft=0;return rt.replace(U,function(){var dt=Y[ft];return ft+=1,dt})}function y(F,Z){var G=Z.format,U=G===void 0?"":G,Y=new Date(F).getTime(),J=Date.now(),rt=Math.max(Y-J,0);return x(rt,U)}var S=R("0n0R"),P=1e3/30;function A(F){return new Date(F).getTime()}var O=function(F){Object(v.a)(G,F);var Z=Object(b.a)(G);function G(){var U;return Object(l.a)(this,G),U=Z.apply(this,arguments),U.syncTimer=function(){var Y=U.props.value,J=A(Y);J>=Date.now()?U.startTimer():U.stopTimer()},U.startTimer=function(){U.countdownId||(U.countdownId=window.setInterval(function(){U.forceUpdate()},P))},U.stopTimer=function(){var Y=U.props,J=Y.onFinish,rt=Y.value;if(U.countdownId){clearInterval(U.countdownId),U.countdownId=void 0;var ft=A(rt);J&&ft<Date.now()&&J()}},U.formatCountdown=function(Y,J){var rt=U.props.format;return y(Y,Object(E.a)(Object(E.a)({},J),{format:rt}))},U.valueRender=function(Y){return Object(S.a)(Y,{title:void 0})},U}return Object(f.a)(G,[{key:"componentDidMount",value:function(){this.syncTimer()}},{key:"componentDidUpdate",value:function(){this.syncTimer()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){return T.createElement(o,Object(E.a)({valueRender:this.valueRender},this.props,{formatter:this.formatCountdown}))}}]),G}(T.Component);O.defaultProps={format:"HH:mm:ss"};var L=O;o.Countdown=L;var H=ct.a=o},sKgW:function(Se,ct){var R=9007199254740991,V=Math.floor;function E(T,e){var t="";if(!T||e<1||e>R)return t;do e%2&&(t+=T),e=V(e/2),e&&(T+=T);while(e);return t}Se.exports=E},sXyB:function(Se,ct,R){var V=R("SksO"),E=R("b48C");function T(e,t,u){return E()?(Se.exports=T=Reflect.construct,Se.exports.default=Se.exports,Se.exports.__esModule=!0):(Se.exports=T=function(c,r,h){var n=[null];n.push.apply(n,r);var i=Function.bind.apply(c,n),a=new i;return h&&V(a,h.prototype),a},Se.exports.default=Se.exports,Se.exports.__esModule=!0),T.apply(null,arguments)}Se.exports=T,Se.exports.default=Se.exports,Se.exports.__esModule=!0},sgoq:function(Se,ct,R){var V=R("asDA"),E=R("TKrE"),T=R("6nK8"),e="['\u2019]",t=RegExp(e,"g");function u(s){return function(c){return V(T(E(c).replace(t,"")),s,"")}}Se.exports=u},sxDa:function(Se,ct,R){"use strict";R.d(ct,"e",function(){return Zl}),R.d(ct,"f",function(){return Mi}),R.d(ct,"d",function(){return Zu}),R.d(ct,"a",function(){return bs}),R.d(ct,"c",function(){return go}),R.d(ct,"g",function(){return fr}),R.d(ct,"b",function(){return Co});var V=R("h1nZ"),E=R("lwsE"),T=R.n(E),e=R("W8MJ"),t=R.n(e),u=R("7W2i"),s=R.n(u),c=R("a1gu"),r=R.n(c),h=R("Nsbk"),n=R.n(h),i=R("QILm"),a=R.n(i),o=R("lSNA"),l=R.n(o),f=R("yG8O"),v=R.n(f),b=R("PJYZ"),g=R.n(b),m=R("U+yc"),_=R.n(m),M=R("1ABj"),x=R("GoyQ"),y=R.n(x),S=R("lSCD"),P=R.n(S),A=R("xp6e"),O=R("Hel2"),L=R("uhBA"),H=R("4U9+"),F=R.n(H),Z=R("4cb6"),G,U,Y,J,rt;function ft(tt){return tt.map(function(_t){return typeof _t=="string"&&(_t=[_t,{}]),_t})}var dt=(G=Object(Z.injectable)(),U=Object(Z.inject)(V.TYPES.IGlobalConfigService),G(Y=(J=function(){function tt(){T()(this,tt),v()(this,"configService",rt,this),this.enabled=void 0}return t()(tt,[{key:"apply",value:function(bt,mt){var Pt=this,Rt=mt.rendererService,Ht=mt.postProcessingPassFactory,ge=mt.normalPassFactory;bt.hooks.init.tap("MultiPassRendererPlugin",function(){var Be=bt.getLayerConfig(),Qe=Be.enableMultiPassRenderer,Bn=Be.passes,ur=Bn===void 0?[]:Bn;Pt.enabled=!!Qe&&bt.getLayerConfig().enableMultiPassRenderer!==!1,Pt.enabled&&(bt.multiPassRenderer=Pt.createMultiPassRenderer(bt,ur,Ht,ge),bt.multiPassRenderer.setRenderFlag(!0))}),bt.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){})}},{key:"createMultiPassRenderer",value:function(bt,mt,Pt,Rt){var Ht=bt.multiPassRenderer,ge=bt.getLayerConfig(),Be=ge.enablePicking,Qe=ge.enableTAA;return Be&&Ht.add(Rt("pixelPicking")),Ht}}]),tt}(),rt=_()(J.prototype,"configService",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J))||Y),ut,Lt=(ut={},l()(ut,V.BlendType.additive,{enable:!0,func:{srcRGB:V.gl.ONE,dstRGB:V.gl.ONE,srcAlpha:1,dstAlpha:1}}),l()(ut,V.BlendType.none,{enable:!1}),l()(ut,V.BlendType.normal,{enable:!0,func:{srcRGB:V.gl.SRC_ALPHA,dstRGB:V.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),l()(ut,V.BlendType.subtractive,{enable:!0,func:{srcRGB:V.gl.ONE,dstRGB:V.gl.ONE,srcAlpha:V.gl.ZERO,dstAlpha:V.gl.ONE_MINUS_SRC_COLOR},equation:{rgb:V.gl.FUNC_SUBTRACT,alpha:V.gl.FUNC_SUBTRACT}}),l()(ut,V.BlendType.max,{enable:!0,func:{srcRGB:V.gl.ONE,dstRGB:V.gl.ONE},equation:{rgb:V.gl.MAX_EXT}}),l()(ut,V.BlendType.min,{enable:!0,func:{srcRGB:V.gl.ONE,dstRGB:V.gl.ONE},equation:{rgb:V.gl.MIN_EXT}}),ut),Ft={properties:{enablePicking:{type:"boolean"},enableHighlight:{type:"boolean"},highlightColor:{oneOf:[{type:"array",items:{type:"number",minimum:0,maximum:1}},{type:"string"}]}}},Ot,St,xt,At,nt,Mt,z;function Q(tt,_t){var bt=typeof Symbol!="undefined"&&tt[Symbol.iterator]||tt["@@iterator"];if(!bt){if(Array.isArray(tt)||(bt=ht(tt))||_t&&tt&&typeof tt.length=="number"){bt&&(tt=bt);var mt=0,Pt=function(){};return{s:Pt,n:function(){return mt>=tt.length?{done:!0}:{done:!1,value:tt[mt++]}},e:function(Qe){throw Qe},f:Pt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Rt=!0,Ht=!1,ge;return{s:function(){bt=bt.call(tt)},n:function(){var Qe=bt.next();return Rt=Qe.done,Qe},e:function(Qe){Ht=!0,ge=Qe},f:function(){try{!Rt&&bt.return!=null&&bt.return()}finally{if(Ht)throw ge}}}}function ht(tt,_t){if(!!tt){if(typeof tt=="string")return et(tt,_t);var bt=Object.prototype.toString.call(tt).slice(8,-1);if(bt==="Object"&&tt.constructor&&(bt=tt.constructor.name),bt==="Map"||bt==="Set")return Array.from(tt);if(bt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(bt))return et(tt,_t)}}function et(tt,_t){(_t==null||_t>tt.length)&&(_t=tt.length);for(var bt=0,mt=new Array(_t);bt<_t;bt++)mt[bt]=tt[bt];return mt}function at(tt,_t){var bt=Object.keys(tt);if(Object.getOwnPropertySymbols){var mt=Object.getOwnPropertySymbols(tt);_t&&(mt=mt.filter(function(Pt){return Object.getOwnPropertyDescriptor(tt,Pt).enumerable})),bt.push.apply(bt,mt)}return bt}function gt(tt){for(var _t=1;_t<arguments.length;_t++){var bt=arguments[_t]!=null?arguments[_t]:{};_t%2?at(Object(bt),!0).forEach(function(mt){l()(tt,mt,bt[mt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(bt)):at(Object(bt)).forEach(function(mt){Object.defineProperty(tt,mt,Object.getOwnPropertyDescriptor(bt,mt))})}return tt}function k(tt){var _t=ot();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function ot(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var it=0,X=(Ot=Object(V.lazyInject)(V.TYPES.ILogService),St=Object(V.lazyInject)(V.TYPES.IGlobalConfigService),xt=Object(V.lazyInject)(V.TYPES.IShaderModuleService),At=function(tt){s()(bt,tt);var _t=k(bt);function bt(){var mt,Pt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return T()(this,bt),mt=_t.call(this),mt.id="".concat(it++),mt.name="".concat(it),mt.type=void 0,mt.visible=!0,mt.zIndex=0,mt.minZoom=void 0,mt.maxZoom=void 0,mt.inited=!1,mt.layerModelNeedUpdate=!1,mt.pickedFeatureID=null,mt.selectedFeatureID=null,mt.styleNeedUpdate=!1,mt.dataState={dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1},mt.hooks={init:new A.b,afterInit:new A.b,beforeRender:new A.b,beforeRenderData:new A.d,afterRender:new A.c,beforePickingEncode:new A.c,afterPickingEncode:new A.c,beforeHighlight:new A.c(["pickedColor"]),afterHighlight:new A.c,beforeSelect:new A.c(["pickedColor"]),afterSelect:new A.c,beforeDestroy:new A.c,afterDestroy:new A.c},mt.models=[],mt.multiPassRenderer=void 0,mt.plugins=void 0,mt.sourceOption=void 0,mt.layerModel=void 0,v()(mt,"logger",nt,g()(mt)),v()(mt,"configService",Mt,g()(mt)),v()(mt,"shaderModuleService",z,g()(mt)),mt.cameraService=void 0,mt.coordinateService=void 0,mt.iconService=void 0,mt.fontService=void 0,mt.pickingService=void 0,mt.rendererService=void 0,mt.layerService=void 0,mt.interactionService=void 0,mt.mapService=void 0,mt.styleAttributeService=void 0,mt.layerSource=void 0,mt.postProcessingPassFactory=void 0,mt.normalPassFactory=void 0,mt.animateOptions={enable:!1},mt.container=void 0,mt.encodedData=void 0,mt.configSchema=void 0,mt.currentPickId=null,mt.rawConfig=void 0,mt.needUpdateConfig=void 0,mt.pendingStyleAttributes=[],mt.scaleOptions={},mt.animateStartTime=void 0,mt.aniamateStatus=!1,mt.sourceEvent=function(){mt.dataState.dataSourceNeedUpdate=!0;var Rt=mt.getLayerConfig(),Ht=Rt.autoFit,ge=Rt.fitBoundsOptions;Ht&&mt.fitBounds(ge),mt.emit("dataUpdate"),mt.reRender()},mt.name=Pt.name||mt.id,mt.zIndex=Pt.zIndex||0,mt.rawConfig=Pt,mt}return t()(bt,[{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(Pt){if(!this.inited)this.needUpdateConfig=gt(gt({},this.needUpdateConfig),Pt);else{var Rt=this.container.get(V.TYPES.SceneID);this.configService.setLayerConfig(Rt,this.id,gt(gt(gt({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),Pt)),this.needUpdateConfig={}}}},{key:"setContainer",value:function(Pt){this.container=Pt}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(Pt){return this.plugins.push(Pt),this}},{key:"init",value:function(){var Pt=this,Rt=this.container.get(V.TYPES.SceneID),Ht=this.rawConfig.enableMultiPassRenderer,ge=Ht===void 0?!1:Ht;this.configService.setLayerConfig(Rt,this.id,{enableMultiPassRenderer:ge}),this.iconService=this.container.get(V.TYPES.IIconService),this.fontService=this.container.get(V.TYPES.IFontService),this.rendererService=this.container.get(V.TYPES.IRendererService),this.layerService=this.container.get(V.TYPES.ILayerService),this.interactionService=this.container.get(V.TYPES.IInteractionService),this.pickingService=this.container.get(V.TYPES.IPickingService),this.mapService=this.container.get(V.TYPES.IMapService),this.cameraService=this.container.get(V.TYPES.ICameraService),this.coordinateService=this.container.get(V.TYPES.ICoordinateSystemService),this.postProcessingPassFactory=this.container.get(V.TYPES.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(V.TYPES.IFactoryNormalPass),this.styleAttributeService=this.container.get(V.TYPES.IStyleAttributeService),this.multiPassRenderer=this.container.get(V.TYPES.IMultiPassRenderer),this.multiPassRenderer.setLayer(this),this.pendingStyleAttributes.forEach(function(ur){var Kr=ur.attributeName,si=ur.attributeField,zi=ur.attributeValues,Ki=ur.updateOptions;Pt.styleAttributeService.updateStyleAttribute(Kr,{scale:gt({field:si},Pt.splitValuesAndCallbackInAttribute(zi,Pt.getLayerConfig()[Kr]))},Ki)}),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(V.TYPES.ILayerPlugin);var Be=Q(this.plugins),Qe;try{for(Be.s();!(Qe=Be.n()).done;){var Bn=Qe.value;Bn.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}}catch(ur){Be.e(ur)}finally{Be.f()}return this.hooks.init.call(),this.hooks.afterInit.call(),this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this}},{key:"prepareBuildModel",value:function(){this.inited=!0,this.updateLayerConfig(gt(gt({},this.getDefaultConfig()),this.rawConfig));var Pt=this.getLayerConfig(),Rt=Pt.animateOption;Rt!=null&&Rt.enable&&(this.layerService.startAnimate(),this.aniamateStatus=!0)}},{key:"color",value:function(Pt,Rt,Ht){return this.updateStyleAttribute("color",Pt,Rt,Ht),this}},{key:"rotate",value:function(Pt,Rt,Ht){return this.updateStyleAttribute("rotate",Pt,Rt,Ht),this}},{key:"size",value:function(Pt,Rt,Ht){return this.updateStyleAttribute("size",Pt,Rt,Ht),this}},{key:"filter",value:function(Pt,Rt,Ht){return this.updateStyleAttribute("filter",Pt,Rt,Ht),this}},{key:"shape",value:function(Pt,Rt,Ht){return this.updateStyleAttribute("shape",Pt,Rt,Ht),this}},{key:"label",value:function(Pt,Rt,Ht){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:Pt,attributeValues:Rt,updateOptions:Ht}),this}},{key:"animate",value:function(Pt){var Rt={};return y()(Pt)?(Rt.enable=!0,Rt=gt(gt({},Rt),Pt)):Rt.enable=Pt,this.updateLayerConfig({animateOption:Rt}),this}},{key:"source",value:function(Pt,Rt){return this.sourceOption={data:Pt,options:Rt},this}},{key:"setData",value:function(Pt,Rt){var Ht=this;return this.inited?this.layerSource.setData(Pt,Rt):this.on("inited",function(){Ht.layerSource.setData(Pt,Rt)}),this}},{key:"style",value:function(Pt){var Rt=this,Ht=Pt.passes,ge=a()(Pt,["passes"]);return Ht&&ft(Ht).forEach(function(Be){var Qe=Rt.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(Be[0]);Qe&&Qe.updateOptions(Be[1])}),this.rawConfig=gt(gt({},this.rawConfig),ge),this.container&&(this.updateLayerConfig(this.rawConfig),this.styleNeedUpdate=!0),this}},{key:"scale",value:function(Pt,Rt){return y()(Pt)?this.scaleOptions=gt(gt({},this.scaleOptions),Pt):this.scaleOptions[Pt]=Rt,this}},{key:"render",value:function(){return this.renderModels(),this}},{key:"active",value:function(Pt){var Rt={};return Rt.enableHighlight=y()(Pt)?!0:Pt,y()(Pt)?(Rt.enableHighlight=!0,Pt.color&&(Rt.highlightColor=Pt.color)):Rt.enableHighlight=!!Pt,this.updateLayerConfig(Rt),this}},{key:"setActive",value:function(Pt,Rt){var Ht=this;if(y()(Pt)){var ge=Pt.x,Be=ge===void 0?0:ge,Qe=Pt.y,Bn=Qe===void 0?0:Qe;this.updateLayerConfig({highlightColor:y()(Rt)?Rt.color:this.getLayerConfig().highlightColor}),this.pick({x:Be,y:Bn})}else this.updateLayerConfig({pickedFeatureID:Pt,highlightColor:y()(Rt)?Rt.color:this.getLayerConfig().highlightColor}),this.hooks.beforeSelect.call(Object(O.l)(Pt)).then(function(){setTimeout(function(){Ht.reRender()},1)})}},{key:"select",value:function(Pt){var Rt={};return Rt.enableSelect=y()(Pt)?!0:Pt,y()(Pt)?(Rt.enableSelect=!0,Pt.color&&(Rt.selectColor=Pt.color)):Rt.enableSelect=!!Pt,this.updateLayerConfig(Rt),this}},{key:"setSelect",value:function(Pt,Rt){var Ht=this;if(y()(Pt)){var ge=Pt.x,Be=ge===void 0?0:ge,Qe=Pt.y,Bn=Qe===void 0?0:Qe;this.updateLayerConfig({selectColor:y()(Rt)?Rt.color:this.getLayerConfig().selectColor}),this.pick({x:Be,y:Bn})}else this.updateLayerConfig({pickedFeatureID:Pt,selectColor:y()(Rt)?Rt.color:this.getLayerConfig().selectColor}),this.hooks.beforeSelect.call(Object(O.l)(Pt)).then(function(){setTimeout(function(){Ht.reRender()},1)})}},{key:"setBlend",value:function(Pt){this.updateLayerConfig({blend:Pt}),this.layerModelNeedUpdate=!0,this.reRender()}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this}},{key:"setIndex",value:function(Pt){return this.zIndex=Pt,this.layerService.updateRenderOrder(),this}},{key:"setCurrentPickId",value:function(Pt){this.currentPickId=Pt}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(Pt){this.selectedFeatureID=Pt}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var Pt=this.mapService.getZoom(),Rt=this.getLayerConfig(),Ht=Rt.visible,ge=Rt.minZoom,Be=ge===void 0?-Infinity:ge,Qe=Rt.maxZoom,Bn=Qe===void 0?Infinity:Qe;return!!Ht&&Pt>=Be&&Pt<=Bn}},{key:"setMinZoom",value:function(Pt){return this.updateLayerConfig({minZoom:Pt}),this}},{key:"getMinZoom",value:function(){var Pt=this.getLayerConfig(),Rt=Pt.minZoom;return Rt}},{key:"getMaxZoom",value:function(){var Pt=this.getLayerConfig(),Rt=Pt.maxZoom;return Rt}},{key:"get",value:function(Pt){var Rt=this.getLayerConfig();return Rt[Pt]}},{key:"setMaxZoom",value:function(Pt){return this.updateLayerConfig({maxZoom:Pt}),this}},{key:"fitBounds",value:function(Pt){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var Rt=this.getSource(),Ht=Rt.extent,ge=Ht.some(function(Be){return Math.abs(Be)===Infinity});return ge?this:(this.mapService.fitBounds([[Ht[0],Ht[1]],[Ht[2],Ht[3]]],Pt),this)}},{key:"destroy",value:function(){this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),this.multiPassRenderer.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),this.emit("remove",{target:this,type:"remove"}),this.removeAllListeners()}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){this.models.forEach(function(Pt){return Pt.destroy()}),this.layerModel.clearModels()}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(Pt){return Pt.needRescale||Pt.needRemapping||Pt.needRegenerateVertices}).length}},{key:"setSource",value:function(Pt){this.layerSource=Pt;var Rt=this.mapService.getZoom();this.layerSource.cluster&&this.layerSource.updateClusterData(Rt),this.layerSource.on("update",this.sourceEvent)}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(Pt){this.encodedData=Pt}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getConfigSchemaForValidation",value:function(){return this.configSchema||(this.configSchema=F()([Ft,this.getConfigSchema()])),this.configSchema}},{key:"getLegendItems",value:function(Pt){var Rt=this.styleAttributeService.getLayerAttributeScale(Pt);if(Rt){if(Rt.ticks){var Ht=Rt.ticks().map(function(Be){return l()({value:Be},Pt,Rt(Be))});return Ht}else if(Rt.invertExtent){var ge=Rt.range().map(function(Be){return l()({value:Rt.invertExtent(Be)},Pt,Be)});return ge}}else return[]}},{key:"pick",value:function(Pt){var Rt=Pt.x,Ht=Pt.y;this.interactionService.triggerHover({x:Rt,y:Ht})}},{key:"boxSelect",value:function(Pt,Rt){this.pickingService.boxPickLayer(this,Pt,Rt)}},{key:"buildLayerModel",value:function(Pt){var Rt=Pt.moduleName,Ht=Pt.vertexShader,ge=Pt.fragmentShader,Be=Pt.triangulation,Qe=a()(Pt,["moduleName","vertexShader","fragmentShader","triangulation"]);this.shaderModuleService.registerModule(Rt,{vs:Ht,fs:ge});var Bn=this.shaderModuleService.getModule(Rt),ur=Bn.vs,Kr=Bn.fs,si=Bn.uniforms,zi=this.rendererService.createModel,Ki=this.styleAttributeService.createAttributesAndIndices(this.encodedData,Be),ra=Ki.attributes,Qa=Ki.elements;return zi(gt({attributes:ra,uniforms:si,fs:Kr,vs:ur,elements:Qa,blend:Lt[V.BlendType.normal]},Qe))}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.aniamateStatus&&(this.layerService.stopAnimate(),this.aniamateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(Pt){var Rt=this.getLayerConfig(),Ht=Rt.enableHighlight,ge=Ht===void 0?!0:Ht,Be=Rt.enableSelect,Qe=Be===void 0?!0:Be,Bn=this.eventNames().indexOf(Pt)!==-1||this.eventNames().indexOf("un"+Pt)!==-1;return(Pt==="click"||Pt==="dblclick")&&Qe&&(Bn=!0),Pt==="mousemove"&&(ge||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(Bn=!0),this.isVisible()&&Bn}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"rebuildModels",value:function(){throw new Error("Method not implemented.")}},{key:"renderModels",value:function(){var Pt=this;return this.layerModelNeedUpdate&&this.layerModel&&(this.models=this.layerModel.buildModels(),this.hooks.beforeRender.call(),this.layerModelNeedUpdate=!1),this.models.forEach(function(Rt){Rt.draw({uniforms:Pt.layerModel.getUninforms()})}),this}},{key:"getConfigSchema",value:function(){throw new Error("Method not implemented.")}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"reRender",value:function(){this.inited&&this.layerService.renderLayers()}},{key:"splitValuesAndCallbackInAttribute",value:function(Pt,Rt){return{values:P()(Pt)?void 0:Pt||Rt,callback:P()(Pt)?Pt:void 0}}},{key:"updateStyleAttribute",value:function(Pt,Rt,Ht,ge){this.inited?this.styleAttributeService.updateStyleAttribute(Pt,{scale:gt({field:Rt},this.splitValuesAndCallbackInAttribute(Ht,this.getLayerConfig()[Rt]))},ge):this.pendingStyleAttributes.push({attributeName:Pt,attributeField:Rt,attributeValues:Ht,updateOptions:ge})}}]),bt}(L.EventEmitter),nt=_()(At.prototype,"logger",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mt=_()(At.prototype,"configService",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=_()(At.prototype,"shaderModuleService",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),At),Et,vt,Nt,$t,ee,kt=(Et=Object(V.lazyInject)(V.TYPES.IGlobalConfigService),vt=Object(V.lazyInject)(V.TYPES.IShaderModuleService),Nt=function(){function tt(_t){T()(this,tt),this.triangulation=void 0,this.layer=void 0,v()(this,"configService",$t,this),v()(this,"shaderModuleService",ee,this),this.rendererService=void 0,this.iconService=void 0,this.fontService=void 0,this.styleAttributeService=void 0,this.mapService=void 0,this.cameraService=void 0,this.layerService=void 0,this.layer=_t,this.rendererService=_t.getContainer().get(V.TYPES.IRendererService),this.styleAttributeService=_t.getContainer().get(V.TYPES.IStyleAttributeService),this.mapService=_t.getContainer().get(V.TYPES.IMapService),this.iconService=_t.getContainer().get(V.TYPES.IIconService),this.fontService=_t.getContainer().get(V.TYPES.IFontService),this.cameraService=_t.getContainer().get(V.TYPES.ICameraService),this.layerService=_t.getContainer().get(V.TYPES.ILayerService),this.registerBuiltinAttributes(),this.startModelAnimate()}return t()(tt,[{key:"getBlend",value:function(){var bt=this.layer.getLayerConfig(),mt=bt.blend,Pt=mt===void 0?"normal":mt;return Lt[V.BlendType[Pt]]}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){return!1}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){throw new Error("Method not implemented.")}},{key:"clearModels",value:function(){}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(bt){return[bt.enable?0:1,bt.duration||4,bt.interval||.2,bt.trailLength||.1]}},{key:"startModelAnimate",value:function(){var bt=this.layer.getLayerConfig(),mt=bt.animateOption;mt.enable&&this.layer.setAnimateStartTime()}}]),tt}(),$t=_()(Nt.prototype,"configService",[Et],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=_()(Nt.prototype,"shaderModuleService",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nt),Wt=R("J4zp"),ae=R.n(Wt),le=R("RIqP"),je=R.n(le),Oe=R("VmRL"),We=R.n(Oe),Ye=R("IOcx"),wn=Ye.c.create(),er=Ye.c.create(),wr=Ye.c.create(),on=Ye.c.create(),en=Ye.c.create();function An(tt,_t,bt,mt,Pt){Ye.c.add(tt,bt,mt),Ye.c.normalize(tt,tt),_t=Ye.c.fromValues(-tt[1],tt[0]);var Rt=Ye.c.fromValues(-bt[1],bt[0]);return[Pt/Ye.c.dot(_t,Rt),_t]}function jn(tt,_t){return Ye.c.set(tt,-_t[1],_t[0])}function pr(tt,_t,bt){return Ye.c.sub(tt,_t,bt),Ye.c.normalize(tt,tt),tt}function di(tt,_t){return tt[0]===_t[0]&&tt[1]===_t[1]}function Ce(tt){for(var _t=new Map,bt=0;bt<tt.length;bt++){var mt=tt[0].toString()+"-"+tt[1].toString();_t.get(mt)?(tt.splice(bt,1),bt++):_t.set(mt,mt)}return tt}var Me=function(){function tt(){var _t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};T()(this,tt),this.complex=void 0,this.join=void 0,this.cap=void 0,this.miterLimit=void 0,this.thickness=void 0,this.normal=void 0,this.lastFlip=-1,this.miter=Ye.c.fromValues(0,0),this.started=!1,this.dash=!1,this.totalDistance=0,this.join=_t.join||"miter",this.cap=_t.cap||"butt",this.miterLimit=_t.miterLimit||10,this.thickness=_t.thickness||1,this.dash=_t.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0}}return t()(tt,[{key:"extrude",value:function(bt){var mt=this.complex;if(bt.length<=1)return mt;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var Pt=bt.length,Rt=mt.startIndex,Ht=1;Ht<Pt;Ht++){var ge=bt[Ht-1],Be=bt[Ht],Qe=Ht<bt.length-1?bt[Ht+1]:null,Bn=this.segment(mt,Rt,ge,Be,Qe);Rt+=Bn}if(this.dash)for(var ur=0;ur<mt.positions.length/6;ur++)mt.positions[ur*6+5]=this.totalDistance;return mt.startIndex=mt.positions.length/6,mt}},{key:"segment",value:function(bt,mt,Pt,Rt,Ht){var ge=0,Be=bt.indices,Qe=bt.positions,Bn=bt.normals,ur=this.cap==="square",Kr=this.join==="bevel",si=Object(O.d)([Rt[0],Rt[1]]),zi=Object(O.d)([Pt[0],Pt[1]]);pr(wr,si,zi);var Ki=0;if(this.dash&&(Ki=this.lineSegmentDistance(si,zi),this.totalDistance+=Ki),this.normal||(this.normal=Ye.c.create(),jn(this.normal,wr)),!this.started)if(this.started=!0,ur){var ra=Ye.c.create(),Qa=Ye.c.create();Ye.c.add(ra,this.normal,wr),Ye.c.add(Qa,this.normal,wr),Bn.push(Qa[0],Qa[1],0),Bn.push(ra[0],ra[1],0),Qe.push(Pt[0],Pt[1],0,this.totalDistance-Ki,-this.thickness,0),Qe.push(Pt[0],Pt[1],0,this.totalDistance-Ki,this.thickness,0)}else this.extrusions(Qe,Bn,Pt,this.normal,this.thickness,this.totalDistance-Ki);if(Be.push(mt+0,mt+1,mt+2),Ht){var os=Object(O.d)([Ht[0],Ht[1]]);di(si,os)&&Ye.c.add(os,si,Ye.c.normalize(os,Ye.c.subtract(os,si,zi))),pr(on,os,si);var js=An(en,Ye.c.create(),wr,on,this.thickness),Wu=ae()(js,2),Mo=Wu[0],Hu=Wu[1],ks=Ye.c.dot(en,this.normal)<0?-1:1,Wl=Kr;if(!Wl&&this.join==="miter"){var Uo=Mo;Uo>this.miterLimit&&(Wl=!0)}Wl?(Bn.push(this.normal[0],this.normal[1],0),Bn.push(Hu[0],Hu[1],0),Qe.push(Rt[0],Rt[1],0,this.totalDistance,-this.thickness*ks,0),Qe.push(Rt[0],Rt[1],0,this.totalDistance,this.thickness*ks,0),Be.push.apply(Be,je()(this.lastFlip!==-ks?[mt,mt+2,mt+3]:[mt+2,mt+1,mt+3])),Be.push(mt+2,mt+3,mt+4),jn(wn,on),Ye.c.copy(this.normal,wn),Bn.push(this.normal[0],this.normal[1],0),Qe.push(Rt[0],Rt[1],0,this.totalDistance,-this.thickness*ks,0),ge+=3):(this.extrusions(Qe,Bn,Rt,Hu,Mo,this.totalDistance),Be.push.apply(Be,je()(this.lastFlip===1?[mt,mt+2,mt+3]:[mt+2,mt+1,mt+3])),ks=-1,Ye.c.copy(this.normal,Hu),ge+=2),this.lastFlip=ks}else{if(jn(this.normal,wr),ur){var zo=Ye.c.create(),xs=Ye.c.create();Ye.c.sub(xs,wr,this.normal),Ye.c.add(zo,wr,this.normal),Bn.push(xs[0],xs[1],0),Bn.push(zo[0],zo[1],0),Qe.push(Rt[0],Rt[1],0,this.totalDistance,this.thickness,0),Qe.push(Rt[0],Rt[1],0,this.totalDistance,this.thickness,0)}else this.extrusions(Qe,Bn,Rt,this.normal,this.thickness,this.totalDistance);Be.push.apply(Be,je()(this.lastFlip===1?[mt,mt+2,mt+3]:[mt+2,mt+1,mt+3])),ge+=2}return ge}},{key:"extrusions",value:function(bt,mt,Pt,Rt,Ht,ge){mt.push(Rt[0],Rt[1],0),mt.push(Rt[0],Rt[1],0),bt.push(Pt[0],Pt[1],0,ge,-Ht,0),bt.push(Pt[0],Pt[1],0,ge,Ht,0)}},{key:"lineSegmentDistance",value:function(bt,mt){var Pt=mt[0]-bt[0],Rt=mt[1]-bt[1];return Math.sqrt(Pt*Pt+Rt*Rt)}}]),tt}(),Qt=R("UB5X"),pe=R.n(Qt);function Vt(tt){if(pe()(tt[0]))return tt;if(pe()(tt[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(pe()(tt[0][0][0])){var _t=tt,bt=0,mt=0,Pt=0;return _t.forEach(function(Rt){Rt.forEach(function(Ht){bt+=Ht[0],mt+=Ht[1],Pt++})}),[bt/Pt,mt/Pt,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function re(tt){var _t=tt[0][0],bt=tt[0][tt[0].length-1];_t[0]===bt[0]&&_t[1]===bt[1]&&(tt[0]=tt[0].slice(0,tt[0].length-1));for(var mt=tt[0].length,Pt=We.a.flatten(tt),Rt=Pt.vertices,Ht=Pt.dimensions,ge=[],Be=[],Qe=0;Qe<Rt.length/Ht;Qe++)Ht===2?ge.push(Rt[Qe*2],Rt[Qe*2+1],1):ge.push(Rt[Qe*3],Rt[Qe*3+1],1);var Bn=We()(Pt.vertices,Pt.holes,Pt.dimensions);Be.push.apply(Be,je()(Bn));for(var ur=function(zi){var Ki=Pt.vertices.slice(zi*Ht,(zi+1)*Ht),ra=Pt.vertices.slice((zi+1)*Ht,(zi+2)*Ht);ra.length===0&&(ra=Pt.vertices.slice(0,Ht));var Qa=ge.length/3;ge.push(Ki[0],Ki[1],1,ra[0],ra[1],1,Ki[0],Ki[1],0,ra[0],ra[1],0),Be.push.apply(Be,je()([0,2,1,2,3,1].map(function(zo){return zo+Qa})))},Kr=0;Kr<mt;Kr++)ur(Kr);return{positions:ge,index:Be}}function Te(tt){var _t=We.a.flatten(tt),bt=We()(_t.vertices,_t.holes,_t.dimensions);return{positions:_t.vertices,index:bt}}function ue(tt){var _t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,bt=tt[0][0],mt=tt[0][tt[0].length-1];bt[0]===mt[0]&&bt[1]===mt[1]&&(tt[0]=tt[0].slice(0,tt[0].length-1));for(var Pt=tt[0].length,Rt=We.a.flatten(tt),Ht=Rt.vertices,ge=Rt.dimensions,Be=[],Qe=[],Bn=[],ur=0;ur<Ht.length/ge;ur++)ge===2?Be.push(Ht[ur*2],Ht[ur*2+1],1,-1,-1):Be.push(Ht[ur*3],Ht[ur*3+1],1,-1,-1),Bn.push(0,0,1);var Kr=We()(Rt.vertices,Rt.holes,Rt.dimensions);Qe.push.apply(Qe,je()(Kr));for(var si=function(ra){var Qa=Rt.vertices.slice(ra*ge,(ra+1)*ge),zo=Rt.vertices.slice((ra+1)*ge,(ra+2)*ge);zo.length===0&&(zo=Rt.vertices.slice(0,ge));var xs=Be.length/5;Be.push(Qa[0],Qa[1],1,0,0,zo[0],zo[1],1,.1,0,Qa[0],Qa[1],0,0,.8,zo[0],zo[1],0,.1,.8);var os=xe([zo[0],zo[1],1],[Qa[0],Qa[1],0],[Qa[0],Qa[1],1],_t);Bn.push.apply(Bn,je()(os).concat(je()(os),je()(os),je()(os))),Qe.push.apply(Qe,je()([1,2,0,3,2,1].map(function(js){return js+xs})))},zi=0;zi<Pt;zi++)si(zi);return{positions:Be,index:Qe,normals:Bn}}function xe(tt,_t,bt){var mt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,Pt=Ye.d.create(),Rt=Ye.d.create(),Ht=Ye.d.create();mt&&(tt=Object(O.p)(tt),_t=Object(O.p)(_t),bt=Object(O.p)(bt));var ge=Ye.d.fromValues.apply(Ye.d,je()(tt)),Be=Ye.d.fromValues.apply(Ye.d,je()(_t)),Qe=Ye.d.fromValues.apply(Ye.d,je()(bt));Ye.d.sub(Pt,Qe,Be),Ye.d.sub(Rt,ge,Be),Ye.d.cross(Ht,Pt,Rt);var Bn=Ye.d.create();return Ye.d.normalize(Bn,Ht),Bn}var Ke,Rn;(function(tt){tt.CYLINDER="cylinder",tt.SQUARECOLUMN="squareColumn",tt.TRIANGLECOLUMN="triangleColumn",tt.HEXAGONCOLUMN="hexagonColumn",tt.PENTAGONCOLUMN="pentagonColumn"})(Rn||(Rn={}));var tr;(function(tt){tt.CIRCLE="circle",tt.SQUARE="square",tt.TRIANGLE="triangle",tt.HEXAGON="hexagon",tt.PENTAGON="pentagon"})(tr||(tr={}));function Pn(tt){for(var _t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,bt=Math.PI*2/tt,mt=[],Pt=0;Pt<tt;Pt++)mt.push(bt*Pt+_t*Math.PI/12);var Rt=mt.map(function(Ht){var ge=Math.sin(Ht+Math.PI/4),Be=Math.cos(Ht+Math.PI/4);return[ge,Be,0]});return Rt}function dn(){return Pn(30)}function Ar(){return Pn(4)}function or(){return Pn(3)}function cn(){return Pn(6,1)}function Pr(){return Pn(5)}var Sr=(Ke={},l()(Ke,tr.CIRCLE,dn),l()(Ke,tr.HEXAGON,cn),l()(Ke,tr.TRIANGLE,or),l()(Ke,tr.SQUARE,Ar),l()(Ke,tr.PENTAGON,Pr),l()(Ke,Rn.CYLINDER,dn),l()(Ke,Rn.HEXAGONCOLUMN,cn),l()(Ke,Rn.TRIANGLECOLUMN,or),l()(Ke,Rn.SQUARECOLUMN,Ar),l()(Ke,Rn.PENTAGONCOLUMN,Pr),Ke),Re={};function $e(tt){var _t=Vt(tt.coordinates);return{vertices:[].concat(je()(_t),je()(_t),je()(_t),je()(_t)),indices:[0,1,2,2,3,0],size:_t.length}}function Ve(tt){var _t=tt.shape,bt=br(_t,!1),mt=bt.positions,Pt=bt.index,Rt=bt.normals;return{vertices:mt,indices:Pt,normals:Rt,size:5}}function En(tt){var _t=Vt(tt.coordinates);return{vertices:je()(_t),indices:[0],size:_t.length}}function xn(tt){var _t=tt.coordinates,bt=_t;Array.isArray(bt[0][0])||(bt=[_t]);var mt=new Me({dash:!0,join:"bevel"});bt.forEach(function(Rt){mt.extrude(Rt)});var Pt=mt.complex;return{vertices:Pt.positions,indices:Pt.indices,normals:Pt.normals,size:6}}function Nn(tt){var _t=tt.coordinates,bt=We.a.flatten(_t),mt=bt.vertices,Pt=bt.dimensions,Rt=bt.holes;return{indices:We()(mt,Rt,Pt),vertices:mt,size:Pt}}function mn(tt){var _t=tt.coordinates,bt=ue(_t,!0),mt=bt.positions,Pt=bt.index,Rt=bt.normals;return{vertices:mt,indices:Pt,normals:Rt,size:5}}function Dn(tt){var _t=tt.shape,bt=Ta(_t),mt=bt.positions,Pt=bt.index;return{vertices:mt,indices:Pt,size:3}}function $n(tt){var _t=tt.coordinates,bt=[].concat(je()(_t[0]),[0,0,1,_t[1][0],_t[0][1],0,1,1],je()(_t[1]),[0,1,0],je()(_t[0]),[0,0,1],je()(_t[1]),[0,1,0,_t[0][0],_t[1][1],0,0,0]),mt=[0,1,2,3,4,5];return{vertices:bt,indices:mt,size:5}}function Hn(tt){for(var _t=30,bt=tt.coordinates,mt=[],Pt=[],Rt=function(Be){mt.push(Be,1,Be,bt[0][0],bt[0][1],bt[1][0],bt[1][1],Be,-1,Be,bt[0][0],bt[0][1],bt[1][0],bt[1][1]),Be!==_t-1&&Pt.push.apply(Pt,je()([0,1,2,1,3,2].map(function(Qe){return Be*2+Qe})))},Ht=0;Ht<_t;Ht++)Rt(Ht);return{vertices:mt,indices:Pt,size:7}}function _n(tt){var _t=tt.coordinates;_t.length===2&&_t.push(0);var bt=tt.size,mt=Aa(-1,1),Pt=Aa(1,1),Rt=Aa(-1,-1),Ht=Aa(1,-1),ge=[].concat(je()(_t),je()(mt),je()(_t),je()(Rt),je()(_t),je()(Ht),je()(_t),je()(Pt)),Be=[0,1,2,3,0,2];return{vertices:ge,indices:Be,size:5}}function br(tt){var _t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Re&&Re[tt])return Re[tt];var bt=Sr[tt]?Sr[tt]():Sr.cylinder(),mt=ue([bt],_t);return Re[tt]=mt,mt}function yr(tt,_t){for(var bt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3,mt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,Pt=new Float32Array(tt.length/bt*3),Rt,Ht,ge,Be=Ye.d.create(),Qe=Ye.d.create(),Bn=Ye.d.create(),ur=0,Kr=_t.length;ur<Kr;ur+=3){Rt=_t[ur+0]*3,Ht=_t[ur+1]*3,ge=_t[ur+2]*3;var si=[tt[Rt],tt[Rt+1]],zi=[tt[Ht],tt[Ht+1]],Ki=[tt[ge],tt[ge+1]];mt&&(si=Object(O.p)(si),zi=Object(O.p)(zi),Ki=Object(O.p)(Ki));var ra=si,Qa=ae()(ra,2),zo=Qa[0],xs=Qa[1],os=Ye.d.fromValues(zo,xs,tt[Rt+2]),js=zi,Wu=ae()(js,2),Mo=Wu[0],Hu=Wu[1],ks=Ye.d.fromValues(Mo,Hu,tt[Ht+2]),Wl=Ki,Uo=ae()(Wl,2),yu=Uo[0],Pl=Uo[1],xf=Ye.d.fromValues(yu,Pl,tt[ge+2]);Ye.d.sub(Be,xf,ks),Ye.d.sub(Qe,os,ks),Ye.d.cross(Bn,Be,Qe),Pt[Rt]+=Be[0],Pt[Rt+1]+=Be[1],Pt[Rt+2]+=Be[2],Pt[Ht]+=Be[0],Pt[Ht+1]+=Be[1],Pt[Ht+2]+=Be[2],Pt[ge]+=Be[0],Pt[ge+1]+=Be[1],Pt[ge+2]+=Be[2]}return Fr(Pt),Pt}function Fr(tt){for(var _t=0,bt=tt.length;_t<bt;_t+=3){var mt=Ye.d.fromValues(tt[_t],tt[_t+1],tt[_t+2]),Pt=Ye.d.create();Ye.d.normalize(Pt,mt),tt.set(Pt,_t)}}function Ei(tt){var _t=tt[0][0],bt=tt[0][tt[0].length-1];return _t[0]===bt[0]&&_t[1]===bt[1]}function Ta(tt){var _t=["cylinder","triangleColumn","hexagonColumn","squareColumn"],bt=Sr[tt]?Sr[tt]():Sr.circle(),mt=_t.indexOf(tt)===-1?Te([bt]):re([bt]);return mt}function Aa(tt,_t){var bt=(tt+1)/2,mt=(_t+1)/2;return[bt,mt]}function eo(tt){var _t=Ho();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function Ho(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Do=`uniform float u_opacity: 1.0;
uniform vec4 u_baseColor : [ 1.0, 0, 0, 1.0 ];
uniform vec4 u_brightColor : [ 1.0, 0, 0, 1.0 ];
uniform vec4 u_windowColor : [ 1.0, 0, 0, 1.0 ];
uniform float u_near : 0;
uniform float u_far : 1;
varying vec4 v_Color;
varying vec2 v_texCoord;
uniform float u_Zoom : 1;
uniform float u_time;

#pragma include "picking"

vec3 getWindowColor(float n, float hot, vec3 brightColor, vec3 darkColor) {
    float s = step(hot, n);
    vec3 color = mix(brightColor,vec3(0.9,0.9,1.0),n);

    return mix(darkColor, color, s);
}
float random (vec2 st) {
    return fract(sin(dot(st.xy, vec2(12.9898,78.233)))* 43758.5453123);
}

float LinearizeDepth()
{
    float z = gl_FragCoord.z * 2.0 - 1.0;
    return (2.0 * u_near * u_far) / (u_far + u_near - z * (u_far - u_near));
}

vec3 fog(vec3 color, vec3 fogColor, float depth){
    float fogFactor=clamp(depth,0.0,1.0);
    vec3 output_color=mix(fogColor,color,fogFactor);
    return output_color;
}

float sdRect(vec2 p, vec2 sz) {
  vec2 d = abs(p) - sz;
  float outside = length(max(d, 0.));
  float inside = min(max(d.x, d.y), 0.);
  return outside + inside;
}

void main() {
  gl_FragColor = v_Color;
  vec3 baseColor = u_baseColor.xyz;
  vec3 brightColor = u_brightColor.xyz;
  vec3 windowColor = u_windowColor.xyz;
  float targetColId = 5.;
  float depth = 1.0 - LinearizeDepth() / u_far * u_Zoom;
  vec3 fogColor = vec3(23.0/255.0,31.0/255.0,51.0/255.0);
  if(v_texCoord.x < 0.) { //\u9876\u90E8\u989C\u8272
       vec3 foggedColor = fog(baseColor.xyz + vec3(0.12*0.9,0.2*0.9,0.3*0.9),fogColor,depth);
       gl_FragColor = vec4( foggedColor, v_Color.w);
  }else { // \u4FA7\u9762\u989C\u8272
        vec2 st = v_texCoord;
        vec2  UvScale = v_texCoord;
        float tStep = min(0.08,max(0.05* (18.0-u_Zoom),0.02));
        float tStart = 0.25 * tStep;
        float tEnd = 0.75 * tStep;
        float u = mod(UvScale.x, tStep);
        float v = mod(UvScale.y, tStep);
        float ux = floor(UvScale.x/tStep);
        float uy = floor(UvScale.y/tStep);
        float n = random(vec2(ux,uy));
        float lightP = u_time;
        float head = 1.0- step(0.005,st.y);
        /*step3*/
        // \u5C06\u7A97\u6237\u989C\u8272\u548C\u5899\u9762\u989C\u8272\u533A\u522B\u5F00\u6765
        float sU = step(tStart, u) - step(tEnd, u);
        float sV = step(tStart, v) - step(tEnd, v);
        vec2 windowSize = vec2(abs(tEnd-tStart),abs(tEnd-tStart));
        float dist = sdRect(vec2(u,v), windowSize);
        float s = sU * sV;

        float curColId = floor(UvScale.x / tStep);
        float sCol = step(targetColId - 0.2, curColId) - step(targetColId + 0.2, curColId);

        float mLightP = mod(lightP, 2.);
        float sRow = step(mLightP - 0.2, st.y) - step(mLightP, st.y);
        if(ux == targetColId){
            n =0.;
        }
        float timeP = min(0.75, abs ( sin(u_time/3.0) ) );
        float hot = smoothstep(1.0,0.0,timeP);
        vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), s);
        //vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), 1.0);
        float sFinal = s * sCol * sRow;
        color += mix(baseColor, brightColor, sFinal*n);
        if (st.y<0.01){
        color = baseColor;
         }
        if(head ==1.0) { // \u9876\u90E8\u4EAE\u7EBF
            color = brightColor;
        }
        color = color * v_Color.rgb;

        vec3 foggedColor = fog(color,fogColor,depth);

        gl_FragColor = vec4(foggedColor,1.0);
  }
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,io=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;

attribute vec2 a_Uv;
varying vec2 v_texCoord;

varying vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);
   v_texCoord = a_Uv;
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  setPickingColor(a_PickingColor);
}
`,ds=function(tt){s()(bt,tt);var _t=eo(bt);function bt(){return T()(this,bt),_t.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity,Ht=Rt===void 0?1:Rt,ge=Pt.baseColor,Be=ge===void 0?"rgb(16,16,16)":ge,Qe=Pt.brightColor,Bn=Qe===void 0?"rgb(255,176,38)":Qe,ur=Pt.windowColor,Kr=ur===void 0?"rgb(30,60,89)":ur,si=Pt.time,zi=si===void 0?0:si;return{u_opacity:Ht,u_baseColor:Object(O.s)(Be),u_brightColor:Object(O.s)(Bn),u_windowColor:Object(O.s)(Kr),u_time:this.layer.getLayerAnimateTime()||zi}}},{key:"initModels",value:function(){return this.startModelAnimate(),[this.layer.buildLayerModel({moduleName:"cityBuilding",vertexShader:io,fragmentShader:Do,triangulation:mn})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:V.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:3,update:function(Rt,Ht,ge,Be,Qe){return Qe}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Rt,Ht,ge,Be){var Qe=Rt.size,Bn=Qe===void 0?10:Qe;return Array.isArray(Bn)?[Bn[0]]:[Bn]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:V.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:2,update:function(Rt,Ht,ge,Be){var Qe=Rt.size;return[ge[3],ge[4]]}}})}}]),bt}(kt);function Ko(tt){var _t=jo();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function jo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var bs=function(tt){s()(bt,tt);var _t=Ko(bt);function bt(){var mt;T()(this,bt);for(var Pt=arguments.length,Rt=new Array(Pt),Ht=0;Ht<Pt;Ht++)Rt[Ht]=arguments[Ht];return mt=_t.call.apply(_t,[this].concat(Rt)),mt.type="PolygonLayer",mt}return t()(bt,[{key:"buildModels",value:function(){this.layerModel=new ds(this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"setLight",value:function(Pt){this.updateLayerConfig({time:Pt})}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){return"citybuilding"}}]),bt}(X);function Ra(tt){var _t=Xo();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function Xo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Bo=`precision highp float;\r
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807\r
attribute vec3 a_Position;\r
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807\r
attribute vec3 a_Pos;\r
attribute float a_Size;\r
attribute vec4 a_Color;\r
uniform vec2 u_radius;\r
uniform float u_coverage: 0.9;\r
uniform float u_angle: 0;\r
uniform mat4 u_ModelMatrix;\r
varying vec4 v_color;\r
\r
#pragma include "projection"\r
#pragma include "project"\r
#pragma include "picking"\r
\r
void main() {\r
  v_color = a_Color;\r
\r
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\r
  vec2 offset = a_Position.xy * u_radius * rotationMatrix * u_coverage ;\r
  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r
  vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\r
  gl_Position = project_common_position_to_clipspace(project_pos);\r
\r
  setPickingColor(a_PickingColor);\r
}\r
`,qs=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,ao=function(tt){s()(bt,tt);var _t=Ra(bt);function bt(){return T()(this,bt),_t.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity,Ht=Pt.coverage,ge=Pt.angle;return{u_opacity:Rt||1,u_coverage:Ht||.9,u_angle:ge||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"gridheatmap",vertexShader:Bo,fragmentShader:qs,triangulation:Dn,depth:{enable:!1},primitive:V.gl.TRIANGLES,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:V.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:3,update:function(Rt,Ht){var ge=Rt.coordinates;return[ge[0],ge[1],0]}}})}}]),bt}(kt);function so(tt){var _t=Hs();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function Hs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Ne=`precision highp float;
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807
attribute vec3 a_Position;
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807
attribute vec3 a_Pos;

attribute vec3 a_Normal;
attribute float a_Size;
attribute vec4 a_Color;
uniform vec2 u_radius;
uniform float u_coverage: 0.9;
uniform float u_angle: 0;
uniform mat4 u_ModelMatrix;
varying vec4 v_color;

#pragma include "projection"
#pragma include "project"
#pragma include "light"
#pragma include "picking"

void main() {
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));
  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);
  vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));
  float lightWeight = calc_lighting(project_pos);
  v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);

  gl_Position = project_common_position_to_clipspace(project_pos);
  setPickingColor(a_PickingColor);
}
`,se=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,Yt=function(tt){s()(bt,tt);var _t=so(bt);function bt(){return T()(this,bt),_t.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity,Ht=Pt.coverage,ge=Pt.angle;return{u_opacity:Rt||1,u_coverage:Ht||1,u_angle:ge||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"grid3dheatmap",vertexShader:Ne,fragmentShader:se,triangulation:Ve,depth:{enable:!0},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Rt,Ht,ge,Be){var Qe=Rt.size;return Array.isArray(Qe)?[Qe[0]]:[Qe]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:V.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:3,update:function(Rt,Ht,ge,Be,Qe){return Qe}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:V.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:3,update:function(Rt,Ht){var ge=Rt.coordinates;return[ge[0],ge[1],0]}}})}}]),bt}(kt);function Ee(tt,_t){for(var bt=[],mt=[],Pt=[],Rt=tt+1,Ht=_t+1,ge=tt/2,Be=_t/2,Qe=0;Qe<Ht;Qe++)for(var Bn=Qe-Be,ur=0;ur<Rt;ur++){var Kr=ur-ge;mt.push(Kr/ge,-Bn/Be,0),Pt.push(ur/tt),Pt.push(1-Qe/_t)}for(var si=0;si<_t;si++)for(var zi=0;zi<tt;zi++){var Ki=zi+Rt*si,ra=zi+Rt*(si+1),Qa=zi+1+Rt*(si+1),zo=zi+1+Rt*si;bt.push(Ki,ra,zo),bt.push(ra,Qa,zo)}return{vertices:mt,indices:bt,uvs:Pt}}function sn(tt,_t){var bt=Object.keys(tt);if(Object.getOwnPropertySymbols){var mt=Object.getOwnPropertySymbols(tt);_t&&(mt=mt.filter(function(Pt){return Object.getOwnPropertyDescriptor(tt,Pt).enumerable})),bt.push.apply(bt,mt)}return bt}function Fn(tt){for(var _t=1;_t<arguments.length;_t++){var bt=arguments[_t]!=null?arguments[_t]:{};_t%2?sn(Object(bt),!0).forEach(function(mt){l()(tt,mt,bt[mt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(bt)):sn(Object(bt)).forEach(function(mt){Object.defineProperty(tt,mt,Object.getOwnPropertyDescriptor(bt,mt))})}return tt}function rr(tt){var _t=qn();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function qn(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Xr=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_opacity;
varying vec2 v_texCoord;
varying float v_intensity;

void main(){
   
     float intensity = texture2D(u_texture, v_texCoord).r;
    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));
    gl_FragColor = color;
    // gl_FragColor.a = color.a * smoothstep(0.1,0.2,intensity)* u_opacity;
     gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;

}
`,Si=`precision highp float;
attribute vec3 a_Position;
attribute vec2 a_Uv;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
uniform mat4 u_ModelMatrix;
uniform mat4 u_InverseViewProjectionMatrix;
uniform mat4 u_ViewProjectionMatrixUncentered;
varying float v_intensity;

vec2 toBezier(float t, vec2 P0, vec2 P1, vec2 P2, vec2 P3) {
    float t2 = t * t;
    float one_minus_t = 1.0 - t;
    float one_minus_t2 = one_minus_t * one_minus_t;
    return (P0 * one_minus_t2 * one_minus_t + P1 * 3.0 * t * one_minus_t2 + P2 * 3.0 * t2 * one_minus_t + P3 * t2 * t);
}
vec2 toBezier(float t, vec4 p){
    return toBezier(t, vec2(0.0, 0.0), vec2(p.x, p.y), vec2(p.z, p.w), vec2(1.0, 1.0));
}
#pragma include "projection"
void main() {
  v_texCoord = a_Uv;

  vec2 pos =(a_Uv * vec2(2.0) - vec2(1.0));


  vec4 p1 = vec4(pos, 0.0, 1.0);
	vec4 p2 = vec4(pos, 1.0, 1.0);

	vec4 inverseP1 = u_InverseViewProjectionMatrix * p1;
	vec4 inverseP2 = u_InverseViewProjectionMatrix * p2;

  inverseP1 = inverseP1 / inverseP1.w;
	inverseP2 = inverseP2 / inverseP2.w;

	float zPos = (0.0 - inverseP1.z) / (inverseP2.z - inverseP1.z);
	vec4 position = inverseP1 + zPos * (inverseP2 - inverseP1);

  vec4 b= vec4(0.5000, 0, 1, 0.5000);
  float fh;

  v_intensity = texture2D(u_texture, v_texCoord).r;
  fh = toBezier(v_intensity, b).y;
  gl_Position = u_ViewProjectionMatrixUncentered * vec4(position.xy, fh * project_pixel(50.), 1.0);

}
`,Oi=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_opacity;
varying vec2 v_texCoord;
varying float v_intensity;

void main(){
     float intensity = texture2D(u_texture, v_texCoord).r;
    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));
    gl_FragColor =color;
    gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;

}
`,Gi=`precision highp float;
uniform float u_intensity;
varying float v_weight;
varying vec2 v_extrude;
#define GAUSS_COEF  0.3989422804014327
void main(){
    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);
    float val = v_weight * u_intensity * GAUSS_COEF * exp(d);
    gl_FragColor = vec4(val, 1., 1., 1.);
}
`,sa=`precision highp float;
attribute vec3 a_Position;
attribute float a_Size;
attribute vec2 a_Dir;
uniform float u_intensity;
uniform float u_radius;
varying vec2 v_extrude;
varying float v_weight;
uniform mat4 u_ModelMatrix;

#define GAUSS_COEF  0.3989422804014327

#pragma include "projection"

void main(){
    v_weight = a_Size;
    float ZERO = 1.0 / 255.0 / 16.0;
    float extrude_x = a_Dir.x * 2.0 -1.0;
    float extrude_y = a_Dir.y * 2.0 -1.0;
    vec2 extrude_dir = normalize(vec2(extrude_x,extrude_y));
    float S = sqrt(-2.0 * log(ZERO / a_Size / u_intensity / GAUSS_COEF)) / 3.0;
    v_extrude = extrude_dir * S;

    vec2 offset = project_pixel(v_extrude * u_radius);
    vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));
}
`,qa=`precision highp float;
attribute vec3 a_Position;
attribute vec2 a_Uv;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
varying float v_intensity;
void main() {
  v_texCoord = a_Uv;
  v_intensity = texture2D(u_texture, v_texCoord).r;
  gl_Position = vec4(a_Position.xy, 0, 1.);
}
`,Oa=function(tt){s()(bt,tt);var _t=rr(bt);function bt(){var mt;T()(this,bt);for(var Pt=arguments.length,Rt=new Array(Pt),Ht=0;Ht<Pt;Ht++)Rt[Ht]=arguments[Ht];return mt=_t.call.apply(_t,[this].concat(Rt)),mt.texture=void 0,mt.colorTexture=void 0,mt.heatmapFramerBuffer=void 0,mt.intensityModel=void 0,mt.colorModel=void 0,mt.shapeType=void 0,mt}return t()(bt,[{key:"render",value:function(){var Pt=this,Rt=this.rendererService,Ht=Rt.clear,ge=Rt.useFramebuffer;ge(this.heatmapFramerBuffer,function(){Ht({color:[0,0,0,0],depth:1,stencil:0,framebuffer:Pt.heatmapFramerBuffer}),Pt.drawIntensityMode()}),this.layer.styleNeedUpdate&&this.updateColorTexture(),this.shapeType==="heatmap"?this.drawColorMode():this.draw3DHeatMap()}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){var Pt,Rt=this.rendererService,Ht=Rt.createFramebuffer,ge=Rt.clear,Be=Rt.getViewportSize,Qe=Rt.createTexture2D,Bn=Rt.useFramebuffer,ur=this.styleAttributeService.getLayerStyleAttribute("shape"),Kr=(ur==null||(Pt=ur.scale)===null||Pt===void 0?void 0:Pt.field)||"heatmap";this.shapeType=Kr,this.intensityModel=this.buildHeatMapIntensity(),this.colorModel=Kr==="heatmap"?this.buildHeatmapColor():this.build3dHeatMap();var si=this.layer.getLayerConfig(),zi=si.rampColors,Ki=Object(O.n)(zi),ra=Be(),Qa=ra.width,zo=ra.height;return this.heatmapFramerBuffer=Ht({color:Qe({width:Math.floor(Qa/4),height:Math.floor(zo/4),wrapS:V.gl.CLAMP_TO_EDGE,wrapT:V.gl.CLAMP_TO_EDGE,min:V.gl.LINEAR,mag:V.gl.LINEAR}),depth:!1}),this.updateColorTexture(),[this.intensityModel,this.colorModel]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"dir",type:V.AttributeType.Attribute,descriptor:{name:"a_Dir",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:2,update:function(Rt,Ht,ge,Be){return[ge[3],ge[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Rt,Ht,ge,Be){var Qe=Rt.size,Bn=Qe===void 0?1:Qe;return[Bn]}}})}},{key:"buildHeatMapIntensity",value:function(){return this.layer.buildLayerModel({moduleName:"heatmapintensity",vertexShader:sa,fragmentShader:Gi,triangulation:_n,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:V.gl.ONE,srcAlpha:1,dstRGB:V.gl.ONE,dstAlpha:1}}})}},{key:"buildHeatmapColor",value:function(){this.shaderModuleService.registerModule("heatmapColor",{vs:qa,fs:Oi});var Pt=this.shaderModuleService.getModule("heatmapColor"),Rt=Pt.vs,Ht=Pt.fs,ge=Pt.uniforms,Be=this.rendererService,Qe=Be.createAttribute,Bn=Be.createElements,ur=Be.createBuffer,Kr=Be.createModel;return Kr({vs:Rt,fs:Ht,attributes:{a_Position:Qe({buffer:ur({data:[-1,1,0,1,1,0,-1,-1,0,1,-1,0],type:V.gl.FLOAT}),size:3}),a_Uv:Qe({buffer:ur({data:[0,1,1,1,0,0,1,0],type:V.gl.FLOAT}),size:2})},uniforms:Fn({},ge),depth:{enable:!1},blend:this.getBlend(),count:6,elements:Bn({data:[0,2,1,2,3,1],type:V.gl.UNSIGNED_INT,count:6})})}},{key:"drawIntensityMode",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity,Ht=Pt.intensity,ge=Ht===void 0?10:Ht,Be=Pt.radius,Qe=Be===void 0?5:Be;this.intensityModel.draw({uniforms:{u_opacity:Rt||1,u_radius:Qe,u_intensity:ge}})}},{key:"drawColorMode",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity;this.colorModel.draw({uniforms:{u_opacity:Rt||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer}})}},{key:"draw3DHeatMap",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity,Ht=Ye.b.invert(Ye.b.create(),Ye.b.fromValues.apply(Ye.b,je()(this.cameraService.getViewProjectionMatrixUncentered())));this.colorModel.draw({uniforms:{u_opacity:Rt||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer,u_ViewProjectionMatrixUncentered:this.cameraService.getViewProjectionMatrixUncentered(),u_InverseViewProjectionMatrix:je()(Ht)}})}},{key:"build3dHeatMap",value:function(){var Pt=this.rendererService.getViewportSize,Rt=Pt(),Ht=Rt.width,ge=Rt.height,Be=Ee(Ht/4,ge/4);this.shaderModuleService.registerModule("heatmap3dColor",{vs:Si,fs:Xr});var Qe=this.shaderModuleService.getModule("heatmap3dColor"),Bn=Qe.vs,ur=Qe.fs,Kr=Qe.uniforms,si=this.rendererService,zi=si.createAttribute,Ki=si.createElements,ra=si.createBuffer,Qa=si.createModel;return Qa({vs:Bn,fs:ur,attributes:{a_Position:zi({buffer:ra({data:Be.vertices,type:V.gl.FLOAT}),size:3}),a_Uv:zi({buffer:ra({data:Be.uvs,type:V.gl.FLOAT}),size:2})},primitive:V.gl.TRIANGLES,uniforms:Fn({},Kr),depth:{enable:!0},blend:{enable:!0,func:{srcRGB:V.gl.SRC_ALPHA,srcAlpha:1,dstRGB:V.gl.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},elements:Ki({data:Be.indices,type:V.gl.UNSIGNED_INT,count:Be.indices.length})})}},{key:"updateStyle",value:function(){this.updateColorTexture()}},{key:"updateColorTexture",value:function(){var Pt=this.rendererService.createTexture2D;this.texture&&this.texture.destroy();var Rt=this.layer.getLayerConfig(),Ht=Rt.rampColors,ge=Object(O.n)(Ht);this.colorTexture=Pt({data:new Uint8Array(ge.data),width:ge.width,height:ge.height,wrapS:V.gl.CLAMP_TO_EDGE,wrapT:V.gl.CLAMP_TO_EDGE,min:V.gl.NEAREST,mag:V.gl.NEAREST,flipY:!1})}}]),bt}(kt);function Eo(tt){var _t=Ba();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function Ba(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var uo=`precision highp float;
varying vec4 v_color;
uniform float u_opacity: 1;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,co=`precision highp float;
// \u591A\u8FB9\u5F62\u9876\u70B9\u5750\u6807
attribute vec3 a_Position;
// \u591A\u8FB9\u5F62\u7ECF\u7EAC\u5EA6\u5750\u6807
attribute vec3 a_Pos;
attribute float a_Size;
attribute vec4 a_Color;
uniform vec2 u_radius;
uniform float u_coverage: 0.9;
uniform float u_angle: 0;
uniform mat4 u_ModelMatrix;
varying vec4 v_color;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

void main() {
  v_color = a_Color;
    
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));
  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);
  vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));
  setPickingColor(a_PickingColor);
}
`,Ja=function(tt){s()(bt,tt);var _t=Eo(bt);function bt(){return T()(this,bt),_t.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity,Ht=Pt.coverage,ge=Pt.angle;return{u_opacity:Rt||1,u_coverage:Ht||.9,u_angle:ge||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"hexagonheatmap",vertexShader:co,fragmentShader:uo,triangulation:Dn,depth:{enable:!1},primitive:V.gl.TRIANGLES,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:V.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:3,update:function(Rt,Ht){var ge=Rt.coordinates;return[ge[0],ge[1],0]}}})}}]),bt}(kt),Po={heatmap:Oa,heatmap3d:Oa,grid:ao,grid3d:Yt,hexagon:Ja},ls=Po;function ko(tt){var _t=Es();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function Es(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Co=function(tt){s()(bt,tt);var _t=ko(bt);function bt(){var mt;T()(this,bt);for(var Pt=arguments.length,Rt=new Array(Pt),Ht=0;Ht<Pt;Ht++)Rt[Ht]=arguments[Ht];return mt=_t.call.apply(_t,[this].concat(Rt)),mt.type="HeatMapLayer",mt}return t()(bt,[{key:"buildModels",value:function(){var Pt=this.getModelType();this.layerModel=new ls[Pt](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"renderModels",value:function(){var Pt=this,Rt=this.getModelType();return Rt==="heatmap"?(this.layerModel&&this.layerModel.render(),this):(this.layerModelNeedUpdate&&(this.models=this.layerModel.buildModels(),this.layerModelNeedUpdate=!1),this.models.forEach(function(Ht){return Ht.draw({uniforms:Pt.layerModel.getUninforms()})}),this)}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){var Pt,Rt=this.styleAttributeService.getLayerStyleAttribute("shape"),Ht=this.getLayerConfig(),ge=Ht.shape3d,Be=this.getSource(),Qe=Be.data.type,Bn=(Rt==null||(Pt=Rt.scale)===null||Pt===void 0?void 0:Pt.field)||"heatmap";return Bn==="heatmap"||Bn==="heatmap3d"?"heatmap":Qe==="hexagon"?(ge==null?void 0:ge.indexOf(Bn))===-1?"hexagon":"grid3d":Qe==="grid"?(ge==null?void 0:ge.indexOf(Bn))===-1?"grid":"grid3d":"heatmap"}}]),bt}(X);function Za(tt){var _t=Bs();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function Bs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var ss=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
void main() {
  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));
  gl_FragColor = color;
  gl_FragColor.a *= u_opacity;
}
`,ja=`precision highp float;
uniform mat4 u_ModelMatrix;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
}
`,gn=function(tt){s()(bt,tt);var _t=Za(bt);function bt(){var mt;T()(this,bt);for(var Pt=arguments.length,Rt=new Array(Pt),Ht=0;Ht<Pt;Ht++)Rt[Ht]=arguments[Ht];return mt=_t.call.apply(_t,[this].concat(Rt)),mt.texture=void 0,mt}return t()(bt,[{key:"getUninforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity;return{u_opacity:Rt||1,u_texture:this.texture}}},{key:"initModels",value:function(){var Pt=this,Rt=this.layer.getSource(),Ht=this.rendererService.createTexture2D;return this.texture=Ht({height:0,width:0}),Rt.data.images.then(function(ge){Pt.texture=Ht({data:ge[0],width:ge[0].width,height:ge[0].height}),Pt.layerService.renderLayers()}),[this.layer.buildLayerModel({moduleName:"RasterImage",vertexShader:ja,fragmentShader:ss,triangulation:$n,primitive:V.gl.TRIANGLES,depth:{enable:!1},blend:this.getBlend()})]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:V.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:2,update:function(Rt,Ht,ge,Be){return[ge[3],ge[4]]}}})}}]),bt}(kt),cr={image:gn},Gr=cr;function Ui(tt){var _t=za();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function za(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var go=function(tt){s()(bt,tt);var _t=Ui(bt);function bt(){var mt;T()(this,bt);for(var Pt=arguments.length,Rt=new Array(Pt),Ht=0;Ht<Pt;Ht++)Rt[Ht]=arguments[Ht];return mt=_t.call.apply(_t,[this].concat(Rt)),mt.type="ImageLayer",mt}return t()(bt,[{key:"buildModels",value:function(){var Pt=this.getModelType();this.layerModel=new Gr[Pt](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var Pt=this.getModelType(),Rt={image:{}};return Rt[Pt]}},{key:"getModelType",value:function(){return"image"}}]),bt}(X);function fo(tt){var _t=ea();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function ea(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var to=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= u_opacity;
  if(u_line_type == LineTypeDash) {
   float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_aimate.x == Animate) {
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }
  gl_FragColor = filterColor(gl_FragColor);
}
`,Ns=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform float segmentNumber;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
varying vec4 v_color;
varying vec2 v_normal;

varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;
#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1. - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);
  return mid;
}
float getSegmentRatio(float index) {
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
}
vec2 interpolate (vec2 source, vec2 target, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x ,t), bezier3(y,t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;
  vec2 source = a_Instance.rg;
  vec2 target =  a_Instance.ba;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  if(u_line_type == LineTypeDash) {
      v_distance_ratio = segmentIndex / segmentNumber;
      float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
      v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
    }
  if(u_aimate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }
  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio), 0.0, 1.0));
  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio), 0.0, 1.0));
  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));

  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}
`,Ss={solid:0,dash:1},Ka=function(tt){s()(bt,tt);var _t=fo(bt);function bt(){return T()(this,bt),_t.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity,Ht=Pt.lineType,ge=Ht===void 0?"solid":Ht,Be=Pt.dashArray,Qe=Be===void 0?[10,5]:Be;return Qe.length===2&&Qe.push(0,0),{u_opacity:Rt||1,segmentNumber:30,u_line_type:Ss[ge||"solid"],u_dash_array:Qe,u_blur:.9}}},{key:"getAnimateUniforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.animateOption;return{u_aimate:this.animateOption2Array(Rt),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc2dline",vertexShader:Ns,fragmentShader:to,triangulation:Hn,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Rt,Ht,ge,Be){var Qe=Rt.size,Bn=Qe===void 0?1:Qe;return Array.isArray(Bn)?[Bn[0]]:[Bn]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:V.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:4,update:function(Rt,Ht,ge,Be){return[ge[3],ge[4],ge[5],ge[6]]}}})}}]),bt}(kt);function ou(tt){var _t=Jo();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function Jo(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Os=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute vec4 a_Color;
attribute float a_Size;

uniform mat4 u_ModelMatrix;
uniform float segmentNumber;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
varying vec4 v_color;
varying vec2 v_normal;
varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}

void main() {
  v_color = a_Color;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

   if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_aimate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);

  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));
  setPickingColor(a_PickingColor);
}
`,tu=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= u_opacity;
  if(u_line_type == LineTypeDash) {
   float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_aimate.x == Animate) {
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }
  gl_FragColor = filterColor(gl_FragColor);
}
`,_s={solid:0,dash:1},vs=function(tt){s()(bt,tt);var _t=ou(bt);function bt(){return T()(this,bt),_t.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity,Ht=Pt.lineType,ge=Ht===void 0?"solid":Ht,Be=Pt.dashArray,Qe=Be===void 0?[10,5]:Be;return Qe.length===2&&Qe.push(0,0),{u_opacity:Rt||1,segmentNumber:30,u_line_type:_s[ge]||0,u_dash_array:Qe}}},{key:"getAnimateUniforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.animateOption;return{u_aimate:this.animateOption2Array(Rt),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc3Dline",vertexShader:Os,fragmentShader:tu,triangulation:Hn,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Rt,Ht,ge,Be){var Qe=Rt.size,Bn=Qe===void 0?1:Qe;return Array.isArray(Bn)?[Bn[0]]:[Bn]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:V.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:4,update:function(Rt,Ht,ge,Be){return[ge[3],ge[4],ge[5],ge[6]]}}})}}]),bt}(kt);function ts(tt){var _t=ws();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function ws(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Ms=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

uniform float u_opacity;
uniform float u_blur : 0.9;
uniform float u_line_type: 0.0;
varying vec2 v_normal;
varying vec4 v_dash_array;
varying float v_distance_ratio;
varying vec4 v_color;

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  gl_FragColor.a *= u_opacity;
  if(u_line_type == LineTypeDash) {
   float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
  }

  if(u_aimate.x == Animate) {
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }
  gl_FragColor = filterColor(gl_FragColor);
}
`,Ou=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec4 a_Instance;
attribute float a_Size;
uniform mat4 u_ModelMatrix;
uniform float segmentNumber;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
varying vec4 v_color;
varying vec2 v_normal;

varying float v_distance_ratio;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5., 0, 0];
varying vec4 v_dash_array;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
    return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
    vec2 x = mix(source, target, ratio);
    vec2 center = mix(source, target, 0.5);
    float dSourceCenter = distance(source, center);
    float dXCenter = distance(x, center);
    return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
     float vertex_height = paraboloid(source, target, segmentRatio);

    return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
    );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);
}
float getAngularDist (vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) *
    sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}
vec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(abs(angularDist - PI) < 0.001) {
    return (1.0 - t) * source + t * target;
  }
  float a = sin((1.0 - t) * angularDist) / sin(angularDist);
  float b = sin(t * angularDist) / sin(angularDist);
  vec2 sin_source = sin(source);
  vec2 cos_source = cos(source);
  vec2 sin_target = sin(target);
  vec2 cos_target = cos(target);
  float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
  float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
  float z = a * sin_source.y + b * sin_target.y;
  return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));
}

void main() {
  v_color = a_Color;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  if(u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba);
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
  if(u_aimate.x == Animate) {
      v_distance_ratio = segmentIndex / segmentNumber;
  }
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;
  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));
  v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));
  setPickingColor(a_PickingColor);
}

`,Bu={solid:0,dash:1},So=function(tt){s()(bt,tt);var _t=ts(bt);function bt(){return T()(this,bt),_t.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity,Ht=Pt.lineType,ge=Ht===void 0?"solid":Ht,Be=Pt.dashArray,Qe=Be===void 0?[10,5]:Be;return Qe.length===2&&Qe.push(0,0),{u_opacity:Rt||1,segmentNumber:30,u_line_type:Bu[ge]||0,u_dash_array:Qe}}},{key:"getAnimateUniforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.animateOption;return{u_aimate:this.animateOption2Array(Rt),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"arc2dline",vertexShader:Ou,fragmentShader:Ms,triangulation:Hn,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Rt,Ht,ge,Be){var Qe=Rt.size,Bn=Qe===void 0?1:Qe;return Array.isArray(Bn)?[Bn[0]]:[Bn]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:V.AttributeType.Attribute,descriptor:{name:"a_Instance",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:4,update:function(Rt,Ht,ge,Be){return[ge[3],ge[4],ge[5],ge[6]]}}})}}]),bt}(kt);function eu(tt){var _t=Nu();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function Nu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Yu=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
uniform float u_blur : 0.99;
uniform float u_line_type: 0.0;
uniform float u_opacity : 1.0;
varying vec4 v_color;
varying vec2 v_normal;


// dash
uniform float u_dash_offset : 0.0;
uniform float u_dash_ratio : 0.1;
varying float v_distance_ratio;
varying vec4 v_dash_array;
varying float v_side;


#pragma include "picking"

uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];
// [animate, duration, interval, trailLength],
void main() {
  gl_FragColor = v_color;
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  gl_FragColor.a *= u_opacity;
  if(u_aimate.x == Animate) {
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_aimate.z)* (1.0/ u_aimate.z) + u_time / u_aimate.y);
      alpha = (alpha + u_aimate.w -1.0) / u_aimate.w;
      alpha = smoothstep(0., 1., alpha);
      gl_FragColor.a *= alpha;
  }
 // dash line
  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    gl_FragColor.a *=flag;
    // gl_FragColor.a *=(1.0- step(v_dash_array.x, mod(v_distance_ratio, dashLength)));
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,al=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0

attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

// dash line
attribute float a_Total_Distance;
attribute float a_Distance;

uniform mat4 u_ModelMatrix;
uniform float u_line_type: 0.0;
uniform vec4 u_dash_array: [10.0, 5.\uFF0C0, 0];
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;
varying vec4 v_dash_array;
varying vec2 v_normal;
varying float v_distance_ratio;
varying float v_side;


void main() {

  if(u_line_type == LineTypeDash) {
    v_distance_ratio = a_Distance / a_Total_Distance;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  }
  if(u_aimate.x == Animate) {
      v_distance_ratio = a_Distance / a_Total_Distance;
  }
  v_normal = vec2(reverse_offset_normal(a_Normal) * sign(a_Miter));
  v_color = a_Color;
  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  vec2 offset = project_pixel(size.xy);
  v_side = a_Miter * a_Size.x;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  setPickingColor(a_PickingColor);
}
`,Fu={solid:0,dash:1},Oo=function(tt){s()(bt,tt);var _t=eu(bt);function bt(){return T()(this,bt),_t.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity,Ht=Pt.lineType,ge=Ht===void 0?"solid":Ht,Be=Pt.dashArray,Qe=Be===void 0?[10,5,0,0]:Be;return Qe.length===2&&Qe.push(0,0),{u_opacity:Rt||1,u_line_type:Fu[ge],u_dash_array:Qe}}},{key:"getAnimateUniforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.animateOption;return{u_aimate:this.animateOption2Array(Rt),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"line",vertexShader:al,fragmentShader:Yu,triangulation:xn,primitive:V.gl.TRIANGLES,blend:this.getBlend(),depth:{enable:!1}})]}},{key:"registerBuiltinAttributes",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.lineType,Ht=Rt===void 0?"solid":Rt;this.styleAttributeService.registerStyleAttribute({name:"distance",type:V.AttributeType.Attribute,descriptor:{name:"a_Distance",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Be,Qe,Bn,ur){return[Bn[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:V.AttributeType.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Be,Qe,Bn,ur){return[Bn[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:2,update:function(Be,Qe,Bn,ur){var Kr=Be.size,si=Kr===void 0?1:Kr;return Array.isArray(si)?[si[0],si[1]]:[si,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:V.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:3,update:function(Be,Qe,Bn,ur,Kr){return Kr}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:V.AttributeType.Attribute,descriptor:{name:"a_Miter",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Be,Qe,Bn,ur){return[Bn[4]]}}})}}]),bt}(kt),Ua={arc:Ka,arc3d:vs,greatcircle:So,line:Oo},ba=Ua;function No(tt){var _t=hu();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function hu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Zu=function(tt){s()(bt,tt);var _t=No(bt);function bt(){var mt;T()(this,bt);for(var Pt=arguments.length,Rt=new Array(Pt),Ht=0;Ht<Pt;Ht++)Rt[Ht]=arguments[Ht];return mt=_t.call.apply(_t,[this].concat(Rt)),mt.type="LineLayer",mt}return t()(bt,[{key:"buildModels",value:function(){var Pt=this.getModelType();this.layerModel=new ba[Pt](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var Pt=this.getModelType(),Rt={line:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"}};return Rt[Pt]}},{key:"getModelType",value:function(){var Pt,Rt=this.styleAttributeService.getLayerStyleAttribute("shape"),Ht=Rt==null||(Pt=Rt.scale)===null||Pt===void 0?void 0:Pt.field;return Ht||"line"}}]),bt}(X);function ps(tt){var _t=$o();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function $o(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Is=`varying vec4 v_color;
uniform float u_opacity: 1.0;

#pragma include "picking"

void main() {
  gl_FragColor = v_color;
  gl_FragColor.a *= u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,su=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec3 a_Position;
attribute vec3 a_Pos;
attribute vec4 a_Color;
attribute vec3 a_Size;
attribute vec3 a_Normal;

uniform mat4 u_ModelMatrix;
uniform vec2 u_offsets;
varying vec4 v_color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec3 size = a_Size * a_Position;

  vec2 offset = project_pixel(size.xy);

  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  vec4 pos = vec4(project_pos.xy + offset, project_pixel(size.z), 1.0);

  float lightWeight = calc_lighting(pos);
  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);

  gl_Position = project_common_position_to_clipspace(pos);
  setPickingColor(a_PickingColor);
}
`,Fo=function(tt){s()(bt,tt);var _t=ps(bt);function bt(){return T()(this,bt),_t.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity,Ht=Pt.offsets;return{u_opacity:Rt||1,u_offsets:Ht||[0,0]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointExtrude2",vertexShader:su,fragmentShader:Is,triangulation:Ve,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:3,update:function(Rt,Ht,ge,Be){var Qe=Rt.size;if(Qe){var Bn=[];return Array.isArray(Qe)&&(Bn=Qe.length===2?[Qe[0],Qe[0],Qe[1]]:Qe),Array.isArray(Qe)||(Bn=[Qe]),Bn}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:V.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:3,update:function(Rt,Ht,ge,Be,Qe){return Qe}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:V.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:3,update:function(Rt,Ht){var ge=Vt(Rt.coordinates);return[ge[0],ge[1],0]}}})}}]),bt}(kt);function Ku(tt){var _t=Xs();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function Xs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Xa=`#define Animate 0.0

uniform float u_blur : 0;
uniform float u_opacity : 1;
uniform float u_stroke_width : 1;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  lowp float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);
  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;
  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  // gl_FragColor = v_color * color_t;
  // gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;
  if(u_aimate.x == Animate) {
    float d = length(v_data.xy);
    float intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_aimate.z - u_aimate.y * u_time)), 0.0, 1.0);
    gl_FragColor = vec4(gl_FragColor.xyz, intensity);
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,yl=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec2 a_Extrude;
attribute float a_Size;
attribute float a_Shape;
uniform mat4 u_ModelMatrix;

uniform float u_stroke_width : 2;
uniform vec2 u_offsets;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "projection"
#pragma include "picking"

void main() {
  // unpack color(vec2)
  v_color = a_Color;
  vec2 extrude = a_Extrude;

  float shape_type = a_Shape;

  float newSize = setPickingSize(a_Size);

  // radius(16-bit)
  v_radius = newSize;

  vec2 offset = project_pixel(extrude * (newSize + u_stroke_width) + u_offsets);
  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));





  // TODO: billboard
  // anti-alias
  float antialiasblur = 1.0 / u_DevicePixelRatio / (newSize + u_stroke_width);

  // construct point coords
  v_data = vec4(extrude, antialiasblur,shape_type);

  setPickingColor(a_PickingColor);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

}
`,Hl=function(tt){s()(bt,tt);var _t=Ku(bt);function bt(){return T()(this,bt),_t.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity,Ht=Rt===void 0?1:Rt,ge=Pt.stroke,Be=ge===void 0?"rgb(0,0,0,0)":ge,Qe=Pt.strokeWidth,Bn=Qe===void 0?1:Qe,ur=Pt.strokeOpacity,Kr=ur===void 0?1:ur,si=Pt.offsets,zi=si===void 0?[0,0]:si;return{u_opacity:Ht,u_stroke_width:Bn,u_stroke_color:Object(O.s)(Be),u_stroke_opacity:Kr,u_offsets:[-zi[0],zi[1]]}}},{key:"getAnimateUniforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.animateOption;return{u_aimate:this.animateOption2Array(Rt),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),$e)}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointfill",vertexShader:yl,fragmentShader:Xa,triangulation:$e,depth:{enable:!1},blend:this.getBlend()})]}},{key:"animateOption2Array",value:function(Pt){return[Pt.enable?0:1,Pt.speed||1,Pt.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var Pt=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:V.AttributeType.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:2,update:function(Ht,ge,Be,Qe){var Bn=[1,1,-1,1,-1,-1,1,-1],ur=Qe%4*2;return[Bn[ur],Bn[ur+1]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Ht,ge,Be,Qe){var Bn=Ht.size,ur=Bn===void 0?5:Bn;return Array.isArray(ur)?[ur[0]]:[ur]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:V.AttributeType.Attribute,descriptor:{name:"a_Shape",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Ht,ge,Be,Qe){var Bn=Ht.shape,ur=Bn===void 0?2:Bn,Kr=Pt.layer.getLayerConfig().shape2d,si=Kr.indexOf(ur);return[si]}}})}}]),bt}(kt);function xl(tt){var _t=yc();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function yc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Tl=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
uniform vec2 u_textSize;
uniform float u_stroke_width : 1;
uniform vec4 u_stroke_color : [1, 1, 1, 1];
uniform float u_stroke_opacity : 1;
uniform float u_opacity : 1;

varying float v_size;
#pragma include "picking"
void main(){
vec2 pos= v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
vec4 textureColor=texture2D(u_texture,pos);
if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
      gl_FragColor= textureColor;
}else {
      gl_FragColor= step(0.01, textureColor.z) * v_color;
}
gl_FragColor.a =gl_FragColor.a * u_opacity;
gl_FragColor = filterColor(gl_FragColor);
}
`,oo=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
uniform mat4 u_ModelMatrix;
uniform float u_stroke_width : 1;
uniform vec2 u_offsets;
varying float v_size;

#pragma include "projection"
#pragma include "picking"

void main() {
   v_color = a_Color;
   v_uv = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   v_size = a_Size;
   vec2 offset = project_pixel(u_offsets);
   gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));
   gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;

  setPickingColor(a_PickingColor);

}
`,wu=function(tt){s()(bt,tt);var _t=xl(bt);function bt(){var mt;T()(this,bt);for(var Pt=arguments.length,Rt=new Array(Pt),Ht=0;Ht<Pt;Ht++)Rt[Ht]=arguments[Ht];return mt=_t.call.apply(_t,[this].concat(Rt)),mt.texture=void 0,mt}return t()(bt,[{key:"getUninforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity;return{u_opacity:Rt||1,u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128]}}},{key:"initModels",value:function(){var Pt=this;return this.initIconFontGlyphs(),this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",function(){Pt.updateTexture(),Pt.layer.render()}),[this.layer.buildLayerModel({moduleName:"pointiconImage",vertexShader:oo,fragmentShader:Tl,triangulation:En,primitive:V.gl.POINTS,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var Pt=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Ht,ge,Be,Qe){var Bn=Ht.size;return Array.isArray(Bn)?[Bn[0]]:[Bn]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:V.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:2,update:function(Ht,ge,Be,Qe){var Bn=Pt.fontService.mapping,ur=Ht.shape,Kr=Pt.fontService.getGlyph(ur),si=Bn[Kr],zi=si.x,Ki=si.y;return[zi,Ki]}}})}},{key:"updateTexture",value:function(){var Pt=this.rendererService.createTexture2D,Rt=this.fontService.canvas;this.texture=Pt({data:Rt,mag:V.gl.LINEAR,min:V.gl.LINEAR,width:Rt.width,height:Rt.height})}},{key:"initIconFontGlyphs",value:function(){var Pt=this,Rt=this.layer.getLayerConfig(),Ht=Rt.fontWeight,ge=Ht===void 0?"normal":Ht,Be=Rt.fontFamily,Qe=Be===void 0?"sans-serif":Be,Bn=this.layer.getEncodedData(),ur=[];Bn.forEach(function(Kr){var si=Kr.shape,zi=si===void 0?"":si;zi=zi.toString();var Ki=Pt.fontService.getGlyph(zi);ur.indexOf(Ki)===-1&&ur.push(Ki)}),this.fontService.setFontOptions({characterSet:ur,fontWeight:ge,fontFamily:Qe,fontSize:48})}}]),bt}(kt);function bl(tt){var _t=nu();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function nu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var zu=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
uniform vec2 u_textSize;
uniform float u_stroke_width : 1;
uniform vec4 u_stroke_color : [1, 1, 1, 1];
uniform float u_stroke_opacity : 1;
uniform float u_opacity : 1;

varying float v_size;
#pragma include "picking"
void main(){
vec2 pos= v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
vec4 textureColor=texture2D(u_texture,pos);
if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
      gl_FragColor= textureColor;
}else {
      gl_FragColor= step(0.01, textureColor.z) * v_color;
}
gl_FragColor.a =gl_FragColor.a * u_opacity;
gl_FragColor = filterColor(gl_FragColor);
}
`,xu=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
uniform mat4 u_ModelMatrix;
uniform float u_stroke_width : 1;
uniform vec2 u_offsets;
varying float v_size;

#pragma include "projection"
#pragma include "picking"

void main() {
   v_color = a_Color;
   v_uv = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   v_size = a_Size;
   vec2 offset = project_pixel(u_offsets);
   gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));
   gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;

  setPickingColor(a_PickingColor);

}
`,bu=function(tt){s()(bt,tt);var _t=bl(bt);function bt(){var mt;T()(this,bt);for(var Pt=arguments.length,Rt=new Array(Pt),Ht=0;Ht<Pt;Ht++)Rt[Ht]=arguments[Ht];return mt=_t.call.apply(_t,[this].concat(Rt)),mt.texture=void 0,mt.updateTexture=function(){var ge=mt.rendererService.createTexture2D;if(mt.texture){mt.texture.update({data:mt.iconService.getCanvas()}),mt.layer.render();return}mt.texture=ge({data:mt.iconService.getCanvas(),mag:V.gl.NEAREST,min:V.gl.NEAREST,premultiplyAlpha:!1,width:1024,height:mt.iconService.canvasHeight||128})},mt}return t()(bt,[{key:"getUninforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity,Ht=Pt.offsets,ge=Ht===void 0?[0,0]:Ht;return this.rendererService.getDirty()&&this.texture.bind(),{u_opacity:Rt||1,u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_offsets:[-ge[0],ge[1]]}}},{key:"initModels",value:function(){return this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){this.texture&&this.texture.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:xu,fragmentShader:zu,triangulation:En,primitive:V.gl.POINTS,depth:{enable:!1},blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){var Pt=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Ht,ge,Be,Qe){var Bn=Ht.size,ur=Bn===void 0?5:Bn;return Array.isArray(ur)?[ur[0]]:[ur]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:V.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:2,update:function(Ht,ge,Be,Qe){var Bn=Pt.iconService.getIconMap(),ur=Ht.shape,Kr=Bn[ur]||{x:0,y:0},si=Kr.x,zi=Kr.y;return[si,zi]}}})}}]),bt}(kt);function Js(tt){var _t=cs();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function cs(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Ps=`
uniform float u_opacity : 1;
uniform vec2 u_offsets;
varying vec4 v_color;

#pragma include "picking"
void main() {
  gl_FragColor = v_color;
  gl_FragColor.a =gl_FragColor.a * u_opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,ol=`
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
attribute float a_Size;
attribute vec4 a_Color;
varying vec4 v_color;

uniform vec2 u_offsets;

#pragma include "projection"
#pragma include "picking"
void main() {
  v_color = a_Color;
  vec2 offset = project_pixel(u_offsets);
  vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
    setPickingColor(a_PickingColor);
}
`;function Al(tt){var _t=tt.coordinates;return{vertices:je()(_t),indices:[0],size:_t.length}}var Fl=function(tt){s()(bt,tt);var _t=Js(bt);function bt(){return T()(this,bt),_t.apply(this,arguments)}return t()(bt,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity,Ht=Rt===void 0?1:Rt,ge=Pt.stroke,Be=ge===void 0?"rgb(0,0,0,0)":ge,Qe=Pt.strokeWidth,Bn=Qe===void 0?1:Qe,ur=Pt.offsets,Kr=ur===void 0?[0,0]:ur;return{u_opacity:Ht,u_stroke_width:Bn,u_stroke_color:Object(O.s)(Be),u_offsets:[-Kr[0],Kr[1]]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"normalpoint",vertexShader:ol,fragmentShader:Ps,triangulation:Al,depth:{enable:!1},primitive:V.gl.POINTS,blend:this.getBlend()})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Rt,Ht,ge,Be){var Qe=Rt.size,Bn=Qe===void 0?1:Qe;return Array.isArray(Bn)?[Bn[0]]:[Bn]}}})}},{key:"defaultStyleOptions",value:function(){return{blend:V.BlendType.additive}}}]),bt}(kt);function Uu(tt,_t){var bt=typeof Symbol!="undefined"&&tt[Symbol.iterator]||tt["@@iterator"];if(!bt){if(Array.isArray(tt)||(bt=Xu(tt))||_t&&tt&&typeof tt.length=="number"){bt&&(tt=bt);var mt=0,Pt=function(){};return{s:Pt,n:function(){return mt>=tt.length?{done:!0}:{done:!1,value:tt[mt++]}},e:function(Qe){throw Qe},f:Pt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Rt=!0,Ht=!1,ge;return{s:function(){bt=bt.call(tt)},n:function(){var Qe=bt.next();return Rt=Qe.done,Qe},e:function(Qe){Ht=!0,ge=Qe},f:function(){try{!Rt&&bt.return!=null&&bt.return()}finally{if(Ht)throw ge}}}}function Xu(tt,_t){if(!!tt){if(typeof tt=="string")return sl(tt,_t);var bt=Object.prototype.toString.call(tt).slice(8,-1);if(bt==="Object"&&tt.constructor&&(bt=tt.constructor.name),bt==="Map"||bt==="Set")return Array.from(tt);if(bt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(bt))return sl(tt,_t)}}function sl(tt,_t){(_t==null||_t>tt.length)&&(_t=tt.length);for(var bt=0,mt=new Array(_t);bt<_t;bt++)mt[bt]=tt[bt];return mt}var Eu=function(){function tt(_t,bt,mt){T()(this,tt),this.boxCells=[],this.xCellCount=void 0,this.yCellCount=void 0,this.boxKeys=void 0,this.bboxes=void 0,this.width=void 0,this.height=void 0,this.xScale=void 0,this.yScale=void 0,this.boxUid=void 0;var Pt=this.boxCells;this.xCellCount=Math.ceil(_t/mt),this.yCellCount=Math.ceil(bt/mt);for(var Rt=0;Rt<this.xCellCount*this.yCellCount;Rt++)Pt.push([]);this.boxKeys=[],this.bboxes=[],this.width=_t,this.height=bt,this.xScale=this.xCellCount/_t,this.yScale=this.yCellCount/bt,this.boxUid=0}return t()(tt,[{key:"insert",value:function(bt,mt,Pt,Rt,Ht){this.forEachCell(mt,Pt,Rt,Ht,this.insertBoxCell,this.boxUid++),this.boxKeys.push(bt),this.bboxes.push(mt),this.bboxes.push(Pt),this.bboxes.push(Rt),this.bboxes.push(Ht)}},{key:"query",value:function(bt,mt,Pt,Rt,Ht){return this.queryHitTest(bt,mt,Pt,Rt,!1,Ht)}},{key:"hitTest",value:function(bt,mt,Pt,Rt,Ht){return this.queryHitTest(bt,mt,Pt,Rt,!0,Ht)}},{key:"insertBoxCell",value:function(bt,mt,Pt,Rt,Ht,ge){this.boxCells[Ht].push(ge)}},{key:"queryHitTest",value:function(bt,mt,Pt,Rt,Ht,ge){if(Pt<0||bt>this.width||Rt<0||mt>this.height)return Ht?!1:[];var Be=[];if(bt<=0&&mt<=0&&this.width<=Pt&&this.height<=Rt){if(Ht)return!0;for(var Qe=0;Qe<this.boxKeys.length;Qe++)Be.push({key:this.boxKeys[Qe],x1:this.bboxes[Qe*4],y1:this.bboxes[Qe*4+1],x2:this.bboxes[Qe*4+2],y2:this.bboxes[Qe*4+3]});return ge?Be.filter(ge):Be}var Bn={hitTest:Ht,seenUids:{box:{},circle:{}}};return this.forEachCell(bt,mt,Pt,Rt,this.queryCell,Be,Bn,ge),Ht?Be.length>0:Be}},{key:"queryCell",value:function(bt,mt,Pt,Rt,Ht,ge,Be,Qe){var Bn=Be.seenUids,ur=this.boxCells[Ht];if(ur!==null){var Kr=this.bboxes,si=Uu(ur),zi;try{for(si.s();!(zi=si.n()).done;){var Ki=zi.value;if(!Bn.box[Ki]){Bn.box[Ki]=!0;var ra=Ki*4;if(bt<=Kr[ra+2]&&mt<=Kr[ra+3]&&Pt>=Kr[ra+0]&&Rt>=Kr[ra+1]&&(!Qe||Qe(this.boxKeys[Ki]))){if(Be.hitTest)return ge.push(!0),!0;ge.push({key:this.boxKeys[Ki],x1:Kr[ra],y1:Kr[ra+1],x2:Kr[ra+2],y2:Kr[ra+3]})}}}}catch(Qa){si.e(Qa)}finally{si.f()}}return!1}},{key:"forEachCell",value:function(bt,mt,Pt,Rt,Ht,ge,Be,Qe){for(var Bn=this.convertToXCellCoord(bt),ur=this.convertToYCellCoord(mt),Kr=this.convertToXCellCoord(Pt),si=this.convertToYCellCoord(Rt),zi=Bn;zi<=Kr;zi++)for(var Ki=ur;Ki<=si;Ki++){var ra=this.xCellCount*Ki+zi;if(Ht.call(this,bt,mt,Pt,Rt,ra,ge,Be,Qe))return}}},{key:"convertToXCellCoord",value:function(bt){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(bt*this.xScale)))}},{key:"convertToYCellCoord",value:function(bt){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(bt*this.yScale)))}}]),tt}(),uu=Eu,Ju=function(){function tt(_t,bt){T()(this,tt),this.width=void 0,this.height=void 0,this.grid=void 0,this.viewportPadding=100,this.screenRightBoundary=void 0,this.screenBottomBoundary=void 0,this.gridRightBoundary=void 0,this.gridBottomBoundary=void 0,this.width=_t,this.height=bt,this.viewportPadding=Math.max(_t,bt),this.grid=new uu(_t+this.viewportPadding,bt+this.viewportPadding,25),this.screenRightBoundary=_t+this.viewportPadding,this.screenBottomBoundary=bt+this.viewportPadding,this.gridRightBoundary=_t+2*this.viewportPadding,this.gridBottomBoundary=bt+2*this.viewportPadding}return t()(tt,[{key:"placeCollisionBox",value:function(bt){var mt=bt.x1+bt.anchorPointX+this.viewportPadding,Pt=bt.y1+bt.anchorPointY+this.viewportPadding,Rt=bt.x2+bt.anchorPointX+this.viewportPadding,Ht=bt.y2+bt.anchorPointY+this.viewportPadding;return!this.isInsideGrid(mt,Pt,Rt,Ht)||this.grid.hitTest(mt,Pt,Rt,Ht)?{box:[]}:{box:[mt,Pt,Rt,Ht]}}},{key:"insertCollisionBox",value:function(bt,mt){var Pt={featureIndex:mt};this.grid.insert(Pt,bt[0],bt[1],bt[2],bt[3])}},{key:"project",value:function(bt,mt,Pt){var Rt=Ye.e.fromValues(mt,Pt,0,1),Ht=Ye.e.create(),ge=Ye.b.fromValues.apply(Ye.b,je()(bt));return Ye.e.transformMat4(Ht,Rt,ge),{x:(Ht[0]/Ht[3]+1)/2*this.width+this.viewportPadding,y:(-Ht[1]/Ht[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(bt,mt,Pt,Rt){return Pt>=0&&bt<this.gridRightBoundary&&Rt>=0&&mt<this.gridBottomBoundary}}]),tt}();function Ls(tt,_t){var bt=typeof Symbol!="undefined"&&tt[Symbol.iterator]||tt["@@iterator"];if(!bt){if(Array.isArray(tt)||(bt=El(tt))||_t&&tt&&typeof tt.length=="number"){bt&&(tt=bt);var mt=0,Pt=function(){};return{s:Pt,n:function(){return mt>=tt.length?{done:!0}:{done:!1,value:tt[mt++]}},e:function(Qe){throw Qe},f:Pt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Rt=!0,Ht=!1,ge;return{s:function(){bt=bt.call(tt)},n:function(){var Qe=bt.next();return Rt=Qe.done,Qe},e:function(Qe){Ht=!0,ge=Qe},f:function(){try{!Rt&&bt.return!=null&&bt.return()}finally{if(Ht)throw ge}}}}function El(tt,_t){if(!!tt){if(typeof tt=="string")return sc(tt,_t);var bt=Object.prototype.toString.call(tt).slice(8,-1);if(bt==="Object"&&tt.constructor&&(bt=tt.constructor.name),bt==="Map"||bt==="Set")return Array.from(tt);if(bt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(bt))return sc(tt,_t)}}function sc(tt,_t){(_t==null||_t>tt.length)&&(_t=tt.length);for(var bt=0,mt=new Array(_t);bt<_t;bt++)mt[bt]=tt[bt];return mt}function Cl(tt){var _t=.5,bt=.5;switch(tt){case"right":case"top-right":case"bottom-right":_t=1;break;case"left":case"top-left":case"bottom-left":_t=0;break;default:_t=.5}switch(tt){case"bottom":case"bottom-right":case"bottom-left":bt=1;break;case"top":case"top-right":case"top-left":bt=0;break;default:bt=.5}return{horizontalAlign:_t,verticalAlign:bt}}function zl(tt,_t,bt,mt,Pt){if(!!Pt){var Rt=tt[mt],Ht=Rt.glyph;if(Ht)for(var ge=_t[Ht].advance*Rt.scale,Be=(tt[mt].x+ge)*Pt,Qe=bt;Qe<=mt;Qe++)tt[Qe].x-=Be}}function Yl(tt,_t,bt,mt,Pt,Rt,Ht){var ge=(_t-bt)*Pt,Be=(-mt*Ht+.5)*Rt,Qe=Ls(tt),Bn;try{for(Qe.s();!(Bn=Qe.n()).done;){var ur=Bn.value;ur.x+=ge,ur.y+=Be}}catch(Kr){Qe.e(Kr)}finally{Qe.f()}}function dc(tt,_t,bt,mt,Pt,Rt,Ht){var ge=-8,Be=0,Qe=ge,Bn=0,ur=tt.positionedGlyphs,Kr=Rt==="right"?1:Rt==="left"?0:.5,si=ur.length;bt.forEach(function(zo){if(zo.split("").forEach(function(os){var js=_t[os],Wu=0;js&&(ur.push({glyph:os,x:Be,y:Qe+Wu,vertical:!1,scale:1,metrics:js}),Be+=js.advance+Ht)}),ur.length!==si){var xs=Be-Ht;Bn=Math.max(xs,Bn),zl(ur,_t,si,ur.length-1,Kr)}Be=0,Qe+=mt});var zi=Cl(Pt),Ki=zi.horizontalAlign,ra=zi.verticalAlign;Yl(ur,Kr,Ki,ra,Bn,mt,bt.length);var Qa=Qe-ge;tt.top+=-ra*Qa,tt.bottom=tt.top+Qa,tt.left+=-Ki*Bn,tt.right=tt.left+Bn}function $u(tt,_t,bt,mt,Pt,Rt){var Ht=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[0,0],ge=tt.split(`
`),Be=[],Qe={positionedGlyphs:Be,top:Ht[1],bottom:Ht[1],left:Ht[0],right:Ht[0],lineCount:ge.length,text:tt};return dc(Qe,_t,ge,bt,mt,Pt,Rt),Be.length?Qe:!1}function Ol(tt){var _t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0],bt=arguments.length>2?arguments[2]:void 0,mt=tt.positionedGlyphs,Pt=mt===void 0?[]:mt,Rt=[],Ht=Ls(Pt),ge;try{for(Ht.s();!(ge=Ht.n()).done;){var Be=ge.value,Qe=Be.metrics,Bn=4,ur=Qe.advance*Be.scale/2,Kr=bt?[Be.x+ur,Be.y]:[0,0],si=bt?[0,0]:[Be.x+ur+_t[0],Be.y+_t[1]],zi=(0-Bn)*Be.scale-ur+si[0],Ki=(0-Bn)*Be.scale+si[1],ra=zi+Qe.width*Be.scale,Qa=Ki+Qe.height*Be.scale,zo={x:zi,y:Ki},xs={x:ra,y:Ki},os={x:zi,y:Qa},js={x:ra,y:Qa};Rt.push({tl:zo,tr:xs,bl:os,br:js,tex:Qe,glyphOffset:Kr})}}catch(Wu){Ht.e(Wu)}finally{Ht.f()}return Rt}function Ul(tt,_t){var bt=typeof Symbol!="undefined"&&tt[Symbol.iterator]||tt["@@iterator"];if(!bt){if(Array.isArray(tt)||(bt=wo(tt))||_t&&tt&&typeof tt.length=="number"){bt&&(tt=bt);var mt=0,Pt=function(){};return{s:Pt,n:function(){return mt>=tt.length?{done:!0}:{done:!1,value:tt[mt++]}},e:function(Qe){throw Qe},f:Pt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Rt=!0,Ht=!1,ge;return{s:function(){bt=bt.call(tt)},n:function(){var Qe=bt.next();return Rt=Qe.done,Qe},e:function(Qe){Ht=!0,ge=Qe},f:function(){try{!Rt&&bt.return!=null&&bt.return()}finally{if(Ht)throw ge}}}}function wo(tt,_t){if(!!tt){if(typeof tt=="string")return ho(tt,_t);var bt=Object.prototype.toString.call(tt).slice(8,-1);if(bt==="Object"&&tt.constructor&&(bt=tt.constructor.name),bt==="Map"||bt==="Set")return Array.from(tt);if(bt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(bt))return ho(tt,_t)}}function ho(tt,_t){(_t==null||_t>tt.length)&&(_t=tt.length);for(var bt=0,mt=new Array(_t);bt<_t;bt++)mt[bt]=tt[bt];return mt}function Sl(tt){var _t=ul();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function ul(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Ys=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0
uniform sampler2D u_sdf_map;
uniform float u_gamma_scale : 0.5;
// uniform float u_font_size : 24.0;
uniform float u_opacity : 1.0;
uniform float u_stroke_opacity: 1.0;
uniform vec4 u_stroke : [0, 0, 0, 1];
uniform float u_strokeWidth : 2.0;
uniform float u_halo_blur : 0.5;
uniform float u_DevicePixelRatio;

varying vec4 v_color;
varying vec2 v_uv;
varying float v_gamma_scale;
varying float v_fontScale;

#pragma include "picking"
void main() {
  // get sdf from atlas
  float dist = texture2D(u_sdf_map, v_uv).a;

  // float fontScale = u_font_size / FONT_SIZE;

  lowp float buff = (6.0 - u_strokeWidth / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);
  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), vec4(u_stroke.rgb, u_stroke.a * u_opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor.a= gl_FragColor.a * alpha;
  gl_FragColor = filterColor(gl_FragColor);
}
`,Da=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0
attribute vec3 a_Position;
attribute vec2 a_tex;
attribute vec2 a_textOffsets;
attribute vec4 a_Color;
attribute float a_Size;
attribute float a_Rotate;

uniform vec2 u_sdf_map_size;
uniform mat4 u_ModelMatrix;

varying vec2 v_uv;
varying float v_gamma_scale;
varying vec4 v_color;
varying float v_fontScale;

#pragma include "projection"
#pragma include "picking"

void main() {
  v_color = a_Color;
  v_uv = a_tex / u_sdf_map_size;

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
   v_fontScale = fontScale;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
 highp float angle_sin = sin(a_Rotate);
 highp float angle_cos = cos(a_Rotate);
 mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  gl_Position = vec4(projected_position.xy / projected_position.w
    + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`;function mo(tt){var _t=this,bt=tt.id,mt=[],Pt=[];if(!_t.glyphInfoMap||!_t.glyphInfoMap[bt])return{vertices:[],indices:[],size:7};var Rt=_t.glyphInfoMap[bt].centroid,Ht=Rt.length===2?[Rt[0],Rt[1],0]:Rt;return _t.glyphInfoMap[bt].glyphQuads.forEach(function(ge,Be){mt.push.apply(mt,je()(Ht).concat([ge.tex.x,ge.tex.y+ge.tex.height,ge.tl.x,ge.tl.y],je()(Ht),[ge.tex.x+ge.tex.width,ge.tex.y+ge.tex.height,ge.tr.x,ge.tr.y],je()(Ht),[ge.tex.x+ge.tex.width,ge.tex.y,ge.br.x,ge.br.y],je()(Ht),[ge.tex.x,ge.tex.y,ge.bl.x,ge.bl.y])),Pt.push(0+Be*4,1+Be*4,2+Be*4,2+Be*4,3+Be*4,0+Be*4)}),{vertices:mt,indices:Pt,size:7}}var Gs=function(tt){s()(bt,tt);var _t=Sl(bt);function bt(){var mt;T()(this,bt);for(var Pt=arguments.length,Rt=new Array(Pt),Ht=0;Ht<Pt;Ht++)Rt[Ht]=arguments[Ht];return mt=_t.call.apply(_t,[this].concat(Rt)),mt.glyphInfo=void 0,mt.glyphInfoMap={},mt.texture=void 0,mt.currentZoom=-1,mt.extent=void 0,mt.textureHeight=0,mt.textCount=0,mt.preTextStyle={},mt.buildModels=function(){return mt.initGlyph(),mt.updateTexture(),mt.filterGlyphs(),[mt.layer.buildLayerModel({moduleName:"pointText",vertexShader:Da,fragmentShader:Ys,triangulation:mo.bind(g()(mt)),depth:{enable:!1},blend:mt.getBlend()})]},mt}return t()(bt,[{key:"getUninforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity,Ht=Rt===void 0?1:Rt,ge=Pt.stroke,Be=ge===void 0?"#fff":ge,Qe=Pt.strokeWidth,Bn=Qe===void 0?0:Qe,ur=Pt.strokeOpacity,Kr=ur===void 0?1:ur,si=Pt.textAnchor,zi=si===void 0?"center":si,Ki=Pt.textAllowOverlap,ra=Ki===void 0?!1:Ki,Qa=Pt.halo,zo=Qa===void 0?.5:Qa,xs=Pt.gamma,os=xs===void 0?2:xs,js=this.fontService,Wu=js.canvas,Mo=js.mapping;return Object.keys(Mo).length!==this.textCount&&(this.updateTexture(),this.textCount=Object.keys(Mo).length),this.preTextStyle={textAnchor:zi,textAllowOverlap:ra},{u_opacity:Ht,u_stroke_opacity:Kr,u_sdf_map:this.texture,u_stroke:Object(O.s)(Be),u_halo_blur:zo,u_gamma_scale:os,u_sdf_map_size:[Wu.width,Wu.height],u_strokeWidth:Bn}}},{key:"initModels",value:function(){this.layer.on("remapping",this.buildModels),this.extent=this.textExtent();var Pt=this.layer.getLayerConfig(),Rt=Pt.textAnchor,Ht=Rt===void 0?"center":Rt,ge=Pt.textAllowOverlap,Be=ge===void 0?!0:ge;return this.preTextStyle={textAnchor:Ht,textAllowOverlap:Be},this.buildModels()}},{key:"needUpdate",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.textAllowOverlap,Ht=Rt===void 0?!1:Rt,ge=this.mapService.getZoom(),Be=this.mapService.getBounds(),Qe=Object(O.j)(this.extent,Be);return!Ht&&(Math.abs(this.currentZoom-ge)>1||!Qe)||Ht!==this.preTextStyle.textAllowOverlap?(this.reBuildModel(),!0):!1}},{key:"clearModels",value:function(){this.layer.off("remapping",this.buildModels)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"rotate",type:V.AttributeType.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Rt,Ht,ge,Be){var Qe=Rt.rotate,Bn=Qe===void 0?0:Qe;return Array.isArray(Bn)?[Bn[0]]:[Bn]}}}),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:V.AttributeType.Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:2,update:function(Rt,Ht,ge,Be){return[ge[5],ge[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Rt,Ht,ge,Be){var Qe=Rt.size,Bn=Qe===void 0?12:Qe;return Array.isArray(Bn)?[Bn[0]]:[Bn]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:V.AttributeType.Attribute,descriptor:{name:"a_tex",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:2,update:function(Rt,Ht,ge,Be){return[ge[3],ge[4]]}}})}},{key:"textExtent",value:function(){var Pt=this.mapService.getBounds();return Object(O.r)(Pt,.5)}},{key:"initTextFont",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.fontWeight,Ht=Rt===void 0?"400":Rt,ge=Pt.fontFamily,Be=ge===void 0?"sans-serif":ge,Qe=this.layer.getEncodedData(),Bn=[];Qe.forEach(function(ur){var Kr=ur.shape,si=Kr===void 0?"":Kr;si=si.toString();var zi=Ul(si),Ki;try{for(zi.s();!(Ki=zi.n()).done;){var ra=Ki.value;Bn.indexOf(ra)===-1&&Bn.push(ra)}}catch(Qa){zi.e(Qa)}finally{zi.f()}}),this.fontService.setFontOptions({characterSet:Bn,fontWeight:Ht,fontFamily:Be})}},{key:"generateGlyphLayout",value:function(){var Pt=this,Rt=this.fontService.mapping,Ht=this.layer.getLayerConfig(),ge=Ht.spacing,Be=ge===void 0?2:ge,Qe=Ht.textAnchor,Bn=Qe===void 0?"center":Qe,ur=Ht.textOffset,Kr=this.layer.getEncodedData();this.glyphInfo=Kr.map(function(si){var zi=si.shape,Ki=zi===void 0?"":zi,ra=si.coordinates,Qa=si.id,zo=si.size,xs=zo===void 0?1:zo,os=$u(Ki.toString(),Rt,xs,Bn,"center",Be,ur),js=Ol(os,ur,!1);return si.shaping=os,si.glyphQuads=js,si.centroid=Vt(ra),Pt.glyphInfoMap[Qa]={shaping:os,glyphQuads:js,centroid:Vt(ra)},si})}},{key:"filterGlyphs",value:function(){var Pt=this,Rt=this.layer.getLayerConfig(),Ht=Rt.padding,ge=Ht===void 0?[4,4]:Ht,Be=Rt.textAllowOverlap,Qe=Be===void 0?!1:Be;if(!Qe){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var Bn=this.rendererService.getViewportSize(),ur=Bn.width,Kr=Bn.height,si=new Ju(ur,Kr),zi=this.glyphInfo.filter(function(Ki){var ra=Ki.shaping,Qa=Ki.id,zo=Qa===void 0?0:Qa,xs=Ki.centroid,os=Ki.size,js=os/24,Wu=Pt.mapService.lngLatToContainer(xs),Mo=si.placeCollisionBox({x1:ra.left*js-ge[0],x2:ra.right*js+ge[0],y1:ra.top*js-ge[1],y2:ra.bottom*js+ge[1],anchorPointX:Wu.x,anchorPointY:Wu.y}),Hu=Mo.box;return Hu&&Hu.length?(si.insertCollisionBox(Hu,zo),!0):!1});zi.forEach(function(Ki){Pt.glyphInfoMap[Ki.id]=Ki})}}},{key:"initGlyph",value:function(){this.initTextFont(),this.generateGlyphLayout()}},{key:"updateTexture",value:function(){var Pt=this.rendererService.createTexture2D,Rt=this.fontService.canvas;this.textureHeight=Rt.height,this.texture&&this.texture.destroy(),this.texture=Pt({data:Rt,mag:V.gl.LINEAR,min:V.gl.LINEAR,width:Rt.width,height:Rt.height})}},{key:"reBuildModel",value:function(){this.filterGlyphs(),this.layer.models=[this.layer.buildLayerModel({moduleName:"pointText",vertexShader:Da,fragmentShader:Ys,triangulation:mo.bind(this),depth:{enable:!1},blend:this.getBlend()})]}}]),bt}(kt),wl={fill:Hl,image:bu,normal:Fl,extrude:Fo,text:Gs,icon:wu},ll=wl;function Qu(tt){var _t=xc();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function xc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Zl=function(tt){s()(bt,tt);var _t=Qu(bt);function bt(){var mt;T()(this,bt);for(var Pt=arguments.length,Rt=new Array(Pt),Ht=0;Ht<Pt;Ht++)Rt[Ht]=arguments[Ht];return mt=_t.call.apply(_t,[this].concat(Rt)),mt.type="PointLayer",mt}return t()(bt,[{key:"buildModels",value:function(){var Pt=this.getModelType();this.layerModel=new ll[Pt](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var Pt=this.getModelType(),Rt={normal:{blend:"additive"},fill:{blend:"normal"},extrude:{},image:{},icon:{},text:{blend:"normal"}};return Rt[Pt]}},{key:"getModelType",value:function(){var Pt=this.getEncodedData(),Rt=this.getLayerConfig(),Ht=Rt.shape2d,ge=Rt.shape3d,Be=this.iconService.getIconMap(),Qe=Pt.find(function(ur){return ur.hasOwnProperty("shape")});if(Qe){var Bn=Qe.shape;return Bn==="dot"?"normal":(Ht==null?void 0:Ht.indexOf(Bn))!==-1?"fill":(ge==null?void 0:ge.indexOf(Bn))!==-1?"extrude":Be.hasOwnProperty(Bn)?"image":this.fontService.getGlyph(Bn)!==""?"icon":"text"}else return"normal"}}]),bt}(X);function qu(tt){var _t=ru();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function ru(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Zs=`uniform float u_opacity: 1.0;
varying vec4 v_Color;

#pragma include "picking"

void main() {
  gl_FragColor = v_Color;
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,es=`precision highp float;

#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;

varying vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  float lightWeight = calc_lighting(pos);
  // v_Color = a_Color;
  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  setPickingColor(a_PickingColor);
}
`,iu=function(tt){s()(bt,tt);var _t=qu(bt);function bt(){return T()(this,bt),_t.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity,Ht=Rt===void 0?1:Rt;return{u_opacity:Ht}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"polygonExtrude",vertexShader:es,fragmentShader:Zs,triangulation:mn})]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:V.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:V.gl.STATIC_DRAW,data:[],type:V.gl.FLOAT},size:3,update:function(Rt,Ht,ge,Be,Qe){return Qe}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:V.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Rt,Ht,ge,Be){var Qe=Rt.size,Bn=Qe===void 0?10:Qe;return Array.isArray(Bn)?[Bn[0]]:[Bn]}}})}}]),bt}(kt);function ku(tt){var _t=us();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function us(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Yi=`uniform float u_opacity: 1.0;
varying vec4 v_Color;

#pragma include "picking"

void main() {
  gl_FragColor = v_Color;
  gl_FragColor.a *= u_opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,Fs=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Normal;
attribute float a_Size;
uniform mat4 u_ModelMatrix;

varying vec4 v_Color;

#pragma include "projection"
#pragma include "picking"

void main() {
  v_Color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`,tl=function(tt){s()(bt,tt);var _t=ku(bt);function bt(){return T()(this,bt),_t.apply(this,arguments)}return t()(bt,[{key:"getUninforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity,Ht=Rt===void 0?1:Rt;return{u_opacity:Ht}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"polygon",vertexShader:Fs,fragmentShader:Yi,triangulation:Nn,blend:this.getBlend(),depth:{enable:!1}})]}},{key:"registerBuiltinAttributes",value:function(){}}]),bt}(kt),Gu={fill:tl,line:Oo,extrude:iu,text:Gs,point_fill:Hl,point_image:bu,point_normal:Fl,point_extrude:Fo},Go=Gu;function Yo(tt){var _t=Su();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function Su(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Mi=function(tt){s()(bt,tt);var _t=Yo(bt);function bt(){var mt;T()(this,bt);for(var Pt=arguments.length,Rt=new Array(Pt),Ht=0;Ht<Pt;Ht++)Rt[Ht]=arguments[Ht];return mt=_t.call.apply(_t,[this].concat(Rt)),mt.type="PolygonLayer",mt}return t()(bt,[{key:"buildModels",value:function(){var Pt=this.getModelType();this.layerModel=new Go[Pt](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){var Pt,Rt=this.styleAttributeService.getLayerStyleAttribute("shape"),Ht=Rt==null||(Pt=Rt.scale)===null||Pt===void 0?void 0:Pt.field;return Ht==="fill"?"fill":Ht==="extrude"?"extrude":Ht==="line"?"line":this.getPointModelType()}},{key:"getPointModelType",value:function(){var Pt=this.getEncodedData(),Rt=this.getLayerConfig(),Ht=Rt.shape2d,ge=Rt.shape3d,Be=this.iconService.getIconMap(),Qe=Pt.find(function(ur){return ur.hasOwnProperty("shape")});if(Qe){var Bn=Qe.shape;return Bn==="dot"?"point_normal":(Ht==null?void 0:Ht.indexOf(Bn))!==-1?"point_fill":(ge==null?void 0:ge.indexOf(Bn))!==-1?"point_extrude":Be.hasOwnProperty(Bn)?"point_image":"text"}else return"fill"}}]),bt}(X);function _u(tt){var _t=Iu();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function Iu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var Lu=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_min;
uniform float u_max;
uniform vec2 u_domain;
uniform float u_noDataValue;
uniform bool u_clampLow: true;
uniform bool u_clampHigh: true;
varying vec2 v_texCoord;

void main() {

  float value = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).r;
  if (value == u_noDataValue)
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1]))
    gl_FragColor = vec4(0, 0, 0, 0);
  else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] -u_domain[0]);
    vec4 color = texture2D(u_colorTexture,vec2(normalisedValue, 0));
    gl_FragColor = color;
    gl_FragColor.a =  gl_FragColor.a * u_opacity ;
  }


}
`,$s=`precision highp float;
uniform mat4 u_ModelMatrix;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
}
`,we=function(tt){s()(bt,tt);var _t=_u(bt);function bt(){var mt;T()(this,bt);for(var Pt=arguments.length,Rt=new Array(Pt),Ht=0;Ht<Pt;Ht++)Rt[Ht]=arguments[Ht];return mt=_t.call.apply(_t,[this].concat(Rt)),mt.texture=void 0,mt.colorTexture=void 0,mt}return t()(bt,[{key:"getUninforms",value:function(){var Pt=this.layer.getLayerConfig(),Rt=Pt.opacity,Ht=Rt===void 0?1:Rt,ge=Pt.clampLow,Be=ge===void 0?!0:ge,Qe=Pt.clampHigh,Bn=Qe===void 0?!0:Qe,ur=Pt.noDataValue,Kr=ur===void 0?-9999999:ur,si=Pt.domain,zi=si===void 0?[0,1]:si;return this.updateColorTexure(),{u_opacity:Ht||1,u_texture:this.texture,u_domain:zi,u_clampLow:Be,u_clampHigh:typeof Bn!="undefined"?Bn:Be,u_noDataValue:Kr,u_colorTexture:this.colorTexture}}},{key:"initModels",value:function(){var Pt=this.layer.getSource(),Rt=this.rendererService.createTexture2D,Ht=Pt.data.dataArray[0];this.texture=Rt({data:Ht.data,width:Ht.width,height:Ht.height,format:V.gl.LUMINANCE,type:V.gl.FLOAT});var ge=this.layer.getLayerConfig(),Be=ge.rampColors,Qe=Object(O.n)(Be);return this.colorTexture=Rt({data:Qe.data,width:Qe.width,height:Qe.height,flipY:!1}),[this.layer.buildLayerModel({moduleName:"RasterImageData",vertexShader:$s,fragmentShader:Lu,triangulation:$n,primitive:V.gl.TRIANGLES,depth:{enable:!1},blend:this.getBlend()})]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:V.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:2,update:function(Rt,Ht,ge,Be){return[ge[3],ge[4]]}}})}},{key:"updateColorTexure",value:function(){var Pt=this.rendererService.createTexture2D,Rt=this.layer.getLayerConfig(),Ht=Rt.rampColors,ge=Object(O.n)(Ht);this.colorTexture=Pt({data:ge.data,width:ge.width,height:ge.height,flipY:!1})}}]),bt}(kt),Pe={raster:we,raster3d:we},hn=Pe;function tn(tt){var _t=On();return function(){var mt=n()(tt),Pt;if(_t){var Rt=n()(this).constructor;Pt=Reflect.construct(mt,arguments,Rt)}else Pt=mt.apply(this,arguments);return r()(this,Pt)}}function On(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(tt){return!1}}var fr=function(tt){s()(bt,tt);var _t=tn(bt);function bt(){var mt;T()(this,bt);for(var Pt=arguments.length,Rt=new Array(Pt),Ht=0;Ht<Pt;Ht++)Rt[Ht]=arguments[Ht];return mt=_t.call.apply(_t,[this].concat(Rt)),mt.type="RasterLayer",mt}return t()(bt,[{key:"buildModels",value:function(){var Pt=this.getModelType();this.layerModel=new hn[Pt](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var Pt=this.getModelType(),Rt={raster:{},raster3d:{}};return Rt[Pt]}},{key:"getModelType",value:function(){return"raster"}}]),bt}(X),Ir,Zr,ni,zr,ci,xr,Kt;function te(tt,_t){var bt=Object.keys(tt);if(Object.getOwnPropertySymbols){var mt=Object.getOwnPropertySymbols(tt);_t&&(mt=mt.filter(function(Pt){return Object.getOwnPropertyDescriptor(tt,Pt).enumerable})),bt.push.apply(bt,mt)}return bt}function Ie(tt){for(var _t=1;_t<arguments.length;_t++){var bt=arguments[_t]!=null?arguments[_t]:{};_t%2?te(Object(bt),!0).forEach(function(mt){l()(tt,mt,bt[mt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(bt)):te(Object(bt)).forEach(function(mt){Object.defineProperty(tt,mt,Object.getOwnPropertyDescriptor(bt,mt))})}return tt}var _e=(Ir=Object(Z.injectable)(),Zr=Object(Z.inject)(V.TYPES.IGlobalConfigService),ni=Object(Z.inject)(V.TYPES.ILogService),Ir(zr=(ci=function(){function tt(){T()(this,tt),v()(this,"configService",xr,this),v()(this,"logger",Kt,this)}return t()(tt,[{key:"apply",value:function(bt,mt){var Pt=this,Rt=mt.styleAttributeService;bt.hooks.init.tap("DataMappingPlugin",function(){Pt.generateMaping(bt,{styleAttributeService:Rt})}),bt.hooks.beforeRenderData.tap("DataMappingPlugin",function(){return bt.dataState.dataMappingNeedUpdate=!1,Pt.generateMaping(bt,{styleAttributeService:Rt}),!0}),bt.hooks.beforeRender.tap("DataMappingPlugin",function(){if(!bt.layerModelNeedUpdate){var Ht=Rt.getLayerStyleAttributes()||[],ge=Rt.getLayerStyleAttribute("filter"),Be=bt.getSource().data.dataArray,Qe=Ht.filter(function(ur){return ur.needRemapping}),Bn=Be;ge!=null&&ge.needRemapping&&ge!==null&&ge!==void 0&&ge.scale&&(Bn=Be.filter(function(ur){return Pt.applyAttributeMapping(ge,ur)[0]})),Qe.length&&(ge!=null&&ge.needRemapping?(bt.setEncodedData(Pt.mapping(Ht,Bn)),ge.needRemapping=!1):bt.setEncodedData(Pt.mapping(Qe,Bn,bt.getEncodedData())),Pt.logger.debug("remapping finished"),bt.emit("remapping",null))}})}},{key:"generateMaping",value:function(bt,mt){var Pt=this,Rt=mt.styleAttributeService,Ht=Rt.getLayerStyleAttributes()||[],ge=Rt.getLayerStyleAttribute("filter"),Be=bt.getSource().data.dataArray,Qe=Be;ge!=null&&ge.scale&&(Qe=Be.filter(function(Bn){return Pt.applyAttributeMapping(ge,Bn)[0]})),bt.setEncodedData(this.mapping(Ht,Qe))}},{key:"mapping",value:function(bt,mt,Pt){var Rt=this;return mt.map(function(Ht,ge){var Be=Pt?Pt[ge]:{},Qe=Ie({id:Ht._id,coordinates:Ht.coordinates},Be);return bt.filter(function(Bn){return Bn.scale!==void 0}).forEach(function(Bn){var ur=Rt.applyAttributeMapping(Bn,Ht);Bn.needRemapping=!1,Bn.name==="color"&&(ur=ur.map(function(Kr){return Object(O.s)(Kr)})),Qe[Bn.name]=Array.isArray(ur)&&ur.length===1?ur[0]:ur}),Qe})}},{key:"applyAttributeMapping",value:function(bt,mt){var Pt;if(!bt.scale)return[];var Rt=(bt==null||(Pt=bt.scale)===null||Pt===void 0?void 0:Pt.scalers)||[],Ht=[];return Rt.forEach(function(ge){var Be,Qe=ge.field;(mt.hasOwnProperty(Qe)||((Be=bt.scale)===null||Be===void 0?void 0:Be.type)==="variable")&&Ht.push(mt[Qe])}),bt.mapping?bt.mapping(Ht):[]}}]),tt}(),xr=_()(ci.prototype,"configService",[Zr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kt=_()(ci.prototype,"logger",[ni],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ci))||zr),Dt=R("rlAn"),zt,oe,ne=(zt=Object(Z.injectable)(),zt(oe=function(){function tt(){T()(this,tt),this.mapService=void 0}return t()(tt,[{key:"apply",value:function(bt){var mt=this;this.mapService=bt.getContainer().get(V.TYPES.IMapService),bt.hooks.init.tap("DataSourcePlugin",function(){var Pt=bt.sourceOption,Rt=Pt.data,Ht=Pt.options;bt.setSource(new Dt.default(Rt,Ht)),mt.updateClusterData(bt)}),bt.hooks.beforeRenderData.tap("DataSourcePlugin",function(){var Pt=mt.updateClusterData(bt),Rt=bt.dataState.dataSourceNeedUpdate;return bt.dataState.dataSourceNeedUpdate=!1,Pt||Rt})}},{key:"updateClusterData",value:function(bt){var mt=bt.getSource(),Pt=mt.cluster,Rt=mt.clusterOptions,Ht=Rt.zoom,ge=Ht===void 0?0:Ht,Be=Rt.maxZoom,Qe=Be===void 0?16:Be,Bn=this.mapService.getZoom()-1,ur=bt.dataState.dataSourceNeedUpdate;return Pt&&(ur||Math.abs(ge-Bn)>1)&&Qe>ge?(mt.updateClusterData(Math.floor(Bn)),!0):!1}}]),tt}())||oe),fe=R("7tbW"),Fe=R.n(fe),Ze=R("4qC0"),nn=R.n(Ze),Je=R("J2iB"),vn=R.n(Je),fn=function(tt,_t){return tt<_t?-1:tt>_t?1:tt>=_t?0:NaN},Yn=function(tt){return tt.length===1&&(tt=kn(tt)),{left:function(bt,mt,Pt,Rt){for(Pt==null&&(Pt=0),Rt==null&&(Rt=bt.length);Pt<Rt;){var Ht=Pt+Rt>>>1;tt(bt[Ht],mt)<0?Pt=Ht+1:Rt=Ht}return Pt},right:function(bt,mt,Pt,Rt){for(Pt==null&&(Pt=0),Rt==null&&(Rt=bt.length);Pt<Rt;){var Ht=Pt+Rt>>>1;tt(bt[Ht],mt)>0?Rt=Ht:Pt=Ht+1}return Pt}}};function kn(tt){return function(_t,bt){return fn(tt(_t),bt)}}var Vn=Yn(fn),Gn=Vn.right,hr=Vn.left,mr=Gn,Yr=function(tt,_t){_t==null&&(_t=gi);for(var bt=0,mt=tt.length-1,Pt=tt[0],Rt=new Array(mt<0?0:mt);bt<mt;)Rt[bt]=_t(Pt,Pt=tt[++bt]);return Rt};function gi(tt,_t){return[tt,_t]}var Br=function(tt,_t,bt){var mt=tt.length,Pt=_t.length,Rt=new Array(mt*Pt),Ht,ge,Be,Qe;for(bt==null&&(bt=gi),Ht=Be=0;Ht<mt;++Ht)for(Qe=tt[Ht],ge=0;ge<Pt;++ge,++Be)Rt[Be]=bt(Qe,_t[ge]);return Rt},ai=function(tt,_t){return _t<tt?-1:_t>tt?1:_t>=tt?0:NaN},fi=function(tt){return tt===null?NaN:+tt},Zi=function(tt,_t){var bt=tt.length,mt=0,Pt=-1,Rt=0,Ht,ge,Be=0;if(_t==null)for(;++Pt<bt;)isNaN(Ht=fi(tt[Pt]))||(ge=Ht-Rt,Rt+=ge/++mt,Be+=ge*(Ht-Rt));else for(;++Pt<bt;)isNaN(Ht=fi(_t(tt[Pt],Pt,tt)))||(ge=Ht-Rt,Rt+=ge/++mt,Be+=ge*(Ht-Rt));if(mt>1)return Be/(mt-1)},Ri=function(tt,_t){var bt=Zi(tt,_t);return bt&&Math.sqrt(bt)},Sa=function(tt,_t){var bt=tt.length,mt=-1,Pt,Rt,Ht;if(_t==null){for(;++mt<bt;)if((Pt=tt[mt])!=null&&Pt>=Pt)for(Rt=Ht=Pt;++mt<bt;)(Pt=tt[mt])!=null&&(Rt>Pt&&(Rt=Pt),Ht<Pt&&(Ht=Pt))}else for(;++mt<bt;)if((Pt=_t(tt[mt],mt,tt))!=null&&Pt>=Pt)for(Rt=Ht=Pt;++mt<bt;)(Pt=_t(tt[mt],mt,tt))!=null&&(Rt>Pt&&(Rt=Pt),Ht<Pt&&(Ht=Pt));return[Rt,Ht]},ya=Array.prototype,_a=ya.slice,ei=ya.map,Ea=function(tt){return function(){return tt}},ka=function(tt){return tt},Ga=function(tt,_t,bt){tt=+tt,_t=+_t,bt=(Pt=arguments.length)<2?(_t=tt,tt=0,1):Pt<3?1:+bt;for(var mt=-1,Pt=Math.max(0,Math.ceil((_t-tt)/bt))|0,Rt=new Array(Pt);++mt<Pt;)Rt[mt]=tt+mt*bt;return Rt},Ii=Math.sqrt(50),Ia=Math.sqrt(10),yo=Math.sqrt(2),zs=function(tt,_t,bt){var mt,Pt=-1,Rt,Ht,ge;if(_t=+_t,tt=+tt,bt=+bt,tt===_t&&bt>0)return[tt];if((mt=_t<tt)&&(Rt=tt,tt=_t,_t=Rt),(ge=Ts(tt,_t,bt))===0||!isFinite(ge))return[];if(ge>0)for(tt=Math.ceil(tt/ge),_t=Math.floor(_t/ge),Ht=new Array(Rt=Math.ceil(_t-tt+1));++Pt<Rt;)Ht[Pt]=(tt+Pt)*ge;else for(tt=Math.floor(tt*ge),_t=Math.ceil(_t*ge),Ht=new Array(Rt=Math.ceil(tt-_t+1));++Pt<Rt;)Ht[Pt]=(tt-Pt)/ge;return mt&&Ht.reverse(),Ht};function Ts(tt,_t,bt){var mt=(_t-tt)/Math.max(0,bt),Pt=Math.floor(Math.log(mt)/Math.LN10),Rt=mt/Math.pow(10,Pt);return Pt>=0?(Rt>=Ii?10:Rt>=Ia?5:Rt>=yo?2:1)*Math.pow(10,Pt):-Math.pow(10,-Pt)/(Rt>=Ii?10:Rt>=Ia?5:Rt>=yo?2:1)}function el(tt,_t,bt){var mt=Math.abs(_t-tt)/Math.max(0,bt),Pt=Math.pow(10,Math.floor(Math.log(mt)/Math.LN10)),Rt=mt/Pt;return Rt>=Ii?Pt*=10:Rt>=Ia?Pt*=5:Rt>=yo&&(Pt*=2),_t<tt?-Pt:Pt}var Mu=function(tt){return Math.ceil(Math.log(tt.length)/Math.LN2)+1},j=function(){var tt=ka,_t=Sa,bt=Mu;function mt(Pt){var Rt,Ht=Pt.length,ge,Be=new Array(Ht);for(Rt=0;Rt<Ht;++Rt)Be[Rt]=tt(Pt[Rt],Rt,Pt);var Qe=_t(Be),Bn=Qe[0],ur=Qe[1],Kr=bt(Be,Bn,ur);Array.isArray(Kr)||(Kr=el(Bn,ur,Kr),Kr=Ga(Math.ceil(Bn/Kr)*Kr,ur,Kr));for(var si=Kr.length;Kr[0]<=Bn;)Kr.shift(),--si;for(;Kr[si-1]>ur;)Kr.pop(),--si;var zi=new Array(si+1),Ki;for(Rt=0;Rt<=si;++Rt)Ki=zi[Rt]=[],Ki.x0=Rt>0?Kr[Rt-1]:Bn,Ki.x1=Rt<si?Kr[Rt]:ur;for(Rt=0;Rt<Ht;++Rt)ge=Be[Rt],Bn<=ge&&ge<=ur&&zi[mr(Kr,ge,0,si)].push(Pt[Rt]);return zi}return mt.value=function(Pt){return arguments.length?(tt=typeof Pt=="function"?Pt:Ea(Pt),mt):tt},mt.domain=function(Pt){return arguments.length?(_t=typeof Pt=="function"?Pt:Ea([Pt[0],Pt[1]]),mt):_t},mt.thresholds=function(Pt){return arguments.length?(bt=typeof Pt=="function"?Pt:Array.isArray(Pt)?Ea(_a.call(Pt)):Ea(Pt),mt):bt},mt},I=function(tt,_t,bt){if(bt==null&&(bt=fi),!!(mt=tt.length)){if((_t=+_t)<=0||mt<2)return+bt(tt[0],0,tt);if(_t>=1)return+bt(tt[mt-1],mt-1,tt);var mt,Pt=(mt-1)*_t,Rt=Math.floor(Pt),Ht=+bt(tt[Rt],Rt,tt),ge=+bt(tt[Rt+1],Rt+1,tt);return Ht+(ge-Ht)*(Pt-Rt)}},w=function(tt,_t,bt){return tt=ei.call(tt,fi).sort(fn),Math.ceil((bt-_t)/(2*(I(tt,.75)-I(tt,.25))*Math.pow(tt.length,-1/3)))},B=function(tt,_t,bt){return Math.ceil((bt-_t)/(3.5*Ri(tt)*Math.pow(tt.length,-1/3)))},D=function(tt,_t){var bt=tt.length,mt=-1,Pt,Rt;if(_t==null){for(;++mt<bt;)if((Pt=tt[mt])!=null&&Pt>=Pt)for(Rt=Pt;++mt<bt;)(Pt=tt[mt])!=null&&Pt>Rt&&(Rt=Pt)}else for(;++mt<bt;)if((Pt=_t(tt[mt],mt,tt))!=null&&Pt>=Pt)for(Rt=Pt;++mt<bt;)(Pt=_t(tt[mt],mt,tt))!=null&&Pt>Rt&&(Rt=Pt);return Rt},W=function(tt,_t){var bt=tt.length,mt=bt,Pt=-1,Rt,Ht=0;if(_t==null)for(;++Pt<bt;)isNaN(Rt=fi(tt[Pt]))?--mt:Ht+=Rt;else for(;++Pt<bt;)isNaN(Rt=fi(_t(tt[Pt],Pt,tt)))?--mt:Ht+=Rt;if(mt)return Ht/mt},q=function(tt,_t){var bt=tt.length,mt=-1,Pt,Rt=[];if(_t==null)for(;++mt<bt;)isNaN(Pt=fi(tt[mt]))||Rt.push(Pt);else for(;++mt<bt;)isNaN(Pt=fi(_t(tt[mt],mt,tt)))||Rt.push(Pt);return I(Rt.sort(fn),.5)},st=function(tt){for(var _t=tt.length,bt,mt=-1,Pt=0,Rt,Ht;++mt<_t;)Pt+=tt[mt].length;for(Rt=new Array(Pt);--_t>=0;)for(Ht=tt[_t],bt=Ht.length;--bt>=0;)Rt[--Pt]=Ht[bt];return Rt},Ct=function(tt,_t){var bt=tt.length,mt=-1,Pt,Rt;if(_t==null){for(;++mt<bt;)if((Pt=tt[mt])!=null&&Pt>=Pt)for(Rt=Pt;++mt<bt;)(Pt=tt[mt])!=null&&Rt>Pt&&(Rt=Pt)}else for(;++mt<bt;)if((Pt=_t(tt[mt],mt,tt))!=null&&Pt>=Pt)for(Rt=Pt;++mt<bt;)(Pt=_t(tt[mt],mt,tt))!=null&&Rt>Pt&&(Rt=Pt);return Rt},wt=function(tt,_t){for(var bt=_t.length,mt=new Array(bt);bt--;)mt[bt]=tt[_t[bt]];return mt},Ut=function(tt,_t){if(!!(bt=tt.length)){var bt,mt=0,Pt=0,Rt,Ht=tt[Pt];for(_t==null&&(_t=fn);++mt<bt;)(_t(Rt=tt[mt],Ht)<0||_t(Ht,Ht)!==0)&&(Ht=Rt,Pt=mt);if(_t(Ht,Ht)===0)return Pt}},Zt=function(tt,_t,bt){for(var mt=(bt==null?tt.length:bt)-(_t=_t==null?0:+_t),Pt,Rt;mt;)Rt=Math.random()*mt--|0,Pt=tt[mt+_t],tt[mt+_t]=tt[Rt+_t],tt[Rt+_t]=Pt;return tt},qt=function(tt,_t){var bt=tt.length,mt=-1,Pt,Rt=0;if(_t==null)for(;++mt<bt;)(Pt=+tt[mt])&&(Rt+=Pt);else for(;++mt<bt;)(Pt=+_t(tt[mt],mt,tt))&&(Rt+=Pt);return Rt},he=function(tt){if(!(Rt=tt.length))return[];for(var _t=-1,bt=Ct(tt,me),mt=new Array(bt);++_t<bt;)for(var Pt=-1,Rt,Ht=mt[_t]=new Array(Rt);++Pt<Rt;)Ht[Pt]=tt[Pt][_t];return mt};function me(tt){return tt.length}var De=function(){return he(arguments)};function Ae(tt,_t){switch(arguments.length){case 0:break;case 1:this.range(tt);break;default:this.range(_t).domain(tt);break}return this}function Ue(tt,_t){switch(arguments.length){case 0:break;case 1:this.interpolator(tt);break;default:this.interpolator(_t).domain(tt);break}return this}var qe="$";function rn(){}rn.prototype=Xn.prototype={constructor:rn,has:function(_t){return qe+_t in this},get:function(_t){return this[qe+_t]},set:function(_t,bt){return this[qe+_t]=bt,this},remove:function(_t){var bt=qe+_t;return bt in this&&delete this[bt]},clear:function(){for(var _t in this)_t[0]===qe&&delete this[_t]},keys:function(){var _t=[];for(var bt in this)bt[0]===qe&&_t.push(bt.slice(1));return _t},values:function(){var _t=[];for(var bt in this)bt[0]===qe&&_t.push(this[bt]);return _t},entries:function(){var _t=[];for(var bt in this)bt[0]===qe&&_t.push({key:bt.slice(1),value:this[bt]});return _t},size:function(){var _t=0;for(var bt in this)bt[0]===qe&&++_t;return _t},empty:function(){for(var _t in this)if(_t[0]===qe)return!1;return!0},each:function(_t){for(var bt in this)bt[0]===qe&&_t(this[bt],bt.slice(1),this)}};function Xn(tt,_t){var bt=new rn;if(tt instanceof rn)tt.each(function(ge,Be){bt.set(Be,ge)});else if(Array.isArray(tt)){var mt=-1,Pt=tt.length,Rt;if(_t==null)for(;++mt<Pt;)bt.set(mt,tt[mt]);else for(;++mt<Pt;)bt.set(_t(Rt=tt[mt],mt,tt),Rt)}else if(tt)for(var Ht in tt)bt.set(Ht,tt[Ht]);return bt}var Un=Xn,gr=function(){var tt=[],_t=[],bt,mt,Pt;function Rt(ge,Be,Qe,Bn){if(Be>=tt.length)return bt!=null&&ge.sort(bt),mt!=null?mt(ge):ge;for(var ur=-1,Kr=ge.length,si=tt[Be++],zi,Ki,ra=Un(),Qa,zo=Qe();++ur<Kr;)(Qa=ra.get(zi=si(Ki=ge[ur])+""))?Qa.push(Ki):ra.set(zi,[Ki]);return ra.each(function(xs,os){Bn(zo,os,Rt(xs,Be,Qe,Bn))}),zo}function Ht(ge,Be){if(++Be>tt.length)return ge;var Qe,Bn=_t[Be-1];return mt!=null&&Be>=tt.length?Qe=ge.entries():(Qe=[],ge.each(function(ur,Kr){Qe.push({key:Kr,values:Ht(ur,Be)})})),Bn!=null?Qe.sort(function(ur,Kr){return Bn(ur.key,Kr.key)}):Qe}return Pt={object:function(Be){return Rt(Be,0,Mr,Qr)},map:function(Be){return Rt(Be,0,Vr,_i)},entries:function(Be){return Ht(Rt(Be,0,Vr,_i),0)},key:function(Be){return tt.push(Be),Pt},sortKeys:function(Be){return _t[tt.length-1]=Be,Pt},sortValues:function(Be){return bt=Be,Pt},rollup:function(Be){return mt=Be,Pt}}};function Mr(){return{}}function Qr(tt,_t,bt){tt[_t]=bt}function Vr(){return Un()}function _i(tt,_t,bt){tt.set(_t,bt)}function Di(){}var Wi=Un.prototype;Di.prototype=Xi.prototype={constructor:Di,has:Wi.has,add:function(_t){return _t+="",this[qe+_t]=_t,this},remove:Wi.remove,clear:Wi.clear,values:Wi.keys,size:Wi.size,empty:Wi.empty,each:Wi.each};function Xi(tt,_t){var bt=new Di;if(tt instanceof Di)tt.each(function(Rt){bt.add(Rt)});else if(tt){var mt=-1,Pt=tt.length;if(_t==null)for(;++mt<Pt;)bt.add(tt[mt]);else for(;++mt<Pt;)bt.add(_t(tt[mt],mt,tt))}return bt}var La=Xi,Na=function(tt){var _t=[];for(var bt in tt)_t.push(bt);return _t},Vi=function(tt){var _t=[];for(var bt in tt)_t.push(tt[bt]);return _t},Ma=function(tt){var _t=[];for(var bt in tt)_t.push({key:bt,value:tt[bt]});return _t},xa=Array.prototype,Hi=xa.map,ha=xa.slice,aa={name:"implicit"};function Ca(){var tt=Un(),_t=[],bt=[],mt=aa;function Pt(Rt){var Ht=Rt+"",ge=tt.get(Ht);if(!ge){if(mt!==aa)return mt;tt.set(Ht,ge=_t.push(Rt))}return bt[(ge-1)%bt.length]}return Pt.domain=function(Rt){if(!arguments.length)return _t.slice();_t=[],tt=Un();for(var Ht=-1,ge=Rt.length,Be,Qe;++Ht<ge;)tt.has(Qe=(Be=Rt[Ht])+"")||tt.set(Qe,_t.push(Be));return Pt},Pt.range=function(Rt){return arguments.length?(bt=ha.call(Rt),Pt):bt.slice()},Pt.unknown=function(Rt){return arguments.length?(mt=Rt,Pt):mt},Pt.copy=function(){return Ca(_t,bt).unknown(mt)},Ae.apply(Pt,arguments),Pt}function Va(){var tt=Ca().unknown(void 0),_t=tt.domain,bt=tt.range,mt=[0,1],Pt,Rt,Ht=!1,ge=0,Be=0,Qe=.5;delete tt.unknown;function Bn(){var ur=_t().length,Kr=mt[1]<mt[0],si=mt[Kr-0],zi=mt[1-Kr];Pt=(zi-si)/Math.max(1,ur-ge+Be*2),Ht&&(Pt=Math.floor(Pt)),si+=(zi-si-Pt*(ur-ge))*Qe,Rt=Pt*(1-ge),Ht&&(si=Math.round(si),Rt=Math.round(Rt));var Ki=Ga(ur).map(function(ra){return si+Pt*ra});return bt(Kr?Ki.reverse():Ki)}return tt.domain=function(ur){return arguments.length?(_t(ur),Bn()):_t()},tt.range=function(ur){return arguments.length?(mt=[+ur[0],+ur[1]],Bn()):mt.slice()},tt.rangeRound=function(ur){return mt=[+ur[0],+ur[1]],Ht=!0,Bn()},tt.bandwidth=function(){return Rt},tt.step=function(){return Pt},tt.round=function(ur){return arguments.length?(Ht=!!ur,Bn()):Ht},tt.padding=function(ur){return arguments.length?(ge=Math.min(1,Be=+ur),Bn()):ge},tt.paddingInner=function(ur){return arguments.length?(ge=Math.min(1,ur),Bn()):ge},tt.paddingOuter=function(ur){return arguments.length?(Be=+ur,Bn()):Be},tt.align=function(ur){return arguments.length?(Qe=Math.max(0,Math.min(1,ur)),Bn()):Qe},tt.copy=function(){return Va(_t(),mt).round(Ht).paddingInner(ge).paddingOuter(Be).align(Qe)},Ae.apply(Bn(),arguments)}function As(tt){var _t=tt.copy;return tt.padding=tt.paddingOuter,delete tt.paddingInner,delete tt.paddingOuter,tt.copy=function(){return As(_t())},tt}function Rs(){return As(Va.apply(null,arguments).paddingInner(1))}var gs=R("FmoU");function fs(tt,_t,bt,mt,Pt){var Rt=tt*tt,Ht=Rt*tt;return((1-3*tt+3*Rt-Ht)*_t+(4-6*Rt+3*Ht)*bt+(1+3*tt+3*Rt-3*Ht)*mt+Ht*Pt)/6}var Qs=function(tt){var _t=tt.length-1;return function(bt){var mt=bt<=0?bt=0:bt>=1?(bt=1,_t-1):Math.floor(bt*_t),Pt=tt[mt],Rt=tt[mt+1],Ht=mt>0?tt[mt-1]:2*Pt-Rt,ge=mt<_t-1?tt[mt+2]:2*Rt-Pt;return fs((bt-mt/_t)*_t,Ht,Pt,Rt,ge)}},_l=function(tt){var _t=tt.length;return function(bt){var mt=Math.floor(((bt%=1)<0?++bt:bt)*_t),Pt=tt[(mt+_t-1)%_t],Rt=tt[mt%_t],Ht=tt[(mt+1)%_t],ge=tt[(mt+2)%_t];return fs((bt-mt/_t)*_t,Pt,Rt,Ht,ge)}},du=function(tt){return function(){return tt}};function uc(tt,_t){return function(bt){return tt+bt*_t}}function Mc(tt,_t,bt){return tt=Math.pow(tt,bt),_t=Math.pow(_t,bt)-tt,bt=1/bt,function(mt){return Math.pow(tt+mt*_t,bt)}}function Il(tt,_t){var bt=_t-tt;return bt?uc(tt,bt>180||bt<-180?bt-360*Math.round(bt/360):bt):du(isNaN(tt)?_t:tt)}function ql(tt){return(tt=+tt)==1?Ic:function(_t,bt){return bt-_t?Mc(_t,bt,tt):du(isNaN(_t)?bt:_t)}}function Ic(tt,_t){var bt=_t-tt;return bt?uc(tt,bt):du(isNaN(tt)?_t:tt)}var qc=function tt(_t){var bt=ql(_t);function mt(Pt,Rt){var Ht=bt((Pt=Object(gs.b)(Pt)).r,(Rt=Object(gs.b)(Rt)).r),ge=bt(Pt.g,Rt.g),Be=bt(Pt.b,Rt.b),Qe=Ic(Pt.opacity,Rt.opacity);return function(Bn){return Pt.r=Ht(Bn),Pt.g=ge(Bn),Pt.b=Be(Bn),Pt.opacity=Qe(Bn),Pt+""}}return mt.gamma=tt,mt}(1);function Pc(tt){return function(_t){var bt=_t.length,mt=new Array(bt),Pt=new Array(bt),Rt=new Array(bt),Ht,ge;for(Ht=0;Ht<bt;++Ht)ge=Object(gs.b)(_t[Ht]),mt[Ht]=ge.r||0,Pt[Ht]=ge.g||0,Rt[Ht]=ge.b||0;return mt=tt(mt),Pt=tt(Pt),Rt=tt(Rt),ge.opacity=1,function(Be){return ge.r=mt(Be),ge.g=Pt(Be),ge.b=Rt(Be),ge+""}}}var Zc=Pc(Qs),of=Pc(_l),vc=function(tt,_t){_t||(_t=[]);var bt=tt?Math.min(_t.length,tt.length):0,mt=_t.slice(),Pt;return function(Rt){for(Pt=0;Pt<bt;++Pt)mt[Pt]=tt[Pt]*(1-Rt)+_t[Pt]*Rt;return mt}};function kc(tt){return ArrayBuffer.isView(tt)&&!(tt instanceof DataView)}var bc=function(tt,_t){return(kc(_t)?vc:au)(tt,_t)};function au(tt,_t){var bt=_t?_t.length:0,mt=tt?Math.min(bt,tt.length):0,Pt=new Array(mt),Rt=new Array(bt),Ht;for(Ht=0;Ht<mt;++Ht)Pt[Ht]=kl(tt[Ht],_t[Ht]);for(;Ht<bt;++Ht)Rt[Ht]=_t[Ht];return function(ge){for(Ht=0;Ht<mt;++Ht)Rt[Ht]=Pt[Ht](ge);return Rt}}var tc=function(tt,_t){var bt=new Date;return tt=+tt,_t=+_t,function(mt){return bt.setTime(tt*(1-mt)+_t*mt),bt}},Tc=function(tt,_t){return tt=+tt,_t=+_t,function(bt){return tt*(1-bt)+_t*bt}},ec=function(tt,_t){var bt={},mt={},Pt;(tt===null||typeof tt!="object")&&(tt={}),(_t===null||typeof _t!="object")&&(_t={});for(Pt in _t)Pt in tt?bt[Pt]=kl(tt[Pt],_t[Pt]):mt[Pt]=_t[Pt];return function(Rt){for(Pt in bt)mt[Pt]=bt[Pt](Rt);return mt}},Pu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vu=new RegExp(Pu.source,"g");function cl(tt){return function(){return tt}}function Ll(tt){return function(_t){return tt(_t)+""}}var fl=function(tt,_t){var bt=Pu.lastIndex=vu.lastIndex=0,mt,Pt,Rt,Ht=-1,ge=[],Be=[];for(tt=tt+"",_t=_t+"";(mt=Pu.exec(tt))&&(Pt=vu.exec(_t));)(Rt=Pt.index)>bt&&(Rt=_t.slice(bt,Rt),ge[Ht]?ge[Ht]+=Rt:ge[++Ht]=Rt),(mt=mt[0])===(Pt=Pt[0])?ge[Ht]?ge[Ht]+=Pt:ge[++Ht]=Pt:(ge[++Ht]=null,Be.push({i:Ht,x:Tc(mt,Pt)})),bt=vu.lastIndex;return bt<_t.length&&(Rt=_t.slice(bt),ge[Ht]?ge[Ht]+=Rt:ge[++Ht]=Rt),ge.length<2?Be[0]?Ll(Be[0].x):cl(_t):(_t=Be.length,function(Qe){for(var Bn=0,ur;Bn<_t;++Bn)ge[(ur=Be[Bn]).i]=ur.x(Qe);return ge.join("")})},kl=function(tt,_t){var bt=typeof _t,mt;return _t==null||bt==="boolean"?du(_t):(bt==="number"?Tc:bt==="string"?(mt=Object(gs.a)(_t))?(_t=mt,qc):fl:_t instanceof gs.a?qc:_t instanceof Date?tc:kc(_t)?vc:Array.isArray(_t)?au:typeof _t.valueOf!="function"&&typeof _t.toString!="function"||isNaN(_t)?ec:Tc)(tt,_t)},Gc=function(tt,_t){return tt=+tt,_t=+_t,function(bt){return Math.round(tt*(1-bt)+_t*bt)}},tf=function(tt){return function(){return tt}},Vc=function(tt){return+tt},lc=[0,1];function hl(tt){return tt}function Ec(tt,_t){return(_t-=tt=+tt)?function(bt){return(bt-tt)/_t}:tf(isNaN(_t)?NaN:.5)}function Kl(tt){var _t=tt[0],bt=tt[tt.length-1],mt;return _t>bt&&(mt=_t,_t=bt,bt=mt),function(Pt){return Math.max(_t,Math.min(bt,Pt))}}function dl(tt,_t,bt){var mt=tt[0],Pt=tt[1],Rt=_t[0],Ht=_t[1];return Pt<mt?(mt=Ec(Pt,mt),Rt=bt(Ht,Rt)):(mt=Ec(mt,Pt),Rt=bt(Rt,Ht)),function(ge){return Rt(mt(ge))}}function Jf(tt,_t,bt){var mt=Math.min(tt.length,_t.length)-1,Pt=new Array(mt),Rt=new Array(mt),Ht=-1;for(tt[mt]<tt[0]&&(tt=tt.slice().reverse(),_t=_t.slice().reverse());++Ht<mt;)Pt[Ht]=Ec(tt[Ht],tt[Ht+1]),Rt[Ht]=bt(_t[Ht],_t[Ht+1]);return function(ge){var Be=mr(tt,ge,1,mt)-1;return Rt[Be](Pt[Be](ge))}}function cf(tt,_t){return _t.domain(tt.domain()).range(tt.range()).interpolate(tt.interpolate()).clamp(tt.clamp()).unknown(tt.unknown())}function pf(){var tt=lc,_t=lc,bt=kl,mt,Pt,Rt,Ht=hl,ge,Be,Qe;function Bn(){return ge=Math.min(tt.length,_t.length)>2?Jf:dl,Be=Qe=null,ur}function ur(Kr){return isNaN(Kr=+Kr)?Rt:(Be||(Be=ge(tt.map(mt),_t,bt)))(mt(Ht(Kr)))}return ur.invert=function(Kr){return Ht(Pt((Qe||(Qe=ge(_t,tt.map(mt),Tc)))(Kr)))},ur.domain=function(Kr){return arguments.length?(tt=Hi.call(Kr,Vc),Ht===hl||(Ht=Kl(tt)),Bn()):tt.slice()},ur.range=function(Kr){return arguments.length?(_t=ha.call(Kr),Bn()):_t.slice()},ur.rangeRound=function(Kr){return _t=ha.call(Kr),bt=Gc,Bn()},ur.clamp=function(Kr){return arguments.length?(Ht=Kr?Kl(tt):hl,ur):Ht!==hl},ur.interpolate=function(Kr){return arguments.length?(bt=Kr,Bn()):bt},ur.unknown=function(Kr){return arguments.length?(Rt=Kr,ur):Rt},function(Kr,si){return mt=Kr,Pt=si,Bn()}}function _f(tt,_t){return pf()(tt,_t)}var Gf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gf(tt){if(!(_t=Gf.exec(tt)))throw new Error("invalid format: "+tt);var _t;return new Wc({fill:_t[1],align:_t[2],sign:_t[3],symbol:_t[4],zero:_t[5],width:_t[6],comma:_t[7],precision:_t[8]&&_t[8].slice(1),trim:_t[9],type:_t[10]})}gf.prototype=Wc.prototype;function Wc(tt){this.fill=tt.fill===void 0?" ":tt.fill+"",this.align=tt.align===void 0?">":tt.align+"",this.sign=tt.sign===void 0?"-":tt.sign+"",this.symbol=tt.symbol===void 0?"":tt.symbol+"",this.zero=!!tt.zero,this.width=tt.width===void 0?void 0:+tt.width,this.comma=!!tt.comma,this.precision=tt.precision===void 0?void 0:+tt.precision,this.trim=!!tt.trim,this.type=tt.type===void 0?"":tt.type+""}Wc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var $f=function(tt){return Math.abs(tt=Math.round(tt))>=1e21?tt.toLocaleString("en").replace(/,/g,""):tt.toString(10)};function Ac(tt,_t){if((bt=(tt=_t?tt.toExponential(_t-1):tt.toExponential()).indexOf("e"))<0)return null;var bt,mt=tt.slice(0,bt);return[mt.length>1?mt[0]+mt.slice(2):mt,+tt.slice(bt+1)]}var ef=function(tt){return tt=Ac(Math.abs(tt)),tt?tt[1]:NaN},Kc=function(tt,_t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ef(_t)/3)))*3-ef(Math.abs(tt)))},Mf=function(tt,_t){return function(bt,mt){for(var Pt=bt.length,Rt=[],Ht=0,ge=tt[0],Be=0;Pt>0&&ge>0&&(Be+ge+1>mt&&(ge=Math.max(1,mt-Be)),Rt.push(bt.substring(Pt-=ge,Pt+ge)),!((Be+=ge+1)>mt));)ge=tt[Ht=(Ht+1)%tt.length];return Rt.reverse().join(_t)}},hh=function(tt){return function(_t){return _t.replace(/[0-9]/g,function(bt){return tt[+bt]})}},Qf=function(tt){t:for(var _t=tt.length,bt=1,mt=-1,Pt;bt<_t;++bt)switch(tt[bt]){case".":mt=Pt=bt;break;case"0":mt===0&&(mt=bt),Pt=bt;break;default:if(!+tt[bt])break t;mt>0&&(mt=0);break}return mt>0?tt.slice(0,mt)+tt.slice(Pt+1):tt},Vf,qf=function(tt,_t){var bt=Ac(tt,_t);if(!bt)return tt+"";var mt=bt[0],Pt=bt[1],Rt=Pt-(Vf=Math.max(-8,Math.min(8,Math.floor(Pt/3)))*3)+1,Ht=mt.length;return Rt===Ht?mt:Rt>Ht?mt+new Array(Rt-Ht+1).join("0"):Rt>0?mt.slice(0,Rt)+"."+mt.slice(Rt):"0."+new Array(1-Rt).join("0")+Ac(tt,Math.max(0,_t+Rt-1))[0]},ve=function(tt,_t){var bt=Ac(tt,_t);if(!bt)return tt+"";var mt=bt[0],Pt=bt[1];return Pt<0?"0."+new Array(-Pt).join("0")+mt:mt.length>Pt+1?mt.slice(0,Pt+1)+"."+mt.slice(Pt+1):mt+new Array(Pt-mt.length+2).join("0")},ye={"%":function(_t,bt){return(_t*100).toFixed(bt)},b:function(_t){return Math.round(_t).toString(2)},c:function(_t){return _t+""},d:$f,e:function(_t,bt){return _t.toExponential(bt)},f:function(_t,bt){return _t.toFixed(bt)},g:function(_t,bt){return _t.toPrecision(bt)},o:function(_t){return Math.round(_t).toString(8)},p:function(_t,bt){return ve(_t*100,bt)},r:ve,s:qf,X:function(_t){return Math.round(_t).toString(16).toUpperCase()},x:function(_t){return Math.round(_t).toString(16)}},Gt=function(tt){return tt},Xt=Array.prototype.map,ke=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],un=function(tt){var _t=tt.grouping===void 0||tt.thousands===void 0?Gt:Mf(Xt.call(tt.grouping,Number),tt.thousands+""),bt=tt.currency===void 0?"":tt.currency[0]+"",mt=tt.currency===void 0?"":tt.currency[1]+"",Pt=tt.decimal===void 0?".":tt.decimal+"",Rt=tt.numerals===void 0?Gt:hh(Xt.call(tt.numerals,String)),Ht=tt.percent===void 0?"%":tt.percent+"",ge=tt.minus===void 0?"-":tt.minus+"",Be=tt.nan===void 0?"NaN":tt.nan+"";function Qe(ur){ur=gf(ur);var Kr=ur.fill,si=ur.align,zi=ur.sign,Ki=ur.symbol,ra=ur.zero,Qa=ur.width,zo=ur.comma,xs=ur.precision,os=ur.trim,js=ur.type;js==="n"?(zo=!0,js="g"):ye[js]||(xs===void 0&&(xs=12),os=!0,js="g"),(ra||Kr==="0"&&si==="=")&&(ra=!0,Kr="0",si="=");var Wu=Ki==="$"?bt:Ki==="#"&&/[boxX]/.test(js)?"0"+js.toLowerCase():"",Mo=Ki==="$"?mt:/[%p]/.test(js)?Ht:"",Hu=ye[js],ks=/[defgprs%]/.test(js);xs=xs===void 0?6:/[gprs]/.test(js)?Math.max(1,Math.min(21,xs)):Math.max(0,Math.min(20,xs));function Wl(Uo){var yu=Wu,Pl=Mo,xf,wf,bf;if(js==="c")Pl=Hu(Uo)+Pl,Uo="";else{Uo=+Uo;var Ef=Uo<0||1/Uo<0;if(Uo=isNaN(Uo)?Be:Hu(Math.abs(Uo),xs),os&&(Uo=Qf(Uo)),Ef&&+Uo==0&&zi!=="+"&&(Ef=!1),yu=(Ef?zi==="("?zi:ge:zi==="-"||zi==="("?"":zi)+yu,Pl=(js==="s"?ke[8+Vf/3]:"")+Pl+(Ef&&zi==="("?")":""),ks){for(xf=-1,wf=Uo.length;++xf<wf;)if(bf=Uo.charCodeAt(xf),48>bf||bf>57){Pl=(bf===46?Pt+Uo.slice(xf+1):Uo.slice(xf))+Pl,Uo=Uo.slice(0,xf);break}}}zo&&!ra&&(Uo=_t(Uo,Infinity));var Sf=yu.length+Uo.length+Pl.length,Yc=Sf<Qa?new Array(Qa-Sf+1).join(Kr):"";switch(zo&&ra&&(Uo=_t(Yc+Uo,Yc.length?Qa-Pl.length:Infinity),Yc=""),si){case"<":Uo=yu+Uo+Pl+Yc;break;case"=":Uo=yu+Yc+Uo+Pl;break;case"^":Uo=Yc.slice(0,Sf=Yc.length>>1)+yu+Uo+Pl+Yc.slice(Sf);break;default:Uo=Yc+yu+Uo+Pl;break}return Rt(Uo)}return Wl.toString=function(){return ur+""},Wl}function Bn(ur,Kr){var si=Qe((ur=gf(ur),ur.type="f",ur)),zi=Math.max(-8,Math.min(8,Math.floor(ef(Kr)/3)))*3,Ki=Math.pow(10,-zi),ra=ke[8+zi/3];return function(Qa){return si(Ki*Qa)+ra}}return{format:Qe,formatPrefix:Bn}},Wn,ir,dr;ti({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function ti(tt){return Wn=un(tt),ir=Wn.format,dr=Wn.formatPrefix,Wn}var Ci=function(tt,_t){return tt=Math.abs(tt),_t=Math.abs(_t)-tt,Math.max(0,ef(_t)-ef(tt))+1},Ji=function(tt){return Math.max(0,-ef(Math.abs(tt)))},fa=function(tt,_t,bt,mt){var Pt=el(tt,_t,bt),Rt;switch(mt=gf(mt==null?",f":mt),mt.type){case"s":{var Ht=Math.max(Math.abs(tt),Math.abs(_t));return mt.precision==null&&!isNaN(Rt=Kc(Pt,Ht))&&(mt.precision=Rt),dr(mt,Ht)}case"":case"e":case"g":case"p":case"r":{mt.precision==null&&!isNaN(Rt=Ci(Pt,Math.max(Math.abs(tt),Math.abs(_t))))&&(mt.precision=Rt-(mt.type==="e"));break}case"f":case"%":{mt.precision==null&&!isNaN(Rt=Ji(Pt))&&(mt.precision=Rt-(mt.type==="%")*2);break}}return ir(mt)};function na(tt){var _t=tt.domain;return tt.ticks=function(bt){var mt=_t();return zs(mt[0],mt[mt.length-1],bt==null?10:bt)},tt.tickFormat=function(bt,mt){var Pt=_t();return fa(Pt[0],Pt[Pt.length-1],bt==null?10:bt,mt)},tt.nice=function(bt){bt==null&&(bt=10);var mt=_t(),Pt=0,Rt=mt.length-1,Ht=mt[Pt],ge=mt[Rt],Be;return ge<Ht&&(Be=Ht,Ht=ge,ge=Be,Be=Pt,Pt=Rt,Rt=Be),Be=Ts(Ht,ge,bt),Be>0?(Ht=Math.floor(Ht/Be)*Be,ge=Math.ceil(ge/Be)*Be,Be=Ts(Ht,ge,bt)):Be<0&&(Ht=Math.ceil(Ht*Be)/Be,ge=Math.floor(ge*Be)/Be,Be=Ts(Ht,ge,bt)),Be>0?(mt[Pt]=Math.floor(Ht/Be)*Be,mt[Rt]=Math.ceil(ge/Be)*Be,_t(mt)):Be<0&&(mt[Pt]=Math.ceil(Ht*Be)/Be,mt[Rt]=Math.floor(ge*Be)/Be,_t(mt)),tt},tt}function no(){var tt=_f(hl,hl);return tt.copy=function(){return cf(tt,no())},Ae.apply(tt,arguments),na(tt)}function $a(tt){var _t;function bt(mt){return isNaN(mt=+mt)?_t:mt}return bt.invert=bt,bt.domain=bt.range=function(mt){return arguments.length?(tt=Hi.call(mt,Vc),bt):tt.slice()},bt.unknown=function(mt){return arguments.length?(_t=mt,bt):_t},bt.copy=function(){return $a(tt).unknown(_t)},tt=arguments.length?Hi.call(tt,Vc):[0,1],na(bt)}var Vo=function(tt,_t){tt=tt.slice();var bt=0,mt=tt.length-1,Pt=tt[bt],Rt=tt[mt],Ht;return Rt<Pt&&(Ht=bt,bt=mt,mt=Ht,Ht=Pt,Pt=Rt,Rt=Ht),tt[bt]=_t.floor(Pt),tt[mt]=_t.ceil(Rt),tt};function To(tt){return Math.log(tt)}function pu(tt){return Math.exp(tt)}function lu(tt){return-Math.log(-tt)}function Vu(tt){return-Math.exp(-tt)}function gu(tt){return isFinite(tt)?+("1e"+tt):tt<0?0:tt}function vl(tt){return tt===10?gu:tt===Math.E?Math.exp:function(_t){return Math.pow(tt,_t)}}function Qo(tt){return tt===Math.E?Math.log:tt===10&&Math.log10||tt===2&&Math.log2||(tt=Math.log(tt),function(_t){return Math.log(_t)/tt})}function ms(tt){return function(_t){return-tt(-_t)}}function Us(tt){var _t=tt(To,pu),bt=_t.domain,mt=10,Pt,Rt;function Ht(){return Pt=Qo(mt),Rt=vl(mt),bt()[0]<0?(Pt=ms(Pt),Rt=ms(Rt),tt(lu,Vu)):tt(To,pu),_t}return _t.base=function(ge){return arguments.length?(mt=+ge,Ht()):mt},_t.domain=function(ge){return arguments.length?(bt(ge),Ht()):bt()},_t.ticks=function(ge){var Be=bt(),Qe=Be[0],Bn=Be[Be.length-1],ur;(ur=Bn<Qe)&&(Kr=Qe,Qe=Bn,Bn=Kr);var Kr=Pt(Qe),si=Pt(Bn),zi,Ki,ra,Qa=ge==null?10:+ge,zo=[];if(!(mt%1)&&si-Kr<Qa){if(Kr=Math.round(Kr)-1,si=Math.round(si)+1,Qe>0){for(;Kr<si;++Kr)for(Ki=1,zi=Rt(Kr);Ki<mt;++Ki)if(ra=zi*Ki,!(ra<Qe)){if(ra>Bn)break;zo.push(ra)}}else for(;Kr<si;++Kr)for(Ki=mt-1,zi=Rt(Kr);Ki>=1;--Ki)if(ra=zi*Ki,!(ra<Qe)){if(ra>Bn)break;zo.push(ra)}}else zo=zs(Kr,si,Math.min(si-Kr,Qa)).map(Rt);return ur?zo.reverse():zo},_t.tickFormat=function(ge,Be){if(Be==null&&(Be=mt===10?".0e":","),typeof Be!="function"&&(Be=ir(Be)),ge===Infinity)return Be;ge==null&&(ge=10);var Qe=Math.max(1,mt*ge/_t.ticks().length);return function(Bn){var ur=Bn/Rt(Math.round(Pt(Bn)));return ur*mt<mt-.5&&(ur*=mt),ur<=Qe?Be(Bn):""}},_t.nice=function(){return bt(Vo(bt(),{floor:function(Be){return Rt(Math.floor(Pt(Be)))},ceil:function(Be){return Rt(Math.ceil(Pt(Be)))}}))},_t}function Tu(){var tt=Us(pf()).domain([1,10]);return tt.copy=function(){return cf(tt,Tu()).base(tt.base())},Ae.apply(tt,arguments),tt}function pl(tt){return function(_t){return Math.sign(_t)*Math.log1p(Math.abs(_t/tt))}}function Gl(tt){return function(_t){return Math.sign(_t)*Math.expm1(Math.abs(_t))*tt}}function Lc(tt){var _t=1,bt=tt(pl(_t),Gl(_t));return bt.constant=function(mt){return arguments.length?tt(pl(_t=+mt),Gl(_t)):_t},na(bt)}function jc(){var tt=Lc(pf());return tt.copy=function(){return cf(tt,jc()).constant(tt.constant())},Ae.apply(tt,arguments)}function Bc(tt){return function(_t){return _t<0?-Math.pow(-_t,tt):Math.pow(_t,tt)}}function If(tt){return tt<0?-Math.sqrt(-tt):Math.sqrt(tt)}function Lf(tt){return tt<0?-tt*tt:tt*tt}function Wf(tt){var _t=tt(hl,hl),bt=1;function mt(){return bt===1?tt(hl,hl):bt===.5?tt(If,Lf):tt(Bc(bt),Bc(1/bt))}return _t.exponent=function(Pt){return arguments.length?(bt=+Pt,mt()):bt},na(_t)}function Rf(){var tt=Wf(pf());return tt.copy=function(){return cf(tt,Rf()).exponent(tt.exponent())},Ae.apply(tt,arguments),tt}function Fh(){return Rf.apply(null,arguments).exponent(.5)}function Rc(){var tt=[],_t=[],bt=[],mt;function Pt(){var Ht=0,ge=Math.max(1,_t.length);for(bt=new Array(ge-1);++Ht<ge;)bt[Ht-1]=I(tt,Ht/ge);return Rt}function Rt(Ht){return isNaN(Ht=+Ht)?mt:_t[mr(bt,Ht)]}return Rt.invertExtent=function(Ht){var ge=_t.indexOf(Ht);return ge<0?[NaN,NaN]:[ge>0?bt[ge-1]:tt[0],ge<bt.length?bt[ge]:tt[tt.length-1]]},Rt.domain=function(Ht){if(!arguments.length)return tt.slice();tt=[];for(var ge=0,Be=Ht.length,Qe;ge<Be;++ge)Qe=Ht[ge],Qe!=null&&!isNaN(Qe=+Qe)&&tt.push(Qe);return tt.sort(fn),Pt()},Rt.range=function(Ht){return arguments.length?(_t=ha.call(Ht),Pt()):_t.slice()},Rt.unknown=function(Ht){return arguments.length?(mt=Ht,Rt):mt},Rt.quantiles=function(){return bt.slice()},Rt.copy=function(){return Rc().domain(tt).range(_t).unknown(mt)},Ae.apply(Rt,arguments)}function mf(){var tt=0,_t=1,bt=1,mt=[.5],Pt=[0,1],Rt;function Ht(Be){return Be<=Be?Pt[mr(mt,Be,0,bt)]:Rt}function ge(){var Be=-1;for(mt=new Array(bt);++Be<bt;)mt[Be]=((Be+1)*_t-(Be-bt)*tt)/(bt+1);return Ht}return Ht.domain=function(Be){return arguments.length?(tt=+Be[0],_t=+Be[1],ge()):[tt,_t]},Ht.range=function(Be){return arguments.length?(bt=(Pt=ha.call(Be)).length-1,ge()):Pt.slice()},Ht.invertExtent=function(Be){var Qe=Pt.indexOf(Be);return Qe<0?[NaN,NaN]:Qe<1?[tt,mt[0]]:Qe>=bt?[mt[bt-1],_t]:[mt[Qe-1],mt[Qe]]},Ht.unknown=function(Be){return arguments.length&&(Rt=Be),Ht},Ht.thresholds=function(){return mt.slice()},Ht.copy=function(){return mf().domain([tt,_t]).range(Pt).unknown(Rt)},Ae.apply(na(Ht),arguments)}function nf(){var tt=[.5],_t=[0,1],bt,mt=1;function Pt(Rt){return Rt<=Rt?_t[mr(tt,Rt,0,mt)]:bt}return Pt.domain=function(Rt){return arguments.length?(tt=ha.call(Rt),mt=Math.min(tt.length,_t.length-1),Pt):tt.slice()},Pt.range=function(Rt){return arguments.length?(_t=ha.call(Rt),mt=Math.min(tt.length,_t.length-1),Pt):_t.slice()},Pt.invertExtent=function(Rt){var Ht=_t.indexOf(Rt);return[tt[Ht-1],tt[Ht]]},Pt.unknown=function(Rt){return arguments.length?(bt=Rt,Pt):bt},Pt.copy=function(){return nf().domain(tt).range(_t).unknown(bt)},Ae.apply(Pt,arguments)}var Hc=new Date,sf=new Date;function cu(tt,_t,bt,mt){function Pt(Rt){return tt(Rt=arguments.length===0?new Date:new Date(+Rt)),Rt}return Pt.floor=function(Rt){return tt(Rt=new Date(+Rt)),Rt},Pt.ceil=function(Rt){return tt(Rt=new Date(Rt-1)),_t(Rt,1),tt(Rt),Rt},Pt.round=function(Rt){var Ht=Pt(Rt),ge=Pt.ceil(Rt);return Rt-Ht<ge-Rt?Ht:ge},Pt.offset=function(Rt,Ht){return _t(Rt=new Date(+Rt),Ht==null?1:Math.floor(Ht)),Rt},Pt.range=function(Rt,Ht,ge){var Be=[],Qe;if(Rt=Pt.ceil(Rt),ge=ge==null?1:Math.floor(ge),!(Rt<Ht)||!(ge>0))return Be;do Be.push(Qe=new Date(+Rt)),_t(Rt,ge),tt(Rt);while(Qe<Rt&&Rt<Ht);return Be},Pt.filter=function(Rt){return cu(function(Ht){if(Ht>=Ht)for(;tt(Ht),!Rt(Ht);)Ht.setTime(Ht-1)},function(Ht,ge){if(Ht>=Ht)if(ge<0)for(;++ge<=0;)for(;_t(Ht,-1),!Rt(Ht););else for(;--ge>=0;)for(;_t(Ht,1),!Rt(Ht););})},bt&&(Pt.count=function(Rt,Ht){return Hc.setTime(+Rt),sf.setTime(+Ht),tt(Hc),tt(sf),Math.floor(bt(Hc,sf))},Pt.every=function(Rt){return Rt=Math.floor(Rt),!isFinite(Rt)||!(Rt>0)?null:Rt>1?Pt.filter(mt?function(Ht){return mt(Ht)%Rt==0}:function(Ht){return Pt.count(0,Ht)%Rt==0}):Pt}),Pt}var Pf=cu(function(tt){tt.setMonth(0,1),tt.setHours(0,0,0,0)},function(tt,_t){tt.setFullYear(tt.getFullYear()+_t)},function(tt,_t){return _t.getFullYear()-tt.getFullYear()},function(tt){return tt.getFullYear()});Pf.every=function(tt){return!isFinite(tt=Math.floor(tt))||!(tt>0)?null:cu(function(_t){_t.setFullYear(Math.floor(_t.getFullYear()/tt)*tt),_t.setMonth(0,1),_t.setHours(0,0,0,0)},function(_t,bt){_t.setFullYear(_t.getFullYear()+bt*tt)})};var uf=Pf,Dc=Pf.range,Nc=cu(function(tt){tt.setDate(1),tt.setHours(0,0,0,0)},function(tt,_t){tt.setMonth(tt.getMonth()+_t)},function(tt,_t){return _t.getMonth()-tt.getMonth()+(_t.getFullYear()-tt.getFullYear())*12},function(tt){return tt.getMonth()}),Ml=Nc,Fc=Nc.range,ff=1e3,Tf=6e4,Hf=36e5,th=864e5,pc=6048e5;function hf(tt){return cu(function(_t){_t.setDate(_t.getDate()-(_t.getDay()+7-tt)%7),_t.setHours(0,0,0,0)},function(_t,bt){_t.setDate(_t.getDate()+bt*7)},function(_t,bt){return(bt-_t-(bt.getTimezoneOffset()-_t.getTimezoneOffset())*Tf)/pc})}var eh=hf(0),jt=hf(1),yt=hf(2),K=hf(3),pt=hf(4),It=hf(5),ie=hf(6),ze=eh.range,yn=jt.range,pn=yt.range,Tn=K.range,Nr=pt.range,ce=It.range,be=ie.range,Xe=cu(function(tt){tt.setHours(0,0,0,0)},function(tt,_t){tt.setDate(tt.getDate()+_t)},function(tt,_t){return(_t-tt-(_t.getTimezoneOffset()-tt.getTimezoneOffset())*Tf)/th},function(tt){return tt.getDate()-1}),zn=Xe,lr=Xe.range,vr=cu(function(tt){tt.setTime(tt-tt.getMilliseconds()-tt.getSeconds()*ff-tt.getMinutes()*Tf)},function(tt,_t){tt.setTime(+tt+_t*Hf)},function(tt,_t){return(_t-tt)/Hf},function(tt){return tt.getHours()}),Qn=vr,Jr=vr.range,$r=cu(function(tt){tt.setTime(tt-tt.getMilliseconds()-tt.getSeconds()*ff)},function(tt,_t){tt.setTime(+tt+_t*Tf)},function(tt,_t){return(_t-tt)/Tf},function(tt){return tt.getMinutes()}),ri=$r,ui=$r.range,xi=cu(function(tt){tt.setTime(tt-tt.getMilliseconds())},function(tt,_t){tt.setTime(+tt+_t*ff)},function(tt,_t){return(_t-tt)/ff},function(tt){return tt.getUTCSeconds()}),Ti=xi,pi=xi.range,hi=cu(function(){},function(tt,_t){tt.setTime(+tt+_t)},function(tt,_t){return _t-tt});hi.every=function(tt){return tt=Math.floor(tt),!isFinite(tt)||!(tt>0)?null:tt>1?cu(function(_t){_t.setTime(Math.floor(_t/tt)*tt)},function(_t,bt){_t.setTime(+_t+bt*tt)},function(_t,bt){return(bt-_t)/tt}):hi};var Cr=hi,Lr=hi.range;function bi(tt){return cu(function(_t){_t.setUTCDate(_t.getUTCDate()-(_t.getUTCDay()+7-tt)%7),_t.setUTCHours(0,0,0,0)},function(_t,bt){_t.setUTCDate(_t.getUTCDate()+bt*7)},function(_t,bt){return(bt-_t)/pc})}var ki=bi(0),qr=bi(1),da=bi(2),Li=bi(3),mi=bi(4),Pi=bi(5),wi=bi(6),ca=ki.range,Pa=qr.range,Bi=da.range,Ai=Li.range,yi=mi.range,ia=Pi.range,pa=wi.range,qi=cu(function(tt){tt.setUTCHours(0,0,0,0)},function(tt,_t){tt.setUTCDate(tt.getUTCDate()+_t)},function(tt,_t){return(_t-tt)/th},function(tt){return tt.getUTCDate()-1}),vo=qi,xo=qi.range,Ao=cu(function(tt){tt.setUTCMonth(0,1),tt.setUTCHours(0,0,0,0)},function(tt,_t){tt.setUTCFullYear(tt.getUTCFullYear()+_t)},function(tt,_t){return _t.getUTCFullYear()-tt.getUTCFullYear()},function(tt){return tt.getUTCFullYear()});Ao.every=function(tt){return!isFinite(tt=Math.floor(tt))||!(tt>0)?null:cu(function(_t){_t.setUTCFullYear(Math.floor(_t.getUTCFullYear()/tt)*tt),_t.setUTCMonth(0,1),_t.setUTCHours(0,0,0,0)},function(_t,bt){_t.setUTCFullYear(_t.getUTCFullYear()+bt*tt)})};var Zo=Ao,Vl=Ao.range;function Xl(tt){if(0<=tt.y&&tt.y<100){var _t=new Date(-1,tt.m,tt.d,tt.H,tt.M,tt.S,tt.L);return _t.setFullYear(tt.y),_t}return new Date(tt.y,tt.m,tt.d,tt.H,tt.M,tt.S,tt.L)}function Wo(tt){if(0<=tt.y&&tt.y<100){var _t=new Date(Date.UTC(-1,tt.m,tt.d,tt.H,tt.M,tt.S,tt.L));return _t.setUTCFullYear(tt.y),_t}return new Date(Date.UTC(tt.y,tt.m,tt.d,tt.H,tt.M,tt.S,tt.L))}function Au(tt,_t,bt){return{y:tt,m:_t,d:bt,H:0,M:0,S:0,L:0}}function Cu(tt){var _t=tt.dateTime,bt=tt.date,mt=tt.time,Pt=tt.periods,Rt=tt.days,Ht=tt.shortDays,ge=tt.months,Be=tt.shortMonths,Qe=lo(Pt),Bn=Jl(Pt),ur=lo(Rt),Kr=Jl(Rt),si=lo(Ht),zi=Jl(Ht),Ki=lo(ge),ra=Jl(ge),Qa=lo(Be),zo=Jl(Be),xs={a:Ef,A:Sf,b:Yc,B:id,c:null,d:Mn,e:Mn,f:li,g:zc,G:Xc,H:Jn,I:bn,j:Tr,L:Dr,m:Wr,M:ii,p:ad,q:od,Q:_h,s:zh,S:ji,u:va,U:Ro,V:Ha,w:bo,W:Ds,x:null,X:null,y:jl,Y:dh,Z:bh,"%":Sh},os={a:sd,A:Kh,b:Xh,B:kf,c:null,d:Jc,e:Jc,f:$h,g:nd,G:Eh,H:nh,I:rh,j:Gh,L:ih,m:rc,M:nl,p:ud,q:Jh,Q:_h,s:zh,S:Qh,u:qh,U:td,V:ed,w:Wh,W:ah,x:null,X:null,y:oh,Y:ic,Z:Df,"%":Sh},js={a:Wl,A:Uo,b:yu,B:Pl,c:xf,d:Qi,e:Qi,f:Rr,g:lf,G:gc,H:Sn,I:Sn,j:Lo,L:Or,m:Ur,M:an,p:ks,q:Hr,Q:ar,s:Er,S:nr,u:Wa,U:_o,V:ns,w:Vs,W:fc,x:wf,X:bf,y:lf,Y:gc,Z:Ln,"%":sr};xs.x=Wu(bt,xs),xs.X=Wu(mt,xs),xs.c=Wu(_t,xs),os.x=Wu(bt,os),os.X=Wu(mt,os),os.c=Wu(_t,os);function Wu(po,Ks){return function(qo){var $i=[],Qc=-1,ml=0,af=po.length,Uc,Kf,Nh;for(qo instanceof Date||(qo=new Date(+qo));++Qc<af;)po.charCodeAt(Qc)===37&&($i.push(po.slice(ml,Qc)),(Kf=Rl[Uc=po.charAt(++Qc)])!=null?Uc=po.charAt(++Qc):Kf=Uc==="e"?" ":"0",(Nh=Ks[Uc])&&(Uc=Nh(qo,Kf)),$i.push(Uc),ml=Qc+1);return $i.push(po.slice(ml,Qc)),$i.join("")}}function Mo(po,Ks){return function(qo){var $i=Au(1900,void 0,1),Qc=Hu($i,po,qo+="",0),ml,af;if(Qc!=qo.length)return null;if("Q"in $i)return new Date($i.Q);if("s"in $i)return new Date($i.s*1e3+("L"in $i?$i.L:0));if(Ks&&!("Z"in $i)&&($i.Z=0),"p"in $i&&($i.H=$i.H%12+$i.p*12),$i.m===void 0&&($i.m="q"in $i?$i.q:0),"V"in $i){if($i.V<1||$i.V>53)return null;"w"in $i||($i.w=1),"Z"in $i?(ml=Wo(Au($i.y,0,1)),af=ml.getUTCDay(),ml=af>4||af===0?qr.ceil(ml):qr(ml),ml=vo.offset(ml,($i.V-1)*7),$i.y=ml.getUTCFullYear(),$i.m=ml.getUTCMonth(),$i.d=ml.getUTCDate()+($i.w+6)%7):(ml=Xl(Au($i.y,0,1)),af=ml.getDay(),ml=af>4||af===0?jt.ceil(ml):jt(ml),ml=zn.offset(ml,($i.V-1)*7),$i.y=ml.getFullYear(),$i.m=ml.getMonth(),$i.d=ml.getDate()+($i.w+6)%7)}else("W"in $i||"U"in $i)&&("w"in $i||($i.w="u"in $i?$i.u%7:"W"in $i?1:0),af="Z"in $i?Wo(Au($i.y,0,1)).getUTCDay():Xl(Au($i.y,0,1)).getDay(),$i.m=0,$i.d="W"in $i?($i.w+6)%7+$i.W*7-(af+5)%7:$i.w+$i.U*7-(af+6)%7);return"Z"in $i?($i.H+=$i.Z/100|0,$i.M+=$i.Z%100,Wo($i)):Xl($i)}}function Hu(po,Ks,qo,$i){for(var Qc=0,ml=Ks.length,af=qo.length,Uc,Kf;Qc<ml;){if($i>=af)return-1;if(Uc=Ks.charCodeAt(Qc++),Uc===37){if(Uc=Ks.charAt(Qc++),Kf=js[Uc in Rl?Ks.charAt(Qc++):Uc],!Kf||($i=Kf(po,qo,$i))<0)return-1}else if(Uc!=qo.charCodeAt($i++))return-1}return $i}function ks(po,Ks,qo){var $i=Qe.exec(Ks.slice(qo));return $i?(po.p=Bn[$i[0].toLowerCase()],qo+$i[0].length):-1}function Wl(po,Ks,qo){var $i=si.exec(Ks.slice(qo));return $i?(po.w=zi[$i[0].toLowerCase()],qo+$i[0].length):-1}function Uo(po,Ks,qo){var $i=ur.exec(Ks.slice(qo));return $i?(po.w=Kr[$i[0].toLowerCase()],qo+$i[0].length):-1}function yu(po,Ks,qo){var $i=Qa.exec(Ks.slice(qo));return $i?(po.m=zo[$i[0].toLowerCase()],qo+$i[0].length):-1}function Pl(po,Ks,qo){var $i=Ki.exec(Ks.slice(qo));return $i?(po.m=ra[$i[0].toLowerCase()],qo+$i[0].length):-1}function xf(po,Ks,qo){return Hu(po,_t,Ks,qo)}function wf(po,Ks,qo){return Hu(po,bt,Ks,qo)}function bf(po,Ks,qo){return Hu(po,mt,Ks,qo)}function Ef(po){return Ht[po.getDay()]}function Sf(po){return Rt[po.getDay()]}function Yc(po){return Be[po.getMonth()]}function id(po){return ge[po.getMonth()]}function ad(po){return Pt[+(po.getHours()>=12)]}function od(po){return 1+~~(po.getMonth()/3)}function sd(po){return Ht[po.getUTCDay()]}function Kh(po){return Rt[po.getUTCDay()]}function Xh(po){return Be[po.getUTCMonth()]}function kf(po){return ge[po.getUTCMonth()]}function ud(po){return Pt[+(po.getUTCHours()>=12)]}function Jh(po){return 1+~~(po.getUTCMonth()/3)}return{format:function(Ks){var qo=Wu(Ks+="",xs);return qo.toString=function(){return Ks},qo},parse:function(Ks){var qo=Mo(Ks+="",!1);return qo.toString=function(){return Ks},qo},utcFormat:function(Ks){var qo=Wu(Ks+="",os);return qo.toString=function(){return Ks},qo},utcParse:function(Ks){var qo=Mo(Ks+="",!0);return qo.toString=function(){return Ks},qo}}}var Rl={"-":"",_:" ","0":"0"},Cs=/^\s*\d+/,nc=/^%/,cc=/[\\^$*+?|[\]().{}]/g;function Io(tt,_t,bt){var mt=tt<0?"-":"",Pt=(mt?-tt:tt)+"",Rt=Pt.length;return mt+(Rt<bt?new Array(bt-Rt+1).join(_t)+Pt:Pt)}function Dl(tt){return tt.replace(cc,"\\$&")}function lo(tt){return new RegExp("^(?:"+tt.map(Dl).join("|")+")","i")}function Jl(tt){for(var _t={},bt=-1,mt=tt.length;++bt<mt;)_t[tt[bt].toLowerCase()]=bt;return _t}function Vs(tt,_t,bt){var mt=Cs.exec(_t.slice(bt,bt+1));return mt?(tt.w=+mt[0],bt+mt[0].length):-1}function Wa(tt,_t,bt){var mt=Cs.exec(_t.slice(bt,bt+1));return mt?(tt.u=+mt[0],bt+mt[0].length):-1}function _o(tt,_t,bt){var mt=Cs.exec(_t.slice(bt,bt+2));return mt?(tt.U=+mt[0],bt+mt[0].length):-1}function ns(tt,_t,bt){var mt=Cs.exec(_t.slice(bt,bt+2));return mt?(tt.V=+mt[0],bt+mt[0].length):-1}function fc(tt,_t,bt){var mt=Cs.exec(_t.slice(bt,bt+2));return mt?(tt.W=+mt[0],bt+mt[0].length):-1}function gc(tt,_t,bt){var mt=Cs.exec(_t.slice(bt,bt+4));return mt?(tt.y=+mt[0],bt+mt[0].length):-1}function lf(tt,_t,bt){var mt=Cs.exec(_t.slice(bt,bt+2));return mt?(tt.y=+mt[0]+(+mt[0]>68?1900:2e3),bt+mt[0].length):-1}function Ln(tt,_t,bt){var mt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(_t.slice(bt,bt+6));return mt?(tt.Z=mt[1]?0:-(mt[2]+(mt[3]||"00")),bt+mt[0].length):-1}function Hr(tt,_t,bt){var mt=Cs.exec(_t.slice(bt,bt+1));return mt?(tt.q=mt[0]*3-3,bt+mt[0].length):-1}function Ur(tt,_t,bt){var mt=Cs.exec(_t.slice(bt,bt+2));return mt?(tt.m=mt[0]-1,bt+mt[0].length):-1}function Qi(tt,_t,bt){var mt=Cs.exec(_t.slice(bt,bt+2));return mt?(tt.d=+mt[0],bt+mt[0].length):-1}function Lo(tt,_t,bt){var mt=Cs.exec(_t.slice(bt,bt+3));return mt?(tt.m=0,tt.d=+mt[0],bt+mt[0].length):-1}function Sn(tt,_t,bt){var mt=Cs.exec(_t.slice(bt,bt+2));return mt?(tt.H=+mt[0],bt+mt[0].length):-1}function an(tt,_t,bt){var mt=Cs.exec(_t.slice(bt,bt+2));return mt?(tt.M=+mt[0],bt+mt[0].length):-1}function nr(tt,_t,bt){var mt=Cs.exec(_t.slice(bt,bt+2));return mt?(tt.S=+mt[0],bt+mt[0].length):-1}function Or(tt,_t,bt){var mt=Cs.exec(_t.slice(bt,bt+3));return mt?(tt.L=+mt[0],bt+mt[0].length):-1}function Rr(tt,_t,bt){var mt=Cs.exec(_t.slice(bt,bt+6));return mt?(tt.L=Math.floor(mt[0]/1e3),bt+mt[0].length):-1}function sr(tt,_t,bt){var mt=nc.exec(_t.slice(bt,bt+1));return mt?bt+mt[0].length:-1}function ar(tt,_t,bt){var mt=Cs.exec(_t.slice(bt));return mt?(tt.Q=+mt[0],bt+mt[0].length):-1}function Er(tt,_t,bt){var mt=Cs.exec(_t.slice(bt));return mt?(tt.s=+mt[0],bt+mt[0].length):-1}function Mn(tt,_t){return Io(tt.getDate(),_t,2)}function Jn(tt,_t){return Io(tt.getHours(),_t,2)}function bn(tt,_t){return Io(tt.getHours()%12||12,_t,2)}function Tr(tt,_t){return Io(1+zn.count(uf(tt),tt),_t,3)}function Dr(tt,_t){return Io(tt.getMilliseconds(),_t,3)}function li(tt,_t){return Dr(tt,_t)+"000"}function Wr(tt,_t){return Io(tt.getMonth()+1,_t,2)}function ii(tt,_t){return Io(tt.getMinutes(),_t,2)}function ji(tt,_t){return Io(tt.getSeconds(),_t,2)}function va(tt){var _t=tt.getDay();return _t===0?7:_t}function Ro(tt,_t){return Io(eh.count(uf(tt)-1,tt),_t,2)}function la(tt){var _t=tt.getDay();return _t>=4||_t===0?pt(tt):pt.ceil(tt)}function Ha(tt,_t){return tt=la(tt),Io(pt.count(uf(tt),tt)+(uf(tt).getDay()===4),_t,2)}function bo(tt){return tt.getDay()}function Ds(tt,_t){return Io(jt.count(uf(tt)-1,tt),_t,2)}function jl(tt,_t){return Io(tt.getFullYear()%100,_t,2)}function zc(tt,_t){return tt=la(tt),Io(tt.getFullYear()%100,_t,2)}function dh(tt,_t){return Io(tt.getFullYear()%1e4,_t,4)}function Xc(tt,_t){var bt=tt.getDay();return tt=bt>=4||bt===0?pt(tt):pt.ceil(tt),Io(tt.getFullYear()%1e4,_t,4)}function bh(tt){var _t=tt.getTimezoneOffset();return(_t>0?"-":(_t*=-1,"+"))+Io(_t/60|0,"0",2)+Io(_t%60,"0",2)}function Jc(tt,_t){return Io(tt.getUTCDate(),_t,2)}function nh(tt,_t){return Io(tt.getUTCHours(),_t,2)}function rh(tt,_t){return Io(tt.getUTCHours()%12||12,_t,2)}function Gh(tt,_t){return Io(1+vo.count(Zo(tt),tt),_t,3)}function ih(tt,_t){return Io(tt.getUTCMilliseconds(),_t,3)}function $h(tt,_t){return ih(tt,_t)+"000"}function rc(tt,_t){return Io(tt.getUTCMonth()+1,_t,2)}function nl(tt,_t){return Io(tt.getUTCMinutes(),_t,2)}function Qh(tt,_t){return Io(tt.getUTCSeconds(),_t,2)}function qh(tt){var _t=tt.getUTCDay();return _t===0?7:_t}function td(tt,_t){return Io(ki.count(Zo(tt)-1,tt),_t,2)}function Vh(tt){var _t=tt.getUTCDay();return _t>=4||_t===0?mi(tt):mi.ceil(tt)}function ed(tt,_t){return tt=Vh(tt),Io(mi.count(Zo(tt),tt)+(Zo(tt).getUTCDay()===4),_t,2)}function Wh(tt){return tt.getUTCDay()}function ah(tt,_t){return Io(qr.count(Zo(tt)-1,tt),_t,2)}function oh(tt,_t){return Io(tt.getUTCFullYear()%100,_t,2)}function nd(tt,_t){return tt=Vh(tt),Io(tt.getUTCFullYear()%100,_t,2)}function ic(tt,_t){return Io(tt.getUTCFullYear()%1e4,_t,4)}function Eh(tt,_t){var bt=tt.getUTCDay();return tt=bt>=4||bt===0?mi(tt):mi.ceil(tt),Io(tt.getUTCFullYear()%1e4,_t,4)}function Df(){return"+0000"}function Sh(){return"%"}function _h(tt){return+tt}function zh(tt){return Math.floor(+tt/1e3)}var yf,Af,rd,Hh,cd;mc({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function mc(tt){return yf=Cu(tt),Af=yf.format,rd=yf.parse,Hh=yf.utcFormat,cd=yf.utcParse,yf}var df=1e3,vh=df*60,d=vh*60,p=d*24,C=p*7,N=p*30,$=p*365;function lt(tt){return new Date(tt)}function Tt(tt){return tt instanceof Date?+tt:+new Date(+tt)}function Bt(tt,_t,bt,mt,Pt,Rt,Ht,ge,Be){var Qe=_f(hl,hl),Bn=Qe.invert,ur=Qe.domain,Kr=Be(".%L"),si=Be(":%S"),zi=Be("%I:%M"),Ki=Be("%I %p"),ra=Be("%a %d"),Qa=Be("%b %d"),zo=Be("%B"),xs=Be("%Y"),os=[[Ht,1,df],[Ht,5,5*df],[Ht,15,15*df],[Ht,30,30*df],[Rt,1,vh],[Rt,5,5*vh],[Rt,15,15*vh],[Rt,30,30*vh],[Pt,1,d],[Pt,3,3*d],[Pt,6,6*d],[Pt,12,12*d],[mt,1,p],[mt,2,2*p],[bt,1,C],[_t,1,N],[_t,3,3*N],[tt,1,$]];function js(Mo){return(Ht(Mo)<Mo?Kr:Rt(Mo)<Mo?si:Pt(Mo)<Mo?zi:mt(Mo)<Mo?Ki:_t(Mo)<Mo?bt(Mo)<Mo?ra:Qa:tt(Mo)<Mo?zo:xs)(Mo)}function Wu(Mo,Hu,ks,Wl){if(Mo==null&&(Mo=10),typeof Mo=="number"){var Uo=Math.abs(ks-Hu)/Mo,yu=Yn(function(Pl){return Pl[2]}).right(os,Uo);yu===os.length?(Wl=el(Hu/$,ks/$,Mo),Mo=tt):yu?(yu=os[Uo/os[yu-1][2]<os[yu][2]/Uo?yu-1:yu],Wl=yu[1],Mo=yu[0]):(Wl=Math.max(el(Hu,ks,Mo),1),Mo=ge)}return Wl==null?Mo:Mo.every(Wl)}return Qe.invert=function(Mo){return new Date(Bn(Mo))},Qe.domain=function(Mo){return arguments.length?ur(Hi.call(Mo,Tt)):ur().map(lt)},Qe.ticks=function(Mo,Hu){var ks=ur(),Wl=ks[0],Uo=ks[ks.length-1],yu=Uo<Wl,Pl;return yu&&(Pl=Wl,Wl=Uo,Uo=Pl),Pl=Wu(Mo,Wl,Uo,Hu),Pl=Pl?Pl.range(Wl,Uo+1):[],yu?Pl.reverse():Pl},Qe.tickFormat=function(Mo,Hu){return Hu==null?js:Be(Hu)},Qe.nice=function(Mo,Hu){var ks=ur();return(Mo=Wu(Mo,ks[0],ks[ks.length-1],Hu))?ur(Vo(ks,Mo)):Qe},Qe.copy=function(){return cf(Qe,Bt(tt,_t,bt,mt,Pt,Rt,Ht,ge,Be))},Qe}var Jt=function(){return Ae.apply(Bt(uf,Ml,eh,zn,Qn,ri,Ti,Cr,Af).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},de=cu(function(tt){tt.setUTCDate(1),tt.setUTCHours(0,0,0,0)},function(tt,_t){tt.setUTCMonth(tt.getUTCMonth()+_t)},function(tt,_t){return _t.getUTCMonth()-tt.getUTCMonth()+(_t.getUTCFullYear()-tt.getUTCFullYear())*12},function(tt){return tt.getUTCMonth()}),Le=de,Ge=de.range,He=cu(function(tt){tt.setUTCMinutes(0,0,0)},function(tt,_t){tt.setTime(+tt+_t*Hf)},function(tt,_t){return(_t-tt)/Hf},function(tt){return tt.getUTCHours()}),ln=He,In=He.range,Cn=cu(function(tt){tt.setUTCSeconds(0,0)},function(tt,_t){tt.setTime(+tt+_t*Tf)},function(tt,_t){return(_t-tt)/Tf},function(tt){return tt.getUTCMinutes()}),Zn=Cn,Kn=Cn.range,_r=function(){return Ae.apply(Bt(Zo,Le,ki,vo,ln,Zn,Ti,Cr,Hh).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};function jr(){var tt=0,_t=1,bt,mt,Pt,Rt,Ht=hl,ge=!1,Be;function Qe(Bn){return isNaN(Bn=+Bn)?Be:Ht(Pt===0?.5:(Bn=(Rt(Bn)-bt)*Pt,ge?Math.max(0,Math.min(1,Bn)):Bn))}return Qe.domain=function(Bn){return arguments.length?(bt=Rt(tt=+Bn[0]),mt=Rt(_t=+Bn[1]),Pt=bt===mt?0:1/(mt-bt),Qe):[tt,_t]},Qe.clamp=function(Bn){return arguments.length?(ge=!!Bn,Qe):ge},Qe.interpolator=function(Bn){return arguments.length?(Ht=Bn,Qe):Ht},Qe.unknown=function(Bn){return arguments.length?(Be=Bn,Qe):Be},function(Bn){return Rt=Bn,bt=Bn(tt),mt=Bn(_t),Pt=bt===mt?0:1/(mt-bt),Qe}}function kr(tt,_t){return _t.domain(tt.domain()).interpolator(tt.interpolator()).clamp(tt.clamp()).unknown(tt.unknown())}function vi(){var tt=na(jr()(hl));return tt.copy=function(){return kr(tt,vi())},Ue.apply(tt,arguments)}function oi(){var tt=Us(jr()).domain([1,10]);return tt.copy=function(){return kr(tt,oi()).base(tt.base())},Ue.apply(tt,arguments)}function Ni(){var tt=Lc(jr());return tt.copy=function(){return kr(tt,Ni()).constant(tt.constant())},Ue.apply(tt,arguments)}function Fi(){var tt=Wf(jr());return tt.copy=function(){return kr(tt,Fi()).exponent(tt.exponent())},Ue.apply(tt,arguments)}function oa(){return Fi.apply(null,arguments).exponent(.5)}function ga(){var tt=[],_t=hl;function bt(mt){if(!isNaN(mt=+mt))return _t((mr(tt,mt)-1)/(tt.length-1))}return bt.domain=function(mt){if(!arguments.length)return tt.slice();tt=[];for(var Pt=0,Rt=mt.length,Ht;Pt<Rt;++Pt)Ht=mt[Pt],Ht!=null&&!isNaN(Ht=+Ht)&&tt.push(Ht);return tt.sort(fn),bt},bt.interpolator=function(mt){return arguments.length?(_t=mt,bt):_t},bt.copy=function(){return ga(_t).domain(tt)},Ue.apply(bt,arguments)}function ua(){var tt=0,_t=.5,bt=1,mt,Pt,Rt,Ht,ge,Be=hl,Qe,Bn=!1,ur;function Kr(si){return isNaN(si=+si)?ur:(si=.5+((si=+Qe(si))-Pt)*(si<Pt?Ht:ge),Be(Bn?Math.max(0,Math.min(1,si)):si))}return Kr.domain=function(si){return arguments.length?(mt=Qe(tt=+si[0]),Pt=Qe(_t=+si[1]),Rt=Qe(bt=+si[2]),Ht=mt===Pt?0:.5/(Pt-mt),ge=Pt===Rt?0:.5/(Rt-Pt),Kr):[tt,_t,bt]},Kr.clamp=function(si){return arguments.length?(Bn=!!si,Kr):Bn},Kr.interpolator=function(si){return arguments.length?(Be=si,Kr):Be},Kr.unknown=function(si){return arguments.length?(ur=si,Kr):ur},function(si){return Qe=si,mt=si(tt),Pt=si(_t),Rt=si(bt),Ht=mt===Pt?0:.5/(Pt-mt),ge=Pt===Rt?0:.5/(Rt-Pt),Kr}}function ta(){var tt=na(ua()(hl));return tt.copy=function(){return kr(tt,ta())},Ue.apply(tt,arguments)}function ro(){var tt=Us(ua()).domain([.1,1,10]);return tt.copy=function(){return kr(tt,ro()).base(tt.base())},Ue.apply(tt,arguments)}function wa(){var tt=Lc(ua());return tt.copy=function(){return kr(tt,wa()).constant(tt.constant())},Ue.apply(tt,arguments)}function ma(){var tt=Wf(ua());return tt.copy=function(){return kr(tt,ma()).exponent(tt.exponent())},Ue.apply(tt,arguments)}function rs(){return ma.apply(null,arguments).exponent(.5)}var Fa,Ws,Ya,is,Ru,fu,rl,il,Bl=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,Sc=(Fa={},l()(Fa,V.ScaleTypes.LINEAR,no),l()(Fa,V.ScaleTypes.POWER,Rf),l()(Fa,V.ScaleTypes.LOG,Tu),l()(Fa,V.ScaleTypes.IDENTITY,$a),l()(Fa,V.ScaleTypes.TIME,Jt),l()(Fa,V.ScaleTypes.QUANTILE,Rc),l()(Fa,V.ScaleTypes.QUANTIZE,mf),l()(Fa,V.ScaleTypes.THRESHOLD,nf),l()(Fa,V.ScaleTypes.CAT,Ca),Fa),$l=(Ws=Object(Z.injectable)(),Ya=Object(Z.inject)(V.TYPES.IGlobalConfigService),is=Object(Z.inject)(V.TYPES.ILogService),Ws(Ru=(fu=function(){function tt(){T()(this,tt),v()(this,"configService",rl,this),v()(this,"logger",il,this),this.scaleCache={},this.scaleOptions={}}return t()(tt,[{key:"apply",value:function(bt,mt){var Pt=this,Rt=mt.styleAttributeService;bt.hooks.init.tap("FeatureScalePlugin",function(){Pt.scaleOptions=bt.getScaleOptions();var Ht=Rt.getLayerStyleAttributes(),ge=bt.getSource().data.dataArray;ge.length!==0&&Pt.caculateScalesForAttributes(Ht||[],ge)}),bt.hooks.beforeRenderData.tap("FeatureScalePlugin",function(){Pt.scaleOptions=bt.getScaleOptions();var Ht=Rt.getLayerStyleAttributes(),ge=bt.getSource().data.dataArray;return Pt.caculateScalesForAttributes(Ht||[],ge),bt.layerModelNeedUpdate=!0,!0}),bt.hooks.beforeRender.tap("FeatureScalePlugin",function(){if(!bt.layerModelNeedUpdate){Pt.scaleOptions=bt.getScaleOptions();var Ht=Rt.getLayerStyleAttributes();if(Ht){var ge=bt.getSource().data.dataArray;if(ge.length===0)return;var Be=Ht.filter(function(Qe){return Qe.needRescale});Be.length&&(Pt.caculateScalesForAttributes(Be,ge),Pt.logger.debug("rescale finished"))}}})}},{key:"isNumber",value:function(bt){return!isNaN(parseFloat(bt))&&isFinite(bt)}},{key:"caculateScalesForAttributes",value:function(bt,mt){var Pt=this;this.scaleCache={},bt.forEach(function(Rt){if(Rt.scale){var Ht=Rt.scale,ge=Rt.name;Ht.names=Pt.parseFields(Rt.scale.field||[]);var Be=[];Ht.names.forEach(function(Qe){Be.push(Pt.getOrCreateScale(Qe,Rt,mt))}),Be.some(function(Qe){return Qe.type===V.StyleScaleType.VARIABLE})?(Ht.type=V.StyleScaleType.VARIABLE,Be.forEach(function(Qe){if(!Ht.callback){var Bn;if(Ht.values&&Ht.values!=="text"){var ur;if(((ur=Qe.option)===null||ur===void 0?void 0:ur.type)==="linear"&&Ht.values.length>2){var Kr=Qe.scale.ticks(Ht.values.length);ge==="color"&&Qe.scale.domain(Kr)}Qe.scale.range(Ht.values)}else((Bn=Qe.option)===null||Bn===void 0?void 0:Bn.type)==="cat"&&Qe.scale.range(Qe.option.domain)}})):(Ht.type=V.StyleScaleType.CONSTANT,Ht.defaultValues=Be.map(function(Qe,Bn){return Qe.scale(Ht.names[Bn])})),Ht.scalers=Be.map(function(Qe){return{field:Qe.field,func:Qe.scale,option:Qe.option}}),Rt.needRescale=!1}})}},{key:"getOrCreateScale",value:function(bt,mt,Pt){var Rt,Ht=[bt,mt.name].join("_"),ge=(Rt=mt.scale)===null||Rt===void 0?void 0:Rt.values,Be=this.createScale(bt,mt.name,ge,Pt);return Be}},{key:"parseFields",value:function(bt){return Array.isArray(bt)?bt:nn()(bt)?bt.split("*"):[bt]}},{key:"createScale",value:function(bt,mt,Pt,Rt){var Ht,ge=this.scaleOptions[mt]&&this.scaleOptions[mt].field===bt?this.scaleOptions[mt]:this.scaleOptions[bt],Be={field:bt,scale:void 0,type:V.StyleScaleType.VARIABLE,option:ge};if(!Rt||!Rt.length)return ge&&ge.type?Be.scale=this.createDefaultScale(ge):(Be.scale=Ca([bt]),Be.type=V.StyleScaleType.CONSTANT),Be;var Qe=(Ht=Rt.find(function(Kr){return!vn()(Kr[bt])}))===null||Ht===void 0?void 0:Ht[bt];if(this.isNumber(bt)||vn()(Qe)&&!ge)Be.scale=Ca([bt]),Be.type=V.StyleScaleType.CONSTANT;else{var Bn=ge&&ge.type||this.getDefaultType(Qe);Pt==="text"&&(Bn=V.ScaleTypes.CAT);var ur=this.createDefaultScaleConfig(Bn,bt,Rt);Object.assign(ur,ge),Be.scale=this.createDefaultScale(ur),Be.option=ur}return Be}},{key:"getDefaultType",value:function(bt){var mt=V.ScaleTypes.LINEAR;return typeof bt=="string"&&(mt=Bl.test(bt)?V.ScaleTypes.TIME:V.ScaleTypes.CAT),mt}},{key:"createDefaultScaleConfig",value:function(bt,mt,Pt){var Rt={type:bt},Ht=(Pt==null?void 0:Pt.map(function(ge){return ge[mt]}))||[];return bt!==V.ScaleTypes.CAT&&bt!==V.ScaleTypes.QUANTILE?Rt.domain=Sa(Ht):bt===V.ScaleTypes.CAT?Rt.domain=Fe()(Ht):bt===V.ScaleTypes.QUANTILE&&(Rt.domain=Ht),Rt}},{key:"createDefaultScale",value:function(bt){var mt=bt.type,Pt=bt.domain,Rt=Sc[mt]();return Pt&&Rt.domain(Pt),Rt}}]),tt}(),rl=_()(fu.prototype,"configService",[Ya],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),il=_()(fu.prototype,"logger",[is],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fu))||Ru),Cc,hc,Oc,ac,Nl,oc,ys;function as(tt,_t){var bt=Object.keys(tt);if(Object.getOwnPropertySymbols){var mt=Object.getOwnPropertySymbols(tt);_t&&(mt=mt.filter(function(Pt){return Object.getOwnPropertyDescriptor(tt,Pt).enumerable})),bt.push.apply(bt,mt)}return bt}function mu(tt){for(var _t=1;_t<arguments.length;_t++){var bt=arguments[_t]!=null?arguments[_t]:{};_t%2?as(Object(bt),!0).forEach(function(mt){l()(tt,mt,bt[mt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(bt)):as(Object(bt)).forEach(function(mt){Object.defineProperty(tt,mt,Object.getOwnPropertyDescriptor(bt,mt))})}return tt}var Du=(Cc=Object(Z.injectable)(),hc=Object(Z.inject)(V.TYPES.ICameraService),Oc=Object(Z.inject)(V.TYPES.IRendererService),Cc(ac=(Nl=function(){function tt(){T()(this,tt),v()(this,"cameraService",oc,this),v()(this,"rendererService",ys,this)}return t()(tt,[{key:"apply",value:function(bt){bt.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){bt.models.forEach(function(mt){mt.addUniforms(mu({},bt.layerModel.getAnimateUniforms()))})})}}]),tt}(),oc=_()(Nl.prototype,"cameraService",[hc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ys=_()(Nl.prototype,"rendererService",[Oc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nl))||ac),wc,ju,gl=(wc=Object(Z.injectable)(),wc(ju=function(){function tt(){T()(this,tt)}return t()(tt,[{key:"apply",value:function(bt){bt.hooks.init.tap("LayerModelPlugin",function(){bt.prepareBuildModel(),bt.buildModels(),bt.styleNeedUpdate=!1}),bt.hooks.beforeRenderData.tap("DataSourcePlugin",function(){return bt.prepareBuildModel(),bt.clearModels(),bt.buildModels(),bt.layerModelNeedUpdate=!1,!1})}}]),tt}())||ju),_c,hs,jf=(_c=Object(Z.injectable)(),_c(hs=function(){function tt(){T()(this,tt)}return t()(tt,[{key:"apply",value:function(bt){bt.hooks.afterInit.tap("LayerStylePlugin",function(){bt.updateLayerConfig({});var mt=bt.getLayerConfig(),Pt=mt.autoFit,Rt=mt.fitBoundsOptions;Pt&&setTimeout(function(){bt.fitBounds(Rt)},100)})}}]),tt}())||hs),rf,vf;function $c(tt,_t){var bt=Object.keys(tt);if(Object.getOwnPropertySymbols){var mt=Object.getOwnPropertySymbols(tt);_t&&(mt=mt.filter(function(Pt){return Object.getOwnPropertyDescriptor(tt,Pt).enumerable})),bt.push.apply(bt,mt)}return bt}function Ql(tt){for(var _t=1;_t<arguments.length;_t++){var bt=arguments[_t]!=null?arguments[_t]:{};_t%2?$c(Object(bt),!0).forEach(function(mt){l()(tt,mt,bt[mt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(bt)):$c(Object(bt)).forEach(function(mt){Object.defineProperty(tt,mt,Object.getOwnPropertyDescriptor(bt,mt))})}return tt}var Cf={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},Bf={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},Nf={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},Mh={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5},Ff=["ambient","diffuse","specular"];function Ph(tt){var _t={u_DirectionalLights:new Array(3).fill(Ql({},Nf)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill(Ql({},Mh)),u_NumOfSpotLights:0};return(!tt||!tt.length)&&(tt=[Bf]),tt.forEach(function(bt,mt){var Pt=bt.type,Rt=Pt===void 0?"directional":Pt,Ht=a()(bt,["type"]),ge=Cf[Rt].lights,Be=Cf[Rt].num,Qe=_t[Be];_t[ge][Qe]=Ql(Ql({},_t[ge][Qe]),Ht),_t[Be]++}),_t}var Th=(rf=Object(Z.injectable)(),rf(vf=function(){function tt(){T()(this,tt)}return t()(tt,[{key:"apply",value:function(bt){bt.hooks.beforeRender.tap("LightingPlugin",function(){var mt=bt.getLayerConfig(),Pt=mt.enableLighting;Pt&&bt.models.forEach(function(Rt){return Rt.addUniforms(Ql({},Ph()))})})}}]),tt}())||vf),sh,Ah,Yf={NONE:0,ENCODE:1,HIGHLIGHT:2},Uh=(sh=Object(Z.injectable)(),sh(Ah=function(){function tt(){T()(this,tt)}return t()(tt,[{key:"apply",value:function(bt,mt){var Pt=mt.rendererService,Rt=mt.styleAttributeService;bt.hooks.init.tap("PixelPickingPlugin",function(){var Ht=bt.getLayerConfig(),ge=Ht.enablePicking;Rt.registerStyleAttribute({name:"pickingColor",type:V.AttributeType.Attribute,descriptor:{name:"a_PickingColor",buffer:{data:[],type:V.gl.FLOAT},size:3,update:function(Qe,Bn){var ur=Qe.id;return ge?Object(O.l)(ur):[0,0,0]}}})}),bt.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){var Ht=bt.getLayerConfig(),ge=Ht.enablePicking;ge&&bt.isVisible()&&bt.models.forEach(function(Be){return Be.addUniforms({u_PickingStage:Yf.ENCODE})})}),bt.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){var Ht=bt.getLayerConfig(),ge=Ht.enablePicking;ge&&bt.isVisible()&&bt.models.forEach(function(Be){return Be.addUniforms({u_PickingStage:Yf.HIGHLIGHT})})}),bt.hooks.beforeHighlight.tap("PixelPickingPlugin",function(Ht){var ge=bt.getLayerConfig(),Be=ge.highlightColor,Qe=typeof Be=="string"?Object(O.s)(Be):Be||[1,0,0,1];bt.updateLayerConfig({pickedFeatureID:Object(O.k)(new Uint8Array(Ht))}),bt.models.forEach(function(Bn){return Bn.addUniforms({u_PickingStage:Yf.HIGHLIGHT,u_PickingColor:Ht,u_HighlightColor:Qe.map(function(ur){return ur*255})})})}),bt.hooks.beforeSelect.tap("PixelPickingPlugin",function(Ht){var ge=bt.getLayerConfig(),Be=ge.selectColor,Qe=typeof Be=="string"?Object(O.s)(Be):Be||[1,0,0,1];bt.updateLayerConfig({pickedFeatureID:Object(O.k)(new Uint8Array(Ht))}),bt.models.forEach(function(Bn){return Bn.addUniforms({u_PickingStage:Yf.HIGHLIGHT,u_PickingColor:Ht,u_HighlightColor:Qe.map(function(ur){return ur*255})})})})}}]),tt}())||Ah),zf,uh,Ch,Zf,Uf,Oh=(zf=Object(Z.injectable)(),uh=Object(Z.inject)(V.TYPES.ILogService),zf(Ch=(Zf=function(){function tt(){T()(this,tt),v()(this,"logger",Uf,this)}return t()(tt,[{key:"apply",value:function(bt,mt){var Pt=this,Rt=mt.styleAttributeService;bt.hooks.init.tap("RegisterStyleAttributePlugin",function(){Pt.registerBuiltinAttributes(Rt)})}},{key:"registerBuiltinAttributes",value:function(bt){bt.registerStyleAttribute({name:"position",type:V.AttributeType.Attribute,descriptor:{name:"a_Position",buffer:{data:[],type:V.gl.FLOAT},size:3,update:function(Pt,Rt,Ht){return Ht.length===2?[Ht[0],Ht[1],0]:[Ht[0],Ht[1],Ht[2]]}}}),bt.registerStyleAttribute({name:"filter",type:V.AttributeType.Attribute,descriptor:{name:"filter",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:1,update:function(Pt,Rt){var Ht=Pt.filter;return Ht?[1]:[0]}}}),bt.registerStyleAttribute({name:"color",type:V.AttributeType.Attribute,descriptor:{name:"a_Color",buffer:{usage:V.gl.DYNAMIC_DRAW,data:[],type:V.gl.FLOAT},size:4,update:function(Pt,Rt){var Ht=Pt.color;return!Ht||!Ht.length?[1,1,1,1]:Ht}}})}}]),tt}(),Uf=_()(Zf.prototype,"logger",[uh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zf))||Ch),wh,Ih,lh,Lh,Rh,Of,Dh,ph,gh,jh=(wh=Object(Z.injectable)(),Ih=Object(Z.inject)(V.TYPES.ICameraService),lh=Object(Z.inject)(V.TYPES.ICoordinateSystemService),Lh=Object(Z.inject)(V.TYPES.IRendererService),wh(Rh=(Of=function(){function tt(){T()(this,tt),v()(this,"cameraService",Dh,this),v()(this,"coordinateSystemService",ph,this),v()(this,"rendererService",gh,this)}return t()(tt,[{key:"apply",value:function(bt){var mt=this;bt.hooks.beforeRender.tap("ShaderUniformPlugin",function(){mt.coordinateSystemService.refresh();var Pt=mt.rendererService.getViewportSize(),Rt=Pt.width,Ht=Pt.height;bt.models.forEach(function(ge){var Be;return ge.addUniforms((Be={},l()(Be,V.CameraUniform.ProjectionMatrix,mt.cameraService.getProjectionMatrix()),l()(Be,V.CameraUniform.ViewMatrix,mt.cameraService.getViewMatrix()),l()(Be,V.CameraUniform.ViewProjectionMatrix,mt.cameraService.getViewProjectionMatrix()),l()(Be,V.CameraUniform.Zoom,mt.cameraService.getZoom()),l()(Be,V.CameraUniform.ZoomScale,mt.cameraService.getZoomScale()),l()(Be,V.CameraUniform.FocalDistance,mt.cameraService.getFocalDistance()),l()(Be,V.CameraUniform.CameraPosition,mt.cameraService.getCameraPosition()),l()(Be,V.CoordinateUniform.CoordinateSystem,mt.coordinateSystemService.getCoordinateSystem()),l()(Be,V.CoordinateUniform.ViewportCenter,mt.coordinateSystemService.getViewportCenter()),l()(Be,V.CoordinateUniform.ViewportCenterProjection,mt.coordinateSystemService.getViewportCenterProjection()),l()(Be,V.CoordinateUniform.PixelsPerDegree,mt.coordinateSystemService.getPixelsPerDegree()),l()(Be,V.CoordinateUniform.PixelsPerDegree2,mt.coordinateSystemService.getPixelsPerDegree2()),l()(Be,V.CoordinateUniform.PixelsPerMeter,mt.coordinateSystemService.getPixelsPerMeter()),l()(Be,"u_ViewportSize",[Rt,Ht]),l()(Be,"u_DevicePixelRatio",window.devicePixelRatio),l()(Be,"u_ModelMatrix",[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),l()(Be,"u_PickingBuffer",bt.getLayerConfig().pickingBuffer||0),Be))})})}}]),tt}(),Dh=_()(Of.prototype,"cameraService",[Ih],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ph=_()(Of.prototype,"coordinateSystemService",[lh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gh=_()(Of.prototype,"rendererService",[Lh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Of))||Rh),ch,mh,yh=(ch=Object(Z.injectable)(),ch(mh=function(){function tt(){T()(this,tt)}return t()(tt,[{key:"apply",value:function(bt){bt.hooks.beforeRender.tap("UpdateModelPlugin",function(){bt.layerModel&&bt.layerModel.needUpdate()})}}]),tt}())||mh),fh,xh,kh,Bh,Yh,Zh=(fh=Object(Z.injectable)(),xh=Object(Z.inject)(V.TYPES.ILogService),fh(kh=(Bh=function(){function tt(){T()(this,tt),v()(this,"logger",Yh,this)}return t()(tt,[{key:"apply",value:function(bt,mt){var Pt=this,Rt=mt.styleAttributeService;bt.hooks.init.tap("UpdateStyleAttributePlugin",function(){Pt.initStyleAttribute(bt,{styleAttributeService:Rt})}),bt.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){bt.layerModelNeedUpdate||Pt.updateStyleAtrribute(bt,{styleAttributeService:Rt})})}},{key:"updateStyleAtrribute",value:function(bt,mt){var Pt=this,Rt=mt.styleAttributeService,Ht=Rt.getLayerStyleAttributes()||[],ge=Rt.getLayerStyleAttribute("filter"),Be=Rt.getLayerStyleAttribute("shape");if(ge&&ge.needRegenerateVertices||Be&&Be.needRegenerateVertices){bt.layerModelNeedUpdate=!0,Ht.forEach(function(Qe){return Qe.needRegenerateVertices=!1});return}Ht.filter(function(Qe){return Qe.needRegenerateVertices}).forEach(function(Qe){Rt.updateAttributeByFeatureRange(Qe.name,bt.getEncodedData(),Qe.featureRange.startIndex,Qe.featureRange.endIndex),Qe.needRegenerateVertices=!1,Pt.logger.debug("regenerate vertex attributes: ".concat(Qe.name," finished"))})}},{key:"initStyleAttribute",value:function(bt,mt){var Pt=this,Rt=mt.styleAttributeService,Ht=Rt.getLayerStyleAttributes()||[];Ht.filter(function(ge){return ge.needRegenerateVertices}).forEach(function(ge){Rt.updateAttributeByFeatureRange(ge.name,bt.getEncodedData(),ge.featureRange.startIndex,ge.featureRange.endIndex),ge.needRegenerateVertices=!1,Pt.logger.debug("init vertex attributes: ".concat(ge.name," finished"))})}}]),tt}(),Yh=_()(Bh.prototype,"logger",[xh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bh))||kh);V.container.bind(V.TYPES.ILayerPlugin).to(ne).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(Oh).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to($l).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(_e).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(jf).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(Zh).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(yh).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(dt).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(jh).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(Du).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(Th).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(Uh).inRequestScope(),V.container.bind(V.TYPES.ILayerPlugin).to(gl).inRequestScope()},t2Dn:function(Se,ct,R){var V=R("hypo"),E=R("ljhN");function T(e,t,u){(u!==void 0&&!E(e[t],u)||u===void 0&&!(t in e))&&V(e,t,u)}Se.exports=T},u6S6:function(Se,ct,R){var V=R("6acW"),E=R("sgoq"),T=E(function(e,t,u){return t=t.toLowerCase(),e+(u?V(t):t)});Se.exports=T},uhBA:function(Se,ct,R){"use strict";var V=Object.prototype.hasOwnProperty,E="~";function T(){}Object.create&&(T.prototype=Object.create(null),new T().__proto__||(E=!1));function e(c,r,h){this.fn=c,this.context=r,this.once=h||!1}function t(c,r,h,n,i){if(typeof h!="function")throw new TypeError("The listener must be a function");var a=new e(h,n||c,i),o=E?E+r:r;return c._events[o]?c._events[o].fn?c._events[o]=[c._events[o],a]:c._events[o].push(a):(c._events[o]=a,c._eventsCount++),c}function u(c,r){--c._eventsCount==0?c._events=new T:delete c._events[r]}function s(){this._events=new T,this._eventsCount=0}s.prototype.eventNames=function(){var r=[],h,n;if(this._eventsCount===0)return r;for(n in h=this._events)V.call(h,n)&&r.push(E?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(h)):r},s.prototype.listeners=function(r){var h=E?E+r:r,n=this._events[h];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=new Array(a);i<a;i++)o[i]=n[i].fn;return o},s.prototype.listenerCount=function(r){var h=E?E+r:r,n=this._events[h];return n?n.fn?1:n.length:0},s.prototype.emit=function(r,h,n,i,a,o){var l=E?E+r:r;if(!this._events[l])return!1;var f=this._events[l],v=arguments.length,b,g;if(f.fn){switch(f.once&&this.removeListener(r,f.fn,void 0,!0),v){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,h),!0;case 3:return f.fn.call(f.context,h,n),!0;case 4:return f.fn.call(f.context,h,n,i),!0;case 5:return f.fn.call(f.context,h,n,i,a),!0;case 6:return f.fn.call(f.context,h,n,i,a,o),!0}for(g=1,b=new Array(v-1);g<v;g++)b[g-1]=arguments[g];f.fn.apply(f.context,b)}else{var m=f.length,_;for(g=0;g<m;g++)switch(f[g].once&&this.removeListener(r,f[g].fn,void 0,!0),v){case 1:f[g].fn.call(f[g].context);break;case 2:f[g].fn.call(f[g].context,h);break;case 3:f[g].fn.call(f[g].context,h,n);break;case 4:f[g].fn.call(f[g].context,h,n,i);break;default:if(!b)for(_=1,b=new Array(v-1);_<v;_++)b[_-1]=arguments[_];f[g].fn.apply(f[g].context,b)}}return!0},s.prototype.on=function(r,h,n){return t(this,r,h,n,!1)},s.prototype.once=function(r,h,n){return t(this,r,h,n,!0)},s.prototype.removeListener=function(r,h,n,i){var a=E?E+r:r;if(!this._events[a])return this;if(!h)return u(this,a),this;var o=this._events[a];if(o.fn)o.fn===h&&(!i||o.once)&&(!n||o.context===n)&&u(this,a);else{for(var l=0,f=[],v=o.length;l<v;l++)(o[l].fn!==h||i&&!o[l].once||n&&o[l].context!==n)&&f.push(o[l]);f.length?this._events[a]=f.length===1?f[0]:f:u(this,a)}return this},s.prototype.removeAllListeners=function(r){var h;return r?(h=E?E+r:r,this._events[h]&&u(this,h)):(this._events=new T,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=E,s.EventEmitter=s,Se.exports=s},ujMp:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.circularDependencyToException=ct.listMetadataForTarget=ct.listRegisteredBindingsForServiceIdentifier=ct.getServiceIdentifierAsString=ct.getFunctionName=void 0;var V=R("MON2");function E(r){if(typeof r=="function"){var h=r;return h.name}else{if(typeof r=="symbol")return r.toString();var h=r;return h}}ct.getServiceIdentifierAsString=E;function T(r,h,n){var i="",a=n(r,h);return a.length!==0&&(i=`
Registered bindings:`,a.forEach(function(o){var l="Object";o.implementationType!==null&&(l=c(o.implementationType)),i=i+`
 `+l,o.constraint.metaData&&(i=i+" - "+o.constraint.metaData)})),i}ct.listRegisteredBindingsForServiceIdentifier=T;function e(r,h){return r.parentRequest===null?!1:r.parentRequest.serviceIdentifier===h?!0:e(r.parentRequest,h)}function t(r){function h(i,a){a===void 0&&(a=[]);var o=E(i.serviceIdentifier);return a.push(o),i.parentRequest!==null?h(i.parentRequest,a):a}var n=h(r);return n.reverse().join(" --> ")}function u(r){r.childRequests.forEach(function(h){if(e(h,h.serviceIdentifier)){var n=t(h);throw new Error(V.CIRCULAR_DEPENDENCY+" "+n)}else u(h)})}ct.circularDependencyToException=u;function s(r,h){if(h.isTagged()||h.isNamed()){var n="",i=h.getNamedTag(),a=h.getCustomTags();return i!==null&&(n+=i.toString()+`
`),a!==null&&a.forEach(function(o){n+=o.toString()+`
`})," "+r+`
 `+r+" - "+n}else return" "+r}ct.listMetadataForTarget=s;function c(r){if(r.name)return r.name;var h=r.toString(),n=h.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+h}ct.getFunctionName=c},"vN+2":function(Se,ct){function R(){}Se.exports=R},"w/wX":function(Se,ct,R){var V=R("QqLw"),E=R("ExA7"),T="[object Set]";function e(t){return E(t)&&V(t)==T}Se.exports=e},w26f:function(Se,ct,R){(function(V){var E=200,T="__lodash_hash_undefined__",e=1/0,t="[object Function]",u="[object GeneratorFunction]",s=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,r=typeof V=="object"&&V&&V.Object===Object&&V,h=typeof self=="object"&&self&&self.Object===Object&&self,n=r||h||Function("return this")();function i(Oe,We){var Ye=Oe?Oe.length:0;return!!Ye&&l(Oe,We,0)>-1}function a(Oe,We,Ye){for(var wn=-1,er=Oe?Oe.length:0;++wn<er;)if(Ye(We,Oe[wn]))return!0;return!1}function o(Oe,We,Ye,wn){for(var er=Oe.length,wr=Ye+(wn?1:-1);wn?wr--:++wr<er;)if(We(Oe[wr],wr,Oe))return wr;return-1}function l(Oe,We,Ye){if(We!==We)return o(Oe,f,Ye);for(var wn=Ye-1,er=Oe.length;++wn<er;)if(Oe[wn]===We)return wn;return-1}function f(Oe){return Oe!==Oe}function v(Oe,We){return Oe.has(We)}function b(Oe,We){return Oe==null?void 0:Oe[We]}function g(Oe){var We=!1;if(Oe!=null&&typeof Oe.toString!="function")try{We=!!(Oe+"")}catch(Ye){}return We}function m(Oe){var We=-1,Ye=Array(Oe.size);return Oe.forEach(function(wn){Ye[++We]=wn}),Ye}var _=Array.prototype,M=Function.prototype,x=Object.prototype,y=n["__core-js_shared__"],S=function(){var Oe=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||"");return Oe?"Symbol(src)_1."+Oe:""}(),P=M.toString,A=x.hasOwnProperty,O=x.toString,L=RegExp("^"+P.call(A).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),H=_.splice,F=vt(n,"Map"),Z=vt(n,"Set"),G=vt(Object,"create");function U(Oe){var We=-1,Ye=Oe?Oe.length:0;for(this.clear();++We<Ye;){var wn=Oe[We];this.set(wn[0],wn[1])}}function Y(){this.__data__=G?G(null):{}}function J(Oe){return this.has(Oe)&&delete this.__data__[Oe]}function rt(Oe){var We=this.__data__;if(G){var Ye=We[Oe];return Ye===T?void 0:Ye}return A.call(We,Oe)?We[Oe]:void 0}function ft(Oe){var We=this.__data__;return G?We[Oe]!==void 0:A.call(We,Oe)}function dt(Oe,We){var Ye=this.__data__;return Ye[Oe]=G&&We===void 0?T:We,this}U.prototype.clear=Y,U.prototype.delete=J,U.prototype.get=rt,U.prototype.has=ft,U.prototype.set=dt;function ut(Oe){var We=-1,Ye=Oe?Oe.length:0;for(this.clear();++We<Ye;){var wn=Oe[We];this.set(wn[0],wn[1])}}function Lt(){this.__data__=[]}function Ft(Oe){var We=this.__data__,Ye=k(We,Oe);if(Ye<0)return!1;var wn=We.length-1;return Ye==wn?We.pop():H.call(We,Ye,1),!0}function Ot(Oe){var We=this.__data__,Ye=k(We,Oe);return Ye<0?void 0:We[Ye][1]}function St(Oe){return k(this.__data__,Oe)>-1}function xt(Oe,We){var Ye=this.__data__,wn=k(Ye,Oe);return wn<0?Ye.push([Oe,We]):Ye[wn][1]=We,this}ut.prototype.clear=Lt,ut.prototype.delete=Ft,ut.prototype.get=Ot,ut.prototype.has=St,ut.prototype.set=xt;function At(Oe){var We=-1,Ye=Oe?Oe.length:0;for(this.clear();++We<Ye;){var wn=Oe[We];this.set(wn[0],wn[1])}}function nt(){this.__data__={hash:new U,map:new(F||ut),string:new U}}function Mt(Oe){return Et(this,Oe).delete(Oe)}function z(Oe){return Et(this,Oe).get(Oe)}function Q(Oe){return Et(this,Oe).has(Oe)}function ht(Oe,We){return Et(this,Oe).set(Oe,We),this}At.prototype.clear=nt,At.prototype.delete=Mt,At.prototype.get=z,At.prototype.has=Q,At.prototype.set=ht;function et(Oe){var We=-1,Ye=Oe?Oe.length:0;for(this.__data__=new At;++We<Ye;)this.add(Oe[We])}function at(Oe){return this.__data__.set(Oe,T),this}function gt(Oe){return this.__data__.has(Oe)}et.prototype.add=et.prototype.push=at,et.prototype.has=gt;function k(Oe,We){for(var Ye=Oe.length;Ye--;)if(Wt(Oe[Ye][0],We))return Ye;return-1}function ot(Oe){if(!le(Oe)||$t(Oe))return!1;var We=ae(Oe)||g(Oe)?L:c;return We.test(ee(Oe))}function it(Oe,We,Ye){var wn=-1,er=i,wr=Oe.length,on=!0,en=[],An=en;if(Ye)on=!1,er=a;else if(wr>=E){var jn=We?null:X(Oe);if(jn)return m(jn);on=!1,er=v,An=new et}else An=We?[]:en;t:for(;++wn<wr;){var pr=Oe[wn],di=We?We(pr):pr;if(pr=Ye||pr!==0?pr:0,on&&di===di){for(var Ce=An.length;Ce--;)if(An[Ce]===di)continue t;We&&An.push(di),en.push(pr)}else er(An,di,Ye)||(An!==en&&An.push(di),en.push(pr))}return en}var X=Z&&1/m(new Z([,-0]))[1]==e?function(Oe){return new Z(Oe)}:je;function Et(Oe,We){var Ye=Oe.__data__;return Nt(We)?Ye[typeof We=="string"?"string":"hash"]:Ye.map}function vt(Oe,We){var Ye=b(Oe,We);return ot(Ye)?Ye:void 0}function Nt(Oe){var We=typeof Oe;return We=="string"||We=="number"||We=="symbol"||We=="boolean"?Oe!=="__proto__":Oe===null}function $t(Oe){return!!S&&S in Oe}function ee(Oe){if(Oe!=null){try{return P.call(Oe)}catch(We){}try{return Oe+""}catch(We){}}return""}function kt(Oe){return Oe&&Oe.length?it(Oe):[]}function Wt(Oe,We){return Oe===We||Oe!==Oe&&We!==We}function ae(Oe){var We=le(Oe)?O.call(Oe):"";return We==t||We==u}function le(Oe){var We=typeof Oe;return!!Oe&&(We=="object"||We=="function")}function je(){}Se.exports=kt}).call(this,R("IyRk"))},wclG:function(Se,ct,R){var V=R("pFRH"),E=R("88Gu"),T=E(V);Se.exports=T},wnjb:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.MetadataReader=void 0;var V=R("xfSm"),E=function(){function T(){}return T.prototype.getConstructorMetadata=function(e){var t=Reflect.getMetadata(V.PARAM_TYPES,e),u=Reflect.getMetadata(V.TAGGED,e);return{compilerGeneratedMetadata:t,userGeneratedMetadata:u||{}}},T.prototype.getPropertiesMetadata=function(e){var t=Reflect.getMetadata(V.TAGGED_PROP,e)||[];return t},T}();ct.MetadataReader=E},wrZu:function(Se,ct,R){var V=R("+K+b"),E=R("XYm9"),T=R("b2z7"),e=R("otv/"),t=R("yP5f"),u="[object Boolean]",s="[object Date]",c="[object Map]",r="[object Number]",h="[object RegExp]",n="[object Set]",i="[object String]",a="[object Symbol]",o="[object ArrayBuffer]",l="[object DataView]",f="[object Float32Array]",v="[object Float64Array]",b="[object Int8Array]",g="[object Int16Array]",m="[object Int32Array]",_="[object Uint8Array]",M="[object Uint8ClampedArray]",x="[object Uint16Array]",y="[object Uint32Array]";function S(P,A,O){var L=P.constructor;switch(A){case o:return V(P);case u:case s:return new L(+P);case l:return E(P,O);case f:case v:case b:case g:case m:case _:case M:case x:case y:return t(P,O);case c:return new L;case r:case i:return new L(P);case h:return T(P);case n:return new L;case a:return e(P)}}Se.exports=S},wy8a:function(Se,ct,R){var V=R("KxBF");function E(T,e,t){var u=T.length;return t=t===void 0?u:t,!e&&t>=u?T:V(T,e,t)}Se.exports=E},xfSm:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.NON_CUSTOM_TAG_KEYS=ct.POST_CONSTRUCT=ct.DESIGN_PARAM_TYPES=ct.PARAM_TYPES=ct.TAGGED_PROP=ct.TAGGED=ct.MULTI_INJECT_TAG=ct.INJECT_TAG=ct.OPTIONAL_TAG=ct.UNMANAGED_TAG=ct.NAME_TAG=ct.NAMED_TAG=void 0,ct.NAMED_TAG="named",ct.NAME_TAG="name",ct.UNMANAGED_TAG="unmanaged",ct.OPTIONAL_TAG="optional",ct.INJECT_TAG="inject",ct.MULTI_INJECT_TAG="multi_inject",ct.TAGGED="inversify:tagged",ct.TAGGED_PROP="inversify:tagged_props",ct.PARAM_TYPES="inversify:paramtypes",ct.DESIGN_PARAM_TYPES="design:paramtypes",ct.POST_CONSTRUCT="post_construct";function V(){return[ct.INJECT_TAG,ct.MULTI_INJECT_TAG,ct.NAME_TAG,ct.UNMANAGED_TAG,ct.NAMED_TAG,ct.OPTIONAL_TAG]}ct.NON_CUSTOM_TAG_KEYS=V()},xfeJ:function(Se,ct){function R(V){return Function.toString.call(V).indexOf("[native code]")!==-1}Se.exports=R,Se.exports.default=Se.exports,Se.exports.__esModule=!0},xiII:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.Request=void 0;var V=R("d9O0"),E=function(){function T(e,t,u,s,c){this.id=V.id(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=u,this.target=c,this.childRequests=[],this.bindings=Array.isArray(s)?s:[s],this.requestScope=u===null?new Map:null}return T.prototype.addChildRequest=function(e,t,u){var s=new T(e,this.parentContext,this,t,u);return this.childRequests.push(s),s},T}();ct.Request=E},xp6e:function(Se,ct,R){"use strict";(function(V){R.d(ct,"a",function(){return rt}),R.d(ct,"b",function(){return Lt}),R.d(ct,"c",function(){return G}),R.d(ct,"d",function(){return ut});/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function E(Ft,Ot,St,xt){function At(nt){return nt instanceof St?nt:new St(function(Mt){Mt(nt)})}return new(St||(St=Promise))(function(nt,Mt){function z(et){try{ht(xt.next(et))}catch(at){Mt(at)}}function Q(et){try{ht(xt.throw(et))}catch(at){Mt(at)}}function ht(et){et.done?nt(et.value):At(et.value).then(z,Q)}ht((xt=xt.apply(Ft,Ot||[])).next())})}function T(Ft,Ot){var St={label:0,sent:function(){if(nt[0]&1)throw nt[1];return nt[1]},trys:[],ops:[]},xt,At,nt,Mt;return Mt={next:z(0),throw:z(1),return:z(2)},typeof Symbol=="function"&&(Mt[Symbol.iterator]=function(){return this}),Mt;function z(ht){return function(et){return Q([ht,et])}}function Q(ht){if(xt)throw new TypeError("Generator is already executing.");for(;St;)try{if(xt=1,At&&(nt=ht[0]&2?At.return:ht[0]?At.throw||((nt=At.return)&&nt.call(At),0):At.next)&&!(nt=nt.call(At,ht[1])).done)return nt;switch(At=0,nt&&(ht=[ht[0]&2,nt.value]),ht[0]){case 0:case 1:nt=ht;break;case 4:return St.label++,{value:ht[1],done:!1};case 5:St.label++,At=ht[1],ht=[0];continue;case 7:ht=St.ops.pop(),St.trys.pop();continue;default:if(nt=St.trys,!(nt=nt.length>0&&nt[nt.length-1])&&(ht[0]===6||ht[0]===2)){St=0;continue}if(ht[0]===3&&(!nt||ht[1]>nt[0]&&ht[1]<nt[3])){St.label=ht[1];break}if(ht[0]===6&&St.label<nt[1]){St.label=nt[1],nt=ht;break}if(nt&&St.label<nt[2]){St.label=nt[2],St.ops.push(ht);break}nt[2]&&St.ops.pop(),St.trys.pop();continue}ht=Ot.call(Ft,St)}catch(et){ht=[6,et],At=0}finally{xt=nt=0}if(ht[0]&5)throw ht[1];return{value:ht[0]?ht[1]:void 0,done:!0}}}function e(Ft,Ot){var St=typeof Symbol=="function"&&Ft[Symbol.iterator];if(!St)return Ft;var xt=St.call(Ft),At,nt=[],Mt;try{for(;(Ot===void 0||Ot-- >0)&&!(At=xt.next()).done;)nt.push(At.value)}catch(z){Mt={error:z}}finally{try{At&&!At.done&&(St=xt.return)&&St.call(xt)}finally{if(Mt)throw Mt.error}}return nt}function t(){for(var Ft=[],Ot=0;Ot<arguments.length;Ot++)Ft=Ft.concat(e(arguments[Ot]));return Ft}function u(Ft){return Ft&&Ft.__esModule&&Object.prototype.hasOwnProperty.call(Ft,"default")?Ft.default:Ft}function s(Ft,Ot){return Ot={exports:{}},Ft(Ot,Ot.exports),Ot.exports}var c=s(function(Ft,Ot){Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.default=St;function St(xt){return xt&&typeof xt.length=="number"&&xt.length>=0&&xt.length%1==0}Ft.exports=Ot.default});u(c);var r=s(function(Ft,Ot){Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.default=function(St){return function(){for(var xt=[],At=arguments.length;At--;)xt[At]=arguments[At];var nt=xt.pop();return St.call(this,xt,nt)}},Ft.exports=Ot.default});u(r);var h=s(function(Ft,Ot){Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.fallback=At,Ot.wrap=nt;var St=Ot.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,xt=Ot.hasNextTick=typeof V=="object"&&typeof V.nextTick=="function";function At(z){setTimeout(z,0)}function nt(z){return function(Q){for(var ht=[],et=arguments.length-1;et-- >0;)ht[et]=arguments[et+1];return z(function(){return Q.apply(void 0,ht)})}}var Mt;St?Mt=setImmediate:xt?Mt=V.nextTick:Mt=At,Ot.default=nt(Mt)});u(h);var n=h.fallback,i=h.wrap,a=h.hasSetImmediate,o=h.hasNextTick,l=s(function(Ft,Ot){Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.default=nt;var St=At(r),xt=At(h);function At(Q){return Q&&Q.__esModule?Q:{default:Q}}function nt(Q){return(0,f.isAsync)(Q)?function(){for(var ht=[],et=arguments.length;et--;)ht[et]=arguments[et];var at=ht.pop(),gt=Q.apply(this,ht);return Mt(gt,at)}:(0,St.default)(function(ht,et){var at;try{at=Q.apply(this,ht)}catch(gt){return et(gt)}if(at&&typeof at.then=="function")return Mt(at,et);et(null,at)})}function Mt(Q,ht){return Q.then(function(et){z(ht,null,et)},function(et){z(ht,et&&et.message?et:new Error(et))})}function z(Q,ht,et){try{Q(ht,et)}catch(at){(0,xt.default)(function(gt){throw gt},at)}}Ft.exports=Ot.default});u(l);var f=s(function(Ft,Ot){Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.isAsyncIterable=Ot.isAsyncGenerator=Ot.isAsync=void 0;var St=xt(l);function xt(Q){return Q&&Q.__esModule?Q:{default:Q}}function At(Q){return Q[Symbol.toStringTag]==="AsyncFunction"}function nt(Q){return Q[Symbol.toStringTag]==="AsyncGenerator"}function Mt(Q){return typeof Q[Symbol.asyncIterator]=="function"}function z(Q){if(typeof Q!="function")throw new Error("expected a function");return At(Q)?(0,St.default)(Q):Q}Ot.default=z,Ot.isAsync=At,Ot.isAsyncGenerator=nt,Ot.isAsyncIterable=Mt});u(f);var v=f.isAsyncIterable,b=f.isAsyncGenerator,g=f.isAsync,m=s(function(Ft,Ot){Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.default=St;function St(xt,At){if(At===void 0&&(At=xt.length),!At)throw new Error("arity is undefined");function nt(){for(var Mt=this,z=[],Q=arguments.length;Q--;)z[Q]=arguments[Q];return typeof z[At-1]=="function"?xt.apply(this,z):new Promise(function(ht,et){z[At-1]=function(at){for(var gt=[],k=arguments.length-1;k-- >0;)gt[k]=arguments[k+1];if(at)return et(at);ht(gt.length>1?gt:gt[0])},xt.apply(Mt,z)})}return Object.defineProperty(nt,"name",{configurable:!0,value:"awaitable("+xt.name+")"}),nt}Ft.exports=Ot.default});u(m);var _=s(function(Ft,Ot){Object.defineProperty(Ot,"__esModule",{value:!0});var St=nt(c),xt=nt(f),At=nt(m);function nt(Mt){return Mt&&Mt.__esModule?Mt:{default:Mt}}Ot.default=(0,At.default)(function(Mt,z,Q){var ht=(0,St.default)(z)?[]:{};Mt(z,function(et,at,gt){(0,xt.default)(et)(function(k){for(var ot,it=[],X=arguments.length-1;X-- >0;)it[X]=arguments[X+1];it.length<2&&(ot=it,it=ot[0]),ht[at]=it,gt(k)})},function(et){return Q(et,ht)})},3),Ft.exports=Ot.default});u(_);var M=s(function(Ft,Ot){Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.default=St;function St(xt){function At(){for(var nt=[],Mt=arguments.length;Mt--;)nt[Mt]=arguments[Mt];if(xt!==null){var z=xt;xt=null,z.apply(this,nt)}}return Object.assign(At,xt),At}Ft.exports=Ot.default});u(M);var x=s(function(Ft,Ot){Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.default=function(St){return St[Symbol.iterator]&&St[Symbol.iterator]()},Ft.exports=Ot.default});u(x);var y=s(function(Ft,Ot){Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.default=Q;var St=At(c),xt=At(x);function At(ht){return ht&&ht.__esModule?ht:{default:ht}}function nt(ht){var et=-1,at=ht.length;return function(){return++et<at?{value:ht[et],key:et}:null}}function Mt(ht){var et=-1;return function(){var gt=ht.next();return gt.done?null:(et++,{value:gt.value,key:et})}}function z(ht){var et=ht?Object.keys(ht):[],at=-1,gt=et.length;return function(){var ot=et[++at];return at<gt?{value:ht[ot],key:ot}:null}}function Q(ht){if((0,St.default)(ht))return nt(ht);var et=(0,xt.default)(ht);return et?Mt(et):z(ht)}Ft.exports=Ot.default});u(y);var S=s(function(Ft,Ot){Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.default=St;function St(xt){return function(){for(var At=[],nt=arguments.length;nt--;)At[nt]=arguments[nt];if(xt===null)throw new Error("Callback was already called.");var Mt=xt;xt=null,Mt.apply(this,At)}}Ft.exports=Ot.default});u(S);var P=s(function(Ft,Ot){Object.defineProperty(Ot,"__esModule",{value:!0});var St={};Ot.default=St,Ft.exports=Ot.default});u(P);var A=s(function(Ft,Ot){Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.default=At;var St=xt(P);function xt(nt){return nt&&nt.__esModule?nt:{default:nt}}function At(nt,Mt,z,Q){var ht=!1,et=!1,at=!1,gt=0,k=0;function ot(){gt>=Mt||at||ht||(at=!0,nt.next().then(function(Et){var vt=Et.value,Nt=Et.done;if(!(et||ht)){if(at=!1,Nt){ht=!0,gt<=0&&Q(null);return}gt++,z(vt,k,it),k++,ot()}}).catch(X))}function it(Et,vt){if(gt-=1,!et){if(Et)return X(Et);if(Et===!1){ht=!0,et=!0;return}if(vt===St.default||ht&&gt<=0)return ht=!0,Q(null);ot()}}function X(Et){et||(at=!1,ht=!0,Q(Et))}ot()}Ft.exports=Ot.default});u(A);var O=s(function(Ft,Ot){Object.defineProperty(Ot,"__esModule",{value:!0});var St=z(M),xt=z(y),At=z(S),nt=z(A),Mt=z(P);function z(Q){return Q&&Q.__esModule?Q:{default:Q}}Ot.default=function(Q){return function(ht,et,at){if(at=(0,St.default)(at),Q<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!ht)return at(null);if((0,f.isAsyncGenerator)(ht))return(0,nt.default)(ht,Q,et,at);if((0,f.isAsyncIterable)(ht))return(0,nt.default)(ht[Symbol.asyncIterator](),Q,et,at);var gt=(0,xt.default)(ht),k=!1,ot=!1,it=0,X=!1;function Et(Nt,$t){if(!ot)if(it-=1,Nt)k=!0,at(Nt);else if(Nt===!1)k=!0,ot=!0;else{if($t===Mt.default||k&&it<=0)return k=!0,at(null);X||vt()}}function vt(){for(X=!0;it<Q&&!k;){var Nt=gt();if(Nt===null){k=!0,it<=0&&at(null);return}it+=1,et(Nt.value,Nt.key,(0,At.default)(Et))}X=!1}vt()}},Ft.exports=Ot.default});u(O);var L=s(function(Ft,Ot){Object.defineProperty(Ot,"__esModule",{value:!0});var St=nt(O),xt=nt(f),At=nt(m);function nt(z){return z&&z.__esModule?z:{default:z}}function Mt(z,Q,ht,et){return(0,St.default)(Q)(z,(0,xt.default)(ht),et)}Ot.default=(0,At.default)(Mt,4),Ft.exports=Ot.default});u(L);var H=s(function(Ft,Ot){Object.defineProperty(Ot,"__esModule",{value:!0});var St=At(L),xt=At(m);function At(Mt){return Mt&&Mt.__esModule?Mt:{default:Mt}}function nt(Mt,z,Q){return(0,St.default)(Mt,1,z,Q)}Ot.default=(0,xt.default)(nt,3),Ft.exports=Ot.default});u(H);var F=s(function(Ft,Ot){Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.default=nt;var St=At(_),xt=At(H);function At(Mt){return Mt&&Mt.__esModule?Mt:{default:Mt}}function nt(Mt,z){return(0,St.default)(xt.default,Mt,z)}Ft.exports=Ot.default}),Z=u(F),G=function(){function Ft(){for(var Ot=arguments,St=[],xt=0;xt<arguments.length;xt++)St[xt]=Ot[xt];this.args=[],this.tasks=[]}return Ft.prototype.call=function(){for(var Ot=arguments,St=[],xt=0;xt<arguments.length;xt++)St[xt]=Ot[xt];return this.args=St,Z(this.tasks)},Ft.prototype.tap=function(Ot,St){var xt=this;this.tasks.push(function(At){St.apply(void 0,t(xt.args)),At(null,Ot)})},Ft}(),U=s(function(Ft,Ot){Object.defineProperty(Ot,"__esModule",{value:!0});var St=ht(c),xt=ht(P),At=ht(L),nt=ht(M),Mt=ht(S),z=ht(f),Q=ht(m);function ht(k){return k&&k.__esModule?k:{default:k}}function et(k,ot,it){it=(0,nt.default)(it);var X=0,Et=0,vt=k.length,Nt=!1;vt===0&&it(null);function $t(ee,kt){ee===!1&&(Nt=!0),Nt!==!0&&(ee?it(ee):(++Et===vt||kt===xt.default)&&it(null))}for(;X<vt;X++)ot(k[X],X,(0,Mt.default)($t))}function at(k,ot,it){return(0,At.default)(k,Infinity,ot,it)}function gt(k,ot,it){var X=(0,St.default)(k)?et:at;return X(k,(0,z.default)(ot),it)}Ot.default=(0,Q.default)(gt,3),Ft.exports=Ot.default});u(U);var Y=s(function(Ft,Ot){Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.default=nt;var St=At(U),xt=At(_);function At(Mt){return Mt&&Mt.__esModule?Mt:{default:Mt}}function nt(Mt,z){return(0,xt.default)(St.default,Mt,z)}Ft.exports=Ot.default}),J=u(Y),rt=function(){function Ft(){for(var Ot=arguments,St=[],xt=0;xt<arguments.length;xt++)St[xt]=Ot[xt];this.tasks=[]}return Ft.prototype.promise=function(){for(var Ot=arguments,St=[],xt=0;xt<arguments.length;xt++)St[xt]=Ot[xt];return J(this.tasks)},Ft.prototype.tapPromise=function(Ot,St){var xt=this;this.tasks.push(function(At){return E(xt,void 0,void 0,function(){return T(this,function(nt){switch(nt.label){case 0:return[4,St()];case 1:return nt.sent(),At(null,Ot),[2]}})})})},Ft}(),ft=s(function(Ft,Ot){Object.defineProperty(Ot,"__esModule",{value:!0});var St=Mt(M),xt=Mt(S),At=Mt(f),nt=Mt(m);function Mt(Q){return Q&&Q.__esModule?Q:{default:Q}}function z(Q,ht){if(ht=(0,St.default)(ht),!Array.isArray(Q))return ht(new Error("First argument to waterfall must be an array of functions"));if(!Q.length)return ht();var et=0;function at(k){var ot=(0,At.default)(Q[et++]);ot.apply(void 0,k.concat([(0,xt.default)(gt)]))}function gt(k){for(var ot=[],it=arguments.length-1;it-- >0;)ot[it]=arguments[it+1];if(k!==!1){if(k||et===Q.length)return ht.apply(void 0,[k].concat(ot));at(ot)}}at([])}Ot.default=(0,nt.default)(z),Ft.exports=Ot.default}),dt=u(ft),ut=function(){function Ft(){for(var Ot=arguments,St=[],xt=0;xt<arguments.length;xt++)St[xt]=Ot[xt];this.tasks=[]}return Ft.prototype.call=function(){for(var Ot=arguments,St=[],xt=0;xt<arguments.length;xt++)St[xt]=Ot[xt];return dt(this.tasks)},Ft.prototype.tap=function(Ot,St){this.tasks.length===0?this.tasks.push(function(xt){var At=St();xt(At?null:!1,At)}):this.tasks.push(function(xt,At){var nt=St();At(nt?null:!1,Ot)})},Ft}(),Lt=function(){function Ft(){for(var Ot=arguments,St=[],xt=0;xt<arguments.length;xt++)St[xt]=Ot[xt];this.tasks=[]}return Ft.prototype.call=function(){for(var Ot=arguments,St=[],xt=0;xt<arguments.length;xt++)St[xt]=Ot[xt];return Z(this.tasks)},Ft.prototype.tap=function(Ot,St){this.tasks.push(function(xt){var At=St();xt(At,Ot)})},Ft}()}).call(this,R("Q2Ig"))},yG8O:function(Se,ct){function R(V,E,T,e){!T||Object.defineProperty(V,E,{enumerable:T.enumerable,configurable:T.configurable,writable:T.writable,value:T.initializer?T.initializer.call(e):void 0})}Se.exports=R,Se.exports.default=Se.exports,Se.exports.__esModule=!0},yHx3:function(Se,ct){var R=Object.prototype,V=R.hasOwnProperty;function E(T){var e=T.length,t=new T.constructor(e);return e&&typeof T[0]=="string"&&V.call(T,"index")&&(t.index=T.index,t.input=T.input),t}Se.exports=E},yLV6:function(Se,ct,R){var V;/*! Hammer.JS - v2.0.7 - 2016-04-22
* http://hammerjs.github.io/
*
* Copyright (c) 2016 Jorik Tangelder;
* Licensed under the MIT license */(function(E,T,e,t){"use strict";var u=["","webkit","Moz","MS","ms","o"],s=T.createElement("div"),c="function",r=Math.round,h=Math.abs,n=Date.now;function i(se,Yt,Ee){return setTimeout(m(se,Ee),Yt)}function a(se,Yt,Ee){return Array.isArray(se)?(o(se,Ee[Yt],Ee),!0):!1}function o(se,Yt,Ee){var sn;if(!!se)if(se.forEach)se.forEach(Yt,Ee);else if(se.length!==t)for(sn=0;sn<se.length;)Yt.call(Ee,se[sn],sn,se),sn++;else for(sn in se)se.hasOwnProperty(sn)&&Yt.call(Ee,se[sn],sn,se)}function l(se,Yt,Ee){var sn="DEPRECATED METHOD: "+Yt+`
`+Ee+` AT 
`;return function(){var Fn=new Error("get-stack-trace"),rr=Fn&&Fn.stack?Fn.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",qn=E.console&&(E.console.warn||E.console.log);return qn&&qn.call(E.console,sn,rr),se.apply(this,arguments)}}var f;typeof Object.assign!="function"?f=function(Yt){if(Yt===t||Yt===null)throw new TypeError("Cannot convert undefined or null to object");for(var Ee=Object(Yt),sn=1;sn<arguments.length;sn++){var Fn=arguments[sn];if(Fn!==t&&Fn!==null)for(var rr in Fn)Fn.hasOwnProperty(rr)&&(Ee[rr]=Fn[rr])}return Ee}:f=Object.assign;var v=l(function(Yt,Ee,sn){for(var Fn=Object.keys(Ee),rr=0;rr<Fn.length;)(!sn||sn&&Yt[Fn[rr]]===t)&&(Yt[Fn[rr]]=Ee[Fn[rr]]),rr++;return Yt},"extend","Use `assign`."),b=l(function(Yt,Ee){return v(Yt,Ee,!0)},"merge","Use `assign`.");function g(se,Yt,Ee){var sn=Yt.prototype,Fn;Fn=se.prototype=Object.create(sn),Fn.constructor=se,Fn._super=sn,Ee&&f(Fn,Ee)}function m(se,Yt){return function(){return se.apply(Yt,arguments)}}function _(se,Yt){return typeof se==c?se.apply(Yt&&Yt[0]||t,Yt):se}function M(se,Yt){return se===t?Yt:se}function x(se,Yt,Ee){o(A(Yt),function(sn){se.addEventListener(sn,Ee,!1)})}function y(se,Yt,Ee){o(A(Yt),function(sn){se.removeEventListener(sn,Ee,!1)})}function S(se,Yt){for(;se;){if(se==Yt)return!0;se=se.parentNode}return!1}function P(se,Yt){return se.indexOf(Yt)>-1}function A(se){return se.trim().split(/\s+/g)}function O(se,Yt,Ee){if(se.indexOf&&!Ee)return se.indexOf(Yt);for(var sn=0;sn<se.length;){if(Ee&&se[sn][Ee]==Yt||!Ee&&se[sn]===Yt)return sn;sn++}return-1}function L(se){return Array.prototype.slice.call(se,0)}function H(se,Yt,Ee){for(var sn=[],Fn=[],rr=0;rr<se.length;){var qn=Yt?se[rr][Yt]:se[rr];O(Fn,qn)<0&&sn.push(se[rr]),Fn[rr]=qn,rr++}return Ee&&(Yt?sn=sn.sort(function(Si,Oi){return Si[Yt]>Oi[Yt]}):sn=sn.sort()),sn}function F(se,Yt){for(var Ee,sn,Fn=Yt[0].toUpperCase()+Yt.slice(1),rr=0;rr<u.length;){if(Ee=u[rr],sn=Ee?Ee+Fn:Yt,sn in se)return sn;rr++}return t}var Z=1;function G(){return Z++}function U(se){var Yt=se.ownerDocument||se;return Yt.defaultView||Yt.parentWindow||E}var Y=/mobile|tablet|ip(ad|hone|od)|android/i,J="ontouchstart"in E,rt=F(E,"PointerEvent")!==t,ft=J&&Y.test(navigator.userAgent),dt="touch",ut="pen",Lt="mouse",Ft="kinect",Ot=25,St=1,xt=2,At=4,nt=8,Mt=1,z=2,Q=4,ht=8,et=16,at=z|Q,gt=ht|et,k=at|gt,ot=["x","y"],it=["clientX","clientY"];function X(se,Yt){var Ee=this;this.manager=se,this.callback=Yt,this.element=se.element,this.target=se.options.inputTarget,this.domHandler=function(sn){_(se.options.enable,[se])&&Ee.handler(sn)},this.init()}X.prototype={handler:function(){},init:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(U(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(U(this.element),this.evWin,this.domHandler)}};function Et(se){var Yt,Ee=se.options.inputClass;return Ee?Yt=Ee:rt?Yt=di:ft?Yt=ue:J?Yt=tr:Yt=on,new Yt(se,vt)}function vt(se,Yt,Ee){var sn=Ee.pointers.length,Fn=Ee.changedPointers.length,rr=Yt&St&&sn-Fn==0,qn=Yt&(At|nt)&&sn-Fn==0;Ee.isFirst=!!rr,Ee.isFinal=!!qn,rr&&(se.session={}),Ee.eventType=Yt,Nt(se,Ee),se.emit("hammer.input",Ee),se.recognize(Ee),se.session.prevInput=Ee}function Nt(se,Yt){var Ee=se.session,sn=Yt.pointers,Fn=sn.length;Ee.firstInput||(Ee.firstInput=kt(Yt)),Fn>1&&!Ee.firstMultiple?Ee.firstMultiple=kt(Yt):Fn===1&&(Ee.firstMultiple=!1);var rr=Ee.firstInput,qn=Ee.firstMultiple,Xr=qn?qn.center:rr.center,Si=Yt.center=Wt(sn);Yt.timeStamp=n(),Yt.deltaTime=Yt.timeStamp-rr.timeStamp,Yt.angle=Oe(Xr,Si),Yt.distance=je(Xr,Si),$t(Ee,Yt),Yt.offsetDirection=le(Yt.deltaX,Yt.deltaY);var Oi=ae(Yt.deltaTime,Yt.deltaX,Yt.deltaY);Yt.overallVelocityX=Oi.x,Yt.overallVelocityY=Oi.y,Yt.overallVelocity=h(Oi.x)>h(Oi.y)?Oi.x:Oi.y,Yt.scale=qn?Ye(qn.pointers,sn):1,Yt.rotation=qn?We(qn.pointers,sn):0,Yt.maxPointers=Ee.prevInput?Yt.pointers.length>Ee.prevInput.maxPointers?Yt.pointers.length:Ee.prevInput.maxPointers:Yt.pointers.length,ee(Ee,Yt);var Gi=se.element;S(Yt.srcEvent.target,Gi)&&(Gi=Yt.srcEvent.target),Yt.target=Gi}function $t(se,Yt){var Ee=Yt.center,sn=se.offsetDelta||{},Fn=se.prevDelta||{},rr=se.prevInput||{};(Yt.eventType===St||rr.eventType===At)&&(Fn=se.prevDelta={x:rr.deltaX||0,y:rr.deltaY||0},sn=se.offsetDelta={x:Ee.x,y:Ee.y}),Yt.deltaX=Fn.x+(Ee.x-sn.x),Yt.deltaY=Fn.y+(Ee.y-sn.y)}function ee(se,Yt){var Ee=se.lastInterval||Yt,sn=Yt.timeStamp-Ee.timeStamp,Fn,rr,qn,Xr;if(Yt.eventType!=nt&&(sn>Ot||Ee.velocity===t)){var Si=Yt.deltaX-Ee.deltaX,Oi=Yt.deltaY-Ee.deltaY,Gi=ae(sn,Si,Oi);rr=Gi.x,qn=Gi.y,Fn=h(Gi.x)>h(Gi.y)?Gi.x:Gi.y,Xr=le(Si,Oi),se.lastInterval=Yt}else Fn=Ee.velocity,rr=Ee.velocityX,qn=Ee.velocityY,Xr=Ee.direction;Yt.velocity=Fn,Yt.velocityX=rr,Yt.velocityY=qn,Yt.direction=Xr}function kt(se){for(var Yt=[],Ee=0;Ee<se.pointers.length;)Yt[Ee]={clientX:r(se.pointers[Ee].clientX),clientY:r(se.pointers[Ee].clientY)},Ee++;return{timeStamp:n(),pointers:Yt,center:Wt(Yt),deltaX:se.deltaX,deltaY:se.deltaY}}function Wt(se){var Yt=se.length;if(Yt===1)return{x:r(se[0].clientX),y:r(se[0].clientY)};for(var Ee=0,sn=0,Fn=0;Fn<Yt;)Ee+=se[Fn].clientX,sn+=se[Fn].clientY,Fn++;return{x:r(Ee/Yt),y:r(sn/Yt)}}function ae(se,Yt,Ee){return{x:Yt/se||0,y:Ee/se||0}}function le(se,Yt){return se===Yt?Mt:h(se)>=h(Yt)?se<0?z:Q:Yt<0?ht:et}function je(se,Yt,Ee){Ee||(Ee=ot);var sn=Yt[Ee[0]]-se[Ee[0]],Fn=Yt[Ee[1]]-se[Ee[1]];return Math.sqrt(sn*sn+Fn*Fn)}function Oe(se,Yt,Ee){Ee||(Ee=ot);var sn=Yt[Ee[0]]-se[Ee[0]],Fn=Yt[Ee[1]]-se[Ee[1]];return Math.atan2(Fn,sn)*180/Math.PI}function We(se,Yt){return Oe(Yt[1],Yt[0],it)+Oe(se[1],se[0],it)}function Ye(se,Yt){return je(Yt[0],Yt[1],it)/je(se[0],se[1],it)}var wn={mousedown:St,mousemove:xt,mouseup:At},er="mousedown",wr="mousemove mouseup";function on(){this.evEl=er,this.evWin=wr,this.pressed=!1,X.apply(this,arguments)}g(on,X,{handler:function(Yt){var Ee=wn[Yt.type];Ee&St&&Yt.button===0&&(this.pressed=!0),Ee&xt&&Yt.which!==1&&(Ee=At),!!this.pressed&&(Ee&At&&(this.pressed=!1),this.callback(this.manager,Ee,{pointers:[Yt],changedPointers:[Yt],pointerType:Lt,srcEvent:Yt}))}});var en={pointerdown:St,pointermove:xt,pointerup:At,pointercancel:nt,pointerout:nt},An={2:dt,3:ut,4:Lt,5:Ft},jn="pointerdown",pr="pointermove pointerup pointercancel";E.MSPointerEvent&&!E.PointerEvent&&(jn="MSPointerDown",pr="MSPointerMove MSPointerUp MSPointerCancel");function di(){this.evEl=jn,this.evWin=pr,X.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}g(di,X,{handler:function(Yt){var Ee=this.store,sn=!1,Fn=Yt.type.toLowerCase().replace("ms",""),rr=en[Fn],qn=An[Yt.pointerType]||Yt.pointerType,Xr=qn==dt,Si=O(Ee,Yt.pointerId,"pointerId");rr&St&&(Yt.button===0||Xr)?Si<0&&(Ee.push(Yt),Si=Ee.length-1):rr&(At|nt)&&(sn=!0),!(Si<0)&&(Ee[Si]=Yt,this.callback(this.manager,rr,{pointers:Ee,changedPointers:[Yt],pointerType:qn,srcEvent:Yt}),sn&&Ee.splice(Si,1))}});var Ce={touchstart:St,touchmove:xt,touchend:At,touchcancel:nt},Me="touchstart",Qt="touchstart touchmove touchend touchcancel";function pe(){this.evTarget=Me,this.evWin=Qt,this.started=!1,X.apply(this,arguments)}g(pe,X,{handler:function(Yt){var Ee=Ce[Yt.type];if(Ee===St&&(this.started=!0),!!this.started){var sn=Vt.call(this,Yt,Ee);Ee&(At|nt)&&sn[0].length-sn[1].length==0&&(this.started=!1),this.callback(this.manager,Ee,{pointers:sn[0],changedPointers:sn[1],pointerType:dt,srcEvent:Yt})}}});function Vt(se,Yt){var Ee=L(se.touches),sn=L(se.changedTouches);return Yt&(At|nt)&&(Ee=H(Ee.concat(sn),"identifier",!0)),[Ee,sn]}var re={touchstart:St,touchmove:xt,touchend:At,touchcancel:nt},Te="touchstart touchmove touchend touchcancel";function ue(){this.evTarget=Te,this.targetIds={},X.apply(this,arguments)}g(ue,X,{handler:function(Yt){var Ee=re[Yt.type],sn=xe.call(this,Yt,Ee);!sn||this.callback(this.manager,Ee,{pointers:sn[0],changedPointers:sn[1],pointerType:dt,srcEvent:Yt})}});function xe(se,Yt){var Ee=L(se.touches),sn=this.targetIds;if(Yt&(St|xt)&&Ee.length===1)return sn[Ee[0].identifier]=!0,[Ee,Ee];var Fn,rr,qn=L(se.changedTouches),Xr=[],Si=this.target;if(rr=Ee.filter(function(Oi){return S(Oi.target,Si)}),Yt===St)for(Fn=0;Fn<rr.length;)sn[rr[Fn].identifier]=!0,Fn++;for(Fn=0;Fn<qn.length;)sn[qn[Fn].identifier]&&Xr.push(qn[Fn]),Yt&(At|nt)&&delete sn[qn[Fn].identifier],Fn++;if(!!Xr.length)return[H(rr.concat(Xr),"identifier",!0),Xr]}var Ke=2500,Rn=25;function tr(){X.apply(this,arguments);var se=m(this.handler,this);this.touch=new ue(this.manager,se),this.mouse=new on(this.manager,se),this.primaryTouch=null,this.lastTouches=[]}g(tr,X,{handler:function(Yt,Ee,sn){var Fn=sn.pointerType==dt,rr=sn.pointerType==Lt;if(!(rr&&sn.sourceCapabilities&&sn.sourceCapabilities.firesTouchEvents)){if(Fn)Pn.call(this,Ee,sn);else if(rr&&Ar.call(this,sn))return;this.callback(Yt,Ee,sn)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Pn(se,Yt){se&St?(this.primaryTouch=Yt.changedPointers[0].identifier,dn.call(this,Yt)):se&(At|nt)&&dn.call(this,Yt)}function dn(se){var Yt=se.changedPointers[0];if(Yt.identifier===this.primaryTouch){var Ee={x:Yt.clientX,y:Yt.clientY};this.lastTouches.push(Ee);var sn=this.lastTouches,Fn=function(){var qn=sn.indexOf(Ee);qn>-1&&sn.splice(qn,1)};setTimeout(Fn,Ke)}}function Ar(se){for(var Yt=se.srcEvent.clientX,Ee=se.srcEvent.clientY,sn=0;sn<this.lastTouches.length;sn++){var Fn=this.lastTouches[sn],rr=Math.abs(Yt-Fn.x),qn=Math.abs(Ee-Fn.y);if(rr<=Rn&&qn<=Rn)return!0}return!1}var or=F(s.style,"touchAction"),cn=or!==t,Pr="compute",Sr="auto",Re="manipulation",$e="none",Ve="pan-x",En="pan-y",xn=Dn();function Nn(se,Yt){this.manager=se,this.set(Yt)}Nn.prototype={set:function(Yt){Yt==Pr&&(Yt=this.compute()),cn&&this.manager.element.style&&xn[Yt]&&(this.manager.element.style[or]=Yt),this.actions=Yt.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Yt=[];return o(this.manager.recognizers,function(Ee){_(Ee.options.enable,[Ee])&&(Yt=Yt.concat(Ee.getTouchAction()))}),mn(Yt.join(" "))},preventDefaults:function(Yt){var Ee=Yt.srcEvent,sn=Yt.offsetDirection;if(this.manager.session.prevented){Ee.preventDefault();return}var Fn=this.actions,rr=P(Fn,$e)&&!xn[$e],qn=P(Fn,En)&&!xn[En],Xr=P(Fn,Ve)&&!xn[Ve];if(rr){var Si=Yt.pointers.length===1,Oi=Yt.distance<2,Gi=Yt.deltaTime<250;if(Si&&Oi&&Gi)return}if(!(Xr&&qn)&&(rr||qn&&sn&at||Xr&&sn&gt))return this.preventSrc(Ee)},preventSrc:function(Yt){this.manager.session.prevented=!0,Yt.preventDefault()}};function mn(se){if(P(se,$e))return $e;var Yt=P(se,Ve),Ee=P(se,En);return Yt&&Ee?$e:Yt||Ee?Yt?Ve:En:P(se,Re)?Re:Sr}function Dn(){if(!cn)return!1;var se={},Yt=E.CSS&&E.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Ee){se[Ee]=Yt?E.CSS.supports("touch-action",Ee):!0}),se}var $n=1,Hn=2,_n=4,br=8,yr=br,Fr=16,Ei=32;function Ta(se){this.options=f({},this.defaults,se||{}),this.id=G(),this.manager=null,this.options.enable=M(this.options.enable,!0),this.state=$n,this.simultaneous={},this.requireFail=[]}Ta.prototype={defaults:{},set:function(Yt){return f(this.options,Yt),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Yt){if(a(Yt,"recognizeWith",this))return this;var Ee=this.simultaneous;return Yt=Ho(Yt,this),Ee[Yt.id]||(Ee[Yt.id]=Yt,Yt.recognizeWith(this)),this},dropRecognizeWith:function(Yt){return a(Yt,"dropRecognizeWith",this)?this:(Yt=Ho(Yt,this),delete this.simultaneous[Yt.id],this)},requireFailure:function(Yt){if(a(Yt,"requireFailure",this))return this;var Ee=this.requireFail;return Yt=Ho(Yt,this),O(Ee,Yt)===-1&&(Ee.push(Yt),Yt.requireFailure(this)),this},dropRequireFailure:function(Yt){if(a(Yt,"dropRequireFailure",this))return this;Yt=Ho(Yt,this);var Ee=O(this.requireFail,Yt);return Ee>-1&&this.requireFail.splice(Ee,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Yt){return!!this.simultaneous[Yt.id]},emit:function(Yt){var Ee=this,sn=this.state;function Fn(rr){Ee.manager.emit(rr,Yt)}sn<br&&Fn(Ee.options.event+Aa(sn)),Fn(Ee.options.event),Yt.additionalEvent&&Fn(Yt.additionalEvent),sn>=br&&Fn(Ee.options.event+Aa(sn))},tryEmit:function(Yt){if(this.canEmit())return this.emit(Yt);this.state=Ei},canEmit:function(){for(var Yt=0;Yt<this.requireFail.length;){if(!(this.requireFail[Yt].state&(Ei|$n)))return!1;Yt++}return!0},recognize:function(Yt){var Ee=f({},Yt);if(!_(this.options.enable,[this,Ee])){this.reset(),this.state=Ei;return}this.state&(yr|Fr|Ei)&&(this.state=$n),this.state=this.process(Ee),this.state&(Hn|_n|br|Fr)&&this.tryEmit(Ee)},process:function(Yt){},getTouchAction:function(){},reset:function(){}};function Aa(se){return se&Fr?"cancel":se&br?"end":se&_n?"move":se&Hn?"start":""}function eo(se){return se==et?"down":se==ht?"up":se==z?"left":se==Q?"right":""}function Ho(se,Yt){var Ee=Yt.manager;return Ee?Ee.get(se):se}function Do(){Ta.apply(this,arguments)}g(Do,Ta,{defaults:{pointers:1},attrTest:function(Yt){var Ee=this.options.pointers;return Ee===0||Yt.pointers.length===Ee},process:function(Yt){var Ee=this.state,sn=Yt.eventType,Fn=Ee&(Hn|_n),rr=this.attrTest(Yt);return Fn&&(sn&nt||!rr)?Ee|Fr:Fn||rr?sn&At?Ee|br:Ee&Hn?Ee|_n:Hn:Ei}});function io(){Do.apply(this,arguments),this.pX=null,this.pY=null}g(io,Do,{defaults:{event:"pan",threshold:10,pointers:1,direction:k},getTouchAction:function(){var Yt=this.options.direction,Ee=[];return Yt&at&&Ee.push(En),Yt&gt&&Ee.push(Ve),Ee},directionTest:function(Yt){var Ee=this.options,sn=!0,Fn=Yt.distance,rr=Yt.direction,qn=Yt.deltaX,Xr=Yt.deltaY;return rr&Ee.direction||(Ee.direction&at?(rr=qn===0?Mt:qn<0?z:Q,sn=qn!=this.pX,Fn=Math.abs(Yt.deltaX)):(rr=Xr===0?Mt:Xr<0?ht:et,sn=Xr!=this.pY,Fn=Math.abs(Yt.deltaY))),Yt.direction=rr,sn&&Fn>Ee.threshold&&rr&Ee.direction},attrTest:function(Yt){return Do.prototype.attrTest.call(this,Yt)&&(this.state&Hn||!(this.state&Hn)&&this.directionTest(Yt))},emit:function(Yt){this.pX=Yt.deltaX,this.pY=Yt.deltaY;var Ee=eo(Yt.direction);Ee&&(Yt.additionalEvent=this.options.event+Ee),this._super.emit.call(this,Yt)}});function ds(){Do.apply(this,arguments)}g(ds,Do,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[$e]},attrTest:function(Yt){return this._super.attrTest.call(this,Yt)&&(Math.abs(Yt.scale-1)>this.options.threshold||this.state&Hn)},emit:function(Yt){if(Yt.scale!==1){var Ee=Yt.scale<1?"in":"out";Yt.additionalEvent=this.options.event+Ee}this._super.emit.call(this,Yt)}});function Ko(){Ta.apply(this,arguments),this._timer=null,this._input=null}g(Ko,Ta,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Sr]},process:function(Yt){var Ee=this.options,sn=Yt.pointers.length===Ee.pointers,Fn=Yt.distance<Ee.threshold,rr=Yt.deltaTime>Ee.time;if(this._input=Yt,!Fn||!sn||Yt.eventType&(At|nt)&&!rr)this.reset();else if(Yt.eventType&St)this.reset(),this._timer=i(function(){this.state=yr,this.tryEmit()},Ee.time,this);else if(Yt.eventType&At)return yr;return Ei},reset:function(){clearTimeout(this._timer)},emit:function(Yt){this.state===yr&&(Yt&&Yt.eventType&At?this.manager.emit(this.options.event+"up",Yt):(this._input.timeStamp=n(),this.manager.emit(this.options.event,this._input)))}});function jo(){Do.apply(this,arguments)}g(jo,Do,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[$e]},attrTest:function(Yt){return this._super.attrTest.call(this,Yt)&&(Math.abs(Yt.rotation)>this.options.threshold||this.state&Hn)}});function bs(){Do.apply(this,arguments)}g(bs,Do,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:at|gt,pointers:1},getTouchAction:function(){return io.prototype.getTouchAction.call(this)},attrTest:function(Yt){var Ee=this.options.direction,sn;return Ee&(at|gt)?sn=Yt.overallVelocity:Ee&at?sn=Yt.overallVelocityX:Ee&gt&&(sn=Yt.overallVelocityY),this._super.attrTest.call(this,Yt)&&Ee&Yt.offsetDirection&&Yt.distance>this.options.threshold&&Yt.maxPointers==this.options.pointers&&h(sn)>this.options.velocity&&Yt.eventType&At},emit:function(Yt){var Ee=eo(Yt.offsetDirection);Ee&&this.manager.emit(this.options.event+Ee,Yt),this.manager.emit(this.options.event,Yt)}});function Ra(){Ta.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}g(Ra,Ta,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Re]},process:function(Yt){var Ee=this.options,sn=Yt.pointers.length===Ee.pointers,Fn=Yt.distance<Ee.threshold,rr=Yt.deltaTime<Ee.time;if(this.reset(),Yt.eventType&St&&this.count===0)return this.failTimeout();if(Fn&&rr&&sn){if(Yt.eventType!=At)return this.failTimeout();var qn=this.pTime?Yt.timeStamp-this.pTime<Ee.interval:!0,Xr=!this.pCenter||je(this.pCenter,Yt.center)<Ee.posThreshold;this.pTime=Yt.timeStamp,this.pCenter=Yt.center,!Xr||!qn?this.count=1:this.count+=1,this._input=Yt;var Si=this.count%Ee.taps;if(Si===0)return this.hasRequireFailures()?(this._timer=i(function(){this.state=yr,this.tryEmit()},Ee.interval,this),Hn):yr}return Ei},failTimeout:function(){return this._timer=i(function(){this.state=Ei},this.options.interval,this),Ei},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==yr&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Xo(se,Yt){return Yt=Yt||{},Yt.recognizers=M(Yt.recognizers,Xo.defaults.preset),new ao(se,Yt)}Xo.VERSION="2.0.7",Xo.defaults={domEvents:!1,touchAction:Pr,enable:!0,inputTarget:null,inputClass:null,preset:[[jo,{enable:!1}],[ds,{enable:!1},["rotate"]],[bs,{direction:at}],[io,{direction:at},["swipe"]],[Ra],[Ra,{event:"doubletap",taps:2},["tap"]],[Ko]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Bo=1,qs=2;function ao(se,Yt){this.options=f({},Xo.defaults,Yt||{}),this.options.inputTarget=this.options.inputTarget||se,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=se,this.input=Et(this),this.touchAction=new Nn(this,this.options.touchAction),so(this,!0),o(this.options.recognizers,function(Ee){var sn=this.add(new Ee[0](Ee[1]));Ee[2]&&sn.recognizeWith(Ee[2]),Ee[3]&&sn.requireFailure(Ee[3])},this)}ao.prototype={set:function(Yt){return f(this.options,Yt),Yt.touchAction&&this.touchAction.update(),Yt.inputTarget&&(this.input.destroy(),this.input.target=Yt.inputTarget,this.input.init()),this},stop:function(Yt){this.session.stopped=Yt?qs:Bo},recognize:function(Yt){var Ee=this.session;if(!Ee.stopped){this.touchAction.preventDefaults(Yt);var sn,Fn=this.recognizers,rr=Ee.curRecognizer;(!rr||rr&&rr.state&yr)&&(rr=Ee.curRecognizer=null);for(var qn=0;qn<Fn.length;)sn=Fn[qn],Ee.stopped!==qs&&(!rr||sn==rr||sn.canRecognizeWith(rr))?sn.recognize(Yt):sn.reset(),!rr&&sn.state&(Hn|_n|br)&&(rr=Ee.curRecognizer=sn),qn++}},get:function(Yt){if(Yt instanceof Ta)return Yt;for(var Ee=this.recognizers,sn=0;sn<Ee.length;sn++)if(Ee[sn].options.event==Yt)return Ee[sn];return null},add:function(Yt){if(a(Yt,"add",this))return this;var Ee=this.get(Yt.options.event);return Ee&&this.remove(Ee),this.recognizers.push(Yt),Yt.manager=this,this.touchAction.update(),Yt},remove:function(Yt){if(a(Yt,"remove",this))return this;if(Yt=this.get(Yt),Yt){var Ee=this.recognizers,sn=O(Ee,Yt);sn!==-1&&(Ee.splice(sn,1),this.touchAction.update())}return this},on:function(Yt,Ee){if(Yt!==t&&Ee!==t){var sn=this.handlers;return o(A(Yt),function(Fn){sn[Fn]=sn[Fn]||[],sn[Fn].push(Ee)}),this}},off:function(Yt,Ee){if(Yt!==t){var sn=this.handlers;return o(A(Yt),function(Fn){Ee?sn[Fn]&&sn[Fn].splice(O(sn[Fn],Ee),1):delete sn[Fn]}),this}},emit:function(Yt,Ee){this.options.domEvents&&Hs(Yt,Ee);var sn=this.handlers[Yt]&&this.handlers[Yt].slice();if(!(!sn||!sn.length)){Ee.type=Yt,Ee.preventDefault=function(){Ee.srcEvent.preventDefault()};for(var Fn=0;Fn<sn.length;)sn[Fn](Ee),Fn++}},destroy:function(){this.element&&so(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function so(se,Yt){var Ee=se.element;if(!!Ee.style){var sn;o(se.options.cssProps,function(Fn,rr){sn=F(Ee.style,rr),Yt?(se.oldCssProps[sn]=Ee.style[sn],Ee.style[sn]=Fn):Ee.style[sn]=se.oldCssProps[sn]||""}),Yt||(se.oldCssProps={})}}function Hs(se,Yt){var Ee=T.createEvent("Event");Ee.initEvent(se,!0,!0),Ee.gesture=Yt,Yt.target.dispatchEvent(Ee)}f(Xo,{INPUT_START:St,INPUT_MOVE:xt,INPUT_END:At,INPUT_CANCEL:nt,STATE_POSSIBLE:$n,STATE_BEGAN:Hn,STATE_CHANGED:_n,STATE_ENDED:br,STATE_RECOGNIZED:yr,STATE_CANCELLED:Fr,STATE_FAILED:Ei,DIRECTION_NONE:Mt,DIRECTION_LEFT:z,DIRECTION_RIGHT:Q,DIRECTION_UP:ht,DIRECTION_DOWN:et,DIRECTION_HORIZONTAL:at,DIRECTION_VERTICAL:gt,DIRECTION_ALL:k,Manager:ao,Input:X,TouchAction:Nn,TouchInput:ue,MouseInput:on,PointerEventInput:di,TouchMouseInput:tr,SingleTouchInput:pe,Recognizer:Ta,AttrRecognizer:Do,Tap:Ra,Pan:io,Swipe:bs,Pinch:ds,Rotate:jo,Press:Ko,on:x,off:y,each:o,merge:b,extend:v,assign:f,inherit:g,bindFn:m,prefixed:F});var Ne=typeof E!="undefined"?E:typeof self!="undefined"?self:{};Ne.Hammer=Xo,V=function(){return Xo}.call(ct,R,ct,Se),V!==t&&(Se.exports=V)})(window,document,"Hammer")},yMAV:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.Plan=void 0;var V=function(){function E(T,e){this.parentContext=T,this.rootRequest=e}return E}();ct.Plan=V},yP5f:function(Se,ct,R){var V=R("+K+b");function E(T,e){var t=e?V(T.buffer):T.buffer;return new T.constructor(t,T.byteOffset,T.length)}Se.exports=E},"yP6+":function(Se,ct,R){(function(E,T){Se.exports=T(R("q1tI"))})(this,function(V){return function(E){var T={};function e(t){if(T[t])return T[t].exports;var u=T[t]={i:t,l:!1,exports:{}};return E[t].call(u.exports,u,u.exports,e),u.l=!0,u.exports}return e.m=E,e.c=T,e.i=function(t){return t},e.d=function(t,u,s){e.o(t,u)||Object.defineProperty(t,u,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var u=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(u,"a",u),u},e.o=function(t,u){return Object.prototype.hasOwnProperty.call(t,u)},e.p="",e(e.s=546)}([function(E,T,e){var t=e(166),u=e(16),s=t.mix({},t,{assign:t.mix,merge:t.deepMix,cloneDeep:t.clone,isFinite,isNaN,snapEqual:t.isNumberEqual,remove:t.pull,inArray:t.contains,toAllPadding:function(r){var h=0,n=0,i=0,a=0;return s.isNumber(r)||s.isString(r)?h=n=i=a=r:s.isArray(r)?(h=r[0],i=s.isNil(r[1])?r[0]:r[1],a=s.isNil(r[2])?r[0]:r[2],n=s.isNil(r[3])?i:r[3]):s.isObject(r)&&(h=r.top||0,i=r.right||0,a=r.bottom||0,n=r.left||0),[h,i,a,n]},getClipByRange:function(r){var h=r.tl,n=r.br,i=new u.Rect({attrs:{x:h.x,y:h.y,width:n.x-h.x,height:n.y-h.y}});return i}});s.Array={groupToMap:t.groupToMap,group:t.group,merge:t.merge,values:t.valuesOfKey,getRange:t.getRange,firstValue:t.firstValue,remove:t.pull},E.exports=s},function(E,T,e){var t=e(150),u={};t.merge(u,t,{mixin:function(c,r){var h=c.CFG?"CFG":"ATTRS";if(c&&r){c._mixins=r,c[h]=c[h]||{};var n={};u.each(r,function(i){u.augment(c,i);var a=i[h];a&&u.merge(n,a)}),c[h]=u.merge(n,c[h])}}}),E.exports=u},function(E,T,e){var t=e(39),u=e(4),s=function(r,h){if(!!r){var n=void 0;if(u(r))for(var i=0,a=r.length;i<a&&(n=h(r[i],i),n!==!1);i++);else if(t(r)){for(var o in r)if(r.hasOwnProperty(o)&&(n=h(r[o],o),n===!1))break}}};E.exports=s},function(E,T,e){var t=e(31),u=e(166),s=u.mix({assign:u.mix,isFinite,isNaN,Group:t.Group,Event:t.Event},u);E.exports=s},function(E,T,e){var t=e(17),u=Array.isArray?Array.isArray:function(s){return t(s,"Array")};E.exports=u},function(E,T,e){var t=e(0),u=e(132),s={version:"3.5.15",renderer:"canvas",trackingInfo:{},animate:!0,widthRatio:{column:1/2,rose:.9999999,multiplePie:1/1.3},showSinglePoint:!1,connectNulls:!1,scales:{},registerTheme:function(r,h){u[r]=h},setTheme:function(r){var h={};t.isObject(r)?h=r:t.indexOf(Object.keys(u),r)!==-1?h=u[r]:h=u.default,t.deepMix(s,h)}};s.setTheme("default"),E.exports=s},function(E,T){var e=function(u){return u==null};E.exports=e},function(E,T,e){var t=e(1),u=e(331),s=e(133),c=e(76),r=function i(a){i.superclass.constructor.call(this,a)};r.ATTRS={},t.extend(r,s);var h={matrix:"matrix",path:"path",points:"points",lineDash:"lineDash"};function n(i){for(var a=[],o=0;o<i.length;o++)t.isArray(i[o])?a.push([].concat(i[o])):a.push(i[o]);return a}t.augment(r,u,{isShape:!0,drawInner:function(a){var o=this,l=o._attrs;o.createPath(a);var f=a.globalAlpha;if(o.hasFill()){var v=l.fillOpacity;!t.isNil(v)&&v!==1?(a.globalAlpha=v,a.fill(),a.globalAlpha=f):a.fill()}if(o.hasStroke()){var b=o._attrs.lineWidth;if(b>0){var g=l.strokeOpacity;!t.isNil(g)&&g!==1&&(a.globalAlpha=g),a.stroke()}}o.afterPath(a)},afterPath:function(){},isHitBox:function(){return!0},isHit:function(a,o){var l=this,f=[a,o,1];if(l.invert(f),l.isHitBox()){var v=l.getBBox();if(v&&!c.box(v.minX,v.maxX,v.minY,v.maxY,f[0],f[1]))return!1}var b=l._attrs.clip;if(b){if(b.invert(f,l.get("canvas")),b.isPointInPath(f[0],f[1]))return l.isPointInPath(f[0],f[1])}else return l.isPointInPath(f[0],f[1]);return!1},calculateBox:function(){return null},getHitLineWidth:function(){var a=this._attrs,o=a.lineAppendWidth||0,l=a.lineWidth||0;return l+o},clearTotalMatrix:function(){this._cfg.totalMatrix=null,this._cfg.region=null},clearBBox:function(){this._cfg.box=null,this._cfg.region=null},getBBox:function(){var a=this._cfg.box;return a||(a=this.calculateBox(),a&&(a.x=a.minX,a.y=a.minY,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY),this._cfg.box=a),a},clone:function(){var a=this,o=null,l=a._attrs,f={};return t.each(l,function(v,b){h[b]&&t.isArray(l[b])?f[b]=n(l[b]):f[b]=l[b]}),o=new a.constructor({attrs:f}),o._cfg.zIndex=a._cfg.zIndex,o}}),E.exports=r},function(E,T,e){function t(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function u(M,x){M.prototype=Object.create(x.prototype),M.prototype.constructor=M,M.__proto__=x}var s=e(65),c=e(227),r=e(120),h=e(0),n=e(5),i=e(294),a=e(9),o=e(300),l=e(298),f=e(299),v=e(313),b=["color","shape","size"],g="_origin";function m(M){return(h.isString(M)||h.isPlainObject(M))&&(M=[M]),h.each(M,function(x,y){h.isObject(x)||(M[y]={type:x})}),M}var _=function(M){u(y,M);var x=y.prototype;x.getDefaultCfg=function(){return{_id:null,type:"base",coord:null,attrs:{},view:null,data:[],scales:{},container:null,labelContainer:null,shapeContainer:null,attrOptions:{},styleOptions:null,selectedOptions:null,activedOptions:null,hasDefaultAdjust:!1,adjusts:null,shapeType:null,generatePoints:!1,sortable:!1,labelCfg:null,shareTooltip:!0,tooltipCfg:null,animate:!0,animateCfg:null,visible:!0}};function y(S){var P;return P=M.call(this,S)||this,P.viewTheme=P.get("viewTheme"),h.assign(t(P),o,l,f),P.get("container")&&P._initContainer(),P._initOptions(),P}return x._initOptions=function(){var P=this.get("adjusts");P&&(P=m(P),this.set("adjusts",P))},x._createScale=function(P,A){var O=this.get("scales"),L=O[P];return L||(L=this.get("view").createScale(P,A),O[P]=L),L},x._setAttrOptions=function(P,A){var O=this.get("attrOptions");O[P]=A},x._createAttrOption=function(P,A,O,L){var H={};H.field=A,O?h.isFunction(O)?H.callback=O:H.values=O:P!=="color"&&(H.values=L),this._setAttrOptions(P,H)},x.position=function(P){return this._setAttrOptions("position",{field:P}),this},x.color=function(P,A){var O=this.viewTheme||n;return this._createAttrOption("color",P,A,O.colors),this},x.size=function(P,A){var O=this.viewTheme||n;return this._createAttrOption("size",P,A,O.sizes),this},x.shape=function(P,A){var O=this.viewTheme||n,L=this.get("type"),H=O.shapes[L]||[];return this._createAttrOption("shape",P,A,H),this},x.opacity=function(P,A){var O=this.viewTheme||n;return this._createAttrOption("opacity",P,A,O.opacities),this},x.style=function(P,A){var O=this.get("styleOptions");O||(O={},this.set("styleOptions",O)),h.isObject(P)&&(A=P,P=null);var L;return P&&(L=v(P)),O.fields=L,O.style=A,this},x.label=function(P,A,O){var L=this,H=L.get("labelCfg");H||(H={},L.set("labelCfg",H));var F;return P&&(F=v(P)),H.fields=F,h.isFunction(A)?(O||(O={}),H.callback=A):h.isObject(A)&&(O=A),H.globalCfg=O,this},x.tooltip=function(P,A){var O=this.get("tooltipCfg");if(O||(O={}),P===!1)this.set("tooltipCfg",!1);else{var L;P&&(L=v(P)),O.fields=L,O.cfg=A}return this.set("tooltipCfg",O),this},x.animate=function(P){return this.set("animateCfg",P),this},x.active=function(P,A){return P===!1?this.set("allowActive",!1):h.isObject(P)?(this.set("allowActive",!0),this.set("activedOptions",P)):(this.set("allowActive",!0),this.set("activedOptions",A)),this},x.adjust=function(P){return this.get("hasDefaultAdjust")||(P&&(P=m(P)),this.set("adjusts",P)),this},x.select=function(P,A){return P===!1?this.set("allowSelect",!1):h.isObject(P)?(this.set("allowSelect",!0),this.set("selectedOptions",P)):(this.set("allowSelect",!0),this.set("selectedOptions",A)),this},x.hasAdjust=function(P){var A=this,O=A.get("adjusts");if(!P)return!1;var L=!1;return h.each(O,function(H){if(H.type===P)return L=!0,!1}),L},x.hasStack=function(){var P=this.get("isStacked");return h.isNil(P)&&(P=this.hasAdjust("stack"),this.set("isStacked",P)),P},x.isInCircle=function(){var P=this.get("coord");return P&&P.isPolar},x._initContainer=function(){var P=this,A=P.get("shapeContainer");if(!A){var O=P.get("container"),L=P.get("view"),H=L&&L.get("_id");A=O.addGroup({viewId:H,visible:P.get("visible")}),P.set("shapeContainer",A)}},x.init=function(){var P=this;if(P._initContainer(),P._initAttrs(),P.get("tooltipCfg")&&P.get("tooltipCfg").fields){var A=P.get("tooltipCfg").fields;h.each(A,function(L){P._createScale(L)})}var O=P._processData();P.get("adjusts")&&P._adjust(O),P.set("dataArray",O)},x._initAttrs=function(){var P=this,A=P.get("attrs"),O=P.get("attrOptions"),L=P.get("coord"),H=P.viewTheme||n,F=!1;for(var Z in O)if(O.hasOwnProperty(Z)){var G=O[Z],U=h.upperFirst(Z),Y=v(G.field);Z==="position"&&(G.coord=L,Y.length===1&&L.type==="theta"&&(Y.unshift("1"),F=!0));for(var J=[],rt=0;rt<Y.length;rt++){var ft=Y[rt],dt=P._createScale(ft);Z==="color"&&h.isNil(G.values)&&(dt.values.length<=8?G.values=F?H.colors_pie:H.colors:dt.values.length<=16?G.values=F?H.colors_pie_16:H.colors_16:G.values=H.colors_24,h.isNil(G.values)&&(G.values=H.colors)),J.push(dt)}if(L.type==="theta"&&Z==="position"&&J.length>1){var ut=J[1],Lt=0,Ft=Math.max.apply(null,ut.values);isFinite(Ft)||(Ft=1),ut.change({nice:!1,min:Lt,max:Ft})}G.scales=J;var Ot=new s[U](G);A[Z]=Ot}},x._processData=function(){for(var P=this,A=this.get("data"),O=[],L=this._groupData(A),H=0;H<L.length;H++){var F=L[H],Z=P._saveOrigin(F);O.push(P._numberic(Z))}return O},x._groupData=function(P){var A=this._getGroupScales(),O=A.map(function(L){return L.field});return h.Array.group(P,O)},x._saveOrigin=function(P){for(var A=[],O=0;O<P.length;O++){var L=P[O],H={};for(var F in L)H[F]=L[F];H[g]=L,A.push(H)}return A},x._numberic=function(P){for(var A=this.getAttr("position"),O=A.scales,L=[],H=0;H<P.length;H++){for(var F=P[H],Z=!0,G=0;G<Math.min(2,O.length);G++){var U=O[G];if(U.isCategory){var Y=U.field;F[Y]=U.translate(F[Y]),Number.isNaN(F[Y])&&(Z=!1)}}Z&&L.push(F)}return L},x._getGroupScales=function(){var P=this,A=P.get("groupScales");if(!A){A=[];var O=P.get("attrs");h.each(O,function(L){if(b.includes(L.type)){var H=L.scales;h.each(H,function(F){F.isCategory&&h.indexOf(A,F)===-1&&A.push(F)})}}),P.set("groupScales",A)}return A},x._updateStackRange=function(P,A,O){for(var L=h.Array.merge(O),H=A.min,F=A.max,Z=0;Z<L.length;Z++){var G=L[Z];if(!!h.isArray(G[P])){var U=Math.min.apply(null,G[P]),Y=Math.max.apply(null,G[P]);U<H&&(H=U),Y>F&&(F=Y)}}(H<A.min||F>A.max)&&A.change({min:H,max:F})},x._adjust=function(P){if(!(!P||!P.length)){var A=this,O=A.get("adjusts"),L=this.viewTheme||n,H=A.getYScale(),F=A.getXScale(),Z=F.field,G=H?H.field:null;h.each(O,function(U){var Y=h.mix({xField:Z,yField:G},U),J=h.upperFirst(U.type);if(J==="Dodge"){var rt=[];if(F.isCategory||F.isIdentity)rt.push("x");else if(!H)rt.push("y");else throw new Error("dodge is not support linear attribute, please use category attribute!");Y.adjustNames=rt,Y.dodgeRatio=Y.dodgeRatio||L.widthRatio.column}else if(J==="Stack"){var ft=A.get("coord");if(!H){Y.height=ft.getHeight();var dt=A.getDefaultValue("size")||3;Y.size=dt}!ft.isTransposed&&h.isNil(Y.reverseOrder)&&(Y.reverseOrder=!0)}var ut=new c[J](Y);ut.processAdjust(P),J==="Stack"&&H&&A._updateStackRange(G,H,P)})}},x.setCoord=function(P){this.set("coord",P);var A=this.getAttr("position"),O=this.get("shapeContainer");O.setMatrix(P.matrix),A&&(A.coord=P)},x.paint=function(){var P=this,A=P.get("dataArray"),O=[],L=P.getShapeFactory();L.setCoord(P.get("coord")),P.set("shapeFactory",L);var H=P.get("shapeContainer");P._beforeMapping(A);for(var F=0;F<A.length;F++){var Z=A[F],G=F;Z=P._mapping(Z),O.push(Z),P.draw(Z,H,L,G)}P.get("labelCfg")&&P._addLabels(h.union.apply(null,O),H.get("children")),P.get("sortable")?P.set("dataArray",O):P._sort(O)},x._sort=function(P){var A=this,O=A.getXScale(),L=O.field;h.each(P,function(H){H.sort(function(F,Z){return O.translate(F[g][L])-O.translate(Z[g][L])})}),A.set("dataArray",P)},x._beforeMapping=function(P){var A=this;if(A.get("sortable")){var O=A.getXScale(),L=O.field;h.each(P,function(H){H.sort(function(F,Z){return O.translate(F[L])-O.translate(Z[L])})})}A.get("generatePoints")&&(h.each(P,function(H){A._generatePoints(H)}),h.each(P,function(H,F){var Z=P[F+1];Z&&(H[0].nextPoints=Z[0].points)}))},x._addLabels=function(P,A){var O=this,L=O.get("type"),H=O.get("viewTheme")||n,F=O.get("coord"),Z=i.getLabelsClass(F.type,L),G=O.get("container"),U=h.map(O.get("labelCfg").fields,function(J){return O._createScale(J)}),Y=G.addGroup(Z,{_id:this.get("_id"),labelCfg:h.mix({scales:U},O.get("labelCfg")),coord:F,geom:O,geomType:L,yScale:O.getYScale(),viewTheme:H,visible:O.get("visible")});Y.showLabels(P,A),O.set("labelContainer",Y)},x.getShapeFactory=function(){var P=this.get("shapeFactory");if(!P){var A=this.get("shapeType");P=a.getShapeFactory(A),this.set("shapeFactory",P)}return P},x._generatePoints=function(P){for(var A=this,O=A.getShapeFactory(),L=A.getAttr("shape"),H=0;H<P.length;H++){var F=P[H],Z=A.createShapePointsCfg(F),G=L?A._getAttrValues(L,F):null,U=O.getShapePoints(G,Z);F.points=U}},x.createShapePointsCfg=function(P){var A=this.getXScale(),O=this.getYScale(),L=this._normalizeValues(P[A.field],A),H;return O?H=this._normalizeValues(P[O.field],O):H=P.y?P.y:.1,{x:L,y:H,y0:O?O.scale(this.getYMinValue()):void 0}},x.getYMinValue=function(){var P=this.getYScale(),A=P.min,O=P.max,L;return A>=0?L=A:O<=0?L=O:L=0,L},x._normalizeValues=function(P,A){var O=[];if(h.isArray(P))for(var L=0;L<P.length;L++){var H=P[L];O.push(A.scale(H))}else O=A.scale(P);return O},x._mapping=function(P){for(var A=this,O=A.get("attrs"),L=[],H=0;H<P.length;H++){var F=P[H],Z={};Z[g]=F[g],Z.points=F.points,Z.nextPoints=F.nextPoints;for(var G in O)if(O.hasOwnProperty(G)){var U=O[G],Y=U.names,J=A._getAttrValues(U,F);if(Y.length>1)for(var rt=0;rt<J.length;rt++){var ft=J[rt],dt=Y[rt];Z[dt]=h.isArray(ft)&&ft.length===1?ft[0]:ft}else Z[Y[0]]=J.length===1?J[0]:J}L.push(Z)}return L},x._getAttrValues=function(P,A){for(var O=P.scales,L=[],H=0;H<O.length;H++){var F=O[H],Z=F.field;F.type==="identity"?L.push(F.value):L.push(A[Z])}var G=P.mapping.apply(P,L);return G},x.getAttrValue=function(P,A){var O=this.getAttr(P),L=null;if(O){var H=this._getAttrValues(O,A);L=H[0]}return L},x.getDefaultValue=function(P){var A=this.get(P),O=this.getAttr(P);if(O){var L=O.getScale(P);L.type==="identity"&&(A=L.value)}return A},x.draw=function(P,A,O,L){for(var H=this,F=0;F<P.length;F++){var Z=P[F];H.drawPoint(Z,A,O,L+F)}},x.getCallbackCfg=function(P,A,O){if(!P)return A;var L={},H=P.map(function(F){return O[F]});return h.each(A,function(F,Z){h.isFunction(F)?L[Z]=F.apply(null,H):L[Z]=F}),L},x._getShapeId=function(P){var A=this.get("_id"),O=this.get("keyFields");if(O&&O.length>0)h.each(O,function(rt){A+="-"+P[rt]});else{var L=this.get("type"),H=this.getXScale(),F=this.getYScale(),Z=H.field||"x",G=F.field||"y",U=P[G],Y;H.isIdentity?Y=H.value:Y=P[Z],L==="interval"||L==="schema"?A+="-"+Y:L==="line"||L==="area"||L==="path"?A+="-"+L:A+="-"+Y+"-"+U;var J=this._getGroupScales();h.isEmpty(J)||h.each(J,function(rt){var ft=rt.field;rt.type!=="identity"&&(A+="-"+P[ft])})}return A},x.getDrawCfg=function(P){var A=this,O={origin:P,x:P.x,y:P.y,color:P.color,size:P.size,shape:P.shape,isInCircle:A.isInCircle(),opacity:P.opacity},L=A.get("styleOptions");return L&&L.style&&(O.style=A.getCallbackCfg(L.fields,L.style,P[g])),A.get("generatePoints")&&(O.points=P.points,O.nextPoints=P.nextPoints),A.get("animate")&&(O._id=A._getShapeId(P[g])),O},x.appendShapeInfo=function(P,A){P&&(P.setSilent("index",A),P.setSilent("coord",this.get("coord")),this.get("animate")&&this.get("animateCfg")&&P.setSilent("animateCfg",this.get("animateCfg")))},x._applyViewThemeShapeStyle=function(P,A,O){var L=this,H=L.viewTheme||n,F=O.name;A?A&&(A.indexOf("hollow")>-1||A.indexOf("liquid")>-1)&&(F="hollow"+h.upperFirst(F)):O.defaultShapeType.indexOf("hollow")>-1&&(F="hollow"+h.upperFirst(F));var Z=H.shape[F]||{};P.style=h.mix({},Z,P.style)},x.drawPoint=function(P,A,O,L){var H=this,F=P.shape,Z=H.getDrawCfg(P);H._applyViewThemeShapeStyle(Z,F,O);var G=O.drawShape(F,Z,A);H.appendShapeInfo(G,L)},x.getAttr=function(P){return this.get("attrs")[P]},x.getXScale=function(){return this.getAttr("position").scales[0]},x.getYScale=function(){return this.getAttr("position").scales[1]},x.getShapes=function(){var P=[],A=this.get("shapeContainer"),O=A.get("children");return h.each(O,function(L){L.get("origin")&&P.push(L)}),P},x.getAttrsForLegend=function(){var P=this.get("attrs"),A=[];return h.each(P,function(O){b.includes(O.type)&&A.push(O)}),A},x.getFieldsForLegend=function(){var P=[],A=this.get("attrOptions");return h.each(b,function(O){var L=A[O];L&&L.field&&h.isString(L.field)&&(P=P.concat(L.field.split("*")))}),h.uniq(P)},x.changeVisible=function(P,A){var O=this;O.set("visible",P);var L=this.get("shapeContainer");L&&L.set("visible",P);var H=this.get("labelContainer");if(H&&H.set("visible",P),!A&&L){var F=L.get("canvas");F.draw()}},x.reset=function(){this.set("attrOptions",{}),this.clearInner()},x.clearInner=function(){this.clearActivedShapes(),this.clearSelected();var P=this.get("shapeContainer");P&&P.clear();var A=this.get("labelContainer");A&&A.remove(),this.set("attrs",{}),this.set("groupScales",null),this.set("labelContainer",null),this.set("xDistance",null),this.set("isStacked",null)},x.clear=function(){this.clearInner(),this.set("scales",{})},x.destroy=function(){this.clear();var P=this.get("shapeContainer");P&&P.remove(),this.offEvents(),M.prototype.destroy.call(this)},x.bindEvents=function(){this.get("view")&&(this._bindActiveAction(),this._bindSelectedAction())},x.offEvents=function(){this.get("view")&&(this._offActiveAction(),this._offSelectedAction())},y}(r);E.exports=_},function(E,T,e){var t=e(0),u=e(25),s=t.PathUtil,c={},r={_coord:null,draw:function(i,a){return this.drawShape?this.drawShape(i,a):null},setCoord:function(i){this._coord=i},parsePath:function(i,a){var o=this._coord;return i=s.parsePathString(i),o.isPolar&&a!==!1?i=u.convertPolarPath(o,i):i=u.convertNormalPath(o,i),i},parsePoint:function(i){var a=this._coord;return a.convertPoint(i)},parsePoints:function(i){var a=this._coord,o=[];return t.each(i,function(l){o.push(a.convertPoint(l))}),o}},h={defaultShapeType:null,setCoord:function(i){this._coord=i},getShape:function(i){var a=this;t.isArray(i)&&(i=i[0]);var o=a[i]||a[a.defaultShapeType];return o._coord=a._coord,o},getShapePoints:function(i,a){var o=this.getShape(i),l=o.getPoints||o.getShapePoints||this.getDefaultPoints,f=l(a);return f},getDefaultPoints:function(){return[]},getMarkerCfg:function(i,a){var o=this.getShape(i);if(!o.getMarkerCfg){var l=this.defaultShapeType;o=this.getShape(l)}return o.getMarkerCfg(a)},getSelectedCfg:function(){return{}},drawShape:function(i,a,o){var l=this.getShape(i),f=l.draw(a,o);return f&&(f.setSilent("origin",a.origin),f._id=a.yIndex?a._id+a.yIndex:a._id,f.name=this.name),f}};c.registerFactory=function(n,i){var a=t.upperFirst(n),o=t.assign({},h,i);return c[a]=o,o.name=n,o},c.registerShape=function(n,i,a){var o=t.upperFirst(n),l=c[o],f=t.assign({},r,a);return l[i]=f,f},c.getShapeFactory=function(n){var i=this;n=n||"point";var a=t.upperFirst(n);return i[a]},E.exports=c},function(E,T){function e(u,s){for(var c in s)s.hasOwnProperty(c)&&c!=="constructor"&&s[c]!==void 0&&(u[c]=s[c])}var t=function(s,c,r,h){return c&&e(s,c),r&&e(s,r),h&&e(s,h),s};E.exports=t},function(E,T,e){var t=e(17),u=function(c){return t(c,"Number")};E.exports=u},function(E,T,e){"use strict";var t=e(89);e.d(T,"f",function(){return t.h}),e.d(T,"e",function(){return t.g}),e.d(T,"d",function(){return t.f});var u=e(440);e.d(T,"c",function(){return u.b}),e.d(T,"b",function(){return u.a});var s=e(439);e.d(T,"a",function(){return s.a})},function(E,T,e){"use strict";e.d(T,"d",function(){return h}),e.d(T,"a",function(){return n}),e.d(T,"b",function(){return o}),e.d(T,"c",function(){return l}),T.g=f,T.e=v,T.f=b;var t=e(442),u=e(103),s=e.i(t.a)("start","end","cancel","interrupt"),c=[],r=0,h=1,n=2,i=3,a=4,o=5,l=6;T.h=function(m,_,M,x,y,S){var P=m.__transition;if(!P)m.__transition={};else if(M in P)return;g(m,M,{name:_,index:x,group:y,on:s,tween:c,time:S.time,delay:S.delay,duration:S.duration,ease:S.ease,timer:null,state:r})};function f(m,_){var M=b(m,_);if(M.state>r)throw new Error("too late; already scheduled");return M}function v(m,_){var M=b(m,_);if(M.state>i)throw new Error("too late; already running");return M}function b(m,_){var M=m.__transition;if(!M||!(M=M[_]))throw new Error("transition not found");return M}function g(m,_,M){var x=m.__transition,y;x[_]=M,M.timer=e.i(u.timer)(S,0,M.time);function S(L){M.state=h,M.timer.restart(P,M.delay,M.time),M.delay<=L&&P(L-M.delay)}function P(L){var H,F,Z,G;if(M.state!==h)return O();for(H in x)if(G=x[H],G.name===M.name){if(G.state===i)return e.i(u.timeout)(P);G.state===a?(G.state=l,G.timer.stop(),G.on.call("interrupt",m,m.__data__,G.index,G.group),delete x[H]):+H<_&&(G.state=l,G.timer.stop(),G.on.call("cancel",m,m.__data__,G.index,G.group),delete x[H])}if(e.i(u.timeout)(function(){M.state===i&&(M.state=a,M.timer.restart(A,M.delay,M.time),A(L))}),M.state=n,M.on.call("start",m,m.__data__,M.index,M.group),M.state===n){for(M.state=i,y=new Array(Z=M.tween.length),H=0,F=-1;H<Z;++H)(G=M.tween[H].value.call(m,m.__data__,M.index,M.group))&&(y[++F]=G);y.length=F+1}}function A(L){for(var H=L<M.duration?M.ease.call(null,L/M.duration):(M.timer.restart(O),M.state=o,1),F=-1,Z=y.length;++F<Z;)y[F].call(m,H);M.state===o&&(M.on.call("end",m,m.__data__,M.index,M.group),O())}function O(){M.state=l,M.timer.stop(),delete x[_];for(var L in x)return;delete m.__transition}}},function(E,T,e){var t=e(17),u=function(c){return t(c,"Function")};E.exports=u},function(E,T,e){var t=e(17),u=function(c){return t(c,"String")};E.exports=u},function(E,T,e){var t=e(31);E.exports=t},function(E,T){var e={}.toString,t=function(s,c){return e.call(s)==="[object "+c+"]"};E.exports=t},function(E,T,e){"use strict";e.d(T,"c",function(){return J}),T.b=rt;var t=e(505),u=e(506),s=e(493),c=e(487),r=e(216),h=e(492),n=e(496),i=e(498),a=e(501),o=e(508),l=e(484),f=e(500),v=e(499),b=e(507),g=e(491),m=e(490),_=e(483),M=e(218),x=e(502),y=e(485),S=e(509),P=e(494),A=e(503),O=e(497),L=e(482),H=e(495),F=e(504),Z=e(486),G=e(488),U=e(99),Y=e(489),J=[null];function rt(dt,ut){this._groups=dt,this._parents=ut}function ft(){return new rt([[document.documentElement]],J)}rt.prototype=ft.prototype={constructor:rt,select:t.a,selectAll:u.a,filter:s.a,data:c.a,enter:r.a,exit:h.a,join:n.a,merge:i.a,order:a.a,sort:o.a,call:l.a,nodes:f.a,node:v.a,size:b.a,empty:g.a,each:m.a,attr:_.a,style:M.b,property:x.a,classed:y.a,text:S.a,html:P.a,raise:A.a,lower:O.a,append:L.a,insert:H.a,remove:F.a,clone:Z.a,datum:G.a,on:U.c,dispatch:Y.a},T.a=ft},function(E,T){E.exports={FONT_FAMILY:'"-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",SimSun, "sans-serif"'}},function(E,T,e){function t(f){return function(){var v=r(f),b;if(c()){var g=r(this).constructor;b=Reflect.construct(v,arguments,g)}else b=v.apply(this,arguments);return u(this,b)}}function u(f,v){return v&&(typeof v=="object"||typeof v=="function")?v:s(f)}function s(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function r(f){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},r(f)}function h(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var n=e(3),i=e(109),a=e(36),o=["min","max","median","start","end"],l=function(f){h(b,f);var v=t(b);function b(){return f.apply(this,arguments)||this}var g=b.prototype;return g.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return n.mix({},_,{xScales:null,yScales:null,el:null})},g.render=function(){},g.clear=function(){var _=this,M=_.get("el");M&&M.remove(),this.set("el",null)},g.destroy=function(){this.clear(),f.prototype.destroy.call(this)},g.changeVisible=function(_){var M=this;M.set("visible",_);var x=M.get("el");!x||(x.set?x.set("visible",_):x.style.display=_?"":"none")},g.parsePoint=function(_,M){var x=this,y=x.get("xScales"),S=x.get("yScales");n.isFunction(M)&&(M=M(y,S));var P,A;if(n.isArray(M)&&n.isString(M[0])&&M[0].indexOf("%")!==-1)return this._parsePercentPoint(_,M);if(n.isArray(M))P=x._getNormalizedValue(M[0],i.getFirstScale(y)),A=x._getNormalizedValue(M[1],i.getFirstScale(S));else for(var O in M){var L=M[O];y[O]&&(P=x._getNormalizedValue(L,y[O])),S[O]&&(A=x._getNormalizedValue(L,S[O],"y"))}return!n.isNil(P)&&!n.isNil(A)&&!isNaN(P)&&!isNaN(A)?_.convert({x:P,y:A}):null},g._getNormalizedValue=function(_,M){var x;if(n.indexOf(o,_)!==-1){var y;_==="start"?x=0:_==="end"?x=1:_==="median"?(y=M.isCategory?(M.values.length-1)/2:(M.min+M.max)/2,x=M.scale(y)):(M.isCategory?y=_==="min"?0:M.values.length-1:y=M[_],x=M.scale(y))}else x=M.scale(_);return x},g._parsePercentPoint=function(_,M){var x=parseFloat(M[0])/100,y=parseFloat(M[1])/100,S=_.start,P=_.end,A={x:Math.min(S.x,P.x),y:Math.min(S.y,P.y)},O=_.width*x+A.x,L=_.height*y+A.y;return{x:O,y:L}},b}(a);E.exports=l},function(E,T){var e=function(u){return u!==null&&typeof u!="function"&&isFinite(u.length)};E.exports=e},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(478);e.d(T,"create",function(){return t.a});var u=e(61);e.d(T,"creator",function(){return u.a});var s=e(479);e.d(T,"local",function(){return s.a});var c=e(214);e.d(T,"matcher",function(){return c.a});var r=e(480);e.d(T,"mouse",function(){return r.a});var h=e(97);e.d(T,"namespace",function(){return h.a});var n=e(98);e.d(T,"namespaces",function(){return n.a});var i=e(62);e.d(T,"clientPoint",function(){return i.a});var a=e(215);e.d(T,"select",function(){return a.a});var o=e(481);e.d(T,"selectAll",function(){return o.a});var l=e(18);e.d(T,"selection",function(){return l.a});var f=e(100);e.d(T,"selector",function(){return f.a});var v=e(219);e.d(T,"selectorAll",function(){return v.a});var b=e(218);e.d(T,"style",function(){return b.a});var g=e(510);e.d(T,"touch",function(){return g.a});var m=e(511);e.d(T,"touches",function(){return m.a});var _=e(102);e.d(T,"window",function(){return _.a});var M=e(99);e.d(T,"event",function(){return M.a}),e.d(T,"customEvent",function(){return M.b})},function(E,T,e){var t=e(0),u={splitPoints:function(c){var r=[],h=c.x,n=c.y;return n=t.isArray(n)?n:[n],t.each(n,function(i,a){var o={x:t.isArray(h)?h[a]:h,y:i};r.push(o)}),r},addFillAttrs:function(c,r){r.color&&(c.fill=r.color),t.isNumber(r.opacity)&&(c.opacity=c.fillOpacity=r.opacity)},addStrokeAttrs:function(c,r){r.color&&(c.stroke=r.color),t.isNumber(r.opacity)&&(c.opacity=c.strokeOpacity=r.opacity)}};E.exports=u},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function f(v,b){for(var g=0;g<b.length;g++){var m=b[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(v,m.key,m)}}return function(v,b,g){return b&&f(v.prototype,b),g&&f(v,g),v}}(),u=e(42),s=h(u),c=e(29),r=h(c);function h(f){return f&&f.__esModule?f:{default:f}}function n(f,v){if(!(f instanceof v))throw new TypeError("Cannot call a class as a function")}function i(f,v){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:f}function a(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(f,v):f.__proto__=v)}var o=function(f){a(v,f);function v(b,g){n(this,v);var m=i(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,b));return m.getParentInfo=function(){return{id:m.id,name:m.name}},m.name=g,m}return t(v,[{key:"getChildContext",value:function(){return{addElement:this.context.addElement,updateElement:this.context.updateElement,deleteElement:this.context.deleteElement,createId:this.context.createId,getParentInfo:this.getParentInfo,getViewId:this.context.getViewId}}},{key:"componentWillMount",value:function(){var g=this.context;this.id=g.createId(),g.addElement(this.name,this.id,this.props,g.getParentInfo(),g.getViewId())}},{key:"componentWillReceiveProps",value:function(g){this.context.updateElement(this.name,this.id,g,this.context.getParentInfo(),this.context.getViewId())}},{key:"componentWillUnmount",value:function(){this.context.deleteElement(this.name,this.id)}},{key:"render",value:function(){var g=this.props.children;return g?g.length&&(g=s.default.createElement("div",null,g)):g=null,g}}]),v}(u.Component);o.contextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},o.childContextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func};function l(f){var v=function(b){a(g,b);function g(m){return n(this,g),i(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,m,f))}return t(g,[{key:"getChildContext",value:function(){return{addElement:this.context.addElement,updateElement:this.context.updateElement,deleteElement:this.context.deleteElement,createId:this.context.createId,getParentInfo:this.getParentInfo,getViewId:this.context.getViewId}}}]),g}(o);return v.contextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},v.childContextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},v.displayName=f,v}o.generateBaseTypedComponent=l,T.default=o},function(E,T,e){var t=e(0),u=e(314);function s(a,o){if(!a.length)return[];for(var l=[],f=0,v=a.length;f<v;f++){var b=a[f];f===0?l.push(["M",b.x,b.y]):l.push(["L",b.x,b.y])}return o&&l.push(["Z"]),l}function c(a,o){var l=a.getCenter(),f=Math.sqrt(Math.pow(o.x-l.x,2)+Math.pow(o.y-l.y,2));return f}function r(a,o){for(var l=a.length,f=[a[0]],v=1;v<l;v=v+2){var b=o.convertPoint({x:a[v],y:a[v+1]});f.push(b.x,b.y)}return f}function h(a,o,l){var f=l.isTransposed,v=l.startAngle,b=l.endAngle,g={x:a[1],y:a[2]},m={x:o[1],y:o[2]},_=[],M=f?"y":"x",x=Math.abs(m[M]-g[M])*(b-v),y=m[M]>=g[M]?1:0,S=x>Math.PI?1:0,P=l.convertPoint(m),A=c(l,P);if(A>=.5)if(x===Math.PI*2){var O={x:(m.x+g.x)/2,y:(m.y+g.y)/2},L=l.convertPoint(O);_.push(["A",A,A,0,S,y,L.x,L.y]),_.push(["A",A,A,0,S,y,P.x,P.y])}else _.push(["A",A,A,0,S,y,P.x,P.y]);return _}function n(a){t.each(a,function(o,l){var f=o;if(f[0].toLowerCase()==="a"){var v=a[l-1],b=a[l+1];b&&b[0].toLowerCase()==="a"?v&&v[0].toLowerCase()==="l"&&(v[0]="M"):v&&v[0].toLowerCase()==="a"&&b&&b[0].toLowerCase()==="l"&&(b[0]="M")}})}var i={getLinePath:function(o,l){return s(o,l)},getSplinePath:function(o,l,f){var v=[],b=o[0],g=null;if(o.length<=2)return i.getLinePath(o,l);t.each(o,function(_){(!g||!(g.x===_.x&&g.y===_.y))&&(v.push(_.x),v.push(_.y),g=_)}),f=f||[[0,0],[1,1]];var m=u.catmullRom2bezier(v,l,f);return m.unshift(["M",b.x,b.y]),m},getPointRadius:function(o,l){var f=c(o,l);return f},getPointAngle:function(o,l){var f=o.getCenter(),v=Math.atan2(l.y-f.y,l.x-f.x);return v},convertNormalPath:function(o,l){var f=[];return t.each(l,function(v){var b=v[0];switch(b.toLowerCase()){case"m":case"l":case"c":f.push(r(v,o));break;case"z":default:f.push(v);break}}),f},convertPolarPath:function(o,l){var f=[],v,b,g,m;return t.each(l,function(_,M){var x=_[0];switch(x.toLowerCase()){case"m":case"c":case"q":f.push(r(_,o));break;case"l":v=l[M-1],b=_,g=o.isTransposed,m=g?v[v.length-2]===b[1]:v[v.length-1]===b[2],m?f=f.concat(h(v,b,o)):f.push(r(_,o));break;case"z":default:f.push(_);break}}),n(f),f}};E.exports=i},function(E,T,e){var t=e(10),u=e(2),s=e(39),c=e(6),r=function(){var h=n.prototype;h._initDefaultCfg=function(){this.type="base",this.formatter=null,this.range=[0,1],this.ticks=null,this.values=[]};function n(i){this._initDefaultCfg(),t(this,i),this.init()}return h.init=function(){},h.getTicks=function(){var a=this,o=a.ticks,l=[];return u(o,function(f){var v;s(f)?v=f:v={text:a.getText(f),tickValue:f,value:a.scale(f)},l.push(v)}),l},h.getText=function(a,o){var l=this.formatter;return a=l?l(a,o):a,(c(a)||!a.toString)&&(a=""),a.toString()},h.rangeMin=function(){return this.range[0]},h.rangeMax=function(){var a=this.range;return a[a.length-1]},h.invert=function(a){return a},h.translate=function(a){return a},h.scale=function(a){return a},h.clone=function(){var a=this,o=a.constructor,l={};return u(a,function(f,v){l[v]=a[v]}),new o(l)},h.change=function(a){return this.ticks=null,t(this,a),this.init(),this},n}();E.exports=r},function(E,T,e){"use strict";T.b=P,T.a=A,T.c=O;var t=e(22),u=e(519),s=e(520),c=e(521),r=e(522),h=e(523),n=e(525),i=e(526),a=e(527),o=e(528),l=e(529),f=e(530),v=e(531),b=e(532),g=e(533),m=e(534),_=e(535),M=e(536),x=e(63),y=e(524),S=0;function P(H,F,Z,G){this._groups=H,this._parents=F,this._name=Z,this._id=G}function A(H){return e.i(t.selection)().transition(H)}function O(){return++S}var L=t.selection.prototype;P.prototype=A.prototype={constructor:P,select:l.a,selectAll:f.a,filter:n.a,merge:i.a,selection:v.a,transition:M.a,call:L.call,nodes:L.nodes,node:L.node,size:L.size,empty:L.empty,each:L.each,on:a.a,attr:u.a,attrTween:s.a,style:b.a,styleTween:g.a,text:m.a,textTween:_.a,remove:o.a,tween:x.a,delay:c.a,duration:r.a,ease:h.a,end:y.a}},function(E,T,e){var t=e(0),u=t.DomUtil,s=["start","process","end","reset"],c=function(){var r=h.prototype;r.getDefaultCfg=function(){return{startEvent:"mousedown",processEvent:"mousemove",endEvent:"mouseup",resetEvent:"dblclick"}},r._start=function(i){var a=this;a.preStart&&a.preStart(i),a.start(i),a.onStart&&a.onStart(i)},r._process=function(i){var a=this;a.preProcess&&a.preProcess(i),a.process(i),a.onProcess&&a.onProcess(i)},r._end=function(i){var a=this;a.preEnd&&a.preEnd(i),a.end(i),a.onEnd&&a.onEnd(i)},r._reset=function(i){var a=this;a.preReset&&a.preReset(i),a.reset(i),a.onReset&&a.onReset(i)},r.start=function(){},r.process=function(){},r.end=function(){},r.reset=function(){};function h(n,i){var a=this,o=a.getDefaultCfg();t.assign(a,o,n),a.view=a.chart=i,a.canvas=i.get("canvas"),a._bindEvents()}return r._bindEvents=function(){var i=this,a=i.canvas,o=a.get("canvasDOM");i._clearEvents(),t.each(s,function(l){var f=t.upperFirst(l);i["_on"+f+"Listener"]=u.addEventListener(o,i[l+"Event"],t.wrapBehavior(i,"_"+l))})},r._clearEvents=function(){var i=this;t.each(s,function(a){var o="_on"+t.upperFirst(a)+"Listener";i[o]&&i[o].remove()})},r.destroy=function(){this._clearEvents()},h}();E.exports=c},function(E,T,e){var t=e(224),u=!0;E.exports=e(541)(t.isElement,u)},function(E,T,e){E.exports={Axis:e(240),Component:e(66),Guide:e(248),Label:e(252),Legend:e(258),Tooltip:e(263)}},function(E,T,e){E.exports={Canvas:e(328),Group:e(134),Shape:e(7),Arc:e(136),Circle:e(137),Dom:e(138),Ellipse:e(139),Fan:e(140),Image:e(141),Line:e(142),Marker:e(74),Path:e(145),Polygon:e(146),Polyline:e(147),Rect:e(148),Text:e(149),PathSegment:e(50),PathUtil:e(77),Event:e(135),version:"3.3.6"}},function(E,T,e){"use strict";T.b=c,T.c=r,T.a=h;var t=e(209);function u(n,i){return function(a){return n+a*i}}function s(n,i,a){return n=Math.pow(n,a),i=Math.pow(i,a)-n,a=1/a,function(o){return Math.pow(n+o*i,a)}}function c(n,i){var a=i-n;return a?u(n,a>180||a<-180?a-360*Math.round(a/360):a):e.i(t.a)(isNaN(n)?i:n)}function r(n){return(n=+n)==1?h:function(i,a){return a-i?s(i,a,n):e.i(t.a)(isNaN(i)?a:i)}}function h(n,i){var a=i-n;return a?u(n,a):e.i(t.a)(isNaN(n)?i:n)}},function(E,T,e){var t=e(10),u=function(){var s=c.prototype;s._initDefaultCfg=function(){this.adjustNames=["x","y"]};function c(r){this._initDefaultCfg(),t(this,r)}return s.processAdjust=function(){},c}();E.exports=u},function(E,T,e){var t=e(15),u=e(4),s=e(6),c=e(10),r=e(2);function h(i,a){return t(a)?a:i.invert(i.scale(a))}var n=function(){function i(o){var l=this;this.type="base",this.name=null,this.method=null,this.values=[],this.scales=[],this.linear=null;var f=null,v=this.callback;if(o.callback){var b=o.callback;f=function(){for(var m=arguments.length,_=new Array(m),M=0;M<m;M++)_[M]=arguments[M];var x=b.apply(void 0,_);return s(x)&&(x=v.apply(l,_)),x}}c(this,o),f&&c(this,{callback:f})}var a=i.prototype;return a._getAttrValue=function(l,f){var v=this.values;if(l.isCategory&&!this.linear){var b=l.translate(f);return v[b%v.length]}var g=l.scale(f);return this.getLinearValue(g)},a.getLinearValue=function(l){var f=this.values,v=f.length-1,b=Math.floor(v*l),g=v*l-b,m=f[b],_=b===v?m:f[b+1],M=m+(_-m)*g;return M},a.callback=function(l){var f=this,v=f.scales[0],b=null;return v.type==="identity"?b=v.value:b=f._getAttrValue(v,l),b},a.getNames=function(){for(var l=this.scales,f=this.names,v=Math.min(l.length,f.length),b=[],g=0;g<v;g++)b.push(f[g]);return b},a.getFields=function(){var l=this.scales,f=[];return r(l,function(v){f.push(v.field)}),f},a.getScale=function(l){var f=this.scales,v=this.names,b=v.indexOf(l);return f[b]},a.mapping=function(){for(var l=this.scales,f=this.callback,v=arguments.length,b=new Array(v),g=0;g<v;g++)b[g]=arguments[g];var m=b;if(f){for(var _=0,M=b.length;_<M;_++)b[_]=this._toOriginParam(b[_],l[_]);m=f.apply(this,b)}return m=[].concat(m),m},a._toOriginParam=function(l,f){var v=l;if(!f.isLinear)if(u(l)){v=[];for(var b=0,g=l.length;b<g;b++)v.push(h(f,l[b]))}else v=h(f,l);return v},i}();E.exports=n},function(E,T,e){function t(b){return function(){var g=r(b),m;if(c()){var _=r(this).constructor;m=Reflect.construct(g,arguments,_)}else m=g.apply(this,arguments);return u(this,m)}}function u(b,g){return g&&(typeof g=="object"||typeof g=="function")?g:s(b)}function s(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(b){return!1}}function r(b){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},r(b)}function h(b,g){b.prototype=Object.create(g.prototype),b.prototype.constructor=b,b.__proto__=g}var n=e(36),i=e(3),a=e(108),o=e(110),l=e(19),f=l.FONT_FAMILY,v=function(b){h(m,b);var g=t(m);function m(){return b.apply(this,arguments)||this}var _=m.prototype;return _.getDefaultCfg=function(){var x=b.prototype.getDefaultCfg.call(this);return i.mix({},x,{_id:null,zIndex:4,ticks:null,line:null,tickLine:null,subTickCount:0,subTickLine:null,grid:null,label:{offset:0,offsetX:0,offsetY:0,textStyle:{},autoRotate:!0,autoHide:!1,formatter:null},labelItems:[],title:{autoRotate:!0,textStyle:{}},autoPaint:!0})},_.beforeRender=function(){var x=this,y=x.get("title"),S=x.get("label"),P=x.get("grid");y&&x.set("title",i.deepMix({autoRotate:!0,textStyle:{fontSize:12,fill:"#ccc",textBaseline:"middle",fontFamily:f,textAlign:"center"},offset:48},y)),S&&x.set("label",i.deepMix({autoRotate:!0,autoHide:!0,textStyle:{fontSize:12,fill:"#ccc",textBaseline:"middle",fontFamily:f},offset:10},S)),P&&x.set("grid",i.deepMix({lineStyle:{lineWidth:1,stroke:"#C0D0E0"}},P))},_.render=function(){var x=this;x.beforeRender();var y=x.get("label");y&&x.renderLabels(),x.get("autoPaint")&&x.paint(),i.isNil(x.get("title"))||x.renderTitle(),x.get("group").sort()},_.renderLabels=function(){var x=this,y=x.get("group"),S=x.get("label"),P=new o({name:"axis-label"});x.set("labelRenderer",P),P.set("labelCfg",S);var A=["formatter","htmlTemplate","labelLine","textStyle","useHtml"];i.each(A,function(O){S[O]&&P.set(O,S[O])}),P.set("coord",x.get("coord")),P.set("group",y.addGroup()),P.set("canvas",x.get("canvas"))},_._parseTicks=function(x){x=x||[];for(var y=x.length,S=0;S<y;S++){var P=x[S];i.isObject(P)||(x[S]=this.parseTick(P,S,y))}return this.set("ticks",x),x},_._addTickItem=function(x,y,S,P){P===void 0&&(P="");var A=this.get("tickItems"),O=this.get("subTickItems"),L=this.getTickEnd(y,S,x),H={x1:y.x,y1:y.y,x2:L.x,y2:L.y};A||(A=[]),O||(O=[]),P==="sub"?O.push(H):A.push(H),this.set("tickItems",A),this.set("subTickItems",O)},_._renderLine=function(){var x=this,y=x.get("line"),S;if(y){S=x.getLinePath(),y=i.mix({path:S},y);var P=x.get("group"),A=P.addShape("path",{attrs:y});A.name="axis-line",x.get("appendInfo")&&A.setSilent("appendInfo",x.get("appendInfo")),x.set("lineShape",A)}},_._processCatTicks=function(){var x=this,y=x.get("label"),S=x.get("tickLine"),P=x.get("ticks");P=x._parseTicks(P);for(var A=x._getNormalizedTicks(P),O=0;O<A.length;O+=3){var L=x.getTickPoint(A[O]),H=x.getTickPoint(A[O+1]),F=x.getTickPoint(A[O+2]),Z=Math.floor(O/3),G=P[Z];S&&(Z===0&&x._addTickItem(Z,H,S.length),x._addTickItem(Z,F,S.length)),y&&x.addLabel(G,L,Z)}},_._getNormalizedTicks=function(x){var y=0;x.length>1&&(y=(x[1].value-x[0].value)/2);for(var S=[],P=0;P<x.length;P++){var A=x[P],O=A.value,L=A.value-y,H=A.value+y;S.push(O,L,H)}var F=i.arrayUtil.getRange(S);return S.map(function(Z){var G=(Z-F.min)/(F.max-F.min);return G})},_.addLabel=function(x,y,S){var P=this,A=P.get("labelItems"),O=P.get("labelRenderer"),L=i.deepMix({},P.get("label")),H;if(O){var F=P.get("_labelOffset");i.isNil(P.get("label").offset)||(F=P.get("label").offset);var Z=P.getSideVector(F,y,S);y={x:y.x+Z[0]+L.offsetX,y:y.y+Z[1]+L.offsetY},L.text=x.text,L.x=y.x,L.y=y.y,L.point=y,L.textAlign=P.getTextAnchor(Z),y.rotate&&(L.rotate=y.rotate),A.push(L)}return H},_._processTicks=function(){var x=this,y=x.get("label"),S=x.get("subTickCount"),P=x.get("tickLine"),A=x.get("ticks");if(A=x._parseTicks(A),i.each(A,function(L,H){var F=x.getTickPoint(L.value,H);P&&x._addTickItem(H,F,P.length),y&&x.addLabel(L,F,H)}),S){var O=x.get("subTickLine");i.each(A,function(L,H){if(H>0){var F=L.value-A[H-1].value;F=F/(x.get("subTickCount")+1);for(var Z=1;Z<=S;Z++){var G={text:"",value:H?A[H-1].value+Z*F:Z*F},U=x.getTickPoint(G.value),Y=void 0;O&&O.length?Y=O.length:Y=parseInt(P.length*(3/5),10),x._addTickItem(Z-1,U,Y,"sub")}}})}},_._addTickLine=function(x,y){var S=this,P=i.mix({},y),A=[];i.each(x,function(H){A.push(["M",H.x1,H.y1]),A.push(["L",H.x2,H.y2])}),delete P.length,P.path=A;var O=S.get("group"),L=O.addShape("path",{attrs:P});L.name="axis-ticks",L._id=S.get("_id")+"-ticks",L.set("coord",S.get("coord")),S.get("appendInfo")&&L.setSilent("appendInfo",S.get("appendInfo"))},_._renderTicks=function(){var x=this,y=x.get("tickItems"),S=x.get("subTickItems");if(!i.isEmpty(y)){var P=x.get("tickLine");x._addTickLine(y,P)}if(!i.isEmpty(S)){var A=x.get("subTickLine")||x.get("tickLine");x._addTickLine(S,A)}},_._renderGrid=function(){var x=this.get("grid");if(!!x){x.coord=this.get("coord"),x.appendInfo=this.get("appendInfo");var y=this.get("group");this.set("gridGroup",y.addGroup(a,x))}},_._renderLabels=function(){var x=this,y=x.get("labelRenderer"),S=x.get("labelItems");y&&(y.set("items",S),y._dryDraw())},_.paint=function(){var x=this,y=x.get("tickLine"),S=!0;y&&y.hasOwnProperty("alignWithLabel")&&(S=y.alignWithLabel),x._renderLine();var P=x.get("type"),A=P==="cat"||P==="timeCat";A&&S===!1?x._processCatTicks():x._processTicks(),x._renderTicks(),x._renderGrid(),x._renderLabels();var O=this.get("label");O&&O.autoRotate&&x.autoRotateLabels(),O&&O.autoHide&&x.autoHideLabels()},_.parseTick=function(x,y,S){return{text:x,value:y/(S-1)}},_.getTextAnchor=function(x){var y=Math.abs(x[1]/x[0]),S;return y>=1?S="center":x[0]>0?S="start":S="end",S},_.getMaxLabelWidth=function(x){var y=x.getLabels(),S=0;return i.each(y,function(P){var A=P.getBBox(),O=A.width;S<O&&(S=O)}),S},_.getMaxLabelHeight=function(x){var y=x.getLabels(),S=0;return i.each(y,function(P){var A=P.getBBox(),O=A.height;S<O&&(S=O)}),S},_.destroy=function(){var x=this;if(!x.destroyed){var y=x.get("gridGroup");y&&y.remove();var S=this.get("labelRenderer");S&&S.destroy();var P=x.get("group");P.destroy(),b.prototype.destroy.call(this)}},_.clear=function(){var x=this,y=x.get("group");if(!y.get("destroyed")&&y.get("children").length){var S=x.get("gridGroup");S&&S.clear();var P=this.get("labelRenderer");P&&P.clear();var A=x.get("group");A.clear()}},_.autoRotateLabels=function(){},_.autoHideLabels=function(){},_.renderTitle=function(){},_.getLinePath=function(){},_.getTickPoint=function(){},_.getTickEnd=function(){},_.getSideVector=function(){},m}(n);E.exports=v},function(E,T,e){function t(a){return function(){var o=r(a),l;if(c()){var f=r(this).constructor;l=Reflect.construct(o,arguments,f)}else l=o.apply(this,arguments);return u(this,l)}}function u(a,o){return o&&(typeof o=="object"||typeof o=="function")?o:s(a)}function s(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function r(a){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},r(a)}function h(a,o){a.prototype=Object.create(o.prototype),a.prototype.constructor=a,a.__proto__=o}var n=e(66),i=function(a){h(l,a);var o=t(l);function l(){return a.apply(this,arguments)||this}var f=l.prototype;return f.getDefaultCfg=function(){return{_id:null,canvas:null,container:null,group:null,capture:!1,coord:null,offset:[0,0],plotRange:null,position:[0,0],visible:!0,zIndex:1}},f._init=function(){},f.clear=function(){},f.destroy=function(){a.prototype.destroy.call(this)},f.beforeRender=function(){},f.render=function(){},f.afterRender=function(){},f.beforeDraw=function(){},f.draw=function(){},f.afterDraw=function(){},f.show=function(){},f.hide=function(){},f.setOffset=function(){},f.setPosition=function(){},f.setVisible=function(){},f.setZIndex=function(){},l}(n);E.exports=i},function(E,T,e){var t=e(1),u=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,s=/[^\s\,]+/ig,c={};E.exports={parseRadius:function(h){var n=0,i=0,a=0,o=0;return t.isArray(h)?h.length===1?n=i=a=o=h[0]:h.length===2?(n=a=h[0],i=o=h[1]):h.length===3?(n=h[0],i=o=h[1],a=h[2]):(n=h[0],i=h[1],a=h[2],o=h[3]):n=i=a=o=h,{r1:n,r2:i,r3:a,r4:o}},parsePath:function(h){if(h=h||[],t.isArray(h))return h;if(t.isString(h))return h=h.match(u),t.each(h,function(n,i){if(n=n.match(s),n[0].length>1){var a=n[0].charAt(0);n.splice(1,0,n[0].substr(1)),n[0]=a}t.each(n,function(o,l){isNaN(o)||(n[l]=+o)}),h[i]=n}),h},numberToColor:function(h){var n=c[h];if(!n){for(var i=h.toString(16),a=i.length;a<6;a++)i="0"+i;n="#"+i,c[h]=n}return n}}},function(E,T,e){var t=e(6);function u(s){return t(s)?"":s.toString()}E.exports=u},function(E,T){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},t=function(s){var c=typeof s=="undefined"?"undefined":e(s);return s!==null&&c==="object"||c==="function"};E.exports=t},function(E,T,e){var t=e(86),u=e(17),s=function(r){if(!t(r)||!u(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var h=r;Object.getPrototypeOf(h)!==null;)h=Object.getPrototypeOf(h);return Object.getPrototypeOf(r)===h};E.exports=s},function(E,T,e){"use strict";T.b=c,T.c=r,T.a=h;var t=e(202);function u(n,i){return function(a){return n+a*i}}function s(n,i,a){return n=Math.pow(n,a),i=Math.pow(i,a)-n,a=1/a,function(o){return Math.pow(n+o*i,a)}}function c(n,i){var a=i-n;return a?u(n,a>180||a<-180?a-360*Math.round(a/360):a):e.i(t.a)(isNaN(n)?i:n)}function r(n){return(n=+n)==1?h:function(i,a){return a-i?s(i,a,n):e.i(t.a)(isNaN(i)?a:i)}}function h(n,i){var a=i-n;return a?u(n,a):e.i(t.a)(isNaN(n)?i:n)}},function(E,T){E.exports=V},function(E,T,e){"use strict";function t(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function u(a,o){for(var l=0;l<o.length;l++){var f=o[l];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(a,f.key,f)}}function s(a,o,l){return o&&u(a.prototype,o),l&&u(a,l),a}var c=e(56),r=e(10),h=c.mat3,n=c.vec3,i=function(){s(a,[{key:"getDefaultCfg",value:function(){return{isTransposed:!1,matrix:[1,0,0,0,1,0,0,0,1]}}}]);function a(o){t(this,a);var l=this.getDefaultCfg();r(this,l,o),this.init()}return s(a,[{key:"init",value:function(){var l=this.start,f=this.end,v={x:(l.x+f.x)/2,y:(l.y+f.y)/2};this.center=v,this.width=Math.abs(f.x-l.x),this.height=Math.abs(f.y-l.y)}},{key:"_swapDim",value:function(l){var f=this[l];if(f){var v=f.start;f.start=f.end,f.end=v}}},{key:"getCenter",value:function(){return this.center}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"convertDim",value:function(l,f){var v=this[f],b=v.start,g=v.end;return b+l*(g-b)}},{key:"invertDim",value:function(l,f){var v=this[f],b=v.start,g=v.end;return(l-b)/(g-b)}},{key:"convertPoint",value:function(l){return l}},{key:"invertPoint",value:function(l){return l}},{key:"applyMatrix",value:function(l,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=this.matrix,g=[l,f,v];return n.transformMat3(g,g,b),g}},{key:"invertMatrix",value:function(l,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,b=this.matrix,g=h.invert([],b),m=[l,f,v];return n.transformMat3(m,m,g),m}},{key:"convert",value:function(l){var f=this.convertPoint(l),v=f.x,b=f.y,g=this.applyMatrix(v,b,1);return{x:g[0],y:g[1]}}},{key:"invert",value:function(l){var f=this.invertMatrix(l.x,l.y,1);return this.invertPoint({x:f[0],y:f[1]})}},{key:"rotate",value:function(l){var f=this.matrix,v=this.center;return h.translate(f,f,[-v.x,-v.y]),h.rotate(f,f,l),h.translate(f,f,[v.x,v.y]),this}},{key:"reflect",value:function(l){switch(l){case"x":this._swapDim("x");break;case"y":this._swapDim("y");break;default:this._swapDim("y")}return this}},{key:"scale",value:function(l,f){var v=this.matrix,b=this.center;return h.translate(v,v,[-b.x,-b.y]),h.scale(v,v,[l,f]),h.translate(v,v,[b.x,b.y]),this}},{key:"translate",value:function(l,f){var v=this.matrix;return h.translate(v,v,[l,f]),this}},{key:"transpose",value:function(){return this.isTransposed=!this.isTransposed,this}}]),a}();E.exports=i},function(E,T,e){function t(_,M){_.prototype=Object.create(M.prototype),_.prototype.constructor=_,_.__proto__=M}var u=e(0),s=e(279),c=e(16),r=c.Canvas,h=u.DomUtil,n=e(5),i=e(283),a=e(121),o=e(123),l=e(122),f=e(124),v="auto";function b(_,M){var x=!1;return u.each(_,function(y){var S=[].concat(y.values),P=[].concat(M.values);if(y.type===M.type&&y.field===M.field&&S.sort().toString()===P.sort().toString()){x=!0;return}}),x}function g(_,M){return u.isEqualWith(_,M,function(x,y){return x===y})}var m=function(_){t(M,_);function M(){return _.apply(this,arguments)||this}var x=M.prototype;return x.getDefaultCfg=function(){var S=_.prototype.getDefaultCfg.call(this);return u.mix(S,{id:null,forceFit:!1,container:null,wrapperEl:null,canvas:null,width:500,height:500,pixelRatio:null,backPlot:null,frontPlot:null,plotBackground:null,padding:n.plotCfg.padding,background:null,autoPaddingAppend:5,limitInPlot:!1,renderer:n.renderer,views:[]})},x.init=function(){var S=this,P=S.get("viewTheme");S._initCanvas(),S._initPlot(),S._initEvents(),_.prototype.init.call(this);var A=new a.Tooltip({chart:S,viewTheme:P,options:{}});S.set("tooltipController",A);var O=new a.Legend({chart:S,viewTheme:P});S.set("legendController",O),S.set("_id","chart"),S.emit("afterinit")},x._isAutoPadding=function(){var S=this.get("padding");return u.isArray(S)?S.includes(v):S===v},x._getAutoPadding=function(){for(var S=this.get("padding"),P=this.get("frontPlot"),A=P.getBBox(),O=this.get("backPlot"),L=l(O,f(this.get("plotRange"))),H=o(A,L),F=[0-H.minY,H.maxX-this.get("width"),H.maxY-this.get("height"),0-H.minX],Z=u.toAllPadding(S),G=0;G<Z.length;G++)if(Z[G]===v){var U=Math.max(0,F[G]);Z[G]=U+this.get("autoPaddingAppend")}return Z},x._initCanvas=function(){var S=this.get("container"),P=this.get("id");!S&&P&&(S=P,this.set("container",P));var A=this.get("width"),O=this.get("height");if(u.isString(S)){if(S=document.getElementById(S),!S)throw new Error("Please specify the container for the chart!");this.set("container",S)}var L=h.createDom('<div style="position:relative;"></div>');S.appendChild(L),this.set("wrapperEl",L),this.get("forceFit")&&(A=h.getWidth(S,A),this.set("width",A));var H=this.get("renderer"),F=new r({containerDOM:L,width:A,height:O,pixelRatio:H==="svg"?1:this.get("pixelRatio"),renderer:H});this.set("canvas",F)},x._initPlot=function(){var S=this;S._initPlotBack();var P=S.get("canvas"),A=P.addGroup({zIndex:1}),O=P.addGroup({zIndex:0}),L=P.addGroup({zIndex:3});S.set("backPlot",A),S.set("middlePlot",O),S.set("frontPlot",L)},x._initPlotBack=function(){var S=this,P=S.get("canvas"),A=S.get("viewTheme"),O=P.addGroup(i,{padding:this.get("padding"),plotBackground:u.mix({},A.plotBackground,S.get("plotBackground")),background:u.mix({},A.background,S.get("background"))});S.set("plot",O),S.set("plotRange",O.get("plotRange"))},x._initEvents=function(){this.get("forceFit")&&window.addEventListener("resize",u.wrapBehavior(this,"_initForceFitEvent"))},x._initForceFitEvent=function(){var S=setTimeout(u.wrapBehavior(this,"forceFit"),200);clearTimeout(this.get("resizeTimer")),this.set("resizeTimer",S)},x._renderLegends=function(){var S=this.get("options"),P=S.legends;if(u.isNil(P)||P!==!1){var A=this.get("legendController");if(A.options=P||{},A.plotRange=this.get("plotRange"),P&&P.custom)A.addCustomLegend();else{var O=this.getAllGeoms(),L=[];u.each(O,function(F){var Z=F.get("view"),G=F.getAttrsForLegend();u.each(G,function(U){var Y=U.type,J=U.getScale(Y);if(J.field&&J.type!=="identity"&&!b(L,J)){L.push(J);var rt=Z.getFilteredOutValues(J.field);A.addLegend(J,U,F,rt)}})});var H=this.getYScales();L.length===0&&H.length>1&&A.addMixedLegend(H,O)}A.alignLegends()}},x._renderTooltips=function(){var S=this.get("options");if(u.isNil(S.tooltip)||S.tooltip!==!1){var P=this.get("tooltipController");P.options=S.tooltip||{},P.renderTooltip()}},x.getAllGeoms=function(){var S=[];S=S.concat(this.get("geoms"));var P=this.get("views");return u.each(P,function(A){S=S.concat(A.get("geoms"))}),S},x.forceFit=function(){var S=this;if(!(!S||S.destroyed)){var P=S.get("container"),A=S.get("width"),O=h.getWidth(P,A);if(O!==0&&O!==A){var L=S.get("height");S.changeSize(O,L)}return S}},x.resetPlot=function(){var S=this.get("plot"),P=this.get("padding");g(P,S.get("padding"))||(S.set("padding",P),S.repaint())},x.changeSize=function(S,P){var A=this,O=A.get("canvas");O.changeSize(S,P);var L=this.get("plot");return A.set("width",S),A.set("height",P),L.repaint(),this.set("keepPadding",!0),A.repaint(),this.set("keepPadding",!1),this.emit("afterchangesize"),A},x.changeWidth=function(S){return this.changeSize(S,this.get("height"))},x.changeHeight=function(S){return this.changeSize(this.get("width"),S)},x.view=function(S){S=S||{},S.theme=this.get("theme"),S.parent=this,S.backPlot=this.get("backPlot"),S.middlePlot=this.get("middlePlot"),S.frontPlot=this.get("frontPlot"),S.canvas=this.get("canvas"),u.isNil(S.animate)&&(S.animate=this.get("animate")),S.options=u.mix({},this._getSharedOptions(),S.options);var P=new s(S);return P.set("_id","view"+this.get("views").length),this.get("views").push(P),this.emit("addview",{view:P}),P},x.removeView=function(S){var P=this.get("views");u.Array.remove(P,S),S.destroy()},x._getSharedOptions=function(){var S=this.get("options"),P={};return u.each(["scales","coord","axes"],function(A){P[A]=u.cloneDeep(S[A])}),P},x.getViewRegion=function(){var S=this.get("plotRange");return{start:S.bl,end:S.tr}},x.legend=function(S,P){var A=this.get("options");A.legends||(A.legends={});var O={};return S===!1?A.legends=!1:u.isObject(S)?O=S:u.isString(S)?O[S]=P:O=P,u.mix(A.legends,O),this},x.tooltip=function(S,P){var A=this.get("options");return A.tooltip||(A.tooltip={}),S===!1?A.tooltip=!1:u.isObject(S)?u.mix(A.tooltip,S):u.mix(A.tooltip,P),this},x.clear=function(){this.emit("beforeclear");for(var S=this.get("views");S.length>0;){var P=S.shift();P.destroy()}_.prototype.clear.call(this);var A=this.get("canvas");return this.resetPlot(),A.draw(),this.emit("afterclear"),this},x.clearInner=function(){var S=this.get("views");u.each(S,function(O){O.clearInner()});var P=this.get("tooltipController");if(P&&P.clear(),!this.get("keepLegend")){var A=this.get("legendController");A&&A.clear()}_.prototype.clearInner.call(this)},x.drawComponents=function(){_.prototype.drawComponents.call(this),this.get("keepLegend")||this._renderLegends()},x.render=function(){var S=this;if(!S.get("keepPadding")&&S._isAutoPadding()){S.beforeRender(),S.drawComponents();var P=S._getAutoPadding(),A=S.get("plot");g(A.get("padding"),P)||(A.set("padding",P),A.repaint())}var O=S.get("middlePlot");if(S.get("limitInPlot")&&!O.attr("clip")){var L=u.getClipByRange(S.get("plotRange"));O.attr("clip",L)}_.prototype.render.call(this),S._renderTooltips()},x.repaint=function(){this.get("keepPadding")||this.resetPlot(),_.prototype.repaint.call(this)},x.changeVisible=function(S){var P=this.get("wrapperEl"),A=S?"":"none";P.style.display=A},x.toDataURL=function(){var S=this,P=S.get("canvas"),A=S.get("renderer"),O=P.get("el"),L="";if(A==="svg"){var H=O.cloneNode(!0),F=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Z=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",F);Z.replaceChild(H,Z.documentElement);var G=new XMLSerializer().serializeToString(Z);L="data:image/svg+xml;charset=utf8,"+encodeURIComponent(G)}else A==="canvas"&&(L=O.toDataURL("image/png"));return L},x.downloadImage=function(S){var P=this,A=document.createElement("a"),O=P.get("renderer"),L=(S||"chart")+(O==="svg"?".svg":".png"),H=P.get("canvas");H.get("timeline").stopAllAnimations(),setTimeout(function(){var F=P.toDataURL();if(window.Blob&&window.URL&&O!=="svg"){for(var Z=F.split(","),G=Z[0].match(/:(.*?);/)[1],U=atob(Z[1]),Y=U.length,J=new Uint8Array(Y);Y--;)J[Y]=U.charCodeAt(Y);var rt=new Blob([J],{type:G});window.navigator.msSaveBlob?window.navigator.msSaveBlob(rt,L):A.addEventListener("click",function(){A.download=L,A.href=window.URL.createObjectURL(rt)})}else A.addEventListener("click",function(){A.download=L,A.href=F});var ft=document.createEvent("MouseEvents");ft.initEvent("click",!1,!1),A.dispatchEvent(ft)},16)},x.showTooltip=function(S){var P=this.getViewsByPoint(S);if(P.length){var A=this.get("tooltipController");A.showTooltip(S,P)}return this},x.lockTooltip=function(){var S=this.get("tooltipController");return S.lockTooltip(),this},x.unlockTooltip=function(){var S=this.get("tooltipController");return S.unlockTooltip(),this},x.hideTooltip=function(){var S=this.get("tooltipController");return S.hideTooltip(),this},x.getTooltipItems=function(S){var P=this,A=P.getViewsByPoint(S),O=[];return u.each(A,function(L){var H=L.get("geoms");u.each(H,function(F){var Z=F.get("dataArray"),G=[];u.each(Z,function(U){var Y=F.findPoint(S,U);if(Y){var J=F.getTipItems(Y);G=G.concat(J)}}),O=O.concat(G)})}),O},x.destroy=function(){this.emit("beforedestroy"),clearTimeout(this.get("resizeTimer"));var S=this.get("canvas"),P=this.get("wrapperEl");P.parentNode.removeChild(P),_.prototype.destroy.call(this),S.destroy(),window.removeEventListener("resize",u.getWrapBehavior(this,"_initForceFitEvent")),this.emit("afterdestroy")},M}(s);E.exports=m},function(E,T,e){var t=e(154),u=e(16),s=e(119),c=e(44),r=e(5),h=e(9),n=e(0),i={version:r.version,Animate:s,Chart:c,Global:r,Scale:t,Shape:h,Util:n,G:u,DomUtil:n.DomUtil,MatrixUtil:n.MatrixUtil,PathUtil:n.PathUtil};i.track=function(){console.warn("G2 tracks nothing ;-)")},typeof window!="undefined"&&(window.G2?console.warn("There are multiple versions of G2. Version "+i.version+"'s reference is 'window.G2_3'"):window.G2=i),E.exports=i},function(E,T,e){var t=e(5),u=e(0),s=u.assign,c=u.isNil,r=u.isArray,h=u.cloneDeep,n=u.wrapBehavior,i=u.getWrapBehavior,a=function(){var o=l.prototype;o.getDefaultCfg=function(){return{chart:null,group:null,showTitle:!0,autoSetAxis:!0,padding:10,eachView:null,fields:[],colTitle:{offsetY:-15,style:{fontSize:14,textAlign:"center",fill:"#666",fontFamily:t.fontFamily}},rowTitle:{offsetX:15,style:{fontSize:14,textAlign:"center",rotate:90,fill:"#666",fontFamily:t.fontFamily}}}};function l(f){var v=this.getDefaultCfg();s(this,v,f),this.init()}return o.init=function(){if(!this.chart)throw new Error("Facets Error: please specify the chart!");this._bindEvent(),this.initContainer(),this.chart.get("data")&&this.initViews()},o.initContainer=function(){var v=this.chart,b=v.get("frontPlot"),g=b.addGroup();this.group=g},o.initViews=function(){for(var v=this.chart,b=v.get("data"),g=this.eachView,m=this.generateFacets(b),_=0;_<m.length;_++){var M=m[_],x=M.region,y=v.view({start:x.start,end:x.end,padding:this.padding});y.source(M.data),this.beforeProcessView(y,M),g&&g(y,M),this.afterProcessView(y,M),M.view=y}this.facets=m},o.beforeProcessView=function(){},o.afterProcessView=function(v,b){this.autoSetAxis&&this.processAxis(v,b)},o.processAxis=function(v,b){var g=v.get("options"),m=v.get("geoms");if((!g.coord.type||g.coord.type==="rect")&&m.length){var _=m[0].get("attrOptions").position.field,M=r(_)?_:_.split("*").map(function(P){return P.trim()}),x=M[0],y=M[1];c(g.axes)&&(g.axes={});var S=g.axes;S!==!1&&(x&&S[x]!==!1&&(S[x]=S[x]||{},this.setXAxis(x,S,b)),y&&S[y]!==!1&&(S[y]=S[y]||{},this.setYAxis(y,S,b)))}},o.setXAxis=function(){},o.setYAxis=function(){},o.renderTitle=function(v,b){this.drawColTitle(v,b)},o.getScaleText=function(v,b,g){var m;if(v){var _=g.get("scales"),M=_[v];M||(M=g.createScale(v)),m=M.getText(b)}else m=b;return m},o.drawColTitle=function(v,b){var g=this.getScaleText(b.colField,b.colValue,v),m=s({position:["50%","0%"],content:g},this.colTitle);v.guide().text(m)},o.drawRowTitle=function(v,b){var g=this.getScaleText(b.rowField,b.rowValue,v),m=s({position:["100%","50%"],content:g},h(this.rowTitle));v.guide().text(m)},o.getFilter=function(v){var b=function(m){var _=!0;return v.forEach(function(M){var x=M.field,y=M.value,S=!0;!c(y)&&x&&(S=m[x]===y),_=_&&S}),_};return b},o.getFieldValues=function(v,b){for(var g=[],m={},_=0;_<b.length;_++){var M=b[_],x=M[v];!c(x)&&!m[x]&&(g.push(x),m[x]=!0)}return g},o.getRegion=function(v,b,g,m){var _=1/b,M=1/v,x={x:_*g,y:M*m},y={x:x.x+_,y:x.y+M};return{start:x,end:y}},o.generateFacets=function(){return[]},o._bindEvent=function(){var v=this.chart;v.on("afterchangedata",n(this,"onDataChange")),v.on("beforeclear",n(this,"onClear")),v.on("beforedestroy",n(this,"destroy")),v.on("beforepaint",n(this,"onPaint")),v.on("setdata",n(this,"onDataChange"))},o._clearEvent=function(){var v=this.chart;v&&(v.off("afterchangedata",i(this,"onDataChange")),v.off("beforeclear",i(this,"onClear")),v.off("beforedestroy",i(this,"destroy")),v.off("beforepaint",i(this,"onPaint")),v.off("setdata",i(this,"onDataChange")))},o._clearFacets=function(){var v=this.facets,b=this.chart;if(v)for(var g=0;g<v.length;g++){var m=v[g];b.removeView(m.view)}this.facets=null},o.onClear=function(){this.onRemove()},o.onPaint=function(){if(this.showTitle)for(var v=this.facets,b=0;b<v.length;b++){var g=v[b],m=g.view;this.renderTitle(m,g)}},o.onDataChange=function(){this._clearFacets(),this.initViews()},o.onRemove=function(){this._clearFacets(),this._clearEvent(),this.group&&this.group.remove(),this.chart=null,this.facets=null,this.group=null},o.destroy=function(){this.onRemove(),this.destroyed=!0},l}();E.exports=a},function(E,T,e){var t=e(1);function u(n,i,a,o){return{x:Math.cos(o)*a+n,y:Math.sin(o)*a+i}}function s(n,i,a,o){var l,f;return o?n<i?(l=i-n,f=Math.PI*2-a+n):n>a&&(l=Math.PI*2-n+i,f=n-a):(l=n-i,f=a-n),l>f?a:i}function c(n,i,a,o){var l=0;return a-i>=Math.PI*2&&(l=Math.PI*2),i=t.mod(i,Math.PI*2),a=t.mod(a,Math.PI*2)+l,n=t.mod(n,Math.PI*2),o?i>=a?n>a&&n<i?n:s(n,a,i,!0):n<i||n>a?n:s(n,i,a):i<=a?i<n&&n<a?n:s(n,i,a,!0):n>i||n<a?n:s(n,a,i)}function r(n,i,a,o,l,f,v,b,g){var m=[v,b],_=[n,i],M=[1,0],x=t.vec2.subtract([],m,_),y=t.vec2.angleTo(M,x);y=c(y,o,l,f);var S=[a*Math.cos(y)+n,a*Math.sin(y)+i];g&&(g.x=S[0],g.y=S[1]);var P=t.vec2.distance(S,m);return P}function h(n,i,a,o,l,f){var v=0,b=Math.PI/2,g=Math.PI,m=Math.PI*3/2,_=[],M=c(v,o,l,f);M===v&&_.push(u(n,i,a,v)),M=c(b,o,l,f),M===b&&_.push(u(n,i,a,b)),M=c(g,o,l,f),M===g&&_.push(u(n,i,a,g)),M=c(m,o,l,f),M===m&&_.push(u(n,i,a,m)),_.push(u(n,i,a,o)),_.push(u(n,i,a,l));var x=Infinity,y=-Infinity,S=Infinity,P=-Infinity;return t.each(_,function(A){x>A.x&&(x=A.x),y<A.x&&(y=A.x),S>A.y&&(S=A.y),P<A.y&&(P=A.y)}),{minX:x,minY:S,maxX:y,maxY:P}}E.exports={nearAngle:c,projectPoint:function(i,a,o,l,f,v,b,g){var m={};return r(i,a,o,l,f,v,b,g,m),m},pointDistance:r,box:h}},function(E,T,e){var t=e(1).vec2;E.exports={at:function(s,c,r){return(c-s)*r+s},pointDistance:function(s,c,r,h,n,i){var a=[r-s,h-c];if(t.exactEquals(a,[0,0]))return NaN;var o=[-a[1],a[0]];t.normalize(o,o);var l=[n-s,i-c];return Math.abs(t.dot(l,o))},box:function(s,c,r,h,n){var i=n/2,a=Math.min(s,r),o=Math.max(s,r),l=Math.min(c,h),f=Math.max(c,h);return{minX:a-i,minY:l-i,maxX:o+i,maxY:f+i}},len:function(s,c,r,h){return Math.sqrt((r-s)*(r-s)+(h-c)*(h-c))}}},function(E,T,e){var t=e(37),u=e(50),s=Math.PI,c=Math.sin,r=Math.cos,h=Math.atan2,n=10,i=s/3;function a(f,v,b,g,m,_,M){var x,y,S,P,A,O,L;if(!v.fill){var H=v.arrowLength||n,F=v.arrowAngle?v.arrowAngle*s/180:i;L=h(g-_,b-m),A=Math.abs(v.lineWidth*r(L))/2,O=Math.abs(v.lineWidth*c(L))/2,M&&(A=-A,O=-O),x=m+H*r(L+F/2),y=_+H*c(L+F/2),S=m+H*r(L-F/2),P=_+H*c(L-F/2),f.beginPath(),f.moveTo(x-A,y-O),f.lineTo(m-A,_-O),f.lineTo(S-A,P-O),f.moveTo(m-A,_-O),f.lineTo(m+A,_+O),f.moveTo(m,_),f.stroke()}}function o(f){var v=[],b=t.parsePath(f.path),g;if(!Array.isArray(b)||b.length===0||b[0][0]!=="M"&&b[0][0]!=="m")return!1;for(var m=b.length,_=0;_<b.length;_++){var M=b[_];g=new u(M,g,_===m-1),v.push(g)}return v}function l(f,v,b,g,m,_,M){var x=M?v.startArrow:v.endArrow,y=x.d,S=0,P=m-b,A=_-g,O=Math.atan(P/A);A===0&&P<0?S=Math.PI:P>0&&A>0?S=Math.PI/2-O:P<0&&A<0?S=-Math.PI/2-O:P>=0&&A<0?S=-O-Math.PI/2:P<=0&&A>0&&(S=Math.PI/2-O);var L=o(x);if(!!L){y&&(M?(m=m+Math.sin(Math.abs(O))*y,_=_+Math.cos(Math.abs(O))*y-.5*f.lineWidth):(m=m-Math.sin(Math.abs(O))*y,_=_-Math.cos(Math.abs(O))*y+.5*f.lineWidth)),f.save(),f.beginPath(),f.translate(m,_),f.rotate(S);for(var H=0;H<L.length;H++)L[H].draw(f);f.setTransform(1,0,0,1,0,0),f.fillStyle=f.strokeStyle,f.fill(),f.restore()}}E.exports={addStartArrow:function(v,b,g,m,_,M){typeof b.startArrow=="object"?l(v,b,g,m,_,M,!0):b.startArrow&&a(v,b,g,m,_,M,!0)},addEndArrow:function(v,b,g,m,_,M){typeof b.endArrow=="object"?l(v,b,g,m,_,M,!1):b.endArrow&&a(v,b,g,m,_,M,!1)}}},function(E,T,e){var t=e(1),u=e(76),s=e(75),c=e(144),r=e(143),h=t.vec3,n=t.mat3,i=["m","l","c","a","q","h","v","t","s","z"];function a(m,_,M){return{x:M.x+m,y:M.y+_}}function o(m,_){return{x:_.x+(_.x-m.x),y:_.y+(_.y-m.y)}}function l(m){return Math.sqrt(m[0]*m[0]+m[1]*m[1])}function f(m,_){return(m[0]*_[0]+m[1]*_[1])/(l(m)*l(_))}function v(m,_){return(m[0]*_[1]<m[1]*_[0]?-1:1)*Math.acos(f(m,_))}function b(m,_,M,x,y,S,P){var A=t.mod(t.toRadian(P),Math.PI*2),O=m.x,L=m.y,H=_.x,F=_.y,Z=Math.cos(A)*(O-H)/2+Math.sin(A)*(L-F)/2,G=-1*Math.sin(A)*(O-H)/2+Math.cos(A)*(L-F)/2,U=Z*Z/(y*y)+G*G/(S*S);U>1&&(y*=Math.sqrt(U),S*=Math.sqrt(U));var Y=y*y*(G*G)+S*S*(Z*Z),J=Math.sqrt((y*y*(S*S)-Y)/Y);M===x&&(J*=-1),isNaN(J)&&(J=0);var rt=J*y*G/S,ft=J*-S*Z/y,dt=(O+H)/2+Math.cos(A)*rt-Math.sin(A)*ft,ut=(L+F)/2+Math.sin(A)*rt+Math.cos(A)*ft,Lt=v([1,0],[(Z-rt)/y,(G-ft)/S]),Ft=[(Z-rt)/y,(G-ft)/S],Ot=[(-1*Z-rt)/y,(-1*G-ft)/S],St=v(Ft,Ot);return f(Ft,Ot)<=-1&&(St=Math.PI),f(Ft,Ot)>=1&&(St=0),x===0&&St>0&&(St=St-2*Math.PI),x===1&&St<0&&(St=St+2*Math.PI),[m,dt,ut,y,S,Lt,St,A,x]}var g=function(_,M,x){this.preSegment=M,this.isLast=x,this.init(_,M)};t.augment(g,{init:function(_,M){var x=_[0];M=M||{endPoint:{x:0,y:0}};var y=i.indexOf(x)>=0,S=y?x.toUpperCase():x,P=_,A,O,L,H,F=M.endPoint,Z=P[1],G=P[2];switch(S){default:break;case"M":y?H=a(Z,G,F):H={x:Z,y:G},this.command="M",this.params=[F,H],this.subStart=H,this.endPoint=H;break;case"L":y?H=a(Z,G,F):H={x:Z,y:G},this.command="L",this.params=[F,H],this.subStart=M.subStart,this.endPoint=H,this.endTangent=function(){return[H.x-F.x,H.y-F.y]},this.startTangent=function(){return[F.x-H.x,F.y-H.y]};break;case"H":y?H=a(Z,0,F):H={x:Z,y:F.y},this.command="L",this.params=[F,H],this.subStart=M.subStart,this.endPoint=H,this.endTangent=function(){return[H.x-F.x,H.y-F.y]},this.startTangent=function(){return[F.x-H.x,F.y-H.y]};break;case"V":y?H=a(0,Z,F):H={x:F.x,y:Z},this.command="L",this.params=[F,H],this.subStart=M.subStart,this.endPoint=H,this.endTangent=function(){return[H.x-F.x,H.y-F.y]},this.startTangent=function(){return[F.x-H.x,F.y-H.y]};break;case"Q":y?(A=a(Z,G,F),O=a(P[3],P[4],F)):(A={x:Z,y:G},O={x:P[3],y:P[4]}),this.command="Q",this.params=[F,A,O],this.subStart=M.subStart,this.endPoint=O,this.endTangent=function(){return[O.x-A.x,O.y-A.y]},this.startTangent=function(){return[F.x-A.x,F.y-A.y]};break;case"T":y?O=a(Z,G,F):O={x:Z,y:G},M.command==="Q"?(A=o(M.params[1],F),this.command="Q",this.params=[F,A,O],this.subStart=M.subStart,this.endPoint=O,this.endTangent=function(){return[O.x-A.x,O.y-A.y]},this.startTangent=function(){return[F.x-A.x,F.y-A.y]}):(this.command="TL",this.params=[F,O],this.subStart=M.subStart,this.endPoint=O,this.endTangent=function(){return[O.x-F.x,O.y-F.y]},this.startTangent=function(){return[F.x-O.x,F.y-O.y]});break;case"C":y?(A=a(Z,G,F),O=a(P[3],P[4],F),L=a(P[5],P[6],F)):(A={x:Z,y:G},O={x:P[3],y:P[4]},L={x:P[5],y:P[6]}),this.command="C",this.params=[F,A,O,L],this.subStart=M.subStart,this.endPoint=L,this.endTangent=function(){return[L.x-O.x,L.y-O.y]},this.startTangent=function(){return[F.x-A.x,F.y-A.y]};break;case"S":y?(O=a(Z,G,F),L=a(P[3],P[4],F)):(O={x:Z,y:G},L={x:P[3],y:P[4]}),M.command==="C"?(A=o(M.params[2],F),this.command="C",this.params=[F,A,O,L],this.subStart=M.subStart,this.endPoint=L,this.endTangent=function(){return[L.x-O.x,L.y-O.y]},this.startTangent=function(){return[F.x-A.x,F.y-A.y]}):(this.command="SQ",this.params=[F,O,L],this.subStart=M.subStart,this.endPoint=L,this.endTangent=function(){return[L.x-O.x,L.y-O.y]},this.startTangent=function(){return[F.x-O.x,F.y-O.y]});break;case"A":{var U=Z,Y=G,J=P[3],rt=P[4],ft=P[5];y?H=a(P[6],P[7],F):H={x:P[6],y:P[7]},this.command="A";var dt=b(F,H,rt,ft,U,Y,J);this.params=dt;var ut=M.subStart;this.subStart=ut,this.endPoint=H;var Lt=dt[5]%(Math.PI*2);t.isNumberEqual(Lt,Math.PI*2)&&(Lt=0);var Ft=dt[6]%(Math.PI*2);t.isNumberEqual(Ft,Math.PI*2)&&(Ft=0);var Ot=.001;this.startTangent=function(){ft===0&&(Ot*=-1);var St=dt[3]*Math.cos(Lt-Ot)+dt[1],xt=dt[4]*Math.sin(Lt-Ot)+dt[2];return[St-ut.x,xt-ut.y]},this.endTangent=function(){var St=dt[6];St-Math.PI*2<1e-4&&(St=0);var xt=dt[3]*Math.cos(Lt+St+Ot)+dt[1],At=dt[4]*Math.sin(Lt+St-Ot)+dt[2];return[F.x-xt,F.y-At]};break}case"Z":this.command="Z",this.params=[F,M.subStart],this.subStart=M.subStart,this.endPoint=M.subStart}},isInside:function(_,M,x){var y=this,S=y.command,P=y.params,A=y.box;if(A&&!u.box(A.minX,A.maxX,A.minY,A.maxY,_,M))return!1;switch(S){default:break;case"M":return!1;case"TL":case"L":case"Z":return u.line(P[0].x,P[0].y,P[1].x,P[1].y,x,_,M);case"SQ":case"Q":return u.quadraticline(P[0].x,P[0].y,P[1].x,P[1].y,P[2].x,P[2].y,x,_,M);case"C":return u.cubicline(P[0].x,P[0].y,P[1].x,P[1].y,P[2].x,P[2].y,P[3].x,P[3].y,x,_,M);case"A":{var O=P,L=O[1],H=O[2],F=O[3],Z=O[4],G=O[5],U=O[6],Y=O[7],J=O[8],rt=F>Z?F:Z,ft=F>Z?1:F/Z,dt=F>Z?Z/F:1;O=[_,M,1];var ut=[1,0,0,0,1,0,0,0,1];return n.translate(ut,ut,[-L,-H]),n.rotate(ut,ut,-Y),n.scale(ut,ut,[1/ft,1/dt]),h.transformMat3(O,O,ut),u.arcline(0,0,rt,G,G+U,1-J,x,O[0],O[1])}}return!1},draw:function(_){var M=this.command,x=this.params,y,S,P;switch(M){default:break;case"M":_.moveTo(x[1].x,x[1].y);break;case"TL":case"L":_.lineTo(x[1].x,x[1].y);break;case"SQ":case"Q":y=x[1],S=x[2],_.quadraticCurveTo(y.x,y.y,S.x,S.y);break;case"C":y=x[1],S=x[2],P=x[3],_.bezierCurveTo(y.x,y.y,S.x,S.y,P.x,P.y);break;case"A":{var A=x,O=A[1],L=A[2],H=O,F=L,Z=A[3],G=A[4],U=A[5],Y=A[6],J=A[7],rt=A[8],ft=Z>G?Z:G,dt=Z>G?1:Z/G,ut=Z>G?G/Z:1;_.translate(H,F),_.rotate(J),_.scale(dt,ut),_.arc(0,0,ft,U,U+Y,1-rt),_.scale(1/dt,1/ut),_.rotate(-J),_.translate(-H,-F);break}case"Z":_.closePath();break}},getBBox:function(_){var M=_/2,x=this.params,y,S,P,A;switch(this.command){default:case"M":case"Z":break;case"TL":case"L":this.box={minX:Math.min(x[0].x,x[1].x)-M,maxX:Math.max(x[0].x,x[1].x)+M,minY:Math.min(x[0].y,x[1].y)-M,maxY:Math.max(x[0].y,x[1].y)+M};break;case"SQ":case"Q":for(S=c.extrema(x[0].x,x[1].x,x[2].x),P=0,A=S.length;P<A;P++)S[P]=c.at(x[0].x,x[1].x,x[2].x,S[P]);for(S.push(x[0].x,x[2].x),y=c.extrema(x[0].y,x[1].y,x[2].y),P=0,A=y.length;P<A;P++)y[P]=c.at(x[0].y,x[1].y,x[2].y,y);y.push(x[0].y,x[2].y),this.box={minX:Math.min.apply(Math,S)-M,maxX:Math.max.apply(Math,S)+M,minY:Math.min.apply(Math,y)-M,maxY:Math.max.apply(Math,y)+M};break;case"C":for(S=s.extrema(x[0].x,x[1].x,x[2].x,x[3].x),P=0,A=S.length;P<A;P++)S[P]=s.at(x[0].x,x[1].x,x[2].x,x[3].x,S[P]);for(y=s.extrema(x[0].y,x[1].y,x[2].y,x[3].y),P=0,A=y.length;P<A;P++)y[P]=s.at(x[0].y,x[1].y,x[2].y,x[3].y,y[P]);S.push(x[0].x,x[3].x),y.push(x[0].y,x[3].y),this.box={minX:Math.min.apply(Math,S)-M,maxX:Math.max.apply(Math,S)+M,minY:Math.min.apply(Math,y)-M,maxY:Math.max.apply(Math,y)+M};break;case"A":{var O=x,L=O[1],H=O[2],F=O[3],Z=O[4],G=O[5],U=O[6],Y=O[7],J=O[8],rt=G,ft=G+U,dt=r.xExtrema(Y,F,Z),ut=Infinity,Lt=-Infinity,Ft=[rt,ft];for(P=-Math.PI*2;P<=Math.PI*2;P+=Math.PI){var Ot=dt+P;J===1?rt<Ot&&Ot<ft&&Ft.push(Ot):ft<Ot&&Ot<rt&&Ft.push(Ot)}for(P=0,A=Ft.length;P<A;P++){var St=r.xAt(Y,F,Z,L,Ft[P]);St<ut&&(ut=St),St>Lt&&(Lt=St)}var xt=r.yExtrema(Y,F,Z),At=Infinity,nt=-Infinity,Mt=[rt,ft];for(P=-Math.PI*2;P<=Math.PI*2;P+=Math.PI){var z=xt+P;J===1?rt<z&&z<ft&&Mt.push(z):ft<z&&z<rt&&Mt.push(z)}for(P=0,A=Mt.length;P<A;P++){var Q=r.yAt(Y,F,Z,H,Mt[P]);Q<At&&(At=Q),Q>nt&&(nt=Q)}this.box={minX:ut-M,maxX:Lt+M,minY:At-M,maxY:nt+M};break}}}}),E.exports=g},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var u=e(6),s=e(2),c=e(26),r=e(351),h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a._initDefaultCfg=function(){n.prototype._initDefaultCfg.call(this);var l=this;l.type="linear",l.isLinear=!0,l.nice=!1,l.min=null,l.minLimit=null,l.max=null,l.maxLimit=null,l.tickCount=null,l.tickInterval=null,l.minTickInterval=null,l.snapArray=null},a.init=function(){var l=this;if(!l.ticks)l.min=l.translate(l.min),l.max=l.translate(l.max),l.initTicks();else{var f=l.ticks,v=l.translate(f[0]),b=l.translate(f[f.length-1]);(u(l.min)||l.min>v)&&(l.min=v),(u(l.max)||l.max<b)&&(l.max=b)}},a.calculateTicks=function(){var l=this.min,f=this.max,v=this.minLimit,b=this.maxLimit,g=this.tickCount,m=this.tickInterval,_=this.minTickInterval,M=this.snapArray;if(g===1)throw new Error("linear scale'tickCount should not be 1");if(f<l)throw new Error("max: "+f+" should not be less than min: "+l);var x=r({min:l,max:f,minLimit:v,maxLimit:b,minCount:g,maxCount:g,interval:m,minTickInterval:_,snapArray:M});return x.ticks},a.initTicks=function(){var l=this,f=l.calculateTicks();if(l.nice)l.ticks=f,l.min=f[0],l.max=f[f.length-1];else{var v=[];s(f,function(b){b>=l.min&&b<=l.max&&v.push(b)}),v.length||(v.push(l.min),v.push(l.max)),l.ticks=v}},a.scale=function(l){if(u(l))return NaN;var f=this.max,v=this.min;if(f===v)return 0;var b=(l-v)/(f-v),g=this.rangeMin(),m=this.rangeMax();return g+b*(m-g)},a.invert=function(l){var f=(l-this.rangeMin())/(this.rangeMax()-this.rangeMin());return this.min+f*(this.max-this.min)},i}(c);c.Linear=h,E.exports=h},function(E,T,e){var t=e(15),u=e(192);E.exports={toTimeStamp:function(c){return t(c)&&(c.indexOf("T")>0?c=new Date(c).getTime():c=new Date(c.replace(/-/ig,"/")).getTime()),u(c)&&(c=c.getTime()),c}}},function(E,T,e){var t=e(21),u=Array.prototype.indexOf,s=function(r,h){return t(r)?u.call(r,h)>-1:!1};E.exports=s},function(E,T){var e=function(u){for(var s=[],c=0;c<u.length;c++)s=s.concat(u[c]);return s};E.exports=e},function(E,T){var e=1e-5;E.exports=function(u,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e;return Math.abs(u-s)<c}},function(E,T,e){E.exports={mat3:e(85),vec2:e(174),vec3:e(175),transform:e(173)}},function(E,T,e){var t=e(21);function u(s){return t(s)?Array.prototype.slice.call(s):[]}E.exports=u},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},u=e(45);function s(r,h){return r===h?r!==0||h!==0||1/r==1/h:r!==r&&h!==h}function c(r){return u.Util.isArray(r)?r.length:u.Util.isObject(r)?Object.keys(r).length:0}T.default=u.Util.mix({},u.Util,{shallowEqual:function(h,n){if(s(h,n))return!0;if((typeof h=="undefined"?"undefined":t(h))!=="object"||h===null||(typeof n=="undefined"?"undefined":t(n))!=="object"||n===null||u.Util.isArray(h)!==u.Util.isArray(n)||c(h)!==c(n))return!1;var i=!0;return u.Util.each(h,function(a,o){return s(a,n[o])?!0:(i=!1,i)}),i},without:function(h){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i={};return u.Util.each(h,function(a,o){u.Util.indexOf(n,o)===-1&&(i[o]=a)}),i},length:c})},function(E,T,e){"use strict";T.a=function(t,u){return t=+t,u-=t,function(s){return t+u*s}}},function(E,T,e){"use strict";T.a=function(t,u){return t=+t,u=+u,function(s){return t*(1-s)+u*s}}},function(E,T,e){"use strict";var t=e(97),u=e(98);function s(r){return function(){var h=this.ownerDocument,n=this.namespaceURI;return n===u.b&&h.documentElement.namespaceURI===u.b?h.createElement(r):h.createElementNS(n,r)}}function c(r){return function(){return this.ownerDocument.createElementNS(r.space,r.local)}}T.a=function(r){var h=e.i(t.a)(r);return(h.local?c:s)(h)}},function(E,T,e){"use strict";T.a=function(t,u){var s=t.ownerSVGElement||t;if(s.createSVGPoint){var c=s.createSVGPoint();return c.x=u.clientX,c.y=u.clientY,c=c.matrixTransform(t.getScreenCTM().inverse()),[c.x,c.y]}var r=t.getBoundingClientRect();return[u.clientX-r.left-t.clientLeft,u.clientY-r.top-t.clientTop]}},function(E,T,e){"use strict";T.b=c;var t=e(13);function u(r,h){var n,i;return function(){var a=e.i(t.e)(this,r),o=a.tween;if(o!==n){i=n=o;for(var l=0,f=i.length;l<f;++l)if(i[l].name===h){i=i.slice(),i.splice(l,1);break}}a.tween=i}}function s(r,h,n){var i,a;if(typeof n!="function")throw new Error;return function(){var o=e.i(t.e)(this,r),l=o.tween;if(l!==i){a=(i=l).slice();for(var f={name:h,value:n},v=0,b=a.length;v<b;++v)if(a[v].name===h){a[v]=f;break}v===b&&a.push(f)}o.tween=a}}T.a=function(r,h){var n=this._id;if(r+="",arguments.length<2){for(var i=e.i(t.f)(this.node(),n).tween,a=0,o=i.length,l;a<o;++a)if((l=i[a]).name===r)return l.value;return null}return this.each((h==null?u:s)(n,r,h))};function c(r,h,n){var i=r._id;return r.each(function(){var a=e.i(t.e)(this,i);(a.value||(a.value={}))[h]=n.apply(this,arguments)}),function(a){return e.i(t.f)(a,i).value[h]}}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.setTheme=T.track=T.Interactions=T.PathUtil=T.Animate=T.Shape=T.Util=T.G2=T.Facet=T.Label=T.Guide=T.View=T.Geom=T.Tooltip=T.Legend=T.Axis=T.Coord=T.Chart=void 0;var t=e(422);Object.defineProperty(T,"Chart",{enumerable:!0,get:function(){return x(t).default}});var u=e(424);Object.defineProperty(T,"Coord",{enumerable:!0,get:function(){return x(u).default}});var s=e(420);Object.defineProperty(T,"Axis",{enumerable:!0,get:function(){return x(s).default}});var c=e(430);Object.defineProperty(T,"Legend",{enumerable:!0,get:function(){return x(c).default}});var r=e(431);Object.defineProperty(T,"Tooltip",{enumerable:!0,get:function(){return x(r).default}});var h=e(427);Object.defineProperty(T,"Geom",{enumerable:!0,get:function(){return x(h).default}});var n=e(432);Object.defineProperty(T,"View",{enumerable:!0,get:function(){return x(n).default}});var i=e(428);Object.defineProperty(T,"Guide",{enumerable:!0,get:function(){return x(i).default}});var a=e(429);Object.defineProperty(T,"Label",{enumerable:!0,get:function(){return x(a).default}});var o=e(426);Object.defineProperty(T,"Facet",{enumerable:!0,get:function(){return x(o).default}});var l=e(45),f=x(l),v=e(322),b=x(v),g=e(58),m=x(g),_=e(438),M=x(_);function x(A){return A&&A.__esModule?A:{default:A}}T.G2=f.default,T.Util=m.default,T.Shape=l.Shape,T.Animate=l.Animate,T.PathUtil=l.PathUtil,T.Interactions=b.default;var y=T.track=function(){},S=T.setTheme=function(O){var L=O;typeof O=="string"&&M.default[O]&&(L=M.default[O]),f.default.Global.setTheme(L)},P={G2:f.default,Util:m.default,Shape:l.Shape,Animate:l.Animate,PathUtil:l.PathUtil,track:y,setTheme:S,Interactions:b.default};T.default=P},function(E,T,e){E.exports={Position:e(235),Color:e(233),Shape:e(236),Size:e(237),Opacity:e(234),ColorUtil:e(107)}},function(E,T,e){function t(o){return function(){var l=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(105),i=e(3),a=function(o){h(v,o);var l=t(v),f=v.prototype;f.getDefaultCfg=function(){return{}};function v(b){var g;g=o.call(this)||this;var m=s(g),_={visible:!0},M=m.getDefaultCfg();return m._attrs=_,i.deepMix(_,M,b),g}return f.get=function(g){return this._attrs[g]},f.set=function(g,m){this._attrs[g]=m},f.changeVisible=function(){},f.destroy=function(){var g=this;g._attrs={},g.removeAllListeners(),g.destroyed=!0},v}(n);E.exports=a},function(E,T,e){function t(m){return function(){var _=r(m),M;if(c()){var x=r(this).constructor;M=Reflect.construct(_,arguments,x)}else M=_.apply(this,arguments);return u(this,M)}}function u(m,_){return _&&(typeof _=="object"||typeof _=="function")?_:s(m)}function s(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(m){return!1}}function r(m){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},r(m)}function h(m,_){m.prototype=Object.create(_.prototype),m.prototype.constructor=m,m.__proto__=_}var n=e(3),i=e(112),a=e(261),o=e(19),l=o.FONT_FAMILY,f=8,v=n.Event,b=n.Group,g=function(m){h(M,m);var _=t(M);function M(){return m.apply(this,arguments)||this}var x=M.prototype;return x.getDefaultCfg=function(){var S=m.prototype.getDefaultCfg.call(this);return n.mix({},S,{type:"continuous-legend",items:null,layout:"vertical",width:20,height:156,textStyle:{fill:"#333",textAlign:"center",textBaseline:"middle",stroke:"#fff",lineWidth:5,fontFamily:l},hoverTextStyle:{fill:"rgba(0,0,0,0.25)"},slidable:!0,triggerAttr:{fill:"#fff",shadowBlur:10,shadowColor:"rgba(0,0,0,0.65)",radius:2},_range:[0,100],middleBackgroundStyle:{fill:"#D9D9D9"},textOffset:4,lineStyle:{lineWidth:1,stroke:"#fff"},pointerStyle:{fill:"rgb(230, 230, 230)"}})},x._calStartPoint=function(){var S={x:10,y:this.get("titleGap")-f},P=this.get("titleShape");if(P){var A=P.getBBox();S.y+=A.height}return S},x.beforeRender=function(){var S=this.get("items");!n.isArray(S)||n.isEmpty(S)||(m.prototype.beforeRender.call(this),this.set("firstItem",S[0]),this.set("lastItem",S[S.length-1]))},x._formatItemValue=function(S){var P=this.get("formatter")||this.get("itemFormatter");return P&&(S=P.call(this,S)),S},x.render=function(){m.prototype.render.call(this),this.get("slidable")?this._renderSlider():this._renderUnslidable()},x._renderSlider=function(){var S=new b,P=new b,A=new b,O=this._calStartPoint(),L=this.get("group"),H=L.addGroup(a,{minHandleElement:S,maxHandleElement:P,backgroundElement:A,layout:this.get("layout"),range:this.get("_range"),width:this.get("width"),height:this.get("height")});H.translate(O.x,O.y),this.set("slider",H);var F=this._renderSliderShape();F.attr("clip",H.get("middleHandleElement")),this._renderTrigger()},x._addMiddleBar=function(S,P,A){return S.addShape(P,{attrs:n.mix({},A,this.get("middleBackgroundStyle"))}),S.addShape(P,{attrs:A})},x._renderTrigger=function(){var S=this.get("firstItem"),P=this.get("lastItem"),A=this.get("layout"),O=this.get("textStyle"),L=this.get("triggerAttr"),H=n.mix({},L),F=n.mix({},L),Z=n.mix({text:this._formatItemValue(S.value)+""},O),G=n.mix({text:this._formatItemValue(P.value)+""},O);A==="vertical"?(this._addVerticalTrigger("min",H,Z),this._addVerticalTrigger("max",F,G)):(this._addHorizontalTrigger("min",H,Z),this._addHorizontalTrigger("max",F,G))},x._addVerticalTrigger=function(S,P,A){var O=this.get("slider"),L=O.get(S+"HandleElement"),H=this.get("width"),F=L.addShape("rect",{attrs:n.mix({x:H/2-f-2,y:S==="min"?0:-f,width:2*f+2,height:f},P)}),Z=L.addShape("text",{attrs:n.mix(A,{x:H+this.get("textOffset"),y:S==="max"?-4:4,textAlign:"start",lineHeight:1,textBaseline:"middle"})}),G=this.get("layout"),U=G==="vertical"?"ns-resize":"ew-resize";F.attr("cursor",U),Z.attr("cursor",U),this.set(S+"ButtonElement",F),this.set(S+"TextElement",Z)},x._addHorizontalTrigger=function(S,P,A){var O=this.get("slider"),L=O.get(S+"HandleElement"),H=L.addShape("rect",{attrs:n.mix({x:S==="min"?-f:0,y:-f-this.get("height")/2,width:f,height:2*f},P)}),F=L.addShape("text",{attrs:n.mix(A,{x:S==="min"?-f-4:f+4,y:f/2+this.get("textOffset")+10,textAlign:S==="min"?"end":"start",textBaseline:"middle"})}),Z=this.get("layout"),G=Z==="vertical"?"ns-resize":"ew-resize";H.attr("cursor",G),F.attr("cursor",G),this.set(S+"ButtonElement",H),this.set(S+"TextElement",F)},x._bindEvents=function(){var S=this;if(this.get("slidable")){var P=this.get("slider");P.on("sliderchange",function(A){var O=A.range,L=S.get("firstItem").value,H=S.get("lastItem").value,F=L+O[0]/100*(H-L),Z=L+O[1]/100*(H-L);S._updateElement(F,Z);var G=new v("itemfilter",A,!0,!0);G.range=[F,Z],S.emit("itemfilter",G)})}this.get("hoverable")&&(this.get("group").on("mousemove",n.wrapBehavior(this,"_onMouseMove")),this.get("group").on("mouseleave",n.wrapBehavior(this,"_onMouseLeave")))},x._updateElement=function(S,P){var A=this.get("minTextElement"),O=this.get("maxTextElement");P>1&&(S=parseInt(S,10),P=parseInt(P,10)),A.attr("text",this._formatItemValue(S)+""),O.attr("text",this._formatItemValue(P)+"")},x._onMouseLeave=function(){var S=this.get("group").findById("hoverPointer");S&&S.destroy();var P=this.get("group").findById("hoverText");P&&P.destroy(),this.get("canvas").draw()},x._onMouseMove=function(S){var P=this.get("height"),A=this.get("width"),O=this.get("items"),L=this.get("canvas").get("el"),H=L.getBoundingClientRect(),F=this.get("group").getBBox(),Z;if(this.get("layout")==="vertical"){var G=5;this.get("type")==="color-legend"&&(G=30);var U=this.get("titleGap"),Y=this.get("titleShape");Y&&(U+=Y.getBBox().maxY-Y.getBBox().minY);var J=S.clientY||S.event.clientY;J=J-H.y-this.get("group").attr("matrix")[7]+F.y-G+U,Z=O[0].value+(1-J/P)*(O[O.length-1].value-O[0].value)}else{var rt=S.clientX||S.event.clientX;rt=rt-H.x-this.get("group").attr("matrix")[6],Z=O[0].value+rt/A*(O[O.length-1].value-O[0].value)}Z=Z.toFixed(2),this.activate(Z),this.emit("mousehover",{value:Z})},x.activate=function(S){if(!!S){var P=this.get("group").findById("hoverPointer"),A=this.get("group").findById("hoverText"),O=this.get("items");if(!(S<O[0].value||S>O[O.length-1].value)){var L=this.get("height"),H=this.get("width"),F=this.get("titleShape"),Z=this.get("titleGap"),G=[],U=(S-O[0].value)/(O[O.length-1].value-O[0].value),Y;if(this.get("layout")==="vertical"){var J=0,rt=0;this.get("type")==="color-legend"&&(J=Z,F&&(J+=F.getBBox().height)),this.get("slidable")&&(this.get("type")==="color-legend"?J-=13:(J=Z-15,F&&(J+=F.getBBox().height)),rt+=10),U=(1-U)*L,G=[[rt,U+J],[rt-10,U+J-5],[rt-10,U+J+5]],Y=n.mix({},{x:H+this.get("textOffset")/2+rt,y:U+J,text:this._formatItemValue(S)+""},this.get("textStyle"),{textAlign:"start"})}else{var ft=0,dt=0;this.get("type")==="color-legend"&&(ft=Z,F&&(ft+=F.getBBox().height)),this.get("slidable")&&(this.get("type")==="color-legend"?ft-=7:(ft=Z,F||(ft-=7)),dt+=10),U*=H,G=[[U+dt,ft],[U+dt-5,ft-10],[U+dt+5,ft-10]],Y=n.mix({},{x:U-5,y:L+this.get("textOffset")+ft,text:this._formatItemValue(S)+""},this.get("textStyle"))}var ut=n.mix(Y,this.get("hoverTextStyle"));A?A.attr(ut):(A=this.get("group").addShape("text",{attrs:ut}),A.set("id","hoverText")),P?P.attr(n.mix({points:G},this.get("pointerStyle"))):(P=this.get("group").addShape("Polygon",{attrs:n.mix({points:G},this.get("pointerStyle"))}),P.set("id","hoverPointer")),this.get("canvas").draw()}}},x.deactivate=function(){var S=this.get("group").findById("hoverPointer");S&&S.destroy();var P=this.get("group").findById("hoverText");P&&P.destroy(),this.get("canvas").draw()},M}(i);E.exports=g},function(E,T,e){function t(o){return function(){var l=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(66),i=e(3),a=function(o){h(f,o);var l=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return i.mix({},g,{x:0,y:0,items:null,titleContent:null,showTitle:!0,plotRange:null,offset:10,timeStamp:0,inPlot:!0,crosshairs:null})},v.isContentChange=function(g,m){var _=this.get("titleContent"),M=this.get("items"),x=!(g===_&&M.length===m.length);return x||i.each(m,function(y,S){var P=M[S];for(var A in y)if(y.hasOwnProperty(A)&&!i.isObject(y[A])&&y[A]!==P[A]){x=!0;break}if(x)return!1}),x},v.setContent=function(g,m){var _=new Date().valueOf();return this.set("items",m),this.set("titleContent",g),this.set("timeStamp",_),this.render(),this},v.setPosition=function(g,m){this.set("x",g),this.set("y",m)},v.render=function(){},v.clear=function(){},v.show=function(){this.set("visible",!0)},v.hide=function(){this.set("visible",!1)},f}(n);E.exports=a},function(E,T,e){var t=e(16),u=t.Group,s=e(30),c=s.Label,r=e(5),h=e(0),n=["line","point","path"],i="_origin";function a(f){var v=0;return h.each(f,function(b){v+=b}),v/f.length}function o(f,v){if(h.isNumber(f)&&h.isNumber(v))return[f,v];for(var b=-1,g=0,m=0,_,M=f.length-1,x,y=0;++b<f.length;)_=M,M=b,y+=x=f[_]*v[M]-f[M]*v[_],g+=(f[_]+f[M])*x,m+=(v[_]+v[M])*x;return y*=3,[g/y,m/y]}var l=function f(v){f.superclass.constructor.call(this,v)};h.extend(l,u),h.augment(l,{getDefaultCfg:function(){return{label:r.label,labelCfg:null,coord:null,geomType:null,zIndex:6}},_renderUI:function(){l.superclass._renderUI.call(this),this.initLabelsCfg();var v=this.addGroup(),b=this.addGroup({elCls:"x-line-group"}),g=this.get("labelRenderer");this.set("labelsGroup",v),this.set("lineGroup",b),this.get("labelRenderer").set("group",v),g.set("group",v),g.set("lineGroup",b)},initLabelsCfg:function(){var v=this,b=new c,g=v.getDefaultLabelCfg(),m=v.get("labelCfg");h.deepMix(g,m.globalCfg||m.cfg),b.set("config",!1),g.labelLine&&b.set("labelLine",g.labelLine),b.set("coord",v.get("coord")),this.set("labelRenderer",b),v.set("label",g)},getDefaultLabelCfg:function(){var v=this,b=v.get("labelCfg").cfg||v.get("labelCfg").globalCfg,g=v.get("geomType"),m=v.get("viewTheme")||r;return g==="polygon"||b&&b.offset<0&&h.indexOf(n,g)===-1?h.deepMix({},v.get("label"),m.innerLabels,b):h.deepMix({},v.get("label"),m.label,b)},getLabelsItems:function(v,b){var g=this,m=[],_=g.get("geom"),M=g.get("coord");g._getLabelCfgs(v,b);var x=g.get("labelItemCfgs");return h.each(v,function(y,S){var P=y[i],A=x[S];if(!A){m.push(null);return}h.isArray(A.text)||(A.text=[A.text]);var O=A.text.length;h.each(A.text,function(L,H){if(h.isNil(L)||L===""){m.push(null);return}var F=g.getLabelPoint(A,y,H);F=h.mix({},A,F),F.textAlign||(F.textAlign=g.getLabelAlign(F,H,O)),_&&(F._id=_._getShapeId(P)+"-glabel-"+H+"-"+F.text),F.coord=M,m.push(F)})}),m},adjustItems:function(v){return h.each(v,function(b){!b||(b.offsetX&&(b.x+=b.offsetX),b.offsetY&&(b.y+=b.offsetY))}),v},drawLines:function(v){var b=this;h.each(v,function(g){!g||g.offset>0&&b.lineToLabel(g)})},lineToLabel:function(){},getLabelPoint:function(v,b,g){var m=this,_=m.get("coord"),M=v.text.length;function x(O,L){return h.isArray(O)&&(v.text.length===1?O.length<=2?O=O[O.length-1]:O=a(O):O=O[L]),O}var y={text:v.text[g]};if(b&&this.get("geomType")==="polygon"){var S=o(b.x,b.y);y.x=S[0],y.y=S[1]}else y.x=x(b.x,g),y.y=x(b.y,g);if(b&&b.nextPoints&&(b.shape==="funnel"||b.shape==="pyramid")){var P=-Infinity;b.nextPoints.forEach(function(O){O=_.convert(O),O.x>P&&(P=O.x)}),y.x=(y.x+P)/2}b.shape==="pyramid"&&!b.nextPoints&&b.points&&b.points.forEach(function(O){O=_.convert(O),(h.isArray(O.x)&&!b.x.includes(O.x)||h.isNumber(O.x)&&b.x!==O.x)&&(y.x=(y.x+O.x)/2)}),v.position&&m.setLabelPosition(y,b,g,v.position);var A=m.getLabelOffset(v,g,M);return v.offsetX&&(A.x+=v.offsetX),v.offsetY&&(A.y+=v.offsetY),m.transLabelPoint(y),y.start={x:y.x,y:y.y},y.x+=A.x,y.y+=A.y,y.color=b.color,y},setLabelPosition:function(){},transLabelPoint:function(v){var b=this,g=b.get("coord"),m=g.applyMatrix(v.x,v.y,1);v.x=m[0],v.y=m[1]},getOffsetVector:function(v){var b=this,g=v.offset||0,m=b.get("coord"),_;return m.isTransposed?_=m.applyMatrix(g,0):_=m.applyMatrix(0,g),_},getDefaultOffset:function(v){var b=this,g=0,m=b.get("coord"),_=b.getOffsetVector(v);m.isTransposed?g=_[0]:g=_[1];var M=this.get("yScale");if(M&&v.point){var x=v.point[M.field];x<0&&(g=g*-1)}return g},getLabelOffset:function(v,b,g){var m=this,_=m.getDefaultOffset(v),M=m.get("coord"),x=M.isTransposed,y=x?"x":"y",S=x?1:-1,P={x:0,y:0};return b>0||g===1?P[y]=_*S:P[y]=_*S*-1,P},getLabelAlign:function(v,b,g){var m=this,_="center",M=m.get("coord");if(M.isTransposed){var x=m.getDefaultOffset(v);x<0?_="right":x===0?_="center":_="left",g>1&&b===0&&(_==="right"?_="left":_==="left"&&(_="right"))}return _},_getLabelValue:function(v,b){h.isArray(b)||(b=[b]);var g=[];return h.each(b,function(m){var _=v[m.field];if(h.isArray(_)){var M=[];h.each(_,function(x){M.push(m.getText(x))}),_=M}else _=m.getText(_);(h.isNil(_)||_==="")&&g.push(null),g.push(_)}),g},_getLabelCfgs:function(v){var b=this,g=this.get("labelCfg"),m=g.scales,_=this.get("label"),M=b.get("viewTheme")||r,x=[];g.globalCfg&&g.globalCfg.type&&b.set("type",g.globalCfg.type),h.each(v,function(y,S){var P={},A=y[i],O=b._getLabelValue(A,m);if(g.callback){var L=m.map(function(Z){return A[Z.field]});P=g.callback.apply(null,[].concat(L,[y,S]))}if(!P&&P!==0){x.push(null);return}if(h.isString(P)||h.isNumber(P)?P={text:P}:(P.text=P.content||O[0],delete P.content),P=h.mix({},_,g.globalCfg||{},P),y.point=A,P.point=A,P.htmlTemplate&&(P.useHtml=!0,P.text=P.htmlTemplate.call(null,P.text,y,S),delete P.htmlTemplate),P.formatter&&(P.text=P.formatter.call(null,P.text,y,S),delete P.formatter),P.label){var H=P.label;delete P.label,P=h.mix(P,H)}if(P.textStyle){delete P.textStyle.offset;var F=P.textStyle;h.isFunction(F)&&(P.textStyle=F.call(null,P.text,y,S))}P.labelLine&&(P.labelLine=h.mix({},_.labelLine,P.labelLine)),P.textStyle=h.mix({},_.textStyle,M.label.textStyle,P.textStyle),delete P.items,x.push(P)}),this.set("labelItemCfgs",x)},showLabels:function(v,b){var g=this,m=g.get("labelRenderer"),_=g.getLabelsItems(v,b);b=[].concat(b);var M=g.get("type");_=g.adjustItems(_,b),g.drawLines(_),m.set("items",_.filter(function(x,y){return x?!0:(b.splice(y,1),!1)})),M&&(m.set("shapes",b),m.set("type",M),m.set("points",v)),m.set("canvas",this.get("canvas")),m.draw()},destroy:function(){this.get("labelRenderer").destroy(),l.superclass.destroy.call(this)}}),E.exports=l},function(E,T,e){var t=e(5),u=e(0);function s(r,h){var n=r.length;u.isString(r[0])&&(r=r.map(function(l){return h.translate(l)}));for(var i=r[1]-r[0],a=2;a<n;a++){var o=r[a]-r[a-1];i>o&&(i=o)}return i}var c={getDefaultSize:function(){var h=this.get("defaultSize"),n=this.get("viewTheme")||t;if(!h){var i=this.get("coord"),a=this.getXScale(),o=a.values,l=this.get("dataArray"),f;if(a.isLinear&&o.length>1){o.sort();var v=s(o,a);f=(a.max-a.min)/v,o.length>f&&(f=o.length)}else f=o.length;var b=a.range,g=1/f,m=1;if(this.isInCircle()?i.isTransposed&&f>1?m=n.widthRatio.multiplePie:m=n.widthRatio.rose:(a.isLinear&&(g*=b[1]-b[0]),m=n.widthRatio.column),g*=m,this.hasAdjust("dodge")){var _=this._getDodgeCfg(l),M=_.dodgeCount,x=_.dodgeRatio;g=g/M,x>0&&(g=x*g/m)}h=g,this.set("defaultSize",h)}return h},_getDodgeCfg:function(h){var n=this.get("adjusts"),i,a,o=h.length;if(u.each(n,function(v){v.type==="dodge"&&(i=v.dodgeBy,a=v.dodgeRatio)}),i){var l=u.Array.merge(h),f=u.Array.values(l,i);o=f.length}return{dodgeCount:o,dodgeRatio:a}},getDimWidth:function(h){var n=this.get("coord"),i=n.convertPoint({x:0,y:0}),a=n.convertPoint({x:h==="x"?1:0,y:h==="x"?0:1}),o=0;return i&&a&&(o=Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2))),o},_getWidth:function(){var h=this.get("coord"),n;return this.isInCircle()&&!h.isTransposed?n=(h.endAngle-h.startAngle)*h.radius:n=this.getDimWidth("x"),n},_toNormalizedSize:function(h){var n=this._getWidth();return h/n},_toCoordSize:function(h){var n=this._getWidth();return n*h},getNormalizedSize:function(h){var n=this.getAttrValue("size",h);return u.isNil(n)?n=this.getDefaultSize():n=this._toNormalizedSize(n),n},getSize:function(h){var n=this.getAttrValue("size",h);if(u.isNil(n)){var i=this.getDefaultSize();n=this._toCoordSize(i)}return n}};E.exports=c},function(E,T,e){var t=e(72);E.exports=function(u,s){var c=t(u);if(c&&c[s])return c[s]}},function(E,T){E.exports=function(e){var t=e.get("scaleController")||{};return t.defs}},function(E,T,e){var t=e(0),u=e(52);E.exports=function(s,c){var r,h=c.field,n=c.type,i=t.Array.values(s,h);return n==="linear"?(r=t.Array.getRange(i),c.min<r.min&&(r.min=c.min),c.max>r.max&&(r.max=c.max)):(n==="timeCat"&&(t.each(i,function(a,o){i[o]=u.toTimeStamp(a)}),i.sort(function(a,o){return a-o})),r=i),r}},function(E,T,e){var t=e(1),u=e(7),s=e(37),c=e(50),r=function h(n){h.superclass.constructor.call(this,n)};r.Symbols={circle:function(n,i,a){return[["M",n,i],["m",-a,0],["a",a,a,0,1,0,a*2,0],["a",a,a,0,1,0,-a*2,0]]},square:function(n,i,a){return[["M",n-a,i-a],["L",n+a,i-a],["L",n+a,i+a],["L",n-a,i+a],["Z"]]},diamond:function(n,i,a){return[["M",n-a,i],["L",n,i-a],["L",n+a,i],["L",n,i+a],["Z"]]},triangle:function(n,i,a){var o=a*Math.sin(1/3*Math.PI);return[["M",n-a,i+o],["L",n,i-o],["L",n+a,i+o],["z"]]},"triangle-down":function(n,i,a){var o=a*Math.sin(1/3*Math.PI);return[["M",n-a,i-o],["L",n+a,i-o],["L",n,i+o],["Z"]]}},r.ATTRS={path:null,lineWidth:1},t.extend(r,u),t.augment(r,{type:"marker",canFill:!0,canStroke:!0,getDefaultAttrs:function(){return{x:0,y:0,lineWidth:1}},calculateBox:function(){var n=this._attrs,i=n.x,a=n.y,o=n.radius,l=this.getHitLineWidth(),f=l/2+o;return{minX:i-f,minY:a-f,maxX:i+f,maxY:a+f}},_getPath:function(){var n=this._attrs,i=n.x,a=n.y,o=n.radius||n.r,l=n.symbol||"circle",f;return t.isFunction(l)?f=l:f=r.Symbols[l],f?f(i,a,o):(console.warn(l+" marker is not supported."),null)},createPath:function(n){var i=this._cfg.segments;if(i&&!this._cfg.hasUpdate){n.beginPath();for(var a=0;a<i.length;a++)i[a].draw(n);return}var o=s.parsePath(this._getPath());n.beginPath();var l;i=[];for(var f=0;f<o.length;f++){var v=o[f];l=new c(v,l,f===o.length-1),i.push(l),l.draw(n)}this._cfg.segments=i,this._cfg.hasUpdate=!1}}),E.exports=r},function(E,T,e){var t=e(1),u=t.vec2;function s(a,o,l,f,v){var b=1-v;return b*b*(b*f+3*v*l)+v*v*(v*a+3*b*o)}function c(a,o,l,f,v){var b=1-v;return 3*(((o-a)*b+2*(l-o)*v)*b+(f-l)*v*v)}function r(a,o,l,f,v,b,g,m,_,M,x){var y,S=.005,P=Infinity,A,O,L,H,F,Z,G,U=1e-4,Y=[_,M];for(A=0;A<1;A+=.05)O=[s(a,l,v,g,A),s(o,f,b,m,A)],L=u.squaredDistance(Y,O),L<P&&(y=A,P=L);P=Infinity;for(var J=0;J<32&&!(S<U);J++)Z=y-S,G=y+S,O=[s(a,l,v,g,Z),s(o,f,b,m,Z)],L=u.squaredDistance(Y,O),Z>=0&&L<P?(y=Z,P=L):(F=[s(a,l,v,g,G),s(o,f,b,m,G)],H=u.squaredDistance(Y,F),G<=1&&H<P?(y=G,P=H):S*=.5);return x&&(x.x=s(a,l,v,g,y),x.y=s(o,f,b,m,y)),Math.sqrt(P)}function h(a,o,l,f){var v=3*a-9*o+9*l-3*f,b=6*o-12*l+6*f,g=3*l-3*f,m=[],_,M,x;if(t.isNumberEqual(v,0))t.isNumberEqual(b,0)||(_=-g/b,_>=0&&_<=1&&m.push(_));else{var y=b*b-4*v*g;t.isNumberEqual(y,0)?m.push(-b/(2*v)):y>0&&(x=Math.sqrt(y),_=(-b+x)/(2*v),M=(-b-x)/(2*v),_>=0&&_<=1&&m.push(_),M>=0&&M<=1&&m.push(M))}return m}function n(a,o,l,f,v){var b=-3*o+9*l-9*f+3*v,g=a*b+6*o-12*l+6*f;return a*g-3*o+3*l}function i(a,o,l,f,v,b,g,m,_){t.isNil(_)&&(_=1),_=_>1?1:_<0?0:_;for(var M=_/2,x=12,y=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],S=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],P=0,A=0;A<x;A++){var O=M*y[A]+M,L=n(O,a,l,v,g),H=n(O,o,f,b,m),F=L*L+H*H;P+=S[A]*Math.sqrt(F)}return M*P}E.exports={at:s,derivativeAt:c,projectPoint:function(o,l,f,v,b,g,m,_,M,x){var y={};return r(o,l,f,v,b,g,m,_,M,x,y),y},pointDistance:r,extrema:h,len:i}},function(E,T,e){var t=e(48),u=e(144),s=e(75),c=e(47);E.exports={line:function(h,n,i,a,o,l,f){var v=t.box(h,n,i,a,o);if(!this.box(v.minX,v.maxX,v.minY,v.maxY,l,f))return!1;var b=t.pointDistance(h,n,i,a,l,f);return isNaN(b)?!1:b<=o/2},polyline:function(h,n,i,a){var o=h.length-1;if(o<1)return!1;for(var l=0;l<o;l++){var f=h[l][0],v=h[l][1],b=h[l+1][0],g=h[l+1][1];if(this.line(f,v,b,g,n,i,a))return!0}return!1},cubicline:function(h,n,i,a,o,l,f,v,b,g,m){return s.pointDistance(h,n,i,a,o,l,f,v,g,m)<=b/2},quadraticline:function(h,n,i,a,o,l,f,v,b){return u.pointDistance(h,n,i,a,o,l,v,b)<=f/2},arcline:function(h,n,i,a,o,l,f,v,b){return c.pointDistance(h,n,i,a,o,l,v,b)<=f/2},rect:function(h,n,i,a,o,l){return h<=o&&o<=h+i&&n<=l&&l<=n+a},circle:function(h,n,i,a,o){return Math.pow(a-h,2)+Math.pow(o-n,2)<=Math.pow(i,2)},box:function(h,n,i,a,o,l){return h<=o&&o<=n&&i<=l&&l<=a}}},function(E,T,e){var t=e(150),u=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,s=new RegExp("([a-z])["+u+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+u+"]*,?["+u+"]*)+)","ig"),c=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+u+"]*,?["+u+"]*","ig"),r=function(St){if(!St)return null;if(typeof St==typeof[])return St;var xt={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},At=[];return String(St).replace(s,function(nt,Mt,z){var Q=[],ht=Mt.toLowerCase();if(z.replace(c,function(et,at){at&&Q.push(+at)}),ht==="m"&&Q.length>2&&(At.push([Mt].concat(Q.splice(0,2))),ht="l",Mt=Mt==="m"?"l":"L"),ht==="o"&&Q.length===1&&At.push([Mt,Q[0]]),ht==="r")At.push([Mt].concat(Q));else for(;Q.length>=xt[ht]&&(At.push([Mt].concat(Q.splice(0,xt[ht]))),!!xt[ht]););}),At},h=function(St,xt){for(var At=[],nt=0,Mt=St.length;Mt-2*!xt>nt;nt+=2){var z=[{x:+St[nt-2],y:+St[nt-1]},{x:+St[nt],y:+St[nt+1]},{x:+St[nt+2],y:+St[nt+3]},{x:+St[nt+4],y:+St[nt+5]}];xt?nt?Mt-4===nt?z[3]={x:+St[0],y:+St[1]}:Mt-2===nt&&(z[2]={x:+St[0],y:+St[1]},z[3]={x:+St[2],y:+St[3]}):z[0]={x:+St[Mt-2],y:+St[Mt-1]}:Mt-4===nt?z[3]=z[2]:nt||(z[0]={x:+St[nt],y:+St[nt+1]}),At.push(["C",(-z[0].x+6*z[1].x+z[2].x)/6,(-z[0].y+6*z[1].y+z[2].y)/6,(z[1].x+6*z[2].x-z[3].x)/6,(z[1].y+6*z[2].y-z[3].y)/6,z[2].x,z[2].y])}return At},n=function(St,xt,At,nt,Mt){var z=[];if(Mt===null&&nt===null&&(nt=At),St=+St,xt=+xt,At=+At,nt=+nt,Mt!==null){var Q=Math.PI/180,ht=St+At*Math.cos(-nt*Q),et=St+At*Math.cos(-Mt*Q),at=xt+At*Math.sin(-nt*Q),gt=xt+At*Math.sin(-Mt*Q);z=[["M",ht,at],["A",At,At,0,+(Mt-nt>180),0,et,gt]]}else z=[["M",St,xt],["m",0,-nt],["a",At,nt,0,1,1,0,2*nt],["a",At,nt,0,1,1,0,-2*nt],["z"]];return z},i=function(St){if(St=r(St),!St||!St.length)return[["M",0,0]];var xt=[],At=0,nt=0,Mt=0,z=0,Q=0,ht,et;St[0][0]==="M"&&(At=+St[0][1],nt=+St[0][2],Mt=At,z=nt,Q++,xt[0]=["M",At,nt]);for(var at=St.length===3&&St[0][0]==="M"&&St[1][0].toUpperCase()==="R"&&St[2][0].toUpperCase()==="Z",gt,k,ot=Q,it=St.length;ot<it;ot++){if(xt.push(gt=[]),k=St[ot],ht=k[0],ht!==ht.toUpperCase())switch(gt[0]=ht.toUpperCase(),gt[0]){case"A":gt[1]=k[1],gt[2]=k[2],gt[3]=k[3],gt[4]=k[4],gt[5]=k[5],gt[6]=+k[6]+At,gt[7]=+k[7]+nt;break;case"V":gt[1]=+k[1]+nt;break;case"H":gt[1]=+k[1]+At;break;case"R":et=[At,nt].concat(k.slice(1));for(var X=2,Et=et.length;X<Et;X++)et[X]=+et[X]+At,et[++X]=+et[X]+nt;xt.pop(),xt=xt.concat(h(et,at));break;case"O":xt.pop(),et=n(At,nt,k[1],k[2]),et.push(et[0]),xt=xt.concat(et);break;case"U":xt.pop(),xt=xt.concat(n(At,nt,k[1],k[2],k[3])),gt=["U"].concat(xt[xt.length-1].slice(-2));break;case"M":Mt=+k[1]+At,z=+k[2]+nt;break;default:for(var vt=1,Nt=k.length;vt<Nt;vt++)gt[vt]=+k[vt]+(vt%2?At:nt)}else if(ht==="R")et=[At,nt].concat(k.slice(1)),xt.pop(),xt=xt.concat(h(et,at)),gt=["R"].concat(k.slice(-2));else if(ht==="O")xt.pop(),et=n(At,nt,k[1],k[2]),et.push(et[0]),xt=xt.concat(et);else if(ht==="U")xt.pop(),xt=xt.concat(n(At,nt,k[1],k[2],k[3])),gt=["U"].concat(xt[xt.length-1].slice(-2));else for(var $t=0,ee=k.length;$t<ee;$t++)gt[$t]=k[$t];if(ht=ht.toUpperCase(),ht!=="O")switch(gt[0]){case"Z":At=+Mt,nt=+z;break;case"H":At=gt[1];break;case"V":nt=gt[1];break;case"M":Mt=gt[gt.length-2],z=gt[gt.length-1];break;default:At=gt[gt.length-2],nt=gt[gt.length-1]}}return xt},a=function(St,xt,At,nt){return[St,xt,At,nt,At,nt]},o=function(St,xt,At,nt,Mt,z){var Q=1/3,ht=2/3;return[Q*St+ht*At,Q*xt+ht*nt,Q*Mt+ht*At,Q*z+ht*nt,Mt,z]},l=function Ot(St,xt,At,nt,Mt,z,Q,ht,et,at){At===nt&&(At+=1);var gt=Math.PI*120/180,k=Math.PI/180*(+Mt||0),ot=[],it,X,Et,vt,Nt,$t=function(ue,xe,Ke){var Rn=ue*Math.cos(Ke)-xe*Math.sin(Ke),tr=ue*Math.sin(Ke)+xe*Math.cos(Ke);return{x:Rn,y:tr}};if(at)X=at[0],Et=at[1],vt=at[2],Nt=at[3];else{it=$t(St,xt,-k),St=it.x,xt=it.y,it=$t(ht,et,-k),ht=it.x,et=it.y,St===ht&&xt===et&&(ht+=1,et+=1);var ee=(St-ht)/2,kt=(xt-et)/2,Wt=ee*ee/(At*At)+kt*kt/(nt*nt);Wt>1&&(Wt=Math.sqrt(Wt),At=Wt*At,nt=Wt*nt);var ae=At*At,le=nt*nt,je=(z===Q?-1:1)*Math.sqrt(Math.abs((ae*le-ae*kt*kt-le*ee*ee)/(ae*kt*kt+le*ee*ee)));vt=je*At*kt/nt+(St+ht)/2,Nt=je*-nt*ee/At+(xt+et)/2,X=Math.asin(((xt-Nt)/nt).toFixed(9)),Et=Math.asin(((et-Nt)/nt).toFixed(9)),X=St<vt?Math.PI-X:X,Et=ht<vt?Math.PI-Et:Et,X<0&&(X=Math.PI*2+X),Et<0&&(Et=Math.PI*2+Et),Q&&X>Et&&(X=X-Math.PI*2),!Q&&Et>X&&(Et=Et-Math.PI*2)}var Oe=Et-X;if(Math.abs(Oe)>gt){var We=Et,Ye=ht,wn=et;Et=X+gt*(Q&&Et>X?1:-1),ht=vt+At*Math.cos(Et),et=Nt+nt*Math.sin(Et),ot=Ot(ht,et,At,nt,Mt,0,Q,Ye,wn,[Et,We,vt,Nt])}Oe=Et-X;var er=Math.cos(X),wr=Math.sin(X),on=Math.cos(Et),en=Math.sin(Et),An=Math.tan(Oe/4),jn=4/3*At*An,pr=4/3*nt*An,di=[St,xt],Ce=[St+jn*wr,xt-pr*er],Me=[ht+jn*en,et-pr*on],Qt=[ht,et];if(Ce[0]=2*di[0]-Ce[0],Ce[1]=2*di[1]-Ce[1],at)return[Ce,Me,Qt].concat(ot);ot=[Ce,Me,Qt].concat(ot).join().split(",");for(var pe=[],Vt=0,re=ot.length;Vt<re;Vt++)pe[Vt]=Vt%2?$t(ot[Vt-1],ot[Vt],k).y:$t(ot[Vt],ot[Vt+1],k).x;return pe},f=function(St,xt){var At=i(St),nt=xt&&i(xt),Mt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},z={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},Q=[],ht=[],et="",at="",gt,k=function(kt,Wt,ae){var le,je;if(!kt)return["C",Wt.x,Wt.y,Wt.x,Wt.y,Wt.x,Wt.y];switch(!(kt[0]in{T:1,Q:1})&&(Wt.qx=Wt.qy=null),kt[0]){case"M":Wt.X=kt[1],Wt.Y=kt[2];break;case"A":kt=["C"].concat(l.apply(0,[Wt.x,Wt.y].concat(kt.slice(1))));break;case"S":ae==="C"||ae==="S"?(le=Wt.x*2-Wt.bx,je=Wt.y*2-Wt.by):(le=Wt.x,je=Wt.y),kt=["C",le,je].concat(kt.slice(1));break;case"T":ae==="Q"||ae==="T"?(Wt.qx=Wt.x*2-Wt.qx,Wt.qy=Wt.y*2-Wt.qy):(Wt.qx=Wt.x,Wt.qy=Wt.y),kt=["C"].concat(o(Wt.x,Wt.y,Wt.qx,Wt.qy,kt[1],kt[2]));break;case"Q":Wt.qx=kt[1],Wt.qy=kt[2],kt=["C"].concat(o(Wt.x,Wt.y,kt[1],kt[2],kt[3],kt[4]));break;case"L":kt=["C"].concat(a(Wt.x,Wt.y,kt[1],kt[2]));break;case"H":kt=["C"].concat(a(Wt.x,Wt.y,kt[1],Wt.y));break;case"V":kt=["C"].concat(a(Wt.x,Wt.y,Wt.x,kt[1]));break;case"Z":kt=["C"].concat(a(Wt.x,Wt.y,Wt.X,Wt.Y));break;default:break}return kt},ot=function(kt,Wt){if(kt[Wt].length>7){kt[Wt].shift();for(var ae=kt[Wt];ae.length;)Q[Wt]="A",nt&&(ht[Wt]="A"),kt.splice(Wt++,0,["C"].concat(ae.splice(0,6)));kt.splice(Wt,1),gt=Math.max(At.length,nt&&nt.length||0)}},it=function(kt,Wt,ae,le,je){kt&&Wt&&kt[je][0]==="M"&&Wt[je][0]!=="M"&&(Wt.splice(je,0,["M",le.x,le.y]),ae.bx=0,ae.by=0,ae.x=kt[je][1],ae.y=kt[je][2],gt=Math.max(At.length,nt&&nt.length||0))};gt=Math.max(At.length,nt&&nt.length||0);for(var X=0;X<gt;X++){At[X]&&(et=At[X][0]),et!=="C"&&(Q[X]=et,X&&(at=Q[X-1])),At[X]=k(At[X],Mt,at),Q[X]!=="A"&&et==="C"&&(Q[X]="C"),ot(At,X),nt&&(nt[X]&&(et=nt[X][0]),et!=="C"&&(ht[X]=et,X&&(at=ht[X-1])),nt[X]=k(nt[X],z,at),ht[X]!=="A"&&et==="C"&&(ht[X]="C"),ot(nt,X)),it(At,nt,Mt,z,X),it(nt,At,z,Mt,X);var Et=At[X],vt=nt&&nt[X],Nt=Et.length,$t=nt&&vt.length;Mt.x=Et[Nt-2],Mt.y=Et[Nt-1],Mt.bx=parseFloat(Et[Nt-4])||Mt.x,Mt.by=parseFloat(Et[Nt-3])||Mt.y,z.bx=nt&&(parseFloat(vt[$t-4])||z.x),z.by=nt&&(parseFloat(vt[$t-3])||z.y),z.x=nt&&vt[$t-2],z.y=nt&&vt[$t-1]}return nt?[At,nt]:At},v=/,?([a-z]),?/gi,b=function(St){return St.join(",").replace(v,"$1")},g=function(St,xt,At,nt,Mt){var z=-3*xt+9*At-9*nt+3*Mt,Q=St*z+6*xt-12*At+6*nt;return St*Q-3*xt+3*At},m=function(St,xt,At,nt,Mt,z,Q,ht,et){et===null&&(et=1),et=et>1?1:et<0?0:et;for(var at=et/2,gt=12,k=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ot=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],it=0,X=0;X<gt;X++){var Et=at*k[X]+at,vt=g(Et,St,At,Mt,Q),Nt=g(Et,xt,nt,z,ht),$t=vt*vt+Nt*Nt;it+=ot[X]*Math.sqrt($t)}return at*it},_=function(St,xt,At,nt,Mt,z,Q,ht){for(var et=[],at=[[],[]],gt,k,ot,it,X=0;X<2;++X){if(X===0?(k=6*St-12*At+6*Mt,gt=-3*St+9*At-9*Mt+3*Q,ot=3*At-3*St):(k=6*xt-12*nt+6*z,gt=-3*xt+9*nt-9*z+3*ht,ot=3*nt-3*xt),Math.abs(gt)<1e-12){if(Math.abs(k)<1e-12)continue;it=-ot/k,it>0&&it<1&&et.push(it);continue}var Et=k*k-4*ot*gt,vt=Math.sqrt(Et);if(!(Et<0)){var Nt=(-k+vt)/(2*gt);Nt>0&&Nt<1&&et.push(Nt);var $t=(-k-vt)/(2*gt);$t>0&&$t<1&&et.push($t)}}for(var ee=et.length,kt=ee,Wt;ee--;)it=et[ee],Wt=1-it,at[0][ee]=Wt*Wt*Wt*St+3*Wt*Wt*it*At+3*Wt*it*it*Mt+it*it*it*Q,at[1][ee]=Wt*Wt*Wt*xt+3*Wt*Wt*it*nt+3*Wt*it*it*z+it*it*it*ht;return at[0][kt]=St,at[1][kt]=xt,at[0][kt+1]=Q,at[1][kt+1]=ht,at[0].length=at[1].length=kt+2,{min:{x:Math.min.apply(0,at[0]),y:Math.min.apply(0,at[1])},max:{x:Math.max.apply(0,at[0]),y:Math.max.apply(0,at[1])}}},M=function(St,xt,At,nt,Mt,z,Q,ht){if(!(Math.max(St,At)<Math.min(Mt,Q)||Math.min(St,At)>Math.max(Mt,Q)||Math.max(xt,nt)<Math.min(z,ht)||Math.min(xt,nt)>Math.max(z,ht))){var et=(St*nt-xt*At)*(Mt-Q)-(St-At)*(Mt*ht-z*Q),at=(St*nt-xt*At)*(z-ht)-(xt-nt)*(Mt*ht-z*Q),gt=(St-At)*(z-ht)-(xt-nt)*(Mt-Q);if(!!gt){var k=et/gt,ot=at/gt,it=+k.toFixed(2),X=+ot.toFixed(2);if(!(it<+Math.min(St,At).toFixed(2)||it>+Math.max(St,At).toFixed(2)||it<+Math.min(Mt,Q).toFixed(2)||it>+Math.max(Mt,Q).toFixed(2)||X<+Math.min(xt,nt).toFixed(2)||X>+Math.max(xt,nt).toFixed(2)||X<+Math.min(z,ht).toFixed(2)||X>+Math.max(z,ht).toFixed(2)))return{x:k,y:ot}}}},x=function(St,xt,At){return xt>=St.x&&xt<=St.x+St.width&&At>=St.y&&At<=St.y+St.height},y=function(St,xt,At,nt,Mt){if(Mt)return[["M",+St+ +Mt,xt],["l",At-Mt*2,0],["a",Mt,Mt,0,0,1,Mt,Mt],["l",0,nt-Mt*2],["a",Mt,Mt,0,0,1,-Mt,Mt],["l",Mt*2-At,0],["a",Mt,Mt,0,0,1,-Mt,-Mt],["l",0,Mt*2-nt],["a",Mt,Mt,0,0,1,Mt,-Mt],["z"]];var z=[["M",St,xt],["l",At,0],["l",0,nt],["l",-At,0],["z"]];return z.parsePathArray=b,z},S=function(St,xt,At,nt){return St===null&&(St=xt=At=nt=0),xt===null&&(xt=St.y,At=St.width,nt=St.height,St=St.x),{x:St,y:xt,width:At,w:At,height:nt,h:nt,x2:St+At,y2:xt+nt,cx:St+At/2,cy:xt+nt/2,r1:Math.min(At,nt)/2,r2:Math.max(At,nt)/2,r0:Math.sqrt(At*At+nt*nt)/2,path:y(St,xt,At,nt),vb:[St,xt,At,nt].join(" ")}},P=function(St,xt){return St=S(St),xt=S(xt),x(xt,St.x,St.y)||x(xt,St.x2,St.y)||x(xt,St.x,St.y2)||x(xt,St.x2,St.y2)||x(St,xt.x,xt.y)||x(St,xt.x2,xt.y)||x(St,xt.x,xt.y2)||x(St,xt.x2,xt.y2)||(St.x<xt.x2&&St.x>xt.x||xt.x<St.x2&&xt.x>St.x)&&(St.y<xt.y2&&St.y>xt.y||xt.y<St.y2&&xt.y>St.y)},A=function(St,xt,At,nt,Mt,z,Q,ht){t.isArray(St)||(St=[St,xt,At,nt,Mt,z,Q,ht]);var et=_.apply(null,St);return S(et.min.x,et.min.y,et.max.x-et.min.x,et.max.y-et.min.y)},O=function(St,xt,At,nt,Mt,z,Q,ht,et){var at=1-et,gt=Math.pow(at,3),k=Math.pow(at,2),ot=et*et,it=ot*et,X=gt*St+k*3*et*At+at*3*et*et*Mt+it*Q,Et=gt*xt+k*3*et*nt+at*3*et*et*z+it*ht,vt=St+2*et*(At-St)+ot*(Mt-2*At+St),Nt=xt+2*et*(nt-xt)+ot*(z-2*nt+xt),$t=At+2*et*(Mt-At)+ot*(Q-2*Mt+At),ee=nt+2*et*(z-nt)+ot*(ht-2*z+nt),kt=at*St+et*At,Wt=at*xt+et*nt,ae=at*Mt+et*Q,le=at*z+et*ht,je=90-Math.atan2(vt-$t,Nt-ee)*180/Math.PI;return{x:X,y:Et,m:{x:vt,y:Nt},n:{x:$t,y:ee},start:{x:kt,y:Wt},end:{x:ae,y:le},alpha:je}},L=function(St,xt,At){var nt=A(St),Mt=A(xt);if(!P(nt,Mt))return At?0:[];for(var z=m.apply(0,St),Q=m.apply(0,xt),ht=~~(z/8),et=~~(Q/8),at=[],gt=[],k={},ot=At?0:[],it=0;it<ht+1;it++){var X=O.apply(0,St.concat(it/ht));at.push({x:X.x,y:X.y,t:it/ht})}for(var Et=0;Et<et+1;Et++){var vt=O.apply(0,xt.concat(Et/et));gt.push({x:vt.x,y:vt.y,t:Et/et})}for(var Nt=0;Nt<ht;Nt++)for(var $t=0;$t<et;$t++){var ee=at[Nt],kt=at[Nt+1],Wt=gt[$t],ae=gt[$t+1],le=Math.abs(kt.x-ee.x)<.001?"y":"x",je=Math.abs(ae.x-Wt.x)<.001?"y":"x",Oe=M(ee.x,ee.y,kt.x,kt.y,Wt.x,Wt.y,ae.x,ae.y);if(Oe){if(k[Oe.x.toFixed(4)]===Oe.y.toFixed(4))continue;k[Oe.x.toFixed(4)]=Oe.y.toFixed(4);var We=ee.t+Math.abs((Oe[le]-ee[le])/(kt[le]-ee[le]))*(kt.t-ee.t),Ye=Wt.t+Math.abs((Oe[je]-Wt[je])/(ae[je]-Wt[je]))*(ae.t-Wt.t);We>=0&&We<=1&&Ye>=0&&Ye<=1&&(At?ot++:ot.push({x:Oe.x,y:Oe.y,t1:We,t2:Ye}))}}return ot},H=function(St,xt,At){St=f(St),xt=f(xt);for(var nt,Mt,z,Q,ht,et,at,gt,k,ot,it=At?0:[],X=0,Et=St.length;X<Et;X++){var vt=St[X];if(vt[0]==="M")nt=ht=vt[1],Mt=et=vt[2];else{vt[0]==="C"?(k=[nt,Mt].concat(vt.slice(1)),nt=k[6],Mt=k[7]):(k=[nt,Mt,nt,Mt,ht,et,ht,et],nt=ht,Mt=et);for(var Nt=0,$t=xt.length;Nt<$t;Nt++){var ee=xt[Nt];if(ee[0]==="M")z=at=ee[1],Q=gt=ee[2];else{ee[0]==="C"?(ot=[z,Q].concat(ee.slice(1)),z=ot[6],Q=ot[7]):(ot=[z,Q,z,Q,at,gt,at,gt],z=at,Q=gt);var kt=L(k,ot,At);if(At)it+=kt;else{for(var Wt=0,ae=kt.length;Wt<ae;Wt++)kt[Wt].segment1=X,kt[Wt].segment2=Nt,kt[Wt].bez1=k,kt[Wt].bez2=ot;it=it.concat(kt)}}}}}return it},F=function(St,xt){return H(St,xt)};function Z(Ot,St){var xt=[],At=[];function nt(Mt,z){if(Mt.length===1)xt.push(Mt[0]),At.push(Mt[0]);else{for(var Q=[],ht=0;ht<Mt.length-1;ht++)ht===0&&xt.push(Mt[0]),ht===Mt.length-2&&At.push(Mt[ht+1]),Q[ht]=[(1-z)*Mt[ht][0]+z*Mt[ht+1][0],(1-z)*Mt[ht][1]+z*Mt[ht+1][1]];nt(Q,z)}}return Ot.length&&nt(Ot,St),{left:xt,right:At.reverse()}}function G(Ot,St,xt){var At=[[Ot[1],Ot[2]]];xt=xt||2;var nt=[];St[0]==="A"?(At.push(St[6]),At.push(St[7])):St[0]==="C"?(At.push([St[1],St[2]]),At.push([St[3],St[4]]),At.push([St[5],St[6]])):St[0]==="S"||St[0]==="Q"?(At.push([St[1],St[2]]),At.push([St[3],St[4]])):At.push([St[1],St[2]]);for(var Mt=At,z=1/xt,Q=0;Q<xt-1;Q++){var ht=z/(1-z*Q),et=Z(Mt,ht);nt.push(et.left),Mt=et.right}nt.push(Mt);var at=nt.map(function(gt){var k=[];return gt.length===4&&(k.push("C"),k=k.concat(gt[2])),gt.length>=3&&(gt.length===3&&k.push("Q"),k=k.concat(gt[1])),gt.length===2&&k.push("L"),k=k.concat(gt[gt.length-1]),k});return at}var U=function(St,xt,At){if(At===1)return[[].concat(St)];var nt=[];if(xt[0]==="L"||xt[0]==="C"||xt[0]==="Q")nt=nt.concat(G(St,xt,At));else{var Mt=[].concat(St);Mt[0]==="M"&&(Mt[0]="L");for(var z=0;z<=At-1;z++)nt.push(Mt)}return nt},Y=function(St,xt){if(St.length===1)return St;var At=St.length-1,nt=xt.length-1,Mt=At/nt,z=[];if(St.length===1&&St[0][0]==="M"){for(var Q=0;Q<nt-At;Q++)St.push(St[0]);return St}for(var ht=0;ht<nt;ht++){var et=Math.floor(Mt*ht);z[et]=(z[et]||0)+1}var at=z.reduce(function(gt,k,ot){return ot===At?gt.concat(St[At]):gt.concat(U(St[ot],St[ot+1],k))},[]);return at.unshift(St[0]),(xt[nt]==="Z"||xt[nt]==="z")&&at.push("Z"),at},J=function(St,xt){if(St.length!==xt.length)return!1;var At=!0;return t.each(St,function(nt,Mt){if(nt!==xt[Mt])return At=!1,!1}),At};function rt(Ot,St,xt){var At=null,nt=xt;return St<nt&&(nt=St,At="add"),Ot<nt&&(nt=Ot,At="del"),{type:At,min:nt}}var ft=function(St,xt){var At=St.length,nt=xt.length,Mt,z,Q=0;if(At===0||nt===0)return null;for(var ht=[],et=0;et<=At;et++)ht[et]=[],ht[et][0]={min:et};for(var at=0;at<=nt;at++)ht[0][at]={min:at};for(var gt=1;gt<=At;gt++){Mt=St[gt-1];for(var k=1;k<=nt;k++){z=xt[k-1],J(Mt,z)?Q=0:Q=1;var ot=ht[gt-1][k].min+1,it=ht[gt][k-1].min+1,X=ht[gt-1][k-1].min+Q;ht[gt][k]=rt(ot,it,X)}}return ht},dt=function(St,xt){var At=ft(St,xt),nt=St.length,Mt=xt.length,z=[],Q=1,ht=1;if(At[nt][Mt]!==nt){for(var et=1;et<=nt;et++){var at=At[et][et].min;ht=et;for(var gt=Q;gt<=Mt;gt++)At[et][gt].min<at&&(at=At[et][gt].min,ht=gt);Q=ht,At[et][Q].type&&z.push({index:et-1,type:At[et][Q].type})}for(var k=z.length-1;k>=0;k--)Q=z[k].index,z[k].type==="add"?St.splice(Q,0,[].concat(St[Q])):St.splice(Q,1)}nt=St.length;var ot=Mt-nt;if(nt<Mt)for(var it=0;it<ot;it++)St[nt-1][0]==="z"||St[nt-1][0]==="Z"?St.splice(nt-2,0,St[nt-2]):St.push(St[nt-1]),nt+=1;return St};function ut(Ot,St,xt){for(var At=[].concat(Ot),nt,Mt=1/(xt+1),z=Lt(St)[0],Q=1;Q<=xt;Q++)Mt*=Q,nt=Math.floor(Ot.length*Mt),nt===0?At.unshift([z[0]*Mt+Ot[nt][0]*(1-Mt),z[1]*Mt+Ot[nt][1]*(1-Mt)]):At.splice(nt,0,[z[0]*Mt+Ot[nt][0]*(1-Mt),z[1]*Mt+Ot[nt][1]*(1-Mt)]);return At}function Lt(Ot){var St=[];switch(Ot[0]){case"M":St.push([Ot[1],Ot[2]]);break;case"L":St.push([Ot[1],Ot[2]]);break;case"A":St.push([Ot[6],Ot[7]]);break;case"Q":St.push([Ot[3],Ot[4]]),St.push([Ot[1],Ot[2]]);break;case"T":St.push([Ot[1],Ot[2]]);break;case"C":St.push([Ot[5],Ot[6]]),St.push([Ot[1],Ot[2]]),St.push([Ot[3],Ot[4]]);break;case"S":St.push([Ot[3],Ot[4]]),St.push([Ot[1],Ot[2]]);break;case"H":St.push([Ot[1],Ot[1]]);break;case"V":St.push([Ot[1],Ot[1]]);break;default:}return St}var Ft=function(St,xt){if(St.length<=1)return St;for(var At,nt=0;nt<xt.length;nt++)if(St[nt][0]!==xt[nt][0])switch(At=Lt(St[nt]),xt[nt][0]){case"M":St[nt]=["M"].concat(At[0]);break;case"L":St[nt]=["L"].concat(At[0]);break;case"A":St[nt]=[].concat(xt[nt]),St[nt][6]=At[0][0],St[nt][7]=At[0][1];break;case"Q":if(At.length<2)if(nt>0)At=ut(At,St[nt-1],1);else{St[nt]=xt[nt];break}St[nt]=["Q"].concat(At.reduce(function(Mt,z){return Mt.concat(z)},[]));break;case"T":St[nt]=["T"].concat(At[0]);break;case"C":if(At.length<3)if(nt>0)At=ut(At,St[nt-1],2);else{St[nt]=xt[nt];break}St[nt]=["C"].concat(At.reduce(function(Mt,z){return Mt.concat(z)},[]));break;case"S":if(At.length<2)if(nt>0)At=ut(At,St[nt-1],1);else{St[nt]=xt[nt];break}St[nt]=["S"].concat(At.reduce(function(Mt,z){return Mt.concat(z)},[]));break;default:St[nt]=xt[nt]}return St};E.exports={parsePathString:r,parsePathArray:b,pathTocurve:f,pathToAbsolute:i,catmullRomToBezier:h,rectPath:y,fillPath:Y,fillPathByDiff:dt,formatPath:Ft,intersection:F}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.setMatrixArrayType=c,T.toRadian=h,T.equals=n;var t=T.EPSILON=1e-6,u=T.ARRAY_TYPE=typeof Float32Array!="undefined"?Float32Array:Array,s=T.RANDOM=Math.random;function c(i){T.ARRAY_TYPE=u=i}var r=Math.PI/180;function h(i){return i*r}function n(i,a){return Math.abs(i-a)<=t*Math.max(1,Math.abs(i),Math.abs(a))}},function(E,T,e){var t=e(6),u=e(4),s=e(2);E.exports=function(r,h){for(var n=[],i={},a=0;a<r.length;a++){var o=r[a],l=o[h];t(l)||(u(l)||(l=[l]),s(l,function(f){i[f]||(n.push(f),i[f]=!0)}))}return n}},function(E,T,e){var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},u=e(4),s=function c(r){if((typeof r=="undefined"?"undefined":t(r))!=="object"||r===null)return r;var h=void 0;if(u(r)){h=[];for(var n=0,i=r.length;n<i;n++)t(r[n])==="object"&&r[n]!=null?h[n]=c(r[n]):h[n]=r[n]}else{h={};for(var a in r)t(r[a])==="object"&&r[a]!=null?h[a]=c(r[a]):h[a]=r[a]}return h};E.exports=s},function(E,T,e){var t=e(40),u=e(4),s=5;function c(h,n,i,a){i=i||0,a=a||s;for(var o in n)if(n.hasOwnProperty(o)){var l=n[o];l!==null&&t(l)?(t(h[o])||(h[o]={}),i<a?c(h[o],l,i+1,a):h[o]=n[o]):u(l)?(h[o]=[],h[o]=h[o].concat(l)):l!==void 0&&(h[o]=l)}}var r=function(){for(var n=new Array(arguments.length),i=n.length,a=0;a<i;a++)n[a]=arguments[a];for(var o=n[0],l=1;l<i;l++)c(o,n[l]);return o};E.exports=r},function(E,T,e){var t=e(2),u=e(21),s=function(r,h){if(!u(r))return r;var n=[];return t(r,function(i,a){h(i,a)&&n.push(i)}),n};E.exports=s},function(E,T,e){var t=e(86),u=e(21),s=e(15),c=function r(h,n){if(h===n)return!0;if(!h||!n||s(h)||s(n))return!1;if(u(h)||u(n)){if(h.length!==n.length)return!1;for(var i=!0,a=0;a<h.length&&(i=r(h[a],n[a]),!!i);a++);return i}if(t(h)||t(n)){var o=Object.keys(h),l=Object.keys(n);if(o.length!==l.length)return!1;for(var f=!0,v=0;v<o.length&&(f=r(h[o[v]],n[o[v]]),!!f);v++);return f}return!1};E.exports=c},function(E,T){var e=function(u,s,c){return u<s?s:u>c?c:u};E.exports=e},function(E,T,e){var t=e(348);t.translate=function(u,s,c){var r=new Array(9);return t.fromTranslation(r,c),t.multiply(u,r,s)},t.rotate=function(u,s,c){var r=new Array(9);return t.fromRotation(r,c),t.multiply(u,r,s)},t.scale=function(u,s,c){var r=new Array(9);return t.fromScaling(r,c),t.multiply(u,r,s)},E.exports=t},function(E,T){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},t=function(s){return(typeof s=="undefined"?"undefined":e(s))==="object"&&s!==null};E.exports=t},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={Chart:"deleteChart",Coord:"deleteCoord",Geom:"deleteGeom",Axis:"deleteAxis",Tooltip:"deleteTooltip",Legend:"deleteLegend",Label:"deleteLabel",View:"deleteView",Guide:"deleteGuide",GuideLine:"deleteTypedGuide",GuideImage:"deleteTypedGuide",GuideText:"deleteTypedGuide",GuideRegion:"deleteTypedGuide",GuideHtml:"deleteTypedGuide",GuideArc:"deleteTypedGuide",GuideRegionFilter:"deleteTypedGuide",GuideDataMarker:"deleteTypedGuide",GuideDataRegion:"deleteTypedGuide",Facet:"deleteFacet"},u={merge:function(c,r,h,n){this.mergeDelete(c,r,h),this.mergeUpdate(c,n)},mergeDelete:function(c,r,h){var n=this;Object.keys(r).forEach(function(i){var a=t[h[i].name],o=c;h[i].viewId&&(o=c.views[h[i].viewId]),n[a]&&n[a](o,i,h[i].parentInfo.id)})},deleteAxis:function(c,r){!c||delete c.axises[r]},deleteTooltip:function(c){!c||delete c.tooltip},deleteCoord:function(c){!c||delete c.coord},deleteLegend:function(c,r){!c||delete c.legends[r]},deleteGuide:function(c){!c||delete c.guide},deleteGeom:function(c,r){!c||!c.geoms||delete c.geoms[r]},deleteLabel:function(c,r,h){!c||!c.geoms||!c.geoms[h]||delete c.geoms[h].label},deleteFacet:function(c){!c||delete c.facet},deleteTypedGuide:function(c,r){!c||!c.guide||delete c.guide.elements[r]},deleteView:function(c,r){!c||delete c.views[r]},mergeUpdate:function(c,r){this.mergeChart(c,r),this.mergeAxises(c,r),this.mergeCoord(c,r),this.mergeGeoms(c.geoms,r),this.mergeLegends(c.legends,r),this.mergeTooltip(c,r),this.mergeViews(c.views,r),this.mergeGuide(c.guide,r)},mergeChart:function(c,r){c.chart&&c.chart.updateProps&&(c.chart.props=c.chart.updateProps),r&&delete c.chart.g2Instance},mergeAxises:function(c,r){var h=c.axises;if(!h!=null)for(var n in h)h[n]&&h[n].updateProps&&(h[n].props=h[n].updateProps),r&&delete h[n].g2Instance},mergeTooltip:function(c,r){!c.tooltip||(r&&delete c.tooltip.g2Instance,c.tooltip.updateProps&&(c.tooltip.props=c.tooltip.updateProps))},mergeCoord:function(c,r){!c.coord||(r&&delete c.coord.g2Instance,c.coord.updateProps&&(c.coord.props=c.coord.updateProps))},mergeLegends:function(c,r){if(!!c){for(var h in c)if(c[h]){var n=c[h];r&&delete n.g2Instance,n.updateProps&&(n.props=n.updateProps)}}},mergeGeoms:function(c,r){if(c!=null)for(var h in c)c[h]&&(r&&(delete c[h].g2Instance,c[h].label&&c[h].label.g2Instance&&(c[h].label.updateProps&&(c[h].label.props=c[h].label.updateProps),delete c[h].label.g2Instance)),c[h].updateProps&&(c[h].props=c[h].updateProps))},mergeGuide:function(c,r){if(c!=null){var h=c.elements;for(var n in h)h[n]&&(r&&delete h[n].g2Instance,h[n].updateProps&&(h[n].props=h[n].updateProps))}},mergeView:function(c,r){!c||(r&&c.g2Instance&&delete c.g2Instance,c.updateProps&&(c.props=c.updateProps),this.mergeCoord(c,r),this.mergeAxises(c,r),this.mergeGeoms(c.geoms,r),this.mergeGuide(c.guide,r))},mergeViews:function(c,r){if(c!=null)for(var h in c)c[h]&&this.mergeView(c[h],r)}};T.default=u},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Prop=T.Util=void 0;var t=e(58),u=r(t),s=e(437),c=r(s);function r(h){return h&&h.__esModule?h:{default:h}}T.Util=u.default,T.Prop=c.default},function(E,T,e){"use strict";T.c=u,e.d(T,"e",function(){return s}),e.d(T,"d",function(){return c}),T.h=x,T.b=P,T.g=A,T.a=O,T.f=U;var t=e(90);function u(){}var s=.7,c=1/s,r="\\s*([+-]?\\d+)\\s*",h="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i=/^#([0-9a-f]{3,8})$/,a=new RegExp("^rgb\\("+[r,r,r]+"\\)$"),o=new RegExp("^rgb\\("+[n,n,n]+"\\)$"),l=new RegExp("^rgba\\("+[r,r,r,h]+"\\)$"),f=new RegExp("^rgba\\("+[n,n,n,h]+"\\)$"),v=new RegExp("^hsl\\("+[h,n,n]+"\\)$"),b=new RegExp("^hsla\\("+[h,n,n,h]+"\\)$"),g={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};e.i(t.a)(u,x,{copy:function(rt){return Object.assign(new this.constructor,this,rt)},displayable:function(){return this.rgb().displayable()},hex:m,formatHex:m,formatHsl:_,formatRgb:M,toString:M});function m(){return this.rgb().formatHex()}function _(){return G(this).formatHsl()}function M(){return this.rgb().formatRgb()}function x(rt){var ft,dt;return rt=(rt+"").trim().toLowerCase(),(ft=i.exec(rt))?(dt=ft[1].length,ft=parseInt(ft[1],16),dt===6?y(ft):dt===3?new O(ft>>8&15|ft>>4&240,ft>>4&15|ft&240,(ft&15)<<4|ft&15,1):dt===8?S(ft>>24&255,ft>>16&255,ft>>8&255,(ft&255)/255):dt===4?S(ft>>12&15|ft>>8&240,ft>>8&15|ft>>4&240,ft>>4&15|ft&240,((ft&15)<<4|ft&15)/255):null):(ft=a.exec(rt))?new O(ft[1],ft[2],ft[3],1):(ft=o.exec(rt))?new O(ft[1]*255/100,ft[2]*255/100,ft[3]*255/100,1):(ft=l.exec(rt))?S(ft[1],ft[2],ft[3],ft[4]):(ft=f.exec(rt))?S(ft[1]*255/100,ft[2]*255/100,ft[3]*255/100,ft[4]):(ft=v.exec(rt))?Z(ft[1],ft[2]/100,ft[3]/100,1):(ft=b.exec(rt))?Z(ft[1],ft[2]/100,ft[3]/100,ft[4]):g.hasOwnProperty(rt)?y(g[rt]):rt==="transparent"?new O(NaN,NaN,NaN,0):null}function y(rt){return new O(rt>>16&255,rt>>8&255,rt&255,1)}function S(rt,ft,dt,ut){return ut<=0&&(rt=ft=dt=NaN),new O(rt,ft,dt,ut)}function P(rt){return rt instanceof u||(rt=x(rt)),rt?(rt=rt.rgb(),new O(rt.r,rt.g,rt.b,rt.opacity)):new O}function A(rt,ft,dt,ut){return arguments.length===1?P(rt):new O(rt,ft,dt,ut==null?1:ut)}function O(rt,ft,dt,ut){this.r=+rt,this.g=+ft,this.b=+dt,this.opacity=+ut}e.i(t.a)(O,A,e.i(t.b)(u,{brighter:function(rt){return rt=rt==null?c:Math.pow(c,rt),new O(this.r*rt,this.g*rt,this.b*rt,this.opacity)},darker:function(rt){return rt=rt==null?s:Math.pow(s,rt),new O(this.r*rt,this.g*rt,this.b*rt,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:L,formatHex:L,formatRgb:H,toString:H}));function L(){return"#"+F(this.r)+F(this.g)+F(this.b)}function H(){var rt=this.opacity;return rt=isNaN(rt)?1:Math.max(0,Math.min(1,rt)),(rt===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(rt===1?")":", "+rt+")")}function F(rt){return rt=Math.max(0,Math.min(255,Math.round(rt)||0)),(rt<16?"0":"")+rt.toString(16)}function Z(rt,ft,dt,ut){return ut<=0?rt=ft=dt=NaN:dt<=0||dt>=1?rt=ft=NaN:ft<=0&&(rt=NaN),new Y(rt,ft,dt,ut)}function G(rt){if(rt instanceof Y)return new Y(rt.h,rt.s,rt.l,rt.opacity);if(rt instanceof u||(rt=x(rt)),!rt)return new Y;if(rt instanceof Y)return rt;rt=rt.rgb();var ft=rt.r/255,dt=rt.g/255,ut=rt.b/255,Lt=Math.min(ft,dt,ut),Ft=Math.max(ft,dt,ut),Ot=NaN,St=Ft-Lt,xt=(Ft+Lt)/2;return St?(ft===Ft?Ot=(dt-ut)/St+(dt<ut)*6:dt===Ft?Ot=(ut-ft)/St+2:Ot=(ft-dt)/St+4,St/=xt<.5?Ft+Lt:2-Ft-Lt,Ot*=60):St=xt>0&&xt<1?0:Ot,new Y(Ot,St,xt,rt.opacity)}function U(rt,ft,dt,ut){return arguments.length===1?G(rt):new Y(rt,ft,dt,ut==null?1:ut)}function Y(rt,ft,dt,ut){this.h=+rt,this.s=+ft,this.l=+dt,this.opacity=+ut}e.i(t.a)(Y,U,e.i(t.b)(u,{brighter:function(rt){return rt=rt==null?c:Math.pow(c,rt),new Y(this.h,this.s,this.l*rt,this.opacity)},darker:function(rt){return rt=rt==null?s:Math.pow(s,rt),new Y(this.h,this.s,this.l*rt,this.opacity)},rgb:function(){var rt=this.h%360+(this.h<0)*360,ft=isNaN(rt)||isNaN(this.s)?0:this.s,dt=this.l,ut=dt+(dt<.5?dt:1-dt)*ft,Lt=2*dt-ut;return new O(J(rt>=240?rt-240:rt+120,Lt,ut),J(rt,Lt,ut),J(rt<120?rt+240:rt-120,Lt,ut),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var rt=this.opacity;return rt=isNaN(rt)?1:Math.max(0,Math.min(1,rt)),(rt===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(rt===1?")":", "+rt+")")}}));function J(rt,ft,dt){return(rt<60?ft+(dt-ft)*rt/60:rt<180?dt:rt<240?ft+(dt-ft)*(240-rt)/60:ft)*255}},function(E,T,e){"use strict";T.b=t,T.a=function(u,s,c){u.prototype=s.prototype=c,c.constructor=u};function t(u,s){var c=Object.create(u.prototype);for(var r in s)c[r]=s[r];return c}},function(E,T,e){"use strict";T.b=t;function t(u,s,c,r,h){var n=u*u,i=n*u;return((1-3*u+3*n-i)*s+(4-6*n+3*i)*c+(1+3*u+3*n-3*i)*r+i*h)/6}T.a=function(u){var s=u.length-1;return function(c){var r=c<=0?c=0:c>=1?(c=1,s-1):Math.floor(c*s),h=u[r],n=u[r+1],i=r>0?u[r-1]:2*h-n,a=r<s-1?u[r+2]:2*n-h;return t((c-r/s)*s,i,h,n,a)}}},function(E,T,e){"use strict";var t=e(12),u=e(205),s=e(200),c=e(203),r=e(59),h=e(204),n=e(206),i=e(202);T.a=function(a,o){var l=typeof o,f;return o==null||l==="boolean"?e.i(i.a)(o):(l==="number"?r.a:l==="string"?(f=e.i(t.f)(o))?(o=f,u.a):n.a:o instanceof t.f?u.a:o instanceof Date?c.a:Array.isArray(o)?s.a:typeof o.valueOf!="function"&&typeof o.toString!="function"||isNaN(o)?h.a:r.a)(a,o)}},function(E,T,e){"use strict";T.b=t;function t(u,s,c,r,h){var n=u*u,i=n*u;return((1-3*u+3*n-i)*s+(4-6*n+3*i)*c+(1+3*u+3*n-3*i)*r+i*h)/6}T.a=function(u){var s=u.length-1;return function(c){var r=c<=0?c=0:c>=1?(c=1,s-1):Math.floor(c*s),h=u[r],n=u[r+1],i=r>0?u[r-1]:2*h-n,a=r<s-1?u[r+2]:2*n-h;return t((c-r/s)*s,i,h,n,a)}}},function(E,T,e){"use strict";var t=e(96),u=e(207),s=e(93),c=e(208),r=e(210),h=e(465),n=e(468),i=e(60);e.d(T,"b",function(){return i.a});var a=e(95),o=e(211),l=e(472),f=e(213);e.d(T,"d",function(){return f.a});var v=e(474);e.d(T,"a",function(){return v.a}),e.d(T,"e",function(){return v.b});var b=e(476),g=e(212);e.d(T,"c",function(){return g.a});var m=e(467),_=e(469),M=e(466),x=e(464),y=e(470),S=e(471)},function(E,T,e){"use strict";T.a=t,T.b=function(u,s){s||(s=[]);var c=u?Math.min(s.length,u.length):0,r=s.slice(),h;return function(n){for(h=0;h<c;++h)r[h]=u[h]*(1-n)+s[h]*n;return r}};function t(u){return ArrayBuffer.isView(u)&&!(u instanceof DataView)}},function(E,T,e){"use strict";var t=e(12),u=e(212),s=e(207),c=e(210),r=e(60),h=e(211),n=e(213),i=e(209),a=e(95);T.a=function(o,l){var f=typeof l,v;return l==null||f==="boolean"?e.i(i.a)(l):(f==="number"?r.a:f==="string"?(v=e.i(t.f)(l))?(l=v,u.a):n.a:l instanceof t.f?u.a:l instanceof Date?c.a:e.i(a.a)(l)?a.b:Array.isArray(l)?s.a:typeof l.valueOf!="function"&&typeof l.toString!="function"||isNaN(l)?h.a:r.a)(o,l)}},function(E,T,e){"use strict";var t=e(98);T.a=function(u){var s=u+="",c=s.indexOf(":");return c>=0&&(s=u.slice(0,c))!=="xmlns"&&(u=u.slice(c+1)),t.a.hasOwnProperty(s)?{space:t.a[s],local:u}:u}},function(E,T,e){"use strict";e.d(T,"b",function(){return t});var t="http://www.w3.org/1999/xhtml";T.a={svg:"http://www.w3.org/2000/svg",xhtml:t,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},function(E,T,e){"use strict";e.d(T,"a",function(){return u}),T.b=a;var t={},u=null;if(typeof document!="undefined"){var s=document.documentElement;"onmouseenter"in s||(t={mouseenter:"mouseover",mouseleave:"mouseout"})}function c(o,l,f){return o=r(o,l,f),function(v){var b=v.relatedTarget;(!b||b!==this&&!(b.compareDocumentPosition(this)&8))&&o.call(this,v)}}function r(o,l,f){return function(v){var b=u;u=v;try{o.call(this,this.__data__,l,f)}finally{u=b}}}function h(o){return o.trim().split(/^|\s+/).map(function(l){var f="",v=l.indexOf(".");return v>=0&&(f=l.slice(v+1),l=l.slice(0,v)),{type:l,name:f}})}function n(o){return function(){var l=this.__on;if(!!l){for(var f=0,v=-1,b=l.length,g;f<b;++f)g=l[f],(!o.type||g.type===o.type)&&g.name===o.name?this.removeEventListener(g.type,g.listener,g.capture):l[++v]=g;++v?l.length=v:delete this.__on}}}function i(o,l,f){var v=t.hasOwnProperty(o.type)?c:r;return function(b,g,m){var _=this.__on,M,x=v(l,g,m);if(_){for(var y=0,S=_.length;y<S;++y)if((M=_[y]).type===o.type&&M.name===o.name){this.removeEventListener(M.type,M.listener,M.capture),this.addEventListener(M.type,M.listener=x,M.capture=f),M.value=l;return}}this.addEventListener(o.type,x,f),M={type:o.type,name:o.name,value:l,listener:x,capture:f},_?_.push(M):this.__on=[M]}}T.c=function(o,l,f){var v=h(o+""),b,g=v.length,m;if(arguments.length<2){var _=this.node().__on;if(_){for(var M=0,x=_.length,y;M<x;++M)for(b=0,y=_[M];b<g;++b)if((m=v[b]).type===y.type&&m.name===y.name)return y.value}return}for(_=l?i:n,f==null&&(f=!1),b=0;b<g;++b)this.each(_(v[b],l,f));return this};function a(o,l,f,v){var b=u;o.sourceEvent=u,u=o;try{return l.apply(f,v)}finally{u=b}}},function(E,T,e){"use strict";function t(){}T.a=function(u){return u==null?t:function(){return this.querySelector(u)}}},function(E,T,e){"use strict";var t=e(99);T.a=function(){for(var u=t.a,s;s=u.sourceEvent;)u=s;return u}},function(E,T,e){"use strict";T.a=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(104);e.d(T,"now",function(){return t.a}),e.d(T,"timer",function(){return t.b}),e.d(T,"timerFlush",function(){return t.c});var u=e(513);e.d(T,"timeout",function(){return u.a});var s=e(512);e.d(T,"interval",function(){return s.a})},function(E,T,e){"use strict";T.a=f,T.d=b,T.b=g,T.c=m;var t=0,u=0,s=0,c=1e3,r,h,n=0,i=0,a=0,o=typeof performance=="object"&&performance.now?performance:Date,l=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(S){setTimeout(S,17)};function f(){return i||(l(v),i=o.now()+a)}function v(){i=0}function b(){this._call=this._time=this._next=null}b.prototype=g.prototype={constructor:b,restart:function(S,P,A){if(typeof S!="function")throw new TypeError("callback is not a function");A=(A==null?f():+A)+(P==null?0:+P),!this._next&&h!==this&&(h?h._next=this:r=this,h=this),this._call=S,this._time=A,y()},stop:function(){this._call&&(this._call=null,this._time=Infinity,y())}};function g(S,P,A){var O=new b;return O.restart(S,P,A),O}function m(){f(),++t;for(var S=r,P;S;)(P=i-S._time)>=0&&S._call.call(null,P),S=S._next;--t}function _(){i=(n=o.now())+a,t=u=0;try{m()}finally{t=0,x(),i=0}}function M(){var S=o.now(),P=S-n;P>c&&(a-=P,n=S)}function x(){for(var S,P=r,A,O=Infinity;P;)P._call?(O>P._time&&(O=P._time),S=P,P=P._next):(A=P._next,P._next=null,P=S?S._next=A:r=A);h=S,y(O)}function y(S){if(!t){u&&(u=clearTimeout(u));var P=S-i;P>24?(S<Infinity&&(u=setTimeout(_,S-o.now()-a)),s&&(s=clearInterval(s))):(s||(n=o.now(),s=setInterval(M,c)),t=1,l(_))}}},function(E,T,e){var t;/*!
* EventEmitter v5.1.0 - git.io/ee
* Unlicense - http://unlicense.org/
* Oliver Caldwell - http://oli.me.uk/
* @preserve
*/(function(u){"use strict";function s(){}var c=s.prototype,r=u.EventEmitter;function h(a,o){for(var l=a.length;l--;)if(a[l].listener===o)return l;return-1}function n(a){return function(){return this[a].apply(this,arguments)}}c.getListeners=function(o){var l=this._getEvents(),f,v;if(o instanceof RegExp){f={};for(v in l)l.hasOwnProperty(v)&&o.test(v)&&(f[v]=l[v])}else f=l[o]||(l[o]=[]);return f},c.flattenListeners=function(o){var l=[],f;for(f=0;f<o.length;f+=1)l.push(o[f].listener);return l},c.getListenersAsObject=function(o){var l=this.getListeners(o),f;return l instanceof Array&&(f={},f[o]=l),f||l};function i(a){return typeof a=="function"||a instanceof RegExp?!0:a&&typeof a=="object"?i(a.listener):!1}c.addListener=function(o,l){if(!i(l))throw new TypeError("listener must be a function");var f=this.getListenersAsObject(o),v=typeof l=="object",b;for(b in f)f.hasOwnProperty(b)&&h(f[b],l)===-1&&f[b].push(v?l:{listener:l,once:!1});return this},c.on=n("addListener"),c.addOnceListener=function(o,l){return this.addListener(o,{listener:l,once:!0})},c.once=n("addOnceListener"),c.defineEvent=function(o){return this.getListeners(o),this},c.defineEvents=function(o){for(var l=0;l<o.length;l+=1)this.defineEvent(o[l]);return this},c.removeListener=function(o,l){var f=this.getListenersAsObject(o),v,b;for(b in f)f.hasOwnProperty(b)&&(v=h(f[b],l),v!==-1&&f[b].splice(v,1));return this},c.off=n("removeListener"),c.addListeners=function(o,l){return this.manipulateListeners(!1,o,l)},c.removeListeners=function(o,l){return this.manipulateListeners(!0,o,l)},c.manipulateListeners=function(o,l,f){var v,b,g=o?this.removeListener:this.addListener,m=o?this.removeListeners:this.addListeners;if(typeof l=="object"&&!(l instanceof RegExp))for(v in l)l.hasOwnProperty(v)&&(b=l[v])&&(typeof b=="function"?g.call(this,v,b):m.call(this,v,b));else for(v=f.length;v--;)g.call(this,l,f[v]);return this},c.removeEvent=function(o){var l=typeof o,f=this._getEvents(),v;if(l==="string")delete f[o];else if(o instanceof RegExp)for(v in f)f.hasOwnProperty(v)&&o.test(v)&&delete f[v];else delete this._events;return this},c.removeAllListeners=n("removeEvent"),c.emitEvent=function(o,l){var f=this.getListenersAsObject(o),v,b,g,m,_;for(m in f)if(f.hasOwnProperty(m))for(v=f[m].slice(0),g=0;g<v.length;g++)b=v[g],b.once===!0&&this.removeListener(o,b.listener),_=b.listener.apply(this,l||[]),_===this._getOnceReturnValue()&&this.removeListener(o,b.listener);return this},c.trigger=n("emitEvent"),c.emit=function(o){var l=Array.prototype.slice.call(arguments,1);return this.emitEvent(o,l)},c.setOnceReturnValue=function(o){return this._onceReturnValue=o,this},c._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},c._getEvents=function(){return this._events||(this._events={})},s.noConflict=function(){return u.EventEmitter=r,s},t=function(){return s}.call(u,e,u,E),t!==void 0&&(E.exports=t)})(this||{})},function(E,T,e){var t=0,u=e(2),s={values:e(79)};E.exports={isAdjust:function(r){return this.adjustNames.indexOf(r)>=0},_getDimValues:function(r){var h=this,n={},i=[];if(h.xField&&h.isAdjust("x")&&i.push(h.xField),h.yField&&h.isAdjust("y")&&i.push(h.yField),u(i,function(l){var f=s.values(r,l);f.sort(function(v,b){return v-b}),n[l]=f}),!h.yField&&h.isAdjust("y")){var a="y",o=[t,1];n[a]=o}return n},adjustData:function(r,h){var n=this,i=n._getDimValues(h);u(r,function(a,o){u(i,function(l,f){n.adjustDim(f,l,a,r.length,o)})})},getAdjustRange:function(r,h,n){var i=this,a=n.indexOf(h),o=n.length,l,f;return!i.yField&&i.isAdjust("y")?(l=0,f=1):o>1?(l=a===0?n[0]:n[a-1],f=a===o-1?n[o-1]:n[a+1],a!==0?l+=(h-l)/2:l-=(f-h)/2,a!==o-1?f-=(f-h)/2:f+=(h-n[o-2])/2):(l=h===0?0:h-.5,f=h===0?1:h+.5),{pre:l,next:f}},groupData:function(r,h){var n={};return u(r,function(i){var a=i[h];a===void 0&&(a=i[h]=t),n[a]||(n[a]=[]),n[a].push(i)}),n}}},function(E,T,e){var t=e(11),u=e(15),s=e(2),c=/rgba?\(([\s.,0-9]+)\)/;function r(){var b=document.createElement("i");return b.title="Web Colour Picker",b.style.display="none",document.body.appendChild(b),b}function h(b,g,m,_){var M=b[_]+(g[_]-b[_])*m;return M}function n(b){return"#"+i(b[0])+i(b[1])+i(b[2])}function i(b){return b=Math.round(b),b=b.toString(16),b.length===1&&(b="0"+b),b}function a(b,g){(isNaN(g)||!t(g)||g<0)&&(g=0),g>1&&(g=1);var m=b.length-1,_=Math.floor(m*g),M=m*g-_,x=b[_],y=_===m?x:b[_+1],S=n([h(x,y,M,0),h(x,y,M,1),h(x,y,M,2)]);return S}function o(b){var g=[];return g.push(parseInt(b.substr(1,2),16)),g.push(parseInt(b.substr(3,2),16)),g.push(parseInt(b.substr(5,2),16)),g}var l={},f=null,v={toRGB:function(g){if(g[0]==="#"&&g.length===7)return g;f||(f=r());var m;if(l[g])m=l[g];else{f.style.color=g,m=document.defaultView.getComputedStyle(f,"").getPropertyValue("color");var _=c.exec(m),M=_[1].split(/\s*,\s*/);m=n(M),l[g]=m}return m},rgb2arr:o,gradient:function(g){var m=[];return u(g)&&(g=g.split("-")),s(g,function(_){_.indexOf("#")===-1&&(_=v.toRGB(_)),m.push(o(_))}),function(_){return a(m,_)}}};E.exports=v},function(E,T,e){var t=e(31),u=t.Group,s=e(3),c=function r(h){r.superclass.constructor.call(this,h)};s.extend(c,u),s.augment(c,{getDefaultCfg:function(){return{zIndex:1,type:"line",lineStyle:null,items:null,alternateColor:null,matrix:null,hideFirstLine:!1,hideLastLine:!1,hightLightZero:!1,zeroLineStyle:{stroke:"#595959",lineDash:[0,0]}}},_renderUI:function(){c.superclass._renderUI.call(this),this._drawLines()},_drawLines:function(){var h=this,n=h.get("lineStyle"),i=h.get("items");i&&i.length&&(h._precessItems(i),h._drawGridLines(i,n))},_precessItems:function(h){var n=this,i;s.each(h,function(a,o){i&&n.get("alternateColor")&&n._drawAlternativeBg(a,i,o),i=a})},_drawGridLines:function(h,n){var i=this,a=this.get("type"),o,l,f,v,b=h.length;a==="line"||a==="polygon"?s.each(h,function(g,m){i.get("hideFirstLine")&&m===0||i.get("hideLastLine")&&m===b-1||(v=g.points,l=[],a==="line"?(l.push(["M",v[0].x,v[0].y]),l.push(["L",v[v.length-1].x,v[v.length-1].y])):s.each(v,function(_,M){M===0?l.push(["M",_.x,_.y]):l.push(["L",_.x,_.y])}),i._drawZeroLine(a,m)?f=s.mix({},i.get("zeroLineStyle"),{path:l}):f=s.mix({},n,{path:l}),o=i.addShape("path",{attrs:f}),o.name="axis-grid",o._id=g._id,o.set("coord",i.get("coord")),i.get("appendInfo")&&o.setSilent("appendInfo",i.get("appendInfo")))}):s.each(h,function(g,m){i.get("hideFirstLine")&&m===0||i.get("hideLastLine")&&m===b-1||(v=g.points,l=[],s.each(v,function(_,M){var x=_.radius;M===0?l.push(["M",_.x,_.y]):l.push(["A",x,x,0,0,_.flag,_.x,_.y])}),f=s.mix({},n,{path:l}),o=i.addShape("path",{attrs:f}),o.name="axis-grid",o._id=g._id,o.set("coord",i.get("coord")),i.get("appendInfo")&&o.setSilent("appendInfo",i.get("appendInfo")))})},_drawZeroLine:function(h,n){var i=this,a=i.get("tickValues");return!!(h==="line"&&a&&a[n]===0&&i.get("hightLightZero"))},_drawAlternativeBg:function(h,n,i){var a=this,o=a.get("alternateColor"),l,f,v;s.isString(o)?f=o:s.isArray(o)&&(f=o[0],v=o[1]),i%2==0?v&&(l=a._getBackItem(n.points,h.points,v)):f&&(l=a._getBackItem(n.points,h.points,f));var b=a.addShape("Path",{attrs:l});b.name="axis-grid-rect",b._id=h._id&&h._id.replace("grid","grid-rect"),b.set("coord",a.get("coord")),a.get("appendInfo")&&b.setSilent("appendInfo",a.get("appendInfo"))},_getBackItem:function(h,n,i){var a=[],o=this.get("type");if(o==="line")a.push(["M",h[0].x,h[0].y]),a.push(["L",h[h.length-1].x,h[h.length-1].y]),a.push(["L",n[n.length-1].x,n[n.length-1].y]),a.push(["L",n[0].x,n[0].y]),a.push(["Z"]);else if(o==="polygon"){s.each(h,function(m,_){_===0?a.push(["M",m.x,m.y]):a.push(["L",m.x,m.y])});for(var l=n.length-1;l>=0;l--)a.push(["L",n[l].x,n[l].y]);a.push(["Z"])}else{var f=h[0].flag;s.each(h,function(m,_){var M=m.radius;_===0?a.push(["M",m.x,m.y]):a.push(["A",M,M,0,0,m.flag,m.x,m.y])});for(var v=n.length-1;v>=0;v--){var b=n[v],g=b.radius;v===n.length-1?a.push(["M",b.x,b.y]):a.push(["A",g,g,0,0,f===1?0:1,b.x,b.y])}}return{fill:i,path:a}}}),E.exports=c},function(E,T,e){var t=e(3);E.exports={getFirstScale:function(s){var c;return t.each(s,function(r){if(r)return c=r,!1}),c}}},function(E,T,e){function t(g){return function(){var m=r(g),_;if(c()){var M=r(this).constructor;_=Reflect.construct(m,arguments,M)}else _=m.apply(this,arguments);return u(this,_)}}function u(g,m){return m&&(typeof m=="object"||typeof m=="function")?m:s(g)}function s(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(g){return!1}}function r(g){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},r(g)}function h(g,m){g.prototype=Object.create(m.prototype),g.prototype.constructor=g,g.__proto__=m}var n=e(3),i=n.DomUtil,a=e(36),o=e(254),l=e(255),f=e(253),v={scatter:o,map:l,treemap:f},b=function(g){h(_,g);var m=t(_);function _(){return g.apply(this,arguments)||this}var M=_.prototype;return M.getDefaultCfg=function(){var y=g.prototype.getDefaultCfg.call(this);return n.mix({},y,{name:"label",type:"default",textStyle:null,formatter:null,items:null,useHtml:!1,containerTpl:'<div class="g-labels" style="position:absolute;top:0;left:0;"></div>',itemTpl:'<div class="g-label" style="position:absolute;">{text}</div>',labelLine:!1,lineGroup:null,shapes:null,config:!0,capture:!0})},M.clear=function(){var y=this.get("group"),S=this.get("container");y&&!y.get("destroyed")&&y.clear(),S&&(S.innerHTML=""),g.prototype.clear.call(this)},M.destroy=function(){var y=this.get("group"),S=this.get("container");y.destroy||y.destroy(),S&&S.parentNode&&S.parentNode.removeChild(S),g.prototype.destroy.call(this)},M.render=function(){this.clear(),this._init(),this.beforeDraw(),this.draw(),this.afterDraw()},M._dryDraw=function(){var y=this,S=y.get("items"),P=y.getLabels(),A=P.length;n.each(S,function(L,H){if(H<A){var F=P[H];y.changeLabel(F,L)}else{var Z=y._addLabel(L,H);Z&&(Z._id=L._id,Z.set("coord",L.coord))}});for(var O=A-1;O>=S.length;O--)P[O].remove();y._adjustLabels(),(y.get("labelLine")||!y.get("config"))&&y.drawLines()},M.draw=function(){this._dryDraw(),this.get("canvas").draw()},M.changeLabel=function(y,S){if(!!y)if(y.tagName){var P=this._createDom(S);y.innerHTML=P.innerHTML,this._setCustomPosition(S,y)}else y._id=S._id,y.attr("text",S.text),(y.attr("x")!==S.x||y.attr("y")!==S.y)&&(y.resetMatrix(),S.textStyle.rotate&&(y.rotateAtStart(S.textStyle.rotate),delete S.textStyle.rotate),y.attr(S))},M.show=function(){var y=this.get("group"),S=this.get("container");y&&y.show(),S&&(S.style.opacity=1)},M.hide=function(){var y=this.get("group"),S=this.get("container");y&&y.hide(),S&&(S.style.opacity=0)},M.drawLines=function(){var y=this,S=y.get("labelLine");typeof S=="boolean"&&y.set("labelLine",{});var P=y.get("lineGroup");!P||P.get("destroyed")?(P=y.get("group").addGroup({elCls:"x-line-group"}),y.set("lineGroup",P)):P.clear(),n.each(y.get("items"),function(A){y.lineToLabel(A,P)})},M.lineToLabel=function(y,S){var P=this;if(!(!P.get("config")&&!y.labelLine)){var A=y.labelLine||P.get("labelLine"),O=typeof y.capture=="undefined"?P.get("capture"):y.capture,L=A.path;if(L&&n.isFunction(A.path)&&(L=A.path(y)),!L){var H=y.start||{x:y.x-y._offset.x,y:y.y-y._offset.y};L=[["M",H.x,H.y],["L",y.x,y.y]]}var F=y.color;F||(y.textStyle&&y.textStyle.fill?F=y.textStyle.fill:F="#000");var Z=S.addShape("path",{attrs:n.mix({path:L,fill:null,stroke:F},A),capture:O});Z.name=P.get("name"),Z._id=y._id&&y._id.replace("glabel","glabelline"),Z.set("coord",P.get("coord"))}},M._adjustLabels=function(){var y=this,S=y.get("type"),P=y.getLabels(),A=y.get("shapes"),O=v[S];S==="default"||!O||O(P,A)},M.getLabels=function(){var y=this.get("container");return y?n.toArray(y.childNodes):this.get("group").get("children")},M._addLabel=function(y,S){var P=y;return this.get("config")&&(P=this._getLabelCfg(y,S)),this._createText(P)},M._getLabelCfg=function(y,S){var P=this.get("textStyle")||{},A=this.get("formatter"),O=this.get("htmlTemplate");if(!n.isObject(y)){var L=y;y={},y.text=L}n.isFunction(P)&&(P=P(y.text,y,S)),A&&(y.text=A(y.text,y,S)),O&&(y.useHtml=!0,n.isFunction(O)&&(y.text=O(y.text,y,S))),n.isNil(y.text)&&(y.text=""),y.text=y.text+"";var H=n.mix({},y,{textStyle:P},{x:y.x||0,y:y.y||0});return H},M._init=function(){if(!this.get("group")){var y=this.get("canvas").addGroup({id:"label-group"});this.set("group",y)}},M.initHtmlContainer=function(){var y=this.get("container");if(y)n.isString(y)&&(y=document.getElementById(y),y&&this.set("container",y));else{var S=this.get("containerTpl"),P=this.get("canvas").get("el").parentNode;y=i.createDom(S),P.style.position="relative",P.appendChild(y),this.set("container",y)}return y},M._createText=function(y){var S=n.deepMix({},y),P=this.get("container"),A=typeof S.capture=="undefined"?this.get("capture"):S.capture,O;if(S.useHtml||S.htmlTemplate){P||(P=this.initHtmlContainer());var L=this._createDom(S);P.appendChild(L),this._setCustomPosition(S,L)}else{var H=this.get("name"),F=S.point,Z=this.get("group");delete S.point;var G=S.rotate;return S.textStyle&&(S.textStyle.rotate&&(G=S.textStyle.rotate,delete S.textStyle.rotate),S=n.mix({x:S.x,y:S.y,textAlign:S.textAlign,text:S.text},S.textStyle)),O=Z.addShape("text",{attrs:S,capture:A}),G&&(Math.abs(G)>Math.PI*2&&(G=G/180*Math.PI),O.transform([["t",-S.x,-S.y],["r",G],["t",S.x,S.y]])),O.setSilent("origin",F||S),O.name=H,this.get("appendInfo")&&O.setSilent("appendInfo",this.get("appendInfo")),O}},M._createDom=function(y){var S=this.get("itemTpl"),P=n.substitute(S,{text:y.text});return i.createDom(P)},M._setCustomPosition=function(y,S){var P=y.textAlign||"left",A=y.y,O=y.x,L=i.getOuterWidth(S),H=i.getOuterHeight(S);A=A-H/2,P==="center"?O=O-L/2:P==="right"&&(O=O-L),S.style.top=parseInt(A,10)+"px",S.style.left=parseInt(O,10)+"px"},_}(a);E.exports=b},function(E,T){var e=function(){function t(){this.bitmap=[]}var u=t.prototype;return u.hasGap=function(c){for(var r=!0,h=this.bitmap,n=Math.floor(c.minX),i=Math.ceil(c.maxX),a=Math.floor(c.minY),o=Math.ceil(c.maxY)-1,l=n;l<i;l++){if(!h[l]){h[l]=[];continue}if(l===n||l===i-1){for(var f=a;f<=o;f++)if(h[l][f]){r=!1;break}}else if(h[l][a]||h[l][o]){r=!1;break}}return r},u.fillGap=function(c){for(var r=this.bitmap,h=Math.floor(c.minX),n=Math.ceil(c.maxX)-1,i=Math.floor(c.minY),a=Math.ceil(c.maxY)-1,o=h;o<=n;o++){for(var l=i;l<a;l+=8)r[o]||(r[o]=[]),r[o][l]=!0;r[o][a]=!0}for(var f=i;f<=a;f++)r[h][f]=!0,r[n][f]=!0},t}();E.exports=e},function(E,T,e){function t(f){return function(){var v=r(f),b;if(c()){var g=r(this).constructor;b=Reflect.construct(v,arguments,g)}else b=v.apply(this,arguments);return u(this,b)}}function u(f,v){return v&&(typeof v=="object"||typeof v=="function")?v:s(f)}function s(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function r(f){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},r(f)}function h(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var n=e(3),i=e(36),a=e(19),o=a.FONT_FAMILY,l=function(f){h(g,f);var v=t(g),b=g.prototype;b.getDefaultCfg=function(){return{container:null,title:null,formatter:null,hoverable:!0,titleGap:15,position:[0,0],offset:[0,0],offsetX:null,offsetY:null}};function g(m){var _;return _=f.call(this,m)||this,_._init(),_.beforeRender(),_.render(),_._adjustPositionOffset(),_._bindEvents(),_}return b._init=function(){var _=this.get("group"),M=this.get("container");this.set("canvas",M.get("canvas"));var x=this.get("position");_||(_=M.addGroup({x:0-x[0],y:0-x[1]})),this.set("group",_)},b._adjustPositionOffset=function(){var _=this.get("position"),M=this.get("offset"),x=this.get("offsetX"),y=this.get("offsetY");if(!n.isArray(M)){var S=this.get("layout");M=S==="vertical"?[M,0]:[0,M]}x&&(M[0]=x),y&&(M[1]=y);var P=this.get("group").getBBox();this.move(-P.minX+_[0]+M[0],-P.minY+_[1]+M[1])},b.beforeRender=function(){var _=this.get("group"),M=_.addGroup();this.set("itemsGroup",M)},b.render=function(){this._renderTitle()},b._renderTitle=function(){var _=this.get("title"),M=this.get("titleGap");if(M=M||0,_&&_.text){var x=this.get("group"),y=x.addShape("text",{attrs:n.mix({x:0,y:0-M,fill:"#333",textBaseline:"middle",fontFamily:o},_)});y.name="legend-title",this.get("appendInfo")&&y.setSilent("appendInfo",this.get("appendInfo")),this.set("titleShape",y)}},b.getCheckedCount=function(){var _=this.get("itemsGroup"),M=_.get("children"),x=n.filter(M,function(y){return y.get("checked")});return x.length},b.setItems=function(_){this.set("items",_),this.clear(),this.render()},b.addItem=function(_){var M=this.get("items");M.push(_),this.clear(),this.render()},b.clear=function(){var _=this.get("itemsGroup");_.clear();var M=this.get("group");M.clear(),this.beforeRender()},b.destroy=function(){var _=this.get("group");_&&_.destroy(),this._attrs={},this.removeAllListeners(),f.prototype.destroy.call(this)},b.getWidth=function(){var _=this.get("group").getBBox();return _.width},b.getHeight=function(){var _=this.get("group").getBBox();return _.height},b.move=function(_,M){this.get("group").move(_,M)},b.draw=function(){this.get("canvas").draw()},g}(i);E.exports=l},function(E,T,e){function t(A){return function(){var O=r(A),L;if(c()){var H=r(this).constructor;L=Reflect.construct(O,arguments,H)}else L=O.apply(this,arguments);return u(this,L)}}function u(A,O){return O&&(typeof O=="object"||typeof O=="function")?O:s(A)}function s(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(A){return!1}}function r(A){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(L){return L.__proto__||Object.getPrototypeOf(L)},r(A)}function h(A,O){A.prototype=Object.create(O.prototype),A.prototype.constructor=A,A.__proto__=O}var n=e(3),i=e(114),a=e(19),o=a.FONT_FAMILY,l=n.DomUtil,f=n.Group,v="g2-legend",b="g2-legend-title",g="g2-legend-list",m="g2-legend-list-item",_="g2-legend-text",M="g2-legend-marker";function x(A,O){return A.getElementsByClassName(O)[0]}function y(A,O){var L=A.className;return n.isNil(L)||(L=L.split(" "),L.indexOf(O)>-1)?A:A.parentNode?A.parentNode.className===v?A.parentNode:y(A.parentNode,O):null}function S(A,O){var L=null,H=O instanceof f?O.get("value"):O;return n.each(A,function(F){if(F.value===H)return L=F,!1}),L}var P=function(A){h(L,A);var O=t(L);function L(){return A.apply(this,arguments)||this}var H=L.prototype;return H.getDefaultCfg=function(){var Z=A.prototype.getDefaultCfg.call(this);return n.mix({},Z,{type:"category-legend",container:null,containerTpl:'<div class="'+v+'"><h4 class="'+b+'"></h4><ul class="'+g+'"></ul></div>',itemTpl:'<li class="'+m+' item-{index} {checked}" data-color="{originColor}" data-value="{originValue}"><i class="'+M+'" style="background-color:{color};"></i><span class="'+_+'">{value}</span></li>',legendStyle:{},textStyle:{fill:"#333",fontSize:12,textAlign:"middle",textBaseline:"top",fontFamily:o},abridgeText:!1,tipTpl:'<div class="textTip"></div>',tipStyle:{display:"none",fontSize:"12px",backgroundColor:"#fff",position:"absolute",width:"auto",height:"auto",padding:"3px",boxShadow:"2px 2px 5px #888"},autoPosition:!0})},H._init=function(){},H.beforeRender=function(){},H.render=function(){this._renderHTML()},H._bindEvents=function(){var Z=this,G=this.get("legendWrapper"),U=x(G,g);this.get("hoverable")&&(U.onmousemove=function(Y){return Z._onMousemove(Y)},U.onmouseout=function(Y){return Z._onMouseleave(Y)}),this.get("clickable")&&(U.onclick=function(Y){return Z._onClick(Y)})},H._onMousemove=function(Z){var G=this.get("items"),U=Z.target,Y=U.className;if(Y=Y.split(" "),!(Y.indexOf(v)>-1||Y.indexOf(g)>-1)){var J=y(U,m),rt=S(G,J.getAttribute("data-value"));rt?(this.deactivate(),this.activate(J.getAttribute("data-value")),this.emit("itemhover",{item:rt,currentTarget:J,checked:rt.checked})):rt||(this.deactivate(),this.emit("itemunhover",Z))}},H._onMouseleave=function(Z){this.deactivate(),this.emit("itemunhover",Z)},H._onClick=function(Z){var G=this,U=this.get("legendWrapper"),Y=x(U,g),J=this.get("unCheckColor"),rt=this.get("items"),ft=this.get("selectedMode"),dt=Y.childNodes,ut=Z.target,Lt=ut.className;if(Lt=Lt.split(" "),!(Lt.indexOf(v)>-1||Lt.indexOf(g)>-1)){var Ft=y(ut,m),Ot=x(Ft,_),St=x(Ft,M),xt=S(rt,Ft.getAttribute("data-value"));if(!!xt){var At=Ft.className,nt=Ft.getAttribute("data-color");if(ft==="single")xt.checked=!0,n.each(dt,function(Q){if(Q!==Ft){var ht=x(Q,M);ht.style.backgroundColor=J,Q.className=Q.className.replace("checked","unChecked"),Q.style.color=J;var et=S(rt,Q.getAttribute("data-value"));et.checked=!1}else Ot&&(Ot.style.color=G.get("textStyle").fill),St&&(St.style.backgroundColor=nt),Ft.className=At.replace("unChecked","checked")});else{var Mt=At.indexOf("checked")!==-1,z=0;if(n.each(dt,function(Q){Q.className.indexOf("checked")!==-1&&z++}),!this.get("allowAllCanceled")&&Mt&&z===1){this.emit("clicklastitem",{item:xt,currentTarget:Ft,checked:ft==="single"?!0:xt.checked});return}xt.checked=!xt.checked,Mt?(St&&(St.style.backgroundColor=J),Ft.className=At.replace("checked","unChecked"),Ft.style.color=J):(St&&(St.style.backgroundColor=nt),Ft.className=At.replace("unChecked","checked"),Ft.style.color=this.get("textStyle").fill)}this.emit("itemclick",{item:xt,currentTarget:Ft,checked:ft==="single"?!0:xt.checked})}}},H.activate=function(Z){var G=this,U=this,Y=U.get("items"),J=S(Y,Z),rt=U.get("legendWrapper"),ft=x(rt,g),dt=ft.childNodes;dt.forEach(function(ut){var Lt=x(ut,M),Ft=S(Y,ut.getAttribute("data-value"));if(G.get("highlight")){if(Ft===J&&Ft.checked){Lt.style.border="1px solid #333";return}}else Ft===J?Lt.style.opacity=U.get("activeOpacity"):Ft.checked&&(Lt.style.opacity=U.get("inactiveOpacity"))})},H.deactivate=function(){var Z=this,G=this,U=G.get("legendWrapper"),Y=x(U,g),J=Y.childNodes;J.forEach(function(rt){var ft=x(rt,M);Z.get("highlight")?ft.style.border="1px solid #fff":ft.style.opacity=G.get("inactiveOpacity")})},H._renderHTML=function(){var Z=this,G=this.get("container"),U=this.get("title"),Y=this.get("containerTpl"),J=l.createDom(Y),rt=x(J,b),ft=x(J,g),dt=this.get("unCheckColor"),ut=n.deepMix({},{CONTAINER_CLASS:{height:"auto",width:"auto",position:"absolute",overflowY:"auto",fontSize:"12px",fontFamily:o,lineHeight:"20px",color:"#8C8C8C"},TITLE_CLASS:{marginBottom:this.get("titleGap")+"px",fontSize:"12px",color:"#333",textBaseline:"middle",fontFamily:o},LIST_CLASS:{listStyleType:"none",margin:0,padding:0,textAlign:"center"},LIST_ITEM_CLASS:{cursor:"pointer",marginBottom:"5px",marginRight:"24px"},MARKER_CLASS:{width:"9px",height:"9px",borderRadius:"50%",display:"inline-block",marginRight:"4px",verticalAlign:"middle"}},this.get("legendStyle"));if(/^\#/.test(G)||typeof G=="string"&&G.constructor===String){var Lt=G.replace("#","");G=document.getElementById(Lt),G.appendChild(J)}else{var Ft=this.get("position"),Ot={};Ft==="left"||Ft==="right"?Ot={maxHeight:(this.get("maxLength")||G.offsetHeight)+"px"}:Ot={maxWidth:(this.get("maxLength")||G.offsetWidth)+"px"},l.modifyCSS(J,n.mix({},ut.CONTAINER_CLASS,Ot,this.get(v))),G.appendChild(J)}l.modifyCSS(ft,n.mix({},ut.LIST_CLASS,this.get(g))),rt&&(U&&U.text?(rt.innerHTML=U.text,l.modifyCSS(rt,n.mix({},ut.TITLE_CLASS,this.get(b),U))):J.removeChild(rt));var St=this.get("items"),xt=this.get("itemTpl"),At=this.get("position"),nt=this.get("layout"),Mt=At==="right"||At==="left"||nt==="vertical"?"block":"inline-block",z=n.mix({},ut.LIST_ITEM_CLASS,{display:Mt},this.get(m)),Q=n.mix({},ut.MARKER_CLASS,this.get(M));if(n.each(St,function(gt,k){var ot=gt.checked,it=Z._formatItemValue(gt.value),X=gt.marker.fill||gt.marker.stroke,Et=ot?X:dt,vt;n.isFunction(xt)?vt=xt(it,Et,ot,k):vt=xt;var Nt=n.substitute(vt,n.mix({},gt,{index:k,checked:ot?"checked":"unChecked",value:it,color:Et,originColor:X,originValue:gt.value.replace(/\"/g,"&quot;")})),$t=l.createDom(Nt);$t.style.color=Z.get("textStyle").fill;var ee=x($t,M),kt=x($t,_);if(l.modifyCSS($t,z),ee&&l.modifyCSS(ee,Q),ot||($t.style.color=dt,ee&&(ee.style.backgroundColor=dt)),ft.appendChild($t),Z.get("abridgeText")){var Wt=it,ae=$t.offsetWidth,le=Z.get("textStyle").fontSize;isNaN(le)&&(le.indexOf("pt")!==-1?le=parseFloat(le.substr(0,le.length-2))*1/72*96:le.indexOf("px")!==-1&&(le=parseFloat(le.substr(0,le.length-2))));var je=le*Wt.length,Oe=Math.floor(ae/le);ae<2*le?Wt="":ae<je&&Oe>1&&(Wt=Wt.substr(0,Oe-1)+"..."),kt.innerText=Wt,$t.addEventListener("mouseover",function(){var We=x(J.parentNode,"textTip");We.style.display="block",We.style.left=$t.offsetLeft+$t.offsetWidth+"px",We.style.top=$t.offsetTop+15+"px",We.innerText=it}),$t.addEventListener("mouseout",function(){var We=x(J.parentNode,"textTip");We.style.display="none"})}}),this.get("abridgeText")){var ht=this.get("tipTpl"),et=l.createDom(ht),at=this.get("tipStyle");l.modifyCSS(et,at),J.parentNode.appendChild(et),et.addEventListener("mouseover",function(){et.style.display="none"})}this.set("legendWrapper",J)},H._adjustPositionOffset=function(){var Z=this.get("autoPosition");if(Z!==!1){var G=this.get("position"),U=this.get("offset"),Y=this.get("offsetX"),J=this.get("offsetY");Y&&(U[0]=Y),J&&(U[1]=J);var rt=this.get("legendWrapper");rt.style.left=G[0]+"px",rt.style.top=G[1]+"px",rt.style.marginLeft=U[0]+"px",rt.style.marginTop=U[1]+"px"}},H.getWidth=function(){return l.getOuterWidth(this.get("legendWrapper"))},H.getHeight=function(){return l.getOuterHeight(this.get("legendWrapper"))},H.move=function(Z,G){/^\#/.test(this.get("container"))?A.prototype.move.call(this,Z,G):(l.modifyCSS(this.get("legendWrapper"),{left:Z+"px",top:G+"px"}),this.set("x",Z),this.set("y",G))},H.destroy=function(){var Z=this.get("legendWrapper");Z&&Z.parentNode&&Z.parentNode.removeChild(Z),A.prototype.destroy.call(this)},L}(i);E.exports=P},function(E,T,e){function t(m){return function(){var _=r(m),M;if(c()){var x=r(this).constructor;M=Reflect.construct(_,arguments,x)}else M=_.apply(this,arguments);return u(this,M)}}function u(m,_){return _&&(typeof _=="object"||typeof _=="function")?_:s(m)}function s(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(m){return!1}}function r(m){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},r(m)}function h(m,_){m.prototype=Object.create(_.prototype),m.prototype.constructor=m,m.__proto__=_}var n=e(3),i=e(112),a=e(19),o=a.FONT_FAMILY,l=n.Event,f=n.Group;function v(m,_){var M=null,x=_ instanceof f||_.name==="legendGroup"?_.get("value"):_;return n.each(m,function(y){if(y.value===x)return M=y,!1}),M}function b(m,_){return m.findBy(function(M){return M.name===_})}var g=function(m){h(M,m);var _=t(M);function M(){return m.apply(this,arguments)||this}var x=M.prototype;return x.getDefaultCfg=function(){var S=m.prototype.getDefaultCfg.call(this);return n.mix({},S,{type:"category-legend",items:null,itemGap:5,itemMarginBottom:8,itemsGroup:null,layout:"horizontal",allowAllCanceled:!1,backPadding:[0,0,0,0],unCheckColor:"#ccc",background:{fill:"#fff",fillOpacity:0},itemWidth:null,textStyle:{fill:"#333",fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:o},_wordSpaceing:8,clickable:!0,selectedMode:"multiple",reversed:!1,autoWrap:!0,highlight:!1,activeOpacity:.7,inactiveOpacity:1})},x.render=function(){m.prototype.render.call(this),this._renderItems(),this.get("autoWrap")&&this._adjustItems()},x._bindEvents=function(){this.get("hoverable")&&(this.get("group").on("mousemove",n.wrapBehavior(this,"_onMousemove")),this.get("group").on("mouseleave",n.wrapBehavior(this,"_onMouseleave"))),this.get("clickable")&&this.get("group").on("click",n.wrapBehavior(this,"_onClick"))},x._getLegendItem=function(S){var P=S.get("parent");return P&&P.name==="legendGroup"?P:null},x.activate=function(S){var P=this,A=this,O=A.get("itemsGroup"),L=O.get("children"),H=void 0;L.forEach(function(F){if(H=b(F,"legend-marker"),!!H){var Z=F.get("checked");P.get("highlight")?F.get("value")===S&&Z?H.attr("stroke","#333"):H.attr("stroke",null):F.get("value")===S&&H.attr("fillOpacity",A.get("activeOpacity"))}}),this.get("canvas").draw()},x.deactivate=function(){var S=this,P=this,A=P.get("itemsGroup"),O=A.get("children"),L=void 0,H=this.get("unCheckColor");O.forEach(function(F){if(L=b(F,"legend-marker"),!!L)if(S.get("highlight")){var Z=L.get("oriStroke"),G=F.get("checked");Z&&!G?Z=H:Z="",L.attr("stroke",Z)}else L.attr("fillOpacity",P.get("inactiveOpacity"))}),this.get("canvas").draw()},x._onMousemove=function(S){var P=this._getLegendItem(S.currentTarget);if(P&&P.get("checked")){var A=this.get("items"),O=new l("itemhover",S,!0,!0);O.item=v(A,P),O.checked=P.get("checked"),O.currentTarget=S.currentTarget,this.deactivate(),this.activate(P.get("value")),this.emit("itemhover",O)}else this.deactivate(),this.emit("itemunhover",S);this.get("canvas").draw()},x._onMouseleave=function(S){this.deactivate(),this.get("canvas").draw(),this.emit("itemunhover",S)},x._onClick=function(S){var P=this._getLegendItem(S.currentTarget),A=this.get("items");if(P&&!P.get("destroyed")){var O=P.get("checked"),L=this.get("selectedMode"),H=v(A,P),F=new l("itemclick",S,!0,!0);if(F.item=H,F.currentTarget=P,F.appendInfo=S.currentTarget.get("appendInfo"),F.checked=L==="single"?!0:!O,!this.get("allowAllCanceled")&&O&&this.getCheckedCount()===1){this.emit("clicklastitem",F);return}var Z=this.get("unCheckColor"),G=this.get("textStyle").fill,U=void 0,Y=void 0,J=void 0;if(L==="single"){var rt=this.get("itemsGroup"),ft=rt.get("children");n.each(ft,function(dt){U=b(dt,"legend-marker"),Y=b(dt,"legend-text"),J=b(dt,"legend-item"),dt!==P?(U.attr("fill")&&U.attr("fill",Z),U.attr("stroke")&&U.attr("stroke",Z),Y.attr("fill",Z),U.setSilent("checked",!1),Y.setSilent("checked",!1),J.setSilent("checked",!1),dt.setSilent("checked",!1)):(U.attr("fill")&&H&&H.marker&&U.attr("fill",H.marker.fill),U.attr("stroke")&&H&&H.marker&&U.attr("stroke",H.marker.stroke),Y.attr("fill",G),U.setSilent("checked",!0),Y.setSilent("checked",!0),J.setSilent("checked",!0),dt.setSilent("checked",!0))})}else U=b(P,"legend-marker"),Y=b(P,"legend-text"),J=b(P,"legend-item"),U.attr("fill")&&H&&H.marker&&U.attr("fill",O?Z:H.marker.fill),U.attr("stroke")&&H&&H.marker&&U.attr("stroke",O?Z:H.marker.stroke),Y.attr("fill",O?Z:G),P.setSilent("checked",!O),U.setSilent("checked",!O),Y.setSilent("checked",!O),J.setSilent("checked",!O);this.emit("itemclick",F)}this.get("canvas").draw()},x._renderItems=function(){var S=this,P=this.get("items");if(this.get("reversed")&&P.reverse(),n.each(P,function(H,F){S._addItem(H,F)}),this.get("highlight")){var A=this.get("itemsGroup"),O=A.get("children"),L=void 0;O.forEach(function(H){L=b(H,"legend-marker");var F=L.get("oriStroke");F||(L.attr("stroke")?L.set("oriStroke",L.attr("stroke")):L.set("oriStroke",""))})}},x._formatItemValue=function(S){var P=this.get("formatter")||this.get("itemFormatter");return P&&(S=P.call(this,S)),S},x._getNextX=function(){var S=this.get("layout"),P=this.get("itemGap"),A=this.get("itemsGroup"),O=this.get("itemWidth"),L=A.get("children"),H=0;return S==="horizontal"&&n.each(L,function(F){H+=(O||F.getBBox().width)+P}),H},x._getNextY=function(){var S=this.get("itemMarginBottom"),P=this.get("titleShape")?this.get("titleGap"):0,A=this.get("layout"),O=this.get("itemsGroup"),L=this.get("titleShape"),H=O.get("children"),F=P;return L&&(F+=L.getBBox().height),A==="vertical"&&n.each(H,function(Z){F+=Z.getBBox().height+S}),F},x._addItem=function(S){var P=this.get("itemsGroup"),A=this._getNextX(),O=this._getNextY(),L=this.get("unCheckColor"),H=P.addGroup({x:A,y:O,value:S.value,checked:S.checked});H.set("viewId",this.get("viewId"));var F=this.get("textStyle"),Z=this.get("_wordSpaceing"),G=0;if(S.marker){var U=n.mix({},S.marker,{x:S.marker.radius+A,y:O});S.checked||(U.fill&&(U.fill=L),U.stroke&&(U.stroke=L));var Y=H.addShape("marker",{type:"marker",attrs:U});Y.attr("cursor","pointer"),Y.name="legend-marker",G+=Y.getBBox().width+Z}var J=n.mix({},{fill:"#333",fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:o},F,{x:G+A,y:O,text:this._formatItemValue(S.value)});S.checked||n.mix(J,{fill:L});var rt=H.addShape("text",{attrs:J});rt.attr("cursor","pointer"),rt.name="legend-text",this.get("appendInfo")&&rt.setSilent("appendInfo",this.get("appendInfo"));var ft=H.getBBox(),dt=this.get("itemWidth"),ut=H.addShape("rect",{attrs:{x:A,y:O-ft.height/2,fill:"#fff",fillOpacity:0,width:dt||ft.width,height:ft.height}});return ut.attr("cursor","pointer"),ut.setSilent("origin",S),ut.name="legend-item",this.get("appendInfo")&&ut.setSilent("appendInfo",this.get("appendInfo")),H.name="legendGroup",H},x._adjustHorizontal=function(){var S=this.get("itemsGroup"),P=S.get("children"),A=this.get("maxLength"),O=this.get("itemGap"),L=this.get("itemMarginBottom"),H=this.get("titleShape")?this.get("titleGap"):0,F=0,Z=0,G=void 0,U=void 0,Y=void 0,J=this.get("itemWidth");S.getBBox().width>A&&n.each(P,function(rt){Y=rt.getBBox(),G=J||Y.width,U=Y.height+L,A-Z<G&&(F++,Z=0),rt.move(Z,F*U+H),Z+=G+O})},x._adjustVertical=function(){var S=this.get("itemsGroup"),P=this.get("titleShape"),A=S.get("children"),O=this.get("maxLength"),L=this.get("itemGap"),H=this.get("itemMarginBottom"),F=this.get("titleGap"),Z=P?P.getBBox().height+F:0,G=this.get("itemWidth"),U=Z,Y=void 0,J=void 0,rt=void 0,ft=0,dt=0;S.getBBox().height>O&&n.each(A,function(ut){rt=ut.getBBox(),Y=rt.width,J=rt.height,G?ft=G+L:Y>ft&&(ft=Y+L),O-U<J?(U=Z,dt+=ft,ut.move(dt,Z)):ut.move(dt,U),U+=J+H})},x._adjustItems=function(){var S=this.get("layout");S==="horizontal"?this._adjustHorizontal():this._adjustVertical()},x.getWidth=function(){return m.prototype.getWidth.call(this)},x.getHeight=function(){return m.prototype.getHeight.call(this)},x.move=function(S,P){m.prototype.move.call(this,S,P)},M}(i);E.exports=g},function(E,T,e){function t(M){return function(){var x=r(M),y;if(c()){var S=r(this).constructor;y=Reflect.construct(x,arguments,S)}else y=x.apply(this,arguments);return u(this,y)}}function u(M,x){return x&&(typeof x=="object"||typeof x=="function")?x:s(M)}function s(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(M){return!1}}function r(M){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},r(M)}function h(M,x){M.prototype=Object.create(x.prototype),M.prototype.constructor=M,M.__proto__=x}var n=e(31),i=e(116),a=e(117),o=e(118),l=e(68),f=e(3),v=e(19),b=v.FONT_FAMILY,g=f.DomUtil,m=f.MatrixUtil,_=function(M){h(S,M);var x=t(S),y=S.prototype;y.getDefaultCfg=function(){var A=M.prototype.getDefaultCfg.call(this);return f.mix({},A,{boardStyle:{x:0,y:0,width:100,height:100,fill:"rgba(255, 255, 255, 0.9)",radius:4,stroke:"#e2e2e2",lineWidth:1},titleStyle:{fontFamily:b,text:"",textBaseline:"top",fontSize:12,fill:"rgb(87, 87, 87)",lineHeight:20,padding:20},markerStyle:{radius:4},nameStyle:{fontFamily:b,fontSize:12,fill:"rgb(87, 87, 87)",textBaseline:"middle",textAlign:"start",padding:8},valueStyle:{fontFamily:b,fontSize:12,fill:"rgb(87, 87, 87)",textBaseline:"middle",textAlign:"start",padding:30},padding:{top:20,right:20,bottom:20,left:20},itemGap:10,animationDuration:200})};function S(P){var A;A=M.call(this,P)||this,f.assign(s(A),o),f.assign(s(A),a);var O=A.get("crosshairs");if(O){var L=O.type==="rect"?A.get("backPlot"):A.get("frontPlot"),H=new i(f.mix({plot:L,plotRange:A.get("plotRange"),canvas:A.get("canvas")},A.get("crosshairs")));H.hide(),A.set("crosshairGroup",H)}return A._init_(),A.get("items")&&A.render(),A}return y._init_=function(){var A=this,O=A.get("padding"),L=A.get("frontPlot"),H=L.addGroup({capture:!1});A.set("markerGroup",H);var F=L.addGroup();F.hide(),A.set("container",F);var Z=F.addShape("rect",{attrs:f.mix({},A.get("boardStyle"))});A.set("board",Z);var G=A.get("titleStyle");if(A.get("showTitle")){var U=F.addShape("text",{attrs:f.mix({x:O.left,y:O.top},G)});A.set("titleShape",U),U.name="tooltip-title"}var Y=F.addGroup();Y.move(O.left,O.top+G.lineHeight+G.padding),A.set("itemsGroup",Y)},y.render=function(){var A=this;A.clear();var O=A.get("container"),L=A.get("board"),H=A.get("showTitle"),F=A.get("titleContent"),Z=this.get("titleShape"),G=this.get("itemsGroup"),U=A.get("items"),Y=A.get("padding");if(Z&&H&&Z.attr("text",F),G){var J=A.get("itemGap"),rt=0,ft=0;f.each(U,function(Ft){var Ot=A._addItem(Ft);Ot.move(rt,ft),G.add(Ot);var St=Ot.getBBox().height;ft+=St+J})}var dt=O.getBBox(),ut=dt.width+Y.right,Lt=dt.height+Y.bottom;L.attr("width",ut),L.attr("height",Lt),A._alignToRight(ut)},y.clear=function(){var A=this.get("titleShape"),O=this.get("itemsGroup"),L=this.get("board");A.text="",O.clear(),L.attr("width",0),L.attr("height",0)},y.show=function(){var A=this.get("container");A.show();var O=this.get("crosshairGroup");O&&O.show();var L=this.get("markerGroup");L&&L.show(),M.prototype.show.call(this),this.get("canvas").draw()},y.hide=function(){var A=this.get("container");A.hide();var O=this.get("crosshairGroup");O&&O.hide();var L=this.get("markerGroup");L&&L.hide(),M.prototype.hide.call(this),this.get("canvas").draw()},y.destroy=function(){var A=this.get("container"),O=this.get("crosshairGroup");O&&O.destroy();var L=this.get("markerGroup");L&&L.remove(),M.prototype.destroy.call(this),A.remove()},y.setPosition=function(A,O,L){var H=this.get("container"),F=this.get("canvas").get("el"),Z=g.getWidth(F),G=g.getHeight(F),U=H.getBBox(),Y=U.width,J=U.height,rt=A,ft=O,dt;if(this.get("position")){var ut=U.width,Lt=U.height;dt=this._calcTooltipPosition(A,O,this.get("position"),ut,Lt,L),A=dt[0],O=dt[1]}else dt=this._constraintPositionInBoundary(A,O,Y,J,Z,G),A=dt[0],O=dt[1];if(this.get("inPlot")){var Ft=this.get("plotRange");dt=this._constraintPositionInPlot(A,O,Y,J,Ft,this.get("enterable")),A=dt[0],O=dt[1]}var Ot=this.get("markerItems");f.isEmpty(Ot)||(rt=Ot[0].x,ft=Ot[0].y);var St=[1,0,0,0,1,0,0,0,1],xt=m.transform(St,[["t",A,O]]);H.stopAnimate(),H.animate({matrix:xt},this.get("animationDuration"));var At=this.get("crosshairGroup");if(At){var nt=this.get("items");At.setPosition(rt,ft,nt)}M.prototype.setPosition.call(this,A,O)},y._addItem=function(A){var O=new n.Group,L=this.get("markerStyle").radius;if(A.marker){var H=f.mix({},A.marker,{x:A.marker.radius/2,y:0,symbol:A.marker.activeSymbol||A.marker.symbol});O.addShape("marker",{attrs:H}),L=A.marker.radius}var F=this.get("nameStyle");O.addShape("text",{attrs:f.mix({x:L+F.padding,y:0,text:A.name},F)});var Z=this.get("valueStyle");return O.addShape("text",{attrs:f.mix({x:O.getBBox().width+Z.padding,y:0,text:A.value},Z)}),O},y._alignToRight=function(A){var O=this,L=this.get("itemsGroup"),H=L.get("children");f.each(H,function(F){var Z=F.get("children"),G=Z[2],U=G.getBBox().width,Y=A-U-O.get("padding").right*2;G.attr("x",Y)})},S}(l);E.exports=_},function(E,T,e){function t(o){return function(){var l=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(36),i=e(3),a=function(o){h(v,o);var l=t(v),f=v.prototype;f.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return i.mix({},g,{type:null,plot:null,plotRange:null,rectStyle:{fill:"#CCD6EC",opacity:.3},lineStyle:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1},isTransposed:!1})};function v(b){var g;return g=o.call(this,b)||this,g._init_(),g.render(),g}return f._init_=function(){var g=this,m=g.get("plot"),_;g.type==="rect"?_=m.addGroup({zIndex:0}):_=m.addGroup(),this.set("container",_)},f._addLineShape=function(g,m){var _=this.get("container"),M=_.addShape("line",{capture:!1,attrs:g});return this.set("crossLineShape"+m,M),M},f._renderHorizontalLine=function(g,m){var _=i.mix(this.get("lineStyle"),this.get("style")),M=i.mix({x1:m?m.bl.x:g.get("width"),y1:0,x2:m?m.br.x:0,y2:0},_);this._addLineShape(M,"X")},f._renderVerticalLine=function(g,m){var _=i.mix(this.get("lineStyle"),this.get("style")),M=i.mix({x1:0,y1:m?m.bl.y:g.get("height"),x2:0,y2:m?m.tl.y:0},_);this._addLineShape(M,"Y")},f._renderBackground=function(g,m){var _=i.mix(this.get("rectStyle"),this.get("style")),M=this.get("container"),x=i.mix({x:m?m.tl.x:0,y:m?m.tl.y:g.get("height"),width:m?m.br.x-m.bl.x:g.get("width"),height:m?Math.abs(m.tl.y-m.bl.y):g.get("height")},_),y=M.addShape("rect",{attrs:x,capture:!1});return this.set("crosshairsRectShape",y),y},f._updateRectShape=function(g){var m,_=this.get("crosshairsRectShape"),M=this.get("isTransposed"),x=g[0],y=g[g.length-1],S=M?"y":"x",P=M?"height":"width",A=x[S];if(g.length>1&&x[S]>y[S]&&(A=y[S]),this.get("width"))_.attr(S,A-this.get("crosshairs").width/2),_.attr(P,this.get("width"));else if(i.isArray(x.point[S])&&!x.size){var O=x.point[S][1]-x.point[S][0];_.attr(S,x.point[S][0]),_.attr(P,O)}else m=3*x.size/4,_.attr(S,A-m),g.length===1?_.attr(P,3*x.size/2):_.attr(P,Math.abs(y[S]-x[S])+2*m)},f.render=function(){var g=this.get("canvas"),m=this.get("plotRange"),_=this.get("isTransposed");switch(this.clear(),this.get("type")){case"x":this._renderHorizontalLine(g,m);break;case"y":this._renderVerticalLine(g,m);break;case"cross":this._renderHorizontalLine(g,m),this._renderVerticalLine(g,m);break;case"rect":this._renderBackground(g,m);break;default:_?this._renderHorizontalLine(g,m):this._renderVerticalLine(g,m)}},f.show=function(){var g=this.get("container");o.prototype.show.call(this),g.show()},f.hide=function(){var g=this.get("container");o.prototype.hide.call(this),g.hide()},f.clear=function(){var g=this.get("container");this.set("crossLineShapeX",null),this.set("crossLineShapeY",null),this.set("crosshairsRectShape",null),o.prototype.clear.call(this),g.clear()},f.destroy=function(){var g=this.get("container");o.prototype.destroy.call(this),g.remove()},f.setPosition=function(g,m,_){var M=this.get("crossLineShapeX"),x=this.get("crossLineShapeY"),y=this.get("crosshairsRectShape");x&&!x.get("destroyed")&&x.move(g,0),M&&!M.get("destroyed")&&M.move(0,m),y&&!y.get("destroyed")&&this._updateRectShape(_)},v}(n);E.exports=a},function(E,T,e){var t=e(3),u={setMarkers:function(c,r){var h=this,n=h.get("markerGroup"),i=h.get("frontPlot");n?n.clear():(n=i.addGroup({zIndex:1,capture:!1}),h.set("markerGroup",n)),t.each(c,function(a){var o=t.mix({fill:a.color,symbol:"circle",shadowColor:a.color},r,{x:a.x,y:a.y});a.marker&&a.marker.activeSymbol&&(o.symbol=a.marker.activeSymbol),n.addShape("marker",{color:a.color,attrs:o})}),this.set("markerItems",c)},clearMarkers:function(){var c=this.get("markerGroup");c&&c.clear()}};E.exports=u},function(E,T){var e=20,t={_calcTooltipPosition:function(s,c,r,h,n,i){var a=0,o=0,l=20;if(i){var f=i.getBBox();a=f.width,o=f.height,s=f.x,c=f.y,l=5}switch(r){case"inside":s=s+a/2-h/2,c=c+o/2-n/2;break;case"top":s=s+a/2-h/2,c=c-n-l;break;case"left":s=s-h-l,c=c+o/2-n/2;break;case"right":s=s+a+l,c=c+o/2-n/2;break;case"bottom":default:s=s+a/2-h/2,c=c+o+l;break}return[s,c]},_constraintPositionInBoundary:function(s,c,r,h,n,i){return s+r+e>n?(s-=r+e,s=s<0?0:s):s+e<0?s=e:s+=e,c+h+e>i?(c-=h+e,c=c<0?0:c):c+e<0?c=e:c+=e,[s,c]},_constraintPositionInPlot:function(s,c,r,h,n,i){return s+r>n.tr.x&&(i?s-=r+1:s-=r+2*e),s<n.tl.x&&(s=n.tl.x),i||(c+h>n.bl.y&&(c-=h+2*e),c<n.tl.y&&(c=n.tl.y)),[s,c]}};E.exports=t},function(E,T,e){var t=e(0),u=e(270),s={appear:{duration:450,easing:"easeQuadOut"},update:{duration:450,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut",delay:100},leave:{duration:350,easing:"easeQuadIn"}},c={line:{appear:function(){return u.appear.clipIn},enter:function(){return u.enter.clipIn},leave:function(){return u.leave.lineWidthOut}},path:{appear:function(){return u.appear.clipIn},enter:function(){return u.enter.clipIn},leave:function(){return u.leave.lineWidthOut}},area:{appear:function(){return u.appear.clipIn},enter:function(){return u.enter.fadeIn},leave:function(){return u.leave.fadeOut},cfg:{appear:{duration:500,easing:"easeQuadOut"},update:{duration:450,easing:"easeQuadInOut"},enter:{duration:600,delay:150,easing:"easeQuadInOut"},leave:{easing:"easeQuadOut",duration:350}}},polygon:{appear:function(){return u.appear.zoomIn},enter:function(){return u.enter.zoomIn},leave:function(){return u.leave.zoomOut}},edge:{appear:function(){return u.appear.pathIn},enter:function(){return u.enter.pathIn},leave:function(){return u.leave.pathOut}},interval:{appear:function(h){var n;return h.isPolar?(n=u.appear.zoomIn,(h.isTransposed||h.type==="theta")&&(n=u.appear.fanIn)):h.isRect?n=h.isTransposed?u.appear.scaleInX:u.appear.scaleInY:n=u.appear.zoomIn,n},enter:function(h){return h.isRect||h.isTransposed||h.type==="theta"?u.enter.fadeIn:u.enter.zoomIn},leave:function(){return u.leave.fadeOut},update:function(h){if(h.type==="theta")return u.update.fanIn}},point:{appear:function(){return u.appear.zoomIn},enter:function(){return u.enter.zoomIn},leave:function(){return u.leave.zoomOut}},schema:{appear:function(){return u.appear.clipIn},enter:function(){return u.enter.clipIn},leave:function(){return u.leave.lineWidthOut}},contour:null,heatmap:null,label:{appear:function(){return u.appear.fadeIn},enter:function(){return u.enter.fadeIn},leave:function(){return u.leave.fadeOut},cfg:{appear:{duration:900}}},"axis-label":{enter:function(){return u.appear.fadeIn},leave:function(){return u.leave.fadeOut},update:function(h){if(h.isPolar)return u.appear.fadeIn}},"axis-ticks":{enter:function(){return u.appear.fadeIn},leave:function(){return u.leave.fadeOut},update:function(h){if(h.isPolar)return u.appear.fadeIn}},"axis-grid":{enter:function(){return u.appear.fadeIn},leave:function(){return u.leave.fadeOut},update:function(h){if(h.isPolar)return u.appear.fadeIn}},"axis-grid-rect":{enter:function(){return u.appear.fadeIn},leave:function(){return u.leave.fadeOut},update:function(){return u.leave.fadeIn}},labelLine:{appear:function(){return u.appear.pathIn},enter:function(){return u.enter.pathIn},leave:function(){return u.leave.pathOut}}};c.Action=u,c.defaultCfg=s,c.getAnimation=function(r,h,n){var i=this[r];if(i){var a=i[n];if(t.isFunction(a))return a(h)}return!1},c.getAnimateCfg=function(r,h){var n=s[h];return this[r]&&this[r].cfg&&this[r].cfg[h]?t.deepMix({},n,this[r].cfg[h]):n},c.registerAnimation=function(r,h,n){this.Action[r]||(this.Action[r]={}),this.Action[r][h]=n},E.exports=c},function(E,T,e){function t(r,h){r.prototype=Object.create(h.prototype),r.prototype.constructor=r,r.__proto__=h}var u=e(105),s=e(0),c=function(r){t(n,r);var h=n.prototype;h.getDefaultCfg=function(){return{}};function n(i){var a;a=r.call(this)||this;var o={visible:!0},l=a.getDefaultCfg();return a._attrs=o,s.assign(o,l,i),a}return h.get=function(a){return this._attrs[a]},h.set=function(a,o){this._attrs[a]=o},h.show=function(){var a=this.get("visible");a||(this.set("visible",!0),this.changeVisible(!0))},h.hide=function(){var a=this.get("visible");a&&(this.set("visible",!1),this.changeVisible(!1))},h.changeVisible=function(){},h.destroy=function(){this._attrs={},this.removeAllListeners(),this.destroyed=!0},n}(u);E.exports=c},function(E,T,e){E.exports={Scale:e(277),Coord:e(273),Axis:e(272),Guide:e(275),Legend:e(276),Tooltip:e(278),Event:e(274)}},function(E,T,e){var t=e(16),u=e(0),s=e(123);function c(h,n,i){i===void 0&&(i=1);var a=[h.x,h.y,i];return u.vec3.transformMat3(a,a,n),{x:a[0],y:a[1]}}function r(h){var n=h.getBBox(),i={x:n.minX,y:n.minY},a={x:n.maxX,y:n.maxY},o=h.attr("matrix");return i=c(i,o),a=c(a,o),{minX:i.x,minY:i.y,maxX:a.x,maxY:a.y}}E.exports=function(n,i){var a=i;return u.each(n.get("children"),function(o){o instanceof t.Group&&u.each(o.get("children"),function(l){if(l instanceof t.Group&&l.get("children").length||l instanceof t.Path)a=s(a,l.getBBox());else if(l instanceof t.Text){var f=r(l);a=s(a,f)}})}),a}},function(E,T){E.exports=function(t,u){return{minX:Math.min(t.minX,u.minX),minY:Math.min(t.minY,u.minY),maxX:Math.max(t.maxX,u.maxX),maxY:Math.max(t.maxY,u.maxY)}}},function(E,T){E.exports=function(t){return{minX:t.tl.x,minY:t.tl.y,maxX:t.br.x,maxY:t.br.y}}},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var u=e(46),s=function(c){t(r,c);function r(){return c.apply(this,arguments)||this}var h=r.prototype;return h.getDefaultCfg=function(){var i=c.prototype.getDefaultCfg.call(this);return i.type="list",i.cols=null,i},h.generateFacets=function(i){var a=this,o=a.fields,l=o[0];if(!l)throw"Please specify for the field for facet!";var f=a.getFieldValues(l,i),v=f.length,b=a.cols||v,g=parseInt((v+b-1)/b),m=[];return f.forEach(function(_,M){var x=parseInt(M/b),y=M%b,S=[{field:l,value:_,values:f}],P=a.getFilter(S),A=i.filter(P),O={type:a.type,count:v,colValue:_,colField:l,rowField:null,rowValue:_,colIndex:y,rowIndex:x,cols:b,rows:g,data:A,region:a.getRegion(g,b,y,x)};m.push(O)}),m},h.setXAxis=function(i,a,o){o.rowIndex!==o.rows-1&&o.cols*o.rowIndex+o.colIndex+1+o.cols<=o.count&&(a[i].label=null,a[i].title=null)},h.setYAxis=function(i,a,o){o.colIndex!==0&&(a[i].title=null,a[i].label=null)},r}(u);E.exports=s},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var u=e(46),s=function(c){t(r,c);function r(){return c.apply(this,arguments)||this}var h=r.prototype;return h.getDefaultCfg=function(){var i=c.prototype.getDefaultCfg.call(this);return i.type="rect",i},h.generateFacets=function(i){var a=this,o=a.fields,l=[],f=1,v=1,b=o[0],g=o[1],m=[""],_=[""];return b&&(m=a.getFieldValues(b,i),v=m.length),g&&(_=a.getFieldValues(g,i),f=_.length),m.forEach(function(M,x){_.forEach(function(y,S){var P=[{field:b,value:M,values:m},{field:g,value:y,values:_}],A=a.getFilter(P),O=i.filter(A),L={type:a.type,colValue:M,rowValue:y,colField:b,rowField:g,colIndex:x,rowIndex:S,cols:v,rows:f,data:O,region:a.getRegion(f,v,x,S)};l.push(L)})}),l},h.setXAxis=function(i,a,o){o.rowIndex!==o.rows-1?(a[i].title=null,a[i].label=null):o.colIndex!==parseInt((o.cols-1)/2)&&(a[i].title=null)},h.setYAxis=function(i,a,o){o.colIndex!==0?(a[i].title=null,a[i].label=null):o.rowIndex!==parseInt((o.rows-1)/2)&&(a[i].title=null)},h.renderTitle=function(i,a){a.rowIndex===0&&this.drawColTitle(i,a),a.colIndex===a.cols-1&&this.drawRowTitle(i,a)},r}(u);E.exports=s},function(E,T,e){var t=e(69),u=e(25),s=e(0),c=function r(h){r.superclass.constructor.call(this,h)};s.extend(c,t),s.augment(c,{getPointRauis:function(h,n){return u.getPointRadius(h,n)},getCirclePoint:function(h,n,i){var a=this,o=a.get("coord"),l=o.getCenter(),f=a._isEmitLabels(),v=a.getPointRauis(o,i);if(v===0)return null;if(o.isTransposed&&v>n&&!f){var b=Math.asin(n/(2*v));h=h+b*2}else v=v+n;return{x:l.x+v*Math.cos(h),y:l.y+v*Math.sin(h),angle:h,r:v}},getArcPoint:function(h,n){var i=this,a;return n=n||0,s.isArray(h.x)||s.isArray(h.y)?a={x:s.isArray(h.x)?h.x[n]:h.x,y:s.isArray(h.y)?h.y[n]:h.y}:a=h,i.transLabelPoint(a),a},getPointAngle:function(h){var n=this,i=n.get("coord");return u.getPointAngle(i,h)},getMiddlePoint:function(h){var n=this,i=n.get("coord"),a=h.length,o={x:0,y:0};return s.each(h,function(l){o.x+=l.x,o.y+=l.y}),o.x/=a,o.y/=a,o=i.convert(o),o},_isToMiddle:function(h){return h.x.length>2},getLabelPoint:function(h,n,i){var a=this,o=h.text[i],l=1,f;a._isToMiddle(n)?f=a.getMiddlePoint(n.points):(h.text.length===1&&i===0?i=1:i===0&&(l=-1),f=a.getArcPoint(n,i));var v=a.getDefaultOffset(h);v=v*l;var b=a.getPointAngle(f),g=a.getCirclePoint(b,v,f);if(g?(g.text=o,g.angle=b,g.color=n.color):g={text:""},h.autoRotate||typeof h.autoRotate=="undefined"){var m=g.textStyle?g.textStyle.rotate:null;m||(m=g.rotate||a.getLabelRotate(b,v,n)),g.rotate=m}return g.start={x:f.x,y:f.y},g},_isEmitLabels:function(){var h=this.get("label");return h.labelEmit},getLabelRotate:function(h){var n=this,i;return i=h*180/Math.PI,i+=90,n._isEmitLabels()&&(i-=90),i&&(i>90?i=i-180:i<-90&&(i=i+180)),i/180*Math.PI},getLabelAlign:function(h){var n=this,i=n.get("coord"),a;if(n._isEmitLabels())h.angle<=Math.PI/2&&h.angle>-Math.PI/2?a="left":a="right";else if(!i.isTransposed)a="center";else{var o=i.getCenter(),l=n.getDefaultOffset(h);Math.abs(h.x-o.x)<1?a="center":h.angle>Math.PI||h.angle<=0?l>0?a="left":a="right":l>0?a="right":a="left"}return a}}),E.exports=c},function(E,T,e){var t=e(0),u=e(5);E.exports={splitData:function(c){var r=this.get("viewTheme")||u;if(!c.length)return[];var h=[],n=[],i=this.getYScale(),a=i.field,o;return t.each(c,function(l){o=l._origin?l._origin[a]:l[a],r.connectNulls?t.isNil(o)||n.push(l):t.isArray(o)&&t.isNil(o[0])||t.isNil(o)?n.length&&(h.push(n),n=[]):n.push(l)}),n.length&&h.push(n),h}}},function(E,T){E.exports={toFront:function(t){var u=t.get("parent"),s=u.get("children").indexOf(t);t.set("_originIndex",s),t.toFront()},resetZIndex:function(t){var u=t.get("parent"),s=t.get("_originIndex"),c=u.get("children"),r=c.indexOf(t);s>=0&&s!==r&&(c.splice(r,1),c.splice(s,0,t))}}},function(E,T,e){function t(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function u(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var s=e(8),c=e(128),r=e(0),h=function(n){u(a,n);var i=a.prototype;i.getDefaultCfg=function(){var l=n.prototype.getDefaultCfg.call(this);return l.type="path",l.shapeType="line",l};function a(o){var l;return l=n.call(this,o)||this,r.assign(t(l),c),l}return i.getDrawCfg=function(l){var f=n.prototype.getDrawCfg.call(this,l);return f.isStack=this.hasStack(),f},i.draw=function(l,f,v,b){var g=this,m=this.splitData(l),_=this.getDrawCfg(l[0]);g._applyViewThemeShapeStyle(_,_.shape,v),_.origin=l,r.each(m,function(M,x){if(!r.isEmpty(M)){_.splitedIndex=x,_.points=M;var y=v.drawShape(_.shape,_,f);g.appendShapeInfo(y,b+x)}})},a}(s);s.Path=h,E.exports=h},function(E,T){var e,t,u="#1890FF",s=["#1890FF","#2FC25B","#FACC14","#223273","#8543E0","#13C2C2","#3436C7","#F04864"],c=["#1890FF","#41D9C7","#2FC25B","#FACC14","#E6965C","#223273","#7564CC","#8543E0","#5C8EE6","#13C2C2","#5CA3E6","#3436C7","#B381E6","#F04864","#D598D9"],r=["#1890FF","#66B5FF","#41D9C7","#2FC25B","#6EDB8F","#9AE65C","#FACC14","#E6965C","#57AD71","#223273","#738AE6","#7564CC","#8543E0","#A877ED","#5C8EE6","#13C2C2","#70E0E0","#5CA3E6","#3436C7","#8082FF","#DD81E6","#F04864","#FA7D92","#D598D9"],h=["#1890FF","#13C2C2","#2FC25B","#FACC14","#F04864","#8543E0","#3436C7","#223273"],n=["#1890FF","#73C9E6","#13C2C2","#6CD9B3","#2FC25B","#9DD96C","#FACC14","#E6965C","#F04864","#D66BCA","#8543E0","#8E77ED","#3436C7","#737EE6","#223273","#7EA2E6"],i='"-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",SimSun, "sans-serif"',a="g2-tooltip",o="g2-tooltip-title",l="g2-tooltip-list",f="g2-tooltip-list-item",v="g2-tooltip-marker",b="g2-tooltip-value",g="g2-legend",m="g2-legend-title",_="g2-legend-list",M="g2-legend-list-item",x="g2-legend-marker",y={defaultColor:u,plotCfg:{padding:[20,20,95,80]},fontFamily:i,defaultLegendPosition:"bottom",colors:s,colors_16:c,colors_24:r,colors_pie:h,colors_pie_16:n,shapes:{point:["hollowCircle","hollowSquare","hollowDiamond","hollowBowtie","hollowTriangle","hollowHexagon","cross","tick","plus","hyphen","line"],line:["line","dash","dot"],area:["area"]},sizes:[1,10],opacities:[.1,.9],axis:{top:{position:"top",title:null,label:{offset:16,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:i},autoRotate:!0},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0}},bottom:{position:"bottom",title:null,label:{offset:16,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:i}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0}},left:{position:"left",title:null,label:{offset:8,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:i}},line:null,tickLine:null,grid:{zIndex:-1,lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},right:{position:"right",title:null,label:{offset:8,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,textBaseline:"middle",fontFamily:i}},line:null,tickLine:null,grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},circle:{zIndex:1,title:null,label:{offset:8,textStyle:{fill:"#545454",fontSize:12,lineHeight:16,fontFamily:i}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0},grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},radius:{zIndex:0,label:{offset:12,textStyle:{fill:"#545454",fontSize:12,textBaseline:"middle",lineHeight:16,fontFamily:i}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0},grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},type:"circle"}},helix:{grid:null,label:null,title:null,line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,length:4,stroke:"#BFBFBF",alignWithLabel:!0}}},label:{offset:20,textStyle:{fill:"#545454",fontSize:12,textBaseline:"middle",fontFamily:i}},treemapLabels:{offset:10,textStyle:{fill:"#fff",fontSize:12,textBaseline:"top",fontStyle:"bold",fontFamily:i}},innerLabels:{textStyle:{fill:"#fff",fontSize:12,textBaseline:"middle",fontFamily:i}},thetaLabels:{labelHeight:14,offset:30},legend:{right:{position:"right",layout:"vertical",itemMarginBottom:8,width:16,height:156,title:null,legendStyle:{LIST_CLASS:{textAlign:"left"}},textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:0,fontFamily:i},unCheckColor:"#bfbfbf"},left:{position:"left",layout:"vertical",itemMarginBottom:8,width:16,height:156,title:null,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:i},unCheckColor:"#bfbfbf"},top:{position:"top",offset:[0,6],layout:"horizontal",title:null,itemGap:10,width:156,height:16,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:i},unCheckColor:"#bfbfbf"},bottom:{position:"bottom",offset:[0,6],layout:"horizontal",title:null,itemGap:10,width:156,height:16,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:i},unCheckColor:"#bfbfbf"},html:(e={},e[""+g]={height:"auto",width:"auto",position:"absolute",overflow:"auto",fontSize:"12px",fontFamily:i,lineHeight:"20px",color:"#8C8C8C"},e[""+m]={marginBottom:"4px"},e[""+_]={listStyleType:"none",margin:0,padding:0},e[""+M]={listStyleType:"none",cursor:"pointer",marginBottom:"5px",marginRight:"24px"},e[""+x]={width:"9px",height:"9px",borderRadius:"50%",display:"inline-block",marginRight:"8px",verticalAlign:"middle"},e),gradient:{textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"center",textBaseline:"middle",lineHeight:20,fontFamily:i},lineStyle:{lineWidth:1,stroke:"#fff"},unCheckColor:"#bfbfbf"},margin:[0,5,24,5],legendMargin:24},tooltip:(t={useHtml:!0,crosshairs:!1,offset:15,marker:{symbol:"circle",activeSymbol:"circle"}},t[""+a]={position:"absolute",visibility:"hidden",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:i,lineHeight:"20px",padding:"10px 10px 6px 10px"},t[""+o]={marginBottom:"4px"},t[""+l]={margin:0,listStyleType:"none",padding:0},t[""+f]={listStyleType:"none",marginBottom:"4px",padding:0,marginTop:0,marginLeft:0,marginRight:0},t[""+v]={width:"5px",height:"5px",display:"inline-block",marginRight:"8px"},t[""+b]={display:"inline-block",float:"right",marginLeft:"30px"},t),tooltipMarker:{symbol:function(P,A,O){return[["M",P,A],["m",-O,0],["a",O,O,0,1,0,O*2,0],["a",O,O,0,1,0,-O*2,0]]},stroke:"#fff",shadowBlur:10,shadowOffsetX:0,shadowOffSetY:0,shadowColor:"rgba(0,0,0,0.09)",lineWidth:2,radius:4},tooltipCrosshairsRect:{type:"rect",rectStyle:{fill:"#CCD6EC",opacity:.3}},tooltipCrosshairsLine:{lineStyle:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1}},shape:{point:{lineWidth:1,fill:u,radius:4},hollowPoint:{fill:"#fff",lineWidth:1,stroke:u,radius:3},interval:{lineWidth:0,fill:u,fillOpacity:.85},hollowInterval:{fill:"#fff",stroke:u,fillOpacity:0,lineWidth:2},area:{lineWidth:0,fill:u,fillOpacity:.6},polygon:{lineWidth:0,fill:u,fillOpacity:1},hollowPolygon:{fill:"#fff",stroke:u,fillOpacity:0,lineWidth:2},hollowArea:{fill:"#fff",stroke:u,fillOpacity:0,lineWidth:2},line:{stroke:u,lineWidth:2,fill:null},edge:{stroke:u,lineWidth:1,fill:null},schema:{stroke:u,lineWidth:1,fill:null}},guide:{line:{lineStyle:{stroke:"rgba(0, 0, 0, .65)",lineDash:[2,2],lineWidth:1},text:{position:"start",autoRotate:!0,style:{fill:"rgba(0, 0, 0, .45)",fontSize:12,textAlign:"start",fontFamily:i,textBaseline:"bottom"}}},text:{style:{fill:"rgba(0,0,0,.5)",fontSize:12,textBaseline:"middle",textAlign:"start",fontFamily:i}},region:{style:{lineWidth:0,fill:"#000",fillOpacity:.04}},html:{alignX:"middle",alignY:"middle"},dataRegion:{style:{region:{lineWidth:0,fill:"#000000",opacity:.04},text:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:"rgba(0, 0, 0, .65)"}}},dataMarker:{top:!0,style:{point:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2},line:{stroke:"#A3B1BF",lineWidth:1},text:{fill:"rgba(0, 0, 0, .65)",opacity:1,fontSize:12,textAlign:"start"}},display:{point:!0,line:!0,text:!0},lineLength:20,direction:"upward",autoAdjust:!0}},pixelRatio:null};E.exports=y},function(E,T,e){var t={default:e(131),dark:e(327)};E.exports=t},function(E,T,e){var t=e(1),u=e(330),s=e(333),c=e(329),r=e(105),h=function(i){this._cfg={zIndex:0,capture:!0,visible:!0,destroyed:!1},t.assign(this._cfg,this.getDefaultCfg(),i),this.initAttrs(this._cfg.attrs),this._cfg.attrs={},this.initTransform(),this.init()};h.CFG={id:null,zIndex:0,canvas:null,parent:null,capture:!0,context:null,visible:!0,destroyed:!1},t.augment(h,u,s,r,c,{init:function(){this.setSilent("animable",!0),this.setSilent("animating",!1)},getParent:function(){return this._cfg.parent},getDefaultCfg:function(){return{}},set:function(i,a){return i==="zIndex"&&this._beforeSetZIndex&&this._beforeSetZIndex(a),i==="loading"&&this._beforeSetLoading&&this._beforeSetLoading(a),this._cfg[i]=a,this},setSilent:function(i,a){this._cfg[i]=a},get:function(i){return this._cfg[i]},show:function(){return this._cfg.visible=!0,this},hide:function(){return this._cfg.visible=!1,this},remove:function(i,a){var o=this._cfg,l=o.parent,f=o.el;return l&&t.remove(l.get("children"),this),f&&(a?l&&l._cfg.tobeRemoved.push(f):f.parentNode.removeChild(f)),(i||i===void 0)&&this.destroy(),this},destroy:function(){var i=this.get("destroyed");i||(this._attrs=null,this.removeEvent(),this._cfg={destroyed:!0})},toFront:function(){var i=this._cfg,a=i.parent;if(!!a){var o=a._cfg.children,l=i.el,f=o.indexOf(this);o.splice(f,1),o.push(this),l&&(l.parentNode.removeChild(l),i.el=null)}},toBack:function(){var i=this._cfg,a=i.parent;if(!!a){var o=a._cfg.children,l=i.el,f=o.indexOf(this);if(o.splice(f,1),o.unshift(this),l){var v=l.parentNode;v.removeChild(l),v.insertBefore(l,v.firstChild)}}},_beforeSetZIndex:function(i){var a=this._cfg.parent;this._cfg.zIndex=i,t.isNil(a)||a.sort();var o=this._cfg.el;if(o){var l=a._cfg.children,f=l.indexOf(this),v=o.parentNode;v.removeChild(o),f===l.length-1?v.appendChild(o):v.insertBefore(o,v.childNodes[f])}return i},_setAttrs:function(i){return this.attr(i),i},setZIndex:function(i){return this._cfg.zIndex=i,this._beforeSetZIndex(i)},clone:function(){return t.clone(this)},getBBox:function(){}}),E.exports=h},function(E,T,e){var t=e(1),u=e(133),s=e(347),c={},r="_INDEX";function h(o){return function(l,f){var v=o(l,f);return v===0?l[r]-f[r]:v}}function n(o,l,f){for(var v,b=o.length-1;b>=0;b--){var g=o[b];if(g._cfg.visible&&g._cfg.capture&&(g.isGroup?v=g.getShape(l,f):g.isHit(l,f)&&(v=g)),v)break}return v}var i=function o(l){o.superclass.constructor.call(this,l),this.set("children",[]),this.set("tobeRemoved",[]),this._beforeRenderUI(),this._renderUI(),this._bindUI()};function a(o){if(!(o._cfg||o===i)){var l=o.superclass.constructor;l&&!l._cfg&&a(l),o._cfg={},t.merge(o._cfg,l._cfg),t.merge(o._cfg,o.CFG)}}t.extend(i,u),t.augment(i,{isGroup:!0,type:"group",canFill:!0,canStroke:!0,getDefaultCfg:function(){return a(this.constructor),t.merge({},this.constructor._cfg)},_beforeRenderUI:function(){},_renderUI:function(){},_bindUI:function(){},addShape:function(l,f){var v=this.get("canvas");f=f||{};var b=c[l];if(b||(b=t.upperFirst(l),c[l]=b),f.attrs&&v){var g=f.attrs;if(l==="text"){var m=v.get("fontFamily");m&&(g.fontFamily=g.fontFamily?g.fontFamily:m)}}f.canvas=v,f.type=l;var _=new s[b](f);return this.add(_),_},addGroup:function(l,f){var v=this.get("canvas"),b;if(f=t.merge({},f),t.isFunction(l))f?(f.canvas=v,f.parent=this,b=new l(f)):b=new l({canvas:v,parent:this}),this.add(b);else if(t.isObject(l))l.canvas=v,b=new i(l),this.add(b);else if(l===void 0)b=new i,this.add(b);else return!1;return b},renderBack:function(l,f){var v=this.get("backShape"),b=this.getBBox();return t.merge(f,{x:b.minX-l[3],y:b.minY-l[0],width:b.width+l[1]+l[3],height:b.height+l[0]+l[2]}),v?v.attr(f):v=this.addShape("rect",{zIndex:-1,attrs:f}),this.set("backShape",v),this.sort(),v},removeChild:function(l,f){if(arguments.length>=2)this.contain(l)&&l.remove(f);else{if(arguments.length===1)if(t.isBoolean(l))f=l;else return this.contain(l)&&l.remove(!0),this;arguments.length===0&&(f=!0),i.superclass.remove.call(this,f)}return this},add:function(l){var f=this,v=f.get("children");if(t.isArray(l))t.each(l,function(m){var _=m.get("parent");_&&_.removeChild(m,!1),f._setCfgProperty(m)}),f._cfg.children=v.concat(l);else{var b=l,g=b.get("parent");g&&g.removeChild(b,!1),f._setCfgProperty(b),v.push(b)}return f},_setCfgProperty:function(l){var f=this._cfg;l.set("parent",this),l.set("canvas",f.canvas),f.timeline&&l.set("timeline",f.timeline)},contain:function(l){var f=this.get("children");return f.indexOf(l)>-1},getChildByIndex:function(l){var f=this.get("children");return f[l]},getFirst:function(){return this.getChildByIndex(0)},getLast:function(){var l=this.get("children").length-1;return this.getChildByIndex(l)},getBBox:function(){var l=this,f=Infinity,v=-Infinity,b=Infinity,g=-Infinity,m=l.get("children");m.length>0?t.each(m,function(M){if(M.get("visible")){if(M.isGroup&&M.get("children").length===0)return;var x=M.getBBox();if(!x)return!0;var y=[x.minX,x.minY,1],S=[x.minX,x.maxY,1],P=[x.maxX,x.minY,1],A=[x.maxX,x.maxY,1];M.apply(y),M.apply(S),M.apply(P),M.apply(A);var O=Math.min(y[0],S[0],P[0],A[0]),L=Math.max(y[0],S[0],P[0],A[0]),H=Math.min(y[1],S[1],P[1],A[1]),F=Math.max(y[1],S[1],P[1],A[1]);O<f&&(f=O),L>v&&(v=L),H<b&&(b=H),F>g&&(g=F)}}):(f=0,v=0,b=0,g=0);var _={minX:f,minY:b,maxX:v,maxY:g};return _.x=_.minX,_.y=_.minY,_.width=_.maxX-_.minX,_.height=_.maxY-_.minY,_},getCount:function(){return this.get("children").length},sort:function(){var l=this.get("children");return t.each(l,function(f,v){return f[r]=v,f}),l.sort(h(function(f,v){return f.get("zIndex")-v.get("zIndex")})),this},findById:function(l){return this.find(function(f){return f.get("id")===l})},find:function(l){if(t.isString(l))return this.findById(l);var f=this.get("children"),v=null;return t.each(f,function(b){if(l(b)?v=b:b.find&&(v=b.find(l)),v)return!1}),v},findAll:function(l){var f=this.get("children"),v=[],b=[];return t.each(f,function(g){l(g)&&v.push(g),g.findAllBy&&(b=g.findAllBy(l),v=v.concat(b))}),v},findBy:function(l){var f=this.get("children"),v=null;return t.each(f,function(b){if(l(b)?v=b:b.findBy&&(v=b.findBy(l)),v)return!1}),v},findAllBy:function(l){var f=this.get("children"),v=[],b=[];return t.each(f,function(g){l(g)&&v.push(g),g.findAllBy&&(b=g.findAllBy(l),v=v.concat(b))}),v},getShape:function(l,f){var v=this,b=v._attrs.clip,g=v._cfg.children,m;if(b){var _=[l,f,1];b.invert(_,v.get("canvas")),b.isPointInPath(_[0],_[1])&&(m=n(g,l,f))}else m=n(g,l,f);return m},clearTotalMatrix:function(){var l=this.get("totalMatrix");if(l){this.setSilent("totalMatrix",null);for(var f=this._cfg.children,v=0;v<f.length;v++){var b=f[v];b.clearTotalMatrix()}}},clear:function(l){for(var f=this._cfg.children,v=f.length-1;v>=0;v--)f[v].remove(!0,l);return this._cfg.children=[],this},destroy:function(){this.get("destroyed")||(this.clear(),i.superclass.destroy.call(this))},clone:function(){var l=this,f=l._cfg.children,v=new i;return t.each(f,function(b){v.add(b.clone())}),v}}),E.exports=i},function(E,T,e){var t=e(1),u=function(c,r,h,n){this.type=c,this.target=null,this.currentTarget=null,this.bubbles=h,this.cancelable=n,this.timeStamp=new Date().getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.removed=!1,this.event=r};t.augment(u,{preventDefault:function(){this.defaultPrevented=this.cancelable&&!0},stopPropagation:function(){this.propagationStopped=!0},remove:function(){this.remove=!0},clone:function(){return t.clone(this)},toString:function(){return"[Event (type="+this.type+")]"}}),E.exports=u},function(E,T,e){var t=e(1),u=e(7),s=e(47),c=e(49);function r(i,a,o){return i+a*Math.cos(o)}function h(i,a,o){return i+a*Math.sin(o)}var n=function i(a){i.superclass.constructor.call(this,a)};n.ATTRS={x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1},t.extend(n,u),t.augment(n,{canStroke:!0,type:"arc",getDefaultAttrs:function(){return{x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var a=this._attrs,o=a.x,l=a.y,f=a.r,v=a.startAngle,b=a.endAngle,g=a.clockwise,m=this.getHitLineWidth(),_=m/2,M=s.box(o,l,f,v,b,g);return M.minX-=_,M.minY-=_,M.maxX+=_,M.maxY+=_,M},getStartTangent:function(){var a=this._attrs,o=a.x,l=a.y,f=a.startAngle,v=a.r,b=a.clockwise,g=Math.PI/180;b&&(g*=-1);var m=[],_=r(o,v,f+g),M=h(l,v,f+g),x=r(o,v,f),y=h(l,v,f);return m.push([_,M]),m.push([x,y]),m},getEndTangent:function(){var a=this._attrs,o=a.x,l=a.y,f=a.endAngle,v=a.r,b=a.clockwise,g=Math.PI/180,m=[];b&&(g*=-1);var _=r(o,v,f+g),M=h(l,v,f+g),x=r(o,v,f),y=h(l,v,f);return m.push([x,y]),m.push([_,M]),m},createPath:function(a){var o=this._attrs,l=o.x,f=o.y,v=o.r,b=o.startAngle,g=o.endAngle,m=o.clockwise;a=a||self.get("context"),a.beginPath(),a.arc(l,f,v,b,g,m)},afterPath:function(a){var o=this._attrs;if(a=a||this.get("context"),o.startArrow){var l=this.getStartTangent();c.addStartArrow(a,o,l[0][0],l[0][1],l[1][0],l[1][1])}if(o.endArrow){var f=this.getEndTangent();c.addEndArrow(a,o,f[0][0],f[0][1],f[1][0],f[1][1])}}}),E.exports=n},function(E,T,e){var t=e(1),u=e(7),s=function c(r){c.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,r:0,lineWidth:1},t.extend(s,u),t.augment(s,{canFill:!0,canStroke:!0,type:"circle",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var r=this._attrs,h=r.x,n=r.y,i=r.r,a=this.getHitLineWidth(),o=a/2+i;return{minX:h-o,minY:n-o,maxX:h+o,maxY:n+o}},createPath:function(r){var h=this._attrs,n=h.x,i=h.y,a=h.r;r.beginPath(),r.arc(n,i,a,0,Math.PI*2,!1),r.closePath()}}),E.exports=s},function(E,T,e){var t=e(1),u=e(7),s=function c(r){c.superclass.constructor.call(this,r)};t.extend(s,u),t.augment(s,{canFill:!0,canStroke:!0,type:"dom",calculateBox:function(){var r=this,h=r._attrs,n=h.x,i=h.y,a=h.width,o=h.height,l=this.getHitLineWidth(),f=l/2;return{minX:n-f,minY:i-f,maxX:n+a+f,maxY:i+o+f}}}),E.exports=s},function(E,T,e){var t=e(1),u=e(7),s=function c(r){c.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,rx:1,ry:1,lineWidth:1},t.extend(s,u),t.augment(s,{canFill:!0,canStroke:!0,type:"ellipse",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var r=this._attrs,h=r.x,n=r.y,i=r.rx,a=r.ry,o=this.getHitLineWidth(),l=i+o/2,f=a+o/2;return{minX:h-l,minY:n-f,maxX:h+l,maxY:n+f}},createPath:function(r){var h=this._attrs,n=h.x,i=h.y,a=h.rx,o=h.ry;r=r||self.get("context");var l=a>o?a:o,f=a>o?1:a/o,v=a>o?o/a:1,b=[1,0,0,0,1,0,0,0,1];t.mat3.scale(b,b,[f,v]),t.mat3.translate(b,b,[n,i]),r.beginPath(),r.save(),r.transform(b[0],b[1],b[3],b[4],b[6],b[7]),r.arc(0,0,l,0,Math.PI*2),r.restore(),r.closePath()}}),E.exports=s},function(E,T,e){var t=e(1),u=e(7),s=e(47),c=function r(h){r.superclass.constructor.call(this,h)};c.ATTRS={x:0,y:0,rs:0,re:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1},t.extend(c,u),t.augment(c,{canFill:!0,canStroke:!0,type:"fan",getDefaultAttrs:function(){return{clockwise:!1,lineWidth:1,rs:0,re:0}},calculateBox:function(){var h=this,n=h._attrs,i=n.x,a=n.y,o=n.rs,l=n.re,f=n.startAngle,v=n.endAngle,b=n.clockwise,g=this.getHitLineWidth(),m=s.box(i,a,o,f,v,b),_=s.box(i,a,l,f,v,b),M=Math.min(m.minX,_.minX),x=Math.min(m.minY,_.minY),y=Math.max(m.maxX,_.maxX),S=Math.max(m.maxY,_.maxY),P=g/2;return{minX:M-P,minY:x-P,maxX:y+P,maxY:S+P}},createPath:function(h){var n=this._attrs,i=n.x,a=n.y,o=n.rs,l=n.re,f=n.startAngle,v=n.endAngle,b=n.clockwise,g={x:Math.cos(f)*o+i,y:Math.sin(f)*o+a},m={x:Math.cos(f)*l+i,y:Math.sin(f)*l+a},_={x:Math.cos(v)*o+i,y:Math.sin(v)*o+a};h=h||self.get("context"),h.beginPath(),h.moveTo(g.x,g.y),h.lineTo(m.x,m.y),h.arc(i,a,l,f,v,b),h.lineTo(_.x,_.y),h.arc(i,a,o,v,f,!b),h.closePath()}}),E.exports=c},function(E,T,e){var t=e(1),u=e(7),s=function c(r){c.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,img:void 0,width:0,height:0,sx:null,sy:null,swidth:null,sheight:null},t.extend(s,u),t.augment(s,{type:"image",isHitBox:function(){return!1},calculateBox:function(){var r=this._attrs;(!this._cfg.attrs||this._cfg.attrs.img!==r.img)&&this._setAttrImg();var h=r.x,n=r.y,i=r.width,a=r.height;return{minX:h,minY:n,maxX:h+i,maxY:n+a}},_beforeSetLoading:function(r){var h=this.get("canvas");return r===!1&&this.get("toDraw")===!0&&(this._cfg.loading=!1,h.draw()),r},_setAttrImg:function(){var r=this,h=r._attrs,n=h.img;if(t.isString(n)){var i=new Image;i.onload=function(){if(r.get("destroyed"))return!1;r.attr("imgSrc",n),r.attr("img",i);var a=r.get("callback");a&&a.call(r),r.set("loading",!1)},i.src=n,i.crossOrigin="Anonymous",r.set("loading",!0)}else return n instanceof Image?(h.width||r.attr("width",n.width),h.height||r.attr("height",n.height),n):n instanceof HTMLElement&&t.isString(n.nodeName)&&n.nodeName.toUpperCase()==="CANVAS"?(h.width||r.attr("width",Number(n.getAttribute("width"))),h.height||r.attr("height",Number(n.getAttribute("height"))),n):n instanceof ImageData?(h.width||r.attr("width",n.width),h.height||r.attr("height",n.height),n):null},drawInner:function(r){if(this._cfg.hasUpdate&&this._setAttrImg(),this.get("loading")){this.set("toDraw",!0);return}this._drawImage(r),this._cfg.hasUpdate=!1},_drawImage:function(r){var h=this._attrs,n=h.x,i=h.y,a=h.img,o=h.width,l=h.height,f=h.sx,v=h.sy,b=h.swidth,g=h.sheight;this.set("toDraw",!1);var m=a;if(m instanceof ImageData&&(m=new Image,m.src=a),m instanceof Image||m instanceof HTMLElement&&t.isString(m.nodeName)&&m.nodeName.toUpperCase()==="CANVAS"){if(t.isNil(f)||t.isNil(v)||t.isNil(b)||t.isNil(g)){r.drawImage(m,n,i,o,l);return}if(!t.isNil(f)&&!t.isNil(v)&&!t.isNil(b)&&!t.isNil(g)){r.drawImage(m,f,v,b,g,n,i,o,l);return}}}}),E.exports=s},function(E,T,e){var t=e(1),u=e(7),s=e(49),c=e(48),r=function h(n){h.superclass.constructor.call(this,n)};r.ATTRS={x1:0,y1:0,x2:0,y2:0,lineWidth:1,startArrow:!1,endArrow:!1},t.extend(r,u),t.augment(r,{canStroke:!0,type:"line",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var n=this._attrs,i=n.x1,a=n.y1,o=n.x2,l=n.y2,f=this.getHitLineWidth();return c.box(i,a,o,l,f)},createPath:function(n){var i=this._attrs,a=i.x1,o=i.y1,l=i.x2,f=i.y2;n=n||self.get("context"),n.beginPath(),n.moveTo(a,o),n.lineTo(l,f)},afterPath:function(n){var i=this._attrs,a=i.x1,o=i.y1,l=i.x2,f=i.y2;n=n||this.get("context"),i.startArrow&&s.addStartArrow(n,i,l,f,a,o),i.endArrow&&s.addEndArrow(n,i,a,o,l,f)},getPoint:function(n){var i=this._attrs;return{x:c.at(i.x1,i.x2,n),y:c.at(i.y1,i.y2,n)}}}),E.exports=r},function(E,T){E.exports={xAt:function(t,u,s,c,r){return u*Math.cos(t)*Math.cos(r)-s*Math.sin(t)*Math.sin(r)+c},yAt:function(t,u,s,c,r){return u*Math.sin(t)*Math.cos(r)+s*Math.cos(t)*Math.sin(r)+c},xExtrema:function(t,u,s){return Math.atan(-s/u*Math.tan(t))},yExtrema:function(t,u,s){return Math.atan(s/(u*Math.tan(t)))}}},function(E,T,e){var t=e(1),u=t.vec2;function s(h,n,i,a){var o=1-a;return o*(o*h+2*a*n)+a*a*i}function c(h,n,i,a,o,l,f,v,b){var g,m=.005,_=Infinity,M,x,y,S,P,A,O=1e-4,L=[f,v];for(S=0;S<1;S+=.05)x=[s(h,i,o,S),s(n,a,l,S)],M=u.squaredDistance(L,x),M<_&&(g=S,_=M);for(_=Infinity,A=0;A<32&&!(m<O);A++){var H=g-m,F=g+m;x=[s(h,i,o,H),s(n,a,l,H)],M=u.squaredDistance(L,x),H>=0&&M<_?(g=H,_=M):(y=[s(h,i,o,F),s(n,a,l,F)],P=u.squaredDistance(L,y),F<=1&&P<_?(g=F,_=P):m*=.5)}return b&&(b.x=s(h,i,o,g),b.y=s(n,a,l,g)),Math.sqrt(_)}function r(h,n,i){var a=h+i-2*n;if(t.isNumberEqual(a,0))return[.5];var o=(h-n)/a;return o<=1&&o>=0?[o]:[]}E.exports={at:s,projectPoint:function(n,i,a,o,l,f,v,b){var g={};return c(n,i,a,o,l,f,v,b,g),g},pointDistance:c,extrema:r}},function(E,T,e){var t=e(1),u=e(7),s=e(50),c=e(37),r=e(49),h=e(77),n=e(75),i=function a(o){a.superclass.constructor.call(this,o)};i.ATTRS={path:null,lineWidth:1,startArrow:!1,endArrow:!1},t.extend(i,u),t.augment(i,{canFill:!0,canStroke:!0,type:"path",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},_afterSetAttrPath:function(o){var l=this;if(t.isNil(o)){l.setSilent("segments",null),l.setSilent("box",void 0);return}var f=c.parsePath(o),v,b=[];if(!(!t.isArray(f)||f.length===0||f[0][0]!=="M"&&f[0][0]!=="m")){for(var g=f.length,m=0;m<f.length;m++){var _=f[m];v=new s(_,v,m===g-1),b.push(v)}l.setSilent("segments",b),l.setSilent("tCache",null),l.setSilent("box",null)}},calculateBox:function(){var o=this,l=o.get("segments");if(!l)return null;var f=this.getHitLineWidth(),v=Infinity,b=-Infinity,g=Infinity,m=-Infinity;return t.each(l,function(_){_.getBBox(f);var M=_.box;M&&(M.minX<v&&(v=M.minX),M.maxX>b&&(b=M.maxX),M.minY<g&&(g=M.minY),M.maxY>m&&(m=M.maxY))}),v===Infinity||g===Infinity?{minX:0,minY:0,maxX:0,maxY:0}:{minX:v,minY:g,maxX:b,maxY:m}},_setTcache:function(){var o=0,l=0,f=[],v,b,g,m,_=this._cfg.curve;!_||(t.each(_,function(M,x){g=_[x+1],m=M.length,g&&(o+=n.len(M[m-2],M[m-1],g[1],g[2],g[3],g[4],g[5],g[6]))}),t.each(_,function(M,x){g=_[x+1],m=M.length,g&&(v=[],v[0]=l/o,b=n.len(M[m-2],M[m-1],g[1],g[2],g[3],g[4],g[5],g[6]),l+=b,v[1]=l/o,f.push(v))}),this._cfg.tCache=f)},_calculateCurve:function(){var o=this,l=o._attrs,f=l.path;this._cfg.curve=h.pathTocurve(f)},getStartTangent:function(){var o=this.get("segments"),l,f,v,b;if(o.length>1)if(l=o[0].endPoint,f=o[1].endPoint,v=o[1].startTangent,b=[],t.isFunction(v)){var g=v();b.push([l.x-g[0],l.y-g[1]]),b.push([l.x,l.y])}else b.push([f.x,f.y]),b.push([l.x,l.y]);return b},getEndTangent:function(){var o=this.get("segments"),l=o.length,f,v,b,g;if(l>1)if(f=o[l-2].endPoint,v=o[l-1].endPoint,b=o[l-1].endTangent,g=[],t.isFunction(b)){var m=b();g.push([v.x-m[0],v.y-m[1]]),g.push([v.x,v.y])}else g.push([f.x,f.y]),g.push([v.x,v.y]);return g},getPoint:function(o){var l=this._cfg.tCache,f,v;l||(this._calculateCurve(),this._setTcache(),l=this._cfg.tCache);var b=this._cfg.curve;if(!l)return b?{x:b[0][1],y:b[0][2]}:null;t.each(l,function(M,x){o>=M[0]&&o<=M[1]&&(f=(o-M[0])/(M[1]-M[0]),v=x)});var g=b[v];if(t.isNil(g)||t.isNil(v))return null;var m=g.length,_=b[v+1];return{x:n.at(g[m-2],_[1],_[3],_[5],1-f),y:n.at(g[m-1],_[2],_[4],_[6],1-f)}},createPath:function(o){var l=this,f=l.get("segments");if(!!t.isArray(f)){o=o||l.get("context"),o.beginPath();for(var v=f.length,b=0;b<v;b++)f[b].draw(o)}},afterPath:function(o){var l=this,f=l._attrs,v=l.get("segments"),b=f.path;if(o=o||l.get("context"),!!t.isArray(v)&&v.length!==1&&!(!f.startArrow&&!f.endArrow)&&!(b[b.length-1]==="z"||b[b.length-1]==="Z"||f.fill)){var g=l.getStartTangent();r.addStartArrow(o,f,g[0][0],g[0][1],g[1][0],g[1][1]);var m=l.getEndTangent();r.addEndArrow(o,f,m[0][0],m[0][1],m[1][0],m[1][1])}}}),E.exports=i},function(E,T,e){var t=e(1),u=e(7),s=function c(r){c.superclass.constructor.call(this,r)};s.ATTRS={points:null,lineWidth:1},t.extend(s,u),t.augment(s,{canFill:!0,canStroke:!0,type:"polygon",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var r=this,h=r._attrs,n=h.points,i=this.getHitLineWidth();if(!n||n.length===0)return null;var a=Infinity,o=Infinity,l=-Infinity,f=-Infinity;t.each(n,function(b){var g=b[0],m=b[1];g<a&&(a=g),g>l&&(l=g),m<o&&(o=m),m>f&&(f=m)});var v=i/2;return{minX:a-v,minY:o-v,maxX:l+v,maxY:f+v}},createPath:function(r){var h=this,n=h._attrs,i=n.points;i.length<2||(r=r||h.get("context"),r.beginPath(),t.each(i,function(a,o){o===0?r.moveTo(a[0],a[1]):r.lineTo(a[0],a[1])}),r.closePath())}}),E.exports=s},function(E,T,e){var t=e(1),u=e(7),s=e(49),c=e(48),r=function h(n){h.superclass.constructor.call(this,n)};r.ATTRS={points:null,lineWidth:1,startArrow:!1,endArrow:!1,tCache:null},t.extend(r,u),t.augment(r,{canStroke:!0,type:"polyline",tCache:null,getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var n=this,i=n._attrs,a=this.getHitLineWidth(),o=i.points;if(!o||o.length===0)return null;var l=Infinity,f=Infinity,v=-Infinity,b=-Infinity;t.each(o,function(m){var _=m[0],M=m[1];_<l&&(l=_),_>v&&(v=_),M<f&&(f=M),M>b&&(b=M)});var g=a/2;return{minX:l-g,minY:f-g,maxX:v+g,maxY:b+g}},_setTcache:function(){var n=this,i=n._attrs,a=i.points,o=0,l=0,f=[],v,b;!a||a.length===0||(t.each(a,function(g,m){a[m+1]&&(o+=c.len(g[0],g[1],a[m+1][0],a[m+1][1]))}),!(o<=0)&&(t.each(a,function(g,m){a[m+1]&&(v=[],v[0]=l/o,b=c.len(g[0],g[1],a[m+1][0],a[m+1][1]),l+=b,v[1]=l/o,f.push(v))}),this.tCache=f))},createPath:function(n){var i=this,a=i._attrs,o=a.points,l,f;if(!(o.length<2)){for(n=n||i.get("context"),n.beginPath(),n.moveTo(o[0][0],o[0][1]),f=1,l=o.length-1;f<l;f++)n.lineTo(o[f][0],o[f][1]);n.lineTo(o[l][0],o[l][1])}},getStartTangent:function(){var n=this.__attrs.points,i=[];return i.push([n[1][0],n[1][1]]),i.push([n[0][0],n[0][1]]),i},getEndTangent:function(){var n=this.__attrs.points,i=n.length-1,a=[];return a.push([n[i-1][0],n[i-1][1]]),a.push([n[i][0],n[i][1]]),a},afterPath:function(n){var i=this,a=i._attrs,o=a.points,l=o.length-1;n=n||i.get("context"),a.startArrow&&s.addStartArrow(n,a,o[1][0],o[1][1],o[0][0],o[0][1]),a.endArrow&&s.addEndArrow(n,a,o[l-1][0],o[l-1][1],o[l][0],o[l][1])},getPoint:function(n){var i=this._attrs,a=i.points,o=this.tCache,l,f;return o||(this._setTcache(),o=this.tCache),t.each(o,function(v,b){n>=v[0]&&n<=v[1]&&(l=(n-v[0])/(v[1]-v[0]),f=b)}),{x:c.at(a[f][0],a[f+1][0],l),y:c.at(a[f][1],a[f+1][1],l)}}}),E.exports=r},function(E,T,e){var t=e(1),u=e(37),s=u.parseRadius,c=e(7),r=function h(n){h.superclass.constructor.call(this,n)};r.ATTRS={x:0,y:0,width:0,height:0,radius:0,lineWidth:1},t.extend(r,c),t.augment(r,{canFill:!0,canStroke:!0,type:"rect",getDefaultAttrs:function(){return{lineWidth:1,radius:0}},calculateBox:function(){var n=this,i=n._attrs,a=i.x,o=i.y,l=i.width,f=i.height,v=this.getHitLineWidth(),b=v/2;return{minX:a-b,minY:o-b,maxX:a+l+b,maxY:o+f+b}},createPath:function(n){var i=this,a=i._attrs,o=a.x,l=a.y,f=a.width,v=a.height,b=a.radius;if(n=n||i.get("context"),n.beginPath(),b===0)n.rect(o,l,f,v);else{var g=s(b);n.moveTo(o+g.r1,l),n.lineTo(o+f-g.r2,l),g.r2!==0&&n.arc(o+f-g.r2,l+g.r2,g.r2,-Math.PI/2,0),n.lineTo(o+f,l+v-g.r3),g.r3!==0&&n.arc(o+f-g.r3,l+v-g.r3,g.r3,0,Math.PI/2),n.lineTo(o+g.r4,l+v),g.r4!==0&&n.arc(o+g.r4,l+v-g.r4,g.r4,Math.PI/2,Math.PI),n.lineTo(o,l+g.r1),g.r1!==0&&n.arc(o+g.r1,l+g.r1,g.r1,Math.PI,Math.PI*1.5),n.closePath()}}}),E.exports=r},function(E,T,e){var t=e(1),u=e(7),s=function c(r){c.superclass.constructor.call(this,r)};s.ATTRS={x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom",lineHeight:null,textArr:null},t.extend(s,u),t.augment(s,{canFill:!0,canStroke:!0,type:"text",getDefaultAttrs:function(){return{lineWidth:1,lineCount:1,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"}},initTransform:function(){var r=this._attrs.fontSize;r&&+r<12&&this.transform([["t",-1*this._attrs.x,-1*this._attrs.y],["s",+r/12,+r/12],["t",this._attrs.x,this._attrs.y]])},_assembleFont:function(){var r=this._attrs,h=r.fontSize,n=r.fontFamily,i=r.fontWeight,a=r.fontStyle,o=r.fontVariant;r.font=[a,o,i,h+"px",n].join(" ")},_setAttrText:function(){var r=this._attrs,h=r.text,n=null;if(t.isString(h)&&h.indexOf(`
`)!==-1){n=h.split(`
`);var i=n.length;r.lineCount=i}r.textArr=n},_getTextHeight:function(){var r=this._attrs,h=r.lineCount,n=r.fontSize*1;if(h>1){var i=this._getSpaceingY();return n*h+i*(h-1)}return n},isHitBox:function(){return!1},calculateBox:function(){var r=this,h=r._attrs,n=this._cfg;(!n.attrs||n.hasUpdate)&&(this._assembleFont(),this._setAttrText()),h.textArr||this._setAttrText();var i=h.x,a=h.y,o=r.measureText();if(!o)return{minX:i,minY:a,maxX:i,maxY:a};var l=r._getTextHeight(),f=h.textAlign,v=h.textBaseline,b=r.getHitLineWidth(),g={x:i,y:a-l};f&&(f==="end"||f==="right"?g.x-=o:f==="center"&&(g.x-=o/2)),v&&(v==="top"?g.y+=l:v==="middle"&&(g.y+=l/2)),this.set("startPoint",g);var m=b/2;return{minX:g.x-m,minY:g.y-m,maxX:g.x+o+m,maxY:g.y+l+m}},_getSpaceingY:function(){var r=this._attrs,h=r.lineHeight,n=r.fontSize*1;return h?h-n:n*.14},drawInner:function(r){var h=this,n=h._attrs,i=this._cfg;(!i.attrs||i.hasUpdate)&&(this._assembleFont(),this._setAttrText()),r.font=n.font;var a=n.text;if(!!a){var o=n.textArr,l=n.x,f=n.y;if(r.beginPath(),h.hasStroke()){var v=n.strokeOpacity;!t.isNil(v)&&v!==1&&(r.globalAlpha=v),o?h._drawTextArr(r,!1):r.strokeText(a,l,f),r.globalAlpha=1}if(h.hasFill()){var b=n.fillOpacity;!t.isNil(b)&&b!==1&&(r.globalAlpha=b),o?h._drawTextArr(r,!0):r.fillText(a,l,f)}i.hasUpdate=!1}},_drawTextArr:function(r,h){var n=this._attrs.textArr,i=this._attrs.textBaseline,a=this._attrs.fontSize*1,o=this._getSpaceingY(),l=this._attrs.x,f=this._attrs.y,v=this.getBBox(),b=v.maxY-v.minY,g;t.each(n,function(m,_){g=f+_*(o+a)-b+a,i==="middle"&&(g+=b-a-(b-a)/2),i==="top"&&(g+=b-a),h?r.fillText(m,l,g):r.strokeText(m,l,g)})},measureText:function(){var r=this,h=r._attrs,n=h.text,i=h.font,a=h.textArr,o,l=0;if(!t.isNil(n)){var f=document.createElement("canvas").getContext("2d");return f.save(),f.font=i,a?t.each(a,function(v){o=f.measureText(v).width,l<o&&(l=o),f.restore()}):(l=f.measureText(n).width,f.restore()),l}}}),E.exports=s},function(E,T,e){E.exports={isFunction:e(14),isObject:e(39),isBoolean:e(191),isNil:e(6),isString:e(15),isArray:e(4),isNumber:e(11),isEmpty:e(167),uniqueId:e(194),clone:e(80),deepMix:e(81),assign:e(10),merge:e(81),upperFirst:e(189),each:e(2),isEqual:e(83),toArray:e(57),extend:e(162),augment:e(158),remove:e(156),isNumberEqual:e(55),toRadian:e(172),toDegree:e(170),mod:e(169),clamp:e(84),createDom:e(159),modifyCSS:e(160),requestAnimationFrame:e(161),getRatio:function(){return window.devicePixelRatio?window.devicePixelRatio:2},mat3:e(85),vec2:e(174),vec3:e(175),transform:e(173)}},function(E,T,e){var t=e(2),u=8,s=4;function c(h){var n=[];return t(h,function(i){n=n.concat(i)}),n}function r(h,n){var i;for(i=n;i>0&&h%i!=0;i--);if(i===1)for(i=n;i>0&&(h-1)%i!=0;i--);return i}E.exports=function(h){var n={},i=[],a=h.isRounding,o=c(h.data),l=o.length,f=h.maxCount||u,v;if(a?(v=r(l-1,f-1)+1,v===2?v=f:v<f-s&&(v=f-s)):v=f,!a&&l<=v+v/2)i=[].concat(o);else{for(var b=parseInt(l/(v-1),10),g=o.map(function(x,y){return y%b==0?o.slice(y,y+b):null}).filter(function(x){return x}),m=1,_=g.length;m<_&&(a?m*b<l-b:m<v-1);m++)i.push(g[m][0]);if(o.length){i.unshift(o[0]);var M=o[l-1];i.indexOf(M)===-1&&i.push(M)}}return n.categories=o,n.ticks=i,n}},function(E,T){var e=12;function t(r){var h=1;if(r===Infinity||r===-Infinity)throw new Error("Not support Infinity!");if(r<1){for(var n=0;r<1;)h=h/10,r=r*10,n++;h.toString().length>e&&(h=parseFloat(h.toFixed(n)))}else for(;r>10;)h=h*10,r=r/10;return h}function u(r,h){var n=r.length;if(n===0)return NaN;var i=r[0];if(h<r[0])return NaN;if(h>=r[n-1])return r[n-1];for(var a=1;a<r.length&&!(h<r[a]);a++)i=r[a];return i}function s(r,h){var n=r.length;if(n===0)return NaN;var i;if(h>r[n-1])return NaN;if(h<r[0])return r[0];for(var a=1;a<r.length;a++)if(h<=r[a]){i=r[a];break}return i}var c={snapFactorTo:function(h,n,i){if(isNaN(h))return NaN;var a=1;if(h!==0){h<0&&(a=-1),h=h*a;var o=t(h);a=a*o,h=h/o}i==="floor"?h=c.snapFloor(n,h):i==="ceil"?h=c.snapCeiling(n,h):h=c.snapTo(n,h);var l=parseFloat((h*a).toPrecision(e));if(Math.abs(a)<1&&l.toString().length>e){var f=parseInt(1/a),v=a>0?1:-1;l=h/f*v}return l},snapMultiple:function(h,n,i){var a;return i==="ceil"?a=Math.ceil(h/n):i==="floor"?a=Math.floor(h/n):a=Math.round(h/n),a*n},snapTo:function(h,n){var i=u(h,n),a=s(h,n);if(isNaN(i)||isNaN(a)){if(h[0]>=n)return h[0];var o=h[h.length-1];if(o<=n)return o}return Math.abs(n-i)<Math.abs(a-n)?i:a},snapFloor:function(h,n){return u(h,n)},snapCeiling:function(h,n){return s(h,n)},fixedBase:function(h,n){var i=n.toString(),a=i.indexOf("."),o=i.indexOf("e-");if(a<0&&o<0)return Math.round(h);var l=o>=0?parseInt(i.substr(o+2),10):i.substr(a+1).length;return l>20&&(l=20),parseFloat(h.toFixed(l))}};E.exports=c},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var u=e(26),s=e(151),c=e(2),r=e(11),h=e(15),n=function(i){t(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o._initDefaultCfg=function(){i.prototype._initDefaultCfg.call(this),this.type="cat",this.isCategory=!0,this.isRounding=!0},o.init=function(){var f=this,v=f.values,b=f.tickCount;if(c(v,function(_,M){v[M]=_.toString()}),!f.ticks){var g=v;if(b){var m=s({maxCount:b,data:v,isRounding:f.isRounding});g=m.ticks}this.ticks=g}},o.getText=function(f){return this.values.indexOf(f)===-1&&r(f)&&(f=this.values[Math.round(f)]),i.prototype.getText.call(this,f)},o.translate=function(f){var v=this.values.indexOf(f);return v===-1&&r(f)?v=f:v===-1&&(v=NaN),v},o.scale=function(f){var v=this.rangeMin(),b=this.rangeMax(),g;return(h(f)||this.values.indexOf(f)!==-1)&&(f=this.translate(f)),this.values.length>1?g=f/(this.values.length-1):g=f,v+g*(b-v)},o.invert=function(f){if(h(f))return f;var v=this.rangeMin(),b=this.rangeMax();f<v&&(f=v),f>b&&(f=b);var g=(f-v)/(b-v),m=Math.round(g*(this.values.length-1))%this.values.length;return m=m||0,this.values[m]},a}(u);u.Cat=n,E.exports=n},function(E,T,e){var t=e(187),u=e(26);u.Linear=e(51),u.Identity=e(353),u.Cat=e(153),u.Time=e(357),u.TimeCat=e(356),u.Log=e(354),u.Pow=e(355);var s=function(n){if(u.hasOwnProperty(n)){var i=t(n);u[i]=function(a){return new u[n](a)}}};for(var c in u)s(c);var r=["cat","timeCat"];u.isCategory=function(h){return r.indexOf(h)>=0},E.exports=u},function(E,T,e){var t=e(21),u=Array.prototype.splice,s=function(r,h){if(!t(r))return[];for(var n=r?h.length:0,i=n-1;n--;){var a=void 0,o=h[n];(n===i||o!==a)&&(a=o,u.call(r,o,1))}return r};E.exports=s},function(E,T){var e=Array.prototype,t=e.splice,u=e.indexOf,s=e.slice,c=function(h){for(var n=s.call(arguments,1),i=0;i<n.length;i++)for(var a=n[i],o=-1;(o=u.call(h,a))>-1;)t.call(h,o,1);return h};E.exports=c},function(E,T,e){var t=e(2),u=e(53),s=function(r){var h=[];return t(r,function(n){u(h,n)||h.push(n)}),h};E.exports=s},function(E,T,e){var t=e(14),u=e(57),s=e(10),c=function(h){for(var n=u(arguments),i=1;i<n.length;i++){var a=n[i];t(a)&&(a=a.prototype),s(h.prototype,a)}};E.exports=c},function(E,T){var e=document.createElement("table"),t=document.createElement("tr"),u=/^\s*<(\w+|!)[^>]*>/,s={tr:document.createElement("tbody"),tbody:e,thead:e,tfoot:e,td:t,th:t,"*":document.createElement("div")};E.exports=function(r){var h=u.test(r)&&RegExp.$1;h in s||(h="*");var n=s[h];r=r.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+r;var i=n.childNodes[0];return n.removeChild(i),i}},function(E,T){E.exports=function(t,u){if(t)for(var s in u)u.hasOwnProperty(s)&&(t.style[s]=u[s]);return t}},function(E,T){E.exports=function(t){var u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(s){return setTimeout(s,16)};return u(t)}},function(E,T,e){var t=e(14),u=e(10),s=function(r,h,n,i){t(h)||(n=h,h=r,r=function(){});var a=Object.create?function(l,f){return Object.create(l,{constructor:{value:f}})}:function(l,f){function v(){}v.prototype=l;var b=new v;return b.constructor=f,b},o=a(h.prototype,r);return r.prototype=u(o,r.prototype),r.superclass=a(h.prototype,h),u(o,n),u(r,i),r};E.exports=s},function(E,T,e){var t=e(2),u=e(4),s=Object.prototype.hasOwnProperty,c=function(h,n){if(!n||!u(h))return h;var i={},a=null;return t(h,function(o){a=n(o),s.call(i,a)?i[a].push(o):i[a]=[o]}),i};E.exports=c},function(E,T,e){var t=e(14),u=e(4),s=e(163),c=function(h,n){if(!n)return{0:h};if(!t(n)){var i=u(n)?n:n.replace(/\s+/g,"").split("*");n=function(l){for(var f="_",v=0,b=i.length;v<b;v++)f+=l[i[v]]&&l[i[v]].toString();return f}}var a=s(h,n);return a};E.exports=c},function(E,T,e){var t=e(164),u=function(c,r){if(!r)return[c];var h=t(c,r),n=[];for(var i in h)n.push(h[i]);return n};E.exports=u},function(E,T,e){var t=e(2),u=e(10),s=e(378),c=e(364),r=e(380),h=e(382),n=e(390),i=e(56),a=e(401),o=e(405),l=e(409),f=e(414),v={DOMUtil:s,DomUtil:s,MatrixUtil:i,PathUtil:o,arrayUtil:c,domUtil:s,eventUtil:r,formatUtil:h,mathUtil:n,matrixUtil:i,objectUtil:a,stringUtil:l,pathUtil:o,typeUtil:f,augment:e(158),clone:e(80),debounce:e(369),deepMix:e(81),each:t,extend:e(162),filter:e(82),group:e(165),groupBy:e(163),groupToMap:e(164),indexOf:e(386),isEmpty:e(167),isEqual:e(83),isEqualWith:e(387),map:e(388),mix:u,pick:e(408),throttle:e(413),toArray:e(57),toString:e(38),uniqueId:e(194)};t([s,c,r,h,n,i,a,o,l,f],function(b){u(v,b)}),E.exports=v},function(E,T,e){var t=e(6),u=e(21),s=e(190),c=e(193),r=Object.prototype.hasOwnProperty;function h(n){if(t(n))return!0;if(u(n))return!n.length;var i=s(n);if(i==="Map"||i==="Set")return!n.size;if(c(n))return!Object.keys(n).length;for(var a in n)if(r.call(n,a))return!1;return!0}E.exports=h},function(E,T,e){var t=e(4),u=e(14),s=e(2),c=function(h,n){if(!!t(h)){var i=h[0],a=void 0;u(n)?a=n(h[0]):a=h[0][n];var o=void 0;return s(h,function(l){u(n)?o=n(l):o=l[n],o>a&&(i=l,a=o)}),i}};E.exports=c},function(E,T){var e=function(u,s){return(u%s+s)%s};E.exports=e},function(E,T){var e=180/Math.PI,t=function(s){return e*s};E.exports=t},function(E,T){E.exports=parseInt},function(E,T){var e=Math.PI/180,t=function(s){return e*s};E.exports=t},function(E,T,e){var t=e(80),u=e(2),s=e(85);E.exports=function(r,h){return r=t(r),u(h,function(n){switch(n[0]){case"t":s.translate(r,r,[n[1],n[2]]);break;case"s":s.scale(r,r,[n[1],n[2]]);break;case"r":s.rotate(r,r,n[1]);break;case"m":s.multiply(r,r,n[1]);break;default:return!1}}),r}},function(E,T,e){var t=e(349),u=e(84);t.angle=function(s,c){var r=t.dot(s,c)/(t.length(s)*t.length(c));return Math.acos(u(r,-1,1))},t.direction=function(s,c){return s[0]*c[1]-c[0]*s[1]},t.angleTo=function(s,c,r){var h=t.angle(s,c),n=t.direction(s,c)>=0;return r?n?Math.PI*2-h:h:n?h:Math.PI*2-h},t.vertical=function(s,c,r){return r?(s[0]=c[1],s[1]=-1*c[0]):(s[0]=-1*c[1],s[1]=c[0]),s},E.exports=t},function(E,T,e){var t=e(350);E.exports=t},function(E,T){E.exports=function(e,t){return e.hasOwnProperty(t)}},function(E,T,e){var t=e(178),u=e(6);function s(c,r){var h=t(r),n=h.length;if(u(c))return!n;for(var i=0;i<n;i+=1){var a=h[i];if(r[a]!==c[a]||!(a in c))return!1}return!0}E.exports=s},function(E,T,e){var t=e(2),u=e(14),s=Object.keys?function(c){return Object.keys(c)}:function(c){var r=[];return t(c,function(h,n){u(c)&&n==="prototype"||r.push(n)}),r};E.exports=s},function(E,T,e){var t=e(2),u=e(14),s=Object.values?function(c){return Object.values(c)}:function(c){var r=[];return t(c,function(h,n){u(c)&&n==="prototype"||r.push(h)}),r};E.exports=s},function(E,T){E.exports=function(t,u){for(var s=[],c=0,r=t.length;r-2*!u>c;c+=2){var h=[{x:+t[c-2],y:+t[c-1]},{x:+t[c],y:+t[c+1]},{x:+t[c+2],y:+t[c+3]},{x:+t[c+4],y:+t[c+5]}];u?c?r-4===c?h[3]={x:+t[0],y:+t[1]}:r-2===c&&(h[2]={x:+t[0],y:+t[1]},h[3]={x:+t[2],y:+t[3]}):h[0]={x:+t[r-2],y:+t[r-1]}:r-4===c?h[3]=h[2]:c||(h[0]={x:+t[c],y:+t[c+1]}),s.push(["C",(-h[0].x+6*h[1].x+h[2].x)/6,(-h[0].y+6*h[1].y+h[2].y)/6,(h[1].x+6*h[2].x-h[3].x)/6,(h[1].y+6*h[2].y-h[3].y)/6,h[2].x,h[2].y])}return s}},function(E,T){var e=/,?([a-z]),?/gi;E.exports=function(u){return u.join(",").replace(e,"$1")}},function(E,T){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},t=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,u=new RegExp("([a-z])["+t+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+t+"]*,?["+t+"]*)+)","ig"),s=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+t+"]*,?["+t+"]*","ig");E.exports=function(r){if(!r)return null;if((typeof r=="undefined"?"undefined":e(r))===e([]))return r;var h={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(r).replace(u,function(i,a,o){var l=[],f=a.toLowerCase();if(o.replace(s,function(v,b){b&&l.push(+b)}),f==="m"&&l.length>2&&(n.push([a].concat(l.splice(0,2))),f="l",a=a==="m"?"l":"L"),f==="o"&&l.length===1&&n.push([a,l[0]]),f==="r")n.push([a].concat(l));else for(;l.length>=h[f]&&(n.push([a].concat(l.splice(0,h[f]))),!!h[f]););}),n}},function(E,T,e){var t=e(182),u=e(180);function s(c,r,h,n,i){var a=[];if(i===null&&n===null&&(n=h),c=+c,r=+r,h=+h,n=+n,i!==null){var o=Math.PI/180,l=c+h*Math.cos(-n*o),f=c+h*Math.cos(-i*o),v=r+h*Math.sin(-n*o),b=r+h*Math.sin(-i*o);a=[["M",l,v],["A",h,h,0,+(i-n>180),0,f,b]]}else a=[["M",c,r],["m",0,-n],["a",h,n,0,1,1,0,2*n],["a",h,n,0,1,1,0,-2*n],["z"]];return a}E.exports=function(r){if(r=t(r),!r||!r.length)return[["M",0,0]];var h=[],n=0,i=0,a=0,o=0,l=0,f=void 0,v=void 0;r[0][0]==="M"&&(n=+r[0][1],i=+r[0][2],a=n,o=i,l++,h[0]=["M",n,i]);for(var b=r.length===3&&r[0][0]==="M"&&r[1][0].toUpperCase()==="R"&&r[2][0].toUpperCase()==="Z",g,m,_=l,M=r.length;_<M;_++){if(h.push(g=[]),m=r[_],f=m[0],f!==f.toUpperCase())switch(g[0]=f.toUpperCase(),g[0]){case"A":g[1]=m[1],g[2]=m[2],g[3]=m[3],g[4]=m[4],g[5]=m[5],g[6]=+m[6]+n,g[7]=+m[7]+i;break;case"V":g[1]=+m[1]+i;break;case"H":g[1]=+m[1]+n;break;case"R":v=[n,i].concat(m.slice(1));for(var x=2,y=v.length;x<y;x++)v[x]=+v[x]+n,v[++x]=+v[x]+i;h.pop(),h=h.concat(u(v,b));break;case"O":h.pop(),v=s(n,i,m[1],m[2]),v.push(v[0]),h=h.concat(v);break;case"U":h.pop(),h=h.concat(s(n,i,m[1],m[2],m[3])),g=["U"].concat(h[h.length-1].slice(-2));break;case"M":a=+m[1]+n,o=+m[2]+i;break;default:for(var S=1,P=m.length;S<P;S++)g[S]=+m[S]+(S%2?n:i)}else if(f==="R")v=[n,i].concat(m.slice(1)),h.pop(),h=h.concat(u(v,b)),g=["R"].concat(m.slice(-2));else if(f==="O")h.pop(),v=s(n,i,m[1],m[2]),v.push(v[0]),h=h.concat(v);else if(f==="U")h.pop(),h=h.concat(s(n,i,m[1],m[2],m[3])),g=["U"].concat(h[h.length-1].slice(-2));else for(var A=0,O=m.length;A<O;A++)g[A]=m[A];if(f=f.toUpperCase(),f!=="O")switch(g[0]){case"Z":n=+a,i=+o;break;case"H":n=g[1];break;case"V":i=g[1];break;case"M":a=g[g.length-2],o=g[g.length-1];break;default:n=g[g.length-2],i=g[g.length-1]}}return h}},function(E,T,e){var t=e(183),u=function r(h,n,i,a,o,l,f,v,b,g){i===a&&(i+=1);var m=Math.PI*120/180,_=Math.PI/180*(+o||0),M=[],x=void 0,y=void 0,S=void 0,P=void 0,A=void 0,O=function(gt,k,ot){var it=gt*Math.cos(ot)-k*Math.sin(ot),X=gt*Math.sin(ot)+k*Math.cos(ot);return{x:it,y:X}};if(g)y=g[0],S=g[1],P=g[2],A=g[3];else{x=O(h,n,-_),h=x.x,n=x.y,x=O(v,b,-_),v=x.x,b=x.y,h===v&&n===b&&(v+=1,b+=1);var L=(h-v)/2,H=(n-b)/2,F=L*L/(i*i)+H*H/(a*a);F>1&&(F=Math.sqrt(F),i=F*i,a=F*a);var Z=i*i,G=a*a,U=(l===f?-1:1)*Math.sqrt(Math.abs((Z*G-Z*H*H-G*L*L)/(Z*H*H+G*L*L)));P=U*i*H/a+(h+v)/2,A=U*-a*L/i+(n+b)/2,y=Math.asin(((n-A)/a).toFixed(9)),S=Math.asin(((b-A)/a).toFixed(9)),y=h<P?Math.PI-y:y,S=v<P?Math.PI-S:S,y<0&&(y=Math.PI*2+y),S<0&&(S=Math.PI*2+S),f&&y>S&&(y=y-Math.PI*2),!f&&S>y&&(S=S-Math.PI*2)}var Y=S-y;if(Math.abs(Y)>m){var J=S,rt=v,ft=b;S=y+m*(f&&S>y?1:-1),v=P+i*Math.cos(S),b=A+a*Math.sin(S),M=r(v,b,i,a,o,0,f,rt,ft,[S,J,P,A])}Y=S-y;var dt=Math.cos(y),ut=Math.sin(y),Lt=Math.cos(S),Ft=Math.sin(S),Ot=Math.tan(Y/4),St=4/3*i*Ot,xt=4/3*a*Ot,At=[h,n],nt=[h+St*ut,n-xt*dt],Mt=[v+St*Ft,b-xt*Lt],z=[v,b];if(nt[0]=2*At[0]-nt[0],nt[1]=2*At[1]-nt[1],g)return[nt,Mt,z].concat(M);M=[nt,Mt,z].concat(M).join().split(",");for(var Q=[],ht=0,et=M.length;ht<et;ht++)Q[ht]=ht%2?O(M[ht-1],M[ht],_).y:O(M[ht],M[ht+1],_).x;return Q},s=function(h,n,i,a){return[h,n,i,a,i,a]},c=function(h,n,i,a,o,l){var f=1/3,v=2/3;return[f*h+v*i,f*n+v*a,f*o+v*i,f*l+v*a,o,l]};E.exports=function(h,n){var i=t(h),a=n&&t(n),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},f=[],v=[],b="",g="",m=void 0,_=function(H,F,Z){var G=void 0,U=void 0;if(!H)return["C",F.x,F.y,F.x,F.y,F.x,F.y];switch(!(H[0]in{T:1,Q:1})&&(F.qx=F.qy=null),H[0]){case"M":F.X=H[1],F.Y=H[2];break;case"A":H=["C"].concat(u.apply(0,[F.x,F.y].concat(H.slice(1))));break;case"S":Z==="C"||Z==="S"?(G=F.x*2-F.bx,U=F.y*2-F.by):(G=F.x,U=F.y),H=["C",G,U].concat(H.slice(1));break;case"T":Z==="Q"||Z==="T"?(F.qx=F.x*2-F.qx,F.qy=F.y*2-F.qy):(F.qx=F.x,F.qy=F.y),H=["C"].concat(c(F.x,F.y,F.qx,F.qy,H[1],H[2]));break;case"Q":F.qx=H[1],F.qy=H[2],H=["C"].concat(c(F.x,F.y,H[1],H[2],H[3],H[4]));break;case"L":H=["C"].concat(s(F.x,F.y,H[1],H[2]));break;case"H":H=["C"].concat(s(F.x,F.y,H[1],F.y));break;case"V":H=["C"].concat(s(F.x,F.y,F.x,H[1]));break;case"Z":H=["C"].concat(s(F.x,F.y,F.X,F.Y));break;default:break}return H},M=function(H,F){if(H[F].length>7){H[F].shift();for(var Z=H[F];Z.length;)f[F]="A",a&&(v[F]="A"),H.splice(F++,0,["C"].concat(Z.splice(0,6)));H.splice(F,1),m=Math.max(i.length,a&&a.length||0)}},x=function(H,F,Z,G,U){H&&F&&H[U][0]==="M"&&F[U][0]!=="M"&&(F.splice(U,0,["M",G.x,G.y]),Z.bx=0,Z.by=0,Z.x=H[U][1],Z.y=H[U][2],m=Math.max(i.length,a&&a.length||0))};m=Math.max(i.length,a&&a.length||0);for(var y=0;y<m;y++){i[y]&&(b=i[y][0]),b!=="C"&&(f[y]=b,y&&(g=f[y-1])),i[y]=_(i[y],o,g),f[y]!=="A"&&b==="C"&&(f[y]="C"),M(i,y),a&&(a[y]&&(b=a[y][0]),b!=="C"&&(v[y]=b,y&&(g=v[y-1])),a[y]=_(a[y],l,g),v[y]!=="A"&&b==="C"&&(v[y]="C"),M(a,y)),x(i,a,o,l,y),x(a,i,l,o,y);var S=i[y],P=a&&a[y],A=S.length,O=a&&P.length;o.x=S[A-2],o.y=S[A-1],o.bx=parseFloat(S[A-4])||o.x,o.by=parseFloat(S[A-3])||o.y,l.bx=a&&(parseFloat(P[O-4])||l.x),l.by=a&&(parseFloat(P[O-3])||l.y),l.x=a&&P[O-2],l.y=a&&P[O-1]}return a?[i,a]:i}},function(E,T,e){var t=e(181);E.exports=function(s,c,r,h,n){if(n)return[["M",+s+ +n,c],["l",r-n*2,0],["a",n,n,0,0,1,n,n],["l",0,h-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-r,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-h],["a",n,n,0,0,1,n,-n],["z"]];var i=[["M",s,c],["l",r,0],["l",0,h],["l",-r,0],["z"]];return i.parsePathArray=t,i}},function(E,T,e){var t=e(38),u=function(c){return t(c).toLowerCase()};E.exports=u},function(E,T,e){var t=e(38),u=function(c){var r=t(c);return r.charAt(0).toLowerCase()+r.substring(1)};E.exports=u},function(E,T,e){var t=e(38),u=function(c){return t(c).toUpperCase()};E.exports=u},function(E,T,e){var t=e(38),u=function(c){var r=t(c);return r.charAt(0).toUpperCase()+r.substring(1)};E.exports=u},function(E,T){var e={}.toString,t=function(s){return e.call(s).replace(/^\[object /,"").replace(/\]$/,"")};E.exports=t},function(E,T,e){var t=e(17),u=function(c){return t(c,"Boolean")};E.exports=u},function(E,T,e){var t=e(17),u=function(c){return t(c,"Date")};E.exports=u},function(E,T){var e=Object.prototype,t=function(s){var c=s&&s.constructor,r=typeof c=="function"&&c.prototype||e;return s===r};E.exports=t},function(E,T){var e=function(){var t={};return function(u){return u=u||"g",t[u]?t[u]+=1:t[u]=1,u+t[u]}}();E.exports=e},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default={COORD_FUNC_PROPS:["rotate","scale","reflect","transpose"],GEOM_FUNC_PROPS:["position","color","size","shape","opacity","tooltip","style","animate","active","select","sets"]}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(29),u=r(t),s=e(58),c=r(s);function r(H){return H&&H.__esModule?H:{default:H}}for(var h=[{prop:"onPlotMove",event:"plotmove"},{prop:"onPlotEnter",event:"plotenter"},{prop:"onPlotLeave",event:"plotleave"},{prop:"onPlotClick",event:"plotclick"},{prop:"onPlotDblClick",event:"plotdblclick"},{prop:"onItemSelected",event:"itemselected"},{prop:"onItemUnselected",event:"itemunselected"},{prop:"onItemSelectedChange",event:"itemselectedchange"},{prop:"onTooltipChange",event:"tooltip:change"},{prop:"onTooltipShow",event:"tooltip:show"},{prop:"onTooltipHide",event:"tooltip:hide"}],n=["mouseenter","mousemove","mouseleave","click","dblclick","mousedown","mouseup","touchstart","touchmove","touchend"],i=["Mouseenter","Mousemove","Mouseleave","Click","Dblclick","Mousedown","Mouseup","Touchstart","Touchmove","Touchend"],a=["point","area","line","path","interval","schema","polygon","edge","axis-title","axis-label","axis-ticks","axis-line","axis-grid","legend-title","legend-item","legend-marker","legend-text","guide-text","guide-region","guide-line","guide-image","label"],o=["onPoint","onArea","onLine","onPath","onInterval","onSchema","onPolygon","onEdge","onAxisTitle","onAxisLabel","onAxisTicks","onAxisLine","onAxisGrid","onLegendTitle","onLegendItem","onLegendMarker","onLegendText","onGuideText","onGuideRegion","onGuideLine","onGuideImage","onLabel"],l=[],f=0;f<a.length;f+=1)for(var v=0;v<n.length;v+=1)l.push({prop:""+o[f]+i[v],event:a[f]+":"+n[v]});var b=h.concat(l);function g(){return[{prop:"onMouseEnter",event:"mouseenter"},{prop:"onMouseMove",event:"mousemove"},{prop:"onMouseLeave",event:"mouseleave"},{prop:"onClick",event:"click"},{prop:"onDblClick",event:"dblclick"},{prop:"onMouseDown",event:"mousedown"},{prop:"onMouseUp",event:"mouseup"},{prop:"onTouchStart",event:"touchstart"},{prop:"onTouchMove",event:"touchmove"},{prop:"onTouchEnd",event:"touchend"}]}function m(H){var F=g();return c.default.map(F,function(Z){var G=Z.event;return Z.event=H+":"+G,Z}),F}var _=g(),M={onMouseEnter:u.default.object,onMouseMove:u.default.object,onMouseLeave:u.default.object,onClick:u.default.oneOfType([u.default.object,u.default.func]),onDblClick:u.default.object,onMouseDown:u.default.object,onMouseUp:u.default.object,onTouchStart:u.default.object,onTouchMove:u.default.object,onTouchEnd:u.default.object},x={onMouseEnter:u.default.func,onMouseMove:u.default.func,onMouseLeave:u.default.func,onClick:u.default.func,onDblClick:u.default.func,onMouseDown:u.default.func,onMouseUp:u.default.func,onTouchStart:u.default.func,onTouchMove:u.default.func,onTouchEnd:u.default.func};function y(H){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=arguments[2];c.default.each(F,function(G){var U=G.prop,Y=G.event,J=Z[U];if(c.default.isFunction(J))H.on(Y,J);else if(c.default.isObject(J))for(var rt in J)J[rt]!==void 0&&H.on(rt+":"+Y,J[rt])})}function S(H,F){y(H,_,F)}function P(H){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=arguments[2],G=arguments[3];c.default.each(F,function(U){var Y=U.prop,J=U.event,rt=Z[Y],ft=G[Y],dt=void 0;if(!c.default.shallowEqual(rt,ft)){if(c.default.isFunction(rt)&&c.default.isFunction(ft))H.off(J,rt),H.on(J,ft);else if(c.default.isObject(rt)&&c.default.isObject(ft)){for(dt in rt)Object.prototype.hasOwnProperty.call(rt,dt)&&H.off(dt+":"+J,rt[dt]);for(dt in ft)Object.prototype.hasOwnProperty.call(ft,dt)&&H.on(dt+":"+J,ft[dt])}}})}function A(H,F,Z){P(H,_,F,Z)}function O(H){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=arguments[2];c.default.each(F,function(G){var U=G.prop,Y=G.event,J=Z[U];if(c.default.isFunction(J))H.off(Y,J);else if(c.default.isObject(J))for(var rt in J)Object.prototype.hasOwnProperty.call(J,rt)&&H.off(rt+":"+Y,J[rt])})}function L(H,F){O(H,_,F)}T.default={baseEventObjectTypes:M,baseEventFuncTypes:x,genBaseEvents:g,genItemBaseEvents:m,bindEvents:y,bindBaseEvents:S,updateEvents:P,updateBaseEvents:A,unbindEvents:O,unbindBaseEvents:L,chartEvents:b}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(_){for(var M=1;M<arguments.length;M++){var x=arguments[M];for(var y in x)Object.prototype.hasOwnProperty.call(x,y)&&(_[y]=x[y])}return _},u=e(45),s=f(u),c=e(88),r=e(195),h=l(r),n=e(196),i=l(n),a=e(87),o=l(a);function l(_){return _&&_.__esModule?_:{default:_}}function f(_){if(_&&_.__esModule)return _;var M={};if(_!=null)for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(M[x]=_[x]);return M.default=_,M}function v(_){if(Array.isArray(_)){for(var M=0,x=Array(_.length);M<_.length;M++)x[M]=_[M];return x}else return Array.from(_)}function b(_,M){var x={};for(var y in _)M.indexOf(y)>=0||!Object.prototype.hasOwnProperty.call(_,y)||(x[y]=_[y]);return x}var g=h.default.COORD_FUNC_PROPS,m=h.default.GEOM_FUNC_PROPS;T.default={createChart:function(M){var x=M.chart,y=x.props.forceFit;x.props.forceFit=!1;var S=new s.Chart(x.props);return x.props.afterChartInitialized&&x.props.afterChartInitialized(S),y&&S.forceFit(),x.g2Instance=S,S},executeChartConfig:function(M,x){var y=x.chart,S=y.props;M.coord("rect",{}),M.source(S.data,S.scale),(!x.facet&&!S.axis||!x.facet||S.axis===!1)&&M.axis(!1),M.legend(!1),M.tooltip(!1),S.filter&&S.filter.forEach(function(P){M.filter(P[0],P[1])}),i.default.bindEvents(M,i.default.chartEvents,S),i.default.bindBaseEvents(M,S)},coord:function(M,x){var y=x.coord;if(!(!y||y.g2Instance)){var S=y.props,P=S.type,A=b(S,["type"]),O=M.coord(P||"rect",c.Util.without(A,g));c.Prop.init(g,A,function(L,H){H==="reflect"?c.Util.each(L,function(F){return O[H](F)}):H==="transpose"?L[0]===!0&&O[H].apply(O,v(L)):O[H].apply(O,v(L))}),y.g2Instance=O}},createLabel:function(M,x){if(!(!x||x.g2Instance)){var y=x.props,S=y.content,P=b(y,["content"]);S&&(c.Util.isArray(S)?x.g2Instance=M.label(S[0],S[1],P):x.g2Instance=M.label(S,P))}},createGeom:function(M,x){if(x.g2Instance){x.label&&this.createLabel(x.g2Instance,x.label);return}var y=x.props,S=M[y.type||"interval"]();y.adjust&&S.adjust(y.adjust),c.Prop.init(m,y,function(P,A){S[A].apply(S,v(P))}),x.g2Instance=S,this.createLabel(S,x.label)},geoms:function(M,x){var y=x.geoms;if(!!y)for(var S in y)Object.prototype.hasOwnProperty.call(y,S)&&this.createGeom(M,y[S])},legends:function(M,x){var y=x.legends;for(var S in y)if(y[S]){var P=y[S];if(P.g2Instance)return;var A=P.props,O=A.name,L=A.visible,H=b(A,["name","visible"]),F=L;Object.prototype.hasOwnProperty.call(P.props,"visible")||(F=!0);var Z=F&&H;P.g2Instance=M.legend.apply(M,v(O?[O,Z]:[Z]))}},tooltip:function(M,x){var y=x.tooltip;!y||y.g2Instance||(y.g2Instance=M.tooltip(t({},y.props)))},createAxis:function(M,x){if(!x.g2Instance){var y=x.props,S=y.name,P=y.visible,A=b(y,["name","visible"]);P||!Object.prototype.hasOwnProperty.call(x.props,"visible")?x.g2Instance=M.axis(S,A):x.g2Instance=M.axis(S,!1)}},axises:function(M,x){var y=x.axises;for(var S in y)y[S]&&this.createAxis(M,y[S])},views:function(M,x){var y=x.views;for(var S in y)y[S]&&this.createView(M,y[S])},createView:function(M,x){if(x.parentInfo.name!=="Facet"){if(x.g2Instance){x.filter&&x.filter.forEach(function(G){x.g2Instance.filter(G[0],G[1])}),this.coord(x.g2Instance,x),this.axises(x.g2Instance,x),this.geoms(x.g2Instance,x),this.guide(x.g2Instance,x.guide);return}var y=x.props,S=y.scale,P=y.data,A=y.instance,O=y.axis,L=y.filter,H=y.geoms,F=b(y,["scale","data","instance","axis","filter","geoms"]),Z=void 0;A?Z=A:Z=M.view(t({},F)),P&&Z.source(P,S),S&&Z.scale(S),L&&L.forEach(function(G){Z.filter(G[0],G[1])}),O===!0||A||Z.axis(!1),x.g2Instance=Z,this.coord(Z,x),this.axises(Z,x),this.geoms(Z,x),this.guide(Z,x.guide)}},facetView:function(M,x){var y=x.props,S=y.scale,P=y.data,A=y.axis,O=y.geoms,L=b(y,["scale","data","axis","geoms"]);P&&M.source(P,S),S&&M.scale(S),A===!1&&M.axis(!1),this.coord(M,x),this.axises(M,x),this.geoms(M,x),this.guide(M,x.guide),o.default.mergeView(x,!0)},guide:function(M,x){if(!!x){var y=x.elements;for(var S in y)if(y[S]){var P=y[S];if(!P.g2Instance){var A=P.props,O=A.type,L=b(A,["type"]);P.g2Instance=M.guide()[P.type](L)}}}},facet:function(M,x){var y=this,S=x.facet;if(!(!S||S.g2Instance)){var P=S.props,A=P.children,O=P.type,L=b(P,["children","type"]);if(!A){M.facet(O,L);return}var H=x.views,F=null;for(var Z in H)if(H[Z]&&H[Z].parentInfo.name==="Facet"&&H[Z].parentInfo.id===S.id){F=H[Z];break}F&&(o.default.mergeView(F,!0),L.eachView=function(G){y.facetView(G,F)},M.facet(O,L))}},synchronizeG2Add:function(M,x){this.coord(M,x),this.axises(M,x),this.legends(M,x),this.tooltip(M,x),this.geoms(M,x),this.facet(M,x),this.views(M,x),this.guide(M,x.guide)},synchronizeG2Views:function(M,x){var y=x.views;for(var S in y)y[S]&&this.synchronizeG2View(y[S].g2Instance,y[S])},synchronizeG2View:function(M,x){M.clear(),this.clearViewG2Instance(x);var y=x.props,S=y.scale,P=y.data,A=y.instance,O=y.axis,L=y.geoms,H=b(y,["scale","data","instance","axis","geoms"]);P&&M.source(P,S),S&&M.scale(S),O===!0||A||M.axis(!1),this.coord(M,x),this.axises(M,x),this.geoms(M,x),this.guide(M,x.guide)},clearViewG2Instance:function(M){M.coord&&delete M.coord.g2Instance,M.axises&&Object.keys(M.axises).forEach(function(x){delete M.axises[x].g2Instance}),M.geoms&&Object.keys(M.geoms).forEach(function(x){delete M.geoms[x].g2Instance,M.geoms[x].label&&delete M.geoms[x].label.g2Instance}),M.guide&&M.guide.elements&&Object.keys(M.guide.elements).forEach(function(x){delete M.guide.elements[x].g2Instance})}}},function(E,T,e){"use strict";e.d(T,"b",function(){return t}),e.d(T,"a",function(){return u});var t=Math.PI/180,u=180/Math.PI},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(449);e.d(T,"easeLinear",function(){return t.a});var u=e(451);e.d(T,"easeQuad",function(){return u.a}),e.d(T,"easeQuadIn",function(){return u.b}),e.d(T,"easeQuadOut",function(){return u.c}),e.d(T,"easeQuadInOut",function(){return u.a});var s=e(446);e.d(T,"easeCubic",function(){return s.a}),e.d(T,"easeCubicIn",function(){return s.b}),e.d(T,"easeCubicOut",function(){return s.c}),e.d(T,"easeCubicInOut",function(){return s.a});var c=e(450);e.d(T,"easePoly",function(){return c.a}),e.d(T,"easePolyIn",function(){return c.b}),e.d(T,"easePolyOut",function(){return c.c}),e.d(T,"easePolyInOut",function(){return c.a});var r=e(452);e.d(T,"easeSin",function(){return r.a}),e.d(T,"easeSinIn",function(){return r.b}),e.d(T,"easeSinOut",function(){return r.c}),e.d(T,"easeSinInOut",function(){return r.a});var h=e(448);e.d(T,"easeExp",function(){return h.a}),e.d(T,"easeExpIn",function(){return h.b}),e.d(T,"easeExpOut",function(){return h.c}),e.d(T,"easeExpInOut",function(){return h.a});var n=e(445);e.d(T,"easeCircle",function(){return n.a}),e.d(T,"easeCircleIn",function(){return n.b}),e.d(T,"easeCircleOut",function(){return n.c}),e.d(T,"easeCircleInOut",function(){return n.a});var i=e(444);e.d(T,"easeBounce",function(){return i.a}),e.d(T,"easeBounceIn",function(){return i.b}),e.d(T,"easeBounceOut",function(){return i.a}),e.d(T,"easeBounceInOut",function(){return i.c});var a=e(443);e.d(T,"easeBack",function(){return a.a}),e.d(T,"easeBackIn",function(){return a.b}),e.d(T,"easeBackOut",function(){return a.c}),e.d(T,"easeBackInOut",function(){return a.a});var o=e(447);e.d(T,"easeElastic",function(){return o.a}),e.d(T,"easeElasticIn",function(){return o.b}),e.d(T,"easeElasticOut",function(){return o.a}),e.d(T,"easeElasticInOut",function(){return o.c})},function(E,T,e){"use strict";var t=e(92);T.a=function(u,s){var c=s?s.length:0,r=u?Math.min(c,u.length):0,h=new Array(r),n=new Array(c),i;for(i=0;i<r;++i)h[i]=e.i(t.a)(u[i],s[i]);for(;i<c;++i)n[i]=s[i];return function(a){for(i=0;i<r;++i)n[i]=h[i](a);return n}}},function(E,T,e){"use strict";var t=e(91);T.a=function(u){var s=u.length;return function(c){var r=Math.floor(((c%=1)<0?++c:c)*s),h=u[(r+s-1)%s],n=u[r%s],i=u[(r+1)%s],a=u[(r+2)%s];return e.i(t.b)((c-r/s)*s,h,n,i,a)}}},function(E,T,e){"use strict";T.a=function(t){return function(){return t}}},function(E,T,e){"use strict";T.a=function(t,u){var s=new Date;return t=+t,u-=t,function(c){return s.setTime(t+u*c),s}}},function(E,T,e){"use strict";var t=e(92);T.a=function(u,s){var c={},r={},h;(u===null||typeof u!="object")&&(u={}),(s===null||typeof s!="object")&&(s={});for(h in s)h in u?c[h]=e.i(t.a)(u[h],s[h]):r[h]=s[h];return function(n){for(h in c)r[h]=c[h](n);return r}}},function(E,T,e){"use strict";e.d(T,"b",function(){return h}),e.d(T,"c",function(){return n});var t=e(12),u=e(91),s=e(201),c=e(41);T.a=function i(a){var o=e.i(c.c)(a);function l(f,v){var b=o((f=e.i(t.e)(f)).r,(v=e.i(t.e)(v)).r),g=o(f.g,v.g),m=o(f.b,v.b),_=e.i(c.a)(f.opacity,v.opacity);return function(M){return f.r=b(M),f.g=g(M),f.b=m(M),f.opacity=_(M),f+""}}return l.gamma=i,l}(1);function r(i){return function(a){var o=a.length,l=new Array(o),f=new Array(o),v=new Array(o),b,g;for(b=0;b<o;++b)g=e.i(t.e)(a[b]),l[b]=g.r||0,f[b]=g.g||0,v[b]=g.b||0;return l=i(l),f=i(f),v=i(v),g.opacity=1,function(m){return g.r=l(m),g.g=f(m),g.b=v(m),g+""}}}var h=r(u.a),n=r(s.a)},function(E,T,e){"use strict";var t=e(59),u=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s=new RegExp(u.source,"g");function c(h){return function(){return h}}function r(h){return function(n){return h(n)+""}}T.a=function(h,n){var i=u.lastIndex=s.lastIndex=0,a,o,l,f=-1,v=[],b=[];for(h=h+"",n=n+"";(a=u.exec(h))&&(o=s.exec(n));)(l=o.index)>i&&(l=n.slice(i,l),v[f]?v[f]+=l:v[++f]=l),(a=a[0])===(o=o[0])?v[f]?v[f]+=o:v[++f]=o:(v[++f]=null,b.push({i:f,x:e.i(t.a)(a,o)})),i=s.lastIndex;return i<n.length&&(l=n.slice(i),v[f]?v[f]+=l:v[++f]=l),v.length<2?b[0]?r(b[0].x):c(n):(n=b.length,function(g){for(var m=0,_;m<n;++m)v[(_=b[m]).i]=_.x(g);return v.join("")})}},function(E,T,e){"use strict";T.a=c;var t=e(96),u=e(95),s=function(r,h){return(e.i(u.a)(h)?u.b:c)(r,h)};function c(r,h){var n=h?h.length:0,i=r?Math.min(n,r.length):0,a=new Array(i),o=new Array(n),l;for(l=0;l<i;++l)a[l]=e.i(t.a)(r[l],h[l]);for(;l<n;++l)o[l]=h[l];return function(f){for(l=0;l<i;++l)o[l]=a[l](f);return o}}},function(E,T,e){"use strict";var t=e(93);T.a=function(u){var s=u.length;return function(c){var r=Math.floor(((c%=1)<0?++c:c)*s),h=u[(r+s-1)%s],n=u[r%s],i=u[(r+1)%s],a=u[(r+2)%s];return e.i(t.b)((c-r/s)*s,h,n,i,a)}}},function(E,T,e){"use strict";T.a=function(t){return function(){return t}}},function(E,T,e){"use strict";T.a=function(t,u){var s=new Date;return t=+t,u=+u,function(c){return s.setTime(t*(1-c)+u*c),s}}},function(E,T,e){"use strict";var t=e(96);T.a=function(u,s){var c={},r={},h;(u===null||typeof u!="object")&&(u={}),(s===null||typeof s!="object")&&(s={});for(h in s)h in u?c[h]=e.i(t.a)(u[h],s[h]):r[h]=s[h];return function(n){for(h in c)r[h]=c[h](n);return r}}},function(E,T,e){"use strict";var t=e(12),u=e(93),s=e(208),c=e(32);T.a=function i(a){var o=e.i(c.c)(a);function l(f,v){var b=o((f=e.i(t.e)(f)).r,(v=e.i(t.e)(v)).r),g=o(f.g,v.g),m=o(f.b,v.b),_=e.i(c.a)(f.opacity,v.opacity);return function(M){return f.r=b(M),f.g=g(M),f.b=m(M),f.opacity=_(M),f+""}}return l.gamma=i,l}(1);function r(i){return function(a){var o=a.length,l=new Array(o),f=new Array(o),v=new Array(o),b,g;for(b=0;b<o;++b)g=e.i(t.e)(a[b]),l[b]=g.r||0,f[b]=g.g||0,v[b]=g.b||0;return l=i(l),f=i(f),v=i(v),g.opacity=1,function(m){return g.r=l(m),g.g=f(m),g.b=v(m),g+""}}}var h=r(u.a),n=r(s.a)},function(E,T,e){"use strict";var t=e(60),u=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s=new RegExp(u.source,"g");function c(h){return function(){return h}}function r(h){return function(n){return h(n)+""}}T.a=function(h,n){var i=u.lastIndex=s.lastIndex=0,a,o,l,f=-1,v=[],b=[];for(h=h+"",n=n+"";(a=u.exec(h))&&(o=s.exec(n));)(l=o.index)>i&&(l=n.slice(i,l),v[f]?v[f]+=l:v[++f]=l),(a=a[0])===(o=o[0])?v[f]?v[f]+=o:v[++f]=o:(v[++f]=null,b.push({i:f,x:e.i(t.a)(a,o)})),i=s.lastIndex;return i<n.length&&(l=n.slice(i),v[f]?v[f]+=l:v[++f]=l),v.length<2?b[0]?r(b[0].x):c(n):(n=b.length,function(g){for(var m=0,_;m<n;++m)v[(_=b[m]).i]=_.x(g);return v.join("")})}},function(E,T,e){"use strict";T.a=function(t){return function(){return this.matches(t)}}},function(E,T,e){"use strict";var t=e(18);T.a=function(u){return typeof u=="string"?new t.b([[document.querySelector(u)]],[document.documentElement]):new t.b([[u]],t.c)}},function(E,T,e){"use strict";T.b=s;var t=e(217),u=e(18);T.a=function(){return new u.b(this._enter||this._groups.map(t.a),this._parents)};function s(c,r){this.ownerDocument=c.ownerDocument,this.namespaceURI=c.namespaceURI,this._next=null,this._parent=c,this.__data__=r}s.prototype={constructor:s,appendChild:function(c){return this._parent.insertBefore(c,this._next)},insertBefore:function(c,r){return this._parent.insertBefore(c,r)},querySelector:function(c){return this._parent.querySelector(c)},querySelectorAll:function(c){return this._parent.querySelectorAll(c)}}},function(E,T,e){"use strict";T.a=function(t){return new Array(t.length)}},function(E,T,e){"use strict";T.a=r;var t=e(102);function u(h){return function(){this.style.removeProperty(h)}}function s(h,n,i){return function(){this.style.setProperty(h,n,i)}}function c(h,n,i){return function(){var a=n.apply(this,arguments);a==null?this.style.removeProperty(h):this.style.setProperty(h,a,i)}}T.b=function(h,n,i){return arguments.length>1?this.each((n==null?u:typeof n=="function"?c:s)(h,n,i==null?"":i)):r(this.node(),h)};function r(h,n){return h.style.getPropertyValue(n)||e.i(t.a)(h).getComputedStyle(h,null).getPropertyValue(n)}},function(E,T,e){"use strict";function t(){return[]}T.a=function(u){return u==null?t:function(){return this.querySelectorAll(u)}}},function(E,T,e){"use strict";var t=e(13);T.a=function(u,s){var c=u.__transition,r,h,n=!0,i;if(!!c){s=s==null?null:s+"";for(i in c){if((r=c[i]).name!==s){n=!1;continue}h=r.state>t.a&&r.state<t.b,r.state=t.c,r.timer.stop(),r.on.call(h?"interrupt":"cancel",u,u.__data__,r.index,r.group),delete c[i]}n&&delete u.__transition}}},function(E,T,e){"use strict";var t=e(12),u=e(94);T.a=function(s,c){var r;return(typeof c=="number"?u.b:c instanceof t.f?u.c:(r=e.i(t.f)(c))?(c=r,u.c):u.d)(s,c)}},function(E,T,e){var t;(function(u){"use strict";var s={},c=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,r=/\d\d?/,h=/\d{3}/,n=/\d{4}/,i=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,a=/\[([^]*?)\]/gm,o=function(){};function l(y,S){for(var P=[],A=0,O=y.length;A<O;A++)P.push(y[A].substr(0,S));return P}function f(y){return function(S,P,A){var O=A[y].indexOf(P.charAt(0).toUpperCase()+P.substr(1).toLowerCase());~O&&(S.month=O)}}function v(y,S){for(y=String(y),S=S||2;y.length<S;)y="0"+y;return y}var b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],g=["January","February","March","April","May","June","July","August","September","October","November","December"],m=l(g,3),_=l(b,3);s.i18n={dayNamesShort:_,dayNames:b,monthNamesShort:m,monthNames:g,amPm:["am","pm"],DoFn:function(S){return S+["th","st","nd","rd"][S%10>3?0:(S-S%10!=10)*S%10]}};var M={D:function(y){return y.getDate()},DD:function(y){return v(y.getDate())},Do:function(y,S){return S.DoFn(y.getDate())},d:function(y){return y.getDay()},dd:function(y){return v(y.getDay())},ddd:function(y,S){return S.dayNamesShort[y.getDay()]},dddd:function(y,S){return S.dayNames[y.getDay()]},M:function(y){return y.getMonth()+1},MM:function(y){return v(y.getMonth()+1)},MMM:function(y,S){return S.monthNamesShort[y.getMonth()]},MMMM:function(y,S){return S.monthNames[y.getMonth()]},YY:function(y){return String(y.getFullYear()).substr(2)},YYYY:function(y){return v(y.getFullYear(),4)},h:function(y){return y.getHours()%12||12},hh:function(y){return v(y.getHours()%12||12)},H:function(y){return y.getHours()},HH:function(y){return v(y.getHours())},m:function(y){return y.getMinutes()},mm:function(y){return v(y.getMinutes())},s:function(y){return y.getSeconds()},ss:function(y){return v(y.getSeconds())},S:function(y){return Math.round(y.getMilliseconds()/100)},SS:function(y){return v(Math.round(y.getMilliseconds()/10),2)},SSS:function(y){return v(y.getMilliseconds(),3)},a:function(y,S){return y.getHours()<12?S.amPm[0]:S.amPm[1]},A:function(y,S){return y.getHours()<12?S.amPm[0].toUpperCase():S.amPm[1].toUpperCase()},ZZ:function(y){var S=y.getTimezoneOffset();return(S>0?"-":"+")+v(Math.floor(Math.abs(S)/60)*100+Math.abs(S)%60,4)}},x={D:[r,function(y,S){y.day=S}],Do:[new RegExp(r.source+i.source),function(y,S){y.day=parseInt(S,10)}],M:[r,function(y,S){y.month=S-1}],YY:[r,function(y,S){var P=new Date,A=+(""+P.getFullYear()).substr(0,2);y.year=""+(S>68?A-1:A)+S}],h:[r,function(y,S){y.hour=S}],m:[r,function(y,S){y.minute=S}],s:[r,function(y,S){y.second=S}],YYYY:[n,function(y,S){y.year=S}],S:[/\d/,function(y,S){y.millisecond=S*100}],SS:[/\d{2}/,function(y,S){y.millisecond=S*10}],SSS:[h,function(y,S){y.millisecond=S}],d:[r,o],ddd:[i,o],MMM:[i,f("monthNamesShort")],MMMM:[i,f("monthNames")],a:[i,function(y,S,P){var A=S.toLowerCase();A===P.amPm[0]?y.isPm=!1:A===P.amPm[1]&&(y.isPm=!0)}],ZZ:[/([\+\-]\d\d:?\d\d|Z)/,function(y,S){S==="Z"&&(S="+00:00");var P=(S+"").match(/([\+\-]|\d\d)/gi),A;P&&(A=+(P[1]*60)+parseInt(P[2],10),y.timezoneOffset=P[0]==="+"?A:-A)}]};x.dd=x.d,x.dddd=x.ddd,x.DD=x.D,x.mm=x.m,x.hh=x.H=x.HH=x.h,x.MM=x.M,x.ss=x.s,x.A=x.a,s.masks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},s.format=function(y,S,P){var A=P||s.i18n;if(typeof y=="number"&&(y=new Date(y)),Object.prototype.toString.call(y)!=="[object Date]"||isNaN(y.getTime()))throw new Error("Invalid Date in fecha.format");S=s.masks[S]||S||s.masks.default;var O=[];return S=S.replace(a,function(L,H){return O.push(H),"??"}),S=S.replace(c,function(L){return L in M?M[L](y,A):L.slice(1,L.length-1)}),S.replace(/\?\?/g,function(){return O.shift()})},s.parse=function(y,S,P){var A=P||s.i18n;if(typeof S!="string")throw new Error("Invalid format in fecha.parse");if(S=s.masks[S]||S,y.length>1e3)return!1;var O=!0,L={};if(S.replace(c,function(Z){if(x[Z]){var G=x[Z],U=y.search(G[0]);~U?y.replace(G[0],function(Y){return G[1](L,Y,A),y=y.substr(U+Y.length),Y}):O=!1}return x[Z]?"":Z.slice(1,Z.length-1)}),!O)return!1;var H=new Date;L.isPm===!0&&L.hour!=null&&+L.hour!=12?L.hour=+L.hour+12:L.isPm===!1&&+L.hour==12&&(L.hour=0);var F;return L.timezoneOffset!=null?(L.minute=+(L.minute||0)-+L.timezoneOffset,F=new Date(Date.UTC(L.year||H.getFullYear(),L.month||0,L.day||1,L.hour||0,L.minute||0,L.second||0,L.millisecond||0))):F=new Date(L.year||H.getFullYear(),L.month||0,L.day||1,L.hour||0,L.minute||0,L.second||0,L.millisecond||0),F},typeof E!="undefined"&&E.exports?E.exports=s:(t=function(){return s}.call(T,e,T,E),t!==void 0&&(E.exports=t))})(this)},function(E,T,e){"use strict";var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";E.exports=t},function(E,T,e){"use strict";E.exports=e(542)},function(E,T){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){typeof window=="object"&&(e=window)}E.exports=e},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var u=e(33),s=e(2),c=1/2,r=1/2,h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a._initDefaultCfg=function(){this.marginRatio=c,this.dodgeRatio=r,this.adjustNames=["x","y"]},a.getDodgeOffset=function(l,f,v){var b=this,g=l.pre,m=l.next,_=m-g,M=_*b.dodgeRatio/v,x=b.marginRatio*M,y=1/2*(_-v*M-(v-1)*x)+((f+1)*M+f*x)-1/2*M-1/2*_;return(g+m)/2+y},a.processAdjust=function(l){var f=this,v=l.length,b=f.xField;s(l,function(g,m){for(var _=0,M=g.length;_<M;_++){var x=g[_],y=x[b],S={pre:M===1?y-1:y-.5,next:M===1?y+1:y+.5},P=f.getDodgeOffset(S,m,v);x[b]=P}})},i}(u);u.Dodge=h,E.exports=h},function(E,T,e){var t=e(10),u=e(33),s=e(226),c=e(231),r=e(106),h=e(229),n=e(230);t(u.prototype,r),t(s.prototype,r,h),t(c.prototype,n),u.Jitter=e(228),u.Symmetric=e(232),u.Dodge=s,u.Stack=c,E.exports=u},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var u=e(2),s=e(10),c={merge:e(54)},r=e(33),h=e(106),n=function(i){t(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o._initDefaultCfg=function(){this.xField=null,this.yField=null,this.adjustNames=["x","y"],this.groupFields=null},o.processAdjust=function(f){var v=this,b=c.merge(f);v.adjDataArray=f,v.mergeData=b,v.adjustData(f,b),v.adjFrames=null,v.mergeData=null},o.getAdjustOffset=function(f,v){var b=Math.random(),g=v-f,m=g*.05;return f+m+g*.9*b},o._adjustGroup=function(f,v,b,g){var m=this,_=m.getAdjustRange(v,b,g);u(f,function(M){M[v]=m.getAdjustOffset(_.pre,_.next)})},o.adjustDim=function(f,v,b){var g=this,m=g.groupData(b,f);u(m,function(_,M){M=parseFloat(M),g._adjustGroup(_,f,M,v)})},a}(r);s(n.prototype,h),r.Jitter=n,E.exports=n},function(E,T,e){var t={merge:e(54),values:e(79)},u=e(165),s=e(2);E.exports={processAdjust:function(r){var h=this,n=t.merge(r),i=h.dodgeBy,a=r;i&&(a=u(n,i)),h.cacheMap={},h.adjDataArray=a,h.mergeData=n,h.adjustData(a,n),h.adjDataArray=null,h.mergeData=null},getDistribution:function(r){var h=this,n=h.adjDataArray,i=h.cacheMap,a=i[r];return a||(a={},s(n,function(o,l){var f=t.values(o,r);f.length||f.push(0),s(f,function(v){a[v]||(a[v]=[]),a[v].push(l)})}),i[r]=a),a},adjustDim:function(r,h,n,i,a){var o=this,l=o.getDistribution(r),f=o.groupData(n,r);s(f,function(v,b){b=parseFloat(b);var g;h.length===1?g={pre:h[0]-1,next:h[0]+1}:g=o.getAdjustRange(r,b,h),s(v,function(m){var _=m[r],M=l[_],x=M.indexOf(a);m[r]=o.getDodgeOffset(g,x,M.length)})})}}},function(E,T){E.exports={_initDefaultCfg:function(){this.xField=null,this.yField=null,this.height=null,this.size=10,this.reverseOrder=!1,this.adjustNames=["y"]},processOneDimStack:function(t){var u=this,s=u.xField,c=u.yField||"y",r=u.height,h={};u.reverseOrder&&(t=t.slice(0).reverse());for(var n=0,i=t.length;n<i;n++)for(var a=t[n],o=0,l=a.length;o<l;o++){var f=a[o],v=f.size||u.size,b=v*2/r,g=f[s];h[g]||(h[g]=b/2),f[c]=h[g],h[g]+=b}},processAdjust:function(t){this.yField?this.processStack(t):this.processOneDimStack(t)}}},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var u=e(4),s=e(6),c=e(33),r=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i._initDefaultCfg=function(){this.xField=null,this.yField=null},i.processAdjust=function(o){this.processStack(o)},i.processStack=function(o){var l=this,f=l.xField,v=l.yField,b=o.length,g={positive:{},negative:{}};l.reverseOrder&&(o=o.slice(0).reverse());for(var m=0;m<b;m++)for(var _=o[m],M=0,x=_.length;M<x;M++){var y=_[M],S=y[f]||0,P=y[v],A=S.toString();if(P=u(P)?P[1]:P,!s(P)){var O=P>=0?"positive":"negative";g[O][A]||(g[O][A]=0),y[v]=[g[O][A],P+g[O][A]],g[O][A]+=P}}},n}(c);c.Stack=r,E.exports=r},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var u=e(2),s=e(168),c=e(4),r={merge:e(54)},h=e(33),n=function(i){t(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o._initDefaultCfg=function(){this.xField=null,this.yField=null,this.cacheMax=null,this.adjustNames=["y"],this.groupFields=null},o._getMax=function(f){var v=this,b=v.mergeData,g=s(b,function(M){var x=M[f];return c(x)?Math.max.apply(null,x):x}),m=g[f],_=c(m)?Math.max.apply(null,m):m;return _},o._getXValuesMax=function(){var f=this,v=f.yField,b=f.xField,g={},m=f.mergeData;return u(m,function(_){var M=_[b],x=_[v],y=c(x)?Math.max.apply(null,x):x;g[M]=g[M]||0,g[M]<y&&(g[M]=y)}),g},o.processAdjust=function(f){var v=this,b=r.merge(f);v.mergeData=b,v._processSymmetric(f),v.mergeData=null},o._processSymmetric=function(f){var v=this,b=v.xField,g=v.yField,m=v._getMax(g),_=f[0][0],M;_&&c(_[g])&&(M=v._getXValuesMax()),u(f,function(x){u(x,function(y){var S=y[g],P;if(c(S)){var A=y[b],O=M[A];P=(m-O)/2;var L=[];u(S,function(H){L.push(P+H)}),y[g]=L}else P=(m-S)/2,y[g]=[P,S+P]})})},a}(h);h.Symmetric=n,E.exports=n},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var u=e(15),s=e(107),c=e(34),r=function(h){t(n,h);function n(a){var o;return o=h.call(this,a)||this,o.names=["color"],o.type="color",o.gradient=null,u(o.values)&&(o.linear=!0),o}var i=n.prototype;return i.getLinearValue=function(o){var l=this.gradient;if(!l){var f=this.values;l=s.gradient(f),this.gradient=l}return l(o)},n}(c);E.exports=r},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var u=e(34),s=function(c){t(r,c);function r(h){var n;return n=c.call(this,h)||this,n.names=["opacity"],n.type="opacity",n.gradient=null,n}return r}(u);E.exports=s},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var u=e(6),s=e(4),c=e(2),r=e(34),h=function(n){t(i,n);function i(o){var l;return l=n.call(this,o)||this,l.names=["x","y"],l.type="position",l}var a=i.prototype;return a.mapping=function(l,f){var v=this.scales,b=this.coord,g=v[0],m=v[1],_,M,x;if(u(l)||u(f))return[];if(s(f)&&s(l)){_=[],M=[];for(var y=0,S=0,P=l.length,A=f.length;y<P&&S<A;y++,S++)x=b.convertPoint({x:g.scale(l[y]),y:m.scale(f[S])}),_.push(x.x),M.push(x.y)}else if(s(f))l=g.scale(l),M=[],c(f,function(L){L=m.scale(L),x=b.convertPoint({x:l,y:L}),_&&_!==x.x?(s(_)||(_=[_]),_.push(x.x)):_=x.x,M.push(x.y)});else if(s(l))f=m.scale(f),_=[],c(l,function(L){L=g.scale(L),x=b.convertPoint({x:L,y:f}),M&&M!==x.y?(s(M)||(M=[M]),M.push(x.y)):M=x.y,_.push(x.x)});else{l=g.scale(l),f=m.scale(f);var O=b.convertPoint({x:l,y:f});_=O.x,M=O.y}return[_,M]},i}(r);E.exports=h},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var u=e(34),s=function(c){t(r,c);function r(n){var i;return i=c.call(this,n)||this,i.names=["shape"],i.type="shape",i.gradient=null,i}var h=r.prototype;return h.getLinearValue=function(i){var a=this.values,o=Math.round((a.length-1)*i);return a[o]},r}(u);E.exports=s},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var u=e(34),s=function(c){t(r,c);function r(h){var n;return n=c.call(this,h)||this,n.names=["size"],n.type="size",n.gradient=null,n}return r}(u);E.exports=s},function(E,T,e){function t(l){return function(){var f=r(l),v;if(c()){var b=r(this).constructor;v=Reflect.construct(f,arguments,b)}else v=f.apply(this,arguments);return u(this,v)}}function u(l,f){return f&&(typeof f=="object"||typeof f=="function")?f:s(l)}function s(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(l){return!1}}function r(l){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},r(l)}function h(l,f){l.prototype=Object.create(f.prototype),l.prototype.constructor=l,l.__proto__=f}var n=e(3),i=e(35),a=n.MatrixUtil.vec2,o=function(l){h(v,l);var f=t(v);function v(){return l.apply(this,arguments)||this}var b=v.prototype;return b.getDefaultCfg=function(){var m=l.prototype.getDefaultCfg.call(this);return n.mix({},m,{type:"circle",tickInterval:null,startAngle:-Math.PI/2,endAngle:Math.PI*3/2,line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},_labelOffset:5})},b.parseTick=function(m,_,M){return{text:m,value:_/M}},b._getCirclePoint=function(m,_){var M=this,x=M.get("center");return _=_||M.get("radius"),{x:x.x+Math.cos(m)*_,y:x.y+Math.sin(m)*_}},b.getTickPoint=function(m){var _=this,M=_.get("startAngle"),x=_.get("endAngle"),y=M+(x-M)*m;return _._getCirclePoint(y)},b.getSideVector=function(m,_){var M=this,x=M.get("center"),y=[_.x-x.x,_.y-x.y];if(!n.isNil(m)){var S=a.length(y);a.scale(y,y,m/S)}return y},b.getSidePoint=function(m,_){var M=this,x=M.getSideVector(_,m);return{x:m.x+x[0],y:m.y+x[1]}},b.getTickEnd=function(m,_){var M=this,x=M.get("tickLine");return _=_||x.length,M.getSidePoint(m,_)},b.getTextAnchor=function(m){var _;return n.snapEqual(m[0],0)?_="center":m[0]>0?_="left":m[0]<0&&(_="right"),_},b.getLinePath=function(){var m=this,_=m.get("center"),M=_.x,x=_.y,y=m.get("radius"),S=y,P=m.get("startAngle"),A=m.get("endAngle"),O=m.get("inner"),L=[];if(Math.abs(A-P)===Math.PI*2)L=[["M",M,x],["m",0,-S],["a",y,S,0,1,1,0,2*S],["a",y,S,0,1,1,0,-2*S],["z"]];else{var H=m._getCirclePoint(P),F=m._getCirclePoint(A),Z=Math.abs(A-P)>Math.PI?1:0,G=P>A?0:1;if(!O)L=[["M",M,x],["L",H.x,H.y],["A",y,S,0,Z,G,F.x,F.y],["L",M,x]];else{var U=m.getSideVector(O*y,H),Y=m.getSideVector(O*y,F),J={x:U[0]+M,y:U[1]+x},rt={x:Y[0]+M,y:Y[1]+x};L=[["M",J.x,J.y],["L",H.x,H.y],["A",y,S,0,Z,G,F.x,F.y],["L",rt.x,rt.y],["A",y*O,S*O,0,Z,Math.abs(G-1),J.x,J.y]]}}return L},b.addLabel=function(m,_,M){var x=this,y=x.get("label").offset||x.get("_labelOffset")||.001;_=x.getSidePoint(_,y),l.prototype.addLabel.call(this,m,_,M)},b.autoRotateLabels=function(){var m=this,_=m.get("ticks"),M=m.get("labelRenderer");if(M&&_.length>12){var x=m.get("radius"),y=m.get("startAngle"),S=m.get("endAngle"),P=S-y,A=P/(_.length-1),O=Math.sin(A/2)*x*2,L=m.getMaxLabelWidth(M);n.each(M.get("group").get("children"),function(H,F){var Z=_[F],G=Z.value*P+y,U=G%(Math.PI*2);L<O?(U<=0&&(G=G+Math.PI),U>Math.PI&&(G=G-Math.PI),G=G-Math.PI/2,H.attr("textAlign","center")):U>Math.PI/2?G=G-Math.PI:U<Math.PI/2*-1&&(G=G+Math.PI),H.rotateAtStart(G)})}},v}(i);E.exports=o},function(E,T,e){function t(v){return function(){var b=r(v),g;if(c()){var m=r(this).constructor;g=Reflect.construct(b,arguments,m)}else g=b.apply(this,arguments);return u(this,g)}}function u(v,b){return b&&(typeof b=="object"||typeof b=="function")?b:s(v)}function s(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function r(v){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},r(v)}function h(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}var n=e(3),i=e(35),a=n.MatrixUtil,o=n.PathUtil,l=a.vec2,f=function(v){h(g,v);var b=t(g);function g(){return v.apply(this,arguments)||this}var m=g.prototype;return m.getDefaultCfg=function(){var M=v.prototype.getDefaultCfg.call(this);return n.mix({},M,{inner:0,type:"helix",line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},startAngle:1.25*Math.PI,endAngle:7.25*Math.PI,a:0,center:null,axisStart:null,crp:[]})},m.getLinePath=function(){var M=this,x=M.get("crp"),y=M.get("axisStart"),S=o.catmullRomToBezier(x);return S.unshift(["M",y.x,y.y]),S},m.getTickPoint=function(M){var x=this,y=x.get("startAngle"),S=x.get("endAngle"),P=y+(S-y)*M;return x._getHelixPoint(P)},m._getHelixPoint=function(M){var x=this,y=x.get("center"),S=x.get("a"),P=S*M+x.get("inner");return{x:y.x+Math.cos(M)*P,y:y.y+Math.sin(M)*P}},m.getSideVector=function(M,x){var y=this,S=y.get("center"),P=[x.x-S.x,x.y-S.y];if(M){var A=l.length(P);l.scale(P,P,M/A)}return P},m.getSidePoint=function(M,x){var y=this,S=y.getSideVector(x,M);return{x:M.x+S[0],y:M.y+S[1]}},m.getTickEnd=function(M,x){var y=this,S=y.get("tickLine");return x=x||S.length,y.getSidePoint(M,x)},g}(i);E.exports=f},function(E,T,e){var t=e(35);t.Base=t,t.Circle=e(238),t.Grid=e(108),t.Helix=e(239),t.Line=e(241),t.Polyline=e(242),E.exports=t},function(E,T,e){function t(f){return function(){var v=r(f),b;if(c()){var g=r(this).constructor;b=Reflect.construct(v,arguments,g)}else b=v.apply(this,arguments);return u(this,b)}}function u(f,v){return v&&(typeof v=="object"||typeof v=="function")?v:s(f)}function s(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function r(f){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},r(f)}function h(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var n=e(35),i=e(3),a=i.MatrixUtil,o=a.vec2,l=function(f){h(b,f);var v=t(b);function b(){return f.apply(this,arguments)||this}var g=b.prototype;return g.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return i.mix({},_,{x:null,y:null,line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},isVertical:!1,start:null,end:null})},g._getAvgLabelLength=function(_){var M=_.get("group").get("children");return M[1].attr("x")-M[0].attr("x")},g._getAvgLabelHeightSpace=function(_){var M=_.get("group").get("children");return M[1].attr("y")-M[0].attr("y")},g.getSideVector=function(_){var M=this,x=M.get("isVertical"),y=M.get("factor");if(!i.isNumber(_))return[0,0];var S=M.get("start"),P=M.get("end"),A=M.getAxisVector(),O=o.normalize([],A),L=!1;(x&&S.y<P.y||!x&&S.x>P.x)&&(L=!0);var H=o.vertical([],O,L);return o.scale([],H,_*y)},g.getAxisVector=function(){var _=this.get("start"),M=this.get("end");return[M.x-_.x,M.y-_.y]},g.getLinePath=function(){var _=this,M=_.get("start"),x=_.get("end"),y=[];return y.push(["M",M.x,M.y]),y.push(["L",x.x,x.y]),y},g.getTickEnd=function(_,M){var x=this,y=x.getSideVector(M);return{x:_.x+y[0],y:_.y+y[1]}},g.getTickPoint=function(_){var M=this,x=M.get("start"),y=M.get("end"),S=y.x-x.x,P=y.y-x.y;return{x:x.x+S*_,y:x.y+P*_}},g.renderTitle=function(){var _=this,M=_.get("title"),x=_.getTickPoint(.5),y=M.offset;if(i.isNil(y)){y=20;var S=_.get("labelsGroup");if(S){var P=_.getMaxLabelWidth(S),A=_.get("label").offset||_.get("_labelOffset");y+=P+A}}var O=M.textStyle,L=i.mix({},O);if(M.text){var H=_.getAxisVector();if(M.autoRotate&&i.isNil(O.rotate)){var F=0;if(!i.snapEqual(H[1],0)){var Z=[1,0],G=[H[0],H[1]];F=o.angleTo(G,Z,!0)}L.rotate=F*(180/Math.PI)}else i.isNil(O.rotate)||(L.rotate=O.rotate/180*Math.PI);var U=_.getSideVector(y),Y,J=M.position;J==="start"?Y={x:this.get("start").x+U[0],y:this.get("start").y+U[1]}:J==="end"?Y={x:this.get("end").x+U[0],y:this.get("end").y+U[1]}:Y={x:x.x+U[0],y:x.y+U[1]},L.x=Y.x,L.y=Y.y,L.text=M.text;var rt=_.get("group"),ft=rt.addShape("Text",{zIndex:2,attrs:L});ft.name="axis-title",_.get("appendInfo")&&ft.setSilent("appendInfo",_.get("appendInfo"))}},g.autoRotateLabels=function(){var _=this,M=_.get("labelRenderer"),x=_.get("title");if(M){var y=M.get("group"),S=y.get("children"),P=_.get("label").offset,A=12,O=x?x.offset:48;if(O<0)return;var L=_.getAxisVector(),H,F;if(i.snapEqual(L[0],0)&&x&&x.text)F=_.getMaxLabelWidth(M),F>O-P-A&&(H=Math.acos((O-P-A)/F)*-1);else if(i.snapEqual(L[1],0)&&S.length>1){var Z=Math.abs(_._getAvgLabelLength(M));F=_.getMaxLabelWidth(M),F>Z&&(H=Math.asin((O-P-A)*1.25/F))}if(H){var G=_.get("factor");i.each(S,function(U){U.rotateAtStart(H),i.snapEqual(L[1],0)&&(G>0?U.attr("textAlign","left"):U.attr("textAlign","right"))})}}},g.autoHideLabels=function(){var _=this,M=_.get("labelRenderer"),x,y,S=8;if(M){var P=M.get("group"),A=P.get("children"),O=_.getAxisVector();if(A.length<2)return;if(i.snapEqual(O[0],0)){var L=_.getMaxLabelHeight(M)+S,H=Math.abs(_._getAvgLabelHeightSpace(M));L>H&&(x=L,y=H)}else if(i.snapEqual(O[1],0)&&A.length>1){var F=_.getMaxLabelWidth(M)+S,Z=Math.abs(_._getAvgLabelLength(M));F>Z&&(x=F,y=Z)}if(x&&y){var G=Math.ceil(x/y);i.each(A,function(U,Y){Y%G!=0&&U.attr("text","")})}}},b}(n);E.exports=l},function(E,T,e){function t(v){return function(){var b=r(v),g;if(c()){var m=r(this).constructor;g=Reflect.construct(b,arguments,m)}else g=b.apply(this,arguments);return u(this,g)}}function u(v,b){return b&&(typeof b=="object"||typeof b=="function")?b:s(v)}function s(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function r(v){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},r(v)}function h(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}var n=e(3),i=e(35),a=n.MatrixUtil,o=n.PathUtil,l=a.vec2,f=function(v){h(g,v);var b=t(g);function g(){return v.apply(this,arguments)||this}var m=g.prototype;return m.getDefaultCfg=function(){var M=v.prototype.getDefaultCfg.call(this);return n.mix({},M,{type:"polyline"})},m.getLinePath=function(){var M=this,x=M.get("tickPoints"),y=M.get("start"),S=M.get("end"),P=[];P.push(y.x),P.push(y.y),n.each(x,function(O){P.push(O.x),P.push(O.y)}),P.push(S.x),P.push(S.y);var A=o.catmullRomToBezier(P);return A.unshift(["M",y.x,y.y]),A},m.getTickPoint=function(M,x){var y=this.get("tickPoints");return y[x]},m.getTickEnd=function(M,x,y){var S=this,P=S.get("tickLine"),A=x||P.length,O=S.getSideVector(A,M,y);return{x:M.x+O[0],y:M.y+O[1]}},m.getSideVector=function(M,x,y){var S=this,P;if(y===0){if(P=S.get("start"),P.x===x.x&&P.y===x.y)return[0,0]}else{var A=S.get("tickPoints");P=A[y-1]}var O=[x.x-P.x,x.y-P.y],L=l.normalize([],O),H=l.vertical([],L,!1);return l.scale([],H,M)},g}(i);E.exports=f},function(E,T,e){function t(v){return function(){var b=r(v),g;if(c()){var m=r(this).constructor;g=Reflect.construct(b,arguments,m)}else g=b.apply(this,arguments);return u(this,g)}}function u(v,b){return b&&(typeof b=="object"||typeof b=="function")?b:s(v)}function s(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function r(v){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},r(v)}function h(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}var n=e(3),i=e(20),a=Math.PI,o=Math.atan;function l(v,b){var g=v.x-b.x,m=v.y-b.y,_;return m===0?g<0?_=a/2:_=270*a/180:g>=0&&m>0?_=a*2-o(g/m):g<=0&&m<0?_=a-o(g/m):g>0&&m<0?_=a+o(-g/m):g<0&&m>0&&(_=o(g/-m)),_}var f=function(v){h(g,v);var b=t(g);function g(){return v.apply(this,arguments)||this}var m=g.prototype;return m.getDefaultCfg=function(){var M=v.prototype.getDefaultCfg.call(this);return n.mix({},M,{name:"arc",start:null,end:null,style:{stroke:"#999",lineWidth:1}})},m.render=function(M,x){var y=this,S=y.parsePoint(M,y.get("start")),P=y.parsePoint(M,y.get("end"));if(!(!S||!P)){var A=M.getCenter(),O=Math.sqrt((S.x-A.x)*(S.x-A.x)+(S.y-A.y)*(S.y-A.y)),L,H=l(S,A),F=l(P,A);if(F<H&&(F+=a*2),n.isNumberEqual(S.x,P.x)&&n.isNumberEqual(S.y,P.y)&&(y.get("start")[0]!==y.get("end")[0]||y.get("start")[1]!==y.get("end")[1]))L=[["M",S.x,S.y],["A",O,O,0,1,1,2*A.x-S.x,2*A.y-S.y],["A",O,O,0,1,1,S.x,S.y]];else{var Z=(F-H)%(a*2),G=Z>a?1:0;L=[["M",S.x,S.y],["A",O,O,0,G,1,P.x,P.y]]}var U=x.addShape("path",{zIndex:y.get("zIndex"),attrs:n.mix({path:L},y.get("style"))});U.name="guide-arc",y.get("appendInfo")&&U.setSilent("appendInfo",y.get("appendInfo")),y.set("el",U)}},g}(i);E.exports=f},function(E,T,e){function t(o){return function(){var l=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(3),i=e(20),a=function(o){h(f,o);var l=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return n.mix({},g,{name:"dataMarker",zIndex:1,top:!0,position:null,style:{point:{r:3,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2},line:{stroke:"#A3B1BF",lineWidth:1},text:{fill:"#000000",opacity:.65,fontSize:12,textAlign:"start"}},display:{point:!0,line:!0,text:!0},lineLength:20,direction:"upward",autoAdjust:!0})},v.render=function(g,m){var _=this,M=_.parsePoint(g,_.get("position"));if(!!M){var x=m.addGroup();x.name="guide-data-marker";var y=_._getElementPosition(M),S=_.get("display"),P,A;if(S.line){var O=y.line;P=_._drawLine(O,x)}if(S.text&&_.get("content")){var L=y.text;A=_._drawText(L,x)}if(S.point){var H=y.point;_._drawPoint(H,x)}if(_.get("autoAdjust")){var F=x.getBBox(),Z=F.minX,G=F.minY,U=F.maxX,Y=F.maxY,J=g.start,rt=g.end;if(A){Z<=J.x&&A.attr("textAlign","start"),U>=rt.x&&A.attr("textAlign","end");var ft=_.get("direction");if(ft==="upward"&&G<=rt.y||ft!=="upward"&&Y>=J.y){var dt,ut;ft==="upward"&&G<=rt.y?(dt="top",ut=1):(dt="bottom",ut=-1),A.attr("textBaseline",dt);var Lt=0;if(_.get("display").line){Lt=_.get("lineLength");var Ft=[["M",M.x,M.y],["L",M.x,M.y+Lt*ut]];P.attr("path",Ft)}var Ot=M.y+(Lt+2)*ut;A.attr("y",Ot)}}}_.get("appendInfo")&&x.setSilent("appendInfo",_.get("appendInfo")),_.set("el",x)}},v._getElementPosition=function(g){var m=this,_=g.x,M=g.y,x=m.get("display").line?m.get("lineLength"):0,y=m.get("direction"),S=m.get("style").text;S.textBaseline=y==="upward"?"bottom":"top";var P=y==="upward"?-1:1,A={x:_,y:M},O={x:_,y:M},L={x:_,y:x*P+M},H={x:_,y:(x+2)*P+M};return{point:A,line:[O,L],text:H}},v._drawLine=function(g,m){var _=this,M=_.get("style").line,x=[["M",g[0].x,g[0].y],["L",g[1].x,g[1].y]],y=m.addShape("path",{attrs:n.mix({path:x},M)});return y},v._drawText=function(g,m){var _=this,M=this.get("style").text,x=m.addShape("text",{attrs:n.mix({text:_.get("content")},M,g)});return x},v._drawPoint=function(g,m){var _=this,M=_.get("style").point,x=m.addShape("circle",{attrs:n.mix({},M,g)});return x},f}(i);E.exports=a},function(E,T,e){function t(l){return function(){var f=r(l),v;if(c()){var b=r(this).constructor;v=Reflect.construct(f,arguments,b)}else v=f.apply(this,arguments);return u(this,v)}}function u(l,f){return f&&(typeof f=="object"||typeof f=="function")?f:s(l)}function s(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(l){return!1}}function r(l){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},r(l)}function h(l,f){l.prototype=Object.create(f.prototype),l.prototype.constructor=l,l.__proto__=f}var n=e(3),i=e(109),a=e(20),o=function(l){h(v,l);var f=t(v);function v(){return l.apply(this,arguments)||this}var b=v.prototype;return b.getDefaultCfg=function(){var m=l.prototype.getDefaultCfg.call(this);return n.mix({},m,{name:"dataRegion",start:null,end:null,content:"",style:{region:{lineWidth:0,fill:"#000000",opacity:.04},text:{textAlign:"center",textBaseline:"bottom",fontSize:12,fill:"rgba(0, 0, 0, .65)"}}})},b.render=function(m,_,M){var x=this,y=x.get("lineLength")||0,S=x._getRegionData(m,M);if(!!S.length){var P=x._getBBox(S),A=[];A.push(["M",S[0].x,P.yMin-y]);for(var O=0,L=S.length;O<L;O++){var H=["L",S[O].x,S[O].y];A.push(H)}A.push(["L",S[S.length-1].x,P.yMin-y]);var F=x.get("style"),Z=F.region,G=F.text,U=_.addGroup();U.name="guide-data-region",U.addShape("path",{attrs:n.mix({path:A},Z)});var Y=x.get("content");Y&&U.addShape("Text",{attrs:n.mix({x:(P.xMin+P.xMax)/2,y:P.yMin-y,text:Y},G)}),x.get("appendInfo")&&U.setSilent("appendInfo",x.get("appendInfo")),x.set("el",U)}},b._getRegionData=function(m,_){for(var M=this,x=M.get("start"),y=M.get("end"),S=i.getFirstScale(M.get("xScales")).field,P=i.getFirstScale(M.get("yScales")).field,A=n.isArray(x)?x[0]:x[S],O=n.isArray(y)?y[0]:y[S],L,H=[],F=0,Z=_.length;F<Z;F++){var G=_[F];if(G[S]===A&&(L=F),F>=L){var U=M.parsePoint(m,[G[S],G[P]]);U&&H.push(U)}if(G[S]===O)break}return H},b._getBBox=function(m){for(var _=[],M=[],x=0;x<m.length;x++)_.push(m[x].x),M.push(m[x].y);var y=n.arrayUtil.getRange(_),S=n.arrayUtil.getRange(M);return{xMin:y.min,xMax:y.max,yMin:S.min,yMax:S.max}},v}(a);E.exports=o},function(E,T,e){function t(l){return function(){var f=r(l),v;if(c()){var b=r(this).constructor;v=Reflect.construct(f,arguments,b)}else v=f.apply(this,arguments);return u(this,v)}}function u(l,f){return f&&(typeof f=="object"||typeof f=="function")?f:s(l)}function s(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(l){return!1}}function r(l){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(v){return v.__proto__||Object.getPrototypeOf(v)},r(l)}function h(l,f){l.prototype=Object.create(f.prototype),l.prototype.constructor=l,l.__proto__=f}var n=e(3),i=n.DomUtil,a=e(20),o=function(l){h(v,l);var f=t(v);function v(){return l.apply(this,arguments)||this}var b=v.prototype;return b.getDefaultCfg=function(){var m=l.prototype.getDefaultCfg.call(this);return n.mix({},m,{name:"html",zIndex:7,position:null,alignX:"middle",alignY:"middle",offsetX:null,offsetY:null,html:null})},b.render=function(m,_){var M=this,x=M.parsePoint(m,M.get("position"));if(!!x){var y=_.get("canvas").get("el").parentNode,S=i.createDom('<div class="g-guide"></div>');y.appendChild(S);var P=M.get("htmlContent")||M.get("html");if(n.isFunction(P)){var A=M.get("xScales"),O=M.get("yScales");P=P(A,O)}var L=i.createDom(P);S.appendChild(L),i.modifyCSS(S,{position:"absolute"}),M._setDomPosition(S,L,x),M.set("el",S)}},b._setDomPosition=function(m,_,M){var x=this,y=x.get("alignX"),S=x.get("alignY"),P=i.getOuterWidth(_),A=i.getOuterHeight(_),O={x:M.x,y:M.y};y==="middle"&&S==="top"?O.x-=Math.round(P/2):y==="middle"&&S==="bottom"?(O.x-=Math.round(P/2),O.y-=Math.round(A)):y==="left"&&S==="bottom"?O.y-=Math.round(A):y==="left"&&S==="middle"?O.y-=Math.round(A/2):y==="left"&&S==="top"?(O.x=M.x,O.y=M.y):y==="right"&&S==="bottom"?(O.x-=Math.round(P),O.y-=Math.round(A)):y==="right"&&S==="middle"?(O.x-=Math.round(P),O.y-=Math.round(A/2)):y==="right"&&S==="top"?O.x-=Math.round(P):(O.x-=Math.round(P/2),O.y-=Math.round(A/2));var L=x.get("offsetX");L&&(O.x+=L);var H=x.get("offsetY");H&&(O.y+=H),i.modifyCSS(m,{top:Math.round(O.y)+"px",left:Math.round(O.x)+"px",visibility:"visible",zIndex:x.get("zIndex")})},b.clear=function(){var m=this,_=m.get("el");_&&_.parentNode&&_.parentNode.removeChild(_)},v}(a);E.exports=o},function(E,T,e){function t(o){return function(){var l=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(3),i=e(20),a=function(o){h(f,o);var l=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return n.mix({},g,{type:"image",start:null,end:null,src:null,offsetX:null,offsetY:null})},v.render=function(g,m){var _=this,M=_.parsePoint(g,_.get("start"));if(!!M){var x={x:M.x,y:M.y};if(x.img=_.get("src"),!_.get("end"))x.width=_.get("width")||32,x.height=_.get("height")||32;else{var y=_.parsePoint(g,_.get("end"));if(!y)return;x.width=y.x-M.x,x.height=y.y-M.y}_.get("offsetX")&&(x.x+=_.get("offsetX")),_.get("offsetY")&&(x.y+=_.get("offsetY"));var S=m.addShape("Image",{zIndex:1,attrs:x});S.name="guide-image",_.get("appendInfo")&&S.setSilent("appendInfo",_.get("appendInfo")),_.set("el",S)}},f}(i);E.exports=a},function(E,T,e){E.exports={Guide:e(20),Arc:e(243),DataMarker:e(244),DataRegion:e(245),Html:e(246),Image:e(247),Line:e(249),Region:e(250),Text:e(251)}},function(E,T,e){function t(v){return function(){var b=r(v),g;if(c()){var m=r(this).constructor;g=Reflect.construct(b,arguments,m)}else g=b.apply(this,arguments);return u(this,g)}}function u(v,b){return b&&(typeof b=="object"||typeof b=="function")?b:s(v)}function s(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(v){return!1}}function r(v){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},r(v)}function h(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}var n=e(3),i=e(20),a=n.MatrixUtil.vec2,o=e(19),l=o.FONT_FAMILY,f=function(v){h(g,v);var b=t(g);function g(){return v.apply(this,arguments)||this}var m=g.prototype;return m.getDefaultCfg=function(){var M=v.prototype.getDefaultCfg.call(this);return n.mix({},M,{name:"line",start:null,end:null,lineStyle:{stroke:"#000",lineWidth:1},text:{position:"end",autoRotate:!0,style:{fill:"#999",fontSize:12,fontWeight:500,fontFamily:l},content:null}})},m.render=function(M,x){var y=this,S=y.parsePoint(M,y.get("start")),P=y.parsePoint(M,y.get("end"));if(!(!S||!P)){var A=x.addGroup({viewId:x.get("viewId")});y._drawLines(S,P,A);var O=y.get("text");O&&O.content&&y._drawText(S,P,A),y.set("el",A)}},m._drawLines=function(M,x,y){var S=[["M",M.x,M.y],["L",x.x,x.y]],P=y.addShape("Path",{attrs:n.mix({path:S},this.get("lineStyle"))});P.name="guide-line",this.get("appendInfo")&&P.setSilent("appendInfo",this.get("appendInfo"))},m._drawText=function(M,x,y){var S=this.get("text"),P=S.position,A=S.style||{},O;P==="start"?O=0:P==="center"?O=.5:n.isString(P)&&P.indexOf("%")!==-1?O=parseInt(P,10)/100:n.isNumber(P)?O=P:O=1,(O>1||O<0)&&(O=1);var L={x:M.x+(x.x-M.x)*O,y:M.y+(x.y-M.y)*O};if(S.offsetX&&(L.x+=S.offsetX),S.offsetY&&(L.y+=S.offsetY),L.text=S.content,L=n.mix({},L,A),S.autoRotate&&n.isNil(A.rotate)){var H=a.angleTo([x.x-M.x,x.y-M.y],[1,0],1);L.rotate=H}else n.isNil(A.rotate)||(L.rotate=A.rotate*Math.PI/180);var F=y.addShape("Text",{attrs:L});F.name="guide-line-text",this.get("appendInfo")&&F.setSilent("appendInfo",this.get("appendInfo"))},g}(i);E.exports=f},function(E,T,e){function t(o){return function(){var l=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(3),i=e(20),a=function(o){h(f,o);var l=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return n.mix({},g,{name:"region",zIndex:1,start:null,end:null,style:{lineWidth:0,fill:"#CCD7EB",opacity:.4}})},v.render=function(g,m){var _=this,M=_.get("style"),x=_._getPath(g);if(!!x.length){var y=m.addShape("path",{zIndex:_.get("zIndex"),attrs:n.mix({path:x},M)});y.name="guide-region",_.get("appendInfo")&&y.setSilent("appendInfo",_.get("appendInfo")),_.set("el",y)}},v._getPath=function(g){var m=this,_=m.parsePoint(g,m.get("start")),M=m.parsePoint(g,m.get("end"));if(!_||!M)return[];var x=[["M",_.x,_.y],["L",M.x,_.y],["L",M.x,M.y],["L",_.x,M.y],["z"]];return x},f}(i);E.exports=a},function(E,T,e){function t(o){return function(){var l=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(3),i=e(20),a=function(o){h(f,o);var l=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return n.mix({},g,{name:"text",position:null,content:null,style:{fill:"#999",fontSize:12,fontWeight:500,textAlign:"center"},offsetX:null,offsetY:null,top:!0})},v.render=function(g,m){var _=this,M=_.parsePoint(g,_.get("position"));if(!!M){var x=n.mix({},_.get("style")),y=_.get("offsetX"),S=_.get("offsetY");y&&(M.x+=y),S&&(M.y+=S),x.rotate&&(x.rotate=x.rotate*Math.PI/180);var P=m.addShape("Text",{zIndex:_.get("zIndex"),attrs:n.mix({text:_.get("content")},x,M)});P.name="guide-text",_.get("appendInfo")&&P.setSilent("appendInfo",_.get("appendInfo")),_.set("el",P)}},f}(i);E.exports=a},function(E,T,e){var t=e(110);E.exports=t},function(E,T){E.exports=function(t,u){for(var s,c,r=[],h=0;h<t.length;h++)s=t[h].getBBox(),c=u[h].getBBox(),(s.width>c.width||s.height>c.height||s.width*s.height>c.width*c.height)&&r.push(t[h]);for(var n=0;n<r.length;n++)r[n].remove()}},function(E,T,e){var t=e(111);function u(s,c,r,h){var n=s.getBBox(),i=n.width,a=n.height,o={x:c,y:r,textAlign:"center"};switch(h){case 0:o.y-=a/2,o.textAlign="left";break;case 1:o.y-=a/2,o.textAlign="right";break;case 2:o.y+=a/2,o.textAlign="right";break;case 3:o.y+=a/2,o.textAlign="left";break;case 5:o.y-=a/2;break;case 6:o.y+=a/2;break;case 7:o.x+=i/2,o.textAlign="left";break;case 8:o.x-=i/2,o.textAlign="right";break;default:break}return s.attr(o),s.getBBox()}E.exports=function(s){for(var c=new t,r=[],h,n,i,a,o,l=0;l<s.length;l++){n=s[l],i=n.attr("x"),a=n.attr("y"),o=!1;for(var f=0;f<8;f++)if(h=u(n,i,a,f),c.hasGap(h)){c.fillGap(h),o=!0;break}o||r.push(n)}for(var v=0;v<r.length;v++)r[v].remove();return o}},function(E,T,e){var t=e(111),u=20;function s(c,r){var h=-1,n=c.attr("x"),i=c.attr("y"),a=c.getBBox(),o=Math.sqrt(a.width*a.width+a.height*a.height),l,f=-h,v=0,b=0,g=function(x){return[(x*=.1)*Math.cos(x),x*Math.sin(x)]};if(r.hasGap(a))return r.fillGap(a),!0;for(var m=!1,_=0;Math.min(Math.abs(v),Math.abs(b))<o&&_<u;)if(l=g(f+=h),v=~~l[0],b=~~l[1],c.attr({x:n+v,y:i+b}),_++,r.hasGap(c.getBBox())){r.fillGap(a),m=!0;break}return m}E.exports=function(c){for(var r,h=new t,n=[],i=0;i<c.length;i++)r=c[i],s(r,h)||n.push(r);for(var a=0;a<n.length;a++)n[a].remove()}},function(E,T,e){function t(y){return function(){var S=r(y),P;if(c()){var A=r(this).constructor;P=Reflect.construct(S,arguments,A)}else P=S.apply(this,arguments);return u(this,P)}}function u(y,S){return S&&(typeof S=="object"||typeof S=="function")?S:s(y)}function s(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(y){return!1}}function r(y){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},r(y)}function h(y,S){y.prototype=Object.create(S.prototype),y.prototype.constructor=y,y.__proto__=S}var n=e(3),i=e(113),a=e(19),o=a.FONT_FAMILY,l=n.DomUtil,f="g2-legend-list",v="g2-slip",b="g2-caret-up",g="g2-caret-down",m="rgba(0,0,0,0.65)",_="rgba(0,0,0,0.25)";function M(y,S){return y.getElementsByClassName(S)[0]}var x=function(y){h(P,y);var S=t(P);function P(){return y.apply(this,arguments)||this}var A=P.prototype;return A.getDefaultCfg=function(){var L=y.prototype.getDefaultCfg.call(this);return n.mix({},L,{type:"category-page-legend",container:null,caretStyle:{fill:"rgba(0,0,0,0.65)"},pageNumStyle:{display:"inline-block",fontSize:"12px",fontFamily:o,cursor:"default"},slipDomStyle:{width:"auto",height:"auto",position:"absolute"},slipTpl:'<div class="'+v+'" ><svg viewBox="64 64 896 896" class="g2-caret-up" data-icon="left" style = "display:inline-block;vertical-align:middle;" width="1em" height="1em" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg><p class="cur-pagenum" style = "display:inline-block;vertical-align:middle;">1</p><p class="next-pagenum" style = "display:inline-block;vertical-align:middle;"">/2</p><svg viewBox="64 64 896 896" class="g2-caret-down" data-icon="right" style = "display:inline-block;vertical-align:middle;" width="1em" height="1em" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></div>',slipWidth:65,legendOverflow:"unset"})},A.render=function(){y.prototype._renderHTML.call(this),this._renderFlipPage()},A._renderFlipPage=function(){var L=this.get("legendWrapper"),H=M(L,f),F=this.get("position"),Z=this.get("layout"),G=F==="right"||F==="left"||Z==="vertical",U=G?"block":"inline-block",Y=L.offsetHeight;if(L.scrollHeight>Y){var J=this.get("slipTpl"),rt=l.createDom(J),ft=M(rt,b),dt=M(rt,g);l.modifyCSS(ft,this.get("caretStyle")),l.modifyCSS(ft,{fill:"rgba(0,0,0,0.25)"}),l.modifyCSS(dt,this.get("caretStyle"));var ut=M(rt,"cur-pagenum"),Lt=M(rt,"next-pagenum"),Ft=this.get("pageNumStyle");if(l.modifyCSS(ut,n.mix({},Ft,{paddingLeft:"10px"})),l.modifyCSS(Lt,n.mix({},Ft,{opacity:.3,paddingRight:"10px"})),l.modifyCSS(rt,n.mix({},this.get("slipDomStyle"),G?{top:Y+"px"}:{right:0,top:"50%",transform:"translate(0, -50%)"})),L.style.overflow=this.get("legendOverflow"),L.appendChild(rt),!G){var Ot=Math.max(L.offsetWidth-10-rt.offsetWidth,0);l.modifyCSS(H,{maxWidth:Ot+"px"})}for(var St=H.childNodes,xt=0,At=1,nt=[],Mt=0;Mt<St.length;Mt++)St[Mt].style.display=U,xt=St[Mt].offsetTop+St[Mt].offsetHeight,xt>Y&&(At++,nt.forEach(function(z){z.style.display="none"}),nt=[]),nt.push(St[Mt]);Lt.innerText="/"+At,St.forEach(function(z){z.style.display=U,xt=z.offsetTop+z.offsetHeight,xt>Y&&(z.style.display="none")}),ft.addEventListener("click",function(){if(St[0].style.display!==U){var z=-1;St.forEach(function(et,at){et.style.display===U&&(z=z===-1?at:z,et.style.display="none")});for(var Q=z-1;Q>=0&&(St[Q].style.display=U,xt=St[z-1].offsetTop+St[z-1].offsetHeight,St[Q].style.display="none",xt<=Y);Q--)St[Q].style.display=U;var ht=Number.parseInt(ut.innerText,10)-1;ht===1?ft.style.fill=_:ft.style.fill=m,dt.style.fill=m,ut.innerText=ht}}),dt.addEventListener("click",function(){if(St[St.length-1].style.display!==U){var z=-1;St.forEach(function(et,at){et.style.display===U&&(z=at,et.style.display="none")});for(var Q=z+1;Q<St.length&&(St[Q].style.display=U,xt=St[Q].offsetTop+St[Q].offsetHeight,St[Q].style.display="none",xt<=Y);Q++)St[Q].style.display=U;var ht=Number.parseInt(ut.innerText,10)+1;ht===At?dt.style.fill=_:dt.style.fill=m,ft.style.fill=m,ut.innerText=ht}}),this.set("slipDom",rt)}},A.destroy=function(){var L=this.get("slipDom");L&&L.parentNode&&L.parentNode.removeChild(L),y.prototype.destroy.call(this)},P}(i);E.exports=x},function(E,T,e){function t(f){return function(){var v=r(f),b;if(c()){var g=r(this).constructor;b=Reflect.construct(v,arguments,g)}else b=v.apply(this,arguments);return u(this,b)}}function u(f,v){return v&&(typeof v=="object"||typeof v=="function")?v:s(f)}function s(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function r(f){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},r(f)}function h(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var n=e(65),i=n.ColorUtil,a=e(3),o=e(67),l=function(f){h(b,f);var v=t(b);function b(){return f.apply(this,arguments)||this}var g=b.prototype;return g.getDefaultCfg=function(){var _=f.prototype.getDefaultCfg.call(this);return a.mix({},_,{type:"color-legend",layout:"vertical",triggerAttr:{fill:"#fff",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10,shadowColor:"#ccc",radius:3},isSegment:!1})},g._setPercentage=function(){var _=this.get("items");if(!_[0].percentage){var M=_[0].value,x=_[_.length-1].value;a.each(_,function(y){y.percentage=(y.value-M)/(x-M)})}},g._renderSliderShape=function(){this._setPercentage();var _=this.get("slider"),M=_.get("backgroundElement"),x=this.get("width"),y=this.get("height"),S=this.get("layout"),P=this.get("items"),A="",O;return S==="vertical"?(A+="l (90) ",a.each(P,function(L){O=i.toRGB(L.color),A+=1-L.percentage+":"+O+" "})):(A+="l (0) ",a.each(P,function(L){O=i.toRGB(L.color),A+=L.percentage+":"+O+" "})),this._addMiddleBar(M,"Rect",{x:0,y:0,width:x,height:y,fill:A,strokeOpacity:0})},g._renderUnslidable=function(){this._setPercentage();var _=this.get("titleShape"),M=this.get("titleGap");M=_?_.getBBox().height+M:M;var x=this.get("width"),y=this.get("height"),S=this.get("layout"),P=this.get("items"),A="",O,L=[],H=this.get("group"),F=H.addGroup(),Z=P.length;if(S==="vertical"){A+="l (90) ";for(var G=0;G<Z;G+=1){if(G!==0&&G!==Z-1&&(L.push(["M",0,y-P[G].percentage*y]),L.push(["L",x,y-P[G].percentage*y])),O=i.toRGB(P[G].color),A+=1-P[G].percentage+":"+O+" ",this.get("isSegment")&&G>0){var U=i.toRGB(P[G-1].color);A+=1-P[G].percentage+":"+U+" "}F.addShape("text",{attrs:a.mix({},{x:x+this.get("textOffset")/2,y:y-P[G].percentage*y,text:this._formatItemValue(P[G].value)+""},this.get("textStyle"),{textAlign:"start"})})}}else{A+="l (0) ";for(var Y=0;Y<Z;Y+=1){if(Y!==0&&Y!==Z-1&&(L.push(["M",P[Y].percentage*x,0]),L.push(["L",P[Y].percentage*x,y])),O=i.toRGB(P[Y].color),this.get("isSegment")&&Y>0){var J=i.toRGB(P[Y-1].color);A+=P[Y].percentage+":"+J+" "}A+=P[Y].percentage+":"+O+" ",F.addShape("text",{attrs:a.mix({},{x:P[Y].percentage*x,y:y+5+this.get("textOffset"),text:this._formatItemValue(P[Y].value)+""},this.get("textStyle"))})}}F.addShape("rect",{attrs:{x:0,y:0,width:x,height:y,fill:A,strokeOpacity:0}}),F.addShape("path",{attrs:a.mix({path:L},this.get("lineStyle"))}),F.move(0,M)},b}(o);E.exports=l},function(E,T,e){E.exports={Category:e(114),CatHtml:e(113),CatPageHtml:e(256),Color:e(257),Size:e(260),CircleSize:e(259)}},function(E,T,e){function t(b){return function(){var g=r(b),m;if(c()){var _=r(this).constructor;m=Reflect.construct(g,arguments,_)}else m=g.apply(this,arguments);return u(this,m)}}function u(b,g){return g&&(typeof g=="object"||typeof g=="function")?g:s(b)}function s(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(b){return!1}}function r(b){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},r(b)}function h(b,g){b.prototype=Object.create(g.prototype),b.prototype.constructor=b,b.__proto__=g}var n=e(3),i=e(67),a=2,o=16,l=16,f=5,v=function(b){h(m,b);var g=t(m);function m(){return b.apply(this,arguments)||this}var _=m.prototype;return _.getDefaultCfg=function(){var x=b.prototype.getDefaultCfg.call(this);return n.mix({},x,{type:"size-circle-legend",width:100,height:200,_unslidableCircleStyle:{stroke:"rgb(99, 161, 248)",fill:"rgb(99, 161, 248)",fillOpacity:.3,lineWidth:1.5},triggerAttr:{fill:"white",shadowOffsetX:-2,shadowOffsetY:2,shadowBlur:10,shadowColor:"#ccc"},frontMiddleBarStyle:{fill:"rgb(64, 141, 251)"}})},_._renderSliderShape=function(){var x=f,y=this.get("slider"),S=y.get("backgroundElement"),P=this.get("layout"),A=P==="vertical"?a:this.get("width"),O=P==="vertical"?this.get("height"):a,L=x,H=this.get("height")/2,F=this.get("frontMiddleBarStyle"),Z=P==="vertical"?[[0,0],[A,0],[A,O],[0,O]]:[[0,H+O],[0,H-O],[L+A-4,H-O],[L+A-4,H+O]];return this._addMiddleBar(S,"Polygon",n.mix({points:Z},F))},_._addHorizontalTrigger=function(x,y,S,P){var A=this.get("slider"),O=A.get(x+"HandleElement"),L=-this.get("height")/2,H=O.addShape("circle",{attrs:n.mix({x:0,y:L,r:P},y)}),F=O.addShape("text",{attrs:n.mix(S,{x:0,y:L+P+10,textAlign:"center",textBaseline:"middle"})}),Z=this.get("layout"),G=Z==="vertical"?"ns-resize":"ew-resize";H.attr("cursor",G),F.attr("cursor",G),this.set(x+"ButtonElement",H),this.set(x+"TextElement",F)},_._addVerticalTrigger=function(x,y,S,P){var A=this.get("slider"),O=A.get(x+"HandleElement"),L=O.addShape("circle",{attrs:n.mix({x:0,y:0,r:P},y)}),H=O.addShape("text",{attrs:n.mix(S,{x:P+10,y:0,textAlign:"start",textBaseline:"middle"})}),F=this.get("layout"),Z=F==="vertical"?"ns-resize":"ew-resize";L.attr("cursor",Z),H.attr("cursor",Z),this.set(x+"ButtonElement",L),this.set(x+"TextElement",H)},_._renderTrigger=function(){var x=this.get("firstItem"),y=this.get("lastItem"),S=this.get("layout"),P=this.get("textStyle"),A=this.get("triggerAttr"),O=n.mix({},A),L=n.mix({},A),H=f,F=l,Z=n.mix({text:this._formatItemValue(x.value)+""},P),G=n.mix({text:this._formatItemValue(y.value)+""},P);S==="vertical"?(this._addVerticalTrigger("min",O,Z,H),this._addVerticalTrigger("max",L,G,F)):(this._addHorizontalTrigger("min",O,Z,H),this._addHorizontalTrigger("max",L,G,F))},_._bindEvents=function(){var x=this;if(this.get("slidable")){var y=this.get("slider");y.on("sliderchange",function(S){var P=S.range,A=x.get("firstItem").value,O=x.get("lastItem").value,L=A+P[0]/100*(O-A),H=A+P[1]/100*(O-A),F=f+P[0]/100*(l-f),Z=f+P[1]/100*(l-f);x._updateElement(L,H,F,Z);var G=new Event("itemfilter",S,!0,!0);G.range=[L,H],x.emit("itemfilter",G)})}},_._updateElement=function(x,y,S,P){b.prototype._updateElement.call(this,x,y);var A=this.get("minTextElement"),O=this.get("maxTextElement"),L=this.get("minButtonElement"),H=this.get("maxButtonElement");L.attr("r",S),H.attr("r",P);var F=this.get("layout");if(F==="vertical")A.attr("x",S+10),O.attr("x",P+10);else{var Z=-this.get("height")/2;A.attr("y",Z+S+10),O.attr("y",Z+P+10)}},_._addCircle=function(x,y,S,P,A){var O=this.get("group"),L=O.addGroup(),H=this.get("_unslidableCircleStyle"),F=this.get("textStyle"),Z=this.get("titleShape"),G=this.get("titleGap");Z&&(G+=Z.getBBox().height),L.addShape("circle",{attrs:n.mix({x,y:y+G,r:S===0?1:S},H)}),this.get("layout")==="vertical"?L.addShape("text",{attrs:n.mix({x:A+20+this.get("textOffset"),y:y+G,text:P===0?"0":P},F)}):L.addShape("text",{attrs:n.mix({x,y:y+G+A+13+this.get("textOffset"),text:P===0?"0":P},F)})},_._renderUnslidable=function(){var x=this.get("firstItem").value,y=this.get("lastItem").value;if(x>y){var S=y;y=x,x=S}var P=this._formatItemValue(x),A=this._formatItemValue(y),O=x<f?f:x,L=y>l?l:y;O>L&&(O=f,L=l),this.get("layout")==="vertical"?(this._addCircle(L,L,O,P,2*L),this._addCircle(L,L*2+o+O,L,A,2*L)):(this._addCircle(L,L,O,P,2*L),this._addCircle(L*2+o+O,L,L,A,2*L))},_.activate=function(x){!this.get("slidable")||b.prototype.activate.call(this,x)},m}(i);E.exports=v},function(E,T,e){function t(o){return function(){var l=r(o),f;if(c()){var v=r(this).constructor;f=Reflect.construct(l,arguments,v)}else f=l.apply(this,arguments);return u(this,f)}}function u(o,l){return l&&(typeof l=="object"||typeof l=="function")?l:s(o)}function s(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}function r(o){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)},r(o)}function h(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var n=e(3),i=e(67),a=function(o){h(f,o);var l=t(f);function f(){return o.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=o.prototype.getDefaultCfg.call(this);return n.mix({},g,{type:"size-legend",width:100,height:200,_unslidableElementStyle:{fill:"#4E7CCC",fillOpacity:1},frontMiddleBarStyle:{fill:"rgb(64, 141, 251)"}})},v._renderSliderShape=function(){var g=this.get("slider"),m=g.get("backgroundElement"),_=this.get("layout"),M=this.get("width"),x=this.get("height"),y=this.get("height")/2,S=this.get("frontMiddleBarStyle"),P=_==="vertical"?[[0,0],[M,0],[M,x],[M-4,x]]:[[0,y+x/2],[0,y+x/2-4],[M,y-x/2],[M,y+x/2]];return this._addMiddleBar(m,"Polygon",n.mix({points:P},S))},v._renderUnslidable=function(){var g=this.get("layout"),m=this.get("width"),_=this.get("height"),M=this.get("frontMiddleBarStyle"),x=g==="vertical"?[[0,0],[m,0],[m,_],[m-4,_]]:[[0,_],[0,_-4],[m,0],[m,_]],y=this.get("group"),S=y.addGroup();S.addShape("Polygon",{attrs:n.mix({points:x},M)});var P=this._formatItemValue(this.get("firstItem").value),A=this._formatItemValue(this.get("lastItem").value);this.get("layout")==="vertical"?(this._addText(m+10,_-3,P),this._addText(m+10,3,A)):(this._addText(0,_,P),this._addText(m,_,A))},v._addText=function(g,m,_){var M=this.get("group"),x=M.addGroup(),y=this.get("textStyle"),S=this.get("titleShape"),P=this.get("titleGap");S&&(P+=S.getBBox().height),this.get("layout")==="vertical"?x.addShape("text",{attrs:n.mix({x:g+this.get("textOffset"),y:m,text:_===0?"0":_},y)}):(m+=P+this.get("textOffset")-20,S||(m+=10),x.addShape("text",{attrs:n.mix({x:g,y:m,text:_===0?"0":_},y)}))},f}(i);E.exports=a},function(E,T,e){var t=e(3),u=t.DomUtil,s=t.Group,c=function r(h){r.superclass.constructor.call(this,h)};t.extend(c,s),t.augment(c,{getDefaultCfg:function(){return{range:null,middleAttr:{fill:"#fff",fillOpacity:0},backgroundElement:null,minHandleElement:null,maxHandleElement:null,middleHandleElement:null,currentTarget:null,layout:"vertical",width:null,height:null,pageX:null,pageY:null}},_beforeRenderUI:function(){var h=this.get("layout"),n=this.get("backgroundElement"),i=this.get("minHandleElement"),a=this.get("maxHandleElement"),o=this.addShape("rect",{attrs:this.get("middleAttr")}),l=h==="vertical"?"ns-resize":"ew-resize";this.add([n,i,a]),this.set("middleHandleElement",o),n.set("zIndex",0),o.set("zIndex",1),i.set("zIndex",2),a.set("zIndex",2),o.attr("cursor","move"),i.attr("cursor",l),a.attr("cursor",l),this.sort()},_renderUI:function(){this.get("layout")==="horizontal"?this._renderHorizontal():this._renderVertical()},_transform:function(h){var n=this.get("range"),i=n[0]/100,a=n[1]/100,o=this.get("width"),l=this.get("height"),f=this.get("minHandleElement"),v=this.get("maxHandleElement"),b=this.get("middleHandleElement");f.resetMatrix(),v.resetMatrix(),h==="horizontal"?(b.attr({x:o*i,y:0,width:(a-i)*o,height:l}),f.translate(i*o,l),v.translate(a*o,l)):(b.attr({x:0,y:l*(1-a),width:o,height:(a-i)*l}),f.translate(1,(1-i)*l),v.translate(1,(1-a)*l))},_renderHorizontal:function(){this._transform("horizontal")},_renderVertical:function(){this._transform("vertical")},_bindUI:function(){this.on("mousedown",t.wrapBehavior(this,"_onMouseDown"))},_isElement:function(h,n){var i=this.get(n);if(h===i)return!0;if(i.isGroup){var a=i.get("children");return a.indexOf(h)>-1}return!1},_getRange:function(h,n){var i=h+n;return i=i>100?100:i,i=i<0?0:i,i},_updateStatus:function(h,n){var i=h==="x"?this.get("width"):this.get("height");h=t.upperFirst(h);var a=this.get("range"),o=this.get("page"+h),l=this.get("currentTarget"),f=this.get("rangeStash"),v=this.get("layout"),b=v==="vertical"?-1:1,g=n["page"+h],m=g-o,_=m/i*100*b,M;a[1]<=a[0]?(this._isElement(l,"minHandleElement")||this._isElement(l,"maxHandleElement"))&&(a[0]=this._getRange(_,a[0]),a[1]=this._getRange(_,a[0])):(this._isElement(l,"minHandleElement")&&(a[0]=this._getRange(_,a[0])),this._isElement(l,"maxHandleElement")&&(a[1]=this._getRange(_,a[1]))),this._isElement(l,"middleHandleElement")&&(M=f[1]-f[0],a[0]=this._getRange(_,a[0]),a[1]=a[0]+M,a[1]>100&&(a[1]=100,a[0]=a[1]-M)),this.emit("sliderchange",{range:a}),this.set("page"+h,g),this._renderUI(),this.get("canvas").draw()},_onMouseDown:function(h){var n=h.currentTarget,i=h.event,a=this.get("range");i.stopPropagation(),i.preventDefault(),this.set("pageX",i.pageX),this.set("pageY",i.pageY),this.set("currentTarget",n),this.set("rangeStash",[a[0],a[1]]),this._bindCanvasEvents()},_bindCanvasEvents:function(){var h=this.get("canvas").get("containerDOM");this.onMouseMoveListener=u.addEventListener(h,"mousemove",t.wrapBehavior(this,"_onCanvasMouseMove")),this.onMouseUpListener=u.addEventListener(h,"mouseup",t.wrapBehavior(this,"_onCanvasMouseUp")),this.onMouseLeaveListener=u.addEventListener(h,"mouseleave",t.wrapBehavior(this,"_onCanvasMouseUp"))},_onCanvasMouseMove:function(h){if(!this._mouseOutArea(h)){var n=this.get("layout");n==="horizontal"?this._updateStatus("x",h):this._updateStatus("y",h)}},_onCanvasMouseUp:function(){this._removeDocumentEvents()},_removeDocumentEvents:function(){this.onMouseMoveListener.remove(),this.onMouseUpListener.remove()},_mouseOutArea:function(h){var n=this.get("canvas").get("el"),i=n.getBoundingClientRect(),a=this.get("parent"),o=a.getBBox(),l=a.attr("matrix")[6],f=a.attr("matrix")[7],v=l+o.width,b=f+o.height,g=h.clientX-i.x,m=h.clientY-i.y;return g<l||g>v||m<f||m>b}}),E.exports=c},function(E,T,e){function t(){return t=Object.assign||function(F){for(var Z=1;Z<arguments.length;Z++){var G=arguments[Z];for(var U in G)Object.prototype.hasOwnProperty.call(G,U)&&(F[U]=G[U])}return F},t.apply(this,arguments)}function u(F){return function(){var Z=h(F),G;if(r()){var U=h(this).constructor;G=Reflect.construct(Z,arguments,U)}else G=Z.apply(this,arguments);return s(this,G)}}function s(F,Z){return Z&&(typeof Z=="object"||typeof Z=="function")?Z:c(F)}function c(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function r(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(F){return!1}}function h(F){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(G){return G.__proto__||Object.getPrototypeOf(G)},h(F)}function n(F,Z){F.prototype=Object.create(Z.prototype),F.prototype.constructor=F,F.__proto__=Z}var i=e(31),a=e(68),o=e(3),l=o.DomUtil,f=e(265),v=e(116),b=e(118),g=e(117),m="g2-tooltip",_="g2-tooltip-title",M="g2-tooltip-list",x="g2-tooltip-marker",y="g2-tooltip-value",S="g2-tooltip-list-item",P=5,A=i.Marker;function O(F,Z){return F.getElementsByClassName(Z)[0]}function L(F,Z){return Object.keys(F).forEach(function(G){Z[G]&&(F[G]=o.mix(F[G],Z[G]))}),F}var H=function(F){n(U,F);var Z=u(U),G=U.prototype;G.getDefaultCfg=function(){var J=F.prototype.getDefaultCfg.call(this);return o.mix({},J,{containerTpl:' <div class="'+m+'"> <div class="'+_+'"></div><ul class="'+M+'"></ul></div>',itemTpl:`<li data-index={index}>
      <svg viewBox="0 0 `+P+" "+P+'" class="'+x+`"></svg>
      {name}<span class="`+y+'">{value}</span></li>',htmlContent:null,follow:!0,enterable:!1})};function U(Y){var J;J=F.call(this,Y)||this,o.assign(c(J),b),o.assign(c(J),g);var rt=f;J.style=L(rt,Y),J._init_(),J.get("items")&&J.render();var ft=J.get("crosshairs");if(ft){var dt=ft.type==="rect"?J.get("backPlot"):J.get("frontPlot"),ut=new v(o.mix({plot:dt,plotRange:J.get("plotRange"),canvas:J.get("canvas")},J.get("crosshairs")));ut.hide(),J.set("crosshairGroup",ut)}return J}return G._init_=function(){var J=this,rt=J.get("containerTpl"),ft=J.get("canvas").get("el").parentNode,dt;if(!this.get("htmlContent")){if(/^\#/.test(rt)){var ut=rt.replace("#","");dt=document.getElementById(ut)}else dt=l.createDom(rt),l.modifyCSS(dt,J.style[m]),ft.appendChild(dt),ft.style.position="relative";J.set("container",dt)}},G.render=function(){var J=this;if(J.clear(),J.get("htmlContent")){var rt=J.get("canvas").get("el").parentNode,ft=J._getHtmlContent();rt.appendChild(ft),J.set("container",ft)}else J._renderTpl()},G._renderTpl=function(){var J=this,rt=J.get("showTitle"),ft=J.get("titleContent"),dt=J.get("container"),ut=O(dt,_),Lt=O(dt,M),Ft=J.get("items");ut&&rt&&(l.modifyCSS(ut,J.style[_]),ut.innerHTML=ft),Lt&&(l.modifyCSS(Lt,J.style[M]),o.each(Ft,function(Ot,St){Lt.appendChild(J._addItem(Ot,St))}))},G.clear=function(){var J=this.get("container");if(this.get("htmlContent"))J&&J.remove();else{var rt=O(J,_),ft=O(J,M);rt&&(rt.innerHTML=""),ft&&(ft.innerHTML="")}},G.show=function(){var J=this.get("container");if(!(!J||this.destroyed)){J.style.visibility="visible",J.style.display="block";var rt=this.get("crosshairGroup");rt&&rt.show();var ft=this.get("markerGroup");ft&&ft.show(),F.prototype.show.call(this),this.get("canvas").draw()}},G.hide=function(){var J=this.get("container");if(!(!J||this.destroyed)){J.style.visibility="hidden",J.style.display="none";var rt=this.get("crosshairGroup");rt&&rt.hide();var ft=this.get("markerGroup");ft&&ft.hide(),F.prototype.hide.call(this),this.get("canvas").draw()}},G.destroy=function(){var J=this,rt=J.get("container"),ft=J.get("containerTpl");rt&&!/^\#/.test(ft)&&rt.parentNode.removeChild(rt);var dt=this.get("crosshairGroup");dt&&dt.destroy();var ut=this.get("markerGroup");ut&&ut.remove(),F.prototype.destroy.call(this)},G._getMarkerSvg=function(J){var rt=J.marker||{},ft=rt.activeSymbol||rt.symbol,dt;o.isFunction(ft)?dt=ft:o.isString(ft)&&(dt=A.Symbols[ft]),dt=o.isFunction(dt)?dt:A.Symbols.circle;var ut=dt(P/2,P/2,P/2),Lt=ut.reduce(function(Ft,Ot){return""+Ft+Ot[0]+Ot.slice(1).join(",")},"");return'<path d="'+Lt+'" fill="'+(rt.fill||"none")+'" stroke="'+(rt.stroke||"none")+'" />'},G._addItem=function(J,rt){var ft=this.get("itemTpl"),dt=o.substitute(ft,o.mix({index:rt},J)),ut=l.createDom(dt);l.modifyCSS(ut,this.style[S]);var Lt=O(ut,x);if(Lt){l.modifyCSS(Lt,t({},this.style[x],{borderRadius:"unset"}));var Ft=this._getMarkerSvg(J);Lt.innerHTML=Ft}var Ot=O(ut,y);return Ot&&l.modifyCSS(Ot,this.style[y]),ut},G._getHtmlContent=function(){var J=this.get("htmlContent"),rt=this.get("titleContent"),ft=this.get("items"),dt=J(rt,ft),ut=l.createDom(dt);return ut},G.setPosition=function(J,rt,ft){var dt=this.get("container"),ut=this.get("canvas").get("el"),Lt=l.getWidth(ut),Ft=l.getHeight(ut),Ot=dt.clientWidth,St=dt.clientHeight,xt=J,At=rt,nt,Mt=this.get("prePosition")||{x:0,y:0};if(Ot||(dt.style.display="block",Ot=dt.clientWidth,St=dt.clientHeight,dt.style.display="none"),this.get("enterable")?(rt=rt-dt.clientHeight/2,nt=[J,rt],Mt&&J-Mt.x>0?J-=dt.clientWidth+1:J+=1):this.get("position")?(nt=this._calcTooltipPosition(J,rt,this.get("position"),Ot,St,ft),J=nt[0],rt=nt[1]):(nt=this._constraintPositionInBoundary(J,rt,Ot,St,Lt,Ft),J=nt[0],rt=nt[1]),this.get("inPlot")){var z=this.get("plotRange");nt=this._constraintPositionInPlot(J,rt,Ot,St,z,this.get("enterable")),J=nt[0],rt=nt[1]}var Q=this.get("markerItems");o.isEmpty(Q)||(xt=Q[0].x,At=Q[0].y),this.set("prePosition",nt);var ht=this.get("follow");ht&&(dt.style.left=J+"px",dt.style.top=rt+"px");var et=this.get("crosshairGroup");if(et){var at=this.get("items");et.setPosition(xt,At,at)}F.prototype.setPosition.call(this,J,rt)},U}(a);E.exports=H},function(E,T,e){var t=e(68);t.Html=e(262),t.Canvas=e(115),t.Mini=e(264),E.exports=t},function(E,T,e){function t(b){return function(){var g=r(b),m;if(c()){var _=r(this).constructor;m=Reflect.construct(g,arguments,_)}else m=g.apply(this,arguments);return u(this,m)}}function u(b,g){return g&&(typeof g=="object"||typeof g=="function")?g:s(b)}function s(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function c(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(b){return!1}}function r(b){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)},r(b)}function h(b,g){b.prototype=Object.create(g.prototype),b.prototype.constructor=b,b.__proto__=g}var n=e(3),i=e(115),a=e(19),o=a.FONT_FAMILY,l=n.DomUtil,f=n.MatrixUtil,v=function(b){h(m,b);var g=t(m);function m(){return b.apply(this,arguments)||this}var _=m.prototype;return _.getDefaultCfg=function(){var x=b.prototype.getDefaultCfg.call(this);return n.mix({},x,{boardStyle:{x:0,y:0,width:0,height:0,radius:3},valueStyle:{x:0,y:0,text:"",fontFamily:o,fontSize:12,stroke:"#fff",lineWidth:2,fill:"black",textBaseline:"top",textAlign:"start"},padding:{top:5,right:5,bottom:0,left:5},triangleWidth:10,triangleHeight:4})},_._init_=function(){var x=this,y=x.get("padding"),S=x.get("frontPlot"),P=S.addGroup();x.set("container",P);var A=P.addShape("rect",{attrs:n.mix({},x.get("boardStyle"))});x.set("board",A);var O=P.addShape("path",{attrs:{fill:x.get("boardStyle").fill}});x.set("triangleShape",O);var L=P.addGroup();L.move(y.left,y.top);var H=L.addShape("text",{attrs:n.mix({},x.get("valueStyle"))});x.set("valueShape",H)},_.render=function(){var x=this;x.clear();var y=x.get("board"),S=x.get("valueShape"),P=x.get("padding"),A=x.get("items")[0];S&&S.attr("text",A.value);var O=S?S.getBBox():{width:80,height:30},L=P.left+O.width+P.right,H=P.top+O.height+P.bottom;y.attr("width",L),y.attr("height",H),x._centerTriangleShape()},_.clear=function(){var x=this.get("valueShape");x.attr("text","")},_.setPosition=function(x,y,S){var P=this,A=P.get("container"),O=P.get("plotRange"),L=A.getBBox(),H=L.width,F=L.height;if(x-=H/2,S&&(S.name==="point"||S.name==="interval")){var Z=S.getBBox().y;y=Z}if(y-=F,this.get("inPlot"))x<O.tl.x?(x=O.tl.x,P._leftTriangleShape()):x+H/2>O.tr.x?(x=O.tr.x-H,P._rightTriangleShape()):P._centerTriangleShape(),y<O.tl.y?y=O.tl.y:y+F>O.bl.y&&(y=O.bl.y-F);else{var G=this.get("canvas").get("el"),U=l.getWidth(G),Y=l.getHeight(G);x<0?(x=0,P._leftTriangleShape()):x+H/2>U?(x=U-H,P._rightTriangleShape()):P._centerTriangleShape(),y<0?y=0:y+F>Y&&(y=Y-F)}var J=[1,0,0,0,1,0,0,0,1],rt=f.transform(J,[["t",x,y]]);A.stopAnimate(),A.animate({matrix:rt},this.get("animationDuration"))},_._centerTriangleShape=function(){var x=this.get("triangleShape"),y=this.get("triangleWidth"),S=this.get("triangleHeight"),P=this.get("board").getBBox(),A=P.width,O=P.height,L=[["M",0,0],["L",y,0],["L",y/2,S],["L",0,0],["Z"]];x.attr("path",L),x.move(A/2-y/2,O-1)},_._leftTriangleShape=function(){var x=this.get("triangleShape"),y=this.get("triangleWidth"),S=this.get("triangleHeight"),P=this.get("board").getBBox(),A=P.height,O=[["M",0,0],["L",y,0],["L",0,S+3],["L",0,0],["Z"]];x.attr("path",O),x.move(0,A-3)},_._rightTriangleShape=function(){var x=this.get("triangleShape"),y=this.get("triangleWidth"),S=this.get("triangleHeight"),P=this.get("board").getBBox(),A=P.width,O=P.height,L=[["M",0,0],["L",y,0],["L",y,S+4],["L",0,0],["Z"]];x.attr("path",L),x.move(A-y-1,O-4)},m}(i);E.exports=v},function(E,T,e){var t,u=e(19),s=u.FONT_FAMILY,c="g2-tooltip",r="g2-tooltip-title",h="g2-tooltip-list",n="g2-tooltip-list-item",i="g2-tooltip-marker",a="g2-tooltip-value",o=(t={crosshairs:!1,offset:15},t[""+c]={position:"absolute",visibility:"hidden",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:s,lineHeight:"20px",padding:"10px 10px 6px 10px"},t[""+r]={marginBottom:"4px"},t[""+h]={margin:0,listStyleType:"none",padding:0},t[""+n]={marginBottom:"4px"},t[""+i]={width:"5px",height:"5px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},t[""+a]={display:"inline-block",float:"right",marginLeft:"30px"},t);E.exports=o},function(E,T,e){"use strict";function t(g){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(_){return typeof _}:t=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},t(g)}function u(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function s(g,m){return m&&(t(m)==="object"||typeof m=="function")?m:c(g)}function c(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function r(g,m){for(var _=0;_<m.length;_++){var M=m[_];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(g,M.key,M)}}function h(g,m,_){return m&&r(g.prototype,m),_&&r(g,_),g}function n(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),m&&i(g,m)}function i(g,m){return i=Object.setPrototypeOf||function(M,x){return M.__proto__=x,M},i(g,m)}function a(g,m,_){return typeof Reflect!="undefined"&&Reflect.get?a=Reflect.get:a=function(x,y,S){var P=o(x,y);if(!!P){var A=Object.getOwnPropertyDescriptor(P,y);return A.get?A.get.call(S):A.value}},a(g,m,_||g)}function o(g,m){for(;!Object.prototype.hasOwnProperty.call(g,m)&&(g=l(g),g!==null););return g}function l(g){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},l(g)}var f=e(10),v=e(43),b=function(g){n(m,g),h(m,[{key:"getDefaultCfg",value:function(){var M=a(l(m.prototype),"getDefaultCfg",this).call(this);return f({},M,{start:{x:0,y:0},end:{x:0,y:0},type:"cartesian",isRect:!0})}}]);function m(_){var M;return u(this,m),M=s(this,l(m).call(this,_)),M._init(),M}return h(m,[{key:"_init",value:function(){var M=this.start,x=this.end,y={start:M.x,end:x.x},S={start:M.y,end:x.y};this.x=y,this.y=S}},{key:"convertPoint",value:function(M){var x,y;return this.isTransposed?(x=M.y,y=M.x):(x=M.x,y=M.y),{x:this.convertDim(x,"x"),y:this.convertDim(y,"y")}}},{key:"invertPoint",value:function(M){var x=this.invertDim(M.x,"x"),y=this.invertDim(M.y,"y");return this.isTransposed?{x:y,y:x}:{x,y}}}]),m}(v);E.exports=b},function(E,T,e){"use strict";function t(M){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(y){return typeof y}:t=function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},t(M)}function u(M,x){if(!(M instanceof x))throw new TypeError("Cannot call a class as a function")}function s(M,x){return x&&(t(x)==="object"||typeof x=="function")?x:c(M)}function c(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function r(M,x){for(var y=0;y<x.length;y++){var S=x[y];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(M,S.key,S)}}function h(M,x,y){return x&&r(M.prototype,x),y&&r(M,y),M}function n(M,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(x&&x.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),x&&i(M,x)}function i(M,x){return i=Object.setPrototypeOf||function(S,P){return S.__proto__=P,S},i(M,x)}function a(M,x,y){return typeof Reflect!="undefined"&&Reflect.get?a=Reflect.get:a=function(P,A,O){var L=o(P,A);if(!!L){var H=Object.getOwnPropertyDescriptor(L,A);return H.get?H.get.call(O):H.value}},a(M,x,y||M)}function o(M,x){for(;!Object.prototype.hasOwnProperty.call(M,x)&&(M=l(M),M!==null););return M}function l(M){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(y){return y.__proto__||Object.getPrototypeOf(y)},l(M)}var f=e(56),v=e(55),b=e(10),g=e(43),m=f.vec2,_=function(M){n(x,M),h(x,[{key:"getDefaultCfg",value:function(){var S=a(l(x.prototype),"getDefaultCfg",this).call(this);return b({},S,{startAngle:1.25*Math.PI,endAngle:7.25*Math.PI,innerRadius:0,type:"helix",isHelix:!0})}}]);function x(y){var S;return u(this,x),S=s(this,l(x).call(this,y)),S._init(),S}return h(x,[{key:"_init",value:function(){var S=this.width,P=this.height,A=this.radius,O=this.innerRadius,L=this.startAngle,H=this.endAngle,F=(H-L)/(2*Math.PI)+1,Z=Math.min(S,P)/2;A&&A>=0&&A<=1&&(Z=Z*A);var G=Math.floor(Z*(1-O)/F),U=G/(Math.PI*2),Y={start:L,end:H},J={start:O*Z,end:O*Z+G*.99};this.a=U,this.d=G,this.x=Y,this.y=J}},{key:"getCenter",value:function(){return this.center}},{key:"convertPoint",value:function(S){var P=this.a,A=this.center,O,L;this.isTransposed?(O=S.y,L=S.x):(O=S.x,L=S.y);var H=this.convertDim(O,"x"),F=P*H,Z=this.convertDim(L,"y");return{x:A.x+Math.cos(H)*(F+Z),y:A.y+Math.sin(H)*(F+Z)}}},{key:"invertPoint",value:function(S){var P=this.center,A=this.a,O=this.d+this.y.start,L=m.subtract([],[S.x,S.y],[P.x,P.y]),H=m.angleTo(L,[1,0],!0),F=H*A;m.length(L)<F&&(F=m.length(L));var Z=Math.floor((m.length(L)-F)/O);H=2*Z*Math.PI+H;var G=A*H,U=m.length(L)-G;U=v(U,0)?0:U;var Y=this.invertDim(H,"x"),J=this.invertDim(U,"y");Y=v(Y,0)?0:Y,J=v(J,0)?0:J;var rt={};return rt.x=this.isTransposed?J:Y,rt.y=this.isTransposed?Y:J,rt}}]),x}(g);E.exports=_},function(E,T,e){"use strict";var t=e(43);t.Cartesian=e(266),t.Rect=t.Cartesian,t.Polar=e(269),t.Helix=e(267),E.exports=t},function(E,T,e){"use strict";function t(y){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(P){return typeof P}:t=function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},t(y)}function u(y,S){if(!(y instanceof S))throw new TypeError("Cannot call a class as a function")}function s(y,S){return S&&(t(S)==="object"||typeof S=="function")?S:c(y)}function c(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function r(y,S){for(var P=0;P<S.length;P++){var A=S[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(y,A.key,A)}}function h(y,S,P){return S&&r(y.prototype,S),P&&r(y,P),y}function n(y,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(S&&S.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),S&&i(y,S)}function i(y,S){return i=Object.setPrototypeOf||function(A,O){return A.__proto__=O,A},i(y,S)}function a(y,S,P){return typeof Reflect!="undefined"&&Reflect.get?a=Reflect.get:a=function(O,L,H){var F=o(O,L);if(!!F){var Z=Object.getOwnPropertyDescriptor(F,L);return Z.get?Z.get.call(H):Z.value}},a(y,S,P||y)}function o(y,S){for(;!Object.prototype.hasOwnProperty.call(y,S)&&(y=l(y),y!==null););return y}function l(y){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)},l(y)}var f=e(56),v=e(55),b=e(10),g=e(43),m=f.mat3,_=f.vec2,M=f.vec3,x=function(y){n(S,y),h(S,[{key:"getDefaultCfg",value:function(){var A=a(l(S.prototype),"getDefaultCfg",this).call(this);return b({},A,{startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,type:"polar",isPolar:!0})}}]);function S(P){var A;return u(this,S),A=s(this,l(S).call(this,P)),A._init(),A}return h(S,[{key:"_init",value:function(){for(var A=this.radius,O=this.innerRadius,L=this.center,H=this.startAngle,F=this.endAngle;F<H;)F+=Math.PI*2;this.endAngle=F;var Z=this.getOneBox(),G=Z.maxX-Z.minX,U=Z.maxY-Z.minY,Y=Math.abs(Z.minX)/G,J=Math.abs(Z.minY)/U,rt=this.width,ft=this.height,dt,ut;ft/U>rt/G?(dt=rt/G,ut={x:L.x-(.5-Y)*rt,y:L.y-(.5-J)*dt*U}):(dt=ft/U,ut={x:L.x-(.5-Y)*dt*G,y:L.y-(.5-J)*ft}),A?A>0&&A<=1?A=dt*A:(A<=0||A>dt)&&(A=dt):A=dt;var Lt={start:H,end:F},Ft={start:O*A,end:A};this.x=Lt,this.y=Ft,this.radius=A,this.circleCentre=ut,this.center=ut}},{key:"getCenter",value:function(){return this.circleCentre}},{key:"getOneBox",value:function(){var A=this.startAngle,O=this.endAngle;if(Math.abs(O-A)>=Math.PI*2)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var L=[0,Math.cos(A),Math.cos(O)],H=[0,Math.sin(A),Math.sin(O)],F=Math.min(A,O);F<Math.max(A,O);F+=Math.PI/18)L.push(Math.cos(F)),H.push(Math.sin(F));return{minX:Math.min.apply(Math,L),maxX:Math.max.apply(Math,L),minY:Math.min.apply(Math,H),maxY:Math.max.apply(Math,H)}}},{key:"getRadius",value:function(){return this.radius}},{key:"convertPoint",value:function(A){var O=this.getCenter(),L=this.isTransposed?A.y:A.x,H=this.isTransposed?A.x:A.y;return L=this.convertDim(L,"x"),H=this.convertDim(H,"y"),{x:O.x+Math.cos(L)*H,y:O.y+Math.sin(L)*H}}},{key:"invertPoint",value:function(A){var O=this.getCenter(),L=[A.x-O.x,A.y-O.y],H=this.x,F=[1,0,0,0,1,0,0,0,1];m.rotate(F,F,H.start);var Z=[1,0,0];M.transformMat3(Z,Z,F),Z=[Z[0],Z[1]];var G=_.angleTo(Z,L,H.end<H.start);v(G,Math.PI*2)&&(G=0);var U=_.length(L),Y=G/(H.end-H.start);Y=H.end-H.start>0?Y:-Y;var J=this.invertDim(U,"y"),rt={};return rt.x=this.isTransposed?J:Y,rt.y=this.isTransposed?Y:J,rt}}]),S}(g);E.exports=x},function(E,T,e){var t=e(0),u=e(16),s=t.PathUtil;function c(S){var P=S.start,A=S.end,O=S.getWidth(),L=S.getHeight(),H=200,F,Z,G,U,Y;return S.isPolar?(U=S.getRadius(),G=S.getCenter(),F=S.startAngle,Z=S.endAngle,Y=new u.Fan({attrs:{x:G.x,y:G.y,rs:0,re:U+H,startAngle:F,endAngle:F}}),Y.endState={endAngle:Z}):(Y=new u.Rect({attrs:{x:P.x-H,y:A.y-H,width:S.isTransposed?O+H*2:0,height:S.isTransposed?0:L+H*2}}),S.isTransposed?Y.endState={height:L+H*2}:Y.endState={width:O+H*2}),Y.isClip=!0,Y}function r(S){if(t.isEmpty(S))return null;var P=S[0].x,A=S[0].x,O=S[0].y,L=S[0].y;return t.each(S,function(H){P=P>H.x?H.x:P,A=A<H.x?H.x:A,O=O>H.y?H.y:O,L=L<H.y?H.y:L}),{minX:P,maxX:A,minY:O,maxY:L,centerX:(P+A)/2,centerY:(O+L)/2}}function h(S,P){var A=S.points||S.get("origin").points,O=r(A),L,H,F=P.startAngle,Z=P.endAngle,G=Z-F;return P.isTransposed?(L=O.maxY*G,H=O.minY*G):(L=O.maxX*G,H=O.minX*G),L+=F,H+=F,{startAngle:H,endAngle:L}}function n(S,P,A){var O={};return S.delay&&(O.delay=t.isFunction(S.delay)?S.delay(P,A):S.delay),O.easing=t.isFunction(S.easing)?S.easing(P,A):S.easing,O.duration=t.isFunction(S.duration)?S.duration(P,A):S.duration,O.callback=S.callback,O}function i(S,P){var A=S._id,O=S.get("index"),L=S.getBBox(),H=S.get("origin").points,F=(L.minX+L.maxX)/2,Z;H[0].y-H[1].y<=0?Z=L.maxY:Z=L.minY;var G=[F,Z,1];S.apply(G),S.attr("transform",[["t",-F,-Z],["s",1,.01],["t",F,Z]]);var U={transform:[["t",-F,-Z],["s",1,100],["t",F,Z]]},Y=n(P,O,A,U);S.animate(U,Y.duration,Y.easing,Y.callback,Y.delay)}function a(S,P){var A=S._id,O=S.get("index"),L=S.getBBox(),H=S.get("origin").points,F,Z=(L.minY+L.maxY)/2;H[0].y-H[1].y>0?F=L.maxX:F=L.minX;var G=[F,Z,1];S.apply(G),S.attr({transform:[["t",-F,-Z],["s",.01,1],["t",F,Z]]});var U={transform:[["t",-F,-Z],["s",100,1],["t",F,Z]]},Y=n(P,O,A,U);S.animate(U,Y.duration,Y.easing,Y.callback,Y.delay)}function o(S,P){var A={lineWidth:0,opacity:0},O=S._id,L=S.get("index"),H=n(P,L,O,A);S.animate(A,H.duration,H.easing,function(){S.remove()},H.delay)}function l(S,P,A){var O=S._id,L=S.get("index"),H,F;if(A.isPolar&&S.name!=="point")H=A.getCenter().x,F=A.getCenter().y;else{var Z=S.getBBox();H=(Z.minX+Z.maxX)/2,F=(Z.minY+Z.maxY)/2}var G=[H,F,1];S.apply(G),S.attr({transform:[["t",-H,-F],["s",.01,.01],["t",H,F]]});var U={transform:[["t",-H,-F],["s",100,100],["t",H,F]]},Y=n(P,L,O,U);S.animate(U,Y.duration,Y.easing,Y.callback,Y.delay)}function f(S,P,A){var O=S._id,L=S.get("index"),H,F;if(A.isPolar&&S.name!=="point")H=A.getCenter().x,F=A.getCenter().y;else{var Z=S.getBBox();H=(Z.minX+Z.maxX)/2,F=(Z.minY+Z.maxY)/2}var G=[H,F,1];S.apply(G);var U={transform:[["t",-H,-F],["s",.01,.01],["t",H,F]]},Y=n(P,L,O,U);S.animate(U,Y.duration,Y.easing,function(){S.remove()},Y.delay)}function v(S,P){if(S.get("type")==="path"){var A=S._id,O=S.get("index"),L=s.pathToAbsolute(S.attr("path"));S.attr("path",[L[0]]);var H={path:L},F=n(P,O,A,H);S.animate(H,F.duration,F.easing,F.callback,F.delay)}}function b(S,P){if(S.get("type")==="path"){var A=S._id,O=S.get("index"),L=s.pathToAbsolute(S.attr("path")),H={path:[L[0]]},F=n(P,O,A,H);S.animate(H,F.duration,F.easing,function(){S.remove()},F.delay)}}function g(S,P,A,O,L){var H=c(A),F=S.get("canvas"),Z=S._id,G=S.get("index"),U;O?(H.attr("startAngle",O),H.attr("endAngle",O),U={endAngle:L}):U=H.endState,H.set("canvas",F),S.attr("clip",H),S.setSilent("animating",!0);var Y=n(P,G,Z,U);H.animate(U,Y.duration,Y.easing,function(){S&&!S.get("destroyed")&&(S.attr("clip",null),S.setSilent("cacheShape",null),S.setSilent("animating",!1),H.remove())},Y.delay)}function m(S,P){var A=S._id,O=S.get("index"),L=t.isNil(S.attr("fillOpacity"))?1:S.attr("fillOpacity"),H=t.isNil(S.attr("strokeOpacity"))?1:S.attr("strokeOpacity");S.attr("fillOpacity",0),S.attr("strokeOpacity",0);var F={fillOpacity:L,strokeOpacity:H},Z=n(P,O,A,F);S.animate(F,Z.duration,Z.easing,Z.callback,Z.delay)}function _(S,P){var A=S._id,O=S.get("index"),L={fillOpacity:0,strokeOpacity:0},H=n(P,O,A,L);S.animate(L,H.duration,H.easing,function(){S.remove()},H.delay)}function M(S,P,A){var O=h(S,A),L=O.endAngle,H=O.startAngle;g(S,P,A,H,L)}function x(S,P,A){if(S.name==="line"){var O=S.get("canvas"),L=S.get("cacheShape"),H=S._id,F=S.get("index"),Z=new u.Rect({attrs:{x:A.start.x,y:A.end.y,width:A.getWidth(),height:A.getHeight()}});Z.isClip=!0,Z.set("canvas",O);var G=s.pathToAbsolute(L.attrs.path),U=s.pathToAbsolute(S.attr("path")),Y=G[1][1]-G[0][1],J=G[G.length-1][1]+Y,rt=U[U.length-1][2],ft=G.concat([["L",J,rt]]),dt=[0,0,1];S.apply(dt),S.attr("clip",Z),S.attr("path",ft);var ut={transform:[["t",-Y,0]]},Lt=n(P,F,H,ut);S.animate(ut,Lt.duration,Lt.easing,function(){S&&!S.get("destroyed")&&(S.attr("path",U),S.attr({transform:[["t",Y,0]]}),S.attr("clip",null),S.setSilent("cacheShape",null),Z.remove())},Lt.delay)}}function y(S,P,A){if(S.name==="area"){var O=S.get("canvas"),L=S.get("cacheShape"),H=S._id,F=S.get("index"),Z=new u.Rect({attrs:{x:A.start.x,y:A.end.y,width:A.getWidth(),height:A.getHeight()}});Z.isClip=!0,Z.set("canvas",O);var G=s.pathToAbsolute(L.attrs.path),U=s.pathToAbsolute(S.attr("path")),Y=G[1][1]-G[0][1],J=Math.floor(G.length/2),rt=G[J-1][1]+Y,ft=U[J-1][2],dt=[].concat(G.slice(0,J),[["L",rt,ft],["L",rt,U[J][2]]],G.slice(J)),ut=[0,0,1];S.apply(ut),S.attr("clip",Z),S.attr("path",dt);var Lt={transform:[["t",-Y,0]]},Ft=n(P,F,H,Lt);S.animate(Lt,Ft.duration,Ft.easing,function(){S&&!S.get("destroyed")&&(S.attr("path",U),S.attr({transform:[["t",Y,0]]}),S.attr("clip",null),S.setSilent("cacheShape",null),Z.remove())},Ft.delay)}}E.exports={enter:{clipIn:g,zoomIn:l,pathIn:v,scaleInY:i,scaleInX:a,fanIn:M,fadeIn:m},leave:{lineWidthOut:o,zoomOut:f,pathOut:b,fadeOut:_},appear:{clipIn:g,zoomIn:l,pathIn:v,scaleInY:i,scaleInX:a,fanIn:M,fadeIn:m},update:{fadeIn:m,fanIn:M,lineSlideLeft:x,areaSlideLeft:y}}},function(E,T,e){var t=e(0),u=e(119),s=t.MatrixUtil,c=s.mat3;function r(o,l){var f=[];if(o.get("animate")===!1)return[];var v=o.get("children");return t.each(v,function(b){if(b.isGroup)f=f.concat(r(b,l));else if(b.isShape&&b._id){var g=b._id;g=g.split("-")[0],g===l&&f.push(b)}}),f}function h(o){var l={};return t.each(o,function(f){if(!(!f._id||f.isClip)){var v=f._id;l[v]={_id:v,type:f.get("type"),attrs:t.cloneDeep(f.attr()),name:f.name,index:f.get("index"),animateCfg:f.get("animateCfg"),coord:f.get("coord")}}}),l}function n(o,l,f,v){var b;return v?b=u.Action[f][v]:b=u.getAnimation(o,l,f),b}function i(o,l,f){var v=u.getAnimateCfg(o,l);return f&&f[l]?t.deepMix({},v,f[l]):v}function a(o,l,f,v){var b,g,m=!1;if(v){var _=[],M=[];t.each(l,function(x){var y=o[x._id];y?(x.setSilent("cacheShape",y),_.push(x),delete o[x._id]):M.push(x)}),t.each(o,function(x){var y=x.name,S=x.coord,P=x._id,A=x.attrs,O=x.index,L=x.type;if(g=i(y,"leave",x.animateCfg),b=n(y,S,"leave",g.animation),t.isFunction(b)){var H=f.addShape(L,{attrs:A,index:O});if(H._id=P,H.name=y,S&&y!=="label"){var F=H.getMatrix(),Z=c.multiply([],F,S.matrix);H.setMatrix(Z)}m=!0,b(H,g,S)}}),t.each(_,function(x){var y=x.name,S=x.get("coord"),P=x.get("cacheShape").attrs;if(!t.isEqual(P,x.attr())){if(g=i(y,"update",x.get("animateCfg")),b=n(y,S,"update",g.animation),t.isFunction(b))b(x,g,S);else{var A=t.cloneDeep(x.attr());x.attr(P),x.animate(A,g.duration,g.easing,function(){x.setSilent("cacheShape",null)})}m=!0}}),t.each(M,function(x){var y=x.name,S=x.get("coord");g=i(y,"enter",x.get("animateCfg")),b=n(y,S,"enter",g.animation),t.isFunction(b)&&(b(x,g,S),m=!0)})}else t.each(l,function(x){var y=x.name,S=x.get("coord");g=i(y,"appear",x.get("animateCfg")),b=n(y,S,"appear",g.animation),t.isFunction(b)&&(b(x,g,S),m=!0)});return m}E.exports={execAnimation:function(l,f){var v=l.get("middlePlot"),b=l.get("backPlot"),g=l.get("_id"),m=l.get("canvas"),_=m.get(g+"caches")||[];_.length===0&&(f=!1);var M=r(v,g),x=r(b,g),y=M.concat(x);m.setSilent(g+"caches",h(y));var S;f?S=a(_,y,m,f):S=a(_,M,m,f),S||m.draw()}}},function(E,T,e){var t=e(0),u=e(30),s=u.Axis,c=t.MatrixUtil.vec2;function r(a){var o=[];if(a.length>0){o=a.slice(0);var l=o[0],f=o[o.length-1];l.value!==0&&o.unshift({value:0}),f.value!==1&&o.push({value:1})}return o}function h(a,o,l){var f=[];return a.length<1||(a.length>=2&&o&&l&&f.push({text:"",tickValue:"",value:0}),a[0].value!==0&&f.push({text:"",tickValue:"",value:0}),f=f.concat(a),f[f.length-1].value!==1&&f.push({text:"",tickValue:"",value:1})),f}function n(a,o){return o===void 0&&(o=0),a==="middle"&&(o=.5),a.includes("%")&&(o=parseInt(a,10)/100),o}var i=function(){function a(l){this.visible=!0,this.canvas=null,this.container=null,this.coord=null,this.options=null,this.axes=[],t.mix(this,l)}var o=a.prototype;return o._isHide=function(f){var v=this.options;return!!(v&&v[f]===!1)},o._getMiddleValue=function(f,v,b,g){if(f===0&&!g)return 0;if(f===1)return 1;var m=v[b+1].value;return!g&&m===1?1:(f+m)/2},o._getLineRange=function(f,v,b,g){var m,_,M,x=v.field,y=this.options,S="";if(y[x]&&y[x].position&&(S=y[x].position),b==="x"){var P=S==="top"?1:0;P=n(S,P),m={x:0,y:P},_={x:1,y:P},M=!1}else{if(g){var A=S==="left"?0:1;A=n(S,A),m={x:A,y:0},_={x:A,y:1}}else{var O=S==="right"?1:0;O=n(S,O),m={x:O,y:0},_={x:O,y:1}}M=!0}return m=f.convert(m),_=f.convert(_),{start:m,end:_,isVertical:M}},o._getLineCfg=function(f,v,b,g){var m,_=this._getLineRange(f,v,b,g),M=_.isVertical,x=_.start,y=_.end,S=f.center;return f.isTransposed&&(M=!M),M&&x.x>S.x||!M&&x.y>S.y?m=1:m=-1,{isVertical:M,factor:m,start:x,end:y}},o._getCircleCfg=function(f){var v={},b=f.x,g=f.y,m=g.start>g.end,_;f.isTransposed?_={x:m?0:1,y:0}:_={x:0,y:m?0:1},_=f.convert(_);var M=f.circleCentre,x=[_.x-M.x,_.y-M.y],y=[1,0],S;_.y>M.y?S=c.angle(x,y):S=c.angle(x,y)*-1;var P=S+(b.end-b.start);return v.startAngle=S,v.endAngle=P,v.center=M,v.radius=Math.sqrt(Math.pow(_.x-M.x,2)+Math.pow(_.y-M.y,2)),v.inner=f.innerRadius||0,v},o._getRadiusCfg=function(f){var v=f.x.start,b=v<0?-1:1,g,m;return f.isTransposed?(g={x:0,y:0},m={x:1,y:0}):(g={x:0,y:0},m={x:0,y:1}),{factor:b,start:f.convert(g),end:f.convert(m)}},o._getAxisPosition=function(f,v,b,g){var m="",_=this.options;if(_[g]&&_[g].position)m=_[g].position;else{var M=f.type;f.isRect?v==="x"?m="bottom":v==="y"&&(b?m="right":m="left"):M==="helix"?m="helix":v==="x"?m=f.isTransposed?"radius":"circle":m=f.isTransposed?"circle":"radius"}return m},o._getAxisDefaultCfg=function(f,v,b,g){var m=this,_=m.viewTheme,M={},x=m.options,y=v.field;if(M=t.deepMix({},_.axis[g],M,x[y]),M.viewTheme=_,M.title){var S=t.isPlainObject(M.title)?M.title:{};S.text=S.text||v.alias||y,t.deepMix(M,{title:S})}return M.ticks=v.getTicks(),f.isPolar&&!v.isCategory&&b==="x"&&Math.abs(f.endAngle-f.startAngle)===Math.PI*2&&M.ticks.pop(),M.coord=f,M.label&&t.isNil(M.label.autoRotate)&&(M.label.autoRotate=!0),x.hasOwnProperty("xField")&&x.xField.hasOwnProperty("grid")&&M.position==="left"&&t.deepMix(M,x.xField),M},o._getAxisCfg=function(f,v,b,g,m,_){m===void 0&&(m="");var M=this,x=M._getAxisPosition(f,g,m,v.field),y=M._getAxisDefaultCfg(f,v,g,x);if(!t.isEmpty(y.grid)&&b){var S=[],P=[],A=r(b.getTicks());if(A.length){var O=h(y.ticks,v.isLinear,y.grid.align==="center");t.each(O,function(L,H){P.push(L.tickValue);var F=[],Z=L.value;if(y.grid.align==="center"&&(Z=M._getMiddleValue(Z,O,H,v.isLinear)),!t.isNil(Z)){var G=f.x,U=f.y;t.each(A,function(Y){var J=g==="x"?Z:Y.value,rt=g==="x"?Y.value:Z,ft=f.convert({x:J,y:rt});if(f.isPolar){var dt=f.circleCentre;U.start>U.end&&(rt=1-rt),ft.flag=G.start>G.end?0:1,ft.radius=Math.sqrt(Math.pow(ft.x-dt.x,2)+Math.pow(ft.y-dt.y,2))}F.push(ft)}),S.push({_id:_+"-"+g+m+"-grid-"+L.tickValue,points:F})}})}y.grid.items=S,y.grid.tickValues=P}return y.type=v.type,y},o._getHelixCfg=function(f){for(var v={},b=f.a,g=f.startAngle,m=f.endAngle,_=100,M=[],x=0;x<=_;x++){var y=f.convert({x:x/100,y:0});M.push(y.x),M.push(y.y)}var S=f.convert({x:0,y:0});return v.a=b,v.startAngle=g,v.endAngle=m,v.crp=M,v.axisStart=S,v.center=f.center,v.inner=f.y.start,v},o._drawAxis=function(f,v,b,g,m,_,M){var x=this.container,y=this.canvas,S,P;f.type==="cartesian"?(S=s.Line,P=this._getLineCfg(f,v,g,M)):f.type==="helix"&&g==="x"?(S=s.Helix,P=this._getHelixCfg(f)):g==="x"?(S=s.Circle,P=this._getCircleCfg(f)):(S=s.Line,P=this._getRadiusCfg(f));var A=this._getAxisCfg(f,v,b,g,M,m);A=t.mix({},A,P),g==="y"&&_&&_.get("type")==="circle"&&(A.circle=_),A._id=m+"-"+g,t.isNil(M)||(A._id=m+"-"+g+M),t.mix(A,{canvas:y,group:x.addGroup({viewId:m})});var O=new S(A);return O.render(),this.axes.push(O),O},o.createAxis=function(f,v,b){var g=this,m=this.coord,_=m.type;if(_!=="theta"&&!(_==="polar"&&m.isTransposed)){var M;f&&!g._isHide(f.field)&&(M=g._drawAxis(m,f,v[0],"x",b)),!t.isEmpty(v)&&_!=="helix"&&t.each(v,function(x,y){g._isHide(x.field)||g._drawAxis(m,x,f,"y",b,M,y)})}},o.changeVisible=function(f){var v=this.axes;t.each(v,function(b){b.set("visible",f)})},o.clear=function(){var f=this,v=f.axes;t.each(v,function(b){b.destroy()}),f.axes=[]},a}();E.exports=i},function(E,T,e){var t=e(0),u=e(268),s=function(){function c(h){this.type="rect",this.actions=[],this.cfg={},t.mix(this,h),this.option=h||{}}var r=c.prototype;return r.reset=function(n){return this.actions=n.actions||[],this.type=n.type,this.cfg=n.cfg,this.option.actions=this.actions,this.option.type=this.type,this.option.cfg=this.cfg,this},r._execActions=function(n){var i=this.actions;t.each(i,function(a){var o=a[0];n[o](a[1],a[2])})},r.hasAction=function(n){var i=this.actions,a=!1;return t.each(i,function(o){if(n===o[0])return a=!0,!1}),a},r.createCoord=function(n,i){var a=this,o=a.type,l=a.cfg,f,v,b=t.mix({start:n,end:i},l);return o==="theta"?(f=u.Polar,a.hasAction("transpose")||a.transpose(),v=new f(b),v.type=o):(f=u[t.upperFirst(o||"")]||u.Rect,v=new f(b)),a._execActions(v),v},r.rotate=function(n){return n=n*Math.PI/180,this.actions.push(["rotate",n]),this},r.reflect=function(n){return this.actions.push(["reflect",n]),this},r.scale=function(n,i){return this.actions.push(["scale",n,i]),this},r.transpose=function(){return this.actions.push(["transpose"]),this},c}();E.exports=s},function(E,T,e){var t=e(0);function u(r,h){if(t.isNil(r)||t.isNil(h))return!1;var n=r.get("origin"),i=h.get("origin");return t.isNil(n)&&t.isNil(i)?t.isEqual(r,h):t.isEqual(n,i)}function s(r){r.shape&&r.shape.get("origin")&&(r.data=r.shape.get("origin"))}var c=function(){function r(n){this.view=null,this.canvas=null,t.assign(this,n),this._init()}var h=r.prototype;return h._init=function(){this.pixelRatio=this.canvas.get("pixelRatio")},h._getShapeEventObj=function(i){return{x:i.x/this.pixelRatio,y:i.y/this.pixelRatio,target:i.target,toElement:i.event.toElement||i.event.relatedTarget}},h._getShape=function(i,a){var o=this.view,l=o.get("canvas");return l.getShape(i,a)},h._getPointInfo=function(i){var a=this.view,o={x:i.x/this.pixelRatio,y:i.y/this.pixelRatio},l=a.getViewsByPoint(o);return o.views=l,o},h._getEventObj=function(i,a,o){return{x:a.x,y:a.y,target:i.target,toElement:i.event.toElement||i.event.relatedTarget,views:o}},h.bindEvents=function(){var i=this.canvas;i.on("mousedown",t.wrapBehavior(this,"onDown")),i.on("mousemove",t.wrapBehavior(this,"onMove")),i.on("mouseleave",t.wrapBehavior(this,"onOut")),i.on("mouseup",t.wrapBehavior(this,"onUp")),i.on("click",t.wrapBehavior(this,"onClick")),i.on("dblclick",t.wrapBehavior(this,"onClick")),i.on("touchstart",t.wrapBehavior(this,"onTouchstart")),i.on("touchmove",t.wrapBehavior(this,"onTouchmove")),i.on("touchend",t.wrapBehavior(this,"onTouchend"))},h._triggerShapeEvent=function(i,a,o){if(i&&i.name&&!i.get("destroyed")){var l=this.view;if(l.isShapeInView(i)){var f=i.name+":"+a;o.view=l,o.appendInfo=i.get("appendInfo"),l.emit(f,o);var v=l.get("parent");v&&v.emit(f,o)}}},h.onDown=function(i){var a=this.view,o=this._getShapeEventObj(i);o.shape=this.currentShape,s(o),a.emit("mousedown",o),this._triggerShapeEvent(this.currentShape,"mousedown",o)},h.onMove=function(i){var a=this,o=a.view,l=a.currentShape;l&&l.get("destroyed")&&(l=null,a.currentShape=null);var f=a._getShape(i.x,i.y)||i.currentTarget,v=a._getShapeEventObj(i);if(v.shape=f,s(v),o.emit("mousemove",v),a._triggerShapeEvent(f,"mousemove",v),l&&!u(l,f)){var b=a._getShapeEventObj(i);b.shape=l,b.toShape=f,s(b),a._triggerShapeEvent(l,"mouseleave",b)}if(f&&!u(l,f)){var g=a._getShapeEventObj(i);g.shape=f,g.fromShape=l,s(g),a._triggerShapeEvent(f,"mouseenter",g)}a.currentShape=f;var m=a._getPointInfo(i),_=a.curViews||[];_.length===0&&m.views.length&&o.emit("plotenter",a._getEventObj(i,m,m.views)),_.length&&m.views.length===0&&o.emit("plotleave",a._getEventObj(i,m,_)),m.views.length&&(v=a._getEventObj(i,m,m.views),v.shape=f,s(v),o.emit("plotmove",v)),a.curViews=m.views},h.onOut=function(i){var a=this,o=a.view,l=a._getPointInfo(i),f=a.curViews||[],v=a._getEventObj(i,l,f);a.curViews&&a.curViews.length!==0&&(!v.toElement||v.toElement.tagName!=="CANVAS")&&(o.emit("plotleave",v),a.curViews=[])},h.onUp=function(i){var a=this.view,o=this._getShapeEventObj(i);o.shape=this.currentShape,a.emit("mouseup",o),this._triggerShapeEvent(this.currentShape,"mouseup",o)},h.onClick=function(i){var a=this,o=a.view,l=a._getShape(i.x,i.y)||i.currentTarget,f=a._getShapeEventObj(i);f.shape=l,s(f),o.emit("click",f),a._triggerShapeEvent(l,i.type,f),a.currentShape=l;var v=a._getPointInfo(i),b=v.views;if(!t.isEmpty(b)){var g=a._getEventObj(i,v,b);if(a.currentShape){var m=a.currentShape;g.shape=m,s(g)}i.type==="dblclick"?(o.emit("plotdblclick",g),o.emit("dblclick",f)):o.emit("plotclick",g)}},h.onTouchstart=function(i){var a=this.view,o=this._getShape(i.x,i.y)||i.currentTarget,l=this._getShapeEventObj(i);l.shape=o,s(l),a.emit("touchstart",l),this._triggerShapeEvent(o,"touchstart",l),this.currentShape=o},h.onTouchmove=function(i){var a=this.view,o=this._getShape(i.x,i.y)||i.currentTarget,l=this._getShapeEventObj(i);l.shape=o,s(l),a.emit("touchmove",l),this._triggerShapeEvent(o,"touchmove",l),this.currentShape=o},h.onTouchend=function(i){var a=this.view,o=this._getShapeEventObj(i);o.shape=this.currentShape,s(o),a.emit("touchend",o),this._triggerShapeEvent(this.currentShape,"touchend",o)},h.clearEvents=function(){var i=this.canvas;i.off("mousemove",t.getWrapBehavior(this,"onMove")),i.off("mouseleave",t.getWrapBehavior(this,"onOut")),i.off("mousedown",t.getWrapBehavior(this,"onDown")),i.off("mouseup",t.getWrapBehavior(this,"onUp")),i.off("click",t.getWrapBehavior(this,"onClick")),i.off("dblclick",t.getWrapBehavior(this,"onClick")),i.off("touchstart",t.getWrapBehavior(this,"onTouchstart")),i.off("touchmove",t.getWrapBehavior(this,"onTouchmove")),i.off("touchend",t.getWrapBehavior(this,"onTouchend"))},r}();E.exports=c},function(E,T,e){var t=e(0),u=e(280),s=function(){function c(h){this.guides=[],this.options=[],this.xScales=null,this.yScales=null,this.view=null,this.viewTheme=null,this.frontGroup=null,this.backGroup=null,t.mix(this,h)}var r=c.prototype;return r._creatGuides=function(){var n=this,i=this.options,a=this.xScales,o=this.yScales,l=this.view,f=this.viewTheme;return this.backContainer&&l&&(this.backGroup=this.backContainer.addGroup({viewId:l.get("_id")})),this.frontContainer&&l&&(this.frontGroup=this.frontContainer.addGroup({viewId:l.get("_id")})),i.forEach(function(v){var b=v.type,g=t.deepMix({xScales:a,yScales:o,viewTheme:f},f?f.guide[b]:{},v);b=t.upperFirst(b);var m=new u[b](g);n.guides.push(m)}),n.guides},r.line=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"line"},n)),this},r.arc=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"arc"},n)),this},r.text=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"text"},n)),this},r.image=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"image"},n)),this},r.region=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"region"},n)),this},r.regionFilter=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"regionFilter"},n)),this},r.dataMarker=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"dataMarker"},n)),this},r.dataRegion=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"dataRegion"},n)),this},r.html=function(n){return n===void 0&&(n={}),this.options.push(t.mix({type:"html"},n)),this},r.render=function(n){var i=this,a=i.view,o=a&&a.get("data"),l=i._creatGuides();t.each(l,function(f){var v;f.get("top")?v=i.frontGroup||i.frontContainer:v=i.backGroup||i.backContainer,f.render(n,v,o,a)})},r.clear=function(){this.options=[],this.reset()},r.changeVisible=function(n){var i=this.guides;t.each(i,function(a){a.changeVisible(n)})},r.reset=function(){var n=this.guides;t.each(n,function(i){i.clear()}),this.guides=[],this.backGroup&&this.backGroup.remove(),this.frontGroup&&this.frontGroup.remove()},c}();E.exports=s},function(E,T,e){function t(){return t=Object.assign||function(_){for(var M=1;M<arguments.length;M++){var x=arguments[M];for(var y in x)Object.prototype.hasOwnProperty.call(x,y)&&(_[y]=x[y])}return _},t.apply(this,arguments)}var u=e(0),s=e(30),c=s.Legend,r=e(282),h=e(9),n=e(122),i=e(124),a=e(5),o="_origin",l=4.5,f=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,v=["cross","tick","plus","hyphen","line","hollowCircle","hollowSquare","hollowDiamond","hollowTriangle","hollowTriangleDown","hollowHexagon","hollowBowtie"];function b(_,M,x){var y;return u.isNil(x)?!1:(_=x.translate(_),M=x.translate(M),x.isCategory?y=_===M:y=Math.abs(_-M)<=1,y)}function g(_,M){var x;return u.each(_,function(y){if(y.get("visible")){var S=y.getYScale();if(S.field===M){x=y;return}}}),x}var m=function(){function _(x){var y=this;y.options={},u.mix(y,x),y.clear();var S=y.chart;y.container=S.get("frontPlot"),y.plotRange=S.get("plotRange")}var M=_.prototype;return M.clear=function(){var y=this.legends;this.backRange=null,u.each(y,function(S){u.each(S,function(P){P.destroy()})}),this.legends={}},M.getBackRange=function(){var y=this.backRange;if(!y){var S=this.chart.get("backPlot");y=n(S,i(this.chart.get("plotRange")));var P=this.plotRange;y.maxX-y.minX<P.br.x-P.tl.x&&y.maxY-y.minY<P.br.y-P.tl.y&&(y={minX:P.tl.x,minY:P.tl.y,maxX:P.br.x,maxY:P.br.y}),this.backRange=y}return y},M._isFieldInView=function(y,S,P){var A=!1,O=P.get("scales"),L=O[y];return L&&L.values&&(A=u.inArray(L.values,S)),A},M._bindClickEvent=function(y,S,P){var A=this,O=A.chart,L=O.get("views"),H=S.field,F=A.options;y.on("itemclick",function(Z){if(F.onClick&&F.defaultClickHandlerEnabled!==!0)F.onClick(Z);else{var G=Z.item,U=Z.checked,Y=y.get("selectedMode")==="single",J=G.dataValue;U?(u.Array.remove(P,J),A._isFieldInView(H,J,O)&&O.filter(H,function(rt){return Y?rt===J:!u.inArray(P,rt)}),u.each(L,function(rt){A._isFieldInView(H,J,rt)&&rt.filter(H,function(ft){return Y?ft===J:!u.inArray(P,ft)})})):Y||(P.push(J),A._isFieldInView(H,J,O)&&O.filter(H,function(rt){return!u.inArray(P,rt)}),u.each(L,function(rt){A._isFieldInView(H,J,rt)&&rt.filter(H,function(ft){return!u.inArray(P,ft)})})),F.onClick&&F.onClick(Z),O.set("keepLegend",!0),O.set("keepPadding",!0),O.repaint(),O.set("keepPadding",!1),O.set("keepLegend",!1)}})},M._bindClickEventForMix=function(y){var S=this,P=S.chart,A=P.getAllGeoms();y.on("itemclick",function(O){var L=O.item.field,H=O.checked;H?u.each(A,function(F){var Z=F.getYScale().field;Z===L&&F.show()}):u.each(A,function(F){var Z=F.getYScale().field;Z===L&&F.hide()})})},M._filterLabels=function(y,S,P){if(y.get("gLabel"))y.get("gLabel").set("visible",P);else{var A=S.get("labelCfg");if(A&&A.fields&&A.fields.length>0){var O=S.getXScale(),L=S.getYScale(),H=O.field,F=L.field,Z=y.get("origin")._origin,G=S.get("labelContainer"),U=G.get("labelsGroup").get("children");u.each(U,function(Y){var J=Y.get("origin")||[];J[H]===Z[H]&&J[F]===Z[F]&&(Y.set("visible",P),y.set("gLabel",Y))})}}},M._bindFilterEvent=function(y,S){var P=this,A=this.chart,O=S.field;y.on("itemfilter",function(L){var H=L.range;A.filterShape(function(U,Y,J){if(!u.isNil(U[O])){var rt=U[O]>=H[0]&&U[O]<=H[1];return P._filterLabels(Y,J,rt),rt}return!0});for(var F=A.getAllGeoms()||[],Z=function(Y){var J=F[Y];J.get("type")==="heatmap"&&f(function(){J.drawWithRange(H)})},G=0;G<F.length;G++)Z(G)})},M._getShapeData=function(y){var S=y.get("origin");return u.isArray(S)&&(S=S[0]),S[o]},M._bindHoverEvent=function(y,S){var P=this,A=P.chart,O=A.getAllGeoms(),L=P.options,H=A.get("canvas");y.on("itemhover",function(F){var Z=F.item.value,G=P.pre;if(!G)u.each(O,function(U){var Y=U.get("shapeContainer"),J=U.getShapes(),rt=[];if(S){var ft=U.get("scales")[S];u.each(J,function(dt){var ut=P._getShapeData(dt);ut&&b(ut[S],Z,ft)&&rt.push(dt)})}else U.getYScale().field===Z&&(rt=J);u.isEmpty(rt)||(F.shapes=rt,F.geom=U,L.onHover?(L.onHover(F),Y.sort(),H.draw()):U.setShapesActived(rt))}),P.pre=Z;else if(G===Z)return}),y.on("itemunhover",function(F){P.pre=null,L.onUnhover&&L.onUnhover(F),u.each(O,function(Z){Z.get("activeShapes")&&(Z.clearActivedShapes(),H.draw())})})},M._isFiltered=function(y,S,P){if(!y.isCategory)return!0;var A=!0;return P=y.invert(P),u.each(S,function(O){if(y.getText(O)===y.getText(P))return A=!1,!1}),A},M._alignLegend=function(y,S,P,A){var O=this,L=O.viewTheme,H=O.container,F=H.get("canvas"),Z=F.get("width"),G=F.get("height"),U=O.totalRegion,Y=O.plotRange,J=O.getBackRange(),rt=y.get("offset")[0]||0,ft=y.get("offset")[1]||0,dt=y.getHeight(),ut=y.getWidth(),Lt=L.legend.margin,Ft=L.legend.legendMargin,Ot=O.legends[A].length,St=A.split("-"),xt=0,At=0,nt=Ot>1?U:P;if(St[0]==="left"||St[0]==="right")G=Y.br.y,xt=O._getXAlign(St[0],Z,P,J,ut,Lt),S?At=(S.get("y")||S.get("group").get("y"))+S.getHeight()+Ft:At=O._getYAlignVertical(St[1],G,nt,J,0,Lt,F.get("height"));else if(St[0]==="top"||St[0]==="bottom")if(At=O._getYAlignHorizontal(St[0],G,P,J,dt,Lt),S){var Mt=S.getWidth();xt=(S.get("x")||S.get("group").get("x"))+Mt+Ft}else xt=O._getXAlign(St[1],Z,nt,J,0,Lt),St[1]==="right"&&(xt=Y.br.x-nt.totalWidth);y.move(xt+rt,At+ft)},M._getXAlign=function(y,S,P,A,O,L){var H=A.minX-O-L[3]<0?0:A.minX-O-L[3],F=y==="left"?H:A.maxX+L[1];return y==="center"&&(F=(S-P.totalWidth)/2),F},M._getYAlignHorizontal=function(y,S,P,A,O,L){var H=y==="top"?A.minY-O-L[0]:A.maxY+L[2];return H},M._getYAlignVertical=function(y,S,P,A,O,L,H){var F=y==="top"?A.minY-O-L[0]:S-P.totalHeight;return y==="center"&&(F=(H-P.totalHeight)/2),F},M._getSubRegion=function(y){var S=0,P=0,A=0,O=0;return u.each(y,function(L){var H=L.getWidth(),F=L.getHeight();S<H&&(S=H),A+=H,P<F&&(P=F),O+=F}),{maxWidth:S,totalWidth:A,maxHeight:P,totalHeight:O}},M._getRegion=function(){var y=this,S=y.viewTheme,P=y.legends,A=S.legend.legendMargin,O=[],L=0,H=0;return u.each(P,function(F){var Z=y._getSubRegion(F);O.push(Z),L+=Z.totalWidth+A,H+=Z.totalHeight+A}),{totalWidth:L,totalHeight:H,subs:O}},M._addCategoryLegend=function(y,S,P,A,O){var L=this,H=y.field,F=L.options,Z=F[H];Z&&(F=Z);var G=L.legends;G[O]=G[O]||[];var U=L.container,Y=[],J=y.getTicks(),rt=!0,ft=P.get("shapeType")||"point",dt=P.getDefaultValue("shape")||"circle";F[H]&&F[H].marker?(dt=F[H].marker,ft="point",rt=!1):F.marker&&(dt=F.marker,ft="point",rt=!1);var ut=L.chart,Lt=L.viewTheme,Ft=ut.get("canvas"),Ot=L.plotRange,St=O.split("-"),xt=St[0]==="right"||St[0]==="left"?Ot.bl.y-Ot.tr.y:Ft.get("width");u.each(J,function(Q){var ht=Q.text,et=ht,at=Q.value,gt=y.invert(at),k={isInCircle:P.isInCircle()},ot=A?L._isFiltered(y,A,at):!0,it=P.getAttr("color"),X=P.getAttr("shape");if(it)if(it.callback&&it.callback.length>1){var Et=Array(it.callback.length-1).fill("");k.color=it.mapping.apply(it,[gt].concat(Et)).join("")||Lt.defaultColor}else k.color=it.mapping(gt).join("")||Lt.defaultColor;if(rt&&X)if(X.callback&&X.callback.length>1){var vt=Array(X.callback.length-1).fill("");dt=X.mapping.apply(X,[gt].concat(vt)).join("")}else dt=X.mapping(gt).join("");var Nt=h.getShapeFactory(ft),$t=Nt.getMarkerCfg(dt,k);a.legendMarkerRadius&&($t.radius=a.legendMarkerRadius),u.isFunction(dt)&&($t.symbol=dt),Y.push({value:et,dataValue:gt,checked:ot,marker:$t})});var At=u.deepMix({},Lt.legend[St[0]],F[H]||F,{viewId:ut.get("_id"),maxLength:xt,items:Y,container:U,position:[0,0]});At.title&&u.deepMix(At,{title:{text:y.alias||y.field}});var nt;if(L._isTailLegend(F,P))At.chart=L.chart,At.geom=P,nt=new r(At);else if(F.useHtml){var Mt=U.get("canvas").get("el");if(U=F.container,u.isString(U)&&/^\#/.test(U)){var z=U.replace("#","");U=document.getElementById(z)}U||(U=Mt.parentNode),At.container=U,At.legendStyle===void 0&&(At.legendStyle={}),At.legendStyle.CONTAINER_CLASS=t({},At.legendStyle.CONTAINER_CLASS,{position:"absolute",overflow:"auto","z-index":Mt.style.zIndex===""?1:parseInt(Mt.style.zIndex,10)+1}),F.flipPage?(At.legendStyle.CONTAINER_CLASS.height=St[0]==="right"||St[0]==="left"?xt+"px":"auto",At.legendStyle.CONTAINER_CLASS.width=St[0]==="right"||St[0]==="left"?"auto":xt+"px",nt=new c.CatPageHtml(At)):nt=new c.CatHtml(At)}else nt=new c.Category(At);return L._bindClickEvent(nt,y,A),G[O].push(nt),nt},M._bindChartMove=function(y){var S=this.chart,P=this.legends;S.on("plotmove",function(A){var O=!1;if(A.target){var L=A.target.get("origin");if(L){var H=L[o]||L[0][o],F=y.field;if(H){var Z=H[F];u.each(P,function(G){u.each(G,function(U){O=!0,!U.destroyed&&U.activate(Z)})})}}}O||u.each(P,function(G){u.each(G,function(U){!U.destroyed&&U.deactivate()})})})},M._addContinuousLegend=function(y,S,P){var A=this,O=A.legends;O[P]=O[P]||[];var L=A.container,H=y.field,F=y.getTicks(),Z=[],G,U,Y,J=A.viewTheme;u.each(F,function(Lt){var Ft=Lt.value,Ot=y.invert(Ft),St=S.mapping(Ot).join("");Z.push({value:Lt.tickValue,attrValue:St,color:St,scaleValue:Ft}),Ft===0&&(U=!0),Ft===1&&(Y=!0)}),U||Z.push({value:y.min,attrValue:S.mapping(0).join(""),color:S.mapping(0).join(""),scaleValue:0}),Y||Z.push({value:y.max,attrValue:S.mapping(1).join(""),color:S.mapping(1).join(""),scaleValue:1});var rt=A.options,ft=P.split("-"),dt=J.legend[ft[0]];(rt&&rt.slidable===!1||rt[H]&&rt[H].slidable===!1)&&(dt=u.mix({},dt,J.legend.gradient));var ut=u.deepMix({},dt,rt[H]||rt,{items:Z,attr:S,formatter:y.formatter,container:L,position:[0,0]});if(ut.title&&u.deepMix(ut,{title:{text:y.alias||y.field}}),S.type==="color")G=new c.Color(ut);else if(S.type==="size")rt&&rt.sizeType==="circle"?G=new c.CircleSize(ut):G=new c.Size(ut);else return;return A._bindFilterEvent(G,y),O[P].push(G),G},M._isTailLegend=function(y,S){if(y.hasOwnProperty("attachLast")&&y.attachLast){var P=S.get("type");if(P==="line"||P==="lineStack"||P==="area"||P==="areaStack")return!0}return!1},M._adjustPosition=function(y,S){var P;if(S)P="right-top";else if(u.isArray(y))P=String(y[0])+"-"+String(y[1]);else{var A=y.split("-");A.length===1?(A[0]==="left"&&(P="left-bottom"),A[0]==="right"&&(P="right-bottom"),A[0]==="top"&&(P="top-center"),A[0]==="bottom"&&(P="bottom-center")):P=y}return P},M.addLegend=function(y,S,P,A){var O=this,L=O.options,H=y.field,F=L[H],Z=O.viewTheme;if(F===!1)return null;if(F&&F.custom)O.addCustomLegend(H);else{var G=L.position||Z.defaultLegendPosition;G=O._adjustPosition(G,O._isTailLegend(L,P)),F&&F.position&&(G=O._adjustPosition(F.position,O._isTailLegend(F,P)));var U;y.isLinear?U=O._addContinuousLegend(y,S,G):U=O._addCategoryLegend(y,S,P,A,G),U&&(O._bindHoverEvent(U,H),L.reactive&&O._bindChartMove(y))}},M.addCustomLegend=function(y){var S=this,P=S.chart,A=S.viewTheme,O=S.container,L=S.options;y&&(L=L[y]);var H=L.position||A.defaultLegendPosition;H=S._adjustPosition(H);var F=S.legends;F[H]=F[H]||[];var Z=L.items;if(!!Z){var G=P.getAllGeoms();u.each(Z,function(Ft){var Ot=g(G,Ft.value);u.isPlainObject(Ft.marker)?Ft.marker.radius=Ft.marker.radius||a.legendMarkerRadius||l:(Ft.marker={symbol:Ft.marker||"circle",radius:a.legendMarkerRadius||l},u.indexOf(v,Ft.marker.symbol)!==-1?Ft.marker.stroke=Ft.fill:Ft.marker.fill=Ft.fill);var St=Ft.marker.symbol;u.isString(St)&&St.indexOf("hollow")!==-1&&(Ft.marker.symbol=u.lowerFirst(St.substr(6))),Ft.checked=u.isNil(Ft.checked)?!0:Ft.checked,Ft.geom=Ot});var U=P.get("canvas"),Y=S.plotRange,J=H.split("-"),rt=J[0]==="right"||J[0]==="left"?Y.bl.y-Y.tr.y:U.get("width"),ft=u.deepMix({},A.legend[J[0]],L,{maxLength:rt,items:Z,container:O,position:[0,0]}),dt;if(L.useHtml){var ut=L.container;if(/^\#/.test(O)){var Lt=ut.replace("#","");ut=document.getElementById(Lt)}else ut||(ut=O.get("canvas").get("el").parentNode);ft.container=ut,ft.legendStyle===void 0&&(ft.legendStyle={}),ft.legendStyle.CONTAINER_CLASS||(ft.legendStyle.CONTAINER_CLASS={height:J[0]==="right"||J[0]==="left"?rt+"px":"auto",width:J[0]==="right"||J[0]==="left"?"auto":rt+"px",position:"absolute",overflow:"auto"}),L.flipPage?dt=new c.CatPageHtml(ft):dt=new c.CatHtml(ft)}else dt=new c.Category(ft);return F[H].push(dt),dt.on("itemclick",function(Ft){L.onClick&&L.onClick(Ft)}),S._bindHoverEvent(dt),dt}},M.addMixedLegend=function(y,S){var P=this,A=P.options,O=[];u.each(y,function(F){var Z=F.alias||F.field,G=A[F.field];u.each(S,function(U){if(U.getYScale()===F&&F.values&&F.values.length>0&&G!==!1){var Y=U.get("shapeType")||"point",J=U.getDefaultValue("shape")||"circle",rt=h.getShapeFactory(Y),ft={color:U.getDefaultValue("color")},dt=rt.getMarkerCfg(J,ft);a.legendMarkerRadius&&(dt.radius=a.legendMarkerRadius);var ut={value:Z,marker:dt,field:F.field};O.push(ut)}})});var L={custom:!0,items:O};P.options=u.deepMix({},L,P.options);var H=P.addCustomLegend();P._bindClickEventForMix(H)},M.alignLegends=function(){var y=this,S=y.legends,P=y._getRegion(S);y.totalRegion=P;var A=0;return u.each(S,function(O,L){var H=P.subs[A];u.each(O,function(F,Z){var G=O[Z-1];F.get("useHtml")&&!F.get("autoPosition")||y._alignLegend(F,G,H,L)}),A++}),this},_}();E.exports=m},function(E,T,e){var t=e(154),u=e(0),s=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,c={LINEAR:"linear",CAT:"cat",TIME:"time"},r=function(){function h(i){this.defs={},this.viewTheme={scales:{}},this.filters={},u.assign(this,i)}var n=h.prototype;return n._getDef=function(a){var o=this.defs,l=this.viewTheme,f=null;return(l.scales[a]||o[a])&&(f=u.mix({},l.scales[a]),u.each(o[a],function(v,b){u.isNil(v)?delete f[b]:f[b]=v}),this.filters[a]&&(delete f.min,delete f.max)),f},n._getDefaultType=function(a,o){var l=c.LINEAR,f=u.Array.firstValue(o,a);return u.isArray(f)&&(f=f[0]),s.test(f)?l=c.TIME:u.isString(f)&&(l=c.CAT),l},n._getScaleCfg=function(a,o,l){var f={field:o},v=u.Array.values(l,o);if(f.values=v,!t.isCategory(a)&&a!=="time"){var b=u.Array.getRange(v);f.min=b.min,f.max=b.max,f.nice=!0}return a==="time"&&(f.nice=!1),f},n.createScale=function(a,o){var l=this,f=l._getDef(a),v,b=o||[],g=u.Array.firstValue(b,a);if(u.isNumber(a)||u.isNil(g)&&!f)v=t.identity({value:a,field:a.toString(),values:[a]});else{var m;f&&(m=f.type),m=m||l._getDefaultType(a,b);var _=l._getScaleCfg(m,a,b);f&&u.mix(_,f),v=t[m](_)}return v},h}();E.exports=r},function(E,T,e){function t(){return t=Object.assign||function(m){for(var _=1;_<arguments.length;_++){var M=arguments[_];for(var x in M)Object.prototype.hasOwnProperty.call(M,x)&&(m[x]=M[x])}return m},t.apply(this,arguments)}var u=e(0),s=e(9),c=e(30),r=c.Tooltip,h=u.MatrixUtil,n=h.vec2,i=["line","area","path","areaStack"],a=["line","area","point"],o=["marker","showMarker"];function l(m,_){var M=-1;return u.each(m,function(x,y){var S=!0;for(var P in _)if(_.hasOwnProperty(P)&&!o.includes(P)&&!u.isObject(_[P])&&_[P]!==x[P]){S=!1;break}if(S)return M=y,!1}),M}function f(m,_){if(!m)return!1;var M="";return m.className?(u.isNil(m.className.baseVal)?M=m.className:M=m.className.baseVal,M.includes(_)):!1}function v(m,_){for(var M=m.parentNode,x=!1;M&&M!==document.body;){if(f(M,_)){x=!0;break}M=M.parentNode}return x}function b(m){var _=[];return u.each(m,function(M){var x=l(_,M);x===-1?_.push(M):_[x]=M}),_}var g=function(){function m(M){u.assign(this,M),this.timeStamp=0,this.locked=!1}var _=m.prototype;return _._normalizeEvent=function(x){var y=this.chart,S=this._getCanvas(),P=S.getPointByClient(x.clientX,x.clientY),A=S.get("pixelRatio");P.x=P.x/A,P.y=P.y/A;var O=y.getViewsByPoint(P);return P.views=O,P},_._getCanvas=function(){return this.chart.get("canvas")},_._getTriggerEvent=function(){var x=this.options,y=x.triggerOn,S;return!y||y==="mousemove"?S="plotmove":y==="click"?S="plotclick":y==="none"&&(S=null),S},_._getDefaultTooltipCfg=function(){var x=this,y=x.chart,S=x.viewTheme,P=x.options,A=u.mix({},S.tooltip),O=y.getAllGeoms().filter(function(U){return U.get("visible")}),L=[];u.each(O,function(U){var Y=U.get("type"),J=U.get("adjusts"),rt=!1;J&&u.each(J,function(ft){if(ft.type==="symmetric"||ft.type==="Symmetric")return rt=!0,!1}),u.indexOf(L,Y)===-1&&!rt&&L.push(Y)});var H=O.length&&O[0].get("coord")?O[0].get("coord").isTransposed:!1,F;if(O.length&&O[0].get("coord")&&O[0].get("coord").type==="cartesian"){if(L[0]==="interval"&&P.shared!==!1){var Z=u.mix({},S.tooltipCrosshairsRect);Z.isTransposed=H,F={zIndex:0,crosshairs:Z}}else if(u.indexOf(a,L[0])>-1){var G=u.mix({},S.tooltipCrosshairsLine);G.isTransposed=H,F={crosshairs:G}}}return u.mix(A,F,{})},_._bindEvent=function(){var x=this.chart,y=this._getTriggerEvent();y&&(x.on(y,u.wrapBehavior(this,"onMouseMove")),x.on("plotleave",u.wrapBehavior(this,"onMouseOut")))},_._offEvent=function(){var x=this.chart,y=this._getTriggerEvent();y&&(x.off(y,u.getWrapBehavior(this,"onMouseMove")),x.off("plotleave",u.getWrapBehavior(this,"onMouseOut")))},_._setTooltip=function(x,y,S,P){var A=this,O=A.tooltip,L=A.prePoint;if(!L||L.x!==x.x||L.y!==x.y){y=b(y),A.prePoint=x;var H=A.chart,F=A.viewTheme,Z=u.isArray(x.x)?x.x[x.x.length-1]:x.x,G=u.isArray(x.y)?x.y[x.y.length-1]:x.y;O.get("visible")||H.emit("tooltip:show",{x:Z,y:G,tooltip:O});var U=y[0],Y=U.title||U.name;O.isContentChange(Y,y)&&(H.emit("tooltip:change",{tooltip:O,x:Z,y:G,items:y}),Y=y[0].title||y[0].name,O.setContent(Y,y),u.isEmpty(S)?(O.clearMarkers(),O.set("markerItems",[])):A.options.hideMarkers===!0?O.set("markerItems",S):O.setMarkers(S,F.tooltipMarker));var J=this._getCanvas();P===J&&O.get("type")==="mini"?O.hide():(O.setPosition(Z,G,P),O.show())}},_.hideTooltip=function(){var x=this.tooltip,y=this.chart,S=this._getCanvas();this.prePoint=null,x.hide(),y.emit("tooltip:hide",{tooltip:x}),S.draw()},_.onMouseMove=function(x){if(!(u.isEmpty(x.views)||this.locked)){var y=this.timeStamp,S=+new Date,P={x:x.x,y:x.y};S-y>16&&!this.chart.get("stopTooltip")&&(this.showTooltip(P,x.views,x.shape),this.timeStamp=S)}},_.onMouseOut=function(x){var y=this.tooltip;!y.get("visible")||!y.get("follow")||this.locked||x&&x.toElement&&(f(x.toElement,"g2-tooltip")||v(x.toElement,"g2-tooltip"))||this.hideTooltip()},_.renderTooltip=function(){var x=this;if(!x.tooltip){var y=x.chart,S=x.viewTheme,P=x._getCanvas(),A=x._getDefaultTooltipCfg(),O=x.options;O=u.deepMix({plotRange:y.get("plotRange"),capture:!1,canvas:P,frontPlot:y.get("frontPlot"),viewTheme:S.tooltip,backPlot:y.get("backPlot")},A,O),O.crosshairs&&O.crosshairs.type==="rect"&&(O.zIndex=0),O.visible=!1;var L;O.type==="mini"?(O.crosshairs=!1,O.position="top",L=new r.Mini(O)):O.useHtml?L=new r.Html(O):L=new r.Canvas(O),x.tooltip=L;var H=x._getTriggerEvent(),F=L.get("container");!L.get("enterable")&&H==="plotmove"&&F&&(F.onmousemove=function(Z){var G=x._normalizeEvent(Z);y.emit(H,G)}),F&&(F.onmouseleave=function(){x.locked||x.hideTooltip()}),x._bindEvent()}},_._formatMarkerOfItem=function(x,y,S){var P=this,A=P.options,O=S.point;if(O&&O.x&&O.y){var L=u.isArray(O.x)?O.x[O.x.length-1]:O.x,H=u.isArray(O.y)?O.y[O.y.length-1]:O.y;O=x.applyMatrix(L,H,1),S.x=O[0],S.y=O[1],S.showMarker=!0,S.color.substring(0,2)==="l("&&(!A.hasOwnProperty("useHtml")||A.useHtml)&&(S.color=S.color.split(" ")[1].substring(2));var F=P._getItemMarker(y,S);if(S.marker=F,u.indexOf(i,y.get("type"))!==-1)return S}return null},_.lockTooltip=function(){this.locked=!0},_.unlockTooltip=function(){this.locked=!1},_.showTooltip=function(x,y,S){var P=this,A=this;if(!(u.isEmpty(y)||!x)){this.tooltip||this.renderTooltip();var O=A.options,L=[],H=[];if(u.each(y,function(J){if(!J.get("tooltipEnable"))return!0;var rt=J.get("geoms"),ft=J.get("coord");u.each(rt,function(dt){var ut=dt.get("type");if(dt.get("visible")&&dt.get("tooltipCfg")!==!1){var Lt=dt.get("dataArray");if(dt.isShareTooltip()||O.shared===!1&&u.inArray(["area","line","path","polygon"],ut)){var Ft=dt.getXScale(),Ot=dt.getAttr("color"),St=Ot?Ot.field:void 0;if(ut==="interval"&&Ft.field===St&&dt.hasAdjust("dodge")){var xt=u.find(Lt,function(Q){return!!dt.findPoint(x,Q)});u.each(xt,function(Q){var ht=dt.getTipItems(Q,O.title);u.each(ht,function(et){var at=A._formatMarkerOfItem(ft,dt,et);at&&L.push(at)}),H=H.concat(ht)})}else u.each(Lt,function(Q){var ht=dt.findPoint(x,Q);if(ht){var et=dt.getTipItems(ht,O.title);u.each(et,function(at){var gt=A._formatMarkerOfItem(ft,dt,at);gt&&L.push(gt)}),H=H.concat(et)}})}else{var At=dt.get("shapeContainer"),nt=At.get("canvas"),Mt=nt.get("pixelRatio"),z=At.getShape(x.x*Mt,x.y*Mt);z&&z.get("visible")&&z.get("origin")&&(H=dt.getTipItems(z.get("origin"),O.title)),u.each(H,function(Q){var ht=P._formatMarkerOfItem(ft,dt,Q);ht&&L.push(ht)})}}}),u.each(H,function(dt){var ut=dt.point,Lt=u.isArray(ut.x)?ut.x[ut.x.length-1]:ut.x,Ft=u.isArray(ut.y)?ut.y[ut.y.length-1]:ut.y;ut=ft.applyMatrix(Lt,Ft,1),dt.x=ut[0],dt.y=ut[1]})}),H.length){var F=H[0];if(!H.every(function(J){return J.title===F.title})){var Z=F,G=Infinity;H.forEach(function(J){var rt=n.distance([x.x,x.y],[J.x,J.y]);rt<G&&(G=rt,Z=J)}),H=H.filter(function(J){return J.title===Z.title}),L=L.filter(function(J){return J.title===Z.title})}if(O.shared===!1&&H.length>1){var U=H[0],Y=Math.abs(x.y-U.y);u.each(H,function(J){Math.abs(x.y-J.y)<=Y&&(U=J,Y=Math.abs(x.y-J.y))}),U&&U.x&&U.y&&(L=[U]),H=[U]}A._setTooltip(x,H,L,S)}else A.hideTooltip()}},_.clear=function(){var x=this.tooltip;x&&x.destroy(),this.tooltip=null,this.prePoint=null,this._offEvent()},_._getItemMarker=function(x,y){var S=this.options,P=S.marker||this.viewTheme.tooltip.marker;if(u.isFunction(P)){var A=x.get("shapeType")||"point",O=x.getDefaultValue("shape")||"circle",L=s.getShapeFactory(A),H={color:y.color},F=L.getMarkerCfg(O,H);return P(F,y)}return t({fill:y.color},P)},m}();E.exports=g},function(E,T,e){function t(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function u(m,_){m.prototype=Object.create(_.prototype),m.prototype.constructor=m,m.__proto__=_}var s=e(120),c=e(8),r=e(0),h=e(121),n=e(5),i=e(132),a="_origin",o=e(271);function l(m){var _=m.startAngle,M=m.endAngle;return!(!r.isNil(_)&&!r.isNil(M)&&M-_<Math.PI*2)}function f(m,_,M){var x=(m-_)/(M-_);return x>=0&&x<=1}function v(m,_){var M=!1;if(m){var x=m.type;if(x==="theta"){var y=m.start,S=m.end;M=f(_.x,y.x,S.x)&&f(_.y,y.y,S.y)}else{var P=m.invert(_);M=P.x>=0&&P.y>=0&&P.x<=1&&P.y<=1}}return M}var b={};r.each(c,function(m,_){var M=r.lowerFirst(_);b[M]=function(x){var y=new m(x);return this.addGeom(y),y}});var g=function(m){u(M,m);var _=M.prototype;_.getDefaultCfg=function(){return{viewContainer:null,coord:null,start:{x:0,y:0},end:{x:1,y:1},geoms:[],scales:{},options:{},scaleController:null,padding:0,theme:null,parent:null,tooltipEnable:!0,animate:n.animate,visible:!0}};function M(x){var y;y=m.call(this,x)||this;var S=t(y);return S._setTheme(),r.each(c,function(P,A){var O=r.lowerFirst(A);S[O]=function(L){L===void 0&&(L={}),L.viewTheme=S.get("viewTheme");var H=new P(L);return S.addGeom(H),H}}),S.init(),y}return _._setTheme=function(){var y=this,S=y.get("theme"),P={},A={};r.isObject(S)?A=S:r.indexOf(Object.keys(i),S)!==-1&&(A=i[S]),r.deepMix(P,n,A),y.set("viewTheme",P)},_.init=function(){this._initViewPlot(),this.get("data")&&this._initData(this.get("data")),this._initOptions(),this._initControllers(),this._bindEvents()},_._initOptions=function(){var y=this,S=r.mix({},y.get("options"));S.scales||(S.scales={}),S.coord||(S.coord={}),S.animate===!1&&this.set("animate",!1),(S.tooltip===!1||r.isNull(S.tooltip))&&this.set("tooltipEnable",!1),S.geoms&&S.geoms.length&&r.each(S.geoms,function(O){y._createGeom(O)});var P=y.get("scaleController");P&&(P.defs=S.scales);var A=y.get("coordController");A&&A.reset(S.coord),this.set("options",S)},_._createGeom=function(y){var S=y.type,P;this[S]&&(P=this[S](),r.each(y,function(A,O){if(P[O])if(r.isObject(A)&&A.field)if(A==="label")P[O](A.field,A.callback,A.cfg);else{var L;r.each(A,function(H,F){F!=="field"&&(L=H)}),P[O](A.field,L)}else P[O](A)}))},_._initControllers=function(){var y=this,S=y.get("options"),P=y.get("viewTheme"),A=y.get("canvas"),O=new h.Scale({viewTheme:P,defs:S.scales}),L=new h.Coord(S.coord);this.set("scaleController",O),this.set("coordController",L);var H=new h.Axis({canvas:A,viewTheme:P});this.set("axisController",H);var F=new h.Guide({viewTheme:P,options:S.guides||[]});this.set("guideController",F)},_._initViewPlot=function(){this.get("viewContainer")||this.set("viewContainer",this.get("middlePlot"))},_._initGeoms=function(){for(var y=this.get("geoms"),S=this.get("filteredData"),P=this.get("coord"),A=this.get("_id"),O=0;O<y.length;O++){var L=y[O];L.set("data",S),L.set("coord",P),L.set("_id",A+"-geom"+O),L.set("keyFields",this.get("keyFields")),L.init()}},_._clearGeoms=function(){for(var y=this,S=y.get("geoms"),P=0;P<S.length;P++){var A=S[P];A.clear()}},_._removeGeoms=function(){for(var y=this,S=y.get("geoms");S.length>0;){var P=S.shift();P.destroy()}},_._drawGeoms=function(){this.emit("beforedrawgeoms");for(var y=this.get("geoms"),S=this.get("coord"),P=0;P<y.length;P++){var A=y[P];A.setCoord(S),A.paint()}this.emit("afterdrawgeoms")},_.isShapeInView=function(y){var S=this.get("_id"),P=y._id;if(P)return P.split("-")[0]===S;for(var A=y;A;){if(A.get("viewId")===S)return!0;A=A.get("parent")}return!1},_.getViewRegion=function(){var y=this,S=y.get("parent"),P,A;if(S){var O=S.getViewRegion(),L=y._getViewRegion(O.start,O.end);P=L.start,A=L.end}else P=y.get("start"),A=y.get("end");return{start:P,end:A}},_._getViewRegion=function(y,S){var P=this.get("start"),A=this.get("end"),O=P.x,L=1-A.y,H=A.x,F=1-P.y,Z=this.get("padding"),G=r.toAllPadding(Z),U=G[0],Y=G[1],J=G[2],rt=G[3],ft={x:O*(S.x-y.x)+y.x+rt,y:L*(S.y-y.y)+y.y-J},dt={x:H*(S.x-y.x)+y.x-Y,y:F*(S.y-y.y)+y.y+U};return{start:ft,end:dt}},_._createCoord=function(){var y=this.get("coordController"),S=this.getViewRegion(),P=y.createCoord(S.start,S.end);this.set("coord",P)},_._renderAxes=function(){var y=this.get("options"),S=y.axes;if(S!==!1){var P=this.get("axisController");P.container=this.get("backPlot"),P.coord=this.get("coord"),P.options=S||{};var A=this.getXScale(),O=this.getYScales(),L=this.get("_id");P.createAxis(A,O,L)}},_._renderGuides=function(){var y=this.get("guideController");if(!r.isEmpty(y.options)){var S=this.get("coord");y.view=this,y.backContainer=this.get("backPlot"),y.frontContainer=this.get("frontPlot"),y.xScales=this._getScales("x"),y.yScales=this._getScales("y"),y.render(S)}},_._bindEvents=function(){var y=new h.Event({view:this,canvas:this.get("canvas")});y.bindEvents(),this.set("eventController",y)},_._clearEvents=function(){var y=this.get("eventController");y&&y.clearEvents()},_._getScales=function(y){for(var S=this.get("geoms"),P={},A=0;A<S.length;A++){var O=S[A],L=y==="x"?O.getXScale():O.getYScale();L&&!P[L.field]&&(P[L.field]=L)}return P},_._adjustScale=function(){this._setCatScalesRange();for(var y=this.get("geoms"),S=this.get("scaleController"),P=S.defs,A=0;A<y.length;A++){var O=y[A];if(O.get("type")==="interval"){var L=O.getYScale(),H=L.field,F=L.min,Z=L.max,G=L.type;!(P[H]&&P[H].min)&&G!=="time"&&(F>0?L.change({min:0}):Z<=0&&L.change({max:0}))}}},_._setCatScalesRange=function(){var y=this,S=y.get("coord"),P=y.get("viewTheme"),A=y.getXScale(),O=y.getYScales(),L=[];A&&L.push(A),L=L.concat(O);var H=S.isPolar&&l(S),F=y.get("scaleController"),Z=F.defs;r.each(L,function(G){if((G.isCategory||G.isIdentity)&&G.values&&!(Z[G.field]&&Z[G.field].range)){var U=G.values.length,Y;if(U===1)Y=[.5,1];else{var J=1,rt=0;H?S.isTransposed?(J=P.widthRatio.multiplePie,rt=1/U*J,Y=[rt/2,1-rt/2]):Y=[0,1-1/U]:(rt=1/U*1/2,Y=[rt,1-rt])}G.range=Y}})},_.getXScale=function(){var y=this.get("geoms"),S=null;return r.isEmpty(y)||(S=y[0].getXScale()),S},_.getYScales=function(){for(var y=this.get("geoms"),S=[],P=0;P<y.length;P++){var A=y[P],O=A.getYScale();O&&r.indexOf(S,O)===-1&&S.push(O)}return S},_.getXY=function(y){var S=this,P=S.get("coord"),A=S._getScales("x"),O=S._getScales("y"),L,H;for(var F in y)A[F]&&(L=A[F].scale(y[F])),O[F]&&(H=O[F].scale(y[F]));return!r.isNil(L)&&!r.isNil(H)?P.convert({x:L,y:H}):null},_.getSnapRecords=function(y){var S=this,P=S.get("geoms"),A=[];return r.each(P,function(O){var L=O.get("dataArray"),H;r.each(L,function(F){H=O.findPoint(y,F),H&&A.push(H)})}),A},_.addGeom=function(y){var S=this,P=S.get("geoms");P.push(y),y.set("view",S);var A=S.get("viewContainer");y.set("container",A),y.set("animate",S.get("animate")),y.bindEvents()},_.removeGeom=function(y){var S=this.get("geoms");r.Array.remove(S,y),y.destroy()},_.createScale=function(y,S){var P=this.get("scales"),A=this.get("parent"),O=P[y];if(!S){var L=this.get("filteredData"),H=this._getFieldsForLegend();L.length&&!H.includes(y)?S=L:S=this.get("data")}var F=this.get("scaleController");if(O){if(O.sync){var G=F.createScale(y,S);this._syncScale(O,G)}}else{if(O=F.createScale(y,S),O.sync&&A){var Z=A.createScale(y,S);O=this._getSyncScale(Z,O)}P[y]=O}return O},_._getFieldsForLegend=function(){var y=[],S=this.get("geoms");return r.each(S,function(P){var A=P.getFieldsForLegend();y=y.concat(A)}),r.uniq(y)},_._getSyncScale=function(y,S){return y.type!==S.type?S:(this._syncScale(y,S),y)},_._syncScale=function(y,S){var P=r.union(y.values,S.values);if(S.isLinear){var A=Math.max(y.max,S.max),O=Math.min(y.min,S.min);(y.max!==A||y.min!==O)&&y.change({min:O,max:A,values:P})}P.length!==y.values.length&&y.change({values:P})},_.getFilteredValues=function(y){var S=this.get("scales")[y],P=S.values,A=this._getFilters(),O;return A&&A[y]?O=P.filter(A[y]):O=P.slice(0),O},_.getFilteredOutValues=function(y){var S=this.get("scales")[y],P=S.values,A=this._getFilters(),O;return A&&A[y]?O=P.filter(function(){return!A[y].apply(A,arguments)}):O=[],O},_.filter=function(y,S){var P=this.get("options");P.filters||(P.filters={}),P.filters[y]=S,this.get("scaleController").filters=P.filters},_._getFilters=function(){var y=this.get("options");return y.filters},_.execFilter=function(y){var S=this,P=S._getFilters();return P&&(y=y.filter(function(A){var O=!0;return r.each(P,function(L,H){if(L&&(O=L(A[H],A),!O))return!1}),O})),y},_.axis=function(y,S){var P=this.get("options");if(y===!1)P.axes=!1;else{P.axes||(P.axes={});var A=P.axes;A[y]=S}return this},_.guide=function(){return this.get("guideController")},_._getKeyFields=function(y){var S=[];r.each(y,function(P,A){P.key&&S.push(A)}),this.set("keyFields",S)},_.scale=function(y,S){var P=this.get("options"),A=P.scales;return r.isObject(y)?r.mix(A,y):A[y]=S,this._getKeyFields(A),this},_.tooltip=function(y){return this.set("tooltipEnable",y),this},_.animate=function(y){var S=this.get("options");return S.animate=y,this.set("animate",y),this},_.changeOptions=function(y){return this.set("options",y),this._initOptions(y),this},_.getViewsByPoint=function(y){var S=[],P=this.get("views");return v(this.get("coord"),y)&&S.push(this),r.each(P,function(A){A.get("visible")&&v(A.get("coord"),y)&&S.push(A)}),S},_.eachShape=function(y){var S=this,P=S.get("views"),A=S.get("canvas");r.each(P,function(L){L.eachShape(y)});var O=this.get("geoms");return r.each(O,function(L){var H=L.getShapes();r.each(H,function(F){var Z=F.get("origin");if(r.isArray(Z)){var G=Z.map(function(Y){return Y[a]});y(G,F,L,S)}else{var U=Z[a];y(U,F,L,S)}})}),A.draw(),this},_.filterShape=function(y){var S=function(A,O,L,H){y(A,O,L,H)?O.show():O.hide()};return this.eachShape(S),this},_.clearInner=function(){this.set("scales",{}),this.emit("beforeclearinner");var y=this.get("options");y.geoms=null,this._clearGeoms(),this.get("guideController")&&this.get("guideController").reset(),this.get("axisController")&&this.get("axisController").clear(),this.emit("afterclearinner")},_.clear=function(){var y=this.get("options");return y.filters=null,this._removeGeoms(),this.clearInner(),this.get("guideController")&&this.get("guideController").clear(),this.set("isUpdate",!1),this.set("keyFields",[]),this},_.coord=function(y,S){var P=this.get("coordController");return P.reset({type:y,cfg:S}),P},_.resetCoord=function(){this._createCoord()},_.source=function(y,S){return this._initData(y),S&&this.scale(S),this.emit("setdata"),this},_.changeData=function(y){return this.emit("beforechangedata"),this._initData(y),this.emit("afterchangedata"),this.repaint(),this},_._initData=function(y){var S=this.get("dataView");S&&(S.off("change",r.getWrapBehavior(this,"_onViewChange")),this.set("dataView",null)),y&&y.isDataView&&(y.on("change",r.wrapBehavior(this,"_onViewChange")),this.set("dataView",y),y=y.rows),this.set("data",y)},_._onViewChange=function(){this.emit("beforechangedata");var y=this.get("dataView"),S=y.rows;this.set("data",S),this.emit("afterchangedata"),this.repaint()},_.beforeRender=function(){var y=this.get("views");r.each(y,function(S){S.beforeRender()}),this.initView()},_.drawComponents=function(){var y=this.get("views");r.each(y,function(S){S.drawComponents()}),this._renderAxes(),this._renderGuides()},_.drawCanvas=function(y){if(!y){var S=this.get("views"),P=this.get("backPlot");P.sort();var A=this.get("canvas"),O=this.get("animate");if(O){var L=this.get("isUpdate");r.each(S,function(H){o.execAnimation(H,L)}),o.execAnimation(this,L)}else A.draw()}},_.render=function(y){return this.clearInner(),this.emit("beforerender"),this.beforeRender(),this.emit("beforepaint"),this.drawComponents(),this.paint(),this.emit("afterpaint"),this.drawCanvas(y),this.emit("afterrender"),this.set("rendered",!0),this},_.initView=function(){var y=this.get("data")||[],S=this.execFilter(y);this.set("filteredData",S),this._createCoord(),this.emit("beforeinitgeoms"),this._initGeoms(),this._adjustScale()},_.paint=function(){var y=this.get("views");r.each(y,function(P){P.paint()});var S=this.get("data");r.isEmpty(S)||this._drawGeoms(),this.get("visible")||this.changeVisible(!1,!0)},_.changeVisible=function(y,S){var P=this.get("geoms");if(r.each(P,function(O){O.changeVisible(y,!0)}),this.get("axisController")&&this.get("axisController").changeVisible(y),this.get("guideController")&&this.get("guideController").changeVisible(y),!S){var A=this.get("canvas");A.draw()}},_.repaint=function(){this.set("isUpdate",!0),this.clearInner(),this.render()},_.destroy=function(){this._clearEvents();var y=this.get("dataView");y&&y.off("change",r.getWrapBehavior(this,"_onViewChange")),this.clear(),m.prototype.destroy.call(this)},M}(s);E.exports=g},function(E,T,e){var t=e(30),u=t.Guide,s=e(281);u.RegionFilter=s,E.exports=u},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var u=e(0),s=e(20),c=e(31),r=c.Path,h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a.getDefaultCfg=function(){var l=n.prototype.getDefaultCfg.call(this);return u.mix({},l,{name:"regionFilter",zIndex:1,top:!0,start:null,end:null,color:null,apply:null,style:{opacity:1}})},a.render=function(l,f,v,b){var g=this,m=f.addGroup();m.name="guide-region-filter",b.once("afterpaint",function(){if(!m.get("destroyed")){g._drawShapes(b,m);var _=g._drawClip(l);m.attr({clip:_}),g.set("clip",_),g.get("appendInfo")&&m.setSilent("appendInfo",g.get("appendInfo")),g.set("el",m)}})},a._drawShapes=function(l,f){var v=this,b=[],g=l.getAllGeoms();return g.map(function(m){var _=m.getShapes(),M=m.get("type"),x=v._geomFilter(M);return x&&_.map(function(y){var S=y.type,P=u.cloneDeep(y.attr());v._adjustDisplay(P);var A=f.addShape(S,{attrs:P});return b.push(A),y}),m}),b},a._drawClip=function(l){var f=this,v=f.parsePoint(l,f.get("start")),b=f.parsePoint(l,f.get("end")),g=[["M",v.x,v.y],["L",b.x,v.y],["L",b.x,b.y],["L",v.x,b.y],["z"]],m=new r({attrs:{path:g,opacity:1}});return m},a._adjustDisplay=function(l){var f=this,v=f.get("color");l.fill&&(l.fill=l.fillStyle=v),l.stroke=l.strokeStyle=v},a._geomFilter=function(l){var f=this,v=f.get("apply");return v?u.contains(v,l):!0},a.clear=function(){n.prototype.clear.call(this);var l=this.get("clip");l&&l.remove()},i}(s);E.exports=h},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var u=e(0),s=e(30),c=e(5),r=s.Legend,h=r.Category,n=function(i){t(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return u.mix({},f,{type:"tail-legend",layout:"vertical",autoLayout:!0})},o._addItem=function(f){var v=this.get("itemsGroup"),b=this._getNextX(),g=0,m=this.get("unCheckColor"),_=v.addGroup({x:0,y:0,value:f.value,scaleValue:f.scaleValue,checked:f.checked});_.translate(b,g),_.set("viewId",v.get("viewId"));var M=this.get("textStyle"),x=this.get("_wordSpaceing"),y=0;if(f.marker){var S=u.mix({},f.marker,{x:f.marker.radius,y:0});f.checked||(S.fill&&(S.fill=m),S.stroke&&(S.stroke=m));var P=_.addShape("marker",{type:"marker",attrs:S});P.attr("cursor","pointer"),P.name="legend-marker",y+=P.getBBox().width+x}var A=u.mix({},M,{x:y,y:0,text:this._formatItemValue(f.value)});f.checked||u.mix(A,{fill:m});var O=_.addShape("text",{attrs:A});O.attr("cursor","pointer"),O.name="legend-text",this.get("appendInfo")&&O.setSilent("appendInfo",this.get("appendInfo"));var L=_.getBBox(),H=this.get("itemWidth"),F=_.addShape("rect",{attrs:{x:b,y:g-L.height/2,fill:"#fff",fillOpacity:0,width:H||L.width,height:L.height}});return F.attr("cursor","pointer"),F.setSilent("origin",f),F.name="legend-item",this.get("appendInfo")&&F.setSilent("appendInfo",this.get("appendInfo")),_.name="legendGroup",_},o._adjust=function(){var f=this,v=f.get("geom");if(v){var b=f.get("group").attr("matrix");b[7]=0;var g=f.get("geom").get("dataArray"),m=this.get("itemsGroup").get("children"),_=0;u.each(m,function(M){var x=g[_],y=x[x.length-1].y;u.isArray(y)&&(y=y[1]);var S=M.getBBox().height,P=M.get("x"),A=y-S/2;M.translate(P,A),_++}),f.get("autoLayout")&&f._antiCollision(m)}},o.render=function(){var f=this;i.prototype.render.call(this);var v=this.get("chart");v.once("afterpaint",function(){f._adjust()})},o._getPreviousY=function(f){var v=f.attr("matrix")[7],b=f.getBBox().height;return v+b},o._adjustDenote=function(f,v,b){var g=c.legend.legendMargin,m=-2,_=-g*2;f.addShape("path",{attrs:{path:"M"+m+","+v+"L"+_+","+(b+3),lineWidth:1,lineDash:[2,2],stroke:"#999999"}})},o._antiCollision=function(f){if(f===void 0&&(f=[]),!!f.length){var v=this;f.sort(function(G,U){var Y=G.attr("matrix")[7],J=U.attr("matrix")[7];return Y-J});var b=!0,g=v.get("chart").get("plotRange"),m=g.tl.y,_=Math.abs(m-g.bl.y),M=f[0].getBBox().height,x=Number.MIN_VALUE,y=0,S=f.map(function(G){var U=G.attr("matrix")[7];return U>y&&(y=U),U<x&&(x=U),{size:G.getBBox().height,targets:[U-m]}});x-=m;for(var P=0;b;){for(var A=0;A<S.length;A++){var O=S[A],L=(Math.min.apply(x,O.targets)+Math.max.apply(x,O.targets))/2;O.pos=Math.min(Math.max(x,L-O.size/2),_-O.size)}for(b=!1,P=S.length;P--;)if(P>0){var H=S[P-1],F=S[P];H.pos+H.size>F.pos&&(H.size+=F.size,H.targets=H.targets.concat(F.targets),S.splice(P,1),b=!0)}}P=0;var Z=this.get("itemsGroup").addGroup();S.forEach(function(G){var U=m+M;G.targets.forEach(function(){var Y=f[P].attr("matrix")[7],J=G.pos+U-M/2,rt=Math.abs(Y-J);rt>M/2&&v._adjustDenote(Z,J,Y-v.get("group").attr("matrix")[7]/2),f[P].translate(0,-Y),f[P].translate(0,J),U+=M,P++})})}},a}(h);E.exports=n},function(E,T,e){var t=e(0),u=e(16),s=u.Group,c="auto",r=function h(n){h.superclass.constructor.call(this,n)};t.extend(r,s),t.augment(r,{getDefaultCfg:function(){return{type:"plotBack",padding:null,background:null,plotRange:null,plotBackground:null}},_beforeRenderUI:function(){this._calculateRange()},_renderUI:function(){this._renderBackground(),this._renderPlotBackground()},_renderBackground:function(){var n=this,i=n.get("background");if(i){var a=this.get("canvas"),o=n.get("width")||a.get("width"),l=n.get("height")||a.get("height"),f={x:0,y:0,width:o,height:l},v=n.get("backgroundShape");v?v.attr(f):(v=this.addShape("rect",{attrs:t.mix(f,i)}),this.set("backgroundShape",v))}else return},_renderPlotBackground:function(){var n=this,i=n.get("plotBackground");if(i){var a=n.get("plotRange"),o=a.br.x-a.bl.x,l=a.br.y-a.tr.y,f=a.tl,v={x:f.x,y:f.y,width:o,height:l},b=n.get("plotBackShape");b?b.attr(v):(i.image?(v.img=i.image,b=n.addShape("image",{attrs:v})):(t.mix(v,i),b=n.addShape("rect",{attrs:v})),n.set("plotBackShape",b))}else return},_convert:function(n,i){if(t.isString(n)){if(n===c)n=0;else if(n.includes("%")){var a=this.get("canvas"),o=this.get("width")||a.get("width"),l=this.get("height")||a.get("height");n=parseInt(n,10)/100,n=i?n*o:n*l}}return n},_calculateRange:function(){var n=this,i=n.get("plotRange");t.isNil(i)&&(i={});var a=n.get("padding"),o=this.get("canvas"),l=n.get("width")||o.get("width"),f=n.get("height")||o.get("height"),v=t.toAllPadding(a),b=n._convert(v[0],!1),g=n._convert(v[1],!0),m=n._convert(v[2],!1),_=n._convert(v[3],!0),M=Math.min(_,l-g),x=Math.max(_,l-g),y=Math.min(f-m,b),S=Math.max(f-m,b);i.tl={x:M,y},i.tr={x,y},i.bl={x:M,y:S},i.br={x,y:S},i.cc={x:(x+M)/2,y:(S+y)/2},this.set("plotRange",i)},repaint:function(){return this._calculateRange(),this._renderBackground(),this._renderPlotBackground(),this}}),E.exports=r},function(E,T,e){function t(r,h){r.prototype=Object.create(h.prototype),r.prototype.constructor=r,r.__proto__=h}var u=e(46);function s(r,h,n){return{x:r.x+h*Math.cos(n),y:r.y+h*Math.sin(n)}}var c=function(r){t(h,r);function h(){return r.apply(this,arguments)||this}var n=h.prototype;return n.getDefaultCfg=function(){var a=r.prototype.getDefaultCfg.call(this);return a.type="circle",a},n.getRegion=function(a,o){var l=1/2,f=Math.PI*2/a,v=-1*Math.PI/2+f*o,b=l/(1+1/Math.sin(f/2)),g={x:.5,y:.5},m=s(g,l-b,v),_=Math.PI*5/4,M=Math.PI*1/4;return{start:s(m,b,_),end:s(m,b,M)}},n.generateFacets=function(a){var o=this,l=o.fields,f=l[0];if(!f)throw"Please specify for the field for facet!";var v=o.getFieldValues(f,a),b=v.length,g=[];return v.forEach(function(m,_){var M=[{field:f,value:m,values:v}],x=o.getFilter(M),y=a.filter(x),S={type:o.type,colValue:m,colField:f,colIndex:_,cols:b,rows:1,rowIndex:0,data:y,region:o.getRegion(b,_)};g.push(S)}),g},h}(u);E.exports=c},function(E,T,e){var t=e(0),u=e(44),s={};s.Rect=e(126),s.List=e(125),s.Circle=e(284),s.Tree=e(288),s.Mirror=e(287),s.Matrix=e(286),u.prototype.facet=function(c,r){var h=s[t.upperFirst(c)];if(!h)throw new Error("Not support such type of facets as: "+c);var n=this.get("facets");n&&n.destroy(),r.chart=this;var i=new h(r);this.set("facets",i)},E.exports=s},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var u=e(126),s=function(c){t(r,c);function r(){return c.apply(this,arguments)||this}var h=r.prototype;return h.getDefaultCfg=function(){var i=c.prototype.getDefaultCfg.call(this);return i.type="matrix",i.showTitle=!1,i},h.generateFacets=function(i){for(var a=this,o=a.fields,l=o.length,f=l,v=[],b=0;b<f;b++)for(var g=o[b],m=0;m<l;m++){var _=o[m],M={type:a.type,colValue:g,rowValue:_,colField:g,rowField:_,colIndex:b,rowIndex:m,cols:f,rows:l,data:i,region:a.getRegion(l,f,b,m)};v.push(M)}return v},h.setXAxis=function(i,a,o){o.rowIndex!==o.rows-1&&(a[i].title=null,a[i].label=null)},h.setYAxis=function(i,a,o){o.colIndex!==0&&(a[i].title=null,a[i].label=null)},r}(u);E.exports=s},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var u=e(125),s=function(c){t(r,c);function r(){return c.apply(this,arguments)||this}var h=r.prototype;return h.getDefaultCfg=function(){var i=c.prototype.getDefaultCfg.call(this);return i.type="mirror",this.transpose=!1,i},h.init=function(){var i=this;i.transpose?(i.cols=2,i.rows=1):(i.cols=1,i.rows=2),c.prototype.init.call(this)},h.beforeProcessView=function(i,a){this.transpose?a.colIndex%2==0?i.coord().transpose().scale(-1,1):i.coord().transpose():a.rowIndex%2!=0&&i.coord().scale(1,-1)},h.renderTitle=function(i,a){this.transpose?this.drawColTitle(i,a):this.drawRowTitle(i,a)},h.setXAxis=function(i,a,o){(o.colIndex===1||o.rowIndex===1)&&(a[i].label=null,a[i].title=null)},h.setYAxis=function(){},r}(u);E.exports=s},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var u=e(46),s=e(0),c=s.assign,r=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i.getDefaultCfg=function(){var o=h.prototype.getDefaultCfg.call(this);return o.type="tree",o.line={lineWidth:1,stroke:"#ddd"},o.lineSmooth=!1,o},i.generateFacets=function(o){var l=this,f=l.fields;if(!f.length)throw"Please specify for the fields for facet!";var v=[],b=l.getRootFacet(o);return v.push(b),b.children=l.getChildFacets(o,1,v),l.setRegion(v),v},i.getRootFacet=function(o){var l=this,f={type:l.type,rows:l.getRows(),rowIndex:0,colIndex:0,colValue:l.rootTitle,data:o};return f},i.getRows=function(){return this.fields.length+1},i.getChildFacets=function(o,l,f){var v=this,b=v.fields,g=b.length;if(!(g<l)){var m=[],_=b[l-1],M=v.getFieldValues(_,o);return M.forEach(function(x,y){var S=[{field:_,value:x,values:M}],P=v.getFilter(S),A=o.filter(P);if(A.length){var O={type:v.type,colValue:x,colField:_,colIndex:y,rows:v.getRows(),rowIndex:l,data:A,children:v.getChildFacets(A,l+1,f)};m.push(O),f.push(O)}}),m}},i.setRegion=function(o){var l=this;l.forceColIndex(o),o.forEach(function(f){f.region=l.getRegion(f.rows,f.cols,f.colIndex,f.rowIndex)})},i.forceColIndex=function(o){var l=this,f=[],v=0;o.forEach(function(x){l.isLeaf(x)&&(f.push(x),x.colIndex=v,v++)}),f.forEach(function(x){x.cols=f.length});for(var b=l.fields.length,g=b-1;g>=0;g--)for(var m=l.getFacetsByLevel(o,g),_=0;_<m.length;_++){var M=m[_];l.isLeaf(M)||(M.originColIndex=M.colIndex,M.colIndex=l.getRegionIndex(M.children),M.cols=f.length)}},i.getFacetsByLevel=function(o,l){var f=[];return o.forEach(function(v){v.rowIndex===l&&f.push(v)}),f},i.getRegion=function(o,l,f,v){var b=1/l,g=1/o,m={x:b*f,y:g*v},_={x:m.x+b,y:m.y+g*2/3};return{start:m,end:_}},i.getRegionIndex=function(o){var l=o[0],f=o[o.length-1];return(f.colIndex-l.colIndex)/2+l.colIndex},i.isLeaf=function(o){return!o.children||!o.children.length},i.setXAxis=function(o,l,f){f.rowIndex!==f.rows-1&&(l[o].label=null,l[o].title=null)},i.setYAxis=function(o,l,f){f.originColIndex!==0&&f.colIndex!==0&&(l[o].title=null,l[o].label=null)},i.onPaint=function(){h.prototype.onPaint.call(this),this.group.clear(),this.facets&&this.line&&this.drawLines(this.facets,this.group)},i.drawLines=function(o,l){var f=this,v=l.addGroup();o.forEach(function(b){if(!f.isLeaf(b)){var g=b.children;f._addFacetLines(b,g,v)}})},i._addFacetLines=function(o,l,f){var v=this,b=o.view,g=b.getViewRegion(),m={x:g.start.x+(g.end.x-g.start.x)/2,y:g.start.y};l.forEach(function(_){var M=_.view.getViewRegion(),x={x:M.start.x+(M.end.x-M.start.x)/2,y:M.end.y},y={x:m.x,y:m.y+(x.y-m.y)/2},S={x:x.x,y:y.y};v._drawLine([m,y,S,x],f)})},i._getPath=function(o){var l=this,f=[],v=l.lineSmooth;return v?(f.push(["M",o[0].x,o[0].y]),f.push(["C",o[1].x,o[1].y,o[2].x,o[2].y,o[3].x,o[3].y])):o.forEach(function(b,g){g===0?f.push(["M",b.x,b.y]):f.push(["L",b.x,b.y])}),f},i._drawLine=function(o,l){var f=this,v=f._getPath(o),b=f.line;l.addShape("path",{attrs:c({path:v},b)})},n}(u);E.exports=r},function(E,T,e){function t(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function u(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var s=e(8),c=e(128),r=e(0);e(304);var h=function(i){u(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.type="area",f.shapeType="area",f.generatePoints=!0,f.sortable=!0,f};function o(l){var f;return f=i.call(this,l)||this,r.assign(t(f),c),f}return a.draw=function(f,v,b,g){var m=this,_=this.getDrawCfg(f[0]);m._applyViewThemeShapeStyle(_,_.shape,b);var M=this.splitData(f);_.origin=f,r.each(M,function(x,y){_.splitedIndex=y;var S=x.map(function(A){return A.points});_.points=S;var P=b.drawShape(_.shape,_,v);m.appendShapeInfo(P,g+y)})},o}(s),n=function(i){u(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.hasDefaultAdjust=!0,f.adjusts=[{type:"stack"}],f},a}(h);h.Stack=n,s.Area=h,s.AreaStack=n,E.exports=h},function(E,T,e){function t(c,r){c.prototype=Object.create(r.prototype),c.prototype.constructor=c,c.__proto__=r}var u=e(8);e(305);var s=function(c){t(r,c);function r(){return c.apply(this,arguments)||this}var h=r.prototype;return h.getDefaultCfg=function(){var i=c.prototype.getDefaultCfg.call(this);return i.type="edge",i.shapeType="edge",i.generatePoints=!0,i},r}(u);u.Edge=s,E.exports=s},function(E,T,e){function t(b,g){b.prototype=Object.create(g.prototype),b.prototype.constructor=b,b.__proto__=g}var u=e(65),s=u.ColorUtil,c=e(8),r=e(0),h="_origin",n="shadowCanvas",i="valueRange",a="imageShape",o="mappedData",l="grayScaleBlurredCanvas",f="heatmapSize",v=function(b){t(g,b);function g(){return b.apply(this,arguments)||this}var m=g.prototype;return m.getDefaultCfg=function(){var M=b.prototype.getDefaultCfg.call(this);return M.type="heatmap",M.paletteCache={},M},m._prepareRange=function(){var M=this,x=M.get(o),y=M.getAttr("color"),S=y.field,P=Infinity,A=-Infinity;x.forEach(function(L){var H=L[h][S];H>A&&(A=H),H<P&&(P=H)}),P===A&&(P=A-1);var O=[P,A];M.set(i,O)},m._prepareSize=function(){var M=this,x=M.getDefaultValue("size");r.isNumber(x)||(x=M._getDefaultSize());var y=M.get("styleOptions"),S=y&&r.isObject(y.style)?y.style.blur:null;(!r.isFinite(S)||S===null)&&(S=x/2),M.set(f,{blur:S,radius:x})},m._getDefaultSize=function(){var M=this,x=M.getAttr("position"),y=M.get("coord"),S=Math.min(y.width/(x.scales[0].ticks.length*4),y.height/(x.scales[1].ticks.length*4));return S},m._colorize=function(M){for(var x=this,y=x.getAttr("color"),S=M.data,P=x.get("paletteCache"),A=3;A<S.length;A+=4){var O=S[A];if(O){var L=void 0;P[O]?L=P[O]:(L=s.rgb2arr(y.gradient(O/256)),P[O]=L),S[A-3]=L[0],S[A-2]=L[1],S[A-1]=L[2],S[A]=O}}},m._prepareGreyScaleBlurredCircle=function(M,x){var y=this,S=y.get(l);S||(S=document.createElement("canvas"),y.set(l,S));var P=M+x,A=S.getContext("2d");S.width=S.height=P*2,A.clearRect(0,0,S.width,S.height),A.shadowOffsetX=A.shadowOffsetY=P*2,A.shadowBlur=x,A.shadowColor="black",A.beginPath(),A.arc(-P,-P,M,0,Math.PI*2,!0),A.closePath(),A.fill()},m._drawGrayScaleBlurredCircle=function(M,x,y,S,P){var A=this,O=A.get(l);P.globalAlpha=S,P.drawImage(O,M-y,x-y)},m._getShadowCanvasCtx=function(){var M=this,x=M.get(n);x||(x=document.createElement("canvas"),M.set(n,x));var y=M.get("coord");return y&&(x.width=y.width,x.height=y.height),x.getContext("2d")},m._clearShadowCanvasCtx=function(){var M=this._getShadowCanvasCtx();M.clearRect(0,0,M.canvas.width,M.canvas.height)},m._getImageShape=function(){var M=this,x=M.get(a);if(x)return x;var y=M.get("container");return x=y.addShape("Image",{}),M.set(a,x),x},m.clear=function(){this._clearShadowCanvasCtx(),b.prototype.clear.call(this)},m.drawWithRange=function(M){var x=this,y=x.get("coord"),S=y.start,P=y.end,A=y.width,O=y.height,L=x.getAttr("color").field,H=x.get(f);x._clearShadowCanvasCtx();var F=x._getShadowCanvasCtx(),Z=x.get(o);M&&(Z=Z.filter(function(ut){return ut[h][L]<=M[1]&&ut[h][L]>=M[0]}));for(var G=x._getScale(L),U=0;U<Z.length;U++){var Y=Z[U],J=x.getDrawCfg(Y),rt=G.scale(Y[h][L]);x._drawGrayScaleBlurredCircle(J.x-S.x,J.y-P.y,H.radius+H.blur,rt,F)}var ft=F.getImageData(0,0,A,O);x._clearShadowCanvasCtx(),x._colorize(ft),F.putImageData(ft,0,0);var dt=x._getImageShape();dt.attr("x",S.x),dt.attr("y",P.y),dt.attr("width",A),dt.attr("height",O),dt.attr("img",F.canvas)},m.draw=function(M){var x=this;x.set(o,M),x._prepareRange(),x._prepareSize();var y=x.get(f);x._prepareGreyScaleBlurredCircle(y.radius,y.blur);var S=x.get(i);x.drawWithRange(S)},g}(c);c.Heatmap=v,E.exports=v},function(E,T,e){var t=e(8);t.Point=e(301),t.PointJitter=t.Point.Jitter,t.PointStack=t.Point.Stack,t.Path=e(130),t.Line=e(297),t.LineStack=t.Line.Stack,t.Interval=e(293),t.IntervalStack=t.Interval.Stack,t.IntervalDodge=t.Interval.Dodge,t.IntervalSymmetric=t.Interval.Symmetric,t.Area=e(289),t.AreaStack=t.Area.Stack,t.Polygon=e(302),t.Schema=e(303),t.SchemaDodge=t.Schema.Dodge,t.Edge=e(290),t.Heatmap=e(291),t.Venn=e(315),t.Violin=e(316),E.exports=t},function(E,T,e){function t(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function u(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var s=e(8),c=e(0),r=e(70);e(306);var h=function(o){u(f,o);var l=f.prototype;l.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return b.type="interval",b.shapeType="interval",b.generatePoints=!0,b};function f(v){var b;return b=o.call(this,v)||this,c.assign(t(b),r),b}return l.createShapePointsCfg=function(b){var g=o.prototype.createShapePointsCfg.call(this,b);return g.size=this.getNormalizedSize(b),g},l.clearInner=function(){o.prototype.clearInner.call(this),this.set("defaultSize",null)},f}(s),n=function(o){u(l,o);function l(){return o.apply(this,arguments)||this}var f=l.prototype;return f.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return b.hasDefaultAdjust=!0,b.adjusts=[{type:"stack"}],b},l}(h),i=function(o){u(l,o);function l(){return o.apply(this,arguments)||this}var f=l.prototype;return f.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return b.hasDefaultAdjust=!0,b.adjusts=[{type:"dodge"}],b},l}(h),a=function(o){u(l,o);function l(){return o.apply(this,arguments)||this}var f=l.prototype;return f.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return b.hasDefaultAdjust=!0,b.adjusts=[{type:"symmetric"}],b},l}(h);h.Stack=n,h.Dodge=i,h.Symmetric=a,s.Interval=h,s.IntervalStack=n,s.IntervalDodge=i,s.IntervalSymmetric=a,E.exports=h},function(E,T,e){var t=e(69),u=e(127),s=e(296),c=e(295),r={getLabelsClass:function(n,i){var a=t;return n==="polar"?a=u:n==="theta"?a=s:(i==="interval"||i==="polygon")&&(a=c),a}};E.exports=r},function(E,T,e){var t=e(0),u=e(69),s=function c(r){c.superclass.constructor.call(this,r)};t.extend(s,u),t.augment(s,{setLabelPosition:function(r,h,n,i){t.isFunction(i)&&(i=i(r.text,h._origin,n));var a=this.get("coord"),o=a.isTransposed,l=a.convertPoint(h.points[0]),f=a.convertPoint(h.points[2]),v=(l.x-f.x)/2*(o?-1:1),b=(l.y-f.y)/2*(o?-1:1);switch(i){case"right":o?(r.x-=v,r.y+=b,r.textAlign=r.textAlign||"center"):(r.x-=v,r.y+=b,r.textAlign=r.textAlign||"left");break;case"left":o?(r.x-=v,r.y-=b,r.textAlign=r.textAlign||"center"):(r.x+=v,r.y+=b,r.textAlign=r.textAlign||"right");break;case"bottom":o?(r.x-=v*2,r.textAlign=r.textAlign||"left"):(r.y+=b*2,r.textAlign=r.textAlign||"center");break;case"middle":o?r.x-=v:r.y+=b,r.textAlign=r.textAlign||"center";break;case"top":o?r.textAlign=r.textAlign||"left":r.textAlign=r.textAlign||"center";break;default:break}}}),E.exports=s},function(E,T,e){var t=e(0),u=e(127),s=e(25),c=e(5),r=5;function h(a,o,l){return{x:a.x+l*Math.cos(o),y:a.y+l*Math.sin(o)}}function n(a,o,l,f,v){var b=!0,g=l.start,m=l.end,_=Math.min(g.y,m.y),M=Math.abs(g.y-m.y),x,y=0,S=Number.MIN_VALUE,P=a.map(function(L){return L.y>y&&(y=L.y),L.y<S&&(S=L.y),{size:o,targets:[L.y-_]}});for(S-=_,y-_>M&&(M=y-_);b;)for(P.forEach(function(L){var H=(Math.min.apply(S,L.targets)+Math.max.apply(S,L.targets))/2;L.pos=Math.min(Math.max(S,H-L.size/2),M-L.size)}),b=!1,x=P.length;x--;)if(x>0){var A=P[x-1],O=P[x];A.pos+A.size>O.pos&&(A.size+=O.size,A.targets=A.targets.concat(O.targets),A.pos+A.size>M&&(A.pos=M-A.size),P.splice(x,1),b=!0)}x=0,P.forEach(function(L){var H=_+o/2;L.targets.forEach(function(){a[x].y=L.pos+H,H+=o,x++})}),a.forEach(function(L){var H=L.r*L.r,F=Math.pow(Math.abs(L.y-f.y),2);if(H<F)L.x=f.x;else{var Z=Math.sqrt(H-F);v?L.x=f.x+Z:L.x=f.x-Z}})}var i=function a(o){a.superclass.constructor.call(this,o)};t.extend(i,u),t.augment(i,{getDefaultCfg:function(){return{label:c.thetaLabels}},getDefaultOffset:function(o){return o.offset||0},adjustItems:function(o){var l=this,f=o[0]?o[0].offset:0;return f>0&&(o=l._distribute(o,f)),i.superclass.adjustItems.call(this,o)},_distribute:function(o,l){var f=this,v=f.get("coord"),b=v.getRadius(),g=f.get("label").labelHeight,m=v.getCenter(),_=b+l,M=_*2+g*2,x={start:v.start,end:v.end},y=f.get("geom");if(y){var S=y.get("view");x=S.getViewRegion()}var P=[[],[]];return o.forEach(function(A){!A||(A.textAlign==="right"?P[0].push(A):P[1].push(A))}),P.forEach(function(A,O){var L=parseInt(M/g,10);A.length>L&&(A.sort(function(H,F){return F["..percent"]-H["..percent"]}),A.splice(L,A.length-L)),A.sort(function(H,F){return H.y-F.y}),n(A,g,x,m,O)}),P[0].concat(P[1])},lineToLabel:function(o){var l=this,f=l.get("coord"),v=f.getRadius(),b=o.offset,g=o.orignAngle||o.angle,m=f.getCenter(),_=h(m,g,v+r/2),M=h(m,g,v+b/2);o.labelLine||(o.labelLine=l.get("label").labelLine||{}),o.labelLine.path=["M"+_.x,_.y+" Q"+M.x,M.y+" "+o.x,o.y].join(",")},getLabelRotate:function(o,l){var f;return l<0&&(f=o*180/Math.PI,f>90&&(f=f-180),f<-90&&(f=f+180)),f/180*Math.PI},getLabelAlign:function(o){var l=this,f=l.get("coord"),v=f.getCenter(),b;o.angle<=Math.PI/2&&o.x>=v.x?b="left":b="right";var g=l.getDefaultOffset(o);return g<=0&&(b==="right"?b="left":b="right"),b},getArcPoint:function(o){return o},getPointAngle:function(o){var l=this,f=l.get("coord"),v={x:t.isArray(o.x)?o.x[0]:o.x,y:o.y[0]};l.transLabelPoint(v);var b={x:t.isArray(o.x)?o.x[1]:o.x,y:o.y[1]};l.transLabelPoint(b);var g,m=s.getPointAngle(f,v);if(o.points&&o.points[0].y===o.points[1].y)g=m;else{var _=s.getPointAngle(f,b);m>=_&&(_=_+Math.PI*2),g=m+(_-m)/2}return g},getCirclePoint:function(o,l){var f=this,v=f.get("coord"),b=v.getCenter(),g=v.getRadius()+l,m=h(b,o,g);return m.angle=o,m.r=g,m}}),E.exports=i},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var u=e(8),s=e(130);e(307);var c=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i.getDefaultCfg=function(){var o=h.prototype.getDefaultCfg.call(this);return o.type="line",o.sortable=!0,o},n}(s),r=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i.getDefaultCfg=function(){var o=h.prototype.getDefaultCfg.call(this);return o.hasDefaultAdjust=!0,o.adjusts=[{type:"stack"}],o},n}(c);c.Stack=r,u.Line=c,u.LineStack=r,E.exports=c},function(E,T,e){var t=e(0),u="_origin",s=e(129),c="_originActiveAttrs";function r(a,o){if(t.isNil(a)||t.isNil(o))return!1;var l=a.get("origin"),f=o.get("origin");return t.isEqual(l,f)}function h(a,o){if(!a||a.length!==o.length)return!0;var l=!1;return t.each(o,function(f,v){if(!r(f,a[v]))return l=!0,!1}),l}function n(a,o){var l={};return t.each(a,function(f,v){var b=o.attr(v);t.isArray(b)&&(b=t.cloneDeep(b)),l[v]=b}),l}var i={_isAllowActive:function(){var o=this.get("allowActive");if(t.isNil(o)){var l=this.get("view"),f=this.isShareTooltip(),v=l.get("options");if(v.tooltip===!1||!f)return!0}else return o;return!1},_onMouseenter:function(o){var l=this,f=o.shape,v=l.get("shapeContainer");f&&v.contain(f)&&l._isAllowActive()&&l.setShapesActived(f)},_onMouseleave:function(){var o=this,l=o.get("view"),f=l.get("canvas");o.get("activeShapes")&&(o.clearActivedShapes(),f.draw())},_bindActiveAction:function(){var o=this,l=o.get("view"),f=o.get("type");l.on(f+":mouseenter",t.wrapBehavior(o,"_onMouseenter")),l.on(f+":mouseleave",t.wrapBehavior(o,"_onMouseleave"))},_offActiveAction:function(){var o=this,l=o.get("view"),f=o.get("type");l.off(f+":mouseenter",t.getWrapBehavior(o,"_onMouseenter")),l.off(f+":mouseleave",t.getWrapBehavior(o,"_onMouseleave"))},_setActiveShape:function(o){var l=this,f=l.get("activedOptions")||{},v=o.get("origin"),b=v.shape||l.getDefaultValue("shape");t.isArray(b)&&(b=b[0]);var g=l.get("shapeFactory"),m=t.mix({},o.attr(),{origin:v}),_=g.getActiveCfg(b,m);f.style&&t.mix(_,f.style);var M=n(_,o);o.setSilent(c,M),f.animate?o.animate(_,300):o.attr(_),s.toFront(o)},setShapesActived:function(o){var l=this;t.isArray(o)||(o=[o]);var f=l.get("activeShapes");if(!!h(f,o)){var v=l.get("view"),b=v.get("canvas"),g=l.get("activedOptions");g&&g.highlight?(t.each(o,function(m){m.get("animating")&&m.stopAnimate()}),l.highlightShapes(o)):(f&&l.clearActivedShapes(),t.each(o,function(m){m.get("animating")&&m.stopAnimate(),m.get("visible")&&l._setActiveShape(m)})),l.set("activeShapes",o),b.draw()}},clearActivedShapes:function(){var o=this,l=o.get("shapeContainer"),f=o.get("activedOptions"),v=f&&f.animate;if(l&&!l.get("destroyed")){var b=o.get("activeShapes");t.each(b,function(_){var M=_.get(c);v?(_.stopAnimate(),_.animate(M,300)):_.attr(M),s.resetZIndex(_),_.setSilent(c,null)});var g=o.get("preHighlightShapes");if(g){var m=l.get("children");t.each(m,function(_){var M=_.get(c);M&&(v?(_.stopAnimate(),_.animate(M,300)):_.attr(M),s.resetZIndex(_),_.setSilent(c,null))})}o.set("activeShapes",null),o.set("preHighlightShapes",null)}},getGroupShapesByPoint:function(o){var l=this,f=l.get("shapeContainer"),v=[];if(f){var b=l.getXScale().field,g=l.getShapes(),m=l._getOriginByPoint(o);t.each(g,function(_){var M=_.get("origin");if(_.get("visible")&&M){var x=M[u][b];x===m[b]&&v.push(_)}})}return v},getSingleShapeByPoint:function(o){var l=this,f=l.get("shapeContainer"),v=f.get("canvas"),b=v.get("pixelRatio"),g;if(f&&(g=f.getShape(o.x*b,o.y*b)),g&&g.get("origin"))return g},highlightShapes:function(o,l){var f=this;t.isArray(o)||(o=[o]);var v=f.get("activeShapes");if(!!h(v,o)){v&&f.clearActivedShapes();var b=f.getShapes(),g=f.get("activedOptions"),m=g&&g.animate,_=g&&g.style;t.each(b,function(M){var x={};M.stopAnimate(),t.indexOf(o,M)!==-1?(t.mix(x,_,l),s.toFront(M)):(t.mix(x,{fillOpacity:.3,opacity:.3}),s.resetZIndex(M));var y=n(x,M);M.setSilent(c,y),m?M.animate(x,300):M.attr(x)}),f.set("preHighlightShapes",o),f.set("activeShapes",o)}}};E.exports=i},function(E,T,e){var t=e(0),u="_origin",s=e(129);function c(n,i){if(t.isNil(n)||t.isNil(i))return!1;var a=n.get("origin"),o=i.get("origin");return t.isEqual(a,o)}function r(n,i){var a={};return t.each(n,function(o,l){l==="transform"&&(l="matrix");var f=i.attr(l);t.isArray(f)&&(f=t.cloneDeep(f)),a[l]=f}),a}var h={_isAllowSelect:function(){var i=this.get("allowSelect");if(t.isNil(i)){var a=this.get("type"),o=this.get("coord"),l=o&&o.type;if(a==="interval"&&l==="theta")return!0}else return i;return!1},_onClick:function(i){var a=this;if(a._isAllowSelect()){var o=i.shape,l=a.get("shapeContainer");o&&l.contain(o)&&a.setShapeSelected(o)}},_bindSelectedAction:function(){var i=this,a=i.get("view"),o=i.get("type");a.on(o+":click",t.wrapBehavior(i,"_onClick"))},_offSelectedAction:function(){var i=this,a=i.get("view"),o=i.get("type");a.off(o+":click",t.getWrapBehavior(i,"_onClick"))},_setShapeStatus:function(i,a){var o=this,l=o.get("view"),f=o.get("selectedOptions")||{},v=f.animate!==!1,b=l.get("canvas");i.set("selected",a);var g=i.get("origin");if(a){var m=g.shape||o.getDefaultValue("shape");t.isArray(m)&&(m=m[0]);var _=o.get("shapeFactory"),M=t.mix({geom:o,point:g},f),x=_.getSelectedCfg(m,M);t.mix(x,M.style),i.get("_originAttrs")||(i.get("animating")&&i.stopAnimate(),i.set("_originAttrs",r(x,i))),f.toFront&&s.toFront(i),v?i.animate(x,300):(i.attr(x),b.draw())}else{var y=i.get("_originAttrs");f.toFront&&s.resetZIndex(i),i.set("_originAttrs",null),v?i.animate(y,300):(i.attr(y),b.draw())}},setShapeSelected:function(i){var a=this,o=a._getSelectedShapes(),l=a.get("selectedOptions")||{},f=l.cancelable!==!1;if(l.mode==="multiple")t.indexOf(o,i)===-1?(o.push(i),a._setShapeStatus(i,!0)):f&&(t.Array.remove(o,i),a._setShapeStatus(i,!1));else{var v=o[0];f&&(i=c(v,i)?null:i),c(v,i)||(v&&a._setShapeStatus(v,!1),i&&a._setShapeStatus(i,!0))}},clearSelected:function(){var i=this,a=i.get("shapeContainer");if(a&&!a.get("destroyed")){var o=i._getSelectedShapes();t.each(o,function(l){i._setShapeStatus(l,!1),l.set("_originAttrs",null)})}},setSelected:function(i){var a=this,o=a.getShapes();return t.each(o,function(l){var f=l.get("origin");f&&f[u]===i&&a.setShapeSelected(l)}),this},_getSelectedShapes:function(){var i=this,a=i.getShapes(),o=[];return t.each(a,function(l){l.get("selected")&&o.push(l)}),i.set("selectedShapes",o),o}};E.exports=h},function(E,T,e){var t=e(0),u=e(5),s=u.defaultColor,c="_origin";function r(n){return n.alias||n.field}var h={_getIntervalSize:function(i){var a=null,o=this.get("type"),l=this.get("coord");if(l.isRect&&(o==="interval"||o==="schema")){a=this.getSize(i[c]);var f=l.isTransposed?"y":"x";if(t.isArray(i[f])){var v=Math.abs(i[f][1]-i[f][0]);a=a<v?null:a}}return a},_snapEqual:function(i,a,o){var l;return i=o.translate(i),a=o.translate(a),o.isCategory?l=i===a:l=t.snapEqual(i,a),l},_getScaleValueByPoint:function(i){var a=0,o=this.get("coord"),l=this.getXScale(),f=o.invert(i),v=f.x;return this.isInCircle()&&v>(1+l.rangeMax())/2&&(v=l.rangeMin()),a=l.invert(v),l.isCategory&&(a=l.translate(a)),a},_getOriginByPoint:function(i){var a=this.getXScale(),o=this.getYScale(),l=a.field,f=o.field,v=this.get("coord"),b=v.invert(i),g=a.invert(b.x),m=o.invert(b.y),_={};return _[l]=g,_[f]=m,_},_getScale:function(i){var a=this,o=a.get("scales"),l=null;return t.each(o,function(f){if(f.field===i)return l=f,!1}),l},_getTipValueScale:function(){var i=this.getAttrsForLegend(),a;t.each(i,function(f){var v=f.getScale(f.type);if(v.isLinear)return a=v,!1});var o=this.getXScale(),l=this.getYScale();return!a&&l&&l.field==="..y"?o:a||l||o},_getTipTitleScale:function(i){var a=this;if(i)return a._getScale(i);var o=a.getAttr("position"),l=o.getFields(),f;return t.each(l,function(v){if(!v.includes(".."))return f=v,!1}),a._getScale(f)},_filterValue:function(i,a){var o=this.get("coord"),l=this.getYScale(),f=l.field,v=o.invert(a),b=v.y;b=l.invert(b);var g=i[i.length-1];return t.each(i,function(m){var _=m[c];if(_[f][0]<=b&&_[f][1]>=b)return g=m,!1}),g},getXDistance:function(){var i=this,a=i.get("xDistance");if(!a){var o=i.getXScale();if(o.isCategory)a=1;else{var l=o.values,f=o.translate(l[0]),v=f;t.each(l,function(g){g=o.translate(g),g<f&&(f=g),g>v&&(v=g)});var b=l.length;a=(v-f)/(b-1)}i.set("xDistance",a)}return a},findPoint:function(i,a){var o=this,l=o.get("type"),f=o.getXScale(),v=o.getYScale(),b=f.field,g=v.field,m=null;if(t.indexOf(["heatmap","point"],l)>-1){var _=o.get("coord"),M=_.invert(i),x=f.invert(M.x),y=v.invert(M.y),S=Infinity;return t.each(a,function(dt){var ut=Math.pow(dt[c][b]-x,2)+Math.pow(dt[c][g]-y,2);ut<S&&(S=ut,m=dt)}),m}var P=a[0],A=a[a.length-1];if(!P)return m;var O=o._getScaleValueByPoint(i),L=P[c][b],H=P[c][g],F=A[c][b],Z=v.isLinear&&t.isArray(H);if(t.isArray(L))t.each(a,function(dt){var ut=dt[c];if(f.translate(ut[b][0])<=O&&f.translate(ut[b][1])>=O)if(Z)t.isArray(m)||(m=[]),m.push(dt);else return m=dt,!1}),t.isArray(m)&&(m=this._filterValue(m,i));else{var G;if(!f.isLinear&&f.type!=="timeCat")t.each(a,function(dt,ut){var Lt=dt[c];if(o._snapEqual(Lt[b],O,f))if(Z)t.isArray(m)||(m=[]),m.push(dt);else return m=dt,!1;else f.translate(Lt[b])<=O&&(A=dt,G=a[ut+1])}),t.isArray(m)&&(m=this._filterValue(m,i));else{if((O>f.translate(F)||O<f.translate(L))&&(O>f.max||O<f.min))return null;for(var U=0,Y=a.length-1,J;U<=Y;){J=Math.floor((U+Y)/2);var rt=a[J][c][b];if(o._snapEqual(rt,O,f))return a[J];f.translate(rt)<=f.translate(O)?(U=J+1,A=a[J],G=a[J+1]):(Y===0&&(A=a[0]),Y=J-1)}}A&&G&&Math.abs(f.translate(A[c][b])-O)>Math.abs(f.translate(G[c][b])-O)&&(A=G)}var ft=o.getXDistance();return!m&&Math.abs(f.translate(A[c][b])-O)<=ft/2&&(m=A),m},getTipTitle:function(i,a){var o="",l=this._getTipTitleScale(a);if(l){var f=i[l.field];o=l.getText(f)}else if(this.get("type")==="heatmap"){var v=this.getXScale(),b=this.getYScale(),g=v.getText(i[v.field]),m=b.getText(i[b.field]);o="( "+g+", "+m+" )"}return o},getTipValue:function(i,a){var o,l=a.field,f=i.key;if(o=i[l],t.isArray(o)){var v=[];t.each(o,function(b){v.push(a.getText(b))}),o=v.join("-")}else o=a.getText(o,f);return o},getTipName:function(i){var a,o,l=this._getGroupScales();if(l.length&&t.each(l,function(b){return o=b,!1}),o){var f=o.field;a=o.getText(i[f])}else{var v=this._getTipValueScale();a=r(v)}return a},getTipItems:function(i,a){var o=this,l=i[c],f=o.getTipTitle(l,a),v=o.get("tooltipCfg"),b=[],g,m;function _(A,O,L){if(!t.isNil(O)&&O!==""){var H={title:f,point:i,name:A||f,value:O,color:i.color||s,marker:!0};H.size=o._getIntervalSize(i),b.push(t.mix({},H,L))}}if(v){var M=v.fields,x=v.cfg,y=[];if(t.each(M,function(A){y.push(l[A])}),x){t.isFunction(x)&&(x=x.apply(null,y));var S=t.mix({},{point:i,title:f,color:i.color||s,marker:!0},x);S.size=o._getIntervalSize(i),b.push(S)}else t.each(M,function(A){if(!t.isNil(l[A])){var O=o._getScale(A);g=r(O),m=O.getText(l[A]),_(g,m)}})}else{var P=o._getTipValueScale();t.isNil(l[P.field])||(m=o.getTipValue(l,P),g=o.getTipName(l),_(g,m))}return b},isShareTooltip:function(){var i=this.get("shareTooltip"),a=this.get("type"),o=this.get("view"),l;if(o.get("parent")?l=o.get("parent").get("options"):l=o.get("options"),a==="interval"){var f=this.get("coord"),v=f.type;(v==="theta"||v==="polar"&&f.isTransposed)&&(i=!1)}else(!this.getYScale()||t.inArray(["contour","point","polygon","edge"],a))&&(i=!1);return l.tooltip&&t.isBoolean(l.tooltip.shared)&&(i=l.tooltip.shared),i}};E.exports=h},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var u=e(8),s=e(0);e(308);var c=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a.getDefaultCfg=function(){var l=n.prototype.getDefaultCfg.call(this);return l.type="point",l.shapeType="point",l.generatePoints=!0,l},a.drawPoint=function(l,f,v,b){var g=this,m=l.shape,_=g.getDrawCfg(l);g._applyViewThemeShapeStyle(_,m,v);var M;if(s.isArray(l.y)){var x=g.hasStack();s.each(l.y,function(y,S){_.y=y,_.yIndex=S,(!x||S!==0)&&(M=v.drawShape(m,_,f),g.appendShapeInfo(M,b+S))})}else s.isNil(l.y)||(M=v.drawShape(m,_,f),g.appendShapeInfo(M,b))},i}(u),r=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a.getDefaultCfg=function(){var l=n.prototype.getDefaultCfg.call(this);return l.hasDefaultAdjust=!0,l.adjusts=[{type:"jitter"}],l},i}(c),h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a.getDefaultCfg=function(){var l=n.prototype.getDefaultCfg.call(this);return l.hasDefaultAdjust=!0,l.adjusts=[{type:"stack"}],l},i}(c);c.Jitter=r,c.Stack=h,u.Point=c,u.PointJitter=r,u.PointStack=h,E.exports=c},function(E,T,e){function t(r,h){r.prototype=Object.create(h.prototype),r.prototype.constructor=r,r.__proto__=h}var u=e(8),s=e(0);e(309);var c=function(r){t(h,r);function h(){return r.apply(this,arguments)||this}var n=h.prototype;return n.getDefaultCfg=function(){var a=r.prototype.getDefaultCfg.call(this);return a.type="polygon",a.shapeType="polygon",a.generatePoints=!0,a},n.createShapePointsCfg=function(a){var o=r.prototype.createShapePointsCfg.call(this,a),l=this,f=o.x,v=o.y,b;if(!(s.isArray(f)&&s.isArray(v))){var g=l.getXScale(),m=l.getYScale(),_=g.values?g.values.length:g.ticks.length,M=m.values?m.values.length:m.ticks.length,x=.5*1/_,y=.5*1/M;g.isCategory&&m.isCategory?(f=[f-x,f-x,f+x,f+x],v=[v-y,v+y,v+y,v-y]):s.isArray(f)?(b=f,f=[b[0],b[0],b[1],b[1]],v=[v-y/2,v+y/2,v+y/2,v-y/2]):s.isArray(v)&&(b=v,v=[b[0],b[1],b[1],b[0]],f=[f-x/2,f-x/2,f+x/2,f+x/2]),o.x=f,o.y=v}return o},h}(u);u.Polygon=c,E.exports=c},function(E,T,e){function t(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function u(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var s=e(8),c=e(0),r=e(70);e(310);var h=function(i){u(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.type="schema",f.shapeType="schema",f.generatePoints=!0,f};function o(l){var f;return f=i.call(this,l)||this,c.assign(t(f),r),f}return a.createShapePointsCfg=function(f){var v=i.prototype.createShapePointsCfg.call(this,f);return v.size=this.getNormalizedSize(f),v},a.clearInner=function(){i.prototype.clearInner.call(this),this.set("defaultSize",null)},o}(s),n=function(i){u(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.hasDefaultAdjust=!0,f.adjusts=[{type:"dodge"}],f},a}(h);h.Dodge=n,s.Schema=h,s.SchemaDodge=n,E.exports=h},function(E,T,e){var t=e(0),u=e(9),s=e(25),c=e(23),r=e(5);function h(v){var b=r.shape.hollowArea,g=t.mix({},b,v.style);return c.addStrokeAttrs(g,v),t.isNumber(v.size)&&(g.lineWidth=v.size),g}function n(v){var b=r.shape.area,g=t.mix({},b,v.style);return c.addFillAttrs(g,v),v.color&&(g.stroke=g.stroke||v.color),t.isNumber(v.size)&&(g.lineWidth=v.size),g}function i(v,b,g){var m=[],_=[],M=[],x=[],y=v.isInCircle;return t.each(v.points,function(S){M.push(S[1]),x.push(S[0])}),x=x.reverse(),_.push(M,x),t.each(_,function(S,P){var A=[];S=g.parsePoints(S);var O=S[0];y&&S.push({x:O.x,y:O.y}),b?A=s.getSplinePath(S,!1,v.constraint):A=s.getLinePath(S,!1),P>0&&(A[0][0]="L"),m=m.concat(A)}),m.push(["Z"]),m}function a(v){return{symbol:function(g,m,_){return[["M",g-_,m-4],["L",g+_,m-4],["L",g+_,m+4],["L",g-_,m+4],["Z"]]},radius:5,fill:v.color,fillOpacity:.6}}function o(v,b){if(v==="line"||v==="smoothLine"){var g=b.lineWidth||0;return{lineWidth:g+1}}var m=b.fillOpacity||b.opacity||1;return{fillOpacity:m-.15,strokeOpacity:m-.15}}function l(v,b,g){var m=v._coord,_=m.convertPoint(b.points[0][1]);return g.addShape("circle",{attrs:t.mix({x:_.x,y:_.y,r:2,fill:b.color},b.style)})}var f=u.registerFactory("area",{defaultShapeType:"area",getDefaultPoints:function(b){var g=[],m=b.x,_=b.y,M=b.y0;return _=t.isArray(_)?_:[M,_],t.each(_,function(x){g.push({x:m,y:x})}),g},getActiveCfg:function(b,g){return o(b,g)},drawShape:function(b,g,m){var _=this.getShape(b),M;return g.points.length===1&&r.showSinglePoint?M=l(this,g,m):M=_.draw(g,m),M&&(M.set("origin",g.origin),M._id=g.splitedIndex?g._id+g.splitedIndex:g._id,M.name=this.name),M},getSelectedCfg:function(b,g){return g&&g.style?g.style:this.getActiveCfg(b,g)}});u.registerShape("area","area",{draw:function(b,g){var m=n(b),_=i(b,!1,this);return g.addShape("path",{attrs:t.mix(m,{path:_})})},getMarkerCfg:function(b){return a(b)}}),u.registerShape("area","smooth",{draw:function(b,g){var m=n(b),_=this._coord;b.constraint=[[_.start.x,_.end.y],[_.end.x,_.start.y]];var M=i(b,!0,this);return g.addShape("path",{attrs:t.mix(m,{path:M})})},getMarkerCfg:function(b){return a(b)}}),u.registerShape("area","line",{draw:function(b,g){var m=h(b),_=i(b,!1,this);return g.addShape("path",{attrs:t.mix(m,{path:_})})},getMarkerCfg:function(b){return a(b)}}),u.registerShape("area","smoothLine",{draw:function(b,g){var m=h(b),_=i(b,!0,this);return g.addShape("path",{attrs:t.mix(m,{path:_})})},getMarkerCfg:function(b){return a(b)}}),f.spline=f.smooth,E.exports=f},function(E,T,e){var t=e(0),u=e(9),s=e(23),c=e(5),r=e(25),h=1/3;function n(g){var m=c.shape.edge,_=t.mix({},m,g.style);return s.addStrokeAttrs(_,g),g.size&&(_.lineWidth=g.size),_}var i=u.registerFactory("edge",{defaultShapeType:"line",getDefaultPoints:function(m){return s.splitPoints(m)},getActiveCfg:function(m,_){var M=_.lineWidth||0;return{lineWidth:M+1}}});function a(g,m){var _=[];_.push({x:g.x,y:g.y*(1-1/2)+m.y*1/2}),_.push({y:g.y*(1-1/2)+m.y*1/2,x:m.x}),_.push(m);var M=["C"];return t.each(_,function(x){M.push(x.x,x.y)}),M}function o(g,m){var _=[];_.push({x:m.x,y:m.y}),_.push(g);var M=["Q"];return t.each(_,function(x){M.push(x.x,x.y)}),M}function l(g,m){var _=a(g,m),M=[["M",g.x,g.y]];return M.push(_),M}function f(g,m,_){var M=o(m,_),x=[["M",g.x,g.y]];return x.push(M),x}function v(g,m){var _=o(g[1],m),M=o(g[3],m),x=[["M",g[0].x,g[0].y]];return x.push(M),x.push(["L",g[3].x,g[3].y]),x.push(["L",g[2].x,g[2].y]),x.push(_),x.push(["L",g[1].x,g[1].y]),x.push(["L",g[0].x,g[0].y]),x.push(["Z"]),x}function b(g,m){var _=[];_.push({y:g.y*(1-h)+m.y*h,x:g.x}),_.push({y:g.y*(1-h)+m.y*h,x:m.x}),_.push(m);var M=[["M",g.x,g.y]];return t.each(_,function(x){M.push(["L",x.x,x.y])}),M}u.registerShape("edge","line",{draw:function(m,_){var M=this.parsePoints(m.points),x=n(m),y=r.getLinePath(M),S=_.addShape("path",{attrs:t.mix(x,{path:y})});return S},getMarkerCfg:function(m){return t.mix({symbol:"circle",radius:4.5},n(m))}}),u.registerShape("edge","vhv",{draw:function(m,_){var M=m.points,x=n(m),y=b(M[0],M[1]);y=this.parsePath(y);var S=_.addShape("path",{attrs:t.mix(x,{path:y})});return S},getMarkerCfg:function(m){return t.mix({symbol:"circle",radius:4.5},n(m))}}),u.registerShape("edge","smooth",{draw:function(m,_){var M=m.points,x=n(m),y=l(M[0],M[1]);y=this.parsePath(y);var S=_.addShape("path",{attrs:t.mix(x,{path:y})});return S},getMarkerCfg:function(m){return t.mix({symbol:"circle",radius:4.5},n(m))}}),u.registerShape("edge","arc",{draw:function(m,_){var M=m.points,x=M.length>2?"weight":"normal",y=n(m),S,P;if(m.isInCircle){var A={x:0,y:1};x==="normal"?P=f(M[0],M[1],A):(y.fill=y.stroke,P=v(M,A)),P=this.parsePath(P),S=_.addShape("path",{attrs:t.mix(y,{path:P})})}else if(x==="normal")M=this.parsePoints(M),S=_.addShape("arc",{attrs:t.mix(y,{x:(M[1].x+M[0].x)/2,y:M[0].y,r:Math.abs(M[1].x-M[0].x)/2,startAngle:Math.PI,endAngle:Math.PI*2})});else{P=[["M",M[0].x,M[0].y],["L",M[1].x,M[1].y]];var O=a(M[1],M[3]),L=a(M[2],M[0]);P.push(O),P.push(["L",M[3].x,M[3].y]),P.push(["L",M[2].x,M[2].y]),P.push(L),P.push(["Z"]),P=this.parsePath(P),y.fill=y.stroke,S=_.addShape("path",{attrs:t.mix(y,{path:P})})}return S},getMarkerCfg:function(m){return t.mix({symbol:"circle",radius:4.5},n(m))}}),E.exports=i},function(E,T,e){var t=e(0),u=e(9),s=e(25),c=e(23),r=e(5),h=e(16),n=t.PathUtil;function i(A,O){var L=A.x,H=A.y,F=A.y0,Z=A.size,G=F,U=H;t.isArray(H)&&(U=H[1],G=H[0]);var Y,J;t.isArray(L)?(Y=L[0],J=L[1]):(Y=L-Z/2,J=L+Z/2);var rt=[];return rt.push({x:Y,y:G},{x:Y,y:U}),O?rt.push({x:J,y:(U+G)/2}):rt.push({x:J,y:U},{x:J,y:G}),rt}function a(A){for(var O=[],L=0;L<A.length;L++){var H=A[L];if(H){var F=L===0?"M":"L";O.push([F,H.x,H.y])}}var Z=A[0];return O.push(["L",Z.x,Z.y]),O.push(["z"]),O}function o(A){var O=A.x,L=A.y,H=A.y0,F=[];return t.isArray(L)?t.each(L,function(Z,G){F.push({x:t.isArray(O)?O[G]:O,y:Z})}):F.push({x:O,y:L},{x:O,y:H}),F}function l(A){var O=A.x,L=t.isArray(A.y)?A.y[1]:A.y,H=t.isArray(A.y)?A.y[0]:A.y0,F=A.size,Z=[];return Z.push({x:O-F/2,y:L},{x:O+F/2,y:L},{x:O,y:L},{x:O,y:H},{x:O-F/2,y:H},{x:O+F/2,y:H}),Z}function f(A){var O=[];return O.push(["M",A[0].x,A[0].y],["L",A[1].x,A[1].y],["M",A[2].x,A[2].y],["L",A[3].x,A[3].y],["M",A[4].x,A[4].y],["L",A[5].x,A[5].y]),O}function v(A){var O=r.shape.interval,L=t.mix({},O,A.style);return c.addFillAttrs(L,A),A.color&&(L.stroke=L.stroke||A.color),L}function b(A){var O=r.shape.hollowInterval,L=t.mix({},O,A.style);return c.addStrokeAttrs(L,A),L}function g(A,O){var L=[],H=A.points,F=A.nextPoints;return t.isNil(F)?O?L.push(["M",H[0].x,H[0].y],["L",H[1].x,H[1].y],["L",H[2].x,H[2].y],["L",H[3].x,H[3].y],["Z"]):L.push(["M",H[0].x,H[0].y],["L",H[1].x,H[1].y],["L",H[2].x,H[2].y],["L",H[2].x,H[2].y],["Z"]):L.push(["M",H[0].x,H[0].y],["L",H[1].x,H[1].y],["L",F[1].x,F[1].y],["L",F[0].x,F[0].y],["Z"]),L}function m(A,O){var L=O.getRadius(),H=O.innerRadius,F,Z,G=L*H,U,Y;return!t.isArray(A.x)&&t.isArray(A.y)&&(A.x=[A.x,A.x]),t.isArray(A.x)?(U={x:A.x[0],y:A.y[0]},Y={x:A.x[1],y:A.y[1]},F=s.getPointAngle(O,U),Z=s.getPointAngle(O,Y),Z<=F&&(Z=Z+Math.PI*2)):(Y=A,F=O.startAngle,Z=s.getPointAngle(O,Y)),{r:L,ir:G,startAngle:F,endAngle:Z}}function _(A,O){var L=O.geom,H=L.get("coord"),F=O.point,Z=7.5,G;if(H&&H.type==="theta"){var U=m(F,H),Y=(U.endAngle-U.startAngle)/2+U.startAngle,J=Z*Math.cos(Y),rt=Z*Math.sin(Y);G={transform:[["t",J,rt]]}}return t.mix({},G)}var M=u.registerFactory("interval",{defaultShapeType:"rect",getActiveCfg:function(O,L){if(!O||t.inArray(["rect","funnel","pyramid"],O)){var H=L.fillOpacity||L.opacity||1;return{fillOpacity:H-.15}}var F=L.lineWidth||0;return{lineWidth:F+1}},getDefaultPoints:function(O){return i(O)},getSelectedCfg:function(O,L){return _(O,L)}});u.registerShape("interval","rect",{draw:function(O,L){var H=v(O),F=a(O.points);return F=this.parsePath(F),L.addShape("path",{attrs:t.mix(H,{path:F})})},getMarkerCfg:function(O){var L=v(O),H=O.isInCircle;return t.mix({symbol:H?"circle":"square",radius:H?4.5:4},L)}}),u.registerShape("interval","hollowRect",{draw:function(O,L){var H=b(O),F=a(O.points);return F=this.parsePath(F),L.addShape("path",{attrs:t.mix(H,{path:F})})},getMarkerCfg:function(O){var L=b(O),H=O.isInCircle;return t.mix({symbol:H?"circle":"square",radius:H?4.5:4},L)}}),u.registerShape("interval","line",{getPoints:function(O){return o(O)},draw:function(O,L){var H=b(O);H.lineWidth=O.size||1;var F=a(O.points);return F=this.parsePath(F),L.addShape("path",{attrs:t.mix(H,{path:F})})},getMarkerCfg:function(O){var L=b(O);return t.mix({symbol:"line",radius:5},L)}}),u.registerShape("interval","tick",{getPoints:function(O){return l(O)},draw:function(O,L){var H=b(O);H.lineWidth||(H.lineWidth=2);var F=f(O.points);return F=this.parsePath(F),L.addShape("path",{attrs:t.mix(H,{path:F})})},getMarkerCfg:function(O){var L=b(O);return t.mix({symbol:"tick",radius:5},L)}}),u.registerShape("interval","funnel",{getPoints:function(O){return O.size=O.size*2,i(O)},draw:function(O,L){var H=v(O),F=g(O,!0);return F=this.parsePath(F),L.addShape("path",{attrs:t.mix(H,{path:F})})},getMarkerCfg:function(O){var L=v(O);return t.mix({symbol:"square",radius:4},L)}}),u.registerShape("interval","pyramid",{getPoints:function(O){return O.size=O.size*2,i(O,!0)},draw:function(O,L){var H=v(O),F=g(O,!1);return F=this.parsePath(F),L.addShape("path",{attrs:t.mix(H,{path:F})})},getMarkerCfg:function(O){var L=v(O);return t.mix({symbol:"square",radius:4},L)}});function x(A,O,L,H){return O===0?[[A+1/2*L/Math.PI/2,H/2],[A+1/2*L/Math.PI,H],[A+L/4,H]]:O===1?[[A+1/2*L/Math.PI/2*(Math.PI-2),H],[A+1/2*L/Math.PI/2*(Math.PI-1),H/2],[A+L/4,0]]:O===2?[[A+1/2*L/Math.PI/2,-H/2],[A+1/2*L/Math.PI,-H],[A+L/4,-H]]:[[A+1/2*L/Math.PI/2*(Math.PI-2),-H],[A+1/2*L/Math.PI/2*(Math.PI-1),-H/2],[A+L/4,0]]}function y(A,O,L,H,F,Z,G){for(var U=Math.ceil(2*A/L*4)*2,Y=[];H<-Math.PI*2;)H+=Math.PI*2;for(;H>0;)H-=Math.PI*2;H=H/Math.PI/2*L;var J=Z-A+H-A*2;Y.push(["M",J,O]);for(var rt=0,ft=0;ft<U;++ft){var dt=ft%4,ut=x(ft*L/4,dt,L,F);Y.push(["C",ut[0][0]+J,-ut[0][1]+O,ut[1][0]+J,-ut[1][1]+O,ut[2][0]+J,-ut[2][1]+O]),ft===U-1&&(rt=ut[2][0])}return Y.push(["L",rt+J,G+A]),Y.push(["L",J,G+A]),Y.push(["L",J,O]),Y}function S(A,O,L,H,F,Z,G,U){for(var Y=G.getBBox(),J=Y.maxX-Y.minX,rt=Y.maxY-Y.minY,ft=5e3,dt=300,ut=0;ut<H;ut++){var Lt=Z.addShape("path",{attrs:{path:y(U,Y.minY+rt*L,J/4,0,J/64,A,O),fill:F[ut],clip:G}});r.renderer==="canvas"&&Lt.animate({transform:[["t",J/2,0]],repeat:!0},ft-ut*dt)}}u.registerShape("interval","liquid-fill-gauge",{draw:function(O,L){var H=this,F=.5,Z=0,G=Infinity;t.each(O.points,function(Lt){Lt.x<G&&(G=Lt.x),Z+=Lt.x});var U=Z/O.points.length,Y=H.parsePoint({x:U,y:F}),J=H.parsePoint({x:G,y:.5}),rt=Y.x-J.x,ft=Math.min(rt,J.y),dt=v(O),ut=new h.Circle({attrs:{x:Y.x,y:Y.y,r:ft}});return S(Y.x,Y.y,O.y/(2*Y.y),1,[dt.fill],L,ut,ft*4),L.addShape("circle",{attrs:t.mix(b(O),{x:Y.x,y:Y.y,r:ft+ft/8})})}});var P={};u.registerShape("interval","liquid-fill-path",{draw:function(O,L){var H=this,F=t.mix({},v(O)),Z=O.shape[1],G=.5,U=0,Y=Infinity;t.each(O.points,function(at){at.x<Y&&(Y=at.x),U+=at.x});var J=U/O.points.length,rt=H.parsePoint({x:J,y:G}),ft=H.parsePoint({x:Y,y:.5}),dt=rt.x-ft.x,ut=Math.min(dt,ft.y),Lt;if(P[Z])Lt=P[Z];else{var Ft=n.parsePathString(Z);P[Z]=Lt={segments:Ft}}var Ot=[];F.rotate&&(Ot.push(["r",F.rotate/180*Math.PI]),delete F.rotate);var St=L.addShape("path",{attrs:t.mix(F,{fillOpacity:0,path:Lt.segments})}),xt=t.cloneDeep(St.getBBox()),At=xt.maxX-xt.minX,nt=xt.maxY-xt.minY,Mt=Math.max(At,nt),z=ut*2/Mt;St.transform(Ot.concat([["s",z,z]]));var Q=z*At/2,ht=z*nt/2;St.transform([["t",rt.x-Q,rt.y-ht]]),S(rt.x,rt.y,O.y/(2*rt.y),1,[F.fill],L,St,ft.y*4);var et=L.addShape("path",{attrs:t.mix(b(O),{path:Lt.segments})});return et.transform(Ot.concat([["s",z,z],["t",rt.x-Q,rt.y-ht]])),et}}),u.registerShape("interval","top-line",{draw:function(O,L){var H=v(O),F=O.style||{},Z=[["M",O.points[1].x,O.points[1].y],["L",O.points[2].x,O.points[2].y]],G={stroke:F.stroke||"white",lineWidth:F.lineWidth||1,path:this.parsePath(Z)},U=a(O.points);U=this.parsePath(U),delete H.stroke;var Y=L.addShape("path",{attrs:t.mix(H,{zIndex:0,path:U})});return L.addShape("path",{zIndex:1,attrs:G}),Y},getMarkerCfg:function(O){var L=v(O),H=O.isInCircle;return t.mix({symbol:H?"circle":"square",radius:H?4.5:4},L)}}),E.exports=M},function(E,T,e){var t=e(0),u=e(25),s=e(23),c=e(9),r=e(5),h=[1,1],n=[5.5,1];function i(P){var A=r.shape.line,O=t.mix({},A,P.style);return s.addStrokeAttrs(O,P),P.size&&(O.lineWidth=P.size),O}function a(P){var A=r.shape.line,O=t.mix({lineWidth:2,radius:6},A,P.style);return s.addStrokeAttrs(O,P),O}function o(P,A,O,L){for(var H=[],F=L.isStack,Z=[],G=0;G<P.length;G++){var U=P[G],Y=s.splitPoints(U);Z.push(Y[0]),H.push(Y[1])}var J=l(H,A,O,L),rt=l(Z,A,O,L);return F?J:J.concat(rt)}function l(P,A,O,L){var H;if(!A)H=u.getLinePath(P,!1),O&&H.push(["Z"]);else{var F=L.constraint;O&&P.length&&P.push({x:P[0].x,y:P[0].y}),H=u.getSplinePath(P,!1,F)}return H}function f(P,A){var O,L=P.points,H=P.isInCircle,F=L[0];return t.isArray(F.y)?O=o(L,A,H,P):O=l(L,A,H,P),O}function v(P,A){var O=[];return t.each(P,function(L,H){var F=P[H+1];O.push(L),F&&(O=O.concat(A(L,F)))}),O}function b(P){var A=[];return t.each(P,function(O,L){var H=L===0?["M",O.x,O.y]:["L",O.x,O.y];A.push(H)}),A}function g(P,A){var O=v(P.points,A);return b(O)}function m(P,A,O){return[["M",P-O,A],["L",P+O,A]]}function _(P,A,O){return[["M",P-O,A],["A",O/2,O/2,0,1,1,P,A],["A",O/2,O/2,0,1,0,P+O,A]]}function M(P,A){return t.mix({symbol:A?_:m},a(P))}function x(P,A){return t.mix({symbol:A},a(P))}function y(P,A,O){var L=A.points[0];return O.addShape("circle",{attrs:t.mix({x:L.x,y:L.y,r:2,fill:A.color},A.style)})}var S=c.registerFactory("line",{defaultShapeType:"line",getActiveCfg:function(A,O){var L=O.lineWidth||0;return{lineWidth:L+1}},getDefaultPoints:function(A){return s.splitPoints(A)},drawShape:function(A,O,L){var H=this.getShape(A),F;return O.points.length===1&&r.showSinglePoint?F=y(this,O,L):F=H.draw(O,L),F&&(F.set("origin",O.origin),F._id=O.splitedIndex?O._id+O.splitedIndex:O._id,F.name=this.name),F}});c.registerShape("line","line",{draw:function(A,O){var L=i(A),H=f(A,!1);return O.addShape("path",{attrs:t.mix(L,{path:H})})},getMarkerCfg:function(A){return M(A)}}),c.registerShape("line","dot",{draw:function(A,O){var L=i(A),H=f(A,!1);return O.addShape("path",{attrs:t.mix(L,{path:H,lineDash:h})})},getMarkerCfg:function(A){var O=M(A,!1);return O.lineDash=h,O}}),c.registerShape("line","dash",{draw:function(A,O){var L=i(A),H=f(A,!1);return O.addShape("path",{attrs:t.mix({path:H,lineDash:n},L)})},getMarkerCfg:function(A){var O=M(A,!1);return O.lineDash=O.lineDash||n,O}}),c.registerShape("line","smooth",{draw:function(A,O){var L=i(A),H=this._coord;A.constraint=[[H.start.x,H.end.y],[H.end.x,H.start.y]];var F=f(A,!0);return O.addShape("path",{attrs:t.mix(L,{path:F})})},getMarkerCfg:function(A){return M(A,!0)}}),c.registerShape("line","hv",{draw:function(A,O){var L=i(A),H=g(A,function(F,Z){var G=[];return G.push({x:Z.x,y:F.y}),G});return O.addShape("path",{attrs:t.mix(L,{path:H})})},getMarkerCfg:function(A){return x(A,function(O,L,H){return[["M",O-H-1,L-2.5],["L",O,L-2.5],["L",O,L+2.5],["L",O+H+1,L+2.5]]})}}),c.registerShape("line","vh",{draw:function(A,O){var L=i(A),H=g(A,function(F,Z){var G=[];return G.push({x:F.x,y:Z.y}),G});return O.addShape("path",{attrs:t.mix(L,{path:H})})},getMarkerCfg:function(A){return x(A,function(O,L,H){return[["M",O-H-1,L+2.5],["L",O,L+2.5],["L",O,L-2.5],["L",O+H+1,L-2.5]]})}}),c.registerShape("line","hvh",{draw:function(A,O){var L=i(A),H=g(A,function(F,Z){var G=[],U=(Z.x-F.x)/2+F.x;return G.push({x:U,y:F.y}),G.push({x:U,y:Z.y}),G});return O.addShape("path",{attrs:t.mix(L,{path:H})})},getMarkerCfg:function(A){return x(A,function(O,L,H){return[["M",O-(H+1),L+2.5],["L",O-H/2,L+2.5],["L",O-H/2,L-2.5],["L",O+H/2,L-2.5],["L",O+H/2,L+2.5],["L",O+H+1,L+2.5]]})}}),c.registerShape("line","vhv",{draw:function(A,O){var L=i(A),H=g(A,function(F,Z){var G=[],U=(Z.y-F.y)/2+F.y;return G.push({x:F.x,y:U}),G.push({x:Z.x,y:U}),G});return O.addShape("path",{attrs:t.mix(L,{path:H})})},getMarkerCfg:function(A){return x(A,function(O,L){return[["M",O-5,L+2.5],["L",O-5,L],["L",O,L],["L",O,L-3],["L",O,L+3],["L",O+6.5,L+3]]})}}),S.spline=S.smooth,E.exports=S},function(E,T,e){var t=e(0),u=e(23),s=e(5),c=e(9),r=e(16),h=r.Marker,n=t.PathUtil,i=["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],a=["cross","tick","plus","hyphen","line","pointerLine","pointerArrow"],o=Math.sqrt(3);t.mix(h.Symbols,{hexagon:function(_,M,x){var y=x/2*o;return[["M",_,M-x],["L",_+y,M-x/2],["L",_+y,M+x/2],["L",_,M+x],["L",_-y,M+x/2],["L",_-y,M-x/2],["Z"]]},bowtie:function(_,M,x){var y=x-1.5;return[["M",_-x,M-y],["L",_+x,M+y],["L",_+x,M-y],["L",_-x,M+y],["Z"]]},cross:function(_,M,x){return[["M",_-x,M-x],["L",_+x,M+x],["M",_+x,M-x],["L",_-x,M+x]]},tick:function(_,M,x){return[["M",_-x/2,M-x],["L",_+x/2,M-x],["M",_,M-x],["L",_,M+x],["M",_-x/2,M+x],["L",_+x/2,M+x]]},plus:function(_,M,x){return[["M",_-x,M],["L",_+x,M],["M",_,M-x],["L",_,M+x]]},hyphen:function(_,M,x){return[["M",_-x,M],["L",_+x,M]]},line:function(_,M,x){return[["M",_,M-x],["L",_,M+x]]}});function l(m){var _=s.shape.point,M=t.mix({},_,m.style);return u.addFillAttrs(M,m),t.isNumber(m.size)&&(M.radius=m.size),M}function f(m){var _=s.shape.hollowPoint,M=t.mix({},_,m.style);return u.addStrokeAttrs(M,m),t.isNumber(m.size)&&(M.radius=m.size),M}var v=c.registerFactory("point",{defaultShapeType:"hollowCircle",getActiveCfg:function(_,M){var x=M.radius,y;return _&&(_.indexOf("hollow")===0||t.indexOf(a,_)!==-1)||!_?y=M.stroke||M.strokeStyle:y=M.fill||M.fillStyle,{radius:x+1,shadowBlur:x,shadowColor:y,stroke:y,strokeOpacity:1,lineWidth:1}},getDefaultPoints:function(_){return u.splitPoints(_)}});function b(m){var _=m.points[0].x,M=m.points[0].y,x=m.size[0],y=m.size[1],S=[["M",_-.5*x,M-.5*y],["L",_+.5*x,M-.5*y],["L",_+.5*x,M+.5*y],["L",_-.5*x,M+.5*y],["z"]];return S}c.registerShape("point","rect",{draw:function(_,M){var x=l(_),y=b(_);y=this.parsePath(y);var S=M.addShape("path",{attrs:t.mix(x,{path:y})});return S},getMarkerCfg:function(_){var M=l(_);return M.symbol="rect",M.radius=4.5,M}}),t.each(i,function(m){c.registerShape("point",m,{draw:function(M,x){var y=l(M);return x.addShape("Marker",{attrs:t.mix(y,{symbol:m,x:M.x,y:M.y})})},getMarkerCfg:function(M){var x=l(M);return x.symbol=m,x.radius=4.5,x}}),c.registerShape("point","hollow"+t.upperFirst(m),{draw:function(M,x){var y=f(M);return x.addShape("Marker",{attrs:t.mix(y,{symbol:m,x:M.x,y:M.y})})},getMarkerCfg:function(M){var x=f(M);return x.symbol=m,x.radius=4.5,x}})}),t.each(a,function(m){c.registerShape("point",m,{draw:function(M,x){var y=f(M);return x.addShape("Marker",{attrs:t.mix(y,{symbol:m,x:M.x,y:M.y})})},getMarkerCfg:function(M){var x=f(M);return x.symbol=m,x.radius=4.5,x}})}),c.registerShape("point","image",{draw:function(_,M){return _.points=this.parsePoints(_.points),M.addShape("image",{attrs:{x:_.points[0].x-_.size/2,y:_.points[0].y-_.size,width:_.size,height:_.size,img:_.shape[1]}})}});var g={};c.registerShape("point","path",{draw:function(_,M){var x=t.mix({},f(_),l(_)),y=_.shape[1],S=_.size||10,P;if(g[y])P=g[y];else{var A=n.parsePathString(y),O=t.flatten(A).filter(function(Z){return t.isNumber(Z)});g[y]=P={range:Math.max.apply(null,O)-Math.min.apply(null,O),segments:A}}var L=S/P.range,H=[];x.rotate&&(H.push(["r",x.rotate/180*Math.PI]),delete x.rotate);var F=M.addShape("path",{attrs:t.mix(x,{path:P.segments})});return H.push(["s",L,L],["t",_.x,_.y]),F.transform(H),F}}),E.exports=v},function(E,T,e){var t=e(0),u=e(9),s=e(23),c=e(5);function r(a){var o=c.shape.polygon,l=t.mix({},o,a.style);return s.addFillAttrs(l,a),l}function h(a){var o=c.shape.hollowPolygon,l=t.mix({},o,a.style);return s.addStrokeAttrs(l,a),l}function n(a){for(var o=a[0],l=1,f=[["M",o.x,o.y]];l<a.length;){var v=a[l];(v.x!==a[l-1].x||v.y!==a[l-1].y)&&(f.push(["L",v.x,v.y]),v.x===o.x&&v.y===o.y&&l<a.length-1&&(o=a[l+1],f.push(["Z"]),f.push(["M",o.x,o.y]),l++)),l++}return t.isEqual(f[f.length-1],o)||f.push(["L",o.x,o.y]),f.push(["Z"]),f}var i=u.registerFactory("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(o){var l=[];return t.each(o.x,function(f,v){var b=o.y[v];l.push({x:f,y:b})}),l},getActiveCfg:function(o,l){var f=l.lineWidth||1;if(o==="hollow")return{lineWidth:f+1};var v=l.fillOpacity||l.opacity||1;return{fillOpacity:v-.08}},getSelectedCfg:function(o,l){return l&&l.style?l.style:this.getActiveCfg(o,l)}});u.registerShape("polygon","polygon",{draw:function(o,l){if(!t.isEmpty(o.points)){var f=r(o),v=n(o.points);return v=this.parsePath(v),l.addShape("path",{attrs:t.mix(f,{path:v})})}},getMarkerCfg:function(o){return t.mix({symbol:"square",radius:4},r(o))}}),u.registerShape("polygon","hollow",{draw:function(o,l){if(!t.isEmpty(o.points)){var f=h(o),v=n(o.points);return v=this.parsePath(v),l.addShape("path",{attrs:t.mix(f,{path:v})})}},getMarkerCfg:function(o){return t.mix({symbol:"square",radius:4},r(o))}}),E.exports=i},function(E,T,e){var t=e(0),u=e(9),s=e(23),c=e(5);function r(g){t.isArray(g)||(g=[g]);var m=g[0],_=g[g.length-1],M=g.length>1?g[1]:m,x=g.length>3?g[3]:_,y=g.length>2?g[2]:M;return{min:m,max:_,min1:M,max1:x,median:y}}function h(g,m){t.each(g,function(_){m.push({x:_[0],y:_[1]})})}function n(g){var m=c.shape.schema,_=t.mix({},m,g.style);return s.addStrokeAttrs(_,g),_}function i(g){var m=c.shape.schema,_=t.mix({},m,g.style);return s.addFillAttrs(_,g),g.color&&(_.stroke=g.color||_.stroke),_}function a(g,m,_){var M=[],x,y;return t.isArray(m)?(y=r(m),x=[[g-_/2,y.max],[g+_/2,y.max],[g,y.max],[g,y.max1],[g-_/2,y.min1],[g-_/2,y.max1],[g+_/2,y.max1],[g+_/2,y.min1],[g,y.min1],[g,y.min],[g-_/2,y.min],[g+_/2,y.min],[g-_/2,y.median],[g+_/2,y.median]]):(m=m||.5,y=r(g),x=[[y.min,m-_/2],[y.min,m+_/2],[y.min,m],[y.min1,m],[y.min1,m-_/2],[y.min1,m+_/2],[y.max1,m+_/2],[y.max1,m-_/2],[y.max1,m],[y.max,m],[y.max,m-_/2],[y.max,m+_/2],[y.median,m-_/2],[y.median,m+_/2]]),h(x,M),M}function o(g){t.isArray(g)||(g=[g]);var m=g.sort(function(y,S){return y<S?1:-1}),_=m.length;if(_<4)for(var M=m[_-1],x=0;x<4-_;x++)m.push(M);return m}function l(g,m,_){var M=o(m),x=[{x:g,y:M[0]},{x:g,y:M[1]},{x:g-_/2,y:M[2]},{x:g-_/2,y:M[1]},{x:g+_/2,y:M[1]},{x:g+_/2,y:M[2]},{x:g,y:M[2]},{x:g,y:M[3]}];return x}function f(g){var m=[["M",g[0].x,g[0].y],["L",g[1].x,g[1].y],["M",g[2].x,g[2].y],["L",g[3].x,g[3].y],["M",g[4].x,g[4].y],["L",g[5].x,g[5].y],["L",g[6].x,g[6].y],["L",g[7].x,g[7].y],["L",g[4].x,g[4].y],["Z"],["M",g[8].x,g[8].y],["L",g[9].x,g[9].y],["M",g[10].x,g[10].y],["L",g[11].x,g[11].y],["M",g[12].x,g[12].y],["L",g[13].x,g[13].y]];return m}function v(g){var m=[["M",g[0].x,g[0].y],["L",g[1].x,g[1].y],["M",g[2].x,g[2].y],["L",g[3].x,g[3].y],["L",g[4].x,g[4].y],["L",g[5].x,g[5].y],["Z"],["M",g[6].x,g[6].y],["L",g[7].x,g[7].y]];return m}var b=u.registerFactory("schema",{defaultShapeType:"",getActiveCfg:function(m,_){if(m==="box"){var M=_.lineWidth||1;return{lineWidth:M+1}}var x=_.fillOpacity||_.opacity||1;return{fillOpacity:x-.15,strokeOpacity:x-.15}},getSelectedCfg:function(m,_){return _&&_.style?_.style:this.getActiveCfg(m,_)}});u.registerShape("schema","box",{getPoints:function(m){return a(m.x,m.y,m.size)},draw:function(m,_){var M=n(m),x=f(m.points);return x=this.parsePath(x),_.addShape("path",{attrs:t.mix(M,{path:x})})},getMarkerCfg:function(m){return{symbol:function(M,x,y){var S=[x-6,x-3,x,x+3,x+6],P=a(M,S,y);return[["M",P[0].x+1,P[0].y],["L",P[1].x-1,P[1].y],["M",P[2].x,P[2].y],["L",P[3].x,P[3].y],["M",P[4].x,P[4].y],["L",P[5].x,P[5].y],["L",P[6].x,P[6].y],["L",P[7].x,P[7].y],["L",P[4].x,P[4].y],["Z"],["M",P[8].x,P[8].y],["L",P[9].x,P[9].y],["M",P[10].x+1,P[10].y],["L",P[11].x-1,P[11].y],["M",P[12].x,P[12].y],["L",P[13].x,P[13].y]]},radius:6,lineWidth:1,stroke:m.color}}}),u.registerShape("schema","candle",{getPoints:function(m){return l(m.x,m.y,m.size)},draw:function(m,_){var M=i(m),x=v(m.points);return x=this.parsePath(x),_.addShape("path",{attrs:t.mix(M,{path:x})})},getMarkerCfg:function(m){return{symbol:function(M,x,y){x=[x+7.5,x+3,x-3,x-7.5];var S=l(M,x,y);return[["M",S[0].x,S[0].y],["L",S[1].x,S[1].y],["M",S[2].x,S[2].y],["L",S[3].x,S[3].y],["L",S[4].x,S[4].y],["L",S[5].x,S[5].y],["Z"],["M",S[6].x,S[6].y],["L",S[7].x,S[7].y]]},lineWidth:1,stroke:m.color,fill:m.color,radius:6}}}),E.exports=b},function(E,T,e){var t=e(0),u=e(9),s=e(23),c=e(5),r=t.PathUtil;function h(a){var o=c.shape.venn,l=t.mix({},o,a.style);return s.addFillAttrs(l,a),l}function n(a){var o=c.shape.hollowVenn,l=t.mix({},o,a.style);return s.addStrokeAttrs(l,a),l}var i=u.registerFactory("venn",{defaultShapeType:"venn",getActiveCfg:function(o,l){var f=l.lineWidth||1;if(o==="hollow")return{lineWidth:f+1};var v=l.fillOpacity||l.opacity||1;return{fillOpacity:v-.08}},getSelectedCfg:function(o,l){return l&&l.style?l.style:this.getActiveCfg(o,l)}});u.registerShape("venn","venn",{draw:function(o,l){var f=o.origin._origin,v=f.path,b=h(o),g=r.parsePathString(v),m=l.addShape("path",{attrs:t.mix(b,{path:g})});return m},getMarkerCfg:function(o){return t.mix({symbol:"circle",radius:4},h(o))}}),u.registerShape("venn","hollow",{draw:function(o,l){var f=o.origin._origin,v=f.path,b=n(o),g=r.parsePathString(v),m=l.addShape("path",{attrs:t.mix(b,{path:g})});return m},getMarkerCfg:function(o){return t.mix({symbol:"circle",radius:4},h(o))}}),E.exports=i},function(E,T,e){var t=e(0),u=e(9),s=e(23),c=e(5),r=e(25);function h(f){var v=c.shape.venn,b=t.mix({},v,f.style);return s.addFillAttrs(b,f),f.color&&(b.stroke=b.stroke||f.color),b}function n(f){var v=c.shape.hollowVenn,b=t.mix({},v,f.style);return s.addStrokeAttrs(b,f),b}function i(f){for(var v=[],b=0;b<f.length;b++){var g=f[b];if(g){var m=b===0?"M":"L";v.push([m,g.x,g.y])}}var _=f[0];return _&&(v.push(["L",_.x,_.y]),v.push(["z"])),v}function a(f){for(var v=f.length/2,b=[],g=[],m=0;m<f.length;m++)m<v?b.push(f[m]):g.push(f[m]);var _=r.getSplinePath(b,!1),M=r.getSplinePath(g,!1);g.length&&_.push(["L",g[0].x,g[0].y]),M.shift();var x=_.concat(M);return b.length&&x.push(["L",b[0].x,b[0].y]),x.push(["z"]),x}function o(f){var v=Math.max.apply(null,f);return f.map(function(b){return b/v})}var l=u.registerFactory("violin",{defaultShapeType:"violin",getDefaultPoints:function(v){var b=v.size/2,g=[],m=o(v._size);return t.each(v.y,function(_,M){var x=m[M]*b,y=M===0,S=M===v.y.length-1;g.push({isMin:y,isMax:S,x:v.x-x,y:_}),g.unshift({isMin:y,isMax:S,x:v.x+x,y:_})}),g},getActiveCfg:function(v,b){var g=b.lineWidth||1;if(v==="hollow")return{lineWidth:g+1};var m=b.fillOpacity||b.opacity||1;return{fillOpacity:m-.08}},getSelectedCfg:function(v,b){return b&&b.style?b.style:this.getActiveCfg(v,b)}});u.registerShape("violin","violin",{draw:function(v,b){var g=h(v),m=i(v.points);m=this.parsePath(m);var _=b.addShape("path",{attrs:t.mix(g,{path:m})});return _},getMarkerCfg:function(v){return t.mix({symbol:"circle",radius:4},h(v))}}),u.registerShape("violin","smooth",{draw:function(v,b){var g=h(v),m=a(v.points);m=this.parsePath(m);var _=b.addShape("path",{attrs:t.mix(g,{path:m})});return _},getMarkerCfg:function(v){return t.mix({symbol:"circle",radius:4},h(v))}}),u.registerShape("violin","hollow",{draw:function(v,b){var g=n(v),m=i(v.points);m=this.parsePath(m);var _=b.addShape("path",{attrs:t.mix(g,{path:m})});return _},getMarkerCfg:function(v){return t.mix({symbol:"circle",radius:4},n(v))}}),u.registerShape("violin","smoothHollow",{draw:function(v,b){var g=n(v),m=a(v.points);m=this.parsePath(m);var _=b.addShape("path",{attrs:t.mix(g,{path:m})});return _},getMarkerCfg:function(v){return t.mix({symbol:"circle",radius:4},n(v))}}),E.exports=l},function(E,T,e){var t=e(0);E.exports=function(u){return t.isArray(u)?u:t.isString(u)?u.split("*"):[u]}},function(E,T,e){var t=e(0).MatrixUtil,u=t.vec2;function s(r,h,n,i){var a=[],o,l,f=!!i,v,b;if(f){v=[Infinity,Infinity],b=[-Infinity,-Infinity];for(var g=0,m=r.length;g<m;g++){var _=r[g];v=u.min([],v,_),b=u.max([],b,_)}v=u.min([],v,i[0]),b=u.max([],b,i[1])}for(var M=0,x=r.length;M<x;M++){var y=r[M];if(n)o=r[M?M-1:x-1],l=r[(M+1)%x];else if(M===0||M===x-1){a.push(y);continue}else o=r[M-1],l=r[M+1];var S=[];S=u.sub(S,l,o),S=u.scale(S,S,h);var P=u.distance(y,o),A=u.distance(y,l),O=P+A;O!==0&&(P/=O,A/=O);var L=u.scale([],S,-P),H=u.scale([],S,A),F=u.add([],y,L),Z=u.add([],y,H);f&&(F=u.max([],F,v),F=u.min([],F,b),Z=u.max([],Z,v),Z=u.min([],Z,b)),a.push(F),a.push(Z)}return n&&a.push(a.shift()),a}function c(r,h,n){for(var i=!!h,a=[],o=0,l=r.length;o<l;o+=2)a.push([r[o],r[o+1]]);for(var f=s(a,.4,i,n),v=a.length,b=[],g,m,_,M=0;M<v-1;M++)g=f[M*2],m=f[M*2+1],_=a[M+1],b.push(["C",g[0],g[1],m[0],m[1],_[0],_[1]]);return i&&(g=f[v],m=f[v+1],_=a[0],b.push(["C",g[0],g[1],m[0],m[1],_[0],_[1]])),b}E.exports={catmullRom2bezier:c}},function(E,T,e){function t(l,f){l.prototype=Object.create(f.prototype),l.prototype.constructor=l,l.__proto__=f}var u=e(8),s=e(0),c=e(544),r=c.venn,h=c.scaleSolution,n=c.circlePath,i=c.intersectionAreaPath,a=c.computeTextCentres;e(311);var o=function(l){t(f,l);function f(){return l.apply(this,arguments)||this}var v=f.prototype;return v.getDefaultCfg=function(){var g=l.prototype.getDefaultCfg.call(this);return g.type="venn",g.shapeType="venn",g.generatePoints=!1,g},v._getAttrValues=function(g,m){return g.type==="position"?[m.x,m.y]:l.prototype._getAttrValues.call(this,g,m)},v.sets=function(g){return this.set("setsField",g),this},v._initAttrs=function(){var g=this;l.prototype._initAttrs.call(this);var m=g.get("attrOptions"),_=g.get("setsField")||"sets",M=g.get("data"),x=m.size?m.size.field:"size";M.forEach(function(U){U.sets=U[_],U._sets=U[_].join("&"),U.size=U[x]});var y=r(M),S=g.get("coord"),P=[Math.min(S.x.end,S.x.start),Math.max(S.x.end,S.x.start)],A=[Math.min(S.y.end,S.y.start),Math.max(S.y.end,S.y.start)],O=P[1]-P[0],L=A[1]-A[0],H=g.get("styleOptions"),F=H&&s.isObject(H.style)?H.style.padding:0;s.isFinite(F)||(F=0);var Z=h(y,O,L,F),G=a(Z,M);M.forEach(function(U){var Y=U.sets,J=Y.join(",");if(U.id=J,Y.length===1){var rt=Z[J];U.path=n(rt.x,rt.y,rt.radius),s.assign(U,rt)}else{var ft=Y.map(function(Lt){return Z[Lt]}),dt=i(ft);/[zZ]$/.test(dt)||(dt+="Z"),U.path=dt;var ut=G[J]||{x:0,y:0};s.assign(U,ut)}})},f}(u);u.Venn=o,E.exports=o},function(E,T,e){function t(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function u(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var s=e(8),c=e(0),r=e(70);e(312);var h=function(i){u(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.type="violin",f.shapeType="violin",f.generatePoints=!0,f};function o(l){var f;return f=i.call(this,l)||this,c.assign(t(f),r),f}return a.createShapePointsCfg=function(f){var v=this,b=i.prototype.createShapePointsCfg.call(this,f);b.size=v.getNormalizedSize(f);var g=v.get("_sizeField");return b._size=f._origin[g],b},a.clearInner=function(){i.prototype.clearInner.call(this),this.set("defaultSize",null)},a._initAttrs=function(){var f=this,v=f.get("attrOptions"),b=v.size?v.size.field:f.get("_sizeField")?f.get("_sizeField"):"size";f.set("_sizeField",b),delete v.size,i.prototype._initAttrs.call(this)},o}(s),n=function(i){u(a,i);function a(){return i.apply(this,arguments)||this}var o=a.prototype;return o.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return f.hasDefaultAdjust=!0,f.adjusts=[{type:"dodge"}],f},a}(h);h.Dodge=n,s.Violin=h,s.ViolinDodge=n,E.exports=h},function(E,T,e){function t(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function u(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var s=e(0),c=e(28),r=["X","Y","XY","POLYGON"],h="XY",n=function(i){u(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return s.mix({},f,{type:h,startPoint:null,brushing:!1,dragging:!1,brushShape:null,container:null,polygonPath:null,style:{fill:"#C5D4EB",opacity:.3,lineWidth:1,stroke:"#82A6DD"},draggable:!1,dragOffX:0,dragOffY:0,inPlot:!0,xField:null,yField:null})};function o(l,f){var v;v=i.call(this,l,f)||this;var b=t(v);b.filter=!b.draggable,b.type=b.type.toUpperCase(),b.chart=f,r.includes(b.type)||(b.type=h);var g=b.canvas;if(g){var m;g.get("children").map(function(y){return y.get("type")==="plotBack"?(m=y.get("plotRange"),!1):y}),b.plot={start:m.bl,end:m.tr}}if(f){var _=f.get("coord");b.plot={start:_.start,end:_.end},f.on("afterrender",function(){b.plot={start:_.start,end:_.end}}),b.isTransposed=_.isTransposed;var M=f._getScales("x"),x=f._getScales("y");b.xScale=b.xField?M[b.xField]:f.getXScale(),b.yScale=b.yField?x[b.yField]:f.getYScales()[0]}return v}return a.start=function(f){var v=this,b=v.canvas,g=v.type,m=v.brushShape;if(!!g){v.brushing&&v.end(f);var _={x:f.offsetX,y:f.offsetY};if(!!_.x){var M=v.plot&&v.inPlot,x=b.get("canvasDOM"),y=b.get("pixelRatio");if(v.selection&&(v.selection=null),v.draggable&&m&&!m.get("destroyed")){if(m.isHit(_.x*y,_.y*y)){if(x.style.cursor="move",v.selection=m,v.dragging=!0,g==="X")v.dragoffX=_.x-m.attr("x"),v.dragoffY=0;else if(g==="Y")v.dragoffX=0,v.dragoffY=_.y-m.attr("y");else if(g==="XY")v.dragoffX=_.x-m.attr("x"),v.dragoffY=_.y-m.attr("y");else if(g==="POLYGON"){var S=m.getBBox();v.dragoffX=_.x-S.minX,v.dragoffY=_.y-S.minY}v.onDragstart&&v.onDragstart(f)}v.prePoint=_}if(!v.dragging){v.onBrushstart&&v.onBrushstart(_);var P=v.container;if(M){var A=v.plot,O=A.start,L=A.end;if(_.x<O.x||_.x>L.x||_.y<L.y||_.y>O.y)return}x.style.cursor="crosshair",v.startPoint=_,v.brushShape=null,v.brushing=!0,P?P.clear():(P=b.addGroup({zIndex:5}),P.initTransform()),v.container=P,g==="POLYGON"&&(v.polygonPath="M "+_.x+" "+_.y)}}}},a.process=function(f){var v=this,b=v.brushing,g=v.dragging,m=v.type,_=v.plot,M=v.startPoint,x=v.xScale,y=v.yScale,S=v.canvas;if(!(!b&&!g)){var P={x:f.offsetX,y:f.offsetY},A=S.get("canvasDOM");if(b){A.style.cursor="crosshair";var O=_.start,L=_.end,H=v.polygonPath,F=v.brushShape,Z=v.container;v.plot&&v.inPlot&&(P=v._limitCoordScope(P));var G,U,Y,J;m==="Y"?(G=O.x,U=P.y>=M.y?M.y:P.y,Y=Math.abs(O.x-L.x),J=Math.abs(M.y-P.y)):m==="X"?(G=P.x>=M.x?M.x:P.x,U=L.y,Y=Math.abs(M.x-P.x),J=Math.abs(L.y-O.y)):m==="XY"?(P.x>=M.x?(G=M.x,U=P.y>=M.y?M.y:P.y):(G=P.x,U=P.y>=M.y?M.y:P.y),Y=Math.abs(M.x-P.x),J=Math.abs(M.y-P.y)):m==="POLYGON"&&(H+="L "+P.x+" "+P.y,v.polygonPath=H,F?!F.get("destroyed")&&F.attr(s.mix({},F._attrs,{path:H})):F=Z.addShape("path",{attrs:s.mix(v.style,{path:H})})),m!=="POLYGON"&&(F?!F.get("destroyed")&&F.attr(s.mix({},F._attrs,{x:G,y:U,width:Y,height:J})):F=Z.addShape("rect",{attrs:s.mix(v.style,{x:G,y:U,width:Y,height:J})})),v.brushShape=F}else if(g){A.style.cursor="move";var rt=v.selection;if(rt&&!rt.get("destroyed"))if(m==="POLYGON"){var ft=v.prePoint;v.selection.translate(P.x-ft.x,P.y-ft.y)}else v.dragoffX&&rt.attr("x",P.x-v.dragoffX),v.dragoffY&&rt.attr("y",P.y-v.dragoffY)}v.prePoint=P,S.draw();var dt=v._getSelected(),ut=dt.data,Lt=dt.shapes,Ft=dt.xValues,Ot=dt.yValues,St={data:ut,shapes:Lt};x&&(St[x.field]=Ft),y&&(St[y.field]=Ot),s.mix(f,St),St.x=P.x,St.y=P.y,v.onDragmove&&v.onDragmove(St),v.onBrushmove&&v.onBrushmove(St)}},a.end=function(f){var v=this;if(!(!v.brushing&&!v.dragging)){var b=v.data,g=v.shapes,m=v.xValues,_=v.yValues,M=v.canvas,x=v.type,y=v.startPoint,S=v.chart,P=v.container,A=v.xScale,O=v.yScale,L=f.offsetX,H=f.offsetY,F=M.get("canvasDOM");if(F.style.cursor="default",y!==null){if(Math.abs(y.x-L)<=1&&Math.abs(y.y-H)<=1){v.brushing=!1,v.dragging=!1,P.clear(),M.draw();return}var Z={data:b,shapes:g};if(A&&(Z[A.field]=m),O&&(Z[O.field]=_),s.mix(f,Z),Z.x=L,Z.y=H,v.dragging)v.dragging=!1,v.onDragend&&v.onDragend(Z);else if(v.brushing){v.brushing=!1;var G=v.brushShape,U=v.polygonPath;x==="POLYGON"&&(U+="z",G&&!G.get("destroyed")&&G.attr(s.mix({},G._attrs,{path:U})),v.polygonPath=U,M.draw()),v.onBrushend?v.onBrushend(Z):S&&v.filter&&(P.clear(),!v.isTransposed&&x==="X"||v.isTransposed&&x==="Y"?A&&S.filter(A.field,function(Y){return m.indexOf(Y)>-1}):!v.isTransposed&&x==="Y"||v.isTransposed&&x==="X"?O&&S.filter(O.field,function(Y){return _.indexOf(Y)>-1}):(A&&S.filter(A.field,function(Y){return m.indexOf(Y)>-1}),O&&S.filter(O.field,function(Y){return _.indexOf(Y)>-1})),S.repaint())}}}},a.reset=function(){var f=this,v=f.chart,b=f.filter,g=f.brushShape,m=f.canvas;this._init(),v&&b&&(v.get("options").filters={},v.repaint()),g&&(g.destroy(),m.draw())},a._limitCoordScope=function(f){var v=this.plot,b=v.start,g=v.end;return f.x<b.x&&(f.x=b.x),f.x>g.x&&(f.x=g.x),f.y<g.y&&(f.y=g.y),f.y>b.y&&(f.y=b.y),f},a._getSelected=function(){var f=this,v=f.chart,b=f.xScale,g=f.yScale,m=f.brushShape,_=f.canvas,M=_.get("pixelRatio"),x=[],y=[],S=[],P=[];if(v){var A=v.get("geoms");A.map(function(O){var L=O.getShapes();return L.map(function(H){var F=H.get("origin");return Array.isArray(F)||(F=[F]),F.map(function(Z){if(m.isHit(Z.x*M,Z.y*M)){x.push(H);var G=Z._origin;P.push(G),b&&y.push(G[b.field]),g&&S.push(G[g.field])}return Z}),H}),O})}return f.shapes=x,f.xValues=y,f.yValues=S,f.data=P,_.draw(),{data:P,xValues:y,yValues:S,shapes:x}},o}(c);E.exports=n},function(E,T,e){var t=e(0),u=e(16),s=u.Group,c=t.DomUtil,r=5,h=function n(i){n.superclass.constructor.call(this,i)};t.extend(h,s),t.augment(h,{getDefaultCfg:function(){return{range:null,middleAttr:null,backgroundElement:null,minHandleElement:null,maxHandleElement:null,middleHandleElement:null,currentTarget:null,layout:"vertical",width:null,height:null,pageX:null,pageY:null}},_initHandle:function(i){var a=this,o=a.addGroup(),l=a.get("layout"),f=a.get("handleStyle"),v=f.img,b=f.width,g=f.height,m,_,M;if(l==="horizontal"){var x=f.width;M="ew-resize",_=o.addShape("Image",{attrs:{x:-x/2,y:0,width:x,height:g,img:v,cursor:M}}),m=o.addShape("Text",{attrs:t.mix({x:i==="min"?-(x/2+r):x/2+r,y:g/2,textAlign:i==="min"?"end":"start",textBaseline:"middle",text:i==="min"?this.get("minText"):this.get("maxText"),cursor:M},this.get("textStyle"))})}else M="ns-resize",_=o.addShape("Image",{attrs:{x:0,y:-g/2,width:b,height:g,img:v,cursor:M}}),m=o.addShape("Text",{attrs:t.mix({x:b/2,y:i==="min"?g/2+r:-(g/2+r),textAlign:"center",textBaseline:"middle",text:i==="min"?this.get("minText"):this.get("maxText"),cursor:M},this.get("textStyle"))});return this.set(i+"TextElement",m),this.set(i+"IconElement",_),o},_initSliderBackground:function(){var i=this.addGroup();return i.initTransform(),i.translate(0,0),i.addShape("Rect",{attrs:t.mix({x:0,y:0,width:this.get("width"),height:this.get("height")},this.get("backgroundStyle"))}),i},_beforeRenderUI:function(){var i=this._initSliderBackground(),a=this._initHandle("min"),o=this._initHandle("max"),l=this.addShape("rect",{attrs:this.get("middleAttr")});this.set("middleHandleElement",l),this.set("minHandleElement",a),this.set("maxHandleElement",o),this.set("backgroundElement",i),i.set("zIndex",0),l.set("zIndex",1),a.set("zIndex",2),o.set("zIndex",2),l.attr("cursor","move"),this.sort()},_renderUI:function(){this.get("layout")==="horizontal"?this._renderHorizontal():this._renderVertical()},_transform:function(i){var a=this.get("range"),o=a[0]/100,l=a[1]/100,f=this.get("width"),v=this.get("height"),b=this.get("minHandleElement"),g=this.get("maxHandleElement"),m=this.get("middleHandleElement");b.resetMatrix?(b.resetMatrix(),g.resetMatrix()):(b.initTransform(),g.initTransform()),i==="horizontal"?(m.attr({x:f*o,y:0,width:(l-o)*f,height:v}),b.translate(o*f,0),g.translate(l*f,0)):(m.attr({x:0,y:v*(1-l),width:f,height:(l-o)*v}),b.translate(0,(1-o)*v),g.translate(0,(1-l)*v))},_renderHorizontal:function(){this._transform("horizontal")},_renderVertical:function(){this._transform("vertical")},_bindUI:function(){this.on("mousedown",t.wrapBehavior(this,"_onMouseDown"))},_isElement:function(i,a){var o=this.get(a);if(i===o)return!0;if(o.isGroup){var l=o.get("children");return l.indexOf(i)>-1}return!1},_getRange:function(i,a){var o=i+a;return o=o>100?100:o,o=o<0?0:o,o},_limitRange:function(i,a,o){o[0]=this._getRange(i,o[0]),o[1]=o[0]+a,o[1]>100&&(o[1]=100,o[0]=o[1]-a)},_updateStatus:function(i,a){var o=i==="x"?this.get("width"):this.get("height");i=t.upperFirst(i);var l=this.get("range"),f=this.get("page"+i),v=this.get("currentTarget"),b=this.get("rangeStash"),g=this.get("layout"),m=g==="vertical"?-1:1,_=a["page"+i],M=_-f,x=M/o*100*m,y,S=this.get("minRange"),P=this.get("maxRange");l[1]<=l[0]?(this._isElement(v,"minHandleElement")||this._isElement(v,"maxHandleElement"))&&(l[0]=this._getRange(x,l[0]),l[1]=this._getRange(x,l[0])):(this._isElement(v,"minHandleElement")&&(l[0]=this._getRange(x,l[0]),S&&l[1]-l[0]<=S&&this._limitRange(x,S,l),P&&l[1]-l[0]>=P&&this._limitRange(x,P,l)),this._isElement(v,"maxHandleElement")&&(l[1]=this._getRange(x,l[1]),S&&l[1]-l[0]<=S&&this._limitRange(x,S,l),P&&l[1]-l[0]>=P&&this._limitRange(x,P,l))),this._isElement(v,"middleHandleElement")&&(y=b[1]-b[0],this._limitRange(x,y,l)),this.emit("sliderchange",{range:l}),this.set("page"+i,_),this._renderUI(),this.get("canvas").draw()},_onMouseDown:function(i){var a=i.currentTarget,o=i.event,l=this.get("range");o.stopPropagation(),o.preventDefault(),this.set("pageX",o.pageX),this.set("pageY",o.pageY),this.set("currentTarget",a),this.set("rangeStash",[l[0],l[1]]),this._bindCanvasEvents()},_bindCanvasEvents:function(){var i=this.get("canvas").get("containerDOM");this.onMouseMoveListener=c.addEventListener(i,"mousemove",t.wrapBehavior(this,"_onCanvasMouseMove")),this.onMouseUpListener=c.addEventListener(i,"mouseup",t.wrapBehavior(this,"_onCanvasMouseUp")),this.onMouseLeaveListener=c.addEventListener(i,"mouseleave",t.wrapBehavior(this,"_onCanvasMouseUp"))},_onCanvasMouseMove:function(i){var a=this.get("layout");a==="horizontal"?this._updateStatus("x",i):this._updateStatus("y",i)},_onCanvasMouseUp:function(){this._removeDocumentEvents()},_removeDocumentEvents:function(){this.onMouseMoveListener.remove(),this.onMouseUpListener.remove(),this.onMouseLeaveListener.remove()}}),E.exports=h},function(E,T,e){function t(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function u(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var s=e(0),c=e(28),r=e(320),h=e(71),n=e(73),i=864e5,a=["X","Y","XY"],o="X",l=function(f){u(b,f);var v=b.prototype;v.getDefaultCfg=function(){var m=f.prototype.getDefaultCfg.call(this);return s.mix({},m,{type:o,stepRatio:.05,limitRange:{},stepByField:{},threshold:20,originScaleDefsByField:{},previousPoint:null,isDragging:!1})},v._disableTooltip=function(){var m=this,_=m.chart,M=_.get("tooltipController");M&&(m._showTooltip=!0,_.tooltip(!1))},v._enableTooltip=function(m){var _=this,M=_.chart;_._showTooltip&&(M.tooltip(!0),M.showTooltip(m))};function b(g,m){var _;_=f.call(this,g,m)||this;var M=t(_);M.type=M.type.toUpperCase(),M.chart=m,M.coord=m.get("coord");var x=M.data=m.get("data");r(m);var y=m.getYScales(),S=m.getXScale();y.push(S);var P=m.get("scaleController");return y.forEach(function(A){var O=A.field;M.limitRange[O]=n(x,A);var L=P.defs[O]||{};M.originScaleDefsByField[O]=s.mix(L,{nice:!!L.nice}),A.isLinear&&(M.stepByField[O]=(A.max-A.min)*M.stepRatio)}),a.includes(M.type)||(M.type=o),M._disableTooltip(),_}return v._applyTranslate=function(m,_,M){_===void 0&&(_=0);var x=this;m.isLinear?x._translateLinearScale(m,_,M):x._translateCatScale(m,_,M)},v._translateCatScale=function(m,_,M){var x=this,y=x.chart,S=m.type,P=m.field,A=m.values,O=m.ticks,L=h(y,P),H=x.limitRange[P],F=_/M,Z=A.length,G=Math.max(1,Math.abs(parseInt(F*Z))),U=H.indexOf(A[0]),Y=H.indexOf(A[Z-1]);if(_>0&&U>=0){for(var J=0;J<G&&U>0;J++)U-=1,Y-=1;var rt=H.slice(U,Y+1),ft=null;if(S==="timeCat"){for(var dt=O.length>2?O[1]-O[0]:i,ut=O[0]-dt;ut>=rt[0];ut-=dt)O.unshift(ut);ft=O}y.scale(P,s.mix({},L,{values:rt,ticks:ft}))}else if(_<0&&Y<=H.length-1){for(var Lt=0;Lt<G&&Y<H.length-1;Lt++)U+=1,Y+=1;var Ft=H.slice(U,Y+1),Ot=null;if(S==="timeCat"){for(var St=O.length>2?O[1]-O[0]:i,xt=O[O.length-1]+St;xt<=Ft[Ft.length-1];xt+=St)O.push(xt);Ot=O}y.scale(P,s.mix({},L,{values:Ft,ticks:Ot}))}},v._translateLinearScale=function(m,_,M){var x=this,y=x.chart,S=x.limitRange,P=m.min,A=m.max,O=m.field;if(!(P===S[O].min&&A===S[O].max)){var L=_/M,H=A-P,F=h(y,O);y.scale(O,s.mix({},F,{nice:!1,min:P+L*H,max:A+L*H}))}},v.start=function(m){var _=this,M=_.canvas,x=M.get("canvasDOM");x.style.cursor="pointer",_.isDragging=!0,_.previousPoint={x:m.x,y:m.y},_._disableTooltip()},v.process=function(m){var _=this;if(_.isDragging){var M=_.chart,x=_.type,y=_.canvas,S=_.coord,P=_.threshold,A=y.get("canvasDOM");A.style.cursor="move";var O=_.previousPoint,L=m,H=L.x-O.x,F=L.y-O.y,Z=!1;if(Math.abs(H)>P&&x.indexOf("X")>-1){Z=!0;var G=M.getXScale();_._applyTranslate(G,G.isLinear?-H:H,S.width)}if(Math.abs(F)>P&&x.indexOf("Y")>-1){Z=!0;var U=M.getYScales();U.forEach(function(Y){_._applyTranslate(Y,L.y-O.y,S.height)})}Z&&(_.previousPoint=L,M.repaint())}},v.end=function(m){var _=this;_.isDragging=!1;var M=_.canvas,x=M.get("canvasDOM");x.style.cursor="default",_._enableTooltip(m)},v.reset=function(){var m=this,_=m.view,M=m.originScaleDefsByField,x=_.getYScales(),y=_.getXScale();x.push(y),x.forEach(function(S){if(S.isLinear){var P=S.field;_.scale(P,M[P])}}),_.repaint(),m._disableTooltip()},b}(c);E.exports=l},function(E,T,e){var t=e(0),u=e(52),s=e(72);E.exports=function(c){c.on("beforeinitgeoms",function(){c.set("limitInPlot",!0);var r=c.get("data"),h=s(c);if(!h)return r;var n=c.get("geoms"),i=!1;t.each(n,function(l){if(["area","line","path"].includes(l.get("type")))return i=!0,!1});var a=[];if(t.each(h,function(l,f){!i&&l&&(l.values||l.min||l.max)&&a.push(f)}),a.length===0)return r;var o=[];t.each(r,function(l){var f=!0;t.each(a,function(v){var b=l[v];if(b){var g=h[v];if(g.type==="timeCat"){var m=g.values;t.isNumber(m[0])&&(b=u.toTimeStamp(b))}(g.values&&!g.values.includes(b)||g.min&&b<g.min||g.max&&b>g.max)&&(f=!1)}}),f&&o.push(l)}),c.set("filteredData",o)})}},function(E,T){E.exports=function(e,t,u){if(!e)return[0,1];var s=0,c=0;if(u==="linear"){var r=t.min,h=t.max,n=h-r;s=(e.min-r)/n,c=(e.max-r)/n}else{var i=t,a=e.values,o=i.indexOf(a[0]),l=i.indexOf(a[a.length-1]);s=o/(i.length-1),c=l/(i.length-1)}return[s,c]}},function(E,T,e){var t=e(45),u=e(44),s=e(0),c={Base:e(28),Brush:e(317),Drag:e(319),ScrollBar:e(323),ShapeSelect:e(324),Slider:e(325),Zoom:e(326)};t._Interactions={},t.registerInteraction=function(r,h){t._Interactions[r]=h},t.getInteraction=function(r){return t._Interactions[r]},u.prototype.getInteractions=function(){var r=this;return r._interactions||(r._interactions={}),r._interactions},u.prototype._setInteraction=function(r,h){var n=this,i=n.getInteractions();i[r]&&i[r]!==h&&i[r].destroy(),i[r]=h},u.prototype.clearInteraction=function(r){var h=this,n=h.getInteractions();r?(n[r]&&(n[r]._reset(),n[r].destroy()),delete n[r]):s.each(n,function(i,a){i._reset(),i.destroy(),delete n[a]})},u.prototype.interact=u.prototype.interaction=function(r,h){var n=this,i=t.getInteraction(r),a=new i(h,n);return n._setInteraction(r,a),n},t.registerInteraction("brush",c.Brush),t.registerInteraction("Brush",c.Brush),t.registerInteraction("drag",c.Drag),t.registerInteraction("Drag",c.Drag),t.registerInteraction("zoom",c.Zoom),t.registerInteraction("Zoom",c.Zoom),t.registerInteraction("scroll-bar",c.ScrollBar),t.registerInteraction("ScrollBar",c.ScrollBar),t.registerInteraction("shape-select",c.ShapeSelect),t.registerInteraction("ShapeSelect",c.ShapeSelect),t.registerInteraction("slider",c.Slider),t.registerInteraction("Slider",c.Slider),E.exports=c},function(E,T,e){function t(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a}var u=e(0),s=e(28),c=e(321),r=e(73),h="X",n=function(i){t(o,i);var a=o.prototype;a.getDefaultCfg=function(){var f=i.prototype.getDefaultCfg.call(this);return u.mix({},f,{startEvent:null,processEvent:null,endEvent:null,resetEvent:null,type:h,xStyle:{backgroundColor:"rgba(202, 215, 239, .2)",fillerColor:"rgba(202, 215, 239, .75)",size:4,lineCap:"round",offsetX:0,offsetY:-10},yStyle:{backgroundColor:"rgba(202, 215, 239, .2)",fillerColor:"rgba(202, 215, 239, .75)",size:4,lineCap:"round",offsetX:8,offsetY:0}})},a._renderScrollBars=function(){var f=this.chart,v=f.get("_scrollBarCfg");if(!!v){var b=f.get("data"),g=f.get("plotRange");g.width=Math.abs(g.br.x-g.bl.x),g.height=Math.abs(g.tl.y-g.bl.y);var m=f.get("backPlot"),_=f.get("canvas"),M=_.get("height"),x=f.get("_limitRange"),y=v.type;if(y.indexOf("X")>-1){var S=v.xStyle,P=S.offsetX,A=S.offsetY,O=S.lineCap,L=S.backgroundColor,H=S.fillerColor,F=S.size,Z=f.getXScale(),G=x[Z.field];G||(G=r(b,Z),x[Z.field]=G);var U=c(Z,G,Z.type),Y=f.get("_horizontalBar"),J=M-F/2+A;if(Y){var rt=Y.get("children")[1];rt.attr({x1:Math.max(g.bl.x+g.width*U[0]+P,g.bl.x),x2:Math.min(g.bl.x+g.width*U[1]+P,g.br.x)})}else Y=m.addGroup({className:"horizontalBar"}),Y.addShape("line",{attrs:{x1:g.bl.x+P,y1:J,x2:g.br.x+P,y2:J,lineWidth:F,stroke:L,lineCap:O}}),Y.addShape("line",{attrs:{x1:Math.max(g.bl.x+g.width*U[0]+P,g.bl.x),y1:J,x2:Math.min(g.bl.x+g.width*U[1]+P,g.br.x),y2:J,lineWidth:F,stroke:H,lineCap:O}}),f.set("_horizontalBar",Y)}if(y.indexOf("Y")>-1){var ft=v.yStyle,dt=ft.offsetX,ut=ft.offsetY,Lt=ft.lineCap,Ft=ft.backgroundColor,Ot=ft.fillerColor,St=ft.size,xt=f.getYScales()[0],At=x[xt.field];At||(At=r(b,xt),x[xt.field]=At);var nt=c(xt,At,xt.type),Mt=f.get("_verticalBar"),z=St/2+dt;if(Mt){var Q=Mt.get("children")[1];Q.attr({y1:Math.max(g.tl.y+g.height*nt[0]+ut,g.tl.y),y2:Math.min(g.tl.y+g.height*nt[1]+ut,g.bl.y)})}else Mt=m.addGroup({className:"verticalBar"}),Mt.addShape("line",{attrs:{x1:z,y1:g.tl.y+ut,x2:z,y2:g.bl.y+ut,lineWidth:St,stroke:Ft,lineCap:Lt}}),Mt.addShape("line",{attrs:{x1:z,y1:Math.max(g.tl.y+g.height*nt[0]+ut,g.tl.y),x2:z,y2:Math.min(g.tl.y+g.height*nt[1]+ut,g.bl.y),lineWidth:St,stroke:Ot,lineCap:Lt}}),f.set("_verticalBar",Mt)}}};function o(l,f){var v;v=i.call(this,l,f)||this;var b=v.getDefaultCfg();return f.set("_scrollBarCfg",u.deepMix({},b,l)),f.set("_limitRange",{}),!f.get("_horizontalBar")&&!f.get("_verticalBar")&&v._renderScrollBars(),v}return a._clear=function(){var f=this.chart;if(f){var v=f.get("_horizontalBar"),b=f.get("_verticalBar");v&&v.remove(!0),b&&b.remove(!0),f.set("_horizontalBar",null),f.set("_verticalBar",null)}},a._bindEvents=function(){this._onAfterclearOrBeforechangedata=this._onAfterclearOrBeforechangedata.bind(this),this._onAfterclearinner=this._onAfterclearinner.bind(this),this._onAfterdrawgeoms=this._onAfterdrawgeoms.bind(this);var f=this.chart;f.on("afterclear",this._onAfterclearOrBeforechangedata),f.on("beforechangedata",this._onAfterclearOrBeforechangedata),f.on("afterclearinner",this._onAfterclearinner),f.on("afterdrawgeoms",this._onAfterdrawgeoms)},a._onAfterclearOrBeforechangedata=function(){this.chart&&this.chart.set("_limitRange",{})},a._onAfterclearinner=function(){this._clear()},a._onAfterdrawgeoms=function(){this._renderScrollBars()},a._clearEvents=function(){var f=this.chart;f&&(f.off("afterclear",this._onAfterclearOrBeforechangedata),f.off("beforechangedata",this._onAfterclearOrBeforechangedata),f.off("afterclearinner",this._onAfterclearinner),f.off("afterdrawgeoms",this._onAfterdrawgeoms))},a.destroy=function(){this._clearEvents(),this._clear(),this.canvas.draw()},o}(s);E.exports=n},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var u=e(0),s=e(28);function c(h,n){var i={};for(var a in n)i[a]=h[a];return i}var r=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i.getDefaultCfg=function(){var o=h.prototype.getDefaultCfg.call(this);return u.mix({},o,{startEvent:"mouseup",processEvent:null,selectStyle:{fillOpacity:1},unSelectStyle:{fillOpacity:.1},cancelable:!0})},i.start=function(o){var l=this,f=l.view,v,b=[];if(f.eachShape(function(M,x){x.isPointInPath(o.x,o.y)?v=x:b.push(x)}),!v){l.reset();return}if(v.get("_selected")){if(!l.cancelable)return;l.reset()}else{var g=l.selectStyle,m=l.unSelectStyle,_=c(v.attr(),v);v.set("_originAttrs",_),v.attr(g),u.each(b,function(M){var x=M.get("_originAttrs");x&&M.attr(x),M.set("_selected",!1),m&&(x=c(M.attr(),m),M.set("_originAttrs",x),M.attr(m))}),v.set("_selected",!0),l.selectedShape=v,l.canvas.draw()}},i.end=function(o){var l=this.selectedShape;l&&!l.get("destroyed")&&l.get("origin")&&(o.data=l.get("origin")._origin,o.shapeInfo=l.get("origin"),o.shape=l,o.selected=!!l.get("_selected"))},i.reset=function(){var o=this;if(!!o.selectedShape){var l=o.view,f=l.get("geoms")[0],v=f.get("container").get("children")[0],b=v.get("children");u.each(b,function(g){var m=g.get("_originAttrs");m&&(g._attrs=m,g.set("_originAttrs",null)),g.set("_selected",!1)}),o.canvas.draw()}},n}(s);E.exports=r},function(E,T,e){function t(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function u(g,m){g.prototype=Object.create(m.prototype),g.prototype.constructor=g,g.__proto__=m}var s=e(318),c=e(44),r=e(0),h=e(16),n=e(5),i=e(28),a=e(71),o=e(72),l=h.Canvas,f=r.DomUtil,v=r.isNumber,b=function(g){u(_,g);var m=_.prototype;m.getDefaultCfg=function(){var x=g.prototype.getDefaultCfg.call(this);return r.mix({},x,{startEvent:null,processEvent:null,endEvent:null,resetEvent:null,height:26,width:"auto",padding:n.plotCfg.padding,container:null,xAxis:null,yAxis:null,fillerStyle:{fill:"#BDCCED",fillOpacity:.3},backgroundStyle:{stroke:"#CCD6EC",fill:"#CCD6EC",fillOpacity:.3,lineWidth:1},range:[0,100],layout:"horizontal",textStyle:{fill:"#545454"},handleStyle:{img:"https://gw.alipayobjects.com/zos/rmsportal/QXtfhORGlDuRvLXFzpsQ.png",width:5},backgroundChart:{type:["area"],color:"#CCD6EC"}})},m._initContainer=function(){var x=this,y=x.container;if(!y)throw new Error("Please specify the container for the Slider!");r.isString(y)?x.domContainer=document.getElementById(y):x.domContainer=y},m.forceFit=function(){var x=this;if(!(!x||x.destroyed)){var y=f.getWidth(x.domContainer),S=x.height;if(y!==x.domWidth){var P=x.canvas;P.changeSize(y,S),x.bgChart&&x.bgChart.changeWidth(y),P.clear(),x._initWidth(),x._initSlider(),x._bindEvent(),P.draw()}}},m._initForceFitEvent=function(){var x=this,y=setTimeout(r.wrapBehavior(x,"forceFit"),200);clearTimeout(x.resizeTimer),x.resizeTimer=y},m._initStyle=function(){var x=this;x.handleStyle=r.mix({width:x.height,height:x.height},x.handleStyle),x.width==="auto"&&window.addEventListener("resize",r.wrapBehavior(x,"_initForceFitEvent"))},m._initWidth=function(){var x=this,y;x.width==="auto"?y=f.getWidth(x.domContainer):y=x.width,x.domWidth=y;var S=r.toAllPadding(x.padding);x.layout==="horizontal"?(x.plotWidth=y-S[1]-S[3],x.plotPadding=S[3],x.plotHeight=x.height):x.layout==="vertical"&&(x.plotWidth=x.width,x.plotHeight=x.height-S[0]-S[2],x.plotPadding=S[0])},m._initCanvas=function(){var x=this,y=x.domWidth,S=x.height,P=new l({width:y,height:S,containerDOM:x.domContainer,capture:!1}),A=P.get("el");A.style.position="absolute",A.style.top=0,A.style.left=0,A.style.zIndex=3,x.canvas=P},m._initBackground=function(){var x,y=this,S=this.chart,P=S.getAllGeoms[0],A=y.data=y.data||S.get("data"),O=S.getXScale(),L=y.xAxis||O.field,H=y.yAxis||S.getYScales()[0].field,F=r.deepMix((x={},x[""+L]={range:[0,1]},x),o(S),y.scales);if(delete F[L].min,delete F[L].max,!A)throw new Error("Please specify the data!");if(!L)throw new Error("Please specify the xAxis!");if(!H)throw new Error("Please specify the yAxis!");var Z=y.backgroundChart,G=Z.type||P.get("type"),U=Z.color||"grey",Y=Z.shape;r.isArray(G)||(G=[G]);var J=r.toAllPadding(y.padding),rt=new c({container:y.container,width:y.domWidth,height:y.height,padding:[0,J[1],0,J[3]],animate:!1});rt.source(A),rt.scale(F),rt.axis(!1),rt.tooltip(!1),rt.legend(!1),r.each(G,function(ft,dt){var ut=rt[ft]().position(L+"*"+H).opacity(1),Lt=r.isArray(U)?U[dt]:U;Lt&&(r.isObject(Lt)?Lt.field&&ut.color(Lt.field,Lt.colors):ut.color(Lt));var Ft=r.isArray(Y)?Y[dt]:Y;Ft&&(r.isObject(Ft)?Ft.field&&ut.shape(Ft.field,Ft.callback||Ft.shapes):ut.shape(Ft))}),rt.render(),y.bgChart=rt,y.scale=y.layout==="horizontal"?rt.getXScale():rt.getYScales()[0],y.layout==="vertical"&&rt.destroy()},m._initRange=function(){var x=this,y=x.startRadio,S=x.endRadio,P=x._startValue,A=x._endValue,O=x.scale,L=0,H=1;v(y)?L=y:P&&(L=O.scale(O.translate(P))),v(S)?H=S:A&&(H=O.scale(O.translate(A)));var F=x.minSpan,Z=x.maxSpan,G=0;if(O.type==="time"||O.type==="timeCat"){var U=O.values,Y=U[0],J=U[U.length-1];G=J-Y}else O.isLinear&&(G=O.max-O.min);G&&F&&(x.minRange=F/G*100),G&&Z&&(x.maxRange=Z/G*100);var rt=[L*100,H*100];return x.range=rt,rt},m._getHandleValue=function(x){var y=this,S,P=y.range,A=P[0]/100,O=P[1]/100,L=y.scale;return x==="min"?S=y._startValue?y._startValue:L.invert(A):S=y._endValue?y._endValue:L.invert(O),S},m._initSlider=function(){var x=this,y=x.canvas,S=x._initRange(),P=x.scale,A=y.addGroup(s,{middleAttr:x.fillerStyle,range:S,minRange:x.minRange,maxRange:x.maxRange,layout:x.layout,width:x.plotWidth,height:x.plotHeight,backgroundStyle:x.backgroundStyle,textStyle:x.textStyle,handleStyle:x.handleStyle,minText:P.getText(x._getHandleValue("min")),maxText:P.getText(x._getHandleValue("max"))});x.layout==="horizontal"?A.translate(x.plotPadding,0):x.layout==="vertical"&&A.translate(0,x.plotPadding),x.rangeElement=A},m._updateElement=function(x,y){var S=this,P=S.chart,A=S.scale,O=S.rangeElement,L=A.field,H=O.get("minTextElement"),F=O.get("maxTextElement"),Z=A.invert(x),G=A.invert(y),U=A.getText(Z),Y=A.getText(G);H.attr("text",U),F.attr("text",Y),S._startValue=U,S._endValue=Y,S.onChange&&S.onChange({startText:U,endText:Y,startValue:Z,endValue:G,startRadio:x,endRadio:y}),P.scale(L,r.mix({},a(P,L),{nice:!1,min:Z,max:G})),P.repaint()},m._bindEvent=function(){var x=this,y=x.rangeElement;y.on("sliderchange",function(S){var P=S.range,A=P[0]/100,O=P[1]/100;x._updateElement(A,O)})};function _(M,x){var y;y=g.call(this,M,x)||this;var S=t(y);return S._initContainer(),S._initStyle(),S.render(),y}return m.clear=function(){var x=this;x.canvas.clear(),x.bgChart&&x.bgChart.destroy(),x.bgChart=null,x.scale=null,x.canvas.draw()},m.repaint=function(){var x=this;x.clear(),x.render()},m.render=function(){var x=this;x._initWidth(),x._initCanvas(),x._initBackground(),x._initSlider(),x._bindEvent(),x.canvas.draw()},m.destroy=function(){var x=this;clearTimeout(x.resizeTimer);var y=x.rangeElement;y.off("sliderchange"),x.bgChart&&x.bgChart.destroy(),x.canvas.destroy();for(var S=x.domContainer;S.hasChildNodes();)S.removeChild(S.firstChild);window.removeEventListener("resize",r.getWrapBehavior(x,"_initForceFitEvent")),x.destroyed=!0},_}(i);E.exports=b},function(E,T,e){function t(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function u(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var s=e(0),c=e(28),r=e(71),h=e(73),n=["X","Y","XY"],i="X",a=function(o){u(f,o);var l=f.prototype;l.getDefaultCfg=function(){var b=o.prototype.getDefaultCfg.call(this);return s.mix({},b,{processEvent:"mousewheel",type:i,stepRatio:.05,stepByField:{},minScale:1,maxScale:4,catStep:2,limitRange:{},originScaleDefsByField:{}})};function f(v,b){var g;g=o.call(this,v,b)||this;var m=t(g);m.chart=b,m.type=m.type.toUpperCase();var _=m.data=b.get("data"),M=b.getYScales(),x=b.getXScale();M.push(x);var y=b.get("scaleController");return M.forEach(function(S){var P=S.field,A=y.defs[P]||{};m.limitRange[P]=h(_,S),m.originScaleDefsByField[P]=s.mix(A,{nice:!!A.nice}),S.isLinear?m.stepByField[P]=(S.max-S.min)*m.stepRatio:m.stepByField[P]=m.catStep}),n.includes(m.type)||(m.type=i),g}return l._applyScale=function(b,g,m,_){m===void 0&&(m=0);var M=this,x=M.chart,y=M.stepByField;if(b.isLinear){var S=b.min,P=b.max,A=b.field,O=1-m,L=y[A]*g,H=S+L*m,F=P-L*O;if(F>H){var Z=r(x,A);x.scale(A,s.mix({},Z,{nice:!1,min:H,max:F}))}}else{var G=b.field,U=b.values,Y=M.chart,J=Y.get("coord"),rt=r(Y,G),ft=M.limitRange[G],dt=ft.length,ut=M.maxScale,Lt=M.minScale,Ft=dt/ut,Ot=dt/Lt,St=U.length,xt=J.invertPoint(_),At=xt.x,nt=St-g*this.catStep,Mt=parseInt(nt*At),z=nt+Mt;if(g>0&&St>=Ft){var Q=Mt,ht=z;z>St&&(ht=St-1,Q=St-nt);var et=U.slice(Q,ht);Y.scale(G,s.mix({},rt,{values:et}))}else if(g<0&&St<=Ot){var at=ft.indexOf(U[0]),gt=ft.indexOf(U[St-1]),k=Math.max(0,at-Mt),ot=Math.min(gt+z,dt),it=ft.slice(k,ot);Y.scale(G,s.mix({},rt,{values:it}))}}},l.process=function(b){var g=this,m=g.chart,_=g.type,M=m.get("coord"),x=b.deltaY,y=M.invertPoint(b);if(x){g.onZoom&&g.onZoom(x,y,g),x>0?g.onZoomin&&g.onZoomin(x,y,g):g.onZoomout&&g.onZoomout(x,y,g);var S=x/Math.abs(x);if(_.indexOf("X")>-1&&g._applyScale(m.getXScale(),S,y.x,b),_.indexOf("Y")>-1){var P=m.getYScales();P.forEach(function(A){g._applyScale(A,S,y.y,b)})}}m.repaint()},l.reset=function(){var b=this,g=b.view,m=b.originScaleDefsByField,_=g.getYScales(),M=g.getXScale();_.push(M),_.forEach(function(x){if(x.isLinear){var y=x.field;g.scale(y,m[y])}}),g.repaint()},f}(c);E.exports=a},function(E,T,e){var t,u,s=e(0),c=e(131),r="g2-tooltip",h="g2-legend",n=s.deepMix({},c,{background:{fill:"#1F1F1F",radius:2},plotBackground:{fill:"#1F1F1F"},axis:{top:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"}},bottom:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"}},left:{label:{textStyle:{fill:"#A6A6A6"}},grid:{lineStyle:{stroke:"#404040"}}},right:{label:{textStyle:{fill:"#A6A6A6"}},grid:{lineStyle:{stroke:"#404040"}}},circle:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"},grid:{lineStyle:{stroke:"#404040"}}},radius:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"},grid:{lineStyle:{stroke:"#404040"}}},helix:{line:{stroke:"#737373"},tickLine:{stroke:"#737373"}}},label:{textStyle:{fill:"#A6A6A6"}},legend:{right:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},left:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},top:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},bottom:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},html:(t={},t[""+h]={color:"#D9D9D9"},t),gradient:{textStyle:{fill:"#D9D9D9"},lineStyle:{stroke:"#404040"}}},tooltip:(u={},u[""+r]={color:"#D9D9D9",backgroundColor:"rgba(0, 0, 0, 0.5)",boxShadow:"0px 0px 2px #000"},u),tooltipCrosshairsRect:{type:"rect",rectStyle:{fill:"#fff",opacity:.1}},tooltipCrosshairsLine:{lineStyle:{stroke:"rgba(255, 255, 255, 0.45)"}},guide:{line:{text:{style:{fill:"#A6A6A6"}}},text:{style:{fill:"#A6A6A6"}},region:{style:{lineWidth:0,fill:"#000",fillOpacity:.04}}}});E.exports=n},function(E,T,e){var t=e(1),u=e(135),s=e(134),c=e(332),r=e(337),h=function n(i){n.superclass.constructor.call(this,i)};h.CFG={eventEnable:!0,width:null,height:null,widthCanvas:null,heightCanvas:null,widthStyle:null,heightStyle:null,containerDOM:null,canvasDOM:null,pixelRatio:null,renderer:"canvas"},t.extend(h,s),t.augment(h,{init:function(){h.superclass.init.call(this),this._setGlobalParam(),this._setContainer(),this._initPainter(),this._scale(),this.get("eventEnable")&&this._registEvents()},getEmitter:function(i,a){if(i)if(t.isEmpty(i._getEvents())){var o=i.get("parent");if(o&&!a.propagationStopped)return this.getEmitter(o,a)}else return i},_getEventObj:function(i,a,o,l){var f=new u(i,a,!0,!0);return f.x=o.x,f.y=o.y,f.clientX=a.clientX,f.clientY=a.clientY,f.currentTarget=l,f.target=l,f},_triggerEvent:function(i,a){var o=this.getPointByClient(a.clientX,a.clientY),l=this.getShape(o.x,o.y,a),f=this.get("el"),v;if(i==="mousemove"){var b=this.get("preShape");if(b&&b!==l){var g=this._getEventObj("mouseleave",a,o,b);v=this.getEmitter(b,a),v&&v.emit("mouseleave",g),f.style.cursor="default"}if(l){var m=this._getEventObj("mousemove",a,o,l);if(v=this.getEmitter(l,a),v&&v.emit("mousemove",m),b!==l){var _=this._getEventObj("mouseenter",a,o,l);v&&v.emit("mouseenter",_,a)}}else{var M=this._getEventObj("mousemove",a,o,this);this.emit("mousemove",M)}this.set("preShape",l)}else{var x=this._getEventObj(i,a,o,l||this);v=this.getEmitter(l,a),v&&v!==this&&v.emit(i,x),this.emit(i,x)}l&&!l.get("destroyed")&&(f.style.cursor=l.attr("cursor")||"default")},_registEvents:function(){var i=this,a=i.get("el"),o=["mouseout","mouseover","mousemove","mousedown","mouseleave","mouseup","click","dblclick"];t.each(o,function(l){a.addEventListener(l,function(f){i._triggerEvent(l,f)},!1)}),a.addEventListener("touchstart",function(l){t.isEmpty(l.touches)||i._triggerEvent("touchstart",l.touches[0])},!1),a.addEventListener("touchmove",function(l){t.isEmpty(l.touches)||i._triggerEvent("touchmove",l.touches[0])},!1),a.addEventListener("touchend",function(l){t.isEmpty(l.changedTouches)||i._triggerEvent("touchend",l.changedTouches[0])},!1)},_scale:function(){var i=this.get("pixelRatio");this.scale(i,i)},_setGlobalParam:function(){var i=this.get("pixelRatio");i||this.set("pixelRatio",t.getRatio());var a=r[this.get("renderer")||"canvas"];this._cfg.renderer=a,this._cfg.canvas=this;var o=new c(this);this._cfg.timeline=o},_setContainer:function(){var i=this.get("containerId"),a=this.get("containerDOM");a||(a=document.getElementById(i),this.set("containerDOM",a)),t.modifyCSS(a,{position:"relative"})},_initPainter:function(){var i=this.get("containerDOM"),a=new this._cfg.renderer.painter(i);this._cfg.painter=a,this._cfg.canvasDOM=this._cfg.el=a.canvas,this.changeSize(this.get("width"),this.get("height"))},_resize:function(){var i=this.get("canvasDOM"),a=this.get("widthCanvas"),o=this.get("heightCanvas"),l=this.get("widthStyle"),f=this.get("heightStyle");i.style.width=l,i.style.height=f,i.setAttribute("width",a),i.setAttribute("height",o)},getWidth:function(){var i=this.get("pixelRatio"),a=this.get("width");return a*i},getHeight:function(){var i=this.get("pixelRatio"),a=this.get("height");return a*i},changeSize:function(i,a){var o=this.get("pixelRatio"),l=i*o,f=a*o;this.set("widthCanvas",l),this.set("heightCanvas",f),this.set("widthStyle",i+"px"),this.set("heightStyle",a+"px"),this.set("width",i),this.set("height",a),this._resize()},getPointByClient:function(i,a){var o=this.get("el"),l=this.get("pixelRatio")||1,f=o.getBoundingClientRect();return{x:(i-f.left)*l,y:(a-f.top)*l}},getClientByPoint:function(i,a){var o=this.get("el"),l=o.getBoundingClientRect(),f=this.get("pixelRatio")||1;return{clientX:i/f+l.left,clientY:a/f+l.top}},draw:function(){this._cfg.painter.draw(this)},getShape:function(i,a,o){return arguments.length===3&&this._cfg.renderer.getShape?this._cfg.renderer.getShape.call(this,i,a,o):h.superclass.getShape.call(this,i,a)},_drawSync:function(){this._cfg.painter.drawSync(this)},destroy:function(){var i=this._cfg,a=i.containerDOM,o=i.canvasDOM;o&&a&&a.removeChild(o),i.timeline.stop(),h.superclass.destroy.call(this)}}),E.exports=h},function(E,T,e){var t=e(1),u={delay:"delay",rotate:"rotate"},s={fill:"fill",stroke:"stroke",fillStyle:"fillStyle",strokeStyle:"strokeStyle"};function c(n,i){var a={},o=i._attrs;for(var l in n.attrs)a[l]=o[l];return a}function r(n,i){var a={matrix:null,attrs:{}},o=i._attrs;for(var l in n)if(l==="transform")a.matrix=t.transform(i.getMatrix(),n[l]);else if(l==="rotate")a.matrix=t.transform(i.getMatrix(),[["r",n[l]]]);else if(l==="matrix")a.matrix=n[l];else{if(s[l]&&/^[r,R,L,l]{1}[\s]*\(/.test(n[l]))continue;!u[l]&&o[l]!==n[l]&&(a.attrs[l]=n[l])}return a}function h(n,i){var a=i.delay,o=Object.prototype.hasOwnProperty;return t.each(i.toAttrs,function(l,f){t.each(n,function(v){a<v.startTime+v.duration&&o.call(v.toAttrs,f)&&(delete v.toAttrs[f],delete v.fromAttrs[f])})}),i.toMatrix&&t.each(n,function(l){a<l.startTime+l.duration&&l.toMatrix&&delete l.toMatrix}),n}E.exports={animate:function(i,a,o,l,f){f===void 0&&(f=0);var v=this;v.set("animating",!0);var b=v.get("timeline");b||(b=v.get("canvas").get("timeline"),v.setSilent("timeline",b));var g=v.get("animators")||[];b._timer||b.initTimer(),t.isNumber(l)&&(f=l,l=null),t.isFunction(o)?(l=o,o="easeLinear"):o=o||"easeLinear";var m=r(i,v),_={fromAttrs:c(m,v),toAttrs:m.attrs,fromMatrix:t.clone(v.getMatrix()),toMatrix:m.matrix,duration:a,easing:o,callback:l,delay:f,startTime:b.getTime(),id:t.uniqueId()};g.length>0?g=h(g,_):b.addAnimator(v),g.push(_),v.setSilent("animators",g),v.setSilent("pause",{isPaused:!1})},stopAnimate:function(){var i=this,a=this.get("animators");t.each(a,function(o){i.attr(o.toAttrs),o.toMatrix&&i.attr("matrix",o.toMatrix),o.callback&&o.callback()}),this.setSilent("animating",!1),this.setSilent("animators",[])},pauseAnimate:function(){var i=this,a=i.get("timeline");return i.setSilent("pause",{isPaused:!0,pauseTime:a.getTime()}),i},resumeAnimate:function(){var i=this,a=i.get("timeline"),o=a.getTime(),l=i.get("animators"),f=i.get("pause").pauseTime;return t.each(l,function(v){v.startTime=v.startTime+(o-f),v._paused=!1,v._pauseTime=null}),i.setSilent("pause",{isPaused:!1}),i.setSilent("animators",l),i}}},function(E,T,e){var t=e(1);E.exports={canFill:!1,canStroke:!1,initAttrs:function(s){return this._attrs={opacity:1,fillOpacity:1,strokeOpacity:1,matrix:[1,0,0,0,1,0,0,0,1]},this.attr(t.assign(this.getDefaultAttrs(),s)),this},getDefaultAttrs:function(){return{}},attr:function(s,c){var r=this;if(arguments.length===0)return r._attrs;if(t.isObject(s)){for(var h in s)this._setAttr(h,s[h]);return r.clearBBox(),this._cfg.hasUpdate=!0,r}return arguments.length===2?(this._setAttr(s,c),r.clearBBox(),this._cfg.hasUpdate=!0,r):r._attrs[s]},_setAttr:function(s,c){var r=this,h=this._attrs;if(h[s]=c,s==="fill"||s==="stroke"){h[s+"Style"]=c;return}if(s==="opacity"){h.globalAlpha=c;return}if(s==="clip"&&c){r._setClip(c);return}if(s==="path"&&r._afterSetAttrPath){r._afterSetAttrPath(c);return}if(s==="transform"){r.transform(c);return}s==="rotate"&&r.rotateAtStart(c)},clearBBox:function(){this.setSilent("box",null)},hasFill:function(){return this.canFill&&this._attrs.fillStyle},hasStroke:function(){return this.canStroke&&this._attrs.strokeStyle},_setClip:function(s){s._cfg.renderer=this._cfg.renderer,s._cfg.canvas=this._cfg.canvas,s._cfg.parent=this._cfg.parent,s.hasFill=function(){return!0}}}},function(E,T,e){var t=e(1),u=e(76),s={arc:e(47),ellipse:e(143),line:e(48)},c=t.createDom('<canvas width="500" height="500"></canvas>'),r=c.getContext("2d");function h(S,P,A){return A.createPath(r),r.isPointInPath(S,P)}var n=function(P,A){var O=this._attrs,L=O.x,H=O.y,F=O.r,Z=O.startAngle,G=O.endAngle,U=O.clockwise,Y=this.getHitLineWidth();return this.hasStroke()?u.arcline(L,H,F,Z,G,U,Y,P,A):!1},i=function(P,A){var O=this._attrs,L=O.x,H=O.y,F=O.r,Z=this.getHitLineWidth(),G=this.hasFill(),U=this.hasStroke();return G&&U?u.circle(L,H,F,P,A)||u.arcline(L,H,F,0,Math.PI*2,!1,Z,P,A):G?u.circle(L,H,F,P,A):U?u.arcline(L,H,F,0,Math.PI*2,!1,Z,P,A):!1},a=function(P,A){var O=this._attrs,L=this.hasFill(),H=this.hasStroke(),F=O.x,Z=O.y,G=O.rx,U=O.ry,Y=this.getHitLineWidth(),J=G>U?G:U,rt=G>U?1:G/U,ft=G>U?U/G:1,dt=[P,A,1],ut=[1,0,0,0,1,0,0,0,1];t.mat3.scale(ut,ut,[rt,ft]),t.mat3.translate(ut,ut,[F,Z]);var Lt=t.mat3.invert([],ut);return t.vec3.transformMat3(dt,dt,Lt),L&&H?u.circle(0,0,J,dt[0],dt[1])||u.arcline(0,0,J,0,Math.PI*2,!1,Y,dt[0],dt[1]):L?u.circle(0,0,J,dt[0],dt[1]):H?u.arcline(0,0,J,0,Math.PI*2,!1,Y,dt[0],dt[1]):!1},o=function(P,A){var O=this,L=O.hasFill(),H=O.hasStroke(),F=O._attrs,Z=F.x,G=F.y,U=F.rs,Y=F.re,J=F.startAngle,rt=F.endAngle,ft=F.clockwise,dt=[1,0],ut=[P-Z,A-G],Lt=t.vec2.angleTo(dt,ut);function Ft(){var St=s.arc.nearAngle(Lt,J,rt,ft);if(t.isNumberEqual(Lt,St)){var xt=t.vec2.squaredLength(ut);if(U*U<=xt&&xt<=Y*Y)return!0}return!1}function Ot(){var St=O.getHitLineWidth(),xt={x:Math.cos(J)*U+Z,y:Math.sin(J)*U+G},At={x:Math.cos(J)*Y+Z,y:Math.sin(J)*Y+G},nt={x:Math.cos(rt)*U+Z,y:Math.sin(rt)*U+G},Mt={x:Math.cos(rt)*Y+Z,y:Math.sin(rt)*Y+G};return!!(u.line(xt.x,xt.y,At.x,At.y,St,P,A)||u.line(nt.x,nt.y,Mt.x,Mt.y,St,P,A)||u.arcline(Z,G,U,J,rt,ft,St,P,A)||u.arcline(Z,G,Y,J,rt,ft,St,P,A))}return L&&H?Ft()||Ot():L?Ft():H?Ot():!1},l=function(P,A){var O=this._attrs;if(this.get("toDraw")||!O.img)return!1;(!this._cfg.attrs||this._cfg.attrs.img!==O.img)&&this._setAttrImg();var L=O.x,H=O.y,F=O.width,Z=O.height;return u.rect(L,H,F,Z,P,A)},f=function(P,A){var O=this._attrs,L=O.x1,H=O.y1,F=O.x2,Z=O.y2,G=this.getHitLineWidth();return this.hasStroke()?u.line(L,H,F,Z,G,P,A):!1},v=function(P,A){var O=this,L=O.get("segments"),H=O.hasFill(),F=O.hasStroke();function Z(){if(!t.isEmpty(L)){for(var G=O.getHitLineWidth(),U=0,Y=L.length;U<Y;U++)if(L[U].isInside(P,A,G))return!0;return!1}}return H&&F?h(P,A,O)||Z():H?h(P,A,O):F?Z():!1},b=function(P,A){var O=this,L=O.hasFill(),H=O.hasStroke();function F(){var Z=O._attrs,G=Z.points;if(G.length<2)return!1;var U=O.getHitLineWidth(),Y=G.slice(0);return G.length>=3&&Y.push(G[0]),u.polyline(Y,U,P,A)}return L&&H?h(P,A,O)||F():L?h(P,A,O):H?F():!1},g=function(P,A){var O=this._attrs,L=O.x,H=O.y,F=O.radius||O.r,Z=this.getHitLineWidth();return u.circle(L,H,F+Z/2,P,A)},m=function(P,A){var O=this,L=O._attrs;if(O.hasStroke()){var H=L.points;if(H.length<2)return!1;var F=L.lineWidth;return u.polyline(H,F,P,A)}return!1},_=function(P,A){var O=this,L=O.hasFill(),H=O.hasStroke();function F(){var Z=O._attrs,G=Z.x,U=Z.y,Y=Z.width,J=Z.height,rt=Z.radius,ft=O.getHitLineWidth();if(rt===0){var dt=ft/2;return u.line(G-dt,U,G+Y+dt,U,ft,P,A)||u.line(G+Y,U-dt,G+Y,U+J+dt,ft,P,A)||u.line(G+Y+dt,U+J,G-dt,U+J,ft,P,A)||u.line(G,U+J+dt,G,U-dt,ft,P,A)}return u.line(G+rt,U,G+Y-rt,U,ft,P,A)||u.line(G+Y,U+rt,G+Y,U+J-rt,ft,P,A)||u.line(G+Y-rt,U+J,G+rt,U+J,ft,P,A)||u.line(G,U+J-rt,G,U+rt,ft,P,A)||u.arcline(G+Y-rt,U+rt,rt,1.5*Math.PI,2*Math.PI,!1,ft,P,A)||u.arcline(G+Y-rt,U+J-rt,rt,0,.5*Math.PI,!1,ft,P,A)||u.arcline(G+rt,U+J-rt,rt,.5*Math.PI,Math.PI,!1,ft,P,A)||u.arcline(G+rt,U+rt,rt,Math.PI,1.5*Math.PI,!1,ft,P,A)}return L&&H?h(P,A,O)||F():L?h(P,A,O):H?F():!1},M=function(P,A){var O=this,L=O.getBBox();if(O.hasFill()||O.hasStroke())return u.box(L.minX,L.maxX,L.minY,L.maxY,P,A)},x=function(P,A){if(!this._cfg.el)return!1;var O=this._cfg.el.getBBox();return u.box(O.x,O.x+O.width,O.y,O.y+O.height,P,A)},y={arc:n,circle:i,dom:x,ellipse:a,fan:o,image:l,line:f,path:v,marker:g,polygon:b,polyline:m,rect:_,text:M};E.exports={isPointInPath:function(P,A){var O=y[this.type];return O?O.call(this,P,A):!1}}},function(E,T,e){var t=e(1),u=e(77),s=e(103),c=e(199),r=e(453),h=r.interpolate,n=r.interpolateArray,i=function(f){this._animators=[],this._current=0,this._timer=null,this.canvas=f};function a(l,f,v){var b={},g=f.toAttrs,m=f.fromAttrs,_=f.toMatrix;if(!l.get("destroyed")){var M;for(var x in g)if(!t.isEqual(m[x],g[x]))if(x==="path"){var y=g[x],S=m[x];y.length>S.length?(y=u.parsePathString(g[x]),S=u.parsePathString(m[x]),S=u.fillPathByDiff(S,y),S=u.formatPath(S,y),f.fromAttrs.path=S,f.toAttrs.path=y):f.pathFormatted||(y=u.parsePathString(g[x]),S=u.parsePathString(m[x]),S=u.formatPath(S,y),f.fromAttrs.path=S,f.toAttrs.path=y,f.pathFormatted=!0),b[x]=[];for(var P=0;P<y.length;P++){for(var A=y[P],O=S[P],L=[],H=0;H<A.length;H++)t.isNumber(A[H])&&O&&t.isNumber(O[H])?(M=h(O[H],A[H]),L.push(M(v))):L.push(A[H]);b[x].push(L)}}else M=h(m[x],g[x]),b[x]=M(v);if(_){var F=n(f.fromMatrix,_),Z=F(v);l.setMatrix(Z)}l.attr(b)}}function o(l,f,v){var b=f.startTime;if(v<b+f.delay||f.isPaused)return!1;var g,m=f.duration,_=f.easing;if(v=v-b-f.delay,f.toAttrs.repeat)g=v%m/m,g=c[_](g);else if(g=v/m,g<1)g=c[_](g);else return l.attr(f.toAttrs),f.toMatrix&&l.setMatrix(f.toMatrix),!0;return a(l,f,g),!1}t.augment(i,{initTimer:function(){var f=this,v=this,b=!1,g,m,_;v._timer=s.timer(function(M){if(v._current=M,f._animators.length>0){for(var x=f._animators.length-1;x>=0;x--){if(g=f._animators[x],g.get("destroyed")){v.removeAnimator(x);continue}if(!g.get("pause").isPaused){m=g.get("animators");for(var y=m.length-1;y>=0;y--)_=m[y],b=o(g,_,M),b&&(m.splice(y,1),b=!1,_.callback&&_.callback())}m.length===0&&v.removeAnimator(x)}f.canvas.draw()}})},addAnimator:function(f){this._animators.push(f)},removeAnimator:function(f){this._animators.splice(f,1)},isAnimating:function(){return!!this._animators.length},stop:function(){this._timer&&this._timer.stop()},stopAllAnimations:function(){this._animators.forEach(function(f){f.stopAnimate()}),this._animators=[],this.canvas.draw()},getTime:function(){return this._current}}),E.exports=i},function(E,T,e){var t=e(1);function u(r){return r[0]===1&&r[1]===0&&r[3]===0&&r[4]===1&&r[6]===0&&r[7]===0}function s(r){return r[1]===0&&r[3]===0&&r[6]===0&&r[7]===0}function c(r,h){u(h)||(s(h)?(r[0]*=h[0],r[4]*=h[4]):t.mat3.multiply(r,r,h))}E.exports={initTransform:function(){},resetMatrix:function(){this.attr("matrix",[1,0,0,0,1,0,0,0,1])},translate:function(h,n){var i=this._attrs.matrix;return t.mat3.translate(i,i,[h,n]),this.clearTotalMatrix(),this.attr("matrix",i),this},rotate:function(h){var n=this._attrs.matrix;return t.mat3.rotate(n,n,h),this.clearTotalMatrix(),this.attr("matrix",n),this},scale:function(h,n){var i=this._attrs.matrix;return t.mat3.scale(i,i,[h,n]),this.clearTotalMatrix(),this.attr("matrix",i),this},rotateAtStart:function(h){var n=this._attrs.x||this._cfg.attrs.x,i=this._attrs.y||this._cfg.attrs.y;return Math.abs(h)>Math.PI*2&&(h=h/180*Math.PI),this.transform([["t",-n,-i],["r",h],["t",n,i]])},move:function(h,n){var i=this.get("x")||0,a=this.get("y")||0;return this.translate(h-i,n-a),this.set("x",h),this.set("y",n),this},transform:function(h){var n=this,i=this._attrs.matrix;return t.each(h,function(a){switch(a[0]){case"t":n.translate(a[1],a[2]);break;case"s":n.scale(a[1],a[2]);break;case"r":n.rotate(a[1]);break;case"m":n.attr("matrix",t.mat3.multiply([],i,a[1])),n.clearTotalMatrix();break;default:break}}),n},setTransform:function(h){return this.attr("matrix",[1,0,0,0,1,0,0,0,1]),this.transform(h)},getMatrix:function(){return this.attr("matrix")},setMatrix:function(h){return this.attr("matrix",h),this.clearTotalMatrix(),this},apply:function(h,n){var i;return n?i=this._getMatrixByRoot(n):i=this.attr("matrix"),t.vec3.transformMat3(h,h,i),this},_getMatrixByRoot:function(h){var n=this;h=h||n;for(var i=n,a=[];i!==h;)a.unshift(i),i=i.get("parent");a.unshift(i);var o=[1,0,0,0,1,0,0,0,1];return t.each(a,function(l){t.mat3.multiply(o,l.attr("matrix"),o)}),o},getTotalMatrix:function(){var h=this._cfg.totalMatrix;if(!h){h=[1,0,0,0,1,0,0,0,1];var n=this._cfg.parent;if(n){var i=n.getTotalMatrix();c(h,i)}c(h,this.attr("matrix")),this._cfg.totalMatrix=h}return h},clearTotalMatrix:function(){},invert:function(h){var n=this.getTotalMatrix();if(s(n))h[0]/=n[0],h[1]/=n[4];else{var i=t.mat3.invert([],n);i&&t.vec3.transformMat3(h,h,i)}return this},resetTransform:function(h){var n=this.attr("matrix");u(n)||h.transform(n[0],n[1],n[3],n[4],n[6],n[7])}}},function(E,T,e){E.exports={painter:e(335)}},function(E,T,e){var t=e(1),u=e(336),s=["fillStyle","font","globalAlpha","lineCap","lineWidth","lineJoin","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","lineDash","lineDashOffset"],c=function(){function r(n){if(!n)return null;var i=t.uniqueId("canvas_"),a=t.createDom('<canvas id="'+i+'"></canvas>');return n.appendChild(a),this.type="canvas",this.canvas=a,this.context=a.getContext("2d"),this.toDraw=!1,this}var h=r.prototype;return h.beforeDraw=function(){var i=this.canvas;this.context&&this.context.clearRect(0,0,i.width,i.height)},h.draw=function(i){var a=this;function o(){a.animateHandler=t.requestAnimationFrame(function(){a.animateHandler=void 0,a.toDraw&&o()}),a.beforeDraw();try{a._drawGroup(i)}catch(l){console.warn("error in draw canvas, detail as:"),console.warn(l),a.toDraw=!1}a.toDraw=!1}a.animateHandler?a.toDraw=!0:o()},h.drawSync=function(i){this.beforeDraw(),this._drawGroup(i)},h._drawGroup=function(i){if(!(i._cfg.removed||i._cfg.destroyed||!i._cfg.visible)){var a=this,o=i._cfg.children,l=null;this.setContext(i);for(var f=0;f<o.length;f++)l=o[f],o[f].isGroup?a._drawGroup(l):a._drawShape(l);this.restoreContext(i)}},h._drawShape=function(i){i._cfg.removed||i._cfg.destroyed||!i._cfg.visible||(this.setContext(i),i.drawInner(this.context),this.restoreContext(i),i._cfg.attrs=i._attrs,i._cfg.hasUpdate=!1)},h.setContext=function(i){var a=this.context,o=i._attrs.clip;a.save(),o&&(o.resetTransform(a),o.createPath(a),a.clip()),this.resetContext(i),i.resetTransform(a)},h.restoreContext=function(){this.context.restore()},h.resetContext=function(i){var a=this.context,o=i._attrs;if(!i.isGroup){for(var l in o)if(s.indexOf(l)>-1){var f=o[l];l==="fillStyle"&&(f=u.parseStyle(f,i,a)),l==="strokeStyle"&&(f=u.parseStyle(f,i,a)),l==="lineDash"&&a.setLineDash?t.isArray(f)?a.setLineDash(f):t.isString(f)&&a.setLineDash(f.split(" ")):a[l]=f}}},r}();E.exports=c},function(E,T,e){var t=e(1),u=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,s=/[^\s\,]+/ig,c=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,r=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,h=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,n=/[\d.]+:(#[^\s]+|[^\)]+\))/ig,i={};function a(v,b){var g=v.match(n);t.each(g,function(m){m=m.split(":"),b.addColorStop(m[0],m[1])})}function o(v,b,g){var m=c.exec(v),_=t.mod(t.toRadian(parseFloat(m[1])),Math.PI*2),M=m[2],x=b.getBBox(),y,S;_>=0&&_<.5*Math.PI?(y={x:x.minX,y:x.minY},S={x:x.maxX,y:x.maxY}):.5*Math.PI<=_&&_<Math.PI?(y={x:x.maxX,y:x.minY},S={x:x.minX,y:x.maxY}):Math.PI<=_&&_<1.5*Math.PI?(y={x:x.maxX,y:x.maxY},S={x:x.minX,y:x.minY}):(y={x:x.minX,y:x.maxY},S={x:x.maxX,y:x.minY});var P=Math.tan(_),A=P*P,O=(S.x-y.x+P*(S.y-y.y))/(A+1)+y.x,L=P*(S.x-y.x+P*(S.y-y.y))/(A+1)+y.y,H=g.createLinearGradient(y.x,y.y,O,L);return a(M,H),H}function l(v,b,g){var m=r.exec(v),_=parseFloat(m[1]),M=parseFloat(m[2]),x=parseFloat(m[3]),y=m[4];if(x===0){var S=y.match(n);return S[S.length-1].split(":")[1]}var P=b.getBBox(),A=P.maxX-P.minX,O=P.maxY-P.minY,L=Math.sqrt(A*A+O*O)/2,H=g.createRadialGradient(P.minX+A*_,P.minY+O*M,x*L,P.minX+A/2,P.minY+O/2,L);return a(y,H),H}function f(v,b,g){if(b.get("patternSource")&&b.get("patternSource")===v)return b.get("pattern");var m,_,M=h.exec(v),x=M[1],y=M[2];function S(){m=g.createPattern(_,x),b.setSilent("pattern",m),b.setSilent("patternSource",v)}switch(x){case"a":x="repeat";break;case"x":x="repeat-x";break;case"y":x="repeat-y";break;case"n":x="no-repeat";break;default:x="no-repeat"}return _=new Image,y.match(/^data:/i)||(_.crossOrigin="Anonymous"),_.src=y,_.complete?S():(_.onload=S,_.src=_.src),m}E.exports={parsePath:function(b){if(b=b||[],t.isArray(b))return b;if(t.isString(b))return b=b.match(u),t.each(b,function(g,m){if(g=g.match(s),g[0].length>1){var _=g[0].charAt(0);g.splice(1,0,g[0].substr(1)),g[0]=_}t.each(g,function(M,x){isNaN(M)||(g[x]=+M)}),b[m]=g}),b},parseStyle:function(b,g,m){if(t.isString(b)){if(b[1]==="("||b[2]==="("){if(b[0]==="l")return o(b,g,m);if(b[0]==="r")return l(b,g,m);if(b[0]==="p")return f(b,g,m)}return b}},numberToColor:function(b){var g=i[b];if(!g){for(var m=b.toString(16),_=m.length;_<6;_++)m="0"+m;g="#"+m,i[b]=g}return g}}},function(E,T,e){E.exports={canvas:e(334),svg:e(345)}},function(E,T,e){var t=e(1),u=e(341),s=e(343),c=e(339),r=e(340),h=e(342),n=function(){function i(o){var l=document.createElementNS("http://www.w3.org/2000/svg","defs"),f=t.uniqueId("defs_");l.id=f,o.appendChild(l),this.children=[],this.defaultArrow={},this.el=l,this.canvas=o}var a=i.prototype;return a.find=function(l,f){for(var v=this.children,b=null,g=0;g<v.length;g++)if(v[g].match(l,f)){b=v[g].id;break}return b},a.findById=function(l){for(var f=this.children,v=null,b=0;b<f.length;b++)if(f[b].id===l){v=f[b];break}return v},a.add=function(l){this.children.push(l),l.canvas=this.canvas,l.parent=this},a.getDefaultArrow=function(l,f){var v=l.stroke||l.strokeStyle;if(this.defaultArrow[v])return this.defaultArrow[v].id;var b=new c(l,f);return this.defaultArrow[v]=b,this.el.appendChild(b.el),b.id},a.addGradient=function(l){var f=new u(l);return this.el.appendChild(f.el),this.add(f),f.id},a.addArrow=function(l,f){var v=new c(l,f);return this.el.appendChild(v.el),v.id},a.addShadow=function(l){var f=new s(l);return this.el.appendChild(f.el),this.add(f),f.id},a.addPattern=function(l){var f=new h(l);return this.el.appendChild(f.el),this.add(f),f.id},a.addClip=function(l){var f=new r(l);return this.el.appendChild(f.el),this.add(f),f.id},i}();E.exports=n},function(E,T,e){var t=e(1),u=function(){function s(r,h){var n=document.createElementNS("http://www.w3.org/2000/svg","marker"),i=t.uniqueId("marker_");n.setAttribute("id",i);var a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("stroke","none"),a.setAttribute("fill",r.stroke||"#000"),n.appendChild(a),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=a,this.id=i,this.cfg=r[h==="marker-start"?"startArrow":"endArrow"],this.stroke=r.stroke||"#000",this.cfg===!0?this._setDefaultPath(h,a):this._setMarker(r.lineWidth,a),this}var c=s.prototype;return c.match=function(){return!1},c._setDefaultPath=function(h,n){var i=this.el;n.setAttribute("d","M0,0 L6,3 L0,6 L3,3Z"),i.setAttribute("refX",3),i.setAttribute("refY",3)},c._setMarker=function(h,n){var i=this.el,a=this.cfg.path,o=this.cfg.d;t.isArray(a)&&(a=a.map(function(l){return l.join(" ")}).join("")),n.setAttribute("d",a),i.appendChild(n),o&&i.setAttribute("refX",o/h)},c.update=function(h){var n=this.child;n.attr?n.attr("fill",h):n.setAttribute("fill",h)},s}();E.exports=u},function(E,T,e){var t=e(1),u=function(){function s(r){this.type="clip";var h=document.createElementNS("http://www.w3.org/2000/svg","clipPath");this.el=h,this.id=t.uniqueId("clip_"),h.id=this.id;var n=r._cfg.el;return h.appendChild(n.cloneNode(!0)),this.cfg=r,this}var c=s.prototype;return c.match=function(){return!1},c.remove=function(){var h=this.el;h.parentNode.removeChild(h)},s}();E.exports=u},function(E,T,e){var t=e(1),u=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,s=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,c=/[\d.]+:(#[^\s]+|[^\)]+\))/ig;function r(a){var o=a.match(c);if(!o)return"";var l="";return o.sort(function(f,v){return f=f.split(":"),v=v.split(":"),Number(f[0])-Number(v[0])}),t.each(o,function(f){f=f.split(":"),l+='<stop offset="'+f[0]+'" stop-color="'+f[1]+'"></stop>'}),l}function h(a,o){var l=u.exec(a),f=t.mod(t.toRadian(parseFloat(l[1])),Math.PI*2),v=l[2],b,g;f>=0&&f<.5*Math.PI?(b={x:0,y:0},g={x:1,y:1}):.5*Math.PI<=f&&f<Math.PI?(b={x:1,y:0},g={x:0,y:1}):Math.PI<=f&&f<1.5*Math.PI?(b={x:1,y:1},g={x:0,y:0}):(b={x:0,y:1},g={x:1,y:0});var m=Math.tan(f),_=m*m,M=(g.x-b.x+m*(g.y-b.y))/(_+1)+b.x,x=m*(g.x-b.x+m*(g.y-b.y))/(_+1)+b.y;o.setAttribute("x1",b.x),o.setAttribute("y1",b.y),o.setAttribute("x2",M),o.setAttribute("y2",x),o.innerHTML=r(v)}function n(a,o){var l=s.exec(a),f=parseFloat(l[1]),v=parseFloat(l[2]),b=parseFloat(l[3]),g=l[4];o.setAttribute("cx",f),o.setAttribute("cy",v),o.setAttribute("r",b),o.innerHTML=r(g)}var i=function(){function a(l){var f=null,v=t.uniqueId("gradient_");return l.toLowerCase()[0]==="l"?(f=document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),h(l,f)):(f=document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),n(l,f)),f.setAttribute("id",v),this.el=f,this.id=v,this.cfg=l,this}var o=a.prototype;return o.match=function(f,v){return this.cfg===v},a}();E.exports=i},function(E,T,e){var t=e(1),u=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,s=function(){function c(h){var n=document.createElementNS("http://www.w3.org/2000/svg","pattern");n.setAttribute("patternUnits","userSpaceOnUse");var i=document.createElementNS("http://www.w3.org/2000/svg","image");n.appendChild(i);var a=t.uniqueId("pattern_");n.id=a,this.el=n,this.id=a,this.cfg=h;var o=u.exec(h),l=o[2];i.setAttribute("href",l);var f=new Image;l.match(/^data:/i)||(f.crossOrigin="Anonymous"),f.src=l;function v(){console.log(f.width,f.height),n.setAttribute("width",f.width),n.setAttribute("height",f.height)}return f.complete?v():(f.onload=v,f.src=f.src),this}var r=c.prototype;return r.match=function(n,i){return this.cfg===i},c}();E.exports=s},function(E,T,e){var t=e(1),u={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},s={x:"-40%",y:"-40%",width:"200%",height:"200%"},c=function(){function r(n){this.type="filter";var i=document.createElementNS("http://www.w3.org/2000/svg","filter");return t.each(s,function(a,o){i.setAttribute(o,a)}),this.el=i,this.id=t.uniqueId("filter_"),this.el.id=this.id,this.cfg=n,this._parseShadow(n,i),this}var h=r.prototype;return h.match=function(i,a){if(this.type!==i)return!1;var o=!0,l=this.cfg;return t.each(Object.keys(l),function(f){if(l[f]!==a[f])return o=!1,!1}),o},h.update=function(i,a){var o=this.cfg;return o[u[i]]=a,this._parseShadow(o,this.el),this},h._parseShadow=function(i,a){var o=`<feDropShadow 
      dx="`+(i.dx||0)+`" 
      dy="`+(i.dy||0)+`" 
      stdDeviation="`+(i.blur?i.blur/10:0)+`"
      flood-color="`+(i.color?i.color:"#000")+`"
      flood-opacity="`+(i.opacity?i.opacity:1)+`"
      />`;a.innerHTML=o},r}();E.exports=c},function(E,T){var e={svg:"svg",circle:"circle",rect:"rect",text:"text",path:"path",foreignObject:"foreignObject",polygon:"polygon",ellipse:"ellipse",image:"image"};E.exports=function(u,s,c){var r=c.target||c.srcElement;if(!e[r.tagName]){for(var h=r.parentNode;h&&!e[h.tagName];)h=h.parentNode;r=h}return this._cfg.el===r?this:this.find(function(n){return n._cfg&&n._cfg.el===r})}},function(E,T,e){E.exports={painter:e(346),getShape:e(344)}},function(E,T,e){var t=e(1),u=e(37),s=u.parseRadius,c=e(74),r=e(338),h={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject",fan:"path",group:"g"},n=.3,i={opacity:"opacity",fillStyle:"fill",strokeOpacity:"stroke-opacity",fillOpacity:"fill-opacity",strokeStyle:"stroke",x:"x",y:"y",r:"r",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},a={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},o={left:"left",start:"left",center:"middle",right:"end",end:"end"},l=function(){function f(b){if(!b)return null;var g=t.uniqueId("canvas_"),m=t.createDom('<svg id="'+g+'"></svg>');return b.appendChild(m),this.type="svg",this.canvas=m,this.context=new r(m),this.toDraw=!1,this}var v=f.prototype;return v.draw=function(g){var m=this;function _(){m.animateHandler=t.requestAnimationFrame(function(){m.animateHandler=void 0,m.toDraw&&_()});try{g.resetMatrix(),m._drawGroup(g,!1)}catch(M){console.warn("error in draw canvas, detail as:"),console.warn(M),m.toDraw=!1}m.toDraw=!1}m.animateHandler?m.toDraw=!0:_()},v.drawSync=function(g){this._drawChildren(g,!1)},v._drawGroup=function(g,m){var _=g._cfg;_.removed||_.destroyed||(!_.el&&_.attrs&&(m=!0),_.tobeRemoved&&(t.each(_.tobeRemoved,function(M){M.parentNode&&M.parentNode.removeChild(M)}),_.tobeRemoved=[]),this._drawShape(g,m),_.children&&_.children.length>0&&this._drawChildren(g,m))},v._drawChildren=function(g,m){var _=this,M=g._cfg.children,x;if(!!M){if(g._cfg.el&&!m){var y=g._cfg.el.childNodes.length+1;y!==0&&y!==M.length&&(m=!0)}for(var S=0;S<M.length;S++)x=M[S],x.isGroup?_._drawGroup(x,m):_._drawShape(x,m)}},v._drawShape=function(g,m){var _=this,M=g._attrs,x=g._cfg,y=x.el;if(x.removed||x.destroyed){y&&y.parentNode.removeChild(x.el);return}if(m&&y&&(y.parentNode&&y.parentNode.removeChild(y),y=null),!y&&x.parent&&(_._createDom(g),_._updateShape(g)),y=x.el,x.visible===!1){y.setAttribute("visibility","hidden");return}x.visible&&y.hasAttribute("visibility")&&y.removeAttribute("visibility"),x.hasUpdate&&_._updateShape(g),M.clip&&M.clip._cfg.hasUpdate&&_._updateShape(M.clip)},v._updateShape=function(g){var m=this,_=g._attrs,M=g._cfg.attrs;if(!!M){if(g._cfg.el||m._createDom(g),"clip"in _&&this._setClip(g,_.clip),("shadowOffsetX"in _||"shadowOffsetY"in _||"shadowBlur"in _||"shadowColor"in _)&&this._setShadow(g),g.type==="text"){m._updateText(g);return}g.type==="fan"&&m._updateFan(g),g.type==="marker"&&g._cfg.el.setAttribute("d",m._assembleMarker(_)),g.type==="rect"&&g._cfg.el.setAttribute("d",m._assembleRect(_));for(var x in _)_[x]!==M[x]&&m._setAttribute(g,x,_[x]);g._cfg.attrs=t.deepMix({},g._attrs),g._cfg.hasUpdate=!1}},v._setAttribute=function(g,m,_){var M=g.type,x=g._attrs,y=g._cfg.el,S=this.context;if(!((M==="marker"||M==="rect")&&~["x","y","radius","r"].indexOf(m))){if(~["circle","ellipse"].indexOf(M)&&~["x","y"].indexOf(m)){y.setAttribute("c"+m,parseInt(_,10));return}if(M==="polygon"&&m==="points"){(!_||_.length===0)&&(_=""),t.isArray(_)&&(_=_.map(function(A){return A[0]+","+A[1]}),_=_.join(" ")),y.setAttribute("points",_);return}if(m==="path"&&t.isArray(_)){y.setAttribute("d",this._formatPath(_));return}if(m==="img"){this._setImage(g,_);return}if(m==="transform"){if(!_){y.removeAttribute("transform");return}this._setTransform(g);return}if(m==="rotate"){if(!_){y.removeAttribute("transform");return}this._setTransform(g);return}if(m==="matrix"){this._setTransform(g);return}if(m==="fillStyle"||m==="strokeStyle"){this._setColor(g,m,_);return}if(m!=="clip"){if(~m.indexOf("Arrow")){if(m=i[m],!_)g._cfg[m]=null,y.removeAttribute(m);else{var P=null;typeof _=="boolean"?P=S.getDefaultArrow(x,m):P=S.addArrow(x,m),y.setAttribute(m,"url(#"+P+")"),g._cfg[m]=P}return}m==="html"&&(typeof _=="string"?y.innerHTML=_:(y.innerHTML="",y.appendChild(_))),i[m]&&y.setAttribute(i[m],_)}}},v._createDom=function(g){var m=h[g.type],_=g._attrs;if(!m)throw new Error("the type"+g.type+"is not supported by svg");var M=document.createElementNS("http://www.w3.org/2000/svg",m);return g._cfg.el=M,g._cfg.parent&&g._cfg.parent.get("el").appendChild(M),g._cfg.attrs={},g.type==="text"?(M.setAttribute("paint-order","stroke"),M.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")):(!_.stroke&&!_.strokeStyle&&M.setAttribute("stroke","none"),!_.fill&&!_.fillStyle&&M.setAttribute("fill","none")),M},v._assembleMarker=function(g){var m=g.r;if(typeof g.r=="undefined"&&(m=g.radius),isNaN(Number(g.x))||isNaN(Number(g.y))||isNaN(Number(m)))return"";var _="";return typeof g.symbol=="function"?_=g.symbol(g.x,g.y,m):_=c.Symbols[g.symbol||"circle"](g.x,g.y,m),t.isArray(_)&&(_=_.map(function(M){return M.join(" ")}).join("")),_},v._assembleRect=function(g){var m=g.x,_=g.y,M=g.width,x=g.height,y=g.radius;if(!y)return"M "+m+","+_+" l "+M+",0 l 0,"+x+" l"+-M+" 0 z";var S=s(y);t.isArray(y)?y.length===1?S.r1=S.r2=S.r3=S.r4=y[0]:y.length===2?(S.r1=S.r3=y[0],S.r2=S.r4=y[1]):y.length===3?(S.r1=y[0],S.r2=S.r4=y[1],S.r3=y[2]):(S.r1=y[0],S.r2=y[1],S.r3=y[2],S.r4=y[3]):S.r1=S.r2=S.r3=S.r4=y;var P=[["M "+(m+S.r1)+","+_],["l "+(M-S.r1-S.r2)+",0"],["a "+S.r2+","+S.r2+",0,0,1,"+S.r2+","+S.r2],["l 0,"+(x-S.r2-S.r3)],["a "+S.r3+","+S.r3+",0,0,1,"+-S.r3+","+S.r3],["l "+(S.r3+S.r4-M)+",0"],["a "+S.r4+","+S.r4+",0,0,1,"+-S.r4+","+-S.r4],["l 0,"+(S.r4+S.r1-x)],["a "+S.r1+","+S.r1+",0,0,1,"+S.r1+","+-S.r1],["z"]];return P.join(" ")},v._formatPath=function(g){return g=g.map(function(m){return m.join(" ")}).join(""),~g.indexOf("NaN")?"":g},v._setTransform=function(g){for(var m=g._attrs.matrix,_=g._cfg.el,M=[],x=0;x<9;x+=3)M.push(m[x]+","+m[x+1]);M=M.join(","),M.indexOf("NaN")===-1?_.setAttribute("transform","matrix("+M+")"):console.warn("invalid matrix:",m)},v._setImage=function(g,m){var _=g._attrs,M=g._cfg.el;if(t.isString(m))M.setAttribute("href",m);else if(m instanceof Image)_.width||(M.setAttribute("width",m.width),g._attrs.width=m.width),_.height||(M.setAttribute("height",m.height),g._attrs.height=m.height),M.setAttribute("href",m.src);else if(m instanceof HTMLElement&&t.isString(m.nodeName)&&m.nodeName.toUpperCase()==="CANVAS")M.setAttribute("href",m.toDataURL());else if(m instanceof ImageData){var x=document.createElement("canvas");x.setAttribute("width",m.width),x.setAttribute("height",m.height),x.getContext("2d").putImageData(m,0,0),_.width||(M.setAttribute("width",m.width),g._attrs.width=m.width),_.height||(M.setAttribute("height",m.height),g._attrs.height=m.height),M.setAttribute("href",x.toDataURL())}},v._updateFan=function(g){function m(Y,J,rt){return{x:J*Math.cos(Y)+rt.x,y:J*Math.sin(Y)+rt.y}}var _=g._attrs,M=g._cfg,x={x:_.x,y:_.y},y=[],S=_.startAngle,P=_.endAngle;t.isNumberEqual(P-S,Math.PI*2)&&(P-=1e-5);var A=m(S,_.re,x),O=m(P,_.re,x),L=P>S?1:0,H=Math.abs(P-S)>Math.PI?1:0,F=_.rs,Z=_.re,G=m(S,_.rs,x),U=m(P,_.rs,x);_.rs>0?(y.push("M "+O.x+","+O.y),y.push("L "+U.x+","+U.y),y.push("A "+F+","+F+",0,"+H+","+(L===1?0:1)+","+G.x+","+G.y),y.push("L "+A.x+" "+A.y)):(y.push("M "+x.x+","+x.y),y.push("L "+A.x+","+A.y)),y.push("A "+Z+","+Z+",0,"+H+","+L+","+O.x+","+O.y),_.rs>0?y.push("L "+U.x+","+U.y):y.push("Z"),M.el.setAttribute("d",y.join(" "))},v._updateText=function(g){var m=this,_=g._attrs,M=g._cfg.attrs,x=g._cfg.el;this._setFont(g);for(var y in _)if(_[y]!==M[y]){if(y==="text"){m._setText(g,""+_[y]);continue}if(y==="fillStyle"||y==="strokeStyle"){this._setColor(g,y,_[y]);continue}if(y==="matrix"){this._setTransform(g);continue}i[y]&&x.setAttribute(i[y],_[y])}g._cfg.attrs=Object.assign({},g._attrs),g._cfg.hasUpdate=!1},v._setFont=function(g){var m=g.get("el"),_=g._attrs,M=_.fontSize;m.setAttribute("alignment-baseline",a[_.textBaseline]||"baseline"),m.setAttribute("text-anchor",o[_.textAlign]||"left"),M&&+M<12&&(_.matrix=[1,0,0,0,1,0,0,0,1],g.transform([["t",-_.x,-_.y],["s",+M/12,+M/12],["t",_.x,_.y]]))},v._setText=function(g,m){var _=g._cfg.el,M=g._attrs.textBaseline||"bottom";if(!m)_.innerHTML="";else if(~m.indexOf(`
`)){var x=g._attrs.x,y=m.split(`
`),S=y.length-1,P="";t.each(y,function(A,O){O===0?M==="alphabetic"?P+='<tspan x="'+x+'" dy="'+-S+'em">'+A+"</tspan>":M==="top"?P+='<tspan x="'+x+'" dy="0.9em">'+A+"</tspan>":M==="middle"?P+='<tspan x="'+x+'" dy="'+-(S-1)/2+'em">'+A+"</tspan>":M==="bottom"?P+='<tspan x="'+x+'" dy="-'+(S+n)+'em">'+A+"</tspan>":M==="hanging"&&(P+='<tspan x="'+x+'" dy="'+(-(S-1)-n)+'em">'+A+"</tspan>"):P+='<tspan x="'+x+'" dy="1em">'+A+"</tspan>"}),_.innerHTML=P}else _.innerHTML=m},v._setClip=function(g,m){var _=g._cfg.el;if(!m){_.removeAttribute("clip-path");return}if(_.hasAttribute("clip-path"))m._cfg.hasUpdate&&this._updateShape(m);else{this._createDom(m),this._updateShape(m);var M=this.context.addClip(m);_.setAttribute("clip-path","url(#"+M+")")}},v._setColor=function(g,m,_){var M=g._cfg.el,x=this.context;if(!_){M.setAttribute(i[m],"none");return}if(_=_.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(_)){var y=x.find("gradient",_);y||(y=x.addGradient(_)),M.setAttribute(i[m],"url(#"+y+")")}else if(/^[p,P]{1}[\s]*\(/.test(_)){var S=x.find("pattern",_);S||(S=x.addPattern(_)),M.setAttribute(i[m],"url(#"+S+")")}else M.setAttribute(i[m],_)},v._setShadow=function(g){var m=g._cfg.el,_=g._attrs,M={dx:_.shadowOffsetX,dy:_.shadowOffsetY,blur:_.shadowBlur,color:_.shadowColor};if(!M.dx&&!M.dy&&!M.blur&&!M.color)m.removeAttribute("filter");else{var x=this.context.find("filter",M);x||(x=this.context.addShadow(M,this)),m.setAttribute("filter","url(#"+x+")")}},f}();E.exports=l},function(E,T,e){var t=e(7);t.Arc=e(136),t.Circle=e(137),t.Dom=e(138),t.Ellipse=e(139),t.Fan=e(140),t.Image=e(141),t.Line=e(142),t.Marker=e(74),t.Path=e(145),t.Polygon=e(146),t.Polyline=e(147),t.Rect=e(148),t.Text=e(149),E.exports=t},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.sub=T.mul=void 0,T.create=c,T.fromMat4=r,T.clone=h,T.copy=n,T.fromValues=i,T.set=a,T.identity=o,T.transpose=l,T.invert=f,T.adjoint=v,T.determinant=b,T.multiply=g,T.translate=m,T.rotate=_,T.scale=M,T.fromTranslation=x,T.fromRotation=y,T.fromScaling=S,T.fromMat2d=P,T.fromQuat=A,T.normalFromMat4=O,T.projection=L,T.str=H,T.frob=F,T.add=Z,T.subtract=G,T.multiplyScalar=U,T.multiplyScalarAndAdd=Y,T.exactEquals=J,T.equals=rt;var t=e(78),u=s(t);function s(ut){if(ut&&ut.__esModule)return ut;var Lt={};if(ut!=null)for(var Ft in ut)Object.prototype.hasOwnProperty.call(ut,Ft)&&(Lt[Ft]=ut[Ft]);return Lt.default=ut,Lt}function c(){var ut=new u.ARRAY_TYPE(9);return u.ARRAY_TYPE!=Float32Array&&(ut[1]=0,ut[2]=0,ut[3]=0,ut[5]=0,ut[6]=0,ut[7]=0),ut[0]=1,ut[4]=1,ut[8]=1,ut}function r(ut,Lt){return ut[0]=Lt[0],ut[1]=Lt[1],ut[2]=Lt[2],ut[3]=Lt[4],ut[4]=Lt[5],ut[5]=Lt[6],ut[6]=Lt[8],ut[7]=Lt[9],ut[8]=Lt[10],ut}function h(ut){var Lt=new u.ARRAY_TYPE(9);return Lt[0]=ut[0],Lt[1]=ut[1],Lt[2]=ut[2],Lt[3]=ut[3],Lt[4]=ut[4],Lt[5]=ut[5],Lt[6]=ut[6],Lt[7]=ut[7],Lt[8]=ut[8],Lt}function n(ut,Lt){return ut[0]=Lt[0],ut[1]=Lt[1],ut[2]=Lt[2],ut[3]=Lt[3],ut[4]=Lt[4],ut[5]=Lt[5],ut[6]=Lt[6],ut[7]=Lt[7],ut[8]=Lt[8],ut}function i(ut,Lt,Ft,Ot,St,xt,At,nt,Mt){var z=new u.ARRAY_TYPE(9);return z[0]=ut,z[1]=Lt,z[2]=Ft,z[3]=Ot,z[4]=St,z[5]=xt,z[6]=At,z[7]=nt,z[8]=Mt,z}function a(ut,Lt,Ft,Ot,St,xt,At,nt,Mt,z){return ut[0]=Lt,ut[1]=Ft,ut[2]=Ot,ut[3]=St,ut[4]=xt,ut[5]=At,ut[6]=nt,ut[7]=Mt,ut[8]=z,ut}function o(ut){return ut[0]=1,ut[1]=0,ut[2]=0,ut[3]=0,ut[4]=1,ut[5]=0,ut[6]=0,ut[7]=0,ut[8]=1,ut}function l(ut,Lt){if(ut===Lt){var Ft=Lt[1],Ot=Lt[2],St=Lt[5];ut[1]=Lt[3],ut[2]=Lt[6],ut[3]=Ft,ut[5]=Lt[7],ut[6]=Ot,ut[7]=St}else ut[0]=Lt[0],ut[1]=Lt[3],ut[2]=Lt[6],ut[3]=Lt[1],ut[4]=Lt[4],ut[5]=Lt[7],ut[6]=Lt[2],ut[7]=Lt[5],ut[8]=Lt[8];return ut}function f(ut,Lt){var Ft=Lt[0],Ot=Lt[1],St=Lt[2],xt=Lt[3],At=Lt[4],nt=Lt[5],Mt=Lt[6],z=Lt[7],Q=Lt[8],ht=Q*At-nt*z,et=-Q*xt+nt*Mt,at=z*xt-At*Mt,gt=Ft*ht+Ot*et+St*at;return gt?(gt=1/gt,ut[0]=ht*gt,ut[1]=(-Q*Ot+St*z)*gt,ut[2]=(nt*Ot-St*At)*gt,ut[3]=et*gt,ut[4]=(Q*Ft-St*Mt)*gt,ut[5]=(-nt*Ft+St*xt)*gt,ut[6]=at*gt,ut[7]=(-z*Ft+Ot*Mt)*gt,ut[8]=(At*Ft-Ot*xt)*gt,ut):null}function v(ut,Lt){var Ft=Lt[0],Ot=Lt[1],St=Lt[2],xt=Lt[3],At=Lt[4],nt=Lt[5],Mt=Lt[6],z=Lt[7],Q=Lt[8];return ut[0]=At*Q-nt*z,ut[1]=St*z-Ot*Q,ut[2]=Ot*nt-St*At,ut[3]=nt*Mt-xt*Q,ut[4]=Ft*Q-St*Mt,ut[5]=St*xt-Ft*nt,ut[6]=xt*z-At*Mt,ut[7]=Ot*Mt-Ft*z,ut[8]=Ft*At-Ot*xt,ut}function b(ut){var Lt=ut[0],Ft=ut[1],Ot=ut[2],St=ut[3],xt=ut[4],At=ut[5],nt=ut[6],Mt=ut[7],z=ut[8];return Lt*(z*xt-At*Mt)+Ft*(-z*St+At*nt)+Ot*(Mt*St-xt*nt)}function g(ut,Lt,Ft){var Ot=Lt[0],St=Lt[1],xt=Lt[2],At=Lt[3],nt=Lt[4],Mt=Lt[5],z=Lt[6],Q=Lt[7],ht=Lt[8],et=Ft[0],at=Ft[1],gt=Ft[2],k=Ft[3],ot=Ft[4],it=Ft[5],X=Ft[6],Et=Ft[7],vt=Ft[8];return ut[0]=et*Ot+at*At+gt*z,ut[1]=et*St+at*nt+gt*Q,ut[2]=et*xt+at*Mt+gt*ht,ut[3]=k*Ot+ot*At+it*z,ut[4]=k*St+ot*nt+it*Q,ut[5]=k*xt+ot*Mt+it*ht,ut[6]=X*Ot+Et*At+vt*z,ut[7]=X*St+Et*nt+vt*Q,ut[8]=X*xt+Et*Mt+vt*ht,ut}function m(ut,Lt,Ft){var Ot=Lt[0],St=Lt[1],xt=Lt[2],At=Lt[3],nt=Lt[4],Mt=Lt[5],z=Lt[6],Q=Lt[7],ht=Lt[8],et=Ft[0],at=Ft[1];return ut[0]=Ot,ut[1]=St,ut[2]=xt,ut[3]=At,ut[4]=nt,ut[5]=Mt,ut[6]=et*Ot+at*At+z,ut[7]=et*St+at*nt+Q,ut[8]=et*xt+at*Mt+ht,ut}function _(ut,Lt,Ft){var Ot=Lt[0],St=Lt[1],xt=Lt[2],At=Lt[3],nt=Lt[4],Mt=Lt[5],z=Lt[6],Q=Lt[7],ht=Lt[8],et=Math.sin(Ft),at=Math.cos(Ft);return ut[0]=at*Ot+et*At,ut[1]=at*St+et*nt,ut[2]=at*xt+et*Mt,ut[3]=at*At-et*Ot,ut[4]=at*nt-et*St,ut[5]=at*Mt-et*xt,ut[6]=z,ut[7]=Q,ut[8]=ht,ut}function M(ut,Lt,Ft){var Ot=Ft[0],St=Ft[1];return ut[0]=Ot*Lt[0],ut[1]=Ot*Lt[1],ut[2]=Ot*Lt[2],ut[3]=St*Lt[3],ut[4]=St*Lt[4],ut[5]=St*Lt[5],ut[6]=Lt[6],ut[7]=Lt[7],ut[8]=Lt[8],ut}function x(ut,Lt){return ut[0]=1,ut[1]=0,ut[2]=0,ut[3]=0,ut[4]=1,ut[5]=0,ut[6]=Lt[0],ut[7]=Lt[1],ut[8]=1,ut}function y(ut,Lt){var Ft=Math.sin(Lt),Ot=Math.cos(Lt);return ut[0]=Ot,ut[1]=Ft,ut[2]=0,ut[3]=-Ft,ut[4]=Ot,ut[5]=0,ut[6]=0,ut[7]=0,ut[8]=1,ut}function S(ut,Lt){return ut[0]=Lt[0],ut[1]=0,ut[2]=0,ut[3]=0,ut[4]=Lt[1],ut[5]=0,ut[6]=0,ut[7]=0,ut[8]=1,ut}function P(ut,Lt){return ut[0]=Lt[0],ut[1]=Lt[1],ut[2]=0,ut[3]=Lt[2],ut[4]=Lt[3],ut[5]=0,ut[6]=Lt[4],ut[7]=Lt[5],ut[8]=1,ut}function A(ut,Lt){var Ft=Lt[0],Ot=Lt[1],St=Lt[2],xt=Lt[3],At=Ft+Ft,nt=Ot+Ot,Mt=St+St,z=Ft*At,Q=Ot*At,ht=Ot*nt,et=St*At,at=St*nt,gt=St*Mt,k=xt*At,ot=xt*nt,it=xt*Mt;return ut[0]=1-ht-gt,ut[3]=Q-it,ut[6]=et+ot,ut[1]=Q+it,ut[4]=1-z-gt,ut[7]=at-k,ut[2]=et-ot,ut[5]=at+k,ut[8]=1-z-ht,ut}function O(ut,Lt){var Ft=Lt[0],Ot=Lt[1],St=Lt[2],xt=Lt[3],At=Lt[4],nt=Lt[5],Mt=Lt[6],z=Lt[7],Q=Lt[8],ht=Lt[9],et=Lt[10],at=Lt[11],gt=Lt[12],k=Lt[13],ot=Lt[14],it=Lt[15],X=Ft*nt-Ot*At,Et=Ft*Mt-St*At,vt=Ft*z-xt*At,Nt=Ot*Mt-St*nt,$t=Ot*z-xt*nt,ee=St*z-xt*Mt,kt=Q*k-ht*gt,Wt=Q*ot-et*gt,ae=Q*it-at*gt,le=ht*ot-et*k,je=ht*it-at*k,Oe=et*it-at*ot,We=X*Oe-Et*je+vt*le+Nt*ae-$t*Wt+ee*kt;return We?(We=1/We,ut[0]=(nt*Oe-Mt*je+z*le)*We,ut[1]=(Mt*ae-At*Oe-z*Wt)*We,ut[2]=(At*je-nt*ae+z*kt)*We,ut[3]=(St*je-Ot*Oe-xt*le)*We,ut[4]=(Ft*Oe-St*ae+xt*Wt)*We,ut[5]=(Ot*ae-Ft*je-xt*kt)*We,ut[6]=(k*ee-ot*$t+it*Nt)*We,ut[7]=(ot*vt-gt*ee-it*Et)*We,ut[8]=(gt*$t-k*vt+it*X)*We,ut):null}function L(ut,Lt,Ft){return ut[0]=2/Lt,ut[1]=0,ut[2]=0,ut[3]=0,ut[4]=-2/Ft,ut[5]=0,ut[6]=-1,ut[7]=1,ut[8]=1,ut}function H(ut){return"mat3("+ut[0]+", "+ut[1]+", "+ut[2]+", "+ut[3]+", "+ut[4]+", "+ut[5]+", "+ut[6]+", "+ut[7]+", "+ut[8]+")"}function F(ut){return Math.sqrt(Math.pow(ut[0],2)+Math.pow(ut[1],2)+Math.pow(ut[2],2)+Math.pow(ut[3],2)+Math.pow(ut[4],2)+Math.pow(ut[5],2)+Math.pow(ut[6],2)+Math.pow(ut[7],2)+Math.pow(ut[8],2))}function Z(ut,Lt,Ft){return ut[0]=Lt[0]+Ft[0],ut[1]=Lt[1]+Ft[1],ut[2]=Lt[2]+Ft[2],ut[3]=Lt[3]+Ft[3],ut[4]=Lt[4]+Ft[4],ut[5]=Lt[5]+Ft[5],ut[6]=Lt[6]+Ft[6],ut[7]=Lt[7]+Ft[7],ut[8]=Lt[8]+Ft[8],ut}function G(ut,Lt,Ft){return ut[0]=Lt[0]-Ft[0],ut[1]=Lt[1]-Ft[1],ut[2]=Lt[2]-Ft[2],ut[3]=Lt[3]-Ft[3],ut[4]=Lt[4]-Ft[4],ut[5]=Lt[5]-Ft[5],ut[6]=Lt[6]-Ft[6],ut[7]=Lt[7]-Ft[7],ut[8]=Lt[8]-Ft[8],ut}function U(ut,Lt,Ft){return ut[0]=Lt[0]*Ft,ut[1]=Lt[1]*Ft,ut[2]=Lt[2]*Ft,ut[3]=Lt[3]*Ft,ut[4]=Lt[4]*Ft,ut[5]=Lt[5]*Ft,ut[6]=Lt[6]*Ft,ut[7]=Lt[7]*Ft,ut[8]=Lt[8]*Ft,ut}function Y(ut,Lt,Ft,Ot){return ut[0]=Lt[0]+Ft[0]*Ot,ut[1]=Lt[1]+Ft[1]*Ot,ut[2]=Lt[2]+Ft[2]*Ot,ut[3]=Lt[3]+Ft[3]*Ot,ut[4]=Lt[4]+Ft[4]*Ot,ut[5]=Lt[5]+Ft[5]*Ot,ut[6]=Lt[6]+Ft[6]*Ot,ut[7]=Lt[7]+Ft[7]*Ot,ut[8]=Lt[8]+Ft[8]*Ot,ut}function J(ut,Lt){return ut[0]===Lt[0]&&ut[1]===Lt[1]&&ut[2]===Lt[2]&&ut[3]===Lt[3]&&ut[4]===Lt[4]&&ut[5]===Lt[5]&&ut[6]===Lt[6]&&ut[7]===Lt[7]&&ut[8]===Lt[8]}function rt(ut,Lt){var Ft=ut[0],Ot=ut[1],St=ut[2],xt=ut[3],At=ut[4],nt=ut[5],Mt=ut[6],z=ut[7],Q=ut[8],ht=Lt[0],et=Lt[1],at=Lt[2],gt=Lt[3],k=Lt[4],ot=Lt[5],it=Lt[6],X=Lt[7],Et=Lt[8];return Math.abs(Ft-ht)<=u.EPSILON*Math.max(1,Math.abs(Ft),Math.abs(ht))&&Math.abs(Ot-et)<=u.EPSILON*Math.max(1,Math.abs(Ot),Math.abs(et))&&Math.abs(St-at)<=u.EPSILON*Math.max(1,Math.abs(St),Math.abs(at))&&Math.abs(xt-gt)<=u.EPSILON*Math.max(1,Math.abs(xt),Math.abs(gt))&&Math.abs(At-k)<=u.EPSILON*Math.max(1,Math.abs(At),Math.abs(k))&&Math.abs(nt-ot)<=u.EPSILON*Math.max(1,Math.abs(nt),Math.abs(ot))&&Math.abs(Mt-it)<=u.EPSILON*Math.max(1,Math.abs(Mt),Math.abs(it))&&Math.abs(z-X)<=u.EPSILON*Math.max(1,Math.abs(z),Math.abs(X))&&Math.abs(Q-Et)<=u.EPSILON*Math.max(1,Math.abs(Q),Math.abs(Et))}var ft=T.mul=g,dt=T.sub=G},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.forEach=T.sqrLen=T.sqrDist=T.dist=T.div=T.mul=T.sub=T.len=void 0,T.create=c,T.clone=r,T.fromValues=h,T.copy=n,T.set=i,T.add=a,T.subtract=o,T.multiply=l,T.divide=f,T.ceil=v,T.floor=b,T.min=g,T.max=m,T.round=_,T.scale=M,T.scaleAndAdd=x,T.distance=y,T.squaredDistance=S,T.length=P,T.squaredLength=A,T.negate=O,T.inverse=L,T.normalize=H,T.dot=F,T.cross=Z,T.lerp=G,T.random=U,T.transformMat2=Y,T.transformMat2d=J,T.transformMat3=rt,T.transformMat4=ft,T.rotate=dt,T.angle=ut,T.str=Lt,T.exactEquals=Ft,T.equals=Ot;var t=e(78),u=s(t);function s(et){if(et&&et.__esModule)return et;var at={};if(et!=null)for(var gt in et)Object.prototype.hasOwnProperty.call(et,gt)&&(at[gt]=et[gt]);return at.default=et,at}function c(){var et=new u.ARRAY_TYPE(2);return u.ARRAY_TYPE!=Float32Array&&(et[0]=0,et[1]=0),et}function r(et){var at=new u.ARRAY_TYPE(2);return at[0]=et[0],at[1]=et[1],at}function h(et,at){var gt=new u.ARRAY_TYPE(2);return gt[0]=et,gt[1]=at,gt}function n(et,at){return et[0]=at[0],et[1]=at[1],et}function i(et,at,gt){return et[0]=at,et[1]=gt,et}function a(et,at,gt){return et[0]=at[0]+gt[0],et[1]=at[1]+gt[1],et}function o(et,at,gt){return et[0]=at[0]-gt[0],et[1]=at[1]-gt[1],et}function l(et,at,gt){return et[0]=at[0]*gt[0],et[1]=at[1]*gt[1],et}function f(et,at,gt){return et[0]=at[0]/gt[0],et[1]=at[1]/gt[1],et}function v(et,at){return et[0]=Math.ceil(at[0]),et[1]=Math.ceil(at[1]),et}function b(et,at){return et[0]=Math.floor(at[0]),et[1]=Math.floor(at[1]),et}function g(et,at,gt){return et[0]=Math.min(at[0],gt[0]),et[1]=Math.min(at[1],gt[1]),et}function m(et,at,gt){return et[0]=Math.max(at[0],gt[0]),et[1]=Math.max(at[1],gt[1]),et}function _(et,at){return et[0]=Math.round(at[0]),et[1]=Math.round(at[1]),et}function M(et,at,gt){return et[0]=at[0]*gt,et[1]=at[1]*gt,et}function x(et,at,gt,k){return et[0]=at[0]+gt[0]*k,et[1]=at[1]+gt[1]*k,et}function y(et,at){var gt=at[0]-et[0],k=at[1]-et[1];return Math.sqrt(gt*gt+k*k)}function S(et,at){var gt=at[0]-et[0],k=at[1]-et[1];return gt*gt+k*k}function P(et){var at=et[0],gt=et[1];return Math.sqrt(at*at+gt*gt)}function A(et){var at=et[0],gt=et[1];return at*at+gt*gt}function O(et,at){return et[0]=-at[0],et[1]=-at[1],et}function L(et,at){return et[0]=1/at[0],et[1]=1/at[1],et}function H(et,at){var gt=at[0],k=at[1],ot=gt*gt+k*k;return ot>0&&(ot=1/Math.sqrt(ot),et[0]=at[0]*ot,et[1]=at[1]*ot),et}function F(et,at){return et[0]*at[0]+et[1]*at[1]}function Z(et,at,gt){var k=at[0]*gt[1]-at[1]*gt[0];return et[0]=et[1]=0,et[2]=k,et}function G(et,at,gt,k){var ot=at[0],it=at[1];return et[0]=ot+k*(gt[0]-ot),et[1]=it+k*(gt[1]-it),et}function U(et,at){at=at||1;var gt=u.RANDOM()*2*Math.PI;return et[0]=Math.cos(gt)*at,et[1]=Math.sin(gt)*at,et}function Y(et,at,gt){var k=at[0],ot=at[1];return et[0]=gt[0]*k+gt[2]*ot,et[1]=gt[1]*k+gt[3]*ot,et}function J(et,at,gt){var k=at[0],ot=at[1];return et[0]=gt[0]*k+gt[2]*ot+gt[4],et[1]=gt[1]*k+gt[3]*ot+gt[5],et}function rt(et,at,gt){var k=at[0],ot=at[1];return et[0]=gt[0]*k+gt[3]*ot+gt[6],et[1]=gt[1]*k+gt[4]*ot+gt[7],et}function ft(et,at,gt){var k=at[0],ot=at[1];return et[0]=gt[0]*k+gt[4]*ot+gt[12],et[1]=gt[1]*k+gt[5]*ot+gt[13],et}function dt(et,at,gt,k){var ot=at[0]-gt[0],it=at[1]-gt[1],X=Math.sin(k),Et=Math.cos(k);return et[0]=ot*Et-it*X+gt[0],et[1]=ot*X+it*Et+gt[1],et}function ut(et,at){var gt=et[0],k=et[1],ot=at[0],it=at[1],X=gt*gt+k*k;X>0&&(X=1/Math.sqrt(X));var Et=ot*ot+it*it;Et>0&&(Et=1/Math.sqrt(Et));var vt=(gt*ot+k*it)*X*Et;return vt>1?0:vt<-1?Math.PI:Math.acos(vt)}function Lt(et){return"vec2("+et[0]+", "+et[1]+")"}function Ft(et,at){return et[0]===at[0]&&et[1]===at[1]}function Ot(et,at){var gt=et[0],k=et[1],ot=at[0],it=at[1];return Math.abs(gt-ot)<=u.EPSILON*Math.max(1,Math.abs(gt),Math.abs(ot))&&Math.abs(k-it)<=u.EPSILON*Math.max(1,Math.abs(k),Math.abs(it))}var St=T.len=P,xt=T.sub=o,At=T.mul=l,nt=T.div=f,Mt=T.dist=y,z=T.sqrDist=S,Q=T.sqrLen=A,ht=T.forEach=function(){var et=c();return function(at,gt,k,ot,it,X){var Et=void 0,vt=void 0;for(gt||(gt=2),k||(k=0),ot?vt=Math.min(ot*gt+k,at.length):vt=at.length,Et=k;Et<vt;Et+=gt)et[0]=at[Et],et[1]=at[Et+1],it(et,et,X),at[Et]=et[0],at[Et+1]=et[1];return at}}()},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.forEach=T.sqrLen=T.len=T.sqrDist=T.dist=T.div=T.mul=T.sub=void 0,T.create=c,T.clone=r,T.length=h,T.fromValues=n,T.copy=i,T.set=a,T.add=o,T.subtract=l,T.multiply=f,T.divide=v,T.ceil=b,T.floor=g,T.min=m,T.max=_,T.round=M,T.scale=x,T.scaleAndAdd=y,T.distance=S,T.squaredDistance=P,T.squaredLength=A,T.negate=O,T.inverse=L,T.normalize=H,T.dot=F,T.cross=Z,T.lerp=G,T.hermite=U,T.bezier=Y,T.random=J,T.transformMat4=rt,T.transformMat3=ft,T.transformQuat=dt,T.rotateX=ut,T.rotateY=Lt,T.rotateZ=Ft,T.angle=Ot,T.str=St,T.exactEquals=xt,T.equals=At;var t=e(78),u=s(t);function s(k){if(k&&k.__esModule)return k;var ot={};if(k!=null)for(var it in k)Object.prototype.hasOwnProperty.call(k,it)&&(ot[it]=k[it]);return ot.default=k,ot}function c(){var k=new u.ARRAY_TYPE(3);return u.ARRAY_TYPE!=Float32Array&&(k[0]=0,k[1]=0,k[2]=0),k}function r(k){var ot=new u.ARRAY_TYPE(3);return ot[0]=k[0],ot[1]=k[1],ot[2]=k[2],ot}function h(k){var ot=k[0],it=k[1],X=k[2];return Math.sqrt(ot*ot+it*it+X*X)}function n(k,ot,it){var X=new u.ARRAY_TYPE(3);return X[0]=k,X[1]=ot,X[2]=it,X}function i(k,ot){return k[0]=ot[0],k[1]=ot[1],k[2]=ot[2],k}function a(k,ot,it,X){return k[0]=ot,k[1]=it,k[2]=X,k}function o(k,ot,it){return k[0]=ot[0]+it[0],k[1]=ot[1]+it[1],k[2]=ot[2]+it[2],k}function l(k,ot,it){return k[0]=ot[0]-it[0],k[1]=ot[1]-it[1],k[2]=ot[2]-it[2],k}function f(k,ot,it){return k[0]=ot[0]*it[0],k[1]=ot[1]*it[1],k[2]=ot[2]*it[2],k}function v(k,ot,it){return k[0]=ot[0]/it[0],k[1]=ot[1]/it[1],k[2]=ot[2]/it[2],k}function b(k,ot){return k[0]=Math.ceil(ot[0]),k[1]=Math.ceil(ot[1]),k[2]=Math.ceil(ot[2]),k}function g(k,ot){return k[0]=Math.floor(ot[0]),k[1]=Math.floor(ot[1]),k[2]=Math.floor(ot[2]),k}function m(k,ot,it){return k[0]=Math.min(ot[0],it[0]),k[1]=Math.min(ot[1],it[1]),k[2]=Math.min(ot[2],it[2]),k}function _(k,ot,it){return k[0]=Math.max(ot[0],it[0]),k[1]=Math.max(ot[1],it[1]),k[2]=Math.max(ot[2],it[2]),k}function M(k,ot){return k[0]=Math.round(ot[0]),k[1]=Math.round(ot[1]),k[2]=Math.round(ot[2]),k}function x(k,ot,it){return k[0]=ot[0]*it,k[1]=ot[1]*it,k[2]=ot[2]*it,k}function y(k,ot,it,X){return k[0]=ot[0]+it[0]*X,k[1]=ot[1]+it[1]*X,k[2]=ot[2]+it[2]*X,k}function S(k,ot){var it=ot[0]-k[0],X=ot[1]-k[1],Et=ot[2]-k[2];return Math.sqrt(it*it+X*X+Et*Et)}function P(k,ot){var it=ot[0]-k[0],X=ot[1]-k[1],Et=ot[2]-k[2];return it*it+X*X+Et*Et}function A(k){var ot=k[0],it=k[1],X=k[2];return ot*ot+it*it+X*X}function O(k,ot){return k[0]=-ot[0],k[1]=-ot[1],k[2]=-ot[2],k}function L(k,ot){return k[0]=1/ot[0],k[1]=1/ot[1],k[2]=1/ot[2],k}function H(k,ot){var it=ot[0],X=ot[1],Et=ot[2],vt=it*it+X*X+Et*Et;return vt>0&&(vt=1/Math.sqrt(vt),k[0]=ot[0]*vt,k[1]=ot[1]*vt,k[2]=ot[2]*vt),k}function F(k,ot){return k[0]*ot[0]+k[1]*ot[1]+k[2]*ot[2]}function Z(k,ot,it){var X=ot[0],Et=ot[1],vt=ot[2],Nt=it[0],$t=it[1],ee=it[2];return k[0]=Et*ee-vt*$t,k[1]=vt*Nt-X*ee,k[2]=X*$t-Et*Nt,k}function G(k,ot,it,X){var Et=ot[0],vt=ot[1],Nt=ot[2];return k[0]=Et+X*(it[0]-Et),k[1]=vt+X*(it[1]-vt),k[2]=Nt+X*(it[2]-Nt),k}function U(k,ot,it,X,Et,vt){var Nt=vt*vt,$t=Nt*(2*vt-3)+1,ee=Nt*(vt-2)+vt,kt=Nt*(vt-1),Wt=Nt*(3-2*vt);return k[0]=ot[0]*$t+it[0]*ee+X[0]*kt+Et[0]*Wt,k[1]=ot[1]*$t+it[1]*ee+X[1]*kt+Et[1]*Wt,k[2]=ot[2]*$t+it[2]*ee+X[2]*kt+Et[2]*Wt,k}function Y(k,ot,it,X,Et,vt){var Nt=1-vt,$t=Nt*Nt,ee=vt*vt,kt=$t*Nt,Wt=3*vt*$t,ae=3*ee*Nt,le=ee*vt;return k[0]=ot[0]*kt+it[0]*Wt+X[0]*ae+Et[0]*le,k[1]=ot[1]*kt+it[1]*Wt+X[1]*ae+Et[1]*le,k[2]=ot[2]*kt+it[2]*Wt+X[2]*ae+Et[2]*le,k}function J(k,ot){ot=ot||1;var it=u.RANDOM()*2*Math.PI,X=u.RANDOM()*2-1,Et=Math.sqrt(1-X*X)*ot;return k[0]=Math.cos(it)*Et,k[1]=Math.sin(it)*Et,k[2]=X*ot,k}function rt(k,ot,it){var X=ot[0],Et=ot[1],vt=ot[2],Nt=it[3]*X+it[7]*Et+it[11]*vt+it[15];return Nt=Nt||1,k[0]=(it[0]*X+it[4]*Et+it[8]*vt+it[12])/Nt,k[1]=(it[1]*X+it[5]*Et+it[9]*vt+it[13])/Nt,k[2]=(it[2]*X+it[6]*Et+it[10]*vt+it[14])/Nt,k}function ft(k,ot,it){var X=ot[0],Et=ot[1],vt=ot[2];return k[0]=X*it[0]+Et*it[3]+vt*it[6],k[1]=X*it[1]+Et*it[4]+vt*it[7],k[2]=X*it[2]+Et*it[5]+vt*it[8],k}function dt(k,ot,it){var X=it[0],Et=it[1],vt=it[2],Nt=it[3],$t=ot[0],ee=ot[1],kt=ot[2],Wt=Et*kt-vt*ee,ae=vt*$t-X*kt,le=X*ee-Et*$t,je=Et*le-vt*ae,Oe=vt*Wt-X*le,We=X*ae-Et*Wt,Ye=Nt*2;return Wt*=Ye,ae*=Ye,le*=Ye,je*=2,Oe*=2,We*=2,k[0]=$t+Wt+je,k[1]=ee+ae+Oe,k[2]=kt+le+We,k}function ut(k,ot,it,X){var Et=[],vt=[];return Et[0]=ot[0]-it[0],Et[1]=ot[1]-it[1],Et[2]=ot[2]-it[2],vt[0]=Et[0],vt[1]=Et[1]*Math.cos(X)-Et[2]*Math.sin(X),vt[2]=Et[1]*Math.sin(X)+Et[2]*Math.cos(X),k[0]=vt[0]+it[0],k[1]=vt[1]+it[1],k[2]=vt[2]+it[2],k}function Lt(k,ot,it,X){var Et=[],vt=[];return Et[0]=ot[0]-it[0],Et[1]=ot[1]-it[1],Et[2]=ot[2]-it[2],vt[0]=Et[2]*Math.sin(X)+Et[0]*Math.cos(X),vt[1]=Et[1],vt[2]=Et[2]*Math.cos(X)-Et[0]*Math.sin(X),k[0]=vt[0]+it[0],k[1]=vt[1]+it[1],k[2]=vt[2]+it[2],k}function Ft(k,ot,it,X){var Et=[],vt=[];return Et[0]=ot[0]-it[0],Et[1]=ot[1]-it[1],Et[2]=ot[2]-it[2],vt[0]=Et[0]*Math.cos(X)-Et[1]*Math.sin(X),vt[1]=Et[0]*Math.sin(X)+Et[1]*Math.cos(X),vt[2]=Et[2],k[0]=vt[0]+it[0],k[1]=vt[1]+it[1],k[2]=vt[2]+it[2],k}function Ot(k,ot){var it=n(k[0],k[1],k[2]),X=n(ot[0],ot[1],ot[2]);H(it,it),H(X,X);var Et=F(it,X);return Et>1?0:Et<-1?Math.PI:Math.acos(Et)}function St(k){return"vec3("+k[0]+", "+k[1]+", "+k[2]+")"}function xt(k,ot){return k[0]===ot[0]&&k[1]===ot[1]&&k[2]===ot[2]}function At(k,ot){var it=k[0],X=k[1],Et=k[2],vt=ot[0],Nt=ot[1],$t=ot[2];return Math.abs(it-vt)<=u.EPSILON*Math.max(1,Math.abs(it),Math.abs(vt))&&Math.abs(X-Nt)<=u.EPSILON*Math.max(1,Math.abs(X),Math.abs(Nt))&&Math.abs(Et-$t)<=u.EPSILON*Math.max(1,Math.abs(Et),Math.abs($t))}var nt=T.sub=l,Mt=T.mul=f,z=T.div=v,Q=T.dist=S,ht=T.sqrDist=P,et=T.len=h,at=T.sqrLen=A,gt=T.forEach=function(){var k=c();return function(ot,it,X,Et,vt,Nt){var $t=void 0,ee=void 0;for(it||(it=3),X||(X=0),Et?ee=Math.min(Et*it+X,ot.length):ee=ot.length,$t=X;$t<ee;$t+=it)k[0]=ot[$t],k[1]=ot[$t+1],k[2]=ot[$t+2],vt(k,k,Nt),ot[$t]=k[0],ot[$t+1]=k[1],ot[$t+2]=k[2];return ot}}()},function(E,T,e){var t=e(6),u=e(11),s=e(152),c=5,r=7,h=[1,1.2,1.5,1.6,2,2.2,2.4,2.5,3,4,5,6,7.5,8,10],n=[1,2,4,5,10],i=1e-12;E.exports=function(a){var o=a.min,l=a.max,f=a.interval,v=a.minTickInterval,b=[],g=a.minCount||c,m=a.maxCount||r,_=g===m,M=t(a.minLimit)?-Infinity:a.minLimit,x=t(a.maxLimit)?Infinity:a.maxLimit,y=(g+m)/2,S=y,P=a.snapArray?a.snapArray:_?h:n;if(o===M&&l===x&&_&&(f=(l-o)/(S-1)),t(o)&&(o=0),t(l)&&(l=0),Math.abs(l-o)<i&&(o===0?l=1:o>0?o=0:l=0,l-o<5&&!f&&l-o>=1&&(f=1)),t(f)){var A=(l-o)/(y-1);f=s.snapFactorTo(A,P,"ceil"),m!==g&&(S=parseInt((l-o)/f,10),S>m&&(S=m),S<g&&(S=g),f=s.snapFactorTo((l-o)/(S-1),P))}if(u(v)&&f<v&&(f=v),a.interval||m!==g){l=Math.min(s.snapMultiple(l,f,"ceil"),x),o=Math.max(s.snapMultiple(o,f,"floor"),M),S=Math.round((l-o)/f),o=s.fixedBase(o,f),l=s.fixedBase(l,f);for(var O=null;o>M&&M>-Infinity&&(O===null||o<O);)O=o,o=s.fixedBase(o-f,f)}else{y=parseInt(y,10);var L=(l+o)/2,H=s.snapMultiple(L,f,"ceil"),F=Math.floor((y-2)/2),Z=H+F*f,G;y%2==0?G=H-F*f:G=H-(F+1)*f;for(var U=null;Z<l&&(U===null||Z>U);)U=Z,Z=s.fixedBase(Z+f,f);for(var Y=null;G>o&&(Y===null||G<Y);)Y=G,G=s.fixedBase(G-f,f);l=Z,o=G}l=Math.min(l,x),o=Math.max(o,M),b.push(o);for(var J=1;J<S;J++){var rt=s.fixedBase(f*J+o,f);rt<l&&b.push(rt)}return b[b.length-1]<l&&b.push(l),{min:o,max:l,interval:f,count:S,ticks:b}}},function(E,T,e){var t=e(152),u=e(6),s=6,c=[1,2,4,6,8,12],r=60*1e3,h=3600*1e3,n=24*3600*1e3;function i(m){return new Date(m).getFullYear()}function a(m){return new Date(m,0,1).getTime()}function o(m){return new Date(m).getMonth()}function l(m,_){var M=i(m),x=i(_),y=o(m),S=o(_);return(x-M)*12+(S-y)%12}function f(m,_){return new Date(m,_,1).getTime()}function v(m,_){return Math.ceil((_-m)/n)}function b(m,_){return Math.ceil((_-m)/h)}function g(m,_){return Math.ceil((_-m)/(60*1e3))}E.exports=function(m){var _=m.minInterval,M=[],x=m.min,y=m.max,S=m.interval,P;if(y===x&&(y=x+n),u(S)){var A=y-x,O=n,L=365*O;S=parseInt(A/(m.maxCount||s),10),_&&_>S&&(S=_);var H=S/L,F=i(x);if(H>.51){for(var Z=Math.ceil(H),G=i(y),U=F;U<=G+Z;U=U+Z)M.push(a(U));S=null}else if(H>.0834){for(var Y=Math.ceil(H/.0834),J=o(x),rt=l(x,y),ft=0;ft<=rt+Y;ft=ft+Y)M.push(f(F,ft+J));S=null}else if(S>O*.5){var dt=new Date(x),ut=dt.getFullYear(),Lt=dt.getMonth(x),Ft=dt.getDate(),Ot=Math.ceil(S/O),St=v(x,y);S=Ot*O;for(var xt=0;xt<St+Ot;xt=xt+Ot)M.push(new Date(ut,Lt,Ft+xt).getTime())}else if(S>h){var At=new Date(x),nt=At.getFullYear(),Mt=At.getMonth(x),z=At.getDate(),Q=At.getHours(),ht=t.snapTo(c,Math.ceil(S/h)),et=b(x,y);S=ht*h;for(var at=0;at<=et+ht;at=at+ht)M.push(new Date(nt,Mt,z,Q+at).getTime())}else if(S>r){var gt=g(x,y),k=Math.ceil(S/r);S=k*r;for(var ot=0;ot<=gt+k;ot=ot+k)M.push(x+ot*r)}else{S<1e3&&(S=1e3),x=Math.floor(x/1e3)*1e3;var it=Math.ceil((y-x)/1e3),X=Math.ceil(S/1e3);S=X*1e3;for(var Et=0;Et<it+X;Et=Et+X)M.push(x+Et*1e3)}}if(!M.length){x=Math.floor(x/1e3)*1e3,y=Math.ceil(y/1e3)*1e3,P=(y-x)/S;for(var vt=0;vt<=P;vt++)M.push(t.fixedBase(S*vt+x,S))}return{max:y,min:x,interval:S,ticks:M,count:M.length}}},function(E,T,e){function t(r,h){r.prototype=Object.create(h.prototype),r.prototype.constructor=r,r.__proto__=h}var u=e(26),s=e(11),c=function(r){t(h,r);function h(){return r.apply(this,arguments)||this}var n=h.prototype;return n._initDefaultCfg=function(){r.prototype._initDefaultCfg.call(this),this.isIdentity=!0,this.type="identity",this.value=null},n.getText=function(){return this.value.toString()},n.scale=function(a){return this.value!==a&&s(a)?a:this.range[0]},n.invert=function(){return this.value},h}(u);u.Identity=c,E.exports=c},function(E,T,e){function t(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i}var u=e(2),s=e(26),c=e(51);function r(n,i){return n===1?1:Math.log(i)/Math.log(n)}var h=function(n){t(i,n);function i(){return n.apply(this,arguments)||this}var a=i.prototype;return a._initDefaultCfg=function(){n.prototype._initDefaultCfg.call(this),this.type="log",this.tickCount=10,this.base=2,this._minTick=null},a.calculateTicks=function(){var l=this,f=l.base,v;if(l.min<0)throw new Error("The minimum value must be greater than zero!");var b=r(f,l.max);if(l.min>0)v=Math.floor(r(f,l.min));else{var g=l.values,m=l.max;u(g,function(P){P>0&&P<m&&(m=P)}),m===l.max&&(m=l.max/f),m>1&&(m=1),v=Math.floor(r(f,m)),l._minTick=v,l.positiveMin=m}for(var _=b-v,M=l.tickCount,x=Math.ceil(_/M),y=[],S=v;S<b+x;S=S+x)y.push(Math.pow(f,S));return l.min===0&&y.unshift(0),y},a._getScalePercent=function(l){var f=this.max,v=this.min;if(f===v||l<=0)return 0;var b=this.base,g=this.positiveMin;g&&(v=g*1/b);var m;return l<g?m=l/g/(r(b,f)-r(b,v)):m=(r(b,l)-r(b,v))/(r(b,f)-r(b,v)),m},a.scale=function(l){var f=this._getScalePercent(l),v=this.rangeMin(),b=this.rangeMax();return v+f*(b-v)},a.invert=function(l){var f=this.base,v=r(f,this.max),b=this.rangeMin(),g=this.rangeMax()-b,m,_=this.positiveMin;if(_){if(l===0)return 0;m=r(f,_/f);var M=1/(v-m)*g;if(l<M)return l/M*_}else m=r(f,this.min);var x=(l-b)/g,y=x*(v-m)+m;return Math.pow(f,y)},i}(c);s.Log=h,E.exports=h},function(E,T,e){function t(h,n){h.prototype=Object.create(n.prototype),h.prototype.constructor=h,h.__proto__=n}var u=e(26),s=e(51);function c(h,n){var i=Math.E,a=Math.pow(i,Math.log(n)/h);return a}var r=function(h){t(n,h);function n(){return h.apply(this,arguments)||this}var i=n.prototype;return i._initDefaultCfg=function(){h.prototype._initDefaultCfg.call(this),this.type="pow",this.tickCount=10,this.exponent=2},i.calculateTicks=function(){var o=this,l=o.exponent,f,v=Math.ceil(c(l,o.max));if(o.min>=0?f=Math.floor(c(l,o.min)):f=0,f>v){var b=v;v=f,f=b}for(var g=v-f,m=o.tickCount,_=Math.ceil(g/m),M=[],x=f;x<v+_;x=x+_)M.push(Math.pow(x,l));return M},i._getScalePercent=function(o){var l=this.max,f=this.min;if(l===f)return 0;var v=this.exponent,b=(c(v,o)-c(v,f))/(c(v,l)-c(v,f));return b},i.scale=function(o){var l=this._getScalePercent(o),f=this.rangeMin(),v=this.rangeMax();return f+l*(v-f)},i.invert=function(o){var l=(o-this.rangeMin())/(this.rangeMax()-this.rangeMin()),f=this.exponent,v=c(f,this.max),b=c(f,this.min),g=l*(v-b)+b;return Math.pow(g,f)},n}(s);u.Pow=r,E.exports=r},function(E,T,e){function t(f,v){f.prototype=Object.create(v.prototype),f.prototype.constructor=f,f.__proto__=v}var u=e(26),s=e(153),c=e(222),r=e(151),h=e(52),n=e(2),i=e(11),a=e(39),o=e(15),l=function(f){t(v,f);function v(){return f.apply(this,arguments)||this}var b=v.prototype;return b._initDefaultCfg=function(){f.prototype._initDefaultCfg.call(this),this.type="timeCat",this.sortable=!0,this.tickCount=5,this.mask="YYYY-MM-DD"},b.init=function(){var m=this,_=this.values;n(_,function(M,x){_[x]=m._toTimeStamp(M)}),this.sortable&&_.sort(function(M,x){return M-x}),m.ticks||(m.ticks=this.calculateTicks())},b.calculateTicks=function(){var m=this,_=m.tickCount,M;if(_){var x=r({maxCount:_,data:m.values,isRounding:m.isRounding});M=x.ticks}else M=m.values;return M},b.translate=function(m){m=this._toTimeStamp(m);var _=this.values.indexOf(m);return _===-1&&(i(m)&&m<this.values.length?_=m:_=NaN),_},b.scale=function(m){var _=this.rangeMin(),M=this.rangeMax(),x=this.translate(m),y;return this.values.length===1||isNaN(x)?y=x:x>-1?y=x/(this.values.length-1):y=0,_+y*(M-_)},b.getText=function(m){var _="",M=this.translate(m);M>-1?_=this.values[M]:_=m;var x=this.formatter;return _=parseInt(_,10),_=x?x(_):c.format(_,this.mask),_},b.getTicks=function(){var m=this,_=this.ticks,M=[];return n(_,function(x){var y;a(x)?y=x:y={text:o(x)?x:m.getText(x),value:m.scale(x),tickValue:x},M.push(y)}),M},b._toTimeStamp=function(m){return h.toTimeStamp(m)},v}(s);u.TimeCat=l,E.exports=l},function(E,T,e){function t(l,f){l.prototype=Object.create(f.prototype),l.prototype.constructor=l,l.__proto__=f}var u=e(222),s=e(2),c=e(6),r=e(15),h=e(26),n=e(51),i=e(352),a=e(52),o=function(l){t(f,l);function f(){return l.apply(this,arguments)||this}var v=f.prototype;return v._initDefaultCfg=function(){l.prototype._initDefaultCfg.call(this),this.type="time",this.mask="YYYY-MM-DD"},v.init=function(){var g=this,m=g.values;if(m&&m.length){var _=[],M=Infinity,x=M,y=0;s(m,function(S){var P=g._toTimeStamp(S);if(isNaN(P))throw new TypeError("Invalid Time: "+S);M>P?(x=M,M=P):x>P&&(x=P),y<P&&(y=P),_.push(P)}),m.length>1&&(g.minTickInterval=x-M),(c(g.min)||g._toTimeStamp(g.min)>M)&&(g.min=M),(c(g.max)||g._toTimeStamp(g.max)<y)&&(g.max=y)}l.prototype.init.call(this)},v.calculateTicks=function(){var g=this,m=g.min,_=g.max,M=g.tickCount,x=g.tickInterval,y=i({min:m,max:_,minCount:M,maxCount:M,interval:x,minInterval:g.minTickInterval});return y.ticks},v.getText=function(g){var m=this.formatter;return g=this.translate(g),g=m?m(g):u.format(g,this.mask),g},v.scale=function(g){return r(g)&&(g=this.translate(g)),l.prototype.scale.call(this,g)},v.translate=function(g){return this._toTimeStamp(g)},v._toTimeStamp=function(g){return a.toTimeStamp(g)},f}(n);h.Time=o,E.exports=o},function(E,T,e){var t=e(82),u=e(53),s=function(r){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t(r,function(n){return!u(h,n)})};E.exports=s},function(E,T,e){var t=e(14),u=e(40),s=e(177);function c(r,h){var n=void 0;if(t(h)&&(n=h),u(h)&&(n=function(o){return s(o,h)}),n){for(var i=0;i<r.length;i+=1)if(n(r[i]))return r[i]}return null}E.exports=c},function(E,T,e){var t=e(6),u=e(4),s=function(r,h){for(var n=null,i=0;i<r.length;i++){var a=r[i],o=a[h];if(!t(o)){u(o)?n=o[0]:n=o;break}}return n};E.exports=s},function(E,T,e){var t=e(4),u=function s(c){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!t(c))r.push(c);else for(var h=0;h<c.length;h+=1)s(c[h],r);return r};E.exports=u},function(E,T,e){var t=e(4),u=e(2),s=function(r){if(!t(r))return r;var h=[];return u(r,function(n){t(n)?u(n,function(i){h.push(i)}):h.push(n)}),h};E.exports=s},function(E,T,e){var t=e(82),u=e(4),s=function(r){if(r=t(r,function(o){return!isNaN(o)}),!r.length)return{min:0,max:0};if(u(r[0])){for(var h=[],n=0;n<r.length;n++)h=h.concat(r[n]);r=h}var i=Math.max.apply(null,r),a=Math.min.apply(null,r);return{min:a,max:i}};E.exports=s},function(E,T,e){E.exports={contains:e(53),difference:e(358),find:e(359),firstValue:e(360),flatten:e(362),flattenDeep:e(361),getRange:e(363),merge:e(54),pull:e(156),pullAt:e(155),reduce:e(365),remove:e(366),sortBy:e(367),union:e(368),uniq:e(157),valuesOfKey:e(79)}},function(E,T,e){var t=e(4),u=e(40),s=e(2),c=function(h,n,i){if(!t(h)&&!u(h))return h;var a=i;return s(h,function(o,l){a=n(a,o,l)}),a};E.exports=c},function(E,T,e){var t=e(21),u=e(155),s=function(r,h){var n=[];if(!t(r))return n;for(var i=-1,a=[],o=r.length;++i<o;){var l=r[i];h(l,i,r)&&(n.push(l),a.push(i))}return u(r,a),n};E.exports=s},function(E,T,e){var t=e(15),u=e(14),s=e(4);function c(r,h){var n=void 0;if(u(h))n=function(o,l){return h(o)-h(l)};else{var i=[];t(h)?i.push(h):s(h)&&(i=h),n=function(o,l){for(var f=0;f<i.length;f+=1){var v=i[f];if(o[v]>l[v])return 1;if(o[v]<l[v])return-1}return 0}}return r.sort(n),r}E.exports=c},function(E,T,e){var t=e(2),u=e(57),s=e(157),c=function(){var h=[],n=u(arguments);return t(n,function(i){h=h.concat(i)}),s(h)};E.exports=c},function(E,T){function e(t,u,s){var c=void 0;return function(){var r=this,h=arguments,n=function(){c=null,s||t.apply(r,h)},i=s&&!c;clearTimeout(c),c=setTimeout(n,u),i&&t.apply(r,h)}}E.exports=e},function(E,T){E.exports=function(t,u,s){if(t){if(t.addEventListener)return t.addEventListener(u,s,!1),{remove:function(){t.removeEventListener(u,s,!1)}};if(t.attachEvent)return t.attachEvent("on"+u,s),{remove:function(){t.detachEvent("on"+u,s)}}}}},function(E,T){E.exports=function(t,u){if(t&&t.getBoundingClientRect){var s=t.getBoundingClientRect(),c=document.documentElement.clientTop,r=document.documentElement.clientLeft;return{top:s.top-c,bottom:s.bottom-c,left:s.left-r,right:s.right-r}}return u||null}},function(E,T){E.exports=function(t,u){var s=this.getStyle(t,"height",u);return s==="auto"&&(s=t.offsetHeight),parseFloat(s)}},function(E,T){E.exports=function(t,u){var s=this.getHeight(t,u),c=parseFloat(this.getStyle(t,"borderTopWidth"))||0,r=parseFloat(this.getStyle(t,"paddingTop"))||0,h=parseFloat(this.getStyle(t,"paddingBottom"))||0,n=parseFloat(this.getStyle(t,"borderBottomWidth"))||0;return s+c+n+r+h}},function(E,T){E.exports=function(t,u){var s=this.getWidth(t,u),c=parseFloat(this.getStyle(t,"borderLeftWidth"))||0,r=parseFloat(this.getStyle(t,"paddingLeft"))||0,h=parseFloat(this.getStyle(t,"paddingRight"))||0,n=parseFloat(this.getStyle(t,"borderRightWidth"))||0;return s+c+n+r+h}},function(E,T){E.exports=function(){return window.devicePixelRatio?window.devicePixelRatio:2}},function(E,T,e){var t=e(6);E.exports=function(s,c,r){try{return window.getComputedStyle?window.getComputedStyle(s,null)[c]:s.currentStyle[c]}catch(h){return t(r)?null:r}}},function(E,T){E.exports=function(t,u){var s=this.getStyle(t,"width",u);return s==="auto"&&(s=t.offsetWidth),parseFloat(s)}},function(E,T,e){E.exports={addEventListener:e(370),createDom:e(159),getBoundingClientRect:e(371),getHeight:e(372),getOuterHeight:e(373),getOuterWidth:e(374),getRatio:e(375),getStyle:e(376),getWidth:e(377),modifyCSS:e(160),requestAnimationFrame:e(161)}},function(E,T){function e(t,u){return t["_wrap_"+u]}E.exports=e},function(E,T,e){E.exports={getWrapBehavior:e(379),wrapBehavior:e(381)}},function(E,T){function e(t,u){if(t["_wrap_"+u])return t["_wrap_"+u];var s=function(r){t[u](r)};return t["_wrap_"+u]=s,s}E.exports=e},function(E,T,e){var t=e(383);E.exports={number2color:t,numberToColor:t,parsePath:e(384),parseRadius:e(385)}},function(E,T){var e={};E.exports=function(u){var s=e[u];if(!s){for(var c=u.toString(16),r=c.length;r<6;r++)c="0"+c;s="#"+c,e[u]=s}return s}},function(E,T,e){var t=e(4),u=e(15),s=e(2),c=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,r=/[^\s\,]+/ig;E.exports=function(n){if(n=n||[],t(n))return n;if(u(n))return n=n.match(c),s(n,function(i,a){if(i=i.match(r),i[0].length>1){var o=i[0].charAt(0);i.splice(1,0,i[0].substr(1)),i[0]=o}s(i,function(l,f){isNaN(l)||(i[f]=+l)}),n[a]=i}),n}},function(E,T,e){var t=e(4);E.exports=function(s){var c=0,r=0,h=0,n=0;return t(s)?s.length===1?c=r=h=n=s[0]:s.length===2?(c=h=s[0],r=n=s[1]):s.length===3?(c=s[0],r=n=s[1],h=s[2]):(c=s[0],r=s[1],h=s[2],n=s[3]):c=r=h=n=s,{r1:c,r2:r,r3:h,r4:n}}},function(E,T,e){var t=e(21),u=function(c,r){if(!t(c))return-1;var h=Array.prototype.indexOf;if(h)return h.call(c,r);for(var n=-1,i=0;i<c.length;i++)if(c[i]===r){n=i;break}return n};E.exports=u},function(E,T,e){var t=e(14),u=e(83),s=function(r,h,n){return t(n)?!!n(r,h):u(r,h)};E.exports=s},function(E,T,e){var t=e(2),u=e(21),s=function(r,h){if(!u(r))return r;var n=[];return t(r,function(i,a){n.push(h(i,a))}),n};E.exports=s},function(E,T){var e=function(u,s){var c=s.toString(),r=c.indexOf(".");if(r===-1)return Math.round(u);var h=c.substr(r+1).length;return h>20&&(h=20),parseFloat(u.toFixed(h))};E.exports=e},function(E,T,e){var t=e(55);E.exports={clamp:e(84),fixedBase:e(389),isDecimal:e(391),isEven:e(392),isInteger:e(393),isNegative:e(394),isNumberEqual:t,isOdd:e(395),isPositive:e(396),maxBy:e(168),minBy:e(397),mod:e(169),snapEqual:t,toDegree:e(170),toInt:e(171),toInteger:e(171),toRadian:e(172)}},function(E,T,e){var t=e(11),u=function(c){return t(c)&&c%1!=0};E.exports=u},function(E,T,e){var t=e(11),u=function(c){return t(c)&&c%2==0};E.exports=u},function(E,T,e){var t=e(11),u=Number.isInteger?Number.isInteger:function(s){return t(s)&&s%1==0};E.exports=u},function(E,T,e){var t=e(11),u=function(c){return t(c)&&c<0};E.exports=u},function(E,T,e){var t=e(11),u=function(c){return t(c)&&c%2!=0};E.exports=u},function(E,T,e){var t=e(11),u=function(c){return t(c)&&c>0};E.exports=u},function(E,T,e){var t=e(4),u=e(14),s=e(2),c=function(h,n){if(!!t(h)){var i=h[0],a=void 0;u(n)?a=n(h[0]):a=h[0][n];var o=void 0;return s(h,function(l){u(n)?o=n(l):o=l[n],o<a&&(i=l,a=o)}),i}};E.exports=c},function(E,T,e){E.exports=e(2)},function(E,T,e){E.exports=e(176)},function(E,T,e){var t=e(53),u=e(179);E.exports=function(s,c){return t(u(s),c)}},function(E,T,e){E.exports={forIn:e(398),has:e(176),hasKey:e(399),hasValue:e(400),keys:e(178),isMatch:e(177),values:e(179)}},function(E,T,e){var t=e(406);function u(c,r,h){var n=null,i=h;return r<i&&(i=r,n="add"),c<i&&(i=c,n="del"),{type:n,min:i}}var s=function(r,h){var n=r.length,i=h.length,a=void 0,o=void 0,l=0;if(n===0||i===0)return null;for(var f=[],v=0;v<=n;v++)f[v]=[],f[v][0]={min:v};for(var b=0;b<=i;b++)f[0][b]={min:b};for(var g=1;g<=n;g++){a=r[g-1];for(var m=1;m<=i;m++){o=h[m-1],t(a,o)?l=0:l=1;var _=f[g-1][m].min+1,M=f[g][m-1].min+1,x=f[g-1][m-1].min+l;f[g][m]=u(_,M,x)}}return f};E.exports=function(r,h){var n=s(r,h),i=r.length,a=h.length,o=[],l=1,f=1;if(n[i][a]!==i){for(var v=1;v<=i;v++){var b=n[v][v].min;f=v;for(var g=l;g<=a;g++)n[v][g].min<b&&(b=n[v][g].min,f=g);l=f,n[v][l].type&&o.push({index:v-1,type:n[v][l].type})}for(var m=o.length-1;m>=0;m--)l=o[m].index,o[m].type==="add"?r.splice(l,0,[].concat(r[l])):r.splice(l,1)}if(i=r.length,i<a)for(var _=0;_<a-i;_++)r[i-1][0]==="z"||r[i-1][0]==="Z"?r.splice(i-2,0,r[i-2]):r.push(r[i-1]);return r}},function(E,T){function e(s,c){var r=[],h=[];function n(i,a){if(i.length===1)r.push(i[0]),h.push(i[0]);else{for(var o=[],l=0;l<i.length-1;l++)l===0&&r.push(i[0]),l===i.length-2&&h.push(i[l+1]),o[l]=[(1-a)*i[l][0]+a*i[l+1][0],(1-a)*i[l][1]+a*i[l+1][1]];n(o,a)}}return s.length&&n(s,c),{left:r,right:h.reverse()}}function t(s,c,r){var h=[[s[1],s[2]]];r=r||2;var n=[];c[0]==="A"?(h.push(c[6]),h.push(c[7])):c[0]==="C"?(h.push([c[1],c[2]]),h.push([c[3],c[4]]),h.push([c[5],c[6]])):c[0]==="S"||c[0]==="Q"?(h.push([c[1],c[2]]),h.push([c[3],c[4]])):h.push([c[1],c[2]]);for(var i=h,a=1/r,o=0;o<r-1;o++){var l=a/(1-a*o),f=e(i,l);n.push(f.left),i=f.right}n.push(i);var v=n.map(function(b){var g=[];return b.length===4&&(g.push("C"),g=g.concat(b[2])),b.length>=3&&(b.length===3&&g.push("Q"),g=g.concat(b[1])),b.length===2&&g.push("L"),g=g.concat(b[b.length-1]),g});return v}function u(s,c,r){if(r===1)return[[].concat(s)];var h=[];if(c[0]==="L"||c[0]==="C"||c[0]==="Q")h=h.concat(t(s,c,r));else{var n=[].concat(s);n[0]==="M"&&(n[0]="L");for(var i=0;i<=r-1;i++)h.push(n)}return h}E.exports=function(c,r){if(c.length===1)return c;var h=c.length-1,n=r.length-1,i=h/n,a=[];if(c.length===1&&c[0][0]==="M"){for(var o=0;o<n-h;o++)c.push(c[0]);return c}for(var l=0;l<n;l++){var f=Math.floor(i*l);a[f]=(a[f]||0)+1}var v=a.reduce(function(b,g,m){return m===h?b.concat(c[h]):b.concat(u(c[m],c[m+1],g))},[]);return v.unshift(c[0]),(r[n]==="Z"||r[n]==="z")&&v.push("Z"),v}},function(E,T){function e(u){var s=[];switch(u[0]){case"M":s.push([u[1],u[2]]);break;case"L":s.push([u[1],u[2]]);break;case"A":s.push([u[6],u[7]]);break;case"Q":s.push([u[3],u[4]]),s.push([u[1],u[2]]);break;case"T":s.push([u[1],u[2]]);break;case"C":s.push([u[5],u[6]]),s.push([u[1],u[2]]),s.push([u[3],u[4]]);break;case"S":s.push([u[3],u[4]]),s.push([u[1],u[2]]);break;case"H":s.push([u[1],u[1]]);break;case"V":s.push([u[1],u[1]]);break;default:}return s}function t(u,s,c){for(var r=[].concat(u),h=void 0,n=1/(c+1),i=e(s)[0],a=1;a<=c;a++)n*=a,h=Math.floor(u.length*n),h===0?r.unshift([i[0]*n+u[h][0]*(1-n),i[1]*n+u[h][1]*(1-n)]):r.splice(h,0,[i[0]*n+u[h][0]*(1-n),i[1]*n+u[h][1]*(1-n)]);return r}E.exports=function(s,c){if(s.length<=1)return s;for(var r=void 0,h=0;h<c.length;h++)if(s[h][0]!==c[h][0])switch(r=e(s[h]),c[h][0]){case"M":s[h]=["M"].concat(r[0]);break;case"L":s[h]=["L"].concat(r[0]);break;case"A":s[h]=[].concat(c[h]),s[h][6]=r[0][0],s[h][7]=r[0][1];break;case"Q":if(r.length<2)if(h>0)r=t(r,s[h-1],1);else{s[h]=c[h];break}s[h]=["Q"].concat(r.reduce(function(n,i){return n.concat(i)},[]));break;case"T":s[h]=["T"].concat(r[0]);break;case"C":if(r.length<3)if(h>0)r=t(r,s[h-1],2);else{s[h]=c[h];break}s[h]=["C"].concat(r.reduce(function(n,i){return n.concat(i)},[]));break;case"S":if(r.length<2)if(h>0)r=t(r,s[h-1],1);else{s[h]=c[h];break}s[h]=["S"].concat(r.reduce(function(n,i){return n.concat(i)},[]));break;default:s[h]=c[h]}return s}},function(E,T,e){var t=e(407),u=e(183),s=e(184),c=e(180);E.exports={catmullRom2Bezier:c,catmullRomToBezier:c,fillPath:e(403),fillPathByDiff:e(402),formatPath:e(404),intersection:t,pathIntersection:t,parsePathArray:e(181),parsePathString:e(182),pathToAbsolute:u,path2absolute:u,pathTocurve:s,path2curve:s,rectPath:e(185)}},function(E,T,e){var t=e(2);E.exports=function(s,c){if(s.length!==c.length)return!1;var r=!0;return t(s,function(h,n){if(h!==c[n])return r=!1,!1}),r}},function(E,T,e){var t=e(4),u=e(185),s=e(184),c=function(m,_,M,x,y){var S=-3*_+9*M-9*x+3*y,P=m*S+6*_-12*M+6*x;return m*P-3*_+3*M},r=function(m,_,M,x,y,S,P,A,O){O===null&&(O=1),O=O>1?1:O<0?0:O;for(var L=O/2,H=12,F=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Z=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],G=0,U=0;U<H;U++){var Y=L*F[U]+L,J=c(Y,m,M,y,P),rt=c(Y,_,x,S,A),ft=J*J+rt*rt;G+=Z[U]*Math.sqrt(ft)}return L*G},h=function(m,_,M,x,y,S,P,A){for(var O=[],L=[[],[]],H=void 0,F=void 0,Z=void 0,G=void 0,U=0;U<2;++U){if(U===0?(F=6*m-12*M+6*y,H=-3*m+9*M-9*y+3*P,Z=3*M-3*m):(F=6*_-12*x+6*S,H=-3*_+9*x-9*S+3*A,Z=3*x-3*_),Math.abs(H)<1e-12){if(Math.abs(F)<1e-12)continue;G=-Z/F,G>0&&G<1&&O.push(G);continue}var Y=F*F-4*Z*H,J=Math.sqrt(Y);if(!(Y<0)){var rt=(-F+J)/(2*H);rt>0&&rt<1&&O.push(rt);var ft=(-F-J)/(2*H);ft>0&&ft<1&&O.push(ft)}}for(var dt=O.length,ut=dt,Lt=void 0;dt--;)G=O[dt],Lt=1-G,L[0][dt]=Lt*Lt*Lt*m+3*Lt*Lt*G*M+3*Lt*G*G*y+G*G*G*P,L[1][dt]=Lt*Lt*Lt*_+3*Lt*Lt*G*x+3*Lt*G*G*S+G*G*G*A;return L[0][ut]=m,L[1][ut]=_,L[0][ut+1]=P,L[1][ut+1]=A,L[0].length=L[1].length=ut+2,{min:{x:Math.min.apply(0,L[0]),y:Math.min.apply(0,L[1])},max:{x:Math.max.apply(0,L[0]),y:Math.max.apply(0,L[1])}}},n=function(m,_,M,x,y,S,P,A){if(!(Math.max(m,M)<Math.min(y,P)||Math.min(m,M)>Math.max(y,P)||Math.max(_,x)<Math.min(S,A)||Math.min(_,x)>Math.max(S,A))){var O=(m*x-_*M)*(y-P)-(m-M)*(y*A-S*P),L=(m*x-_*M)*(S-A)-(_-x)*(y*A-S*P),H=(m-M)*(S-A)-(_-x)*(y-P);if(!!H){var F=O/H,Z=L/H,G=+F.toFixed(2),U=+Z.toFixed(2);if(!(G<+Math.min(m,M).toFixed(2)||G>+Math.max(m,M).toFixed(2)||G<+Math.min(y,P).toFixed(2)||G>+Math.max(y,P).toFixed(2)||U<+Math.min(_,x).toFixed(2)||U>+Math.max(_,x).toFixed(2)||U<+Math.min(S,A).toFixed(2)||U>+Math.max(S,A).toFixed(2)))return{x:F,y:Z}}}},i=function(m,_,M){return _>=m.x&&_<=m.x+m.width&&M>=m.y&&M<=m.y+m.height},a=function(m,_,M,x){return m===null&&(m=_=M=x=0),_===null&&(_=m.y,M=m.width,x=m.height,m=m.x),{x:m,y:_,width:M,w:M,height:x,h:x,x2:m+M,y2:_+x,cx:m+M/2,cy:_+x/2,r1:Math.min(M,x)/2,r2:Math.max(M,x)/2,r0:Math.sqrt(M*M+x*x)/2,path:u(m,_,M,x),vb:[m,_,M,x].join(" ")}},o=function(m,_){return m=a(m),_=a(_),i(_,m.x,m.y)||i(_,m.x2,m.y)||i(_,m.x,m.y2)||i(_,m.x2,m.y2)||i(m,_.x,_.y)||i(m,_.x2,_.y)||i(m,_.x,_.y2)||i(m,_.x2,_.y2)||(m.x<_.x2&&m.x>_.x||_.x<m.x2&&_.x>m.x)&&(m.y<_.y2&&m.y>_.y||_.y<m.y2&&_.y>m.y)},l=function(m,_,M,x,y,S,P,A){t(m)||(m=[m,_,M,x,y,S,P,A]);var O=h.apply(null,m);return a(O.min.x,O.min.y,O.max.x-O.min.x,O.max.y-O.min.y)},f=function(m,_,M,x,y,S,P,A,O){var L=1-O,H=Math.pow(L,3),F=Math.pow(L,2),Z=O*O,G=Z*O,U=H*m+F*3*O*M+L*3*O*O*y+G*P,Y=H*_+F*3*O*x+L*3*O*O*S+G*A,J=m+2*O*(M-m)+Z*(y-2*M+m),rt=_+2*O*(x-_)+Z*(S-2*x+_),ft=M+2*O*(y-M)+Z*(P-2*y+M),dt=x+2*O*(S-x)+Z*(A-2*S+x),ut=L*m+O*M,Lt=L*_+O*x,Ft=L*y+O*P,Ot=L*S+O*A,St=90-Math.atan2(J-ft,rt-dt)*180/Math.PI;return{x:U,y:Y,m:{x:J,y:rt},n:{x:ft,y:dt},start:{x:ut,y:Lt},end:{x:Ft,y:Ot},alpha:St}},v=function(m,_,M){var x=l(m),y=l(_);if(!o(x,y))return M?0:[];for(var S=r.apply(0,m),P=r.apply(0,_),A=~~(S/8),O=~~(P/8),L=[],H=[],F={},Z=M?0:[],G=0;G<A+1;G++){var U=f.apply(0,m.concat(G/A));L.push({x:U.x,y:U.y,t:G/A})}for(var Y=0;Y<O+1;Y++){var J=f.apply(0,_.concat(Y/O));H.push({x:J.x,y:J.y,t:Y/O})}for(var rt=0;rt<A;rt++)for(var ft=0;ft<O;ft++){var dt=L[rt],ut=L[rt+1],Lt=H[ft],Ft=H[ft+1],Ot=Math.abs(ut.x-dt.x)<.001?"y":"x",St=Math.abs(Ft.x-Lt.x)<.001?"y":"x",xt=n(dt.x,dt.y,ut.x,ut.y,Lt.x,Lt.y,Ft.x,Ft.y);if(xt){if(F[xt.x.toFixed(4)]===xt.y.toFixed(4))continue;F[xt.x.toFixed(4)]=xt.y.toFixed(4);var At=dt.t+Math.abs((xt[Ot]-dt[Ot])/(ut[Ot]-dt[Ot]))*(ut.t-dt.t),nt=Lt.t+Math.abs((xt[St]-Lt[St])/(Ft[St]-Lt[St]))*(Ft.t-Lt.t);At>=0&&At<=1&&nt>=0&&nt<=1&&(M?Z++:Z.push({x:xt.x,y:xt.y,t1:At,t2:nt}))}}return Z},b=function(m,_,M){m=s(m),_=s(_);for(var x=void 0,y=void 0,S=void 0,P=void 0,A=void 0,O=void 0,L=void 0,H=void 0,F=void 0,Z=void 0,G=M?0:[],U=0,Y=m.length;U<Y;U++){var J=m[U];if(J[0]==="M")x=A=J[1],y=O=J[2];else{J[0]==="C"?(F=[x,y].concat(J.slice(1)),x=F[6],y=F[7]):(F=[x,y,x,y,A,O,A,O],x=A,y=O);for(var rt=0,ft=_.length;rt<ft;rt++){var dt=_[rt];if(dt[0]==="M")S=L=dt[1],P=H=dt[2];else{dt[0]==="C"?(Z=[S,P].concat(dt.slice(1)),S=Z[6],P=Z[7]):(Z=[S,P,S,P,L,H,L,H],S=L,P=H);var ut=v(F,Z,M);if(M)G+=ut;else{for(var Lt=0,Ft=ut.length;Lt<Ft;Lt++)ut[Lt].segment1=U,ut[Lt].segment2=rt,ut[Lt].bez1=F,ut[Lt].bez2=Z;G=G.concat(ut)}}}}}return G};E.exports=function(m,_){return b(m,_)}},function(E,T,e){var t=e(2),u=e(40),s=Object.prototype.hasOwnProperty,c=function(h,n){if(h===null||!u(h))return{};var i={};return t(n,function(a){s.call(h,a)&&(i[a]=h[a])}),i};E.exports=c},function(E,T,e){var t={lc:e(410),lowerCase:e(186),lowerFirst:e(187),substitute:e(411),uc:e(412),upperCase:e(188),upperFirst:e(189)};E.exports=t},function(E,T,e){E.exports=e(186)},function(E,T){var e=function(u,s){return!u||!s?u:u.replace(/\\?\{([^{}]+)\}/g,function(c,r){return c.charAt(0)==="\\"?c.slice(1):s[r]===void 0?"":s[r]})};E.exports=e},function(E,T,e){E.exports=e(188)},function(E,T){function e(t,u,s){var c=void 0,r=void 0,h=void 0,n=void 0,i=0;s||(s={});var a=function(){i=s.leading===!1?0:Date.now(),c=null,n=t.apply(r,h),c||(r=h=null)},o=function(){var f=Date.now();!i&&s.leading===!1&&(i=f);var v=u-(f-i);return r=this,h=arguments,v<=0||v>u?(c&&(clearTimeout(c),c=null),i=f,n=t.apply(r,h),c||(r=h=null)):!c&&s.trailing!==!1&&(c=setTimeout(a,v)),n};return o.cancel=function(){clearTimeout(c),i=0,c=r=h=null},o}E.exports=e},function(E,T,e){var t=e(17),u={getType:e(190),isArray:e(4),isArrayLike:e(21),isBoolean:e(191),isFunction:e(14),isNil:e(6),isNull:e(417),isNumber:e(11),isObject:e(39),isObjectLike:e(86),isPlainObject:e(40),isPrototype:e(193),isType:t,isUndefined:e(419),isString:e(15),isRegExp:e(418),isDate:e(192),isArguments:e(415),isError:e(416)};E.exports=u},function(E,T,e){var t=e(17),u=function(c){return t(c,"Arguments")};E.exports=u},function(E,T,e){var t=e(17),u=function(c){return t(c,"Error")};E.exports=u},function(E,T){var e=function(u){return u===null};E.exports=e},function(E,T,e){var t=e(17),u=function(c){return t(c,"RegExp")};E.exports=u},function(E,T){var e=function(u){return u===void 0};E.exports=e},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),u=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default=u.default.generateBaseTypedComponent("Axis")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function v(b,g){for(var m=0;m<g.length;m++){var _=g[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,_.key,_)}}return function(b,g,m){return g&&v(b.prototype,g),m&&v(b,m),b}}(),u=e(42),s=i(u),c=e(29),r=i(c),h=e(545),n=i(h);function i(v){return v&&v.__esModule?v:{default:v}}function a(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function o(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function l(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}(0,n.default)(s.default.PureComponent,"`React.PureComponent` needs React >=15.3.0");var f=function(v){l(b,v);function b(){return a(this,b),o(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return t(b,[{key:"render",value:function(){var m=this.props,_=m.width,M=m.height,x=m.placeholder;return s.default.createElement("div",{style:{width:_,height:M}},x)}}]),b}(s.default.PureComponent||s.default.Component);f.propTypes={width:r.default.oneOfType([r.default.string,r.default.number]),height:r.default.oneOfType([r.default.string,r.default.number]),placeholder:r.default.node},f.defaultProps={width:"100%",placeholder:s.default.createElement("div",{style:{position:"relative",top:"48%",textAlign:"center"}},"\u6682\u65E0\u6570\u636E")},T.default=f},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(x){for(var y=1;y<arguments.length;y++){var S=arguments[y];for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(x[P]=S[P])}return x},u=function(){function x(y,S){for(var P=0;P<S.length;P++){var A=S[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(y,A.key,A)}}return function(y,S,P){return S&&x(y.prototype,S),P&&x(y,P),y}}(),s=e(42),c=l(s),r=e(423),h=l(r),n=e(421),i=l(n),a=e(425),o=l(a);function l(x){return x&&x.__esModule?x:{default:x}}function f(x,y){var S={};for(var P in x)y.indexOf(P)>=0||!Object.prototype.hasOwnProperty.call(x,P)||(S[P]=x[P]);return S}function v(x,y){if(!(x instanceof y))throw new TypeError("Cannot call a class as a function")}function b(x,y){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:x}function g(x,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);x.prototype=Object.create(y&&y.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(x,y):x.__proto__=y)}function m(x){var y=!0;return(x==null||x.length===0||x.rows&&x.rows.length===0)&&(y=!1),!!y}var _=function(x){g(y,x);function y(){var S,P,A,O;v(this,y);for(var L=arguments.length,H=Array(L),F=0;F<L;F++)H[F]=arguments[F];return O=(P=(A=b(this,(S=y.__proto__||Object.getPrototypeOf(y)).call.apply(S,[this].concat(H))),A),A._refCallback=function(Z){Z&&(A.chart=Z.getG2Instance())},A.hasViewSource=function(){var Z=!1;return c.default.Children.map(A.props.children,function(G){!Z&&G&&typeof G.type=="function"&&G.type.name==="View"&&G.props.data&&m(G.props.data)&&(Z=!0)}),Z},P),b(A,O)}return u(y,[{key:"getG2Instance",value:function(){return this.chart}},{key:"render",value:function(){var P=this.props,A=P.data,O=P.width,L=P.height,H=P.placeholder,F=P.className,Z=P.style;return c.default.createElement("div",{className:F,style:Z},m(A)||this.hasViewSource()||!H?c.default.createElement(h.default,t({ref:this._refCallback},this.props)):c.default.createElement(i.default,{width:O,height:L,placeholder:H===!0?void 0:H}))}}]),y}(c.default.PureComponent||c.default.Component),M=function(x){g(y,x);function y(){return v(this,y),b(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return u(y,[{key:"render",value:function(){var P=this.props,A=P.widthErrorBoundary,O=f(P,["widthErrorBoundary"]);return A===!1?c.default.createElement(_,O):c.default.createElement(o.default,null,c.default.createElement(_,O))}}]),y}(c.default.Component);T.default=M},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(x){for(var y=1;y<arguments.length;y++){var S=arguments[y];for(var P in S)Object.prototype.hasOwnProperty.call(S,P)&&(x[P]=S[P])}return x},u=function(){function x(y,S){for(var P=0;P<S.length;P++){var A=S[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(y,A.key,A)}}return function(y,S,P){return S&&x(y.prototype,S),P&&x(y,P),y}}(),s=e(42),c=v(s),r=e(29),h=v(r),n=e(436),i=v(n),a=e(543),o=v(a),l=e(538),f=v(l);function v(x){return x&&x.__esModule?x:{default:x}}function b(x,y){if(!(x instanceof y))throw new TypeError("Cannot call a class as a function")}function g(x,y){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:x}function m(x,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);x.prototype=Object.create(y&&y.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(x,y):x.__proto__=y)}var _=function(x){m(y,x);function y(S){b(this,y);var P=g(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,S));return M.call(P),P.name="Chart",P.gId=0,P.id=P.createId(),P.g2Processor=new i.default,P.forceFit=(0,f.default)(function(){!P.chart||P.chart.forceFit()},300),P}return u(y,[{key:"getChildContext",value:function(){return{addElement:this.addElement,updateElement:this.updateElement,deleteElement:this.deleteElement,createId:this.createId,getParentInfo:this.getParentInfo,getViewId:this.getViewId}}},{key:"componentDidMount",value:function(){if(this.addElement(this.name,this.id,t({},this.props,{container:this.containerWrap})),this.chart=this.g2Processor.createG2Instance(),this.notifyG2Instance(),this.props.forceFit){var P=new o.default(this.forceFit);P.observe(this.containerWrap),this.observe=P}}},{key:"componentDidUpdate",value:function(){this.updateElement(this.name,this.id,t({},this.props,{container:this.containerWrap}));var P=this.g2Processor.batchedUpdate();this.chart!==P&&(this.chart=P,this.notifyG2Instance()),this.props.forceUpdate&&this.chart.forceFit()}},{key:"componentWillUnmount",value:function(){this.g2Processor.destory(),this.chart=null,this.forceFit&&this.forceFit.cancel(),this.observe&&this.observe.unobserve(this.containerWrap),this.containerWrap=null}},{key:"getG2Instance",value:function(){return this.chart}},{key:"notifyG2Instance",value:function(){this.props.onGetG2Instance&&this.props.onGetG2Instance(this.chart)}},{key:"render",value:function(){return c.default.createElement("div",{ref:this.refHandle},this.props.children)}}]),y}(s.Component);_.propTypes={data:h.default.oneOfType([h.default.arrayOf(h.default.object),h.default.object]),scale:h.default.oneOfType([h.default.object,h.default.array]),animate:h.default.bool,width:h.default.number,height:h.default.number.isRequired,onGetG2Instance:h.default.func,forceFit:h.default.bool,forceUpdate:h.default.bool},_.childContextTypes={addElement:h.default.func,updateElement:h.default.func,deleteElement:h.default.func,createId:h.default.func,getParentInfo:h.default.func,getViewId:h.default.func};var M=function(){var y=this;this.getViewId=function(){},this.getParentInfo=function(){return{id:y.id,name:y.name}},this.createId=function(){return y.gId+=1,y.gId},this.addElement=function(S,P,A,O,L){return y.g2Processor.addElement(S,P,A,O,L)},this.updateElement=function(S,P,A,O,L){y.g2Processor.updateElement(S,P,A,O,L)},this.deleteElement=function(S,P,A){y.g2Processor.deleteElement(S,P,A)},this.refHandle=function(S){y.containerWrap||(y.containerWrap=S)}};T.default=_},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),u=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default=u.default.generateBaseTypedComponent("Coord")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function a(o,l){for(var f=0;f<l.length;f++){var v=l[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(o,v.key,v)}}return function(o,l,f){return l&&a(o.prototype,l),f&&a(o,f),o}}(),u=e(42),s=c(u);function c(a){return a&&a.__esModule?a:{default:a}}function r(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function h(a,o){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:a}function n(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);a.prototype=Object.create(o&&o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(a,o):a.__proto__=o)}var i=function(a){n(o,a);function o(l){r(this,o);var f=h(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,l));return f.state={hasError:!1},f}return t(o,[{key:"shouldComponentUpdate",value:function(){return this.state.hasError&&this.setState({hasError:!1}),!0}},{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"unstable_handleError",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?s.default.createElement("h1",null,"bizcharts error."):this.props.children}}]),o}(s.default.Component);T.default=i},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),e(285);var t=e(24),u=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default=u.default.generateBaseTypedComponent("Facet")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),e(292);var t=e(24),u=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default=u.default.generateBaseTypedComponent("Geom")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),u=s(t);function s(r){return r&&r.__esModule?r:{default:r}}var c=u.default.generateBaseTypedComponent("Guide");c.Line=u.default.generateBaseTypedComponent("GuideLine"),c.Image=u.default.generateBaseTypedComponent("GuideImage"),c.Text=u.default.generateBaseTypedComponent("GuideText"),c.Region=u.default.generateBaseTypedComponent("GuideRegion"),c.Html=u.default.generateBaseTypedComponent("GuideHtml"),c.Arc=u.default.generateBaseTypedComponent("GuideArc"),c.RegionFilter=u.default.generateBaseTypedComponent("GuideRegionFilter"),c.DataMarker=u.default.generateBaseTypedComponent("GuideDataMarker"),c.DataRegion=u.default.generateBaseTypedComponent("GuideDataRegion"),T.default=c},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function v(b,g){for(var m=0;m<g.length;m++){var _=g[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(b,_.key,_)}}return function(b,g,m){return g&&v(b.prototype,g),m&&v(b,m),b}}(),u=e(537),s=i(u),c=e(24),r=i(c),h=e(29),n=i(h);function i(v){return v&&v.__esModule?v:{default:v}}function a(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function o(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function l(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var f=function(v){l(b,v);function b(g){return a(this,b),o(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,g,"Label"))}return t(b,[{key:"componentWillMount",value:function(){var m=this.context.getParentInfo();(0,s.default)(m.name==="Geom","`<Label />` must be wrapped in `<Geom />`"),this.id=this.context.createId(),this.context.addElement(this.name,this.id,this.props,this.context.getParentInfo(),this.context.getViewId())}}]),b}(r.default);f.contextTypes={addElement:n.default.func,updateElement:n.default.func,deleteElement:n.default.func,createId:n.default.func,getParentInfo:n.default.func,getViewId:n.default.func},f.childContextTypes={addElement:n.default.func,updateElement:n.default.func,deleteElement:n.default.func,createId:n.default.func,getParentInfo:n.default.func,getViewId:n.default.func},T.default=f},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),u=r(t),s=e(29),c=r(s);function r(o){return o&&o.__esModule?o:{default:o}}function h(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}function n(o,l){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:o}function i(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(o,l):o.__proto__=l)}var a=function(o){i(l,o);function l(f){return h(this,l),n(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,f,"Legend"))}return l}(u.default);a.contextTypes={addElement:c.default.func,updateElement:c.default.func,deleteElement:c.default.func,createId:c.default.func,getParentInfo:c.default.func,getViewId:c.default.func},a.childContextTypes={addElement:c.default.func,updateElement:c.default.func,deleteElement:c.default.func,createId:c.default.func,getParentInfo:c.default.func,getViewId:c.default.func},a.defaultProps={visible:!0},T.default=a},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(24),u=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default=u.default.generateBaseTypedComponent("Tooltip")},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(){function l(f,v){for(var b=0;b<v.length;b++){var g=v[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(f,g.key,g)}}return function(f,v,b){return v&&l(f.prototype,v),b&&l(f,b),f}}(),u=e(24),s=h(u),c=e(29),r=h(c);function h(l){return l&&l.__esModule?l:{default:l}}function n(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")}function i(l,f){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:l}function a(l,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);l.prototype=Object.create(f&&f.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(l,f):l.__proto__=f)}var o=function(l){a(f,l);function f(v){n(this,f);var b=i(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,v,"View"));return b.getViewId=function(){return b.id},b}return t(f,[{key:"getChildContext",value:function(){return{addElement:this.context.addElement,updateElement:this.context.updateElement,deleteElement:this.context.deleteElement,createId:this.context.createId,getParentInfo:this.getParentInfo,getViewId:this.getViewId}}}]),f}(s.default);o.contextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},o.childContextTypes={addElement:r.default.func,updateElement:r.default.func,deleteElement:r.default.func,createId:r.default.func,getParentInfo:r.default.func,getViewId:r.default.func},T.default=o},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t={Chart:"addChart",Coord:"addCoord",Geom:"addGeom",Axis:"addAxis",Tooltip:"addTooltip",Legend:"addLegend",Label:"addLabel",View:"addView",Guide:"addGuide",GuideLine:"addGuideLine",GuideImage:"addGuideImage",GuideText:"addGuideText",GuideRegion:"addGuideRegion",GuideHtml:"addGuideHtml",GuideArc:"addGuideArc",GuideRegionFilter:"addGuideRegionFilter",GuideDataMarker:"addGuideDataMarker",GuideDataRegion:"addGuideDataRegion",Facet:"addFacet"},u={addElement:function(c,r,h){this[t[c]](r,h,h.id,h.viewId,h.parentInfo)},getConfigContainer:function(c,r){return r&&(c.views||(c.views={}),c=c.views[r],c||(c={},c.views[r]=c)),c},addUniqueElement:function(c,r,h,n,i){var a=this.getConfigContainer(c,i);return a[r],a[r]=h,n},addChart:function(c,r,h){return this.addUniqueElement(c,"chart",r,h,null)},addView:function(c,r,h){return c.views||(c.views={}),c.views[h]=r,h},addAxis:function(c,r,h,n){var i=this.getConfigContainer(c,n);return i.axises||(i.axises={}),i.axises[h]=r,h},addCoord:function(c,r,h,n){return this.addUniqueElement(c,"coord",r,h,n)},addGeom:function(c,r,h,n,i){var a=this.getConfigContainer(c,n);return a.geoms||(a.geoms={}),a.geoms[h]?i?a.geoms[h].label=r.label:(a.geoms[h].label||console.log("geom label error"),r.label=a.geoms[h].label,a.geoms[h]=r):a.geoms[h]=r,h},addLabel:function(c,r,h,n,i){var a=this.getConfigContainer(c,n);return a.geoms||(a.geoms={}),this.addGeom(c,{label:r},i.id,n,!0),h},addTooltip:function(c,r,h,n){return this.addUniqueElement(c,"tooltip",r,h,n)},addFacet:function(c,r,h,n){return this.addUniqueElement(c,"facet",r,h,n)},addLegend:function(c,r,h,n){var i=this.getConfigContainer(c,n);return i.legends||(i.legends={}),i.legends[h]=r,h},addGuide:function(c,r,h,n){return this.addUniqueElement(c,"guide",r,h,n)},addTypedGuide:function(c,r,h,n,i,a){var o=this.getConfigContainer(c,i),l=o.guide;return l||(this.addUniqueElement("guide",{},a.id,i),l=o.guide),l.elements||(l.elements={}),h.type=r,l.elements[n]=h,n},addGuideLine:function(c,r,h,n,i){this.addTypedGuide(c,"line",r,h,n,i)},addGuideImage:function(c,r,h,n,i){this.addTypedGuide(c,"image",r,h,n,i)},addGuideText:function(c,r,h,n,i){this.addTypedGuide(c,"text",r,h,n,i)},addGuideRegion:function(c,r,h,n,i){this.addTypedGuide(c,"region",r,h,n,i)},addGuideHtml:function(c,r,h,n,i){this.addTypedGuide(c,"html",r,h,n,i)},addGuideArc:function(c,r,h,n,i){this.addTypedGuide(c,"arc",r,h,n,i)},addGuideRegionFilter:function(c,r,h,n,i){this.addTypedGuide(c,"regionFilter",r,h,n,i)},addGuideDataMarker:function(c,r,h,n,i){this.addTypedGuide(c,"dataMarker",r,h,n,i)},addGuideDataRegion:function(c,r,h,n,i){this.addTypedGuide(c,"dataRegion",r,h,n,i)}};T.default=u},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});function t(r){if(Array.isArray(r)){for(var h=0,n=Array(r.length);h<r.length;h++)n[h]=r[h];return n}else return Array.from(r)}var u={Chart:"deleteChart",Coord:"deleteCoord",Geom:"deleteGeom",Axis:"deleteAxis",Tooltip:"deleteTooltip",Legend:"deleteLegend",Label:"deleteLabel",View:"deleteView",Guide:"deleteGuide",GuideLine:"deleteTypedGuide",GuideImage:"deleteTypedGuide",GuideText:"deleteTypedGuide",GuideRegion:"deleteTypedGuide",GuideHtml:"deleteTypedGuide",GuideArc:"deleteTypedGuide",Facet:"deleteFacet"},s={Geom:!0,Label:!0,Facet:!0},c={deleteAxis:function(h,n,i){var a=n.axises[i].props;h.axis(a.name,!1)},deleteTooltip:function(h){h.tooltip(!1)},deleteCoord:function(h){h.coord("rect",{})},deleteLegend:function(h,n,i){var a=n.legends[i].props;h.legend.apply(h,t(a.name?[a.name,!1]:[!1]))},deleteGuide:function(h){h.guide().clear()},deleteView:function(h,n,i){!n.views[i].g2Instance||(h.removeView(n.views[i].g2Instance),delete n.views[i].g2Instance)},deleteViewElement:function(h,n,i,a){var o=this;Object.keys(i).forEach(function(l){var f=a[l],v=f.viewId;v&&(s[f.name]?n.views[v].needReExecute=!0:n.views[v].g2Instance&&o[u[f.name]]&&o[u[f.name]](n.views[v].g2Instance,n.views[v],f.id))})},needReExecute:function(h,n){for(var i in h)if(s[n[i].name]&&!n[i].viewId)return!0;return!1},synchronizeG2Delete:function(h,n,i,a){var o=this;Object.keys(i).forEach(function(l){var f=u[a[l].name];o[f]&&!a[l].viewId&&o[f](h,n,l)}),this.deleteViewElement(h,n,i,a)}};T.default=c},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(_){for(var M=1;M<arguments.length;M++){var x=arguments[M];for(var y in x)Object.prototype.hasOwnProperty.call(x,y)&&(_[y]=x[y])}return _},u=e(88),s=e(195),c=l(s),r=e(197),h=l(r),n=e(87),i=l(n),a=e(196),o=l(a);function l(_){return _&&_.__esModule?_:{default:_}}function f(_){if(Array.isArray(_)){for(var M=0,x=Array(_.length);M<_.length;M++)x[M]=_[M];return x}else return Array.from(_)}function v(_,M){var x={};for(var y in _)M.indexOf(y)>=0||!Object.prototype.hasOwnProperty.call(_,y)||(x[y]=_[y]);return x}var b=c.default.COORD_FUNC_PROPS,g=c.default.GEOM_FUNC_PROPS,m={needRebuildChart:function(M){if(M.chart.props==null||M.chart.updateProps==null)return!1;var x=M.chart.props,y=M.chart.updateProps;return!u.Util.shallowEqual(x.padding,y.padding)||!u.Util.shallowEqual(x.background,y.background)||!u.Util.shallowEqual(x.plotBackground,y.plotBackground)||!u.Util.shallowEqual(x.pixelRatio,y.pixelRatio)},needReExecute:function(M){var x=M.geoms;if(x==null)return!1;for(var y in x)if(x[y].props&&x[y].updateProps&&(x[y].props.type!==x[y].updateProps.type||x[y].props.color&&!x[y].updateProps.color||x[y].props.size&&!x[y].updateProps.size||x[y].props.shape&&!x[y].updateProps.shape))return!0;return!1},needRepaint:function(M){var x=M.chart,y=x.props.data,S=x.updateProps.data;return y===S},synchronizeG2Update:function(M,x){this.updateChart(M,x.chart),this.updateAxises(M,x.axises),this.updateTooltip(M,x),this.updateCoord(M,x),this.updateLegends(M,x.legends),this.updateGeoms(M,x.geoms),this.updateGuide(M,x.guide),this.updateFacet(M,x),this.updateViews(M,x)},updateChart:function(M,x){if(!!x){var y=x.props,S=x.updateProps,P=y.width,A=y.height,O=y.animate,L=y.data,H=y.scale,F=S.width,Z=S.height,G=S.animate,U=S.data,Y=S.scale;L!==U&&M.changeData(U),u.Util.shallowEqual(H,Y)||(u.Util.isArray(Y)?M.scale(Y[0],Y[1]):M.scale(Y)),O!==G&&M.animate(G),P!==F&&A!==Z?M.changeSize(F,Z):P!==F?M.changeWidth(F):A!==Z&&M.changeHeight(Z),o.default.updateEvents(M,o.default.chartEvents,x.props,S),o.default.updateBaseEvents(M,x.updateProps,S)}},updateAxis:function(M,x){var y=x.props,S=y.name,P=y.visible,A=v(y,["name","visible"]),O=x.updateProps,L=O.name,H=O.visible,F=v(O,["name","visible"]);P!==H&&M.axis(S,!!H),u.Util.shallowEqual(A,F)||M.axis(S,F)},updateAxises:function(M,x){if(!!x)for(var y in x)x[y]&&x[y].props&&x[y].updateProps&&this.updateAxis(M,x[y])},updateTooltip:function(M,x){if(!!x.tooltip){var y=x.tooltip.props,S=x.tooltip.updateProps;y==null&&S==null||u.Util.shallowEqual(y,S)||M.tooltip(t({},S))}},updateCoord:function(M,x){var y=x.coord;if(!!y){var S=y.props,P=y.updateProps;if(!(S==null||P==null)){var A=u.Util.without(P,b.concat(["type"]));if(!u.Util.shallowEqual(S,P)){var O=M.coord(P.type,A);y.g2Instance=O,u.Prop.init(b,P,function(L,H){H==="reflect"?u.Util.each(L,function(F){return O[H](F)}):H==="transpose"?L[0]===!0&&O[H].apply(O,f(L)):O[H].apply(O,f(L))})}}}},updateLegend:function(M,x){var y=x.props,S=x.updateProps;if(!!S&&!u.Util.shallowEqual(y,S)){var P=S.name,A=S.visible,O=v(S,["name","visible"]),L=A&&O;M.legend.apply(M,f(P?[P,L]:[L]))}},updateLegends:function(M,x){if(x!=null)for(var y in x)x[y]&&this.updateLegend(M,x[y])},updateLabel:function(M,x,y){if(!(x==null||y==null)){var S=x.content,P=v(x,["content"]),A=y.content,O=v(y,["content"]);(!u.Util.shallowEqual(P,O)||!u.Util.shallowEqual(S,A))&&(u.Util.isArray(A)?M.label(A[0],A[1],O):M.label(A,O))}},updateGeom:function(M,x){var y=x.props,S=x.updateProps;if(!(!y||!S)&&y.type===S.type){var P=x.g2Instance;if(u.Util.shallowEqual(y,S)){x.label&&this.updateLabel(P,x.label.props,x.label.updateProps);return}var A=y.adjust,O=v(y,["adjust"]),L=S.adjust,H=v(S,["adjust"]);(A||L)&&P.adjust(L),u.Prop.update(g,O,H,function(F,Z){P[Z].apply(P,f(F))}),x.label&&this.updateLabel(P,x.label.props,x.label.updateProps)}},updateGeoms:function(M,x){if(x==null)return!1;for(var y in x)x[y]&&this.updateGeom(M,x[y]);return!1},isTypedGuideChanged:function(M){return!u.Util.shallowEqual(M.props,M.updateProps)},updateGuide:function(M,x){if(!(!x||!x.elements)){var y=x.elements,S=!1;for(var P in y)if(y[P]&&(y[P].updateProps||this.isTypedGuideChanged(y[P]))){S=!0;break}S&&(i.default.mergeGuide(x,!0),M.guide().clear(),h.default.guide(M,x))}},updateView:function(M,x){if(!(!x||!x.props||!x.updateProps||x.parentInfo.name==="Facet")){var y=x.g2Instance,S=x.props,P=x.updateProps,A=S.scale,O=S.data,L=S.animate,H=S.axis,F=S.filter,Z=P.scale,G=P.animate,U=P.data,Y=P.axis,J=P.filter;L!==G&&y.animate(G),O!==U&&y.changeData(U),u.Util.shallowEqual(A,Z)||y.scale(Z),u.Util.shallowEqual(F,J)||J.forEach(function(rt){y.filter(rt[0],rt[1])}),H!==Y&&y.axis(Y),this.updateCoord(y,x),this.updateAxises(y,x.axises),this.updateGeoms(y,x.geoms),this.updateGuide(y,x.guide)}},updateViews:function(M,x){var y=x.views;if(!!y)for(var S in y){var P=y[S];P&&(P.needReExecute||this.needReExecute(P))?(h.default.synchronizeG2View(P.g2Instance,P),y[S].needReExecute=!1):this.updateView(M,P)}},updateFacet:function(M,x){var y=x.facet;if(!!y){var S=y.props,P=y.updateProps;if(!(S==null||P==null)){var A=S.type,O=v(S,["type"]),L=P.type,H=v(P,["type"]);(A!==L||!u.Util.shallowEqual(O,H))&&(y.props=P,h.default.facet(M,x))}}}};T.default=m},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=Object.assign||function(M){for(var x=1;x<arguments.length;x++){var y=arguments[x];for(var S in y)Object.prototype.hasOwnProperty.call(y,S)&&(M[S]=y[S])}return M},u=function(){function M(x,y){for(var S=0;S<y.length;S++){var P=y[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(x,P.key,P)}}return function(x,y,S){return y&&M(x.prototype,y),S&&M(x,S),x}}(),s=e(433),c=b(s),r=e(87),h=b(r),n=e(435),i=b(n),a=e(434),o=b(a),l=e(197),f=b(l),v=e(88);function b(M){return M&&M.__esModule?M:{default:M}}function g(M,x){var y={};for(var S in M)x.indexOf(S)>=0||!Object.prototype.hasOwnProperty.call(M,S)||(y[S]=M[S]);return y}function m(M,x){if(!(M instanceof x))throw new TypeError("Cannot call a class as a function")}var _=function(){function M(){m(this,M),this.config={},this.elementInfos={},this.added=!1,this.initedG2=!1,this.updated=!1,this.deleted=!1,this.deleteInfos={}}return u(M,[{key:"calUpdateFlag",value:function(y,S){var P=this.elementInfos[S].props,A=P.children,O=g(P,["children"]),L=this.elementInfos[S].updateProps,H=L.children,F=g(L,["children"]);if(y==="Chart"||y==="View"){var Z=O.data,G=g(O,["data"]),U=F.data,Y=g(F,["data"]);(Z!==U||!v.Util.isEqual(G,Y))&&(this.updated=!0)}else v.Util.isEqual(O,F)||(this.updated=!0)}},{key:"addElement",value:function(y,S,P,A,O){!this.chart&&this.initedG2||(this.added=!0,this.elementInfos[S]={id:S,viewId:O,parentInfo:A,name:y,props:t({},P)},A&&!this.elementInfos[A.id]&&(this.elementInfos[A.id]={id:A.id,name:A.name}),c.default.addElement(y,this.config,this.elementInfos[S]))}},{key:"updateElement",value:function(y,S,P){this.elementInfos[S].updateProps=t({},P),this.calUpdateFlag(y,S)}},{key:"deleteElement",value:function(y,S){!this.chart||(this.deleteInfos[S]=S,this.deleted=!0)}},{key:"createG2Instance",value:function(){var y=this.config,S=f.default.createChart(y,this.elementInfos);return f.default.executeChartConfig(S,y,this.elementInfos),f.default.synchronizeG2Add(S,y,this.elementInfos),S.render(),this.chart=S,this.initedG2=!0,this.resetStates(),S}},{key:"destory",value:function(){this.chart.destroy(),this.chart=null}},{key:"resetStates",value:function(){var y=this.elementInfos;for(var S in y)y[S].updateProps&&delete y[S].updateProps,this.deleteInfos[S]&&delete y[S];this.added=!1,this.updated=!1,this.deleteInfos={}}},{key:"reExecuteChart",value:function(){return this.chart.clear(),h.default.merge(this.config,this.deleteInfos,this.elementInfos,!0),f.default.executeChartConfig(this.chart,this.config,this.elementInfos),f.default.synchronizeG2Add(this.chart,this.config,this.elementInfos),this.chart.repaint(),this.resetStates(),this.chart}},{key:"batchedUpdate",value:function(){return this.chart==null?null:this.config.chart.props.forceUpdate||i.default.needRebuildChart(this.config)?(h.default.merge(this.config,this.deleteInfos,this.elementInfos,!0),this.chart.destroy(),this.chart="destroy",this.createG2Instance()):o.default.needReExecute(this.deleteInfos,this.elementInfos)||i.default.needReExecute(this.config)?(this.reExecuteChart(),this.chart):(this.deleted&&(o.default.synchronizeG2Delete(this.chart,this.config,this.deleteInfos,this.elementInfos),h.default.mergeDelete(this.config,this.deleteInfos,this.elementInfos)),this.added&&f.default.synchronizeG2Add(this.chart,this.config),this.updated&&i.default.synchronizeG2Update(this.chart,this.config),(this.added||this.deleted||this.updated)&&this.chart.repaint(),h.default.mergeUpdate(this.config,!1),this.resetStates(),this.chart)}}]),M}();T.default=_},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(58),u=s(t);function s(c){return c&&c.__esModule?c:{default:c}}T.default={init:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=arguments[1],n=arguments[2];u.default.each(r,function(i){var a=h[i];a!==void 0&&(u.default.isArray(a)||(a=[a]),n(a,i))})},update:function(r,h,n,i){var a=void 0,o=void 0;u.default.each(r,function(l){a=h[l],o=n[l],u.default.shallowEqual(o,a)||(u.default.isArray(o)||(o=[o]),i(o,l))})}}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.default={}},function(E,T,e){"use strict";T.a=v;var t=e(90),u=e(89),s=e(198),c=-.14861,r=1.78277,h=-.29227,n=-.90649,i=1.97294,a=i*n,o=i*r,l=r*h-n*c;function f(g){if(g instanceof b)return new b(g.h,g.s,g.l,g.opacity);g instanceof u.a||(g=e.i(u.b)(g));var m=g.r/255,_=g.g/255,M=g.b/255,x=(l*M+a*m-o*_)/(l+a-o),y=M-x,S=(i*(_-x)-h*y)/n,P=Math.sqrt(S*S+y*y)/(i*x*(1-x)),A=P?Math.atan2(S,y)*s.a-120:NaN;return new b(A<0?A+360:A,P,x,g.opacity)}function v(g,m,_,M){return arguments.length===1?f(g):new b(g,m,_,M==null?1:M)}function b(g,m,_,M){this.h=+g,this.s=+m,this.l=+_,this.opacity=+M}e.i(t.a)(b,v,e.i(t.b)(u.c,{brighter:function(g){return g=g==null?u.d:Math.pow(u.d,g),new b(this.h,this.s,this.l*g,this.opacity)},darker:function(g){return g=g==null?u.e:Math.pow(u.e,g),new b(this.h,this.s,this.l*g,this.opacity)},rgb:function(){var g=isNaN(this.h)?0:(this.h+120)*s.b,m=+this.l,_=isNaN(this.s)?0:this.s*m*(1-m),M=Math.cos(g),x=Math.sin(g);return new u.a(255*(m+_*(c*M+r*x)),255*(m+_*(h*M+n*x)),255*(m+_*(i*M)),this.opacity)}}))},function(E,T,e){"use strict";T.b=b,T.a=P;var t=e(90),u=e(89),s=e(198),c=18,r=.96422,h=1,n=.82521,i=4/29,a=6/29,o=3*a*a,l=a*a*a;function f(L){if(L instanceof g)return new g(L.l,L.a,L.b,L.opacity);if(L instanceof A)return O(L);L instanceof u.a||(L=e.i(u.b)(L));var H=x(L.r),F=x(L.g),Z=x(L.b),G=m((.2225045*H+.7168786*F+.0606169*Z)/h),U,Y;return H===F&&F===Z?U=Y=G:(U=m((.4360747*H+.3850649*F+.1430804*Z)/r),Y=m((.0139322*H+.0971045*F+.7141733*Z)/n)),new g(116*G-16,500*(U-G),200*(G-Y),L.opacity)}function v(L,H){return new g(L,0,0,H==null?1:H)}function b(L,H,F,Z){return arguments.length===1?f(L):new g(L,H,F,Z==null?1:Z)}function g(L,H,F,Z){this.l=+L,this.a=+H,this.b=+F,this.opacity=+Z}e.i(t.a)(g,b,e.i(t.b)(u.c,{brighter:function(L){return new g(this.l+c*(L==null?1:L),this.a,this.b,this.opacity)},darker:function(L){return new g(this.l-c*(L==null?1:L),this.a,this.b,this.opacity)},rgb:function(){var L=(this.l+16)/116,H=isNaN(this.a)?L:L+this.a/500,F=isNaN(this.b)?L:L-this.b/200;return H=r*_(H),L=h*_(L),F=n*_(F),new u.a(M(3.1338561*H-1.6168667*L-.4906146*F),M(-.9787684*H+1.9161415*L+.033454*F),M(.0719453*H-.2289914*L+1.4052427*F),this.opacity)}}));function m(L){return L>l?Math.pow(L,1/3):L/o+i}function _(L){return L>a?L*L*L:o*(L-i)}function M(L){return 255*(L<=.0031308?12.92*L:1.055*Math.pow(L,1/2.4)-.055)}function x(L){return(L/=255)<=.04045?L/12.92:Math.pow((L+.055)/1.055,2.4)}function y(L){if(L instanceof A)return new A(L.h,L.c,L.l,L.opacity);if(L instanceof g||(L=f(L)),L.a===0&&L.b===0)return new A(NaN,0<L.l&&L.l<100?0:NaN,L.l,L.opacity);var H=Math.atan2(L.b,L.a)*s.a;return new A(H<0?H+360:H,Math.sqrt(L.a*L.a+L.b*L.b),L.l,L.opacity)}function S(L,H,F,Z){return arguments.length===1?y(L):new A(F,H,L,Z==null?1:Z)}function P(L,H,F,Z){return arguments.length===1?y(L):new A(L,H,F,Z==null?1:Z)}function A(L,H,F,Z){this.h=+L,this.c=+H,this.l=+F,this.opacity=+Z}function O(L){if(isNaN(L.h))return new g(L.l,0,0,L.opacity);var H=L.h*s.b;return new g(L.l,Math.cos(H)*L.c,Math.sin(H)*L.c,L.opacity)}e.i(t.a)(A,P,e.i(t.b)(u.c,{brighter:function(L){return new A(this.h,this.c,this.l+c*(L==null?1:L),this.opacity)},darker:function(L){return new A(this.h,this.c,this.l-c*(L==null?1:L),this.opacity)},rgb:function(){return O(this).rgb()}}))},function(E,T,e){"use strict";var t={value:function(){}};function u(){for(var n=0,i=arguments.length,a={},o;n<i;++n){if(!(o=arguments[n]+"")||o in a||/[\s.]/.test(o))throw new Error("illegal type: "+o);a[o]=[]}return new s(a)}function s(n){this._=n}function c(n,i){return n.trim().split(/^|\s+/).map(function(a){var o="",l=a.indexOf(".");if(l>=0&&(o=a.slice(l+1),a=a.slice(0,l)),a&&!i.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:o}})}s.prototype=u.prototype={constructor:s,on:function(n,i){var a=this._,o=c(n+"",a),l,f=-1,v=o.length;if(arguments.length<2){for(;++f<v;)if((l=(n=o[f]).type)&&(l=r(a[l],n.name)))return l;return}if(i!=null&&typeof i!="function")throw new Error("invalid callback: "+i);for(;++f<v;)if(l=(n=o[f]).type)a[l]=h(a[l],n.name,i);else if(i==null)for(l in a)a[l]=h(a[l],n.name,null);return this},copy:function(){var n={},i=this._;for(var a in i)n[a]=i[a].slice();return new s(n)},call:function(n,i){if((l=arguments.length-2)>0)for(var a=new Array(l),o=0,l,f;o<l;++o)a[o]=arguments[o+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(f=this._[n],o=0,l=f.length;o<l;++o)f[o].value.apply(i,a)},apply:function(n,i,a){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var o=this._[n],l=0,f=o.length;l<f;++l)o[l].value.apply(i,a)}};function r(n,i){for(var a=0,o=n.length,l;a<o;++a)if((l=n[a]).name===i)return l.value}function h(n,i,a){for(var o=0,l=n.length;o<l;++o)if(n[o].name===i){n[o]=t,n=n.slice(0,o).concat(n.slice(o+1));break}return a!=null&&n.push({name:i,value:a}),n}T.a=u},function(E,T,e){"use strict";var t=e(441);e.d(T,"a",function(){return t.a})},function(E,T,e){"use strict";e.d(T,"b",function(){return u}),e.d(T,"c",function(){return s}),e.d(T,"a",function(){return c});var t=1.70158,u=function r(h){h=+h;function n(i){return i*i*((h+1)*i-h)}return n.overshoot=r,n}(t),s=function r(h){h=+h;function n(i){return--i*i*((h+1)*i+h)+1}return n.overshoot=r,n}(t),c=function r(h){h=+h;function n(i){return((i*=2)<1?i*i*((h+1)*i-h):(i-=2)*i*((h+1)*i+h)+2)/2}return n.overshoot=r,n}(t)},function(E,T,e){"use strict";T.b=l,T.a=f,T.c=v;var t=4/11,u=6/11,s=8/11,c=3/4,r=9/11,h=10/11,n=15/16,i=21/22,a=63/64,o=1/t/t;function l(b){return 1-f(1-b)}function f(b){return(b=+b)<t?o*b*b:b<s?o*(b-=u)*b+c:b<h?o*(b-=r)*b+n:o*(b-=i)*b+a}function v(b){return((b*=2)<=1?1-f(1-b):f(b-1)+1)/2}},function(E,T,e){"use strict";T.b=t,T.c=u,T.a=s;function t(c){return 1-Math.sqrt(1-c*c)}function u(c){return Math.sqrt(1- --c*c)}function s(c){return((c*=2)<=1?1-Math.sqrt(1-c*c):Math.sqrt(1-(c-=2)*c)+1)/2}},function(E,T,e){"use strict";T.b=t,T.c=u,T.a=s;function t(c){return c*c*c}function u(c){return--c*c*c+1}function s(c){return((c*=2)<=1?c*c*c:(c-=2)*c*c+2)/2}},function(E,T,e){"use strict";e.d(T,"b",function(){return c}),e.d(T,"a",function(){return r}),e.d(T,"c",function(){return h});var t=2*Math.PI,u=1,s=.3,c=function n(i,a){var o=Math.asin(1/(i=Math.max(1,i)))*(a/=t);function l(f){return i*Math.pow(2,10*--f)*Math.sin((o-f)/a)}return l.amplitude=function(f){return n(f,a*t)},l.period=function(f){return n(i,f)},l}(u,s),r=function n(i,a){var o=Math.asin(1/(i=Math.max(1,i)))*(a/=t);function l(f){return 1-i*Math.pow(2,-10*(f=+f))*Math.sin((f+o)/a)}return l.amplitude=function(f){return n(f,a*t)},l.period=function(f){return n(i,f)},l}(u,s),h=function n(i,a){var o=Math.asin(1/(i=Math.max(1,i)))*(a/=t);function l(f){return((f=f*2-1)<0?i*Math.pow(2,10*f)*Math.sin((o-f)/a):2-i*Math.pow(2,-10*f)*Math.sin((o+f)/a))/2}return l.amplitude=function(f){return n(f,a*t)},l.period=function(f){return n(i,f)},l}(u,s)},function(E,T,e){"use strict";T.b=t,T.c=u,T.a=s;function t(c){return Math.pow(2,10*c-10)}function u(c){return 1-Math.pow(2,-10*c)}function s(c){return((c*=2)<=1?Math.pow(2,10*c-10):2-Math.pow(2,10-10*c))/2}},function(E,T,e){"use strict";T.a=t;function t(u){return+u}},function(E,T,e){"use strict";e.d(T,"b",function(){return u}),e.d(T,"c",function(){return s}),e.d(T,"a",function(){return c});var t=3,u=function r(h){h=+h;function n(i){return Math.pow(i,h)}return n.exponent=r,n}(t),s=function r(h){h=+h;function n(i){return 1-Math.pow(1-i,h)}return n.exponent=r,n}(t),c=function r(h){h=+h;function n(i){return((i*=2)<=1?Math.pow(i,h):2-Math.pow(2-i,h))/2}return n.exponent=r,n}(t)},function(E,T,e){"use strict";T.b=t,T.c=u,T.a=s;function t(c){return c*c}function u(c){return c*(2-c)}function s(c){return((c*=2)<=1?c*c:--c*(2-c)+1)/2}},function(E,T,e){"use strict";T.b=s,T.c=c,T.a=r;var t=Math.PI,u=t/2;function s(h){return 1-Math.cos(h*u)}function c(h){return Math.sin(h*u)}function r(h){return(1-Math.cos(t*h))/2}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(92);e.d(T,"interpolate",function(){return t.a});var u=e(200);e.d(T,"interpolateArray",function(){return u.a});var s=e(91);e.d(T,"interpolateBasis",function(){return s.a});var c=e(201);e.d(T,"interpolateBasisClosed",function(){return c.a});var r=e(203);e.d(T,"interpolateDate",function(){return r.a});var h=e(59);e.d(T,"interpolateNumber",function(){return h.a});var n=e(204);e.d(T,"interpolateObject",function(){return n.a});var i=e(459);e.d(T,"interpolateRound",function(){return i.a});var a=e(206);e.d(T,"interpolateString",function(){return a.a});var o=e(461);e.d(T,"interpolateTransformCss",function(){return o.a}),e.d(T,"interpolateTransformSvg",function(){return o.b});var l=e(463);e.d(T,"interpolateZoom",function(){return l.a});var f=e(205);e.d(T,"interpolateRgb",function(){return f.a}),e.d(T,"interpolateRgbBasis",function(){return f.b}),e.d(T,"interpolateRgbBasisClosed",function(){return f.c});var v=e(456);e.d(T,"interpolateHsl",function(){return v.a}),e.d(T,"interpolateHslLong",function(){return v.b});var b=e(457);e.d(T,"interpolateLab",function(){return b.a});var g=e(455);e.d(T,"interpolateHcl",function(){return g.a}),e.d(T,"interpolateHclLong",function(){return g.b});var m=e(454);e.d(T,"interpolateCubehelix",function(){return m.a}),e.d(T,"interpolateCubehelixLong",function(){return m.b});var _=e(458);e.d(T,"quantize",function(){return _.a})},function(E,T,e){"use strict";e.d(T,"b",function(){return c});var t=e(12),u=e(41);function s(r){return function h(n){n=+n;function i(a,o){var l=r((a=e.i(t.a)(a)).h,(o=e.i(t.a)(o)).h),f=e.i(u.a)(a.s,o.s),v=e.i(u.a)(a.l,o.l),b=e.i(u.a)(a.opacity,o.opacity);return function(g){return a.h=l(g),a.s=f(g),a.l=v(Math.pow(g,n)),a.opacity=b(g),a+""}}return i.gamma=h,i}(1)}T.a=s(u.b);var c=s(u.a)},function(E,T,e){"use strict";e.d(T,"b",function(){return c});var t=e(12),u=e(41);function s(r){return function(h,n){var i=r((h=e.i(t.b)(h)).h,(n=e.i(t.b)(n)).h),a=e.i(u.a)(h.c,n.c),o=e.i(u.a)(h.l,n.l),l=e.i(u.a)(h.opacity,n.opacity);return function(f){return h.h=i(f),h.c=a(f),h.l=o(f),h.opacity=l(f),h+""}}}T.a=s(u.b);var c=s(u.a)},function(E,T,e){"use strict";e.d(T,"b",function(){return c});var t=e(12),u=e(41);function s(r){return function(h,n){var i=r((h=e.i(t.d)(h)).h,(n=e.i(t.d)(n)).h),a=e.i(u.a)(h.s,n.s),o=e.i(u.a)(h.l,n.l),l=e.i(u.a)(h.opacity,n.opacity);return function(f){return h.h=i(f),h.s=a(f),h.l=o(f),h.opacity=l(f),h+""}}}T.a=s(u.b);var c=s(u.a)},function(E,T,e){"use strict";T.a=s;var t=e(12),u=e(41);function s(c,r){var h=e.i(u.a)((c=e.i(t.c)(c)).l,(r=e.i(t.c)(r)).l),n=e.i(u.a)(c.a,r.a),i=e.i(u.a)(c.b,r.b),a=e.i(u.a)(c.opacity,r.opacity);return function(o){return c.l=h(o),c.a=n(o),c.b=i(o),c.opacity=a(o),c+""}}},function(E,T,e){"use strict";T.a=function(t,u){for(var s=new Array(u),c=0;c<u;++c)s[c]=t(c/(u-1));return s}},function(E,T,e){"use strict";T.a=function(t,u){return t=+t,u-=t,function(s){return Math.round(t+u*s)}}},function(E,T,e){"use strict";e.d(T,"a",function(){return u});var t=180/Math.PI,u={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};T.b=function(s,c,r,h,n,i){var a,o,l;return(a=Math.sqrt(s*s+c*c))&&(s/=a,c/=a),(l=s*r+c*h)&&(r-=s*l,h-=c*l),(o=Math.sqrt(r*r+h*h))&&(r/=o,h/=o,l/=o),s*h<c*r&&(s=-s,c=-c,l=-l,a=-a),{translateX:n,translateY:i,rotate:Math.atan2(c,s)*t,skewX:Math.atan(l)*t,scaleX:a,scaleY:o}}},function(E,T,e){"use strict";e.d(T,"a",function(){return c}),e.d(T,"b",function(){return r});var t=e(59),u=e(462);function s(h,n,i,a){function o(g){return g.length?g.pop()+" ":""}function l(g,m,_,M,x,y){if(g!==_||m!==M){var S=x.push("translate(",null,n,null,i);y.push({i:S-4,x:e.i(t.a)(g,_)},{i:S-2,x:e.i(t.a)(m,M)})}else(_||M)&&x.push("translate("+_+n+M+i)}function f(g,m,_,M){g!==m?(g-m>180?m+=360:m-g>180&&(g+=360),M.push({i:_.push(o(_)+"rotate(",null,a)-2,x:e.i(t.a)(g,m)})):m&&_.push(o(_)+"rotate("+m+a)}function v(g,m,_,M){g!==m?M.push({i:_.push(o(_)+"skewX(",null,a)-2,x:e.i(t.a)(g,m)}):m&&_.push(o(_)+"skewX("+m+a)}function b(g,m,_,M,x,y){if(g!==_||m!==M){var S=x.push(o(x)+"scale(",null,",",null,")");y.push({i:S-4,x:e.i(t.a)(g,_)},{i:S-2,x:e.i(t.a)(m,M)})}else(_!==1||M!==1)&&x.push(o(x)+"scale("+_+","+M+")")}return function(g,m){var _=[],M=[];return g=h(g),m=h(m),l(g.translateX,g.translateY,m.translateX,m.translateY,_,M),f(g.rotate,m.rotate,_,M),v(g.skewX,m.skewX,_,M),b(g.scaleX,g.scaleY,m.scaleX,m.scaleY,_,M),g=m=null,function(x){for(var y=-1,S=M.length,P;++y<S;)_[(P=M[y]).i]=P.x(x);return _.join("")}}}var c=s(u.a,"px, ","px)","deg)"),r=s(u.b,", ",")",")")},function(E,T,e){"use strict";T.a=h,T.b=n;var t=e(460),u,s,c,r;function h(i){return i==="none"?t.a:(u||(u=document.createElement("DIV"),s=document.documentElement,c=document.defaultView),u.style.transform=i,i=c.getComputedStyle(s.appendChild(u),null).getPropertyValue("transform"),s.removeChild(u),i=i.slice(7,-1).split(","),e.i(t.b)(+i[0],+i[1],+i[2],+i[3],+i[4],+i[5]))}function n(i){return i==null||(r||(r=document.createElementNS("http://www.w3.org/2000/svg","g")),r.setAttribute("transform",i),!(i=r.transform.baseVal.consolidate()))?t.a:(i=i.matrix,e.i(t.b)(i.a,i.b,i.c,i.d,i.e,i.f))}},function(E,T,e){"use strict";var t=Math.SQRT2,u=2,s=4,c=1e-12;function r(i){return((i=Math.exp(i))+1/i)/2}function h(i){return((i=Math.exp(i))-1/i)/2}function n(i){return((i=Math.exp(2*i))-1)/(i+1)}T.a=function(i,a){var o=i[0],l=i[1],f=i[2],v=a[0],b=a[1],g=a[2],m=v-o,_=b-l,M=m*m+_*_,x,y;if(M<c)y=Math.log(g/f)/t,x=function(H){return[o+H*m,l+H*_,f*Math.exp(t*H*y)]};else{var S=Math.sqrt(M),P=(g*g-f*f+s*M)/(2*f*u*S),A=(g*g-f*f-s*M)/(2*g*u*S),O=Math.log(Math.sqrt(P*P+1)-P),L=Math.log(Math.sqrt(A*A+1)-A);y=(L-O)/t,x=function(H){var F=H*y,Z=r(O),G=f/(u*S)*(Z*n(t*F+O)-h(O));return[o+G*m,l+G*_,f*Z/r(t*F+O)]}}return x.duration=y*1e3,x}},function(E,T,e){"use strict";var t=e(12),u=e(32);function s(h){return function n(i){i=+i;function a(o,l){var f=h((o=e.i(t.a)(o)).h,(l=e.i(t.a)(l)).h),v=e.i(u.a)(o.s,l.s),b=e.i(u.a)(o.l,l.l),g=e.i(u.a)(o.opacity,l.opacity);return function(m){return o.h=f(m),o.s=v(m),o.l=b(Math.pow(m,i)),o.opacity=g(m),o+""}}return a.gamma=n,a}(1)}var c=s(u.b),r=s(u.a)},function(E,T,e){"use strict";var t=function(u){var s=u.length;return function(c){return u[Math.max(0,Math.min(s-1,Math.floor(c*s)))]}}},function(E,T,e){"use strict";var t=e(12),u=e(32);function s(h){return function(n,i){var a=h((n=e.i(t.b)(n)).h,(i=e.i(t.b)(i)).h),o=e.i(u.a)(n.c,i.c),l=e.i(u.a)(n.l,i.l),f=e.i(u.a)(n.opacity,i.opacity);return function(v){return n.h=a(v),n.c=o(v),n.l=l(v),n.opacity=f(v),n+""}}}var c=s(u.b),r=s(u.a)},function(E,T,e){"use strict";var t=e(12),u=e(32);function s(h){return function(n,i){var a=h((n=e.i(t.d)(n)).h,(i=e.i(t.d)(i)).h),o=e.i(u.a)(n.s,i.s),l=e.i(u.a)(n.l,i.l),f=e.i(u.a)(n.opacity,i.opacity);return function(v){return n.h=a(v),n.s=o(v),n.l=l(v),n.opacity=f(v),n+""}}}var c=s(u.b),r=s(u.a)},function(E,T,e){"use strict";var t=e(32),u=function(s,c){var r=e.i(t.b)(+s,+c);return function(h){var n=r(h);return n-360*Math.floor(n/360)}}},function(E,T,e){"use strict";var t=e(12),u=e(32);function s(c,r){var h=e.i(u.a)((c=e.i(t.c)(c)).l,(r=e.i(t.c)(r)).l),n=e.i(u.a)(c.a,r.a),i=e.i(u.a)(c.b,r.b),a=e.i(u.a)(c.opacity,r.opacity);return function(o){return c.l=h(o),c.a=n(o),c.b=i(o),c.opacity=a(o),c+""}}},function(E,T,e){"use strict";function t(u,s){for(var c=0,r=s.length-1,h=s[0],n=new Array(r<0?0:r);c<r;)n[c]=u(h,h=s[++c]);return function(i){var a=Math.max(0,Math.min(r-1,Math.floor(i*=r)));return n[a](i-a)}}},function(E,T,e){"use strict";var t=function(u,s){for(var c=new Array(s),r=0;r<s;++r)c[r]=u(r/(s-1));return c}},function(E,T,e){"use strict";var t=function(u,s){return u=+u,s=+s,function(c){return Math.round(u*(1-c)+s*c)}}},function(E,T,e){"use strict";e.d(T,"a",function(){return u});var t=180/Math.PI,u={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};T.b=function(s,c,r,h,n,i){var a,o,l;return(a=Math.sqrt(s*s+c*c))&&(s/=a,c/=a),(l=s*r+c*h)&&(r-=s*l,h-=c*l),(o=Math.sqrt(r*r+h*h))&&(r/=o,h/=o,l/=o),s*h<c*r&&(s=-s,c=-c,l=-l,a=-a),{translateX:n,translateY:i,rotate:Math.atan2(c,s)*t,skewX:Math.atan(l)*t,scaleX:a,scaleY:o}}},function(E,T,e){"use strict";e.d(T,"a",function(){return c}),e.d(T,"b",function(){return r});var t=e(60),u=e(475);function s(h,n,i,a){function o(g){return g.length?g.pop()+" ":""}function l(g,m,_,M,x,y){if(g!==_||m!==M){var S=x.push("translate(",null,n,null,i);y.push({i:S-4,x:e.i(t.a)(g,_)},{i:S-2,x:e.i(t.a)(m,M)})}else(_||M)&&x.push("translate("+_+n+M+i)}function f(g,m,_,M){g!==m?(g-m>180?m+=360:m-g>180&&(g+=360),M.push({i:_.push(o(_)+"rotate(",null,a)-2,x:e.i(t.a)(g,m)})):m&&_.push(o(_)+"rotate("+m+a)}function v(g,m,_,M){g!==m?M.push({i:_.push(o(_)+"skewX(",null,a)-2,x:e.i(t.a)(g,m)}):m&&_.push(o(_)+"skewX("+m+a)}function b(g,m,_,M,x,y){if(g!==_||m!==M){var S=x.push(o(x)+"scale(",null,",",null,")");y.push({i:S-4,x:e.i(t.a)(g,_)},{i:S-2,x:e.i(t.a)(m,M)})}else(_!==1||M!==1)&&x.push(o(x)+"scale("+_+","+M+")")}return function(g,m){var _=[],M=[];return g=h(g),m=h(m),l(g.translateX,g.translateY,m.translateX,m.translateY,_,M),f(g.rotate,m.rotate,_,M),v(g.skewX,m.skewX,_,M),b(g.scaleX,g.scaleY,m.scaleX,m.scaleY,_,M),g=m=null,function(x){for(var y=-1,S=M.length,P;++y<S;)_[(P=M[y]).i]=P.x(x);return _.join("")}}}var c=s(u.a,"px, ","px)","deg)"),r=s(u.b,", ",")",")")},function(E,T,e){"use strict";T.a=h,T.b=n;var t=e(473),u,s,c,r;function h(i){return i==="none"?t.a:(u||(u=document.createElement("DIV"),s=document.documentElement,c=document.defaultView),u.style.transform=i,i=c.getComputedStyle(s.appendChild(u),null).getPropertyValue("transform"),s.removeChild(u),i=i.slice(7,-1).split(","),e.i(t.b)(+i[0],+i[1],+i[2],+i[3],+i[4],+i[5]))}function n(i){return i==null||(r||(r=document.createElementNS("http://www.w3.org/2000/svg","g")),r.setAttribute("transform",i),!(i=r.transform.baseVal.consolidate()))?t.a:(i=i.matrix,e.i(t.b)(i.a,i.b,i.c,i.d,i.e,i.f))}},function(E,T,e){"use strict";var t=Math.SQRT2,u=2,s=4,c=1e-12;function r(a){return((a=Math.exp(a))+1/a)/2}function h(a){return((a=Math.exp(a))-1/a)/2}function n(a){return((a=Math.exp(2*a))-1)/(a+1)}var i=function(a,o){var l=a[0],f=a[1],v=a[2],b=o[0],g=o[1],m=o[2],_=b-l,M=g-f,x=_*_+M*M,y,S;if(x<c)S=Math.log(m/v)/t,y=function(F){return[l+F*_,f+F*M,v*Math.exp(t*F*S)]};else{var P=Math.sqrt(x),A=(m*m-v*v+s*x)/(2*v*u*P),O=(m*m-v*v-s*x)/(2*m*u*P),L=Math.log(Math.sqrt(A*A+1)-A),H=Math.log(Math.sqrt(O*O+1)-O);S=(H-L)/t,y=function(F){var Z=F*S,G=r(L),U=v/(u*P)*(G*n(t*Z+L)-h(L));return[l+U*_,f+U*M,v*G/r(t*Z+L)]}}return y.duration=S*1e3,y}},function(E,T,e){"use strict";T.a=function(t){return function(){return t}}},function(E,T,e){"use strict";var t=e(61),u=e(215);T.a=function(s){return e.i(u.a)(e.i(t.a)(s).call(document.documentElement))}},function(E,T,e){"use strict";T.a=u;var t=0;function u(){return new s}function s(){this._="@"+(++t).toString(36)}s.prototype=u.prototype={constructor:s,get:function(c){for(var r=this._;!(r in c);)if(!(c=c.parentNode))return;return c[r]},set:function(c,r){return c[this._]=r},remove:function(c){return this._ in c&&delete c[this._]},toString:function(){return this._}}},function(E,T,e){"use strict";var t=e(101),u=e(62);T.a=function(s){var c=e.i(t.a)();return c.changedTouches&&(c=c.changedTouches[0]),e.i(u.a)(s,c)}},function(E,T,e){"use strict";var t=e(18);T.a=function(u){return typeof u=="string"?new t.b([document.querySelectorAll(u)],[document.documentElement]):new t.b([u==null?[]:u],t.c)}},function(E,T,e){"use strict";var t=e(61);T.a=function(u){var s=typeof u=="function"?u:e.i(t.a)(u);return this.select(function(){return this.appendChild(s.apply(this,arguments))})}},function(E,T,e){"use strict";var t=e(97);function u(i){return function(){this.removeAttribute(i)}}function s(i){return function(){this.removeAttributeNS(i.space,i.local)}}function c(i,a){return function(){this.setAttribute(i,a)}}function r(i,a){return function(){this.setAttributeNS(i.space,i.local,a)}}function h(i,a){return function(){var o=a.apply(this,arguments);o==null?this.removeAttribute(i):this.setAttribute(i,o)}}function n(i,a){return function(){var o=a.apply(this,arguments);o==null?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,o)}}T.a=function(i,a){var o=e.i(t.a)(i);if(arguments.length<2){var l=this.node();return o.local?l.getAttributeNS(o.space,o.local):l.getAttribute(o)}return this.each((a==null?o.local?s:u:typeof a=="function"?o.local?n:h:o.local?r:c)(o,a))}},function(E,T,e){"use strict";T.a=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}},function(E,T,e){"use strict";function t(a){return a.trim().split(/^|\s+/)}function u(a){return a.classList||new s(a)}function s(a){this._node=a,this._names=t(a.getAttribute("class")||"")}s.prototype={add:function(a){var o=this._names.indexOf(a);o<0&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var o=this._names.indexOf(a);o>=0&&(this._names.splice(o,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};function c(a,o){for(var l=u(a),f=-1,v=o.length;++f<v;)l.add(o[f])}function r(a,o){for(var l=u(a),f=-1,v=o.length;++f<v;)l.remove(o[f])}function h(a){return function(){c(this,a)}}function n(a){return function(){r(this,a)}}function i(a,o){return function(){(o.apply(this,arguments)?c:r)(this,a)}}T.a=function(a,o){var l=t(a+"");if(arguments.length<2){for(var f=u(this.node()),v=-1,b=l.length;++v<b;)if(!f.contains(l[v]))return!1;return!0}return this.each((typeof o=="function"?i:o?h:n)(l,o))}},function(E,T,e){"use strict";function t(){var s=this.cloneNode(!1),c=this.parentNode;return c?c.insertBefore(s,this.nextSibling):s}function u(){var s=this.cloneNode(!0),c=this.parentNode;return c?c.insertBefore(s,this.nextSibling):s}T.a=function(s){return this.select(s?u:t)}},function(E,T,e){"use strict";var t=e(18),u=e(216),s=e(477),c="$";function r(n,i,a,o,l,f){for(var v=0,b,g=i.length,m=f.length;v<m;++v)(b=i[v])?(b.__data__=f[v],o[v]=b):a[v]=new u.b(n,f[v]);for(;v<g;++v)(b=i[v])&&(l[v]=b)}function h(n,i,a,o,l,f,v){var b,g,m={},_=i.length,M=f.length,x=new Array(_),y;for(b=0;b<_;++b)(g=i[b])&&(x[b]=y=c+v.call(g,g.__data__,b,i),y in m?l[b]=g:m[y]=g);for(b=0;b<M;++b)y=c+v.call(n,f[b],b,f),(g=m[y])?(o[b]=g,g.__data__=f[b],m[y]=null):a[b]=new u.b(n,f[b]);for(b=0;b<_;++b)(g=i[b])&&m[x[b]]===g&&(l[b]=g)}T.a=function(n,i){if(!n)return y=new Array(this.size()),m=-1,this.each(function(G){y[++m]=G}),y;var a=i?h:r,o=this._parents,l=this._groups;typeof n!="function"&&(n=e.i(s.a)(n));for(var f=l.length,v=new Array(f),b=new Array(f),g=new Array(f),m=0;m<f;++m){var _=o[m],M=l[m],x=M.length,y=n.call(_,_&&_.__data__,m,o),S=y.length,P=b[m]=new Array(S),A=v[m]=new Array(S),O=g[m]=new Array(x);a(_,M,P,A,O,y,i);for(var L=0,H=0,F,Z;L<S;++L)if(F=P[L]){for(L>=H&&(H=L+1);!(Z=A[H])&&++H<S;);F._next=Z||null}}return v=new t.b(v,o),v._enter=b,v._exit=g,v}},function(E,T,e){"use strict";T.a=function(t){return arguments.length?this.property("__data__",t):this.node().__data__}},function(E,T,e){"use strict";var t=e(102);function u(r,h,n){var i=e.i(t.a)(r),a=i.CustomEvent;typeof a=="function"?a=new a(h,n):(a=i.document.createEvent("Event"),n?(a.initEvent(h,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(h,!1,!1)),r.dispatchEvent(a)}function s(r,h){return function(){return u(this,r,h)}}function c(r,h){return function(){return u(this,r,h.apply(this,arguments))}}T.a=function(r,h){return this.each((typeof h=="function"?c:s)(r,h))}},function(E,T,e){"use strict";T.a=function(t){for(var u=this._groups,s=0,c=u.length;s<c;++s)for(var r=u[s],h=0,n=r.length,i;h<n;++h)(i=r[h])&&t.call(i,i.__data__,h,r);return this}},function(E,T,e){"use strict";T.a=function(){return!this.node()}},function(E,T,e){"use strict";var t=e(217),u=e(18);T.a=function(){return new u.b(this._exit||this._groups.map(t.a),this._parents)}},function(E,T,e){"use strict";var t=e(18),u=e(214);T.a=function(s){typeof s!="function"&&(s=e.i(u.a)(s));for(var c=this._groups,r=c.length,h=new Array(r),n=0;n<r;++n)for(var i=c[n],a=i.length,o=h[n]=[],l,f=0;f<a;++f)(l=i[f])&&s.call(l,l.__data__,f,i)&&o.push(l);return new t.b(h,this._parents)}},function(E,T,e){"use strict";function t(){this.innerHTML=""}function u(c){return function(){this.innerHTML=c}}function s(c){return function(){var r=c.apply(this,arguments);this.innerHTML=r==null?"":r}}T.a=function(c){return arguments.length?this.each(c==null?t:(typeof c=="function"?s:u)(c)):this.node().innerHTML}},function(E,T,e){"use strict";var t=e(61),u=e(100);function s(){return null}T.a=function(c,r){var h=typeof c=="function"?c:e.i(t.a)(c),n=r==null?s:typeof r=="function"?r:e.i(u.a)(r);return this.select(function(){return this.insertBefore(h.apply(this,arguments),n.apply(this,arguments)||null)})}},function(E,T,e){"use strict";T.a=function(t,u,s){var c=this.enter(),r=this,h=this.exit();return c=typeof t=="function"?t(c):c.append(t+""),u!=null&&(r=u(r)),s==null?h.remove():s(h),c&&r?c.merge(r).order():r}},function(E,T,e){"use strict";function t(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}T.a=function(){return this.each(t)}},function(E,T,e){"use strict";var t=e(18);T.a=function(u){for(var s=this._groups,c=u._groups,r=s.length,h=c.length,n=Math.min(r,h),i=new Array(r),a=0;a<n;++a)for(var o=s[a],l=c[a],f=o.length,v=i[a]=new Array(f),b,g=0;g<f;++g)(b=o[g]||l[g])&&(v[g]=b);for(;a<r;++a)i[a]=s[a];return new t.b(i,this._parents)}},function(E,T,e){"use strict";T.a=function(){for(var t=this._groups,u=0,s=t.length;u<s;++u)for(var c=t[u],r=0,h=c.length;r<h;++r){var n=c[r];if(n)return n}return null}},function(E,T,e){"use strict";T.a=function(){var t=new Array(this.size()),u=-1;return this.each(function(){t[++u]=this}),t}},function(E,T,e){"use strict";T.a=function(){for(var t=this._groups,u=-1,s=t.length;++u<s;)for(var c=t[u],r=c.length-1,h=c[r],n;--r>=0;)(n=c[r])&&(h&&n.compareDocumentPosition(h)^4&&h.parentNode.insertBefore(n,h),h=n);return this}},function(E,T,e){"use strict";function t(c){return function(){delete this[c]}}function u(c,r){return function(){this[c]=r}}function s(c,r){return function(){var h=r.apply(this,arguments);h==null?delete this[c]:this[c]=h}}T.a=function(c,r){return arguments.length>1?this.each((r==null?t:typeof r=="function"?s:u)(c,r)):this.node()[c]}},function(E,T,e){"use strict";function t(){this.nextSibling&&this.parentNode.appendChild(this)}T.a=function(){return this.each(t)}},function(E,T,e){"use strict";function t(){var u=this.parentNode;u&&u.removeChild(this)}T.a=function(){return this.each(t)}},function(E,T,e){"use strict";var t=e(18),u=e(100);T.a=function(s){typeof s!="function"&&(s=e.i(u.a)(s));for(var c=this._groups,r=c.length,h=new Array(r),n=0;n<r;++n)for(var i=c[n],a=i.length,o=h[n]=new Array(a),l,f,v=0;v<a;++v)(l=i[v])&&(f=s.call(l,l.__data__,v,i))&&("__data__"in l&&(f.__data__=l.__data__),o[v]=f);return new t.b(h,this._parents)}},function(E,T,e){"use strict";var t=e(18),u=e(219);T.a=function(s){typeof s!="function"&&(s=e.i(u.a)(s));for(var c=this._groups,r=c.length,h=[],n=[],i=0;i<r;++i)for(var a=c[i],o=a.length,l,f=0;f<o;++f)(l=a[f])&&(h.push(s.call(l,l.__data__,f,a)),n.push(l));return new t.b(h,n)}},function(E,T,e){"use strict";T.a=function(){var t=0;return this.each(function(){++t}),t}},function(E,T,e){"use strict";var t=e(18);T.a=function(s){s||(s=u);function c(b,g){return b&&g?s(b.__data__,g.__data__):!b-!g}for(var r=this._groups,h=r.length,n=new Array(h),i=0;i<h;++i){for(var a=r[i],o=a.length,l=n[i]=new Array(o),f,v=0;v<o;++v)(f=a[v])&&(l[v]=f);l.sort(c)}return new t.b(n,this._parents).order()};function u(s,c){return s<c?-1:s>c?1:s>=c?0:NaN}},function(E,T,e){"use strict";function t(){this.textContent=""}function u(c){return function(){this.textContent=c}}function s(c){return function(){var r=c.apply(this,arguments);this.textContent=r==null?"":r}}T.a=function(c){return arguments.length?this.each(c==null?t:(typeof c=="function"?s:u)(c)):this.node().textContent}},function(E,T,e){"use strict";var t=e(101),u=e(62);T.a=function(s,c,r){arguments.length<3&&(r=c,c=e.i(t.a)().changedTouches);for(var h=0,n=c?c.length:0,i;h<n;++h)if((i=c[h]).identifier===r)return e.i(u.a)(s,i);return null}},function(E,T,e){"use strict";var t=e(101),u=e(62);T.a=function(s,c){c==null&&(c=e.i(t.a)().touches);for(var r=0,h=c?c.length:0,n=new Array(h);r<h;++r)n[r]=e.i(u.a)(s,c[r]);return n}},function(E,T,e){"use strict";var t=e(104);T.a=function(u,s,c){var r=new t.d,h=s;return s==null?(r.restart(u,s,c),r):(s=+s,c=c==null?e.i(t.a)():+c,r.restart(function n(i){i+=h,r.restart(n,h+=s,c),u(i)},s,c),r)}},function(E,T,e){"use strict";var t=e(104);T.a=function(u,s,c){var r=new t.d;return s=s==null?0:+s,r.restart(function(h){r.stop(),u(h+s)},s,c),r}},function(E,T,e){"use strict";var t=e(27),u=e(13),s=[null];T.a=function(c,r){var h=c.__transition,n,i;if(h){r=r==null?null:r+"";for(i in h)if((n=h[i]).state>u.d&&n.name===r)return new t.b([[c]],s,r,+i)}return null}},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=e(516),u=e(27);e.d(T,"transition",function(){return u.a});var s=e(514);e.d(T,"active",function(){return s.a});var c=e(220);e.d(T,"interrupt",function(){return c.a})},function(E,T,e){"use strict";var t=e(22),u=e(517),s=e(518);t.selection.prototype.interrupt=u.a,t.selection.prototype.transition=s.a},function(E,T,e){"use strict";var t=e(220);T.a=function(u){return this.each(function(){e.i(t.a)(this,u)})}},function(E,T,e){"use strict";var t=e(27),u=e(13),s=e(199),c=e(103),r={time:null,delay:0,duration:250,ease:s.easeCubicInOut};function h(n,i){for(var a;!(a=n.__transition)||!(a=a[i]);)if(!(n=n.parentNode))return r.time=e.i(c.now)(),r;return a}T.a=function(n){var i,a;n instanceof t.b?(i=n._id,n=n._name):(i=e.i(t.c)(),(a=r).time=e.i(c.now)(),n=n==null?null:n+"");for(var o=this._groups,l=o.length,f=0;f<l;++f)for(var v=o[f],b=v.length,g,m=0;m<b;++m)(g=v[m])&&e.i(u.h)(g,n,i,m,v,a||h(g,i));return new t.b(o,this._parents,n,i)}},function(E,T,e){"use strict";var t=e(94),u=e(22),s=e(63),c=e(221);function r(l){return function(){this.removeAttribute(l)}}function h(l){return function(){this.removeAttributeNS(l.space,l.local)}}function n(l,f,v){var b,g=v+"",m;return function(){var _=this.getAttribute(l);return _===g?null:_===b?m:m=f(b=_,v)}}function i(l,f,v){var b,g=v+"",m;return function(){var _=this.getAttributeNS(l.space,l.local);return _===g?null:_===b?m:m=f(b=_,v)}}function a(l,f,v){var b,g,m;return function(){var _,M=v(this),x;return M==null?void this.removeAttribute(l):(_=this.getAttribute(l),x=M+"",_===x?null:_===b&&x===g?m:(g=x,m=f(b=_,M)))}}function o(l,f,v){var b,g,m;return function(){var _,M=v(this),x;return M==null?void this.removeAttributeNS(l.space,l.local):(_=this.getAttributeNS(l.space,l.local),x=M+"",_===x?null:_===b&&x===g?m:(g=x,m=f(b=_,M)))}}T.a=function(l,f){var v=e.i(u.namespace)(l),b=v==="transform"?t.e:c.a;return this.attrTween(l,typeof f=="function"?(v.local?o:a)(v,b,e.i(s.b)(this,"attr."+l,f)):f==null?(v.local?h:r)(v):(v.local?i:n)(v,b,f))}},function(E,T,e){"use strict";var t=e(22);function u(h,n){return function(i){this.setAttribute(h,n.call(this,i))}}function s(h,n){return function(i){this.setAttributeNS(h.space,h.local,n.call(this,i))}}function c(h,n){var i,a;function o(){var l=n.apply(this,arguments);return l!==a&&(i=(a=l)&&s(h,l)),i}return o._value=n,o}function r(h,n){var i,a;function o(){var l=n.apply(this,arguments);return l!==a&&(i=(a=l)&&u(h,l)),i}return o._value=n,o}T.a=function(h,n){var i="attr."+h;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;var a=e.i(t.namespace)(h);return this.tween(i,(a.local?c:r)(a,n))}},function(E,T,e){"use strict";var t=e(13);function u(c,r){return function(){e.i(t.g)(this,c).delay=+r.apply(this,arguments)}}function s(c,r){return r=+r,function(){e.i(t.g)(this,c).delay=r}}T.a=function(c){var r=this._id;return arguments.length?this.each((typeof c=="function"?u:s)(r,c)):e.i(t.f)(this.node(),r).delay}},function(E,T,e){"use strict";var t=e(13);function u(c,r){return function(){e.i(t.e)(this,c).duration=+r.apply(this,arguments)}}function s(c,r){return r=+r,function(){e.i(t.e)(this,c).duration=r}}T.a=function(c){var r=this._id;return arguments.length?this.each((typeof c=="function"?u:s)(r,c)):e.i(t.f)(this.node(),r).duration}},function(E,T,e){"use strict";var t=e(13);function u(s,c){if(typeof c!="function")throw new Error;return function(){e.i(t.e)(this,s).ease=c}}T.a=function(s){var c=this._id;return arguments.length?this.each(u(c,s)):e.i(t.f)(this.node(),c).ease}},function(E,T,e){"use strict";var t=e(13);T.a=function(){var u,s,c=this,r=c._id,h=c.size();return new Promise(function(n,i){var a={value:i},o={value:function(){--h==0&&n()}};c.each(function(){var l=e.i(t.e)(this,r),f=l.on;f!==u&&(s=(u=f).copy(),s._.cancel.push(a),s._.interrupt.push(a),s._.end.push(o)),l.on=s})})}},function(E,T,e){"use strict";var t=e(22),u=e(27);T.a=function(s){typeof s!="function"&&(s=e.i(t.matcher)(s));for(var c=this._groups,r=c.length,h=new Array(r),n=0;n<r;++n)for(var i=c[n],a=i.length,o=h[n]=[],l,f=0;f<a;++f)(l=i[f])&&s.call(l,l.__data__,f,i)&&o.push(l);return new u.b(h,this._parents,this._name,this._id)}},function(E,T,e){"use strict";var t=e(27);T.a=function(u){if(u._id!==this._id)throw new Error;for(var s=this._groups,c=u._groups,r=s.length,h=c.length,n=Math.min(r,h),i=new Array(r),a=0;a<n;++a)for(var o=s[a],l=c[a],f=o.length,v=i[a]=new Array(f),b,g=0;g<f;++g)(b=o[g]||l[g])&&(v[g]=b);for(;a<r;++a)i[a]=s[a];return new t.b(i,this._parents,this._name,this._id)}},function(E,T,e){"use strict";var t=e(13);function u(c){return(c+"").trim().split(/^|\s+/).every(function(r){var h=r.indexOf(".");return h>=0&&(r=r.slice(0,h)),!r||r==="start"})}function s(c,r,h){var n,i,a=u(r)?t.g:t.e;return function(){var o=a(this,c),l=o.on;l!==n&&(i=(n=l).copy()).on(r,h),o.on=i}}T.a=function(c,r){var h=this._id;return arguments.length<2?e.i(t.f)(this.node(),h).on.on(c):this.each(s(h,c,r))}},function(E,T,e){"use strict";function t(u){return function(){var s=this.parentNode;for(var c in this.__transition)if(+c!==u)return;s&&s.removeChild(this)}}T.a=function(){return this.on("end.remove",t(this._id))}},function(E,T,e){"use strict";var t=e(22),u=e(27),s=e(13);T.a=function(c){var r=this._name,h=this._id;typeof c!="function"&&(c=e.i(t.selector)(c));for(var n=this._groups,i=n.length,a=new Array(i),o=0;o<i;++o)for(var l=n[o],f=l.length,v=a[o]=new Array(f),b,g,m=0;m<f;++m)(b=l[m])&&(g=c.call(b,b.__data__,m,l))&&("__data__"in b&&(g.__data__=b.__data__),v[m]=g,e.i(s.h)(v[m],r,h,m,v,e.i(s.f)(b,h)));return new u.b(a,this._parents,r,h)}},function(E,T,e){"use strict";var t=e(22),u=e(27),s=e(13);T.a=function(c){var r=this._name,h=this._id;typeof c!="function"&&(c=e.i(t.selectorAll)(c));for(var n=this._groups,i=n.length,a=[],o=[],l=0;l<i;++l)for(var f=n[l],v=f.length,b,g=0;g<v;++g)if(b=f[g]){for(var m=c.call(b,b.__data__,g,f),_,M=e.i(s.f)(b,h),x=0,y=m.length;x<y;++x)(_=m[x])&&e.i(s.h)(_,r,h,x,m,M);a.push(m),o.push(b)}return new u.b(a,o,r,h)}},function(E,T,e){"use strict";var t=e(22),u=t.selection.prototype.constructor;T.a=function(){return new u(this._groups,this._parents)}},function(E,T,e){"use strict";var t=e(94),u=e(22),s=e(13),c=e(63),r=e(221);function h(l,f){var v,b,g;return function(){var m=e.i(u.style)(this,l),_=(this.style.removeProperty(l),e.i(u.style)(this,l));return m===_?null:m===v&&_===b?g:g=f(v=m,b=_)}}function n(l){return function(){this.style.removeProperty(l)}}function i(l,f,v){var b,g=v+"",m;return function(){var _=e.i(u.style)(this,l);return _===g?null:_===b?m:m=f(b=_,v)}}function a(l,f,v){var b,g,m;return function(){var _=e.i(u.style)(this,l),M=v(this),x=M+"";return M==null&&(x=M=(this.style.removeProperty(l),e.i(u.style)(this,l))),_===x?null:_===b&&x===g?m:(g=x,m=f(b=_,M))}}function o(l,f){var v,b,g,m="style."+f,_="end."+m,M;return function(){var x=e.i(s.e)(this,l),y=x.on,S=x.value[m]==null?M||(M=n(f)):void 0;(y!==v||g!==S)&&(b=(v=y).copy()).on(_,g=S),x.on=b}}T.a=function(l,f,v){var b=(l+="")==="transform"?t.a:r.a;return f==null?this.styleTween(l,h(l,b)).on("end.style."+l,n(l)):typeof f=="function"?this.styleTween(l,a(l,b,e.i(c.b)(this,"style."+l,f))).each(o(this._id,l)):this.styleTween(l,i(l,b,f),v).on("end.style."+l,null)}},function(E,T,e){"use strict";function t(s,c,r){return function(h){this.style.setProperty(s,c.call(this,h),r)}}function u(s,c,r){var h,n;function i(){var a=c.apply(this,arguments);return a!==n&&(h=(n=a)&&t(s,a,r)),h}return i._value=c,i}T.a=function(s,c,r){var h="style."+(s+="");if(arguments.length<2)return(h=this.tween(h))&&h._value;if(c==null)return this.tween(h,null);if(typeof c!="function")throw new Error;return this.tween(h,u(s,c,r==null?"":r))}},function(E,T,e){"use strict";var t=e(63);function u(c){return function(){this.textContent=c}}function s(c){return function(){var r=c(this);this.textContent=r==null?"":r}}T.a=function(c){return this.tween("text",typeof c=="function"?s(e.i(t.b)(this,"text",c)):u(c==null?"":c+""))}},function(E,T,e){"use strict";function t(s){return function(c){this.textContent=s.call(this,c)}}function u(s){var c,r;function h(){var n=s.apply(this,arguments);return n!==r&&(c=(r=n)&&t(n)),c}return h._value=s,h}T.a=function(s){var c="text";if(arguments.length<1)return(c=this.tween(c))&&c._value;if(s==null)return this.tween(c,null);if(typeof s!="function")throw new Error;return this.tween(c,u(s))}},function(E,T,e){"use strict";var t=e(27),u=e(13);T.a=function(){for(var s=this._name,c=this._id,r=e.i(t.c)(),h=this._groups,n=h.length,i=0;i<n;++i)for(var a=h[i],o=a.length,l,f=0;f<o;++f)if(l=a[f]){var v=e.i(u.f)(l,c);e.i(u.h)(l,s,r,f,a,{time:v.time+v.delay+v.duration,delay:0,duration:v.duration,ease:v.ease})}return new t.b(h,this._parents,s,r)}},function(E,T,e){"use strict";var t=function(u,s,c,r,h,n,i,a){if(s===void 0)throw new Error("invariant requires an error message argument");if(!u){var o;if(s===void 0)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[c,r,h,n,i,a],f=0;o=new Error(s.replace(/%s/g,function(){return l[f++]})),o.name="Invariant Violation"}throw o.framesToPop=1,o}};E.exports=t},function(E,T,e){(function(t){var u="Expected a function",s=0/0,c="[object Symbol]",r=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,i=/^0o[0-7]+$/i,a=parseInt,o=typeof t=="object"&&t&&t.Object===Object&&t,l=typeof self=="object"&&self&&self.Object===Object&&self,f=o||l||Function("return this")(),v=Object.prototype,b=v.toString,g=Math.max,m=Math.min,_=function(){return f.Date.now()};function M(A,O,L){var H,F,Z,G,U,Y,J=0,rt=!1,ft=!1,dt=!0;if(typeof A!="function")throw new TypeError(u);O=P(O)||0,x(L)&&(rt=!!L.leading,ft="maxWait"in L,Z=ft?g(P(L.maxWait)||0,O):Z,dt="trailing"in L?!!L.trailing:dt);function ut(z){var Q=H,ht=F;return H=F=void 0,J=z,G=A.apply(ht,Q),G}function Lt(z){return J=z,U=setTimeout(St,O),rt?ut(z):G}function Ft(z){var Q=z-Y,ht=z-J,et=O-Q;return ft?m(et,Z-ht):et}function Ot(z){var Q=z-Y,ht=z-J;return Y===void 0||Q>=O||Q<0||ft&&ht>=Z}function St(){var z=_();if(Ot(z))return xt(z);U=setTimeout(St,Ft(z))}function xt(z){return U=void 0,dt&&H?ut(z):(H=F=void 0,G)}function At(){U!==void 0&&clearTimeout(U),J=0,H=Y=F=U=void 0}function nt(){return U===void 0?G:xt(_())}function Mt(){var z=_(),Q=Ot(z);if(H=arguments,F=this,Y=z,Q){if(U===void 0)return Lt(Y);if(ft)return U=setTimeout(St,O),ut(Y)}return U===void 0&&(U=setTimeout(St,O)),G}return Mt.cancel=At,Mt.flush=nt,Mt}function x(A){var O=typeof A;return!!A&&(O=="object"||O=="function")}function y(A){return!!A&&typeof A=="object"}function S(A){return typeof A=="symbol"||y(A)&&b.call(A)==c}function P(A){if(typeof A=="number")return A;if(S(A))return s;if(x(A)){var O=typeof A.valueOf=="function"?A.valueOf():A;A=x(O)?O+"":O}if(typeof A!="string")return A===0?A:+A;A=A.replace(r,"");var L=n.test(A);return L||i.test(A)?a(A.slice(2),L?2:8):h.test(A)?s:+A}E.exports=M}).call(T,e(225))},function(E,T,e){"use strict";/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var t=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function c(h){if(h==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(h)}function r(){try{if(!Object.assign)return!1;var h=new String("abc");if(h[5]="de",Object.getOwnPropertyNames(h)[0]==="5")return!1;for(var n={},i=0;i<10;i++)n["_"+String.fromCharCode(i)]=i;var a=Object.getOwnPropertyNames(n).map(function(l){return n[l]});if(a.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(l){o[l]=l}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch(l){return!1}}E.exports=r()?Object.assign:function(h,n){for(var i,a=c(h),o,l=1;l<arguments.length;l++){i=Object(arguments[l]);for(var f in i)u.call(i,f)&&(a[f]=i[f]);if(t){o=t(i);for(var v=0;v<o.length;v++)s.call(i,o[v])&&(a[o[v]]=i[o[v]])}}return a}},function(E,T,e){"use strict";var t=function(){},u=e(223),s={},c=Function.call.bind(Object.prototype.hasOwnProperty);t=function(h){var n="Warning: "+h;typeof console!="undefined"&&console.error(n);try{throw new Error(n)}catch(i){}};function r(h,n,i,a,o){for(var l in h)if(c(h,l)){var f;try{if(typeof h[l]!="function"){var v=Error((a||"React class")+": "+i+" type `"+l+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof h[l]+"`.");throw v.name="Invariant Violation",v}f=h[l](n,l,a,i,null,u)}catch(g){f=g}if(f&&!(f instanceof Error)&&t((a||"React class")+": type specification of "+i+" `"+l+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof f+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),f instanceof Error&&!(f.message in s)){s[f.message]=!0;var b=o?o():"";t("Failed "+i+" type: "+f.message+(b!=null?b:""))}}}r.resetWarningCache=function(){s={}},E.exports=r},function(E,T,e){"use strict";var t=e(224),u=e(539),s=e(223),c=e(540),r=Function.call.bind(Object.prototype.hasOwnProperty),h=function(){};h=function(i){var a="Warning: "+i;typeof console!="undefined"&&console.error(a);try{throw new Error(a)}catch(o){}};function n(){return null}E.exports=function(i,a){var o=typeof Symbol=="function"&&Symbol.iterator,l="@@iterator";function f(ut){var Lt=ut&&(o&&ut[o]||ut[l]);if(typeof Lt=="function")return Lt}var v="<<anonymous>>",b={array:M("array"),bool:M("boolean"),func:M("function"),number:M("number"),object:M("object"),string:M("string"),symbol:M("symbol"),any:x(),arrayOf:y,element:S(),elementType:P(),instanceOf:A,node:F(),objectOf:L,oneOf:O,oneOfType:H,shape:Z,exact:G};function g(ut,Lt){return ut===Lt?ut!==0||1/ut==1/Lt:ut!==ut&&Lt!==Lt}function m(ut){this.message=ut,this.stack=""}m.prototype=Error.prototype;function _(ut){var Lt={},Ft=0;function Ot(xt,At,nt,Mt,z,Q,ht){if(Mt=Mt||v,Q=Q||nt,ht!==s){if(a){var et=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw et.name="Invariant Violation",et}else if(typeof console!="undefined"){var at=Mt+":"+nt;!Lt[at]&&Ft<3&&(h("You are manually calling a React.PropTypes validation function for the `"+Q+"` prop on `"+Mt+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),Lt[at]=!0,Ft++)}}return At[nt]==null?xt?At[nt]===null?new m("The "+z+" `"+Q+"` is marked as required "+("in `"+Mt+"`, but its value is `null`.")):new m("The "+z+" `"+Q+"` is marked as required in "+("`"+Mt+"`, but its value is `undefined`.")):null:ut(At,nt,Mt,z,Q)}var St=Ot.bind(null,!1);return St.isRequired=Ot.bind(null,!0),St}function M(ut){function Lt(Ft,Ot,St,xt,At,nt){var Mt=Ft[Ot],z=J(Mt);if(z!==ut){var Q=rt(Mt);return new m("Invalid "+xt+" `"+At+"` of type "+("`"+Q+"` supplied to `"+St+"`, expected ")+("`"+ut+"`."))}return null}return _(Lt)}function x(){return _(n)}function y(ut){function Lt(Ft,Ot,St,xt,At){if(typeof ut!="function")return new m("Property `"+At+"` of component `"+St+"` has invalid PropType notation inside arrayOf.");var nt=Ft[Ot];if(!Array.isArray(nt)){var Mt=J(nt);return new m("Invalid "+xt+" `"+At+"` of type "+("`"+Mt+"` supplied to `"+St+"`, expected an array."))}for(var z=0;z<nt.length;z++){var Q=ut(nt,z,St,xt,At+"["+z+"]",s);if(Q instanceof Error)return Q}return null}return _(Lt)}function S(){function ut(Lt,Ft,Ot,St,xt){var At=Lt[Ft];if(!i(At)){var nt=J(At);return new m("Invalid "+St+" `"+xt+"` of type "+("`"+nt+"` supplied to `"+Ot+"`, expected a single ReactElement."))}return null}return _(ut)}function P(){function ut(Lt,Ft,Ot,St,xt){var At=Lt[Ft];if(!t.isValidElementType(At)){var nt=J(At);return new m("Invalid "+St+" `"+xt+"` of type "+("`"+nt+"` supplied to `"+Ot+"`, expected a single ReactElement type."))}return null}return _(ut)}function A(ut){function Lt(Ft,Ot,St,xt,At){if(!(Ft[Ot]instanceof ut)){var nt=ut.name||v,Mt=dt(Ft[Ot]);return new m("Invalid "+xt+" `"+At+"` of type "+("`"+Mt+"` supplied to `"+St+"`, expected ")+("instance of `"+nt+"`."))}return null}return _(Lt)}function O(ut){if(!Array.isArray(ut))return arguments.length>1?h("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):h("Invalid argument supplied to oneOf, expected an array."),n;function Lt(Ft,Ot,St,xt,At){for(var nt=Ft[Ot],Mt=0;Mt<ut.length;Mt++)if(g(nt,ut[Mt]))return null;var z=JSON.stringify(ut,function(ht,et){var at=rt(et);return at==="symbol"?String(et):et});return new m("Invalid "+xt+" `"+At+"` of value `"+String(nt)+"` "+("supplied to `"+St+"`, expected one of "+z+"."))}return _(Lt)}function L(ut){function Lt(Ft,Ot,St,xt,At){if(typeof ut!="function")return new m("Property `"+At+"` of component `"+St+"` has invalid PropType notation inside objectOf.");var nt=Ft[Ot],Mt=J(nt);if(Mt!=="object")return new m("Invalid "+xt+" `"+At+"` of type "+("`"+Mt+"` supplied to `"+St+"`, expected an object."));for(var z in nt)if(r(nt,z)){var Q=ut(nt,z,St,xt,At+"."+z,s);if(Q instanceof Error)return Q}return null}return _(Lt)}function H(ut){if(!Array.isArray(ut))return h("Invalid argument supplied to oneOfType, expected an instance of array."),n;for(var Lt=0;Lt<ut.length;Lt++){var Ft=ut[Lt];if(typeof Ft!="function")return h("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+ft(Ft)+" at index "+Lt+"."),n}function Ot(St,xt,At,nt,Mt){for(var z=0;z<ut.length;z++){var Q=ut[z];if(Q(St,xt,At,nt,Mt,s)==null)return null}return new m("Invalid "+nt+" `"+Mt+"` supplied to "+("`"+At+"`."))}return _(Ot)}function F(){function ut(Lt,Ft,Ot,St,xt){return U(Lt[Ft])?null:new m("Invalid "+St+" `"+xt+"` supplied to "+("`"+Ot+"`, expected a ReactNode."))}return _(ut)}function Z(ut){function Lt(Ft,Ot,St,xt,At){var nt=Ft[Ot],Mt=J(nt);if(Mt!=="object")return new m("Invalid "+xt+" `"+At+"` of type `"+Mt+"` "+("supplied to `"+St+"`, expected `object`."));for(var z in ut){var Q=ut[z];if(!!Q){var ht=Q(nt,z,St,xt,At+"."+z,s);if(ht)return ht}}return null}return _(Lt)}function G(ut){function Lt(Ft,Ot,St,xt,At){var nt=Ft[Ot],Mt=J(nt);if(Mt!=="object")return new m("Invalid "+xt+" `"+At+"` of type `"+Mt+"` "+("supplied to `"+St+"`, expected `object`."));var z=u({},Ft[Ot],ut);for(var Q in z){var ht=ut[Q];if(!ht)return new m("Invalid "+xt+" `"+At+"` key `"+Q+"` supplied to `"+St+"`.\nBad object: "+JSON.stringify(Ft[Ot],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(ut),null,"  "));var et=ht(nt,Q,St,xt,At+"."+Q,s);if(et)return et}return null}return _(Lt)}function U(ut){switch(typeof ut){case"number":case"string":case"undefined":return!0;case"boolean":return!ut;case"object":if(Array.isArray(ut))return ut.every(U);if(ut===null||i(ut))return!0;var Lt=f(ut);if(Lt){var Ft=Lt.call(ut),Ot;if(Lt!==ut.entries){for(;!(Ot=Ft.next()).done;)if(!U(Ot.value))return!1}else for(;!(Ot=Ft.next()).done;){var St=Ot.value;if(St&&!U(St[1]))return!1}}else return!1;return!0;default:return!1}}function Y(ut,Lt){return ut==="symbol"?!0:Lt?Lt["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&Lt instanceof Symbol:!1}function J(ut){var Lt=typeof ut;return Array.isArray(ut)?"array":ut instanceof RegExp?"object":Y(Lt,ut)?"symbol":Lt}function rt(ut){if(typeof ut=="undefined"||ut===null)return""+ut;var Lt=J(ut);if(Lt==="object"){if(ut instanceof Date)return"date";if(ut instanceof RegExp)return"regexp"}return Lt}function ft(ut){var Lt=rt(ut);switch(Lt){case"array":case"object":return"an "+Lt;case"boolean":case"date":case"regexp":return"a "+Lt;default:return Lt}}function dt(ut){return!ut.constructor||!ut.constructor.name?v:ut.constructor.name}return b.checkPropTypes=c,b.resetWarningCache=c.resetWarningCache,b.PropTypes=b,b}},function(E,T,e){"use strict";/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){"use strict";var t=typeof Symbol=="function"&&Symbol.for,u=t?Symbol.for("react.element"):60103,s=t?Symbol.for("react.portal"):60106,c=t?Symbol.for("react.fragment"):60107,r=t?Symbol.for("react.strict_mode"):60108,h=t?Symbol.for("react.profiler"):60114,n=t?Symbol.for("react.provider"):60109,i=t?Symbol.for("react.context"):60110,a=t?Symbol.for("react.async_mode"):60111,o=t?Symbol.for("react.concurrent_mode"):60111,l=t?Symbol.for("react.forward_ref"):60112,f=t?Symbol.for("react.suspense"):60113,v=t?Symbol.for("react.suspense_list"):60120,b=t?Symbol.for("react.memo"):60115,g=t?Symbol.for("react.lazy"):60116,m=t?Symbol.for("react.block"):60121,_=t?Symbol.for("react.fundamental"):60117,M=t?Symbol.for("react.responder"):60118,x=t?Symbol.for("react.scope"):60119;function y(at){return typeof at=="string"||typeof at=="function"||at===c||at===o||at===h||at===r||at===f||at===v||typeof at=="object"&&at!==null&&(at.$$typeof===g||at.$$typeof===b||at.$$typeof===n||at.$$typeof===i||at.$$typeof===l||at.$$typeof===_||at.$$typeof===M||at.$$typeof===x||at.$$typeof===m)}function S(at){if(typeof at=="object"&&at!==null){var gt=at.$$typeof;switch(gt){case u:var k=at.type;switch(k){case a:case o:case c:case h:case r:case f:return k;default:var ot=k&&k.$$typeof;switch(ot){case i:case l:case g:case b:case n:return ot;default:return gt}}case s:return gt}}}var P=a,A=o,O=i,L=n,H=u,F=l,Z=c,G=g,U=b,Y=s,J=h,rt=r,ft=f,dt=!1;function ut(at){return dt||(dt=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),Lt(at)||S(at)===a}function Lt(at){return S(at)===o}function Ft(at){return S(at)===i}function Ot(at){return S(at)===n}function St(at){return typeof at=="object"&&at!==null&&at.$$typeof===u}function xt(at){return S(at)===l}function At(at){return S(at)===c}function nt(at){return S(at)===g}function Mt(at){return S(at)===b}function z(at){return S(at)===s}function Q(at){return S(at)===h}function ht(at){return S(at)===r}function et(at){return S(at)===f}T.AsyncMode=P,T.ConcurrentMode=A,T.ContextConsumer=O,T.ContextProvider=L,T.Element=H,T.ForwardRef=F,T.Fragment=Z,T.Lazy=G,T.Memo=U,T.Portal=Y,T.Profiler=J,T.StrictMode=rt,T.Suspense=ft,T.isAsyncMode=ut,T.isConcurrentMode=Lt,T.isContextConsumer=Ft,T.isContextProvider=Ot,T.isElement=St,T.isForwardRef=xt,T.isFragment=At,T.isLazy=nt,T.isMemo=Mt,T.isPortal=z,T.isProfiler=Q,T.isStrictMode=ht,T.isSuspense=et,T.isValidElementType=y,T.typeOf=S})()},function(E,T,e){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),function(t){var u=function(){if(typeof Map!="undefined")return Map;function Y(J,rt){var ft=-1;return J.some(function(dt,ut){return dt[0]===rt?(ft=ut,!0):!1}),ft}return function(){function J(){this.__entries__=[]}return Object.defineProperty(J.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),J.prototype.get=function(rt){var ft=Y(this.__entries__,rt),dt=this.__entries__[ft];return dt&&dt[1]},J.prototype.set=function(rt,ft){var dt=Y(this.__entries__,rt);~dt?this.__entries__[dt][1]=ft:this.__entries__.push([rt,ft])},J.prototype.delete=function(rt){var ft=this.__entries__,dt=Y(ft,rt);~dt&&ft.splice(dt,1)},J.prototype.has=function(rt){return!!~Y(this.__entries__,rt)},J.prototype.clear=function(){this.__entries__.splice(0)},J.prototype.forEach=function(rt,ft){ft===void 0&&(ft=null);for(var dt=0,ut=this.__entries__;dt<ut.length;dt++){var Lt=ut[dt];rt.call(ft,Lt[1],Lt[0])}},J}()}(),s=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,c=function(){return typeof t!="undefined"&&t.Math===Math?t:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),r=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(c):function(Y){return setTimeout(function(){return Y(Date.now())},1e3/60)}}(),h=2;function n(Y,J){var rt=!1,ft=!1,dt=0;function ut(){rt&&(rt=!1,Y()),ft&&Ft()}function Lt(){r(ut)}function Ft(){var Ot=Date.now();if(rt){if(Ot-dt<h)return;ft=!0}else rt=!0,ft=!1,setTimeout(Lt,J);dt=Ot}return Ft}var i=20,a=["top","right","bottom","left","width","height","size","weight"],o=typeof MutationObserver!="undefined",l=function(){function Y(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=n(this.refresh.bind(this),i)}return Y.prototype.addObserver=function(J){~this.observers_.indexOf(J)||this.observers_.push(J),this.connected_||this.connect_()},Y.prototype.removeObserver=function(J){var rt=this.observers_,ft=rt.indexOf(J);~ft&&rt.splice(ft,1),!rt.length&&this.connected_&&this.disconnect_()},Y.prototype.refresh=function(){var J=this.updateObservers_();J&&this.refresh()},Y.prototype.updateObservers_=function(){var J=this.observers_.filter(function(rt){return rt.gatherActive(),rt.hasActive()});return J.forEach(function(rt){return rt.broadcastActive()}),J.length>0},Y.prototype.connect_=function(){!s||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),o?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},Y.prototype.disconnect_=function(){!s||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},Y.prototype.onTransitionEnd_=function(J){var rt=J.propertyName,ft=rt===void 0?"":rt,dt=a.some(function(ut){return!!~ft.indexOf(ut)});dt&&this.refresh()},Y.getInstance=function(){return this.instance_||(this.instance_=new Y),this.instance_},Y.instance_=null,Y}(),f=function(Y,J){for(var rt=0,ft=Object.keys(J);rt<ft.length;rt++){var dt=ft[rt];Object.defineProperty(Y,dt,{value:J[dt],enumerable:!1,writable:!1,configurable:!0})}return Y},v=function(Y){var J=Y&&Y.ownerDocument&&Y.ownerDocument.defaultView;return J||c},b=O(0,0,0,0);function g(Y){return parseFloat(Y)||0}function m(Y){for(var J=[],rt=1;rt<arguments.length;rt++)J[rt-1]=arguments[rt];return J.reduce(function(ft,dt){var ut=Y["border-"+dt+"-width"];return ft+g(ut)},0)}function _(Y){for(var J=["top","right","bottom","left"],rt={},ft=0,dt=J;ft<dt.length;ft++){var ut=dt[ft],Lt=Y["padding-"+ut];rt[ut]=g(Lt)}return rt}function M(Y){var J=Y.getBBox();return O(0,0,J.width,J.height)}function x(Y){var J=Y.clientWidth,rt=Y.clientHeight;if(!J&&!rt)return b;var ft=v(Y).getComputedStyle(Y),dt=_(ft),ut=dt.left+dt.right,Lt=dt.top+dt.bottom,Ft=g(ft.width),Ot=g(ft.height);if(ft.boxSizing==="border-box"&&(Math.round(Ft+ut)!==J&&(Ft-=m(ft,"left","right")+ut),Math.round(Ot+Lt)!==rt&&(Ot-=m(ft,"top","bottom")+Lt)),!S(Y)){var St=Math.round(Ft+ut)-J,xt=Math.round(Ot+Lt)-rt;Math.abs(St)!==1&&(Ft-=St),Math.abs(xt)!==1&&(Ot-=xt)}return O(dt.left,dt.top,Ft,Ot)}var y=function(){return typeof SVGGraphicsElement!="undefined"?function(Y){return Y instanceof v(Y).SVGGraphicsElement}:function(Y){return Y instanceof v(Y).SVGElement&&typeof Y.getBBox=="function"}}();function S(Y){return Y===v(Y).document.documentElement}function P(Y){return s?y(Y)?M(Y):x(Y):b}function A(Y){var J=Y.x,rt=Y.y,ft=Y.width,dt=Y.height,ut=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,Lt=Object.create(ut.prototype);return f(Lt,{x:J,y:rt,width:ft,height:dt,top:rt,right:J+ft,bottom:dt+rt,left:J}),Lt}function O(Y,J,rt,ft){return{x:Y,y:J,width:rt,height:ft}}var L=function(){function Y(J){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=O(0,0,0,0),this.target=J}return Y.prototype.isActive=function(){var J=P(this.target);return this.contentRect_=J,J.width!==this.broadcastWidth||J.height!==this.broadcastHeight},Y.prototype.broadcastRect=function(){var J=this.contentRect_;return this.broadcastWidth=J.width,this.broadcastHeight=J.height,J},Y}(),H=function(){function Y(J,rt){var ft=A(rt);f(this,{target:J,contentRect:ft})}return Y}(),F=function(){function Y(J,rt,ft){if(this.activeObservations_=[],this.observations_=new u,typeof J!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=J,this.controller_=rt,this.callbackCtx_=ft}return Y.prototype.observe=function(J){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(J instanceof v(J).Element))throw new TypeError('parameter 1 is not of type "Element".');var rt=this.observations_;rt.has(J)||(rt.set(J,new L(J)),this.controller_.addObserver(this),this.controller_.refresh())}},Y.prototype.unobserve=function(J){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(J instanceof v(J).Element))throw new TypeError('parameter 1 is not of type "Element".');var rt=this.observations_;!rt.has(J)||(rt.delete(J),rt.size||this.controller_.removeObserver(this))}},Y.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},Y.prototype.gatherActive=function(){var J=this;this.clearActive(),this.observations_.forEach(function(rt){rt.isActive()&&J.activeObservations_.push(rt)})},Y.prototype.broadcastActive=function(){if(!!this.hasActive()){var J=this.callbackCtx_,rt=this.activeObservations_.map(function(ft){return new H(ft.target,ft.broadcastRect())});this.callback_.call(J,rt,J),this.clearActive()}},Y.prototype.clearActive=function(){this.activeObservations_.splice(0)},Y.prototype.hasActive=function(){return this.activeObservations_.length>0},Y}(),Z=typeof WeakMap!="undefined"?new WeakMap:new u,G=function(){function Y(J){if(!(this instanceof Y))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var rt=l.getInstance(),ft=new F(J,rt,this);Z.set(this,ft)}return Y}();["observe","unobserve","disconnect"].forEach(function(Y){G.prototype[Y]=function(){var J;return(J=Z.get(this))[Y].apply(J,arguments)}});var U=function(){return typeof c.ResizeObserver!="undefined"?c.ResizeObserver:G}();T.default=U}.call(T,e(225))},function(E,T,e){(function(t,u){u(T,e(22),e(515))})(this,function(t,u,s){"use strict";var c=1e-10;function r(et,at){var gt=n(et),k=gt.filter(function(on){return h(on,et)}),ot=0,it=0,X=[],Et;if(k.length>1){var vt=f(k);for(Et=0;Et<k.length;++Et){var Nt=k[Et];Nt.angle=Math.atan2(Nt.x-vt.x,Nt.y-vt.y)}k.sort(function(on,en){return en.angle-on.angle});var $t=k[k.length-1];for(Et=0;Et<k.length;++Et){var ee=k[Et];it+=($t.x+ee.x)*(ee.y-$t.y);for(var kt={x:(ee.x+$t.x)/2,y:(ee.y+$t.y)/2},Wt=null,ae=0;ae<ee.parentIndex.length;++ae)if($t.parentIndex.indexOf(ee.parentIndex[ae])>-1){var le=et[ee.parentIndex[ae]],je=Math.atan2(ee.x-le.x,ee.y-le.y),Oe=Math.atan2($t.x-le.x,$t.y-le.y),We=Oe-je;We<0&&(We+=2*Math.PI);var Ye=Oe-We/2,wn=a(kt,{x:le.x+le.radius*Math.sin(Ye),y:le.y+le.radius*Math.cos(Ye)});wn>le.radius*2&&(wn=le.radius*2),(Wt===null||Wt.width>wn)&&(Wt={circle:le,width:wn,p1:ee,p2:$t})}Wt!==null&&(X.push(Wt),ot+=i(Wt.circle.radius,Wt.width),$t=ee)}}else{var er=et[0];for(Et=1;Et<et.length;++Et)et[Et].radius<er.radius&&(er=et[Et]);var wr=!1;for(Et=0;Et<et.length;++Et)if(a(et[Et],er)>Math.abs(er.radius-et[Et].radius)){wr=!0;break}wr?ot=it=0:(ot=er.radius*er.radius*Math.PI,X.push({circle:er,p1:{x:er.x,y:er.y+er.radius},p2:{x:er.x-c,y:er.y+er.radius},width:er.radius*2}))}return it/=2,at&&(at.area=ot+it,at.arcArea=ot,at.polygonArea=it,at.arcs=X,at.innerPoints=k,at.intersectionPoints=gt),ot+it}function h(et,at){for(var gt=0;gt<at.length;++gt)if(a(et,at[gt])>at[gt].radius+c)return!1;return!0}function n(et){for(var at=[],gt=0;gt<et.length;++gt)for(var k=gt+1;k<et.length;++k)for(var ot=l(et[gt],et[k]),it=0;it<ot.length;++it){var X=ot[it];X.parentIndex=[gt,k],at.push(X)}return at}function i(et,at){return et*et*Math.acos(1-at/et)-(et-at)*Math.sqrt(at*(2*et-at))}function a(et,at){return Math.sqrt((et.x-at.x)*(et.x-at.x)+(et.y-at.y)*(et.y-at.y))}function o(et,at,gt){if(gt>=et+at)return 0;if(gt<=Math.abs(et-at))return Math.PI*Math.min(et,at)*Math.min(et,at);var k=et-(gt*gt-at*at+et*et)/(2*gt),ot=at-(gt*gt-et*et+at*at)/(2*gt);return i(et,k)+i(at,ot)}function l(et,at){var gt=a(et,at),k=et.radius,ot=at.radius;if(gt>=k+ot||gt<=Math.abs(k-ot))return[];var it=(k*k-ot*ot+gt*gt)/(2*gt),X=Math.sqrt(k*k-it*it),Et=et.x+it*(at.x-et.x)/gt,vt=et.y+it*(at.y-et.y)/gt,Nt=-(at.y-et.y)*(X/gt),$t=-(at.x-et.x)*(X/gt);return[{x:Et+Nt,y:vt-$t},{x:Et-Nt,y:vt+$t}]}function f(et){for(var at={x:0,y:0},gt=0;gt<et.length;++gt)at.x+=et[gt].x,at.y+=et[gt].y;return at.x/=et.length,at.y/=et.length,at}function v(et,at,gt,k){k=k||{};var ot=k.maxIterations||100,it=k.tolerance||1e-10,X=et(at),Et=et(gt),vt=gt-at;if(X*Et>0)throw"Initial bisect points must have opposite signs";if(X===0)return at;if(Et===0)return gt;for(var Nt=0;Nt<ot;++Nt){vt/=2;var $t=at+vt,ee=et($t);if(ee*X>=0&&(at=$t),Math.abs(vt)<it||ee===0)return $t}return at+vt}function b(et){for(var at=new Array(et),gt=0;gt<et;++gt)at[gt]=0;return at}function g(et,at){return b(et).map(function(){return b(at)})}function m(et,at){for(var gt=0,k=0;k<et.length;++k)gt+=et[k]*at[k];return gt}function _(et){return Math.sqrt(m(et,et))}function M(et,at,gt){for(var k=0;k<at.length;++k)et[k]=at[k]*gt}function x(et,at,gt,k,ot){for(var it=0;it<et.length;++it)et[it]=at*gt[it]+k*ot[it]}function y(et,at,gt){gt=gt||{};var k=gt.maxIterations||at.length*200,ot=gt.nonZeroDelta||1.05,it=gt.zeroDelta||.001,X=gt.minErrorDelta||1e-6,Et=gt.minErrorDelta||1e-5,vt=gt.rho!==void 0?gt.rho:1,Nt=gt.chi!==void 0?gt.chi:2,$t=gt.psi!==void 0?gt.psi:-.5,ee=gt.sigma!==void 0?gt.sigma:.5,kt,Wt=at.length,ae=new Array(Wt+1);ae[0]=at,ae[0].fx=et(at),ae[0].id=0;for(var le=0;le<Wt;++le){var je=at.slice();je[le]=je[le]?je[le]*ot:it,ae[le+1]=je,ae[le+1].fx=et(je),ae[le+1].id=le+1}function Oe(di){for(var Ce=0;Ce<di.length;Ce++)ae[Wt][Ce]=di[Ce];ae[Wt].fx=di.fx}for(var We=function(di,Ce){return di.fx-Ce.fx},Ye=at.slice(),wn=at.slice(),er=at.slice(),wr=at.slice(),on=0;on<k;++on){if(ae.sort(We),gt.history){var en=ae.map(function(di){var Ce=di.slice();return Ce.fx=di.fx,Ce.id=di.id,Ce});en.sort(function(di,Ce){return di.id-Ce.id}),gt.history.push({x:ae[0].slice(),fx:ae[0].fx,simplex:en})}for(kt=0,le=0;le<Wt;++le)kt=Math.max(kt,Math.abs(ae[0][le]-ae[1][le]));if(Math.abs(ae[0].fx-ae[Wt].fx)<X&&kt<Et)break;for(le=0;le<Wt;++le){Ye[le]=0;for(var An=0;An<Wt;++An)Ye[le]+=ae[An][le];Ye[le]/=Wt}var jn=ae[Wt];if(x(wn,1+vt,Ye,-vt,jn),wn.fx=et(wn),wn.fx<ae[0].fx)x(wr,1+Nt,Ye,-Nt,jn),wr.fx=et(wr),wr.fx<wn.fx?Oe(wr):Oe(wn);else if(wn.fx>=ae[Wt-1].fx){var pr=!1;if(wn.fx>jn.fx?(x(er,1+$t,Ye,-$t,jn),er.fx=et(er),er.fx<jn.fx?Oe(er):pr=!0):(x(er,1-$t*vt,Ye,$t*vt,jn),er.fx=et(er),er.fx<wn.fx?Oe(er):pr=!0),pr){if(ee>=1)break;for(le=1;le<ae.length;++le)x(ae[le],1-ee,ae[0],ee,ae[le]),ae[le].fx=et(ae[le])}}else Oe(wn)}return ae.sort(We),{fx:ae[0].fx,x:ae[0]}}function S(et,at,gt,k,ot,it,X){var Et=gt.fx,vt=m(gt.fxprime,at),Nt=Et,$t=Et,ee=vt,kt=0;ot=ot||1,it=it||1e-6,X=X||.1;function Wt(le,je,Oe){for(var We=0;We<16;++We)if(ot=(le+je)/2,x(k.x,1,gt.x,ot,at),Nt=k.fx=et(k.x,k.fxprime),ee=m(k.fxprime,at),Nt>Et+it*ot*vt||Nt>=Oe)je=ot;else{if(Math.abs(ee)<=-X*vt)return ot;ee*(je-le)>=0&&(je=le),le=ot,Oe=Nt}return 0}for(var ae=0;ae<10;++ae){if(x(k.x,1,gt.x,ot,at),Nt=k.fx=et(k.x,k.fxprime),ee=m(k.fxprime,at),Nt>Et+it*ot*vt||ae&&Nt>=$t)return Wt(kt,ot,$t);if(Math.abs(ee)<=-X*vt)return ot;if(ee>=0)return Wt(ot,kt,Nt);$t=Nt,kt=ot,ot*=2}return ot}function P(et,at,gt){var k={x:at.slice(),fx:0,fxprime:at.slice()},ot={x:at.slice(),fx:0,fxprime:at.slice()},it=at.slice(),X,Et,vt=1,Nt;gt=gt||{},Nt=gt.maxIterations||at.length*20,k.fx=et(k.x,k.fxprime),X=k.fxprime.slice(),M(X,k.fxprime,-1);for(var $t=0;$t<Nt;++$t){if(vt=S(et,X,k,ot,vt),gt.history&&gt.history.push({x:k.x.slice(),fx:k.fx,fxprime:k.fxprime.slice(),alpha:vt}),!vt)M(X,k.fxprime,-1);else{x(it,1,ot.fxprime,-1,k.fxprime);var ee=m(k.fxprime,k.fxprime),kt=Math.max(0,m(it,ot.fxprime)/ee);x(X,kt,X,-1,ot.fxprime),Et=k,k=ot,ot=Et}if(_(k.fxprime)<=1e-5)break}return gt.history&&gt.history.push({x:k.x.slice(),fx:k.fx,fxprime:k.fxprime.slice(),alpha:vt}),k}function A(et,at){at=at||{},at.maxIterations=at.maxIterations||500;var gt=at.initialLayout||G,k=at.lossFunction||J;et=H(et);var ot=gt(et,at),it=[],X=[],Et;for(Et in ot)ot.hasOwnProperty(Et)&&(it.push(ot[Et].x),it.push(ot[Et].y),X.push(Et));for(var vt=y(function(ee){for(var kt={},Wt=0;Wt<X.length;++Wt){var ae=X[Wt];kt[ae]={x:ee[2*Wt],y:ee[2*Wt+1],radius:ot[ae].radius}}return k(kt,et)},it,at),Nt=vt.x,$t=0;$t<X.length;++$t)Et=X[$t],ot[Et].x=Nt[2*$t],ot[Et].y=Nt[2*$t+1];return ot}var O=1e-10;function L(et,at,gt){return Math.min(et,at)*Math.min(et,at)*Math.PI<=gt+O?Math.abs(et-at):v(function(k){return o(et,at,k)-gt},0,et+at)}function H(et){et=et.slice();var at=[],gt={},k,ot,it,X;for(k=0;k<et.length;++k){var Et=et[k];Et.sets.length==1?at.push(Et.sets[0]):Et.sets.length==2&&(it=Et.sets[0],X=Et.sets[1],gt[[it,X]]=!0,gt[[X,it]]=!0)}for(at.sort(function(vt,Nt){return vt>Nt}),k=0;k<at.length;++k)for(it=at[k],ot=k+1;ot<at.length;++ot)X=at[ot],[it,X]in gt||et.push({sets:[it,X],size:0});return et}function F(et,at,gt){var k=g(at.length,at.length),ot=g(at.length,at.length);return et.filter(function(it){return it.sets.length==2}).map(function(it){var X=gt[it.sets[0]],Et=gt[it.sets[1]],vt=Math.sqrt(at[X].size/Math.PI),Nt=Math.sqrt(at[Et].size/Math.PI),$t=L(vt,Nt,it.size);k[X][Et]=k[Et][X]=$t;var ee=0;it.size+1e-10>=Math.min(at[X].size,at[Et].size)?ee=1:it.size<=1e-10&&(ee=-1),ot[X][Et]=ot[Et][X]=ee}),{distances:k,constraints:ot}}function Z(et,at,gt,k){var ot=0,it;for(it=0;it<at.length;++it)at[it]=0;for(it=0;it<gt.length;++it)for(var X=et[2*it],Et=et[2*it+1],vt=it+1;vt<gt.length;++vt){var Nt=et[2*vt],$t=et[2*vt+1],ee=gt[it][vt],kt=k[it][vt],Wt=(Nt-X)*(Nt-X)+($t-Et)*($t-Et),ae=Math.sqrt(Wt),le=Wt-ee*ee;kt>0&&ae<=ee||kt<0&&ae>=ee||(ot+=2*le*le,at[2*it]+=4*le*(X-Nt),at[2*it+1]+=4*le*(Et-$t),at[2*vt]+=4*le*(Nt-X),at[2*vt+1]+=4*le*($t-Et))}return ot}function G(et,at){var gt=Y(et,at),k=at.lossFunction||J;if(et.length>=8){var ot=U(et,at),it=k(ot,et),X=k(gt,et);it+1e-8<X&&(gt=ot)}return gt}function U(et,at){at=at||{};var gt=at.restarts||10,k=[],ot={},it;for(it=0;it<et.length;++it){var X=et[it];X.sets.length==1&&(ot[X.sets[0]]=k.length,k.push(X))}var Et=F(et,k,ot),vt=Et.distances,Nt=Et.constraints,$t=_(vt.map(_))/vt.length;vt=vt.map(function(We){return We.map(function(Ye){return Ye/$t})});var ee=function(We,Ye){return Z(We,Ye,vt,Nt)},kt,Wt;for(it=0;it<gt;++it){var ae=b(vt.length*2).map(Math.random);Wt=P(ee,ae,at),(!kt||Wt.fx<kt.fx)&&(kt=Wt)}var le=kt.x,je={};for(it=0;it<k.length;++it){var Oe=k[it];je[Oe.sets[0]]={x:le[2*it]*$t,y:le[2*it+1]*$t,radius:Math.sqrt(Oe.size/Math.PI)}}if(at.history)for(it=0;it<at.history.length;++it)M(at.history[it].x,$t);return je}function Y(et,at){for(var gt=at&&at.lossFunction?at.lossFunction:J,k={},ot={},it,X=0;X<et.length;++X){var Et=et[X];Et.sets.length==1&&(it=Et.sets[0],k[it]={x:1e10,y:1e10,rowid:k.length,size:Et.size,radius:Math.sqrt(Et.size/Math.PI)},ot[it]=[])}for(et=et.filter(function(pe){return pe.sets.length==2}),X=0;X<et.length;++X){var vt=et[X],Nt=vt.hasOwnProperty("weight")?vt.weight:1,$t=vt.sets[0],ee=vt.sets[1];vt.size+O>=Math.min(k[$t].size,k[ee].size)&&(Nt=0),ot[$t].push({set:ee,size:vt.size,weight:Nt}),ot[ee].push({set:$t,size:vt.size,weight:Nt})}var kt=[];for(it in ot)if(ot.hasOwnProperty(it)){var Wt=0;for(X=0;X<ot[it].length;++X)Wt+=ot[it][X].size*ot[it][X].weight;kt.push({set:it,size:Wt})}function ae(pe,Vt){return Vt.size-pe.size}kt.sort(ae);var le={};function je(pe){return pe.set in le}function Oe(pe,Vt){k[Vt].x=pe.x,k[Vt].y=pe.y,le[Vt]=!0}for(Oe({x:0,y:0},kt[0].set),X=1;X<kt.length;++X){var We=kt[X].set,Ye=ot[We].filter(je);if(it=k[We],Ye.sort(ae),Ye.length===0)throw"ERROR: missing pairwise overlap information";for(var wn=[],er=0;er<Ye.length;++er){var wr=k[Ye[er].set],on=L(it.radius,wr.radius,Ye[er].size);wn.push({x:wr.x+on,y:wr.y}),wn.push({x:wr.x-on,y:wr.y}),wn.push({y:wr.y+on,x:wr.x}),wn.push({y:wr.y-on,x:wr.x});for(var en=er+1;en<Ye.length;++en)for(var An=k[Ye[en].set],jn=L(it.radius,An.radius,Ye[en].size),pr=l({x:wr.x,y:wr.y,radius:on},{x:An.x,y:An.y,radius:jn}),di=0;di<pr.length;++di)wn.push(pr[di])}var Ce=1e50,Me=wn[0];for(er=0;er<wn.length;++er){k[We].x=wn[er].x,k[We].y=wn[er].y;var Qt=gt(k,et);Qt<Ce&&(Ce=Qt,Me=wn[er])}Oe(Me,We)}return k}function J(et,at){var gt=0;function k($t){return $t.map(function(ee){return et[ee]})}for(var ot=0;ot<at.length;++ot){var it=at[ot],X;if(it.sets.length!=1){if(it.sets.length==2){var Et=et[it.sets[0]],vt=et[it.sets[1]];X=o(Et.radius,vt.radius,a(Et,vt))}else X=r(k(it.sets));var Nt=it.hasOwnProperty("weight")?it.weight:1;gt+=Nt*(X-it.size)*(X-it.size)}}return gt}function rt(et,at,gt){gt===null?et.sort(function(le,je){return je.radius-le.radius}):et.sort(gt);var k;if(et.length>0){var ot=et[0].x,it=et[0].y;for(k=0;k<et.length;++k)et[k].x-=ot,et[k].y-=it}if(et.length==2){var X=a(et[0],et[1]);X<Math.abs(et[1].radius-et[0].radius)&&(et[1].x=et[0].x+et[0].radius-et[1].radius-1e-10,et[1].y=et[0].y)}if(et.length>1){var Et=Math.atan2(et[1].x,et[1].y)-at,vt=Math.cos(Et),Nt=Math.sin(Et),$t,ee;for(k=0;k<et.length;++k)$t=et[k].x,ee=et[k].y,et[k].x=vt*$t-Nt*ee,et[k].y=Nt*$t+vt*ee}if(et.length>2){for(var kt=Math.atan2(et[2].x,et[2].y)-at;kt<0;)kt+=2*Math.PI;for(;kt>2*Math.PI;)kt-=2*Math.PI;if(kt>Math.PI){var Wt=et[1].y/(1e-10+et[1].x);for(k=0;k<et.length;++k){var ae=(et[k].x+Wt*et[k].y)/(1+Wt*Wt);et[k].x=2*ae-et[k].x,et[k].y=2*ae*Wt-et[k].y}}}}function ft(et){et.map(function(Nt){Nt.parent=Nt});function at(Nt){return Nt.parent!==Nt&&(Nt.parent=at(Nt.parent)),Nt.parent}function gt(Nt,$t){var ee=at(Nt),kt=at($t);ee.parent=kt}for(var k=0;k<et.length;++k)for(var ot=k+1;ot<et.length;++ot){var it=et[k].radius+et[ot].radius;a(et[k],et[ot])+1e-10<it&&gt(et[ot],et[k])}var X={},Et;for(k=0;k<et.length;++k)Et=at(et[k]).parent.setid,Et in X||(X[Et]=[]),X[Et].push(et[k]);et.map(function(Nt){delete Nt.parent});var vt=[];for(Et in X)X.hasOwnProperty(Et)&&vt.push(X[Et]);return vt}function dt(et){var at=function(gt){var k=Math.max.apply(null,et.map(function(it){return it[gt]+it.radius})),ot=Math.min.apply(null,et.map(function(it){return it[gt]-it.radius}));return{max:k,min:ot}};return{xRange:at("x"),yRange:at("y")}}function ut(et,at,gt){at===null&&(at=Math.PI/2);var k=[],ot,it;for(it in et)if(et.hasOwnProperty(it)){var X=et[it];k.push({x:X.x,y:X.y,radius:X.radius,setid:it})}var Et=ft(k);for(ot=0;ot<Et.length;++ot){rt(Et[ot],at,gt);var vt=dt(Et[ot]);Et[ot].size=(vt.xRange.max-vt.xRange.min)*(vt.yRange.max-vt.yRange.min),Et[ot].bounds=vt}Et.sort(function(ae,le){return le.size-ae.size}),k=Et[0];var Nt=k.bounds,$t=(Nt.xRange.max-Nt.xRange.min)/50;function ee(ae,le,je){if(!!ae){var Oe=ae.bounds,We,Ye,wn;le?We=Nt.xRange.max-Oe.xRange.min+$t:(We=Nt.xRange.max-Oe.xRange.max,wn=(Oe.xRange.max-Oe.xRange.min)/2-(Nt.xRange.max-Nt.xRange.min)/2,wn<0&&(We+=wn)),je?Ye=Nt.yRange.max-Oe.yRange.min+$t:(Ye=Nt.yRange.max-Oe.yRange.max,wn=(Oe.yRange.max-Oe.yRange.min)/2-(Nt.yRange.max-Nt.yRange.min)/2,wn<0&&(Ye+=wn));for(var er=0;er<ae.length;++er)ae[er].x+=We,ae[er].y+=Ye,k.push(ae[er])}}for(var kt=1;kt<Et.length;)ee(Et[kt],!0,!1),ee(Et[kt+1],!1,!0),ee(Et[kt+2],!0,!0),kt+=3,Nt=dt(k);var Wt={};for(ot=0;ot<k.length;++ot)Wt[k[ot].setid]=k[ot];return Wt}function Lt(et,at,gt,k){var ot=[],it=[];for(var X in et)et.hasOwnProperty(X)&&(it.push(X),ot.push(et[X]));at-=2*k,gt-=2*k;var Et=dt(ot),vt=Et.xRange,Nt=Et.yRange;if(vt.max==vt.min||Nt.max==Nt.min)return console.log("not scaling solution: zero size detected"),et;for(var $t=at/(vt.max-vt.min),ee=gt/(Nt.max-Nt.min),kt=Math.min(ee,$t),Wt=(at-(vt.max-vt.min)*kt)/2,ae=(gt-(Nt.max-Nt.min)*kt)/2,le={},je=0;je<ot.length;++je){var Oe=ot[je];le[it[je]]={radius:kt*Oe.radius,x:k+Wt+(Oe.x-vt.min)*kt,y:k+ae+(Oe.y-Nt.min)*kt}}return le}function Ft(){var et=600,at=350,gt=15,k=1e3,ot=Math.PI/2,it=!0,X=!0,Et=!0,vt=null,Nt=null,$t={},ee=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],kt=0,Wt=function(Oe){if(Oe in $t)return $t[Oe];var We=$t[Oe]=ee[kt];return kt+=1,kt>=ee.length&&(kt=0),We},ae=A,le=J;function je(Oe){var We=Oe.datum(),Ye={};We.forEach(function(xe){xe.size==0&&xe.sets.length==1&&(Ye[xe.sets[0]]=1)}),We=We.filter(function(xe){return!xe.sets.some(function(Ke){return Ke in Ye})});var wn={},er={};if(We.length>0){var wr=ae(We,{lossFunction:le});it&&(wr=ut(wr,ot,Nt)),wn=Lt(wr,et,at,gt),er=nt(wn,We)}var on={};We.forEach(function(xe){xe.label&&(on[xe.sets]=xe.label)});function en(xe){if(xe.sets in on)return on[xe.sets];if(xe.sets.length==1)return""+xe.sets[0]}Oe.selectAll("svg").data([wn]).enter().append("svg");var An=Oe.select("svg").attr("width",et).attr("height",at),jn={},pr=!1;An.selectAll(".venn-area path").each(function(xe){var Ke=u.select(this).attr("d");xe.sets.length==1&&Ke&&(pr=!0,jn[xe.sets[0]]=Q(Ke))});var di=function(xe){return function(Ke){var Rn=xe.sets.map(function(tr){var Pn=jn[tr],dn=wn[tr];return Pn||(Pn={x:et/2,y:at/2,radius:1}),dn||(dn={x:et/2,y:at/2,radius:1}),{x:Pn.x*(1-Ke)+dn.x*Ke,y:Pn.y*(1-Ke)+dn.y*Ke,radius:Pn.radius*(1-Ke)+dn.radius*Ke}});return ht(Rn)}},Ce=An.selectAll(".venn-area").data(We,function(xe){return xe.sets}),Me=Ce.enter().append("g").attr("class",function(xe){return"venn-area venn-"+(xe.sets.length==1?"circle":"intersection")}).attr("data-venn-sets",function(xe){return xe.sets.join("_")}),Qt=Me.append("path"),pe=Me.append("text").attr("class","label").text(function(xe){return en(xe)}).attr("text-anchor","middle").attr("dy",".35em").attr("x",et/2).attr("y",at/2);Et&&(Qt.style("fill-opacity","0").filter(function(xe){return xe.sets.length==1}).style("fill",function(xe){return Wt(xe.sets)}).style("fill-opacity",".25"),pe.style("fill",function(xe){return xe.sets.length==1?Wt(xe.sets):"#444"}));var Vt=Oe;pr?(Vt=Oe.transition("venn").duration(k),Vt.selectAll("path").attrTween("d",di)):Vt.selectAll("path").attr("d",function(xe){return ht(xe.sets.map(function(Ke){return wn[Ke]}))});var re=Vt.selectAll("text").filter(function(xe){return xe.sets in er}).text(function(xe){return en(xe)}).attr("x",function(xe){return Math.floor(er[xe.sets].x)}).attr("y",function(xe){return Math.floor(er[xe.sets].y)});X&&(pr?"on"in re?re.on("end",Ot(wn,en)):re.each("end",Ot(wn,en)):re.each(Ot(wn,en)));var Te=Ce.exit().transition("venn").duration(k).remove();Te.selectAll("path").attrTween("d",di);var ue=Te.selectAll("text").attr("x",et/2).attr("y",at/2);return vt!==null&&(pe.style("font-size","0px"),re.style("font-size",vt),ue.style("font-size","0px")),{circles:wn,textCentres:er,nodes:Ce,enter:Me,update:Vt,exit:Te}}return je.wrap=function(Oe){return arguments.length?(X=Oe,je):X},je.width=function(Oe){return arguments.length?(et=Oe,je):et},je.height=function(Oe){return arguments.length?(at=Oe,je):at},je.padding=function(Oe){return arguments.length?(gt=Oe,je):gt},je.colours=function(Oe){return arguments.length?(Wt=Oe,je):Wt},je.fontSize=function(Oe){return arguments.length?(vt=Oe,je):vt},je.duration=function(Oe){return arguments.length?(k=Oe,je):k},je.layoutFunction=function(Oe){return arguments.length?(ae=Oe,je):ae},je.normalize=function(Oe){return arguments.length?(it=Oe,je):it},je.styled=function(Oe){return arguments.length?(Et=Oe,je):Et},je.orientation=function(Oe){return arguments.length?(ot=Oe,je):ot},je.orientationOrder=function(Oe){return arguments.length?(Nt=Oe,je):Nt},je.lossFunction=function(Oe){return arguments.length?(le=Oe,je):le},je}function Ot(et,at){return function(){for(var gt=u.select(this),k=gt.datum(),ot=et[k.sets[0]].radius||50,it=at(k)||"",X=it.split(/\s+/).reverse(),Et=3,vt=(it.length+X.length)/Et,Nt=X.pop(),$t=[Nt],ee,kt=0,Wt=1.1,ae=gt.text(null).append("tspan").text(Nt);Nt=X.pop(),!!Nt;)$t.push(Nt),ee=$t.join(" "),ae.text(ee),ee.length>vt&&ae.node().getComputedTextLength()>ot&&($t.pop(),ae.text($t.join(" ")),$t=[Nt],ae=gt.append("tspan").text(Nt),kt++);var le=.35-kt*Wt/2,je=gt.attr("x"),Oe=gt.attr("y");gt.selectAll("tspan").attr("x",je).attr("y",Oe).attr("dy",function(We,Ye){return le+Ye*Wt+"em"})}}function St(et,at,gt){var k=at[0].radius-a(at[0],et),ot,it;for(ot=1;ot<at.length;++ot)it=at[ot].radius-a(at[ot],et),it<=k&&(k=it);for(ot=0;ot<gt.length;++ot)it=a(gt[ot],et)-gt[ot].radius,it<=k&&(k=it);return k}function xt(et,at){var gt=[],k;for(k=0;k<et.length;++k){var ot=et[k];gt.push({x:ot.x,y:ot.y}),gt.push({x:ot.x+ot.radius/2,y:ot.y}),gt.push({x:ot.x-ot.radius/2,y:ot.y}),gt.push({x:ot.x,y:ot.y+ot.radius/2}),gt.push({x:ot.x,y:ot.y-ot.radius/2})}var it=gt[0],X=St(gt[0],et,at);for(k=1;k<gt.length;++k){var Et=St(gt[k],et,at);Et>=X&&(it=gt[k],X=Et)}var vt=y(function(kt){return-1*St({x:kt[0],y:kt[1]},et,at)},[it.x,it.y],{maxIterations:500,minErrorDelta:1e-10}).x,Nt={x:vt[0],y:vt[1]},$t=!0;for(k=0;k<et.length;++k)if(a(Nt,et[k])>et[k].radius){$t=!1;break}for(k=0;k<at.length;++k)if(a(Nt,at[k])<at[k].radius){$t=!1;break}if(!$t)if(et.length==1)Nt={x:et[0].x,y:et[0].y};else{var ee={};r(et,ee),ee.arcs.length===0?Nt={x:0,y:-1e3,disjoint:!0}:ee.arcs.length==1?Nt={x:ee.arcs[0].circle.x,y:ee.arcs[0].circle.y}:at.length?Nt=xt(et,[]):Nt=f(ee.arcs.map(function(kt){return kt.p1}))}return Nt}function At(et){var at={},gt=[];for(var k in et)gt.push(k),at[k]=[];for(var ot=0;ot<gt.length;ot++)for(var it=et[gt[ot]],X=ot+1;X<gt.length;++X){var Et=et[gt[X]],vt=a(it,Et);vt+Et.radius<=it.radius+1e-10?at[gt[X]].push(gt[ot]):vt+it.radius<=Et.radius+1e-10&&at[gt[ot]].push(gt[X])}return at}function nt(et,at){for(var gt={},k=At(et),ot=0;ot<at.length;++ot){for(var it=at[ot].sets,X={},Et={},vt=0;vt<it.length;++vt){X[it[vt]]=!0;for(var Nt=k[it[vt]],$t=0;$t<Nt.length;++$t)Et[Nt[$t]]=!0}var ee=[],kt=[];for(var Wt in et)Wt in X?ee.push(et[Wt]):Wt in Et||kt.push(et[Wt]);var ae=xt(ee,kt);gt[it]=ae,ae.disjoint&&at[ot].size>0&&console.log("WARNING: area "+it+" not represented on screen")}return gt}function Mt(et,at){for(var gt=At(et.selectAll("svg").datum()),k={},ot=0;ot<at.sets.length;++ot){var it=at.sets[ot];for(var X in gt)for(var Et=gt[X],vt=0;vt<Et.length;++vt)if(Et[vt]==it){k[X]=!0;break}}function Nt($t){for(var ee=0;ee<$t.length;++ee)if(!($t[ee]in k))return!1;return!0}et.selectAll("g").sort(function($t,ee){return $t.sets.length!=ee.sets.length?$t.sets.length-ee.sets.length:$t==at?Nt(ee.sets)?-1:1:ee==at?Nt($t.sets)?1:-1:ee.size-$t.size})}function z(et,at,gt){var k=[];return k.push(`
M`,et,at),k.push(`
m`,-gt,0),k.push(`
a`,gt,gt,0,1,0,gt*2,0),k.push(`
a`,gt,gt,0,1,0,-gt*2,0),k.join(" ")}function Q(et){var at=et.split(" ");return{x:parseFloat(at[1]),y:parseFloat(at[2]),radius:-parseFloat(at[4])}}function ht(et){var at={};r(et,at);var gt=at.arcs;if(gt.length===0)return"M 0 0";if(gt.length==1){var k=gt[0].circle;return z(k.x,k.y,k.radius)}else{for(var ot=[`
M`,gt[0].p2.x,gt[0].p2.y],it=0;it<gt.length;++it){var X=gt[it],Et=X.circle.radius,vt=X.width>Et;ot.push(`
A`,Et,Et,0,vt?1:0,1,X.p1.x,X.p1.y)}return ot.join(" ")}}t.intersectionArea=r,t.circleCircleIntersection=l,t.circleOverlap=o,t.circleArea=i,t.distance=a,t.venn=A,t.greedyLayout=Y,t.scaleSolution=Lt,t.normalizeSolution=ut,t.bestInitialLayout=G,t.lossFunction=J,t.disjointCluster=ft,t.distanceFromIntersectArea=L,t.VennDiagram=Ft,t.wrapText=Ot,t.computeTextCentres=nt,t.computeTextCentre=xt,t.sortAreas=Mt,t.circlePath=z,t.circleFromPath=Q,t.intersectionAreaPath=ht,Object.defineProperty(t,"__esModule",{value:!0})})},function(E,T,e){"use strict";var t=function(){};t=function(u,s,c){var r=arguments.length;c=new Array(r>2?r-2:0);for(var h=2;h<r;h++)c[h-2]=arguments[h];if(s===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(s.length<10||/^[s\W]*$/.test(s))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+s);if(!u){var n=0,i="Warning: "+s.replace(/%s/g,function(){return c[n++]});typeof console!="undefined"&&console.error(i);try{throw new Error(i)}catch(a){}}},E.exports=t},function(E,T,e){e(64),E.exports=e(64)}])})},yU0y:function(Se,ct,R){"use strict";R.d(ct,"b",function(){return V}),R.d(ct,"a",function(){return E}),R.d(ct,"c",function(){return T});var V=1e-6,E=typeof Float32Array!="undefined"?Float32Array:Array,T=Math.random;function e(c){E=c}var t=Math.PI/180;function u(c){return c*t}function s(c,r){return Math.abs(c-r)<=V*Math.max(1,Math.abs(c),Math.abs(r))}Math.hypot||(Math.hypot=function(){for(var c=0,r=arguments.length;r--;)c+=arguments[r]*arguments[r];return Math.sqrt(c)})},yXPU:function(Se,ct){function R(E,T,e,t,u,s,c){try{var r=E[s](c),h=r.value}catch(n){e(n);return}r.done?T(h):Promise.resolve(h).then(t,u)}function V(E){return function(){var T=this,e=arguments;return new Promise(function(t,u){var s=E.apply(T,e);function c(h){R(s,t,u,c,r,"next",h)}function r(h){R(s,t,u,c,r,"throw",h)}c(void 0)})}}Se.exports=V,Se.exports.default=Se.exports,Se.exports.__esModule=!0},ycre:function(Se,ct,R){var V=R("711d"),E=V("length");Se.exports=E},z4Hk:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.BindingWhenSyntax=void 0;var V=R("406g"),E=R("RR/i"),T=function(){function e(t){this._binding=t}return e.prototype.when=function(t){return this._binding.constraint=t,new V.BindingOnSyntax(this._binding)},e.prototype.whenTargetNamed=function(t){return this._binding.constraint=E.namedConstraint(t),new V.BindingOnSyntax(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){var u=t.target!==null&&!t.target.isNamed()&&!t.target.isTagged();return u},new V.BindingOnSyntax(this._binding)},e.prototype.whenTargetTagged=function(t,u){return this._binding.constraint=E.taggedConstraint(t)(u),new V.BindingOnSyntax(this._binding)},e.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(u){return E.typeConstraint(t)(u.parentRequest)},new V.BindingOnSyntax(this._binding)},e.prototype.whenParentNamed=function(t){return this._binding.constraint=function(u){return E.namedConstraint(t)(u.parentRequest)},new V.BindingOnSyntax(this._binding)},e.prototype.whenParentTagged=function(t,u){return this._binding.constraint=function(s){return E.taggedConstraint(t)(u)(s.parentRequest)},new V.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(u){return E.traverseAncerstors(u,E.typeConstraint(t))},new V.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(u){return!E.traverseAncerstors(u,E.typeConstraint(t))},new V.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(u){return E.traverseAncerstors(u,E.namedConstraint(t))},new V.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(u){return!E.traverseAncerstors(u,E.namedConstraint(t))},new V.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorTagged=function(t,u){return this._binding.constraint=function(s){return E.traverseAncerstors(s,E.taggedConstraint(t)(u))},new V.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorTagged=function(t,u){return this._binding.constraint=function(s){return!E.traverseAncerstors(s,E.taggedConstraint(t)(u))},new V.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(u){return E.traverseAncerstors(u,t)},new V.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(u){return!E.traverseAncerstors(u,t)},new V.BindingOnSyntax(this._binding)},e}();ct.BindingWhenSyntax=T},zEVN:function(Se,ct,R){var V=R("Gi0A"),E=R("sEf8"),T=R("mdPL"),e=T&&T.isMap,t=e?E(e):V;Se.exports=t},zZ0H:function(Se,ct){function R(V){return V}Se.exports=R},zZPE:function(Se,ct){var R="[object Object]";function V(i){var a=!1;if(i!=null&&typeof i.toString!="function")try{a=!!(i+"")}catch(o){}return a}function E(i,a){return function(o){return i(a(o))}}var T=Function.prototype,e=Object.prototype,t=T.toString,u=e.hasOwnProperty,s=t.call(Object),c=e.toString,r=E(Object.getPrototypeOf,Object);function h(i){return!!i&&typeof i=="object"}function n(i){if(!h(i)||c.call(i)!=R||V(i))return!1;var a=r(i);if(a===null)return!0;var o=u.call(a,"constructor")&&a.constructor;return typeof o=="function"&&o instanceof o&&t.call(o)==s}Se.exports=n},zoYe:function(Se,ct,R){var V=R("nmnc"),E=R("eUgh"),T=R("Z0cm"),e=R("/9aa"),t=1/0,u=V?V.prototype:void 0,s=u?u.toString:void 0;function c(r){if(typeof r=="string")return r;if(T(r))return E(r,c)+"";if(e(r))return s?s.call(r):"";var h=r+"";return h=="0"&&1/r==-t?"-0":h}Se.exports=c},zvhG:function(Se,ct){Se.exports=R;function R(V,E,T,e){this.cx=3*V,this.bx=3*(T-V)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*E,this.by=3*(e-E)-this.cy,this.ay=1-this.cy-this.by,this.p1x=V,this.p1y=e,this.p2x=T,this.p2y=e}R.prototype.sampleCurveX=function(V){return((this.ax*V+this.bx)*V+this.cx)*V},R.prototype.sampleCurveY=function(V){return((this.ay*V+this.by)*V+this.cy)*V},R.prototype.sampleCurveDerivativeX=function(V){return(3*this.ax*V+2*this.bx)*V+this.cx},R.prototype.solveCurveX=function(V,E){typeof E=="undefined"&&(E=1e-6);var T,e,t,u,s;for(t=V,s=0;s<8;s++){if(u=this.sampleCurveX(t)-V,Math.abs(u)<E)return t;var c=this.sampleCurveDerivativeX(t);if(Math.abs(c)<1e-6)break;t=t-u/c}if(T=0,e=1,t=V,t<T)return T;if(t>e)return e;for(;T<e;){if(u=this.sampleCurveX(t),Math.abs(u-V)<E)return t;V>u?T=t:e=t,t=(e-T)*.5+T}return t},R.prototype.solve=function(V,E){return this.sampleCurveY(this.solveCurveX(V,E))}},zxMA:function(Se,ct,R){"use strict";Object.defineProperty(ct,"__esModule",{value:!0}),ct.QueryableString=void 0;var V=function(){function E(T){this.str=T}return E.prototype.startsWith=function(T){return this.str.indexOf(T)===0},E.prototype.endsWith=function(T){var e="",t=T.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},t)},E.prototype.contains=function(T){return this.str.indexOf(T)!==-1},E.prototype.equals=function(T){return this.str===T},E.prototype.value=function(){return this.str},E}();ct.QueryableString=V}}]);
